ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 1


   1              		.cpu cortex-m3
   2              		.arch armv7-m
   3              		.fpu softvfp
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"ff.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.file 1 "DRIVER/FatFs/source/ff.c"
  18              		.section	.text.ld_word,"ax",%progbits
  19              		.align	1
  20              		.syntax unified
  21              		.thumb
  22              		.thumb_func
  24              	ld_word:
  25              	.LVL0:
  26              	.LFB0:
   1:DRIVER/FatFs/source/ff.c **** /*----------------------------------------------------------------------------/
   2:DRIVER/FatFs/source/ff.c **** /  FatFs - Generic FAT Filesystem Module  R0.15 w/patch1                      /
   3:DRIVER/FatFs/source/ff.c **** /-----------------------------------------------------------------------------/
   4:DRIVER/FatFs/source/ff.c **** /
   5:DRIVER/FatFs/source/ff.c **** / Copyright (C) 2022, ChaN, all right reserved.
   6:DRIVER/FatFs/source/ff.c **** /
   7:DRIVER/FatFs/source/ff.c **** / FatFs module is an open source software. Redistribution and use of FatFs in
   8:DRIVER/FatFs/source/ff.c **** / source and binary forms, with or without modification, are permitted provided
   9:DRIVER/FatFs/source/ff.c **** / that the following condition is met:
  10:DRIVER/FatFs/source/ff.c **** /
  11:DRIVER/FatFs/source/ff.c **** / 1. Redistributions of source code must retain the above copyright notice,
  12:DRIVER/FatFs/source/ff.c **** /    this condition and the following disclaimer.
  13:DRIVER/FatFs/source/ff.c **** /
  14:DRIVER/FatFs/source/ff.c **** / This software is provided by the copyright holder and contributors "AS IS"
  15:DRIVER/FatFs/source/ff.c **** / and any warranties related to this software are DISCLAIMED.
  16:DRIVER/FatFs/source/ff.c **** / The copyright owner or contributors be NOT LIABLE for any damages caused
  17:DRIVER/FatFs/source/ff.c **** / by use of this software.
  18:DRIVER/FatFs/source/ff.c **** /
  19:DRIVER/FatFs/source/ff.c **** /----------------------------------------------------------------------------*/
  20:DRIVER/FatFs/source/ff.c **** 
  21:DRIVER/FatFs/source/ff.c **** 
  22:DRIVER/FatFs/source/ff.c **** #include <string.h>
  23:DRIVER/FatFs/source/ff.c **** #include "ff.h"			/* Declarations of FatFs API */
  24:DRIVER/FatFs/source/ff.c **** #include "diskio.h"		/* Declarations of device I/O functions */
  25:DRIVER/FatFs/source/ff.c **** 
  26:DRIVER/FatFs/source/ff.c **** 
  27:DRIVER/FatFs/source/ff.c **** /*--------------------------------------------------------------------------
  28:DRIVER/FatFs/source/ff.c **** 
  29:DRIVER/FatFs/source/ff.c ****    Module Private Definitions
  30:DRIVER/FatFs/source/ff.c **** 
  31:DRIVER/FatFs/source/ff.c **** ---------------------------------------------------------------------------*/
  32:DRIVER/FatFs/source/ff.c **** 
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 2


  33:DRIVER/FatFs/source/ff.c **** #if FF_DEFINED != 80286	/* Revision ID */
  34:DRIVER/FatFs/source/ff.c **** #error Wrong include file (ff.h).
  35:DRIVER/FatFs/source/ff.c **** #endif
  36:DRIVER/FatFs/source/ff.c **** 
  37:DRIVER/FatFs/source/ff.c **** 
  38:DRIVER/FatFs/source/ff.c **** /* Limits and boundaries */
  39:DRIVER/FatFs/source/ff.c **** #define MAX_DIR		0x200000		/* Max size of FAT directory */
  40:DRIVER/FatFs/source/ff.c **** #define MAX_DIR_EX	0x10000000		/* Max size of exFAT directory */
  41:DRIVER/FatFs/source/ff.c **** #define MAX_FAT12	0xFF5			/* Max FAT12 clusters (differs from specs, but right for real DOS/Windows
  42:DRIVER/FatFs/source/ff.c **** #define MAX_FAT16	0xFFF5			/* Max FAT16 clusters (differs from specs, but right for real DOS/Window
  43:DRIVER/FatFs/source/ff.c **** #define MAX_FAT32	0x0FFFFFF5		/* Max FAT32 clusters (not specified, practical limit) */
  44:DRIVER/FatFs/source/ff.c **** #define MAX_EXFAT	0x7FFFFFFD		/* Max exFAT clusters (differs from specs, implementation limit) */
  45:DRIVER/FatFs/source/ff.c **** 
  46:DRIVER/FatFs/source/ff.c **** 
  47:DRIVER/FatFs/source/ff.c **** /* Character code support macros */
  48:DRIVER/FatFs/source/ff.c **** #define IsUpper(c)		((c) >= 'A' && (c) <= 'Z')
  49:DRIVER/FatFs/source/ff.c **** #define IsLower(c)		((c) >= 'a' && (c) <= 'z')
  50:DRIVER/FatFs/source/ff.c **** #define IsDigit(c)		((c) >= '0' && (c) <= '9')
  51:DRIVER/FatFs/source/ff.c **** #define IsSeparator(c)	((c) == '/' || (c) == '\\')
  52:DRIVER/FatFs/source/ff.c **** #define IsTerminator(c)	((UINT)(c) < (FF_USE_LFN ? ' ' : '!'))
  53:DRIVER/FatFs/source/ff.c **** #define IsSurrogate(c)	((c) >= 0xD800 && (c) <= 0xDFFF)
  54:DRIVER/FatFs/source/ff.c **** #define IsSurrogateH(c)	((c) >= 0xD800 && (c) <= 0xDBFF)
  55:DRIVER/FatFs/source/ff.c **** #define IsSurrogateL(c)	((c) >= 0xDC00 && (c) <= 0xDFFF)
  56:DRIVER/FatFs/source/ff.c **** 
  57:DRIVER/FatFs/source/ff.c **** 
  58:DRIVER/FatFs/source/ff.c **** /* Additional file access control and file status flags for internal use */
  59:DRIVER/FatFs/source/ff.c **** #define FA_SEEKEND	0x20	/* Seek to end of the file on file open */
  60:DRIVER/FatFs/source/ff.c **** #define FA_MODIFIED	0x40	/* File has been modified */
  61:DRIVER/FatFs/source/ff.c **** #define FA_DIRTY	0x80	/* FIL.buf[] needs to be written-back */
  62:DRIVER/FatFs/source/ff.c **** 
  63:DRIVER/FatFs/source/ff.c **** 
  64:DRIVER/FatFs/source/ff.c **** /* Additional file attribute bits for internal use */
  65:DRIVER/FatFs/source/ff.c **** #define AM_VOL		0x08	/* Volume label */
  66:DRIVER/FatFs/source/ff.c **** #define AM_LFN		0x0F	/* LFN entry */
  67:DRIVER/FatFs/source/ff.c **** #define AM_MASK		0x3F	/* Mask of defined bits in FAT */
  68:DRIVER/FatFs/source/ff.c **** #define AM_MASKX	0x37	/* Mask of defined bits in exFAT */
  69:DRIVER/FatFs/source/ff.c **** 
  70:DRIVER/FatFs/source/ff.c **** 
  71:DRIVER/FatFs/source/ff.c **** /* Name status flags in fn[11] */
  72:DRIVER/FatFs/source/ff.c **** #define NSFLAG		11		/* Index of the name status byte */
  73:DRIVER/FatFs/source/ff.c **** #define NS_LOSS		0x01	/* Out of 8.3 format */
  74:DRIVER/FatFs/source/ff.c **** #define NS_LFN		0x02	/* Force to create LFN entry */
  75:DRIVER/FatFs/source/ff.c **** #define NS_LAST		0x04	/* Last segment */
  76:DRIVER/FatFs/source/ff.c **** #define NS_BODY		0x08	/* Lower case flag (body) */
  77:DRIVER/FatFs/source/ff.c **** #define NS_EXT		0x10	/* Lower case flag (ext) */
  78:DRIVER/FatFs/source/ff.c **** #define NS_DOT		0x20	/* Dot entry */
  79:DRIVER/FatFs/source/ff.c **** #define NS_NOLFN	0x40	/* Do not find LFN */
  80:DRIVER/FatFs/source/ff.c **** #define NS_NONAME	0x80	/* Not followed */
  81:DRIVER/FatFs/source/ff.c **** 
  82:DRIVER/FatFs/source/ff.c **** 
  83:DRIVER/FatFs/source/ff.c **** /* exFAT directory entry types */
  84:DRIVER/FatFs/source/ff.c **** #define	ET_BITMAP	0x81	/* Allocation bitmap */
  85:DRIVER/FatFs/source/ff.c **** #define	ET_UPCASE	0x82	/* Up-case table */
  86:DRIVER/FatFs/source/ff.c **** #define	ET_VLABEL	0x83	/* Volume label */
  87:DRIVER/FatFs/source/ff.c **** #define	ET_FILEDIR	0x85	/* File and directory */
  88:DRIVER/FatFs/source/ff.c **** #define	ET_STREAM	0xC0	/* Stream extension */
  89:DRIVER/FatFs/source/ff.c **** #define	ET_FILENAME	0xC1	/* Name extension */
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 3


  90:DRIVER/FatFs/source/ff.c **** 
  91:DRIVER/FatFs/source/ff.c **** 
  92:DRIVER/FatFs/source/ff.c **** /* FatFs refers the FAT structure as simple byte array instead of structure member
  93:DRIVER/FatFs/source/ff.c **** / because the C structure is not binary compatible between different platforms */
  94:DRIVER/FatFs/source/ff.c **** 
  95:DRIVER/FatFs/source/ff.c **** #define BS_JmpBoot			0		/* x86 jump instruction (3-byte) */
  96:DRIVER/FatFs/source/ff.c **** #define BS_OEMName			3		/* OEM name (8-byte) */
  97:DRIVER/FatFs/source/ff.c **** #define BPB_BytsPerSec		11		/* Sector size [byte] (WORD) */
  98:DRIVER/FatFs/source/ff.c **** #define BPB_SecPerClus		13		/* Cluster size [sector] (BYTE) */
  99:DRIVER/FatFs/source/ff.c **** #define BPB_RsvdSecCnt		14		/* Size of reserved area [sector] (WORD) */
 100:DRIVER/FatFs/source/ff.c **** #define BPB_NumFATs			16		/* Number of FATs (BYTE) */
 101:DRIVER/FatFs/source/ff.c **** #define BPB_RootEntCnt		17		/* Size of root directory area for FAT [entry] (WORD) */
 102:DRIVER/FatFs/source/ff.c **** #define BPB_TotSec16		19		/* Volume size (16-bit) [sector] (WORD) */
 103:DRIVER/FatFs/source/ff.c **** #define BPB_Media			21		/* Media descriptor byte (BYTE) */
 104:DRIVER/FatFs/source/ff.c **** #define BPB_FATSz16			22		/* FAT size (16-bit) [sector] (WORD) */
 105:DRIVER/FatFs/source/ff.c **** #define BPB_SecPerTrk		24		/* Number of sectors per track for int13h [sector] (WORD) */
 106:DRIVER/FatFs/source/ff.c **** #define BPB_NumHeads		26		/* Number of heads for int13h (WORD) */
 107:DRIVER/FatFs/source/ff.c **** #define BPB_HiddSec			28		/* Volume offset from top of the drive (DWORD) */
 108:DRIVER/FatFs/source/ff.c **** #define BPB_TotSec32		32		/* Volume size (32-bit) [sector] (DWORD) */
 109:DRIVER/FatFs/source/ff.c **** #define BS_DrvNum			36		/* Physical drive number for int13h (BYTE) */
 110:DRIVER/FatFs/source/ff.c **** #define BS_NTres			37		/* WindowsNT error flag (BYTE) */
 111:DRIVER/FatFs/source/ff.c **** #define BS_BootSig			38		/* Extended boot signature (BYTE) */
 112:DRIVER/FatFs/source/ff.c **** #define BS_VolID			39		/* Volume serial number (DWORD) */
 113:DRIVER/FatFs/source/ff.c **** #define BS_VolLab			43		/* Volume label string (8-byte) */
 114:DRIVER/FatFs/source/ff.c **** #define BS_FilSysType		54		/* Filesystem type string (8-byte) */
 115:DRIVER/FatFs/source/ff.c **** #define BS_BootCode			62		/* Boot code (448-byte) */
 116:DRIVER/FatFs/source/ff.c **** #define BS_55AA				510		/* Signature word (WORD) */
 117:DRIVER/FatFs/source/ff.c **** 
 118:DRIVER/FatFs/source/ff.c **** #define BPB_FATSz32			36		/* FAT32: FAT size [sector] (DWORD) */
 119:DRIVER/FatFs/source/ff.c **** #define BPB_ExtFlags32		40		/* FAT32: Extended flags (WORD) */
 120:DRIVER/FatFs/source/ff.c **** #define BPB_FSVer32			42		/* FAT32: Filesystem version (WORD) */
 121:DRIVER/FatFs/source/ff.c **** #define BPB_RootClus32		44		/* FAT32: Root directory cluster (DWORD) */
 122:DRIVER/FatFs/source/ff.c **** #define BPB_FSInfo32		48		/* FAT32: Offset of FSINFO sector (WORD) */
 123:DRIVER/FatFs/source/ff.c **** #define BPB_BkBootSec32		50		/* FAT32: Offset of backup boot sector (WORD) */
 124:DRIVER/FatFs/source/ff.c **** #define BS_DrvNum32			64		/* FAT32: Physical drive number for int13h (BYTE) */
 125:DRIVER/FatFs/source/ff.c **** #define BS_NTres32			65		/* FAT32: Error flag (BYTE) */
 126:DRIVER/FatFs/source/ff.c **** #define BS_BootSig32		66		/* FAT32: Extended boot signature (BYTE) */
 127:DRIVER/FatFs/source/ff.c **** #define BS_VolID32			67		/* FAT32: Volume serial number (DWORD) */
 128:DRIVER/FatFs/source/ff.c **** #define BS_VolLab32			71		/* FAT32: Volume label string (8-byte) */
 129:DRIVER/FatFs/source/ff.c **** #define BS_FilSysType32		82		/* FAT32: Filesystem type string (8-byte) */
 130:DRIVER/FatFs/source/ff.c **** #define BS_BootCode32		90		/* FAT32: Boot code (420-byte) */
 131:DRIVER/FatFs/source/ff.c **** 
 132:DRIVER/FatFs/source/ff.c **** #define BPB_ZeroedEx		11		/* exFAT: MBZ field (53-byte) */
 133:DRIVER/FatFs/source/ff.c **** #define BPB_VolOfsEx		64		/* exFAT: Volume offset from top of the drive [sector] (QWORD) */
 134:DRIVER/FatFs/source/ff.c **** #define BPB_TotSecEx		72		/* exFAT: Volume size [sector] (QWORD) */
 135:DRIVER/FatFs/source/ff.c **** #define BPB_FatOfsEx		80		/* exFAT: FAT offset from top of the volume [sector] (DWORD) */
 136:DRIVER/FatFs/source/ff.c **** #define BPB_FatSzEx			84		/* exFAT: FAT size [sector] (DWORD) */
 137:DRIVER/FatFs/source/ff.c **** #define BPB_DataOfsEx		88		/* exFAT: Data offset from top of the volume [sector] (DWORD) */
 138:DRIVER/FatFs/source/ff.c **** #define BPB_NumClusEx		92		/* exFAT: Number of clusters (DWORD) */
 139:DRIVER/FatFs/source/ff.c **** #define BPB_RootClusEx		96		/* exFAT: Root directory start cluster (DWORD) */
 140:DRIVER/FatFs/source/ff.c **** #define BPB_VolIDEx			100		/* exFAT: Volume serial number (DWORD) */
 141:DRIVER/FatFs/source/ff.c **** #define BPB_FSVerEx			104		/* exFAT: Filesystem version (WORD) */
 142:DRIVER/FatFs/source/ff.c **** #define BPB_VolFlagEx		106		/* exFAT: Volume flags (WORD) */
 143:DRIVER/FatFs/source/ff.c **** #define BPB_BytsPerSecEx	108		/* exFAT: Log2 of sector size in unit of byte (BYTE) */
 144:DRIVER/FatFs/source/ff.c **** #define BPB_SecPerClusEx	109		/* exFAT: Log2 of cluster size in unit of sector (BYTE) */
 145:DRIVER/FatFs/source/ff.c **** #define BPB_NumFATsEx		110		/* exFAT: Number of FATs (BYTE) */
 146:DRIVER/FatFs/source/ff.c **** #define BPB_DrvNumEx		111		/* exFAT: Physical drive number for int13h (BYTE) */
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 4


 147:DRIVER/FatFs/source/ff.c **** #define BPB_PercInUseEx		112		/* exFAT: Percent in use (BYTE) */
 148:DRIVER/FatFs/source/ff.c **** #define BPB_RsvdEx			113		/* exFAT: Reserved (7-byte) */
 149:DRIVER/FatFs/source/ff.c **** #define BS_BootCodeEx		120		/* exFAT: Boot code (390-byte) */
 150:DRIVER/FatFs/source/ff.c **** 
 151:DRIVER/FatFs/source/ff.c **** #define DIR_Name			0		/* Short file name (11-byte) */
 152:DRIVER/FatFs/source/ff.c **** #define DIR_Attr			11		/* Attribute (BYTE) */
 153:DRIVER/FatFs/source/ff.c **** #define DIR_NTres			12		/* Lower case flag (BYTE) */
 154:DRIVER/FatFs/source/ff.c **** #define DIR_CrtTime10		13		/* Created time sub-second (BYTE) */
 155:DRIVER/FatFs/source/ff.c **** #define DIR_CrtTime			14		/* Created time (DWORD) */
 156:DRIVER/FatFs/source/ff.c **** #define DIR_LstAccDate		18		/* Last accessed date (WORD) */
 157:DRIVER/FatFs/source/ff.c **** #define DIR_FstClusHI		20		/* Higher 16-bit of first cluster (WORD) */
 158:DRIVER/FatFs/source/ff.c **** #define DIR_ModTime			22		/* Modified time (DWORD) */
 159:DRIVER/FatFs/source/ff.c **** #define DIR_FstClusLO		26		/* Lower 16-bit of first cluster (WORD) */
 160:DRIVER/FatFs/source/ff.c **** #define DIR_FileSize		28		/* File size (DWORD) */
 161:DRIVER/FatFs/source/ff.c **** #define LDIR_Ord			0		/* LFN: LFN order and LLE flag (BYTE) */
 162:DRIVER/FatFs/source/ff.c **** #define LDIR_Attr			11		/* LFN: LFN attribute (BYTE) */
 163:DRIVER/FatFs/source/ff.c **** #define LDIR_Type			12		/* LFN: Entry type (BYTE) */
 164:DRIVER/FatFs/source/ff.c **** #define LDIR_Chksum			13		/* LFN: Checksum of the SFN (BYTE) */
 165:DRIVER/FatFs/source/ff.c **** #define LDIR_FstClusLO		26		/* LFN: MBZ field (WORD) */
 166:DRIVER/FatFs/source/ff.c **** #define XDIR_Type			0		/* exFAT: Type of exFAT directory entry (BYTE) */
 167:DRIVER/FatFs/source/ff.c **** #define XDIR_NumLabel		1		/* exFAT: Number of volume label characters (BYTE) */
 168:DRIVER/FatFs/source/ff.c **** #define XDIR_Label			2		/* exFAT: Volume label (11-WORD) */
 169:DRIVER/FatFs/source/ff.c **** #define XDIR_CaseSum		4		/* exFAT: Sum of case conversion table (DWORD) */
 170:DRIVER/FatFs/source/ff.c **** #define XDIR_NumSec			1		/* exFAT: Number of secondary entries (BYTE) */
 171:DRIVER/FatFs/source/ff.c **** #define XDIR_SetSum			2		/* exFAT: Sum of the set of directory entries (WORD) */
 172:DRIVER/FatFs/source/ff.c **** #define XDIR_Attr			4		/* exFAT: File attribute (WORD) */
 173:DRIVER/FatFs/source/ff.c **** #define XDIR_CrtTime		8		/* exFAT: Created time (DWORD) */
 174:DRIVER/FatFs/source/ff.c **** #define XDIR_ModTime		12		/* exFAT: Modified time (DWORD) */
 175:DRIVER/FatFs/source/ff.c **** #define XDIR_AccTime		16		/* exFAT: Last accessed time (DWORD) */
 176:DRIVER/FatFs/source/ff.c **** #define XDIR_CrtTime10		20		/* exFAT: Created time subsecond (BYTE) */
 177:DRIVER/FatFs/source/ff.c **** #define XDIR_ModTime10		21		/* exFAT: Modified time subsecond (BYTE) */
 178:DRIVER/FatFs/source/ff.c **** #define XDIR_CrtTZ			22		/* exFAT: Created timezone (BYTE) */
 179:DRIVER/FatFs/source/ff.c **** #define XDIR_ModTZ			23		/* exFAT: Modified timezone (BYTE) */
 180:DRIVER/FatFs/source/ff.c **** #define XDIR_AccTZ			24		/* exFAT: Last accessed timezone (BYTE) */
 181:DRIVER/FatFs/source/ff.c **** #define XDIR_GenFlags		33		/* exFAT: General secondary flags (BYTE) */
 182:DRIVER/FatFs/source/ff.c **** #define XDIR_NumName		35		/* exFAT: Number of file name characters (BYTE) */
 183:DRIVER/FatFs/source/ff.c **** #define XDIR_NameHash		36		/* exFAT: Hash of file name (WORD) */
 184:DRIVER/FatFs/source/ff.c **** #define XDIR_ValidFileSize	40		/* exFAT: Valid file size (QWORD) */
 185:DRIVER/FatFs/source/ff.c **** #define XDIR_FstClus		52		/* exFAT: First cluster of the file data (DWORD) */
 186:DRIVER/FatFs/source/ff.c **** #define XDIR_FileSize		56		/* exFAT: File/Directory size (QWORD) */
 187:DRIVER/FatFs/source/ff.c **** 
 188:DRIVER/FatFs/source/ff.c **** #define SZDIRE				32		/* Size of a directory entry */
 189:DRIVER/FatFs/source/ff.c **** #define DDEM				0xE5	/* Deleted directory entry mark set to DIR_Name[0] */
 190:DRIVER/FatFs/source/ff.c **** #define RDDEM				0x05	/* Replacement of the character collides with DDEM */
 191:DRIVER/FatFs/source/ff.c **** #define LLEF				0x40	/* Last long entry flag in LDIR_Ord */
 192:DRIVER/FatFs/source/ff.c **** 
 193:DRIVER/FatFs/source/ff.c **** #define FSI_LeadSig			0		/* FAT32 FSI: Leading signature (DWORD) */
 194:DRIVER/FatFs/source/ff.c **** #define FSI_StrucSig		484		/* FAT32 FSI: Structure signature (DWORD) */
 195:DRIVER/FatFs/source/ff.c **** #define FSI_Free_Count		488		/* FAT32 FSI: Number of free clusters (DWORD) */
 196:DRIVER/FatFs/source/ff.c **** #define FSI_Nxt_Free		492		/* FAT32 FSI: Last allocated cluster (DWORD) */
 197:DRIVER/FatFs/source/ff.c **** 
 198:DRIVER/FatFs/source/ff.c **** #define MBR_Table			446		/* MBR: Offset of partition table in the MBR */
 199:DRIVER/FatFs/source/ff.c **** #define SZ_PTE				16		/* MBR: Size of a partition table entry */
 200:DRIVER/FatFs/source/ff.c **** #define PTE_Boot			0		/* MBR PTE: Boot indicator */
 201:DRIVER/FatFs/source/ff.c **** #define PTE_StHead			1		/* MBR PTE: Start head */
 202:DRIVER/FatFs/source/ff.c **** #define PTE_StSec			2		/* MBR PTE: Start sector */
 203:DRIVER/FatFs/source/ff.c **** #define PTE_StCyl			3		/* MBR PTE: Start cylinder */
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 5


 204:DRIVER/FatFs/source/ff.c **** #define PTE_System			4		/* MBR PTE: System ID */
 205:DRIVER/FatFs/source/ff.c **** #define PTE_EdHead			5		/* MBR PTE: End head */
 206:DRIVER/FatFs/source/ff.c **** #define PTE_EdSec			6		/* MBR PTE: End sector */
 207:DRIVER/FatFs/source/ff.c **** #define PTE_EdCyl			7		/* MBR PTE: End cylinder */
 208:DRIVER/FatFs/source/ff.c **** #define PTE_StLba			8		/* MBR PTE: Start in LBA */
 209:DRIVER/FatFs/source/ff.c **** #define PTE_SizLba			12		/* MBR PTE: Size in LBA */
 210:DRIVER/FatFs/source/ff.c **** 
 211:DRIVER/FatFs/source/ff.c **** #define GPTH_Sign			0		/* GPT HDR: Signature (8-byte) */
 212:DRIVER/FatFs/source/ff.c **** #define GPTH_Rev			8		/* GPT HDR: Revision (DWORD) */
 213:DRIVER/FatFs/source/ff.c **** #define GPTH_Size			12		/* GPT HDR: Header size (DWORD) */
 214:DRIVER/FatFs/source/ff.c **** #define GPTH_Bcc			16		/* GPT HDR: Header BCC (DWORD) */
 215:DRIVER/FatFs/source/ff.c **** #define GPTH_CurLba			24		/* GPT HDR: This header LBA (QWORD) */
 216:DRIVER/FatFs/source/ff.c **** #define GPTH_BakLba			32		/* GPT HDR: Another header LBA (QWORD) */
 217:DRIVER/FatFs/source/ff.c **** #define GPTH_FstLba			40		/* GPT HDR: First LBA for partition data (QWORD) */
 218:DRIVER/FatFs/source/ff.c **** #define GPTH_LstLba			48		/* GPT HDR: Last LBA for partition data (QWORD) */
 219:DRIVER/FatFs/source/ff.c **** #define GPTH_DskGuid		56		/* GPT HDR: Disk GUID (16-byte) */
 220:DRIVER/FatFs/source/ff.c **** #define GPTH_PtOfs			72		/* GPT HDR: Partition table LBA (QWORD) */
 221:DRIVER/FatFs/source/ff.c **** #define GPTH_PtNum			80		/* GPT HDR: Number of table entries (DWORD) */
 222:DRIVER/FatFs/source/ff.c **** #define GPTH_PteSize		84		/* GPT HDR: Size of table entry (DWORD) */
 223:DRIVER/FatFs/source/ff.c **** #define GPTH_PtBcc			88		/* GPT HDR: Partition table BCC (DWORD) */
 224:DRIVER/FatFs/source/ff.c **** #define SZ_GPTE				128		/* GPT PTE: Size of partition table entry */
 225:DRIVER/FatFs/source/ff.c **** #define GPTE_PtGuid			0		/* GPT PTE: Partition type GUID (16-byte) */
 226:DRIVER/FatFs/source/ff.c **** #define GPTE_UpGuid			16		/* GPT PTE: Partition unique GUID (16-byte) */
 227:DRIVER/FatFs/source/ff.c **** #define GPTE_FstLba			32		/* GPT PTE: First LBA of partition (QWORD) */
 228:DRIVER/FatFs/source/ff.c **** #define GPTE_LstLba			40		/* GPT PTE: Last LBA of partition (QWORD) */
 229:DRIVER/FatFs/source/ff.c **** #define GPTE_Flags			48		/* GPT PTE: Partition flags (QWORD) */
 230:DRIVER/FatFs/source/ff.c **** #define GPTE_Name			56		/* GPT PTE: Partition name */
 231:DRIVER/FatFs/source/ff.c **** 
 232:DRIVER/FatFs/source/ff.c **** 
 233:DRIVER/FatFs/source/ff.c **** /* Post process on fatal error in the file operations */
 234:DRIVER/FatFs/source/ff.c **** #define ABORT(fs, res)		{ fp->err = (BYTE)(res); LEAVE_FF(fs, res); }
 235:DRIVER/FatFs/source/ff.c **** 
 236:DRIVER/FatFs/source/ff.c **** 
 237:DRIVER/FatFs/source/ff.c **** /* Re-entrancy related */
 238:DRIVER/FatFs/source/ff.c **** #if FF_FS_REENTRANT
 239:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN == 1
 240:DRIVER/FatFs/source/ff.c **** #error Static LFN work area cannot be used in thread-safe configuration
 241:DRIVER/FatFs/source/ff.c **** #endif
 242:DRIVER/FatFs/source/ff.c **** #define LEAVE_FF(fs, res)	{ unlock_volume(fs, res); return res; }
 243:DRIVER/FatFs/source/ff.c **** #else
 244:DRIVER/FatFs/source/ff.c **** #define LEAVE_FF(fs, res)	return res
 245:DRIVER/FatFs/source/ff.c **** #endif
 246:DRIVER/FatFs/source/ff.c **** 
 247:DRIVER/FatFs/source/ff.c **** 
 248:DRIVER/FatFs/source/ff.c **** /* Definitions of logical drive - physical location conversion */
 249:DRIVER/FatFs/source/ff.c **** #if FF_MULTI_PARTITION
 250:DRIVER/FatFs/source/ff.c **** #define LD2PD(vol) VolToPart[vol].pd	/* Get physical drive number */
 251:DRIVER/FatFs/source/ff.c **** #define LD2PT(vol) VolToPart[vol].pt	/* Get partition number (0:auto search, 1..:forced partition n
 252:DRIVER/FatFs/source/ff.c **** #else
 253:DRIVER/FatFs/source/ff.c **** #define LD2PD(vol) (BYTE)(vol)	/* Each logical drive is associated with the same physical drive num
 254:DRIVER/FatFs/source/ff.c **** #define LD2PT(vol) 0			/* Auto partition search */
 255:DRIVER/FatFs/source/ff.c **** #endif
 256:DRIVER/FatFs/source/ff.c **** 
 257:DRIVER/FatFs/source/ff.c **** 
 258:DRIVER/FatFs/source/ff.c **** /* Definitions of sector size */
 259:DRIVER/FatFs/source/ff.c **** #if (FF_MAX_SS < FF_MIN_SS) || (FF_MAX_SS != 512 && FF_MAX_SS != 1024 && FF_MAX_SS != 2048 && FF_MA
 260:DRIVER/FatFs/source/ff.c **** #error Wrong sector size configuration
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 6


 261:DRIVER/FatFs/source/ff.c **** #endif
 262:DRIVER/FatFs/source/ff.c **** #if FF_MAX_SS == FF_MIN_SS
 263:DRIVER/FatFs/source/ff.c **** #define SS(fs)	((UINT)FF_MAX_SS)	/* Fixed sector size */
 264:DRIVER/FatFs/source/ff.c **** #else
 265:DRIVER/FatFs/source/ff.c **** #define SS(fs)	((fs)->ssize)	/* Variable sector size */
 266:DRIVER/FatFs/source/ff.c **** #endif
 267:DRIVER/FatFs/source/ff.c **** 
 268:DRIVER/FatFs/source/ff.c **** 
 269:DRIVER/FatFs/source/ff.c **** /* Timestamp */
 270:DRIVER/FatFs/source/ff.c **** #if FF_FS_NORTC == 1
 271:DRIVER/FatFs/source/ff.c **** #if FF_NORTC_YEAR < 1980 || FF_NORTC_YEAR > 2107 || FF_NORTC_MON < 1 || FF_NORTC_MON > 12 || FF_NOR
 272:DRIVER/FatFs/source/ff.c **** #error Invalid FF_FS_NORTC settings
 273:DRIVER/FatFs/source/ff.c **** #endif
 274:DRIVER/FatFs/source/ff.c **** #define GET_FATTIME()	((DWORD)(FF_NORTC_YEAR - 1980) << 25 | (DWORD)FF_NORTC_MON << 21 | (DWORD)FF_
 275:DRIVER/FatFs/source/ff.c **** #else
 276:DRIVER/FatFs/source/ff.c **** #define GET_FATTIME()	get_fattime()
 277:DRIVER/FatFs/source/ff.c **** #endif
 278:DRIVER/FatFs/source/ff.c **** 
 279:DRIVER/FatFs/source/ff.c **** 
 280:DRIVER/FatFs/source/ff.c **** /* File lock controls */
 281:DRIVER/FatFs/source/ff.c **** #if FF_FS_LOCK
 282:DRIVER/FatFs/source/ff.c **** #if FF_FS_READONLY
 283:DRIVER/FatFs/source/ff.c **** #error FF_FS_LOCK must be 0 at read-only configuration
 284:DRIVER/FatFs/source/ff.c **** #endif
 285:DRIVER/FatFs/source/ff.c **** typedef struct {
 286:DRIVER/FatFs/source/ff.c **** 	FATFS* fs;		/* Object ID 1, volume (NULL:blank entry) */
 287:DRIVER/FatFs/source/ff.c **** 	DWORD clu;		/* Object ID 2, containing directory (0:root) */
 288:DRIVER/FatFs/source/ff.c **** 	DWORD ofs;		/* Object ID 3, offset in the directory */
 289:DRIVER/FatFs/source/ff.c **** 	UINT ctr;		/* Object open counter, 0:none, 0x01..0xFF:read mode open count, 0x100:write mode */
 290:DRIVER/FatFs/source/ff.c **** } FILESEM;
 291:DRIVER/FatFs/source/ff.c **** #endif
 292:DRIVER/FatFs/source/ff.c **** 
 293:DRIVER/FatFs/source/ff.c **** 
 294:DRIVER/FatFs/source/ff.c **** /* SBCS up-case tables (\x80-\xFF) */
 295:DRIVER/FatFs/source/ff.c **** #define TBL_CT437  {0x80,0x9A,0x45,0x41,0x8E,0x41,0x8F,0x80,0x45,0x45,0x45,0x49,0x49,0x49,0x8E,0x8F
 296:DRIVER/FatFs/source/ff.c **** 					0x90,0x92,0x92,0x4F,0x99,0x4F,0x55,0x55,0x59,0x99,0x9A,0x9B,0x9C,0x9D,0x9E,0x9F, \
 297:DRIVER/FatFs/source/ff.c **** 					0x41,0x49,0x4F,0x55,0xA5,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF, \
 298:DRIVER/FatFs/source/ff.c **** 					0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB9,0xBA,0xBB,0xBC,0xBD,0xBE,0xBF, \
 299:DRIVER/FatFs/source/ff.c **** 					0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF, \
 300:DRIVER/FatFs/source/ff.c **** 					0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xD7,0xD8,0xD9,0xDA,0xDB,0xDC,0xDD,0xDE,0xDF, \
 301:DRIVER/FatFs/source/ff.c **** 					0xE0,0xE1,0xE2,0xE3,0xE4,0xE5,0xE6,0xE7,0xE8,0xE9,0xEA,0xEB,0xEC,0xED,0xEE,0xEF, \
 302:DRIVER/FatFs/source/ff.c **** 					0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF6,0xF7,0xF8,0xF9,0xFA,0xFB,0xFC,0xFD,0xFE,0xFF}
 303:DRIVER/FatFs/source/ff.c **** #define TBL_CT720  {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F
 304:DRIVER/FatFs/source/ff.c **** 					0x90,0x91,0x92,0x93,0x94,0x95,0x96,0x97,0x98,0x99,0x9A,0x9B,0x9C,0x9D,0x9E,0x9F, \
 305:DRIVER/FatFs/source/ff.c **** 					0xA0,0xA1,0xA2,0xA3,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF, \
 306:DRIVER/FatFs/source/ff.c **** 					0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB9,0xBA,0xBB,0xBC,0xBD,0xBE,0xBF, \
 307:DRIVER/FatFs/source/ff.c **** 					0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF, \
 308:DRIVER/FatFs/source/ff.c **** 					0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xD7,0xD8,0xD9,0xDA,0xDB,0xDC,0xDD,0xDE,0xDF, \
 309:DRIVER/FatFs/source/ff.c **** 					0xE0,0xE1,0xE2,0xE3,0xE4,0xE5,0xE6,0xE7,0xE8,0xE9,0xEA,0xEB,0xEC,0xED,0xEE,0xEF, \
 310:DRIVER/FatFs/source/ff.c **** 					0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF6,0xF7,0xF8,0xF9,0xFA,0xFB,0xFC,0xFD,0xFE,0xFF}
 311:DRIVER/FatFs/source/ff.c **** #define TBL_CT737  {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F
 312:DRIVER/FatFs/source/ff.c **** 					0x90,0x92,0x92,0x93,0x94,0x95,0x96,0x97,0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87, \
 313:DRIVER/FatFs/source/ff.c **** 					0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x90,0x91,0xAA,0x92,0x93,0x94,0x95,0x96, \
 314:DRIVER/FatFs/source/ff.c **** 					0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB9,0xBA,0xBB,0xBC,0xBD,0xBE,0xBF, \
 315:DRIVER/FatFs/source/ff.c **** 					0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF, \
 316:DRIVER/FatFs/source/ff.c **** 					0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xD7,0xD8,0xD9,0xDA,0xDB,0xDC,0xDD,0xDE,0xDF, \
 317:DRIVER/FatFs/source/ff.c **** 					0x97,0xEA,0xEB,0xEC,0xE4,0xED,0xEE,0xEF,0xF5,0xF0,0xEA,0xEB,0xEC,0xED,0xEE,0xEF, \
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 7


 318:DRIVER/FatFs/source/ff.c **** 					0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF6,0xF7,0xF8,0xF9,0xFA,0xFB,0xFC,0xFD,0xFE,0xFF}
 319:DRIVER/FatFs/source/ff.c **** #define TBL_CT771  {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F
 320:DRIVER/FatFs/source/ff.c **** 					0x90,0x91,0x92,0x93,0x94,0x95,0x96,0x97,0x98,0x99,0x9A,0x9B,0x9C,0x9D,0x9E,0x9F, \
 321:DRIVER/FatFs/source/ff.c **** 					0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F, \
 322:DRIVER/FatFs/source/ff.c **** 					0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB9,0xBA,0xBB,0xBC,0xBD,0xBE,0xBF, \
 323:DRIVER/FatFs/source/ff.c **** 					0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF, \
 324:DRIVER/FatFs/source/ff.c **** 					0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xD7,0xD8,0xD9,0xDA,0xDB,0xDC,0xDC,0xDE,0xDE, \
 325:DRIVER/FatFs/source/ff.c **** 					0x90,0x91,0x92,0x93,0x94,0x95,0x96,0x97,0x98,0x99,0x9A,0x9B,0x9C,0x9D,0x9E,0x9F, \
 326:DRIVER/FatFs/source/ff.c **** 					0xF0,0xF0,0xF2,0xF2,0xF4,0xF4,0xF6,0xF6,0xF8,0xF8,0xFA,0xFA,0xFC,0xFC,0xFE,0xFF}
 327:DRIVER/FatFs/source/ff.c **** #define TBL_CT775  {0x80,0x9A,0x91,0xA0,0x8E,0x95,0x8F,0x80,0xAD,0xED,0x8A,0x8A,0xA1,0x8D,0x8E,0x8F
 328:DRIVER/FatFs/source/ff.c **** 					0x90,0x92,0x92,0xE2,0x99,0x95,0x96,0x97,0x97,0x99,0x9A,0x9D,0x9C,0x9D,0x9E,0x9F, \
 329:DRIVER/FatFs/source/ff.c **** 					0xA0,0xA1,0xE0,0xA3,0xA3,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF, \
 330:DRIVER/FatFs/source/ff.c **** 					0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB9,0xBA,0xBB,0xBC,0xBD,0xBE,0xBF, \
 331:DRIVER/FatFs/source/ff.c **** 					0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF, \
 332:DRIVER/FatFs/source/ff.c **** 					0xB5,0xB6,0xB7,0xB8,0xBD,0xBE,0xC6,0xC7,0xA5,0xD9,0xDA,0xDB,0xDC,0xDD,0xDE,0xDF, \
 333:DRIVER/FatFs/source/ff.c **** 					0xE0,0xE1,0xE2,0xE3,0xE5,0xE5,0xE6,0xE3,0xE8,0xE8,0xEA,0xEA,0xEE,0xED,0xEE,0xEF, \
 334:DRIVER/FatFs/source/ff.c **** 					0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF6,0xF7,0xF8,0xF9,0xFA,0xFB,0xFC,0xFD,0xFE,0xFF}
 335:DRIVER/FatFs/source/ff.c **** #define TBL_CT850  {0x43,0x55,0x45,0x41,0x41,0x41,0x41,0x43,0x45,0x45,0x45,0x49,0x49,0x49,0x41,0x41
 336:DRIVER/FatFs/source/ff.c **** 					0x45,0x92,0x92,0x4F,0x4F,0x4F,0x55,0x55,0x59,0x4F,0x55,0x4F,0x9C,0x4F,0x9E,0x9F, \
 337:DRIVER/FatFs/source/ff.c **** 					0x41,0x49,0x4F,0x55,0xA5,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF, \
 338:DRIVER/FatFs/source/ff.c **** 					0xB0,0xB1,0xB2,0xB3,0xB4,0x41,0x41,0x41,0xB8,0xB9,0xBA,0xBB,0xBC,0xBD,0xBE,0xBF, \
 339:DRIVER/FatFs/source/ff.c **** 					0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0x41,0x41,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF, \
 340:DRIVER/FatFs/source/ff.c **** 					0xD1,0xD1,0x45,0x45,0x45,0x49,0x49,0x49,0x49,0xD9,0xDA,0xDB,0xDC,0xDD,0x49,0xDF, \
 341:DRIVER/FatFs/source/ff.c **** 					0x4F,0xE1,0x4F,0x4F,0x4F,0x4F,0xE6,0xE8,0xE8,0x55,0x55,0x55,0x59,0x59,0xEE,0xEF, \
 342:DRIVER/FatFs/source/ff.c **** 					0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF6,0xF7,0xF8,0xF9,0xFA,0xFB,0xFC,0xFD,0xFE,0xFF}
 343:DRIVER/FatFs/source/ff.c **** #define TBL_CT852  {0x80,0x9A,0x90,0xB6,0x8E,0xDE,0x8F,0x80,0x9D,0xD3,0x8A,0x8A,0xD7,0x8D,0x8E,0x8F
 344:DRIVER/FatFs/source/ff.c **** 					0x90,0x91,0x91,0xE2,0x99,0x95,0x95,0x97,0x97,0x99,0x9A,0x9B,0x9B,0x9D,0x9E,0xAC, \
 345:DRIVER/FatFs/source/ff.c **** 					0xB5,0xD6,0xE0,0xE9,0xA4,0xA4,0xA6,0xA6,0xA8,0xA8,0xAA,0x8D,0xAC,0xB8,0xAE,0xAF, \
 346:DRIVER/FatFs/source/ff.c **** 					0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB9,0xBA,0xBB,0xBC,0xBD,0xBD,0xBF, \
 347:DRIVER/FatFs/source/ff.c **** 					0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC6,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF, \
 348:DRIVER/FatFs/source/ff.c **** 					0xD1,0xD1,0xD2,0xD3,0xD2,0xD5,0xD6,0xD7,0xB7,0xD9,0xDA,0xDB,0xDC,0xDD,0xDE,0xDF, \
 349:DRIVER/FatFs/source/ff.c **** 					0xE0,0xE1,0xE2,0xE3,0xE3,0xD5,0xE6,0xE6,0xE8,0xE9,0xE8,0xEB,0xED,0xED,0xDD,0xEF, \
 350:DRIVER/FatFs/source/ff.c **** 					0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF6,0xF7,0xF8,0xF9,0xFA,0xEB,0xFC,0xFC,0xFE,0xFF}
 351:DRIVER/FatFs/source/ff.c **** #define TBL_CT855  {0x81,0x81,0x83,0x83,0x85,0x85,0x87,0x87,0x89,0x89,0x8B,0x8B,0x8D,0x8D,0x8F,0x8F
 352:DRIVER/FatFs/source/ff.c **** 					0x91,0x91,0x93,0x93,0x95,0x95,0x97,0x97,0x99,0x99,0x9B,0x9B,0x9D,0x9D,0x9F,0x9F, \
 353:DRIVER/FatFs/source/ff.c **** 					0xA1,0xA1,0xA3,0xA3,0xA5,0xA5,0xA7,0xA7,0xA9,0xA9,0xAB,0xAB,0xAD,0xAD,0xAE,0xAF, \
 354:DRIVER/FatFs/source/ff.c **** 					0xB0,0xB1,0xB2,0xB3,0xB4,0xB6,0xB6,0xB8,0xB8,0xB9,0xBA,0xBB,0xBC,0xBE,0xBE,0xBF, \
 355:DRIVER/FatFs/source/ff.c **** 					0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC7,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF, \
 356:DRIVER/FatFs/source/ff.c **** 					0xD1,0xD1,0xD3,0xD3,0xD5,0xD5,0xD7,0xD7,0xDD,0xD9,0xDA,0xDB,0xDC,0xDD,0xE0,0xDF, \
 357:DRIVER/FatFs/source/ff.c **** 					0xE0,0xE2,0xE2,0xE4,0xE4,0xE6,0xE6,0xE8,0xE8,0xEA,0xEA,0xEC,0xEC,0xEE,0xEE,0xEF, \
 358:DRIVER/FatFs/source/ff.c **** 					0xF0,0xF2,0xF2,0xF4,0xF4,0xF6,0xF6,0xF8,0xF8,0xFA,0xFA,0xFC,0xFC,0xFD,0xFE,0xFF}
 359:DRIVER/FatFs/source/ff.c **** #define TBL_CT857  {0x80,0x9A,0x90,0xB6,0x8E,0xB7,0x8F,0x80,0xD2,0xD3,0xD4,0xD8,0xD7,0x49,0x8E,0x8F
 360:DRIVER/FatFs/source/ff.c **** 					0x90,0x92,0x92,0xE2,0x99,0xE3,0xEA,0xEB,0x98,0x99,0x9A,0x9D,0x9C,0x9D,0x9E,0x9E, \
 361:DRIVER/FatFs/source/ff.c **** 					0xB5,0xD6,0xE0,0xE9,0xA5,0xA5,0xA6,0xA6,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF, \
 362:DRIVER/FatFs/source/ff.c **** 					0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB9,0xBA,0xBB,0xBC,0xBD,0xBE,0xBF, \
 363:DRIVER/FatFs/source/ff.c **** 					0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC7,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF, \
 364:DRIVER/FatFs/source/ff.c **** 					0xD0,0xD1,0xD2,0xD3,0xD4,0x49,0xD6,0xD7,0xD8,0xD9,0xDA,0xDB,0xDC,0xDD,0xDE,0xDF, \
 365:DRIVER/FatFs/source/ff.c **** 					0xE0,0xE1,0xE2,0xE3,0xE5,0xE5,0xE6,0xE7,0xE8,0xE9,0xEA,0xEB,0xDE,0xED,0xEE,0xEF, \
 366:DRIVER/FatFs/source/ff.c **** 					0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF6,0xF7,0xF8,0xF9,0xFA,0xFB,0xFC,0xFD,0xFE,0xFF}
 367:DRIVER/FatFs/source/ff.c **** #define TBL_CT860  {0x80,0x9A,0x90,0x8F,0x8E,0x91,0x86,0x80,0x89,0x89,0x92,0x8B,0x8C,0x98,0x8E,0x8F
 368:DRIVER/FatFs/source/ff.c **** 					0x90,0x91,0x92,0x8C,0x99,0xA9,0x96,0x9D,0x98,0x99,0x9A,0x9B,0x9C,0x9D,0x9E,0x9F, \
 369:DRIVER/FatFs/source/ff.c **** 					0x86,0x8B,0x9F,0x96,0xA5,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF, \
 370:DRIVER/FatFs/source/ff.c **** 					0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB9,0xBA,0xBB,0xBC,0xBD,0xBE,0xBF, \
 371:DRIVER/FatFs/source/ff.c **** 					0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF, \
 372:DRIVER/FatFs/source/ff.c **** 					0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xD7,0xD8,0xD9,0xDA,0xDB,0xDC,0xDD,0xDE,0xDF, \
 373:DRIVER/FatFs/source/ff.c **** 					0xE0,0xE1,0xE2,0xE3,0xE4,0xE5,0xE6,0xE7,0xE8,0xE9,0xEA,0xEB,0xEC,0xED,0xEE,0xEF, \
 374:DRIVER/FatFs/source/ff.c **** 					0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF6,0xF7,0xF8,0xF9,0xFA,0xFB,0xFC,0xFD,0xFE,0xFF}
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 8


 375:DRIVER/FatFs/source/ff.c **** #define TBL_CT861  {0x80,0x9A,0x90,0x41,0x8E,0x41,0x8F,0x80,0x45,0x45,0x45,0x8B,0x8B,0x8D,0x8E,0x8F
 376:DRIVER/FatFs/source/ff.c **** 					0x90,0x92,0x92,0x4F,0x99,0x8D,0x55,0x97,0x97,0x99,0x9A,0x9D,0x9C,0x9D,0x9E,0x9F, \
 377:DRIVER/FatFs/source/ff.c **** 					0xA4,0xA5,0xA6,0xA7,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF, \
 378:DRIVER/FatFs/source/ff.c **** 					0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB9,0xBA,0xBB,0xBC,0xBD,0xBE,0xBF, \
 379:DRIVER/FatFs/source/ff.c **** 					0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF, \
 380:DRIVER/FatFs/source/ff.c **** 					0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xD7,0xD8,0xD9,0xDA,0xDB,0xDC,0xDD,0xDE,0xDF, \
 381:DRIVER/FatFs/source/ff.c **** 					0xE0,0xE1,0xE2,0xE3,0xE4,0xE5,0xE6,0xE7,0xE8,0xE9,0xEA,0xEB,0xEC,0xED,0xEE,0xEF, \
 382:DRIVER/FatFs/source/ff.c **** 					0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF6,0xF7,0xF8,0xF9,0xFA,0xFB,0xFC,0xFD,0xFE,0xFF}
 383:DRIVER/FatFs/source/ff.c **** #define TBL_CT862  {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F
 384:DRIVER/FatFs/source/ff.c **** 					0x90,0x91,0x92,0x93,0x94,0x95,0x96,0x97,0x98,0x99,0x9A,0x9B,0x9C,0x9D,0x9E,0x9F, \
 385:DRIVER/FatFs/source/ff.c **** 					0x41,0x49,0x4F,0x55,0xA5,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF, \
 386:DRIVER/FatFs/source/ff.c **** 					0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB9,0xBA,0xBB,0xBC,0xBD,0xBE,0xBF, \
 387:DRIVER/FatFs/source/ff.c **** 					0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF, \
 388:DRIVER/FatFs/source/ff.c **** 					0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xD7,0xD8,0xD9,0xDA,0xDB,0xDC,0xDD,0xDE,0xDF, \
 389:DRIVER/FatFs/source/ff.c **** 					0xE0,0xE1,0xE2,0xE3,0xE4,0xE5,0xE6,0xE7,0xE8,0xE9,0xEA,0xEB,0xEC,0xED,0xEE,0xEF, \
 390:DRIVER/FatFs/source/ff.c **** 					0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF6,0xF7,0xF8,0xF9,0xFA,0xFB,0xFC,0xFD,0xFE,0xFF}
 391:DRIVER/FatFs/source/ff.c **** #define TBL_CT863  {0x43,0x55,0x45,0x41,0x41,0x41,0x86,0x43,0x45,0x45,0x45,0x49,0x49,0x8D,0x41,0x8F
 392:DRIVER/FatFs/source/ff.c **** 					0x45,0x45,0x45,0x4F,0x45,0x49,0x55,0x55,0x98,0x4F,0x55,0x9B,0x9C,0x55,0x55,0x9F, \
 393:DRIVER/FatFs/source/ff.c **** 					0xA0,0xA1,0x4F,0x55,0xA4,0xA5,0xA6,0xA7,0x49,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF, \
 394:DRIVER/FatFs/source/ff.c **** 					0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB9,0xBA,0xBB,0xBC,0xBD,0xBE,0xBF, \
 395:DRIVER/FatFs/source/ff.c **** 					0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF, \
 396:DRIVER/FatFs/source/ff.c **** 					0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xD7,0xD8,0xD9,0xDA,0xDB,0xDC,0xDD,0xDE,0xDF, \
 397:DRIVER/FatFs/source/ff.c **** 					0xE0,0xE1,0xE2,0xE3,0xE4,0xE5,0xE6,0xE7,0xE8,0xE9,0xEA,0xEB,0xEC,0xED,0xEE,0xEF, \
 398:DRIVER/FatFs/source/ff.c **** 					0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF6,0xF7,0xF8,0xF9,0xFA,0xFB,0xFC,0xFD,0xFE,0xFF}
 399:DRIVER/FatFs/source/ff.c **** #define TBL_CT864  {0x80,0x9A,0x45,0x41,0x8E,0x41,0x8F,0x80,0x45,0x45,0x45,0x49,0x49,0x49,0x8E,0x8F
 400:DRIVER/FatFs/source/ff.c **** 					0x90,0x92,0x92,0x4F,0x99,0x4F,0x55,0x55,0x59,0x99,0x9A,0x9B,0x9C,0x9D,0x9E,0x9F, \
 401:DRIVER/FatFs/source/ff.c **** 					0x41,0x49,0x4F,0x55,0xA5,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF, \
 402:DRIVER/FatFs/source/ff.c **** 					0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB9,0xBA,0xBB,0xBC,0xBD,0xBE,0xBF, \
 403:DRIVER/FatFs/source/ff.c **** 					0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF, \
 404:DRIVER/FatFs/source/ff.c **** 					0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xD7,0xD8,0xD9,0xDA,0xDB,0xDC,0xDD,0xDE,0xDF, \
 405:DRIVER/FatFs/source/ff.c **** 					0xE0,0xE1,0xE2,0xE3,0xE4,0xE5,0xE6,0xE7,0xE8,0xE9,0xEA,0xEB,0xEC,0xED,0xEE,0xEF, \
 406:DRIVER/FatFs/source/ff.c **** 					0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF6,0xF7,0xF8,0xF9,0xFA,0xFB,0xFC,0xFD,0xFE,0xFF}
 407:DRIVER/FatFs/source/ff.c **** #define TBL_CT865  {0x80,0x9A,0x90,0x41,0x8E,0x41,0x8F,0x80,0x45,0x45,0x45,0x49,0x49,0x49,0x8E,0x8F
 408:DRIVER/FatFs/source/ff.c **** 					0x90,0x92,0x92,0x4F,0x99,0x4F,0x55,0x55,0x59,0x99,0x9A,0x9B,0x9C,0x9D,0x9E,0x9F, \
 409:DRIVER/FatFs/source/ff.c **** 					0x41,0x49,0x4F,0x55,0xA5,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF, \
 410:DRIVER/FatFs/source/ff.c **** 					0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB9,0xBA,0xBB,0xBC,0xBD,0xBE,0xBF, \
 411:DRIVER/FatFs/source/ff.c **** 					0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF, \
 412:DRIVER/FatFs/source/ff.c **** 					0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xD7,0xD8,0xD9,0xDA,0xDB,0xDC,0xDD,0xDE,0xDF, \
 413:DRIVER/FatFs/source/ff.c **** 					0xE0,0xE1,0xE2,0xE3,0xE4,0xE5,0xE6,0xE7,0xE8,0xE9,0xEA,0xEB,0xEC,0xED,0xEE,0xEF, \
 414:DRIVER/FatFs/source/ff.c **** 					0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF6,0xF7,0xF8,0xF9,0xFA,0xFB,0xFC,0xFD,0xFE,0xFF}
 415:DRIVER/FatFs/source/ff.c **** #define TBL_CT866  {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F
 416:DRIVER/FatFs/source/ff.c **** 					0x90,0x91,0x92,0x93,0x94,0x95,0x96,0x97,0x98,0x99,0x9A,0x9B,0x9C,0x9D,0x9E,0x9F, \
 417:DRIVER/FatFs/source/ff.c **** 					0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F, \
 418:DRIVER/FatFs/source/ff.c **** 					0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB9,0xBA,0xBB,0xBC,0xBD,0xBE,0xBF, \
 419:DRIVER/FatFs/source/ff.c **** 					0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF, \
 420:DRIVER/FatFs/source/ff.c **** 					0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xD7,0xD8,0xD9,0xDA,0xDB,0xDC,0xDD,0xDE,0xDF, \
 421:DRIVER/FatFs/source/ff.c **** 					0x90,0x91,0x92,0x93,0x94,0x95,0x96,0x97,0x98,0x99,0x9A,0x9B,0x9C,0x9D,0x9E,0x9F, \
 422:DRIVER/FatFs/source/ff.c **** 					0xF0,0xF0,0xF2,0xF2,0xF4,0xF4,0xF6,0xF6,0xF8,0xF9,0xFA,0xFB,0xFC,0xFD,0xFE,0xFF}
 423:DRIVER/FatFs/source/ff.c **** #define TBL_CT869  {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F
 424:DRIVER/FatFs/source/ff.c **** 					0x90,0x91,0x92,0x93,0x94,0x95,0x96,0x97,0x98,0x99,0x9A,0x86,0x9C,0x8D,0x8F,0x90, \
 425:DRIVER/FatFs/source/ff.c **** 					0x91,0x90,0x92,0x95,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF, \
 426:DRIVER/FatFs/source/ff.c **** 					0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB9,0xBA,0xBB,0xBC,0xBD,0xBE,0xBF, \
 427:DRIVER/FatFs/source/ff.c **** 					0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF, \
 428:DRIVER/FatFs/source/ff.c **** 					0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xA4,0xA5,0xA6,0xD9,0xDA,0xDB,0xDC,0xA7,0xA8,0xDF, \
 429:DRIVER/FatFs/source/ff.c **** 					0xA9,0xAA,0xAC,0xAD,0xB5,0xB6,0xB7,0xB8,0xBD,0xBE,0xC6,0xC7,0xCF,0xCF,0xD0,0xEF, \
 430:DRIVER/FatFs/source/ff.c **** 					0xF0,0xF1,0xD1,0xD2,0xD3,0xF5,0xD4,0xF7,0xF8,0xF9,0xD5,0x96,0x95,0x98,0xFE,0xFF}
 431:DRIVER/FatFs/source/ff.c **** 
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 9


 432:DRIVER/FatFs/source/ff.c **** 
 433:DRIVER/FatFs/source/ff.c **** /* DBCS code range |----- 1st byte -----|  |----------- 2nd byte -----------| */
 434:DRIVER/FatFs/source/ff.c **** /*                  <------>    <------>    <------>    <------>    <------>  */
 435:DRIVER/FatFs/source/ff.c **** #define TBL_DC932 {0x81, 0x9F, 0xE0, 0xFC, 0x40, 0x7E, 0x80, 0xFC, 0x00, 0x00}
 436:DRIVER/FatFs/source/ff.c **** #define TBL_DC936 {0x81, 0xFE, 0x00, 0x00, 0x40, 0x7E, 0x80, 0xFE, 0x00, 0x00}
 437:DRIVER/FatFs/source/ff.c **** #define TBL_DC949 {0x81, 0xFE, 0x00, 0x00, 0x41, 0x5A, 0x61, 0x7A, 0x81, 0xFE}
 438:DRIVER/FatFs/source/ff.c **** #define TBL_DC950 {0x81, 0xFE, 0x00, 0x00, 0x40, 0x7E, 0xA1, 0xFE, 0x00, 0x00}
 439:DRIVER/FatFs/source/ff.c **** 
 440:DRIVER/FatFs/source/ff.c **** 
 441:DRIVER/FatFs/source/ff.c **** /* Macros for table definitions */
 442:DRIVER/FatFs/source/ff.c **** #define MERGE_2STR(a, b) a ## b
 443:DRIVER/FatFs/source/ff.c **** #define MKCVTBL(hd, cp) MERGE_2STR(hd, cp)
 444:DRIVER/FatFs/source/ff.c **** 
 445:DRIVER/FatFs/source/ff.c **** 
 446:DRIVER/FatFs/source/ff.c **** 
 447:DRIVER/FatFs/source/ff.c **** 
 448:DRIVER/FatFs/source/ff.c **** /*--------------------------------------------------------------------------
 449:DRIVER/FatFs/source/ff.c **** 
 450:DRIVER/FatFs/source/ff.c ****    Module Private Work Area
 451:DRIVER/FatFs/source/ff.c **** 
 452:DRIVER/FatFs/source/ff.c **** ---------------------------------------------------------------------------*/
 453:DRIVER/FatFs/source/ff.c **** /* Remark: Variables defined here without initial value shall be guaranteed
 454:DRIVER/FatFs/source/ff.c **** /  zero/null at start-up. If not, the linker option or start-up routine is
 455:DRIVER/FatFs/source/ff.c **** /  not compliance with C standard. */
 456:DRIVER/FatFs/source/ff.c **** 
 457:DRIVER/FatFs/source/ff.c **** /*--------------------------------*/
 458:DRIVER/FatFs/source/ff.c **** /* File/Volume controls           */
 459:DRIVER/FatFs/source/ff.c **** /*--------------------------------*/
 460:DRIVER/FatFs/source/ff.c **** 
 461:DRIVER/FatFs/source/ff.c **** #if FF_VOLUMES < 1 || FF_VOLUMES > 10
 462:DRIVER/FatFs/source/ff.c **** #error Wrong FF_VOLUMES setting
 463:DRIVER/FatFs/source/ff.c **** #endif
 464:DRIVER/FatFs/source/ff.c **** static FATFS *FatFs[FF_VOLUMES];	/* Pointer to the filesystem objects (logical drives) */
 465:DRIVER/FatFs/source/ff.c **** static WORD Fsid;					/* Filesystem mount ID */
 466:DRIVER/FatFs/source/ff.c **** 
 467:DRIVER/FatFs/source/ff.c **** #if FF_FS_RPATH != 0
 468:DRIVER/FatFs/source/ff.c **** static BYTE CurrVol;				/* Current drive set by f_chdrive() */
 469:DRIVER/FatFs/source/ff.c **** #endif
 470:DRIVER/FatFs/source/ff.c **** 
 471:DRIVER/FatFs/source/ff.c **** #if FF_FS_LOCK != 0
 472:DRIVER/FatFs/source/ff.c **** static FILESEM Files[FF_FS_LOCK];	/* Open object lock semaphores */
 473:DRIVER/FatFs/source/ff.c **** #if FF_FS_REENTRANT
 474:DRIVER/FatFs/source/ff.c **** static BYTE SysLock;				/* System lock flag (0:no mutex, 1:unlocked, 2:locked) */
 475:DRIVER/FatFs/source/ff.c **** #endif
 476:DRIVER/FatFs/source/ff.c **** #endif
 477:DRIVER/FatFs/source/ff.c **** 
 478:DRIVER/FatFs/source/ff.c **** #if FF_STR_VOLUME_ID
 479:DRIVER/FatFs/source/ff.c **** #ifdef FF_VOLUME_STRS
 480:DRIVER/FatFs/source/ff.c **** static const char *const VolumeStr[FF_VOLUMES] = {FF_VOLUME_STRS};	/* Pre-defined volume ID */
 481:DRIVER/FatFs/source/ff.c **** #endif
 482:DRIVER/FatFs/source/ff.c **** #endif
 483:DRIVER/FatFs/source/ff.c **** 
 484:DRIVER/FatFs/source/ff.c **** #if FF_LBA64
 485:DRIVER/FatFs/source/ff.c **** #if FF_MIN_GPT > 0x100000000
 486:DRIVER/FatFs/source/ff.c **** #error Wrong FF_MIN_GPT setting
 487:DRIVER/FatFs/source/ff.c **** #endif
 488:DRIVER/FatFs/source/ff.c **** static const BYTE GUID_MS_Basic[16] = {0xA2,0xA0,0xD0,0xEB,0xE5,0xB9,0x33,0x44,0x87,0xC0,0x68,0xB6,
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 10


 489:DRIVER/FatFs/source/ff.c **** #endif
 490:DRIVER/FatFs/source/ff.c **** 
 491:DRIVER/FatFs/source/ff.c **** 
 492:DRIVER/FatFs/source/ff.c **** 
 493:DRIVER/FatFs/source/ff.c **** /*--------------------------------*/
 494:DRIVER/FatFs/source/ff.c **** /* LFN/Directory working buffer   */
 495:DRIVER/FatFs/source/ff.c **** /*--------------------------------*/
 496:DRIVER/FatFs/source/ff.c **** 
 497:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN == 0		/* Non-LFN configuration */
 498:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
 499:DRIVER/FatFs/source/ff.c **** #error LFN must be enabled when enable exFAT
 500:DRIVER/FatFs/source/ff.c **** #endif
 501:DRIVER/FatFs/source/ff.c **** #define DEF_NAMBUF
 502:DRIVER/FatFs/source/ff.c **** #define INIT_NAMBUF(fs)
 503:DRIVER/FatFs/source/ff.c **** #define FREE_NAMBUF()
 504:DRIVER/FatFs/source/ff.c **** #define LEAVE_MKFS(res)	return res
 505:DRIVER/FatFs/source/ff.c **** 
 506:DRIVER/FatFs/source/ff.c **** #else					/* LFN configurations */
 507:DRIVER/FatFs/source/ff.c **** #if FF_MAX_LFN < 12 || FF_MAX_LFN > 255
 508:DRIVER/FatFs/source/ff.c **** #error Wrong setting of FF_MAX_LFN
 509:DRIVER/FatFs/source/ff.c **** #endif
 510:DRIVER/FatFs/source/ff.c **** #if FF_LFN_BUF < FF_SFN_BUF || FF_SFN_BUF < 12
 511:DRIVER/FatFs/source/ff.c **** #error Wrong setting of FF_LFN_BUF or FF_SFN_BUF
 512:DRIVER/FatFs/source/ff.c **** #endif
 513:DRIVER/FatFs/source/ff.c **** #if FF_LFN_UNICODE < 0 || FF_LFN_UNICODE > 3
 514:DRIVER/FatFs/source/ff.c **** #error Wrong setting of FF_LFN_UNICODE
 515:DRIVER/FatFs/source/ff.c **** #endif
 516:DRIVER/FatFs/source/ff.c **** static const BYTE LfnOfs[] = {1,3,5,7,9,14,16,18,20,22,24,28,30};	/* FAT: Offset of LFN characters 
 517:DRIVER/FatFs/source/ff.c **** #define MAXDIRB(nc)	((nc + 44U) / 15 * SZDIRE)	/* exFAT: Size of directory entry block scratchpad b
 518:DRIVER/FatFs/source/ff.c **** 
 519:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN == 1		/* LFN enabled with static working buffer */
 520:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
 521:DRIVER/FatFs/source/ff.c **** static BYTE	DirBuf[MAXDIRB(FF_MAX_LFN)];	/* Directory entry block scratchpad buffer */
 522:DRIVER/FatFs/source/ff.c **** #endif
 523:DRIVER/FatFs/source/ff.c **** static WCHAR LfnBuf[FF_MAX_LFN + 1];		/* LFN working buffer */
 524:DRIVER/FatFs/source/ff.c **** #define DEF_NAMBUF
 525:DRIVER/FatFs/source/ff.c **** #define INIT_NAMBUF(fs)
 526:DRIVER/FatFs/source/ff.c **** #define FREE_NAMBUF()
 527:DRIVER/FatFs/source/ff.c **** #define LEAVE_MKFS(res)	return res
 528:DRIVER/FatFs/source/ff.c **** 
 529:DRIVER/FatFs/source/ff.c **** #elif FF_USE_LFN == 2 	/* LFN enabled with dynamic working buffer on the stack */
 530:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
 531:DRIVER/FatFs/source/ff.c **** #define DEF_NAMBUF		WCHAR lbuf[FF_MAX_LFN+1]; BYTE dbuf[MAXDIRB(FF_MAX_LFN)];	/* LFN working buffer
 532:DRIVER/FatFs/source/ff.c **** #define INIT_NAMBUF(fs)	{ (fs)->lfnbuf = lbuf; (fs)->dirbuf = dbuf; }
 533:DRIVER/FatFs/source/ff.c **** #define FREE_NAMBUF()
 534:DRIVER/FatFs/source/ff.c **** #else
 535:DRIVER/FatFs/source/ff.c **** #define DEF_NAMBUF		WCHAR lbuf[FF_MAX_LFN+1];	/* LFN working buffer */
 536:DRIVER/FatFs/source/ff.c **** #define INIT_NAMBUF(fs)	{ (fs)->lfnbuf = lbuf; }
 537:DRIVER/FatFs/source/ff.c **** #define FREE_NAMBUF()
 538:DRIVER/FatFs/source/ff.c **** #endif
 539:DRIVER/FatFs/source/ff.c **** #define LEAVE_MKFS(res)	return res
 540:DRIVER/FatFs/source/ff.c **** 
 541:DRIVER/FatFs/source/ff.c **** #elif FF_USE_LFN == 3 	/* LFN enabled with dynamic working buffer on the heap */
 542:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
 543:DRIVER/FatFs/source/ff.c **** #define DEF_NAMBUF		WCHAR *lfn;	/* Pointer to LFN working buffer and directory entry block scratchp
 544:DRIVER/FatFs/source/ff.c **** #define INIT_NAMBUF(fs)	{ lfn = ff_memalloc((FF_MAX_LFN+1)*2 + MAXDIRB(FF_MAX_LFN)); if (!lfn) LEAV
 545:DRIVER/FatFs/source/ff.c **** #define FREE_NAMBUF()	ff_memfree(lfn)
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 11


 546:DRIVER/FatFs/source/ff.c **** #else
 547:DRIVER/FatFs/source/ff.c **** #define DEF_NAMBUF		WCHAR *lfn;	/* Pointer to LFN working buffer */
 548:DRIVER/FatFs/source/ff.c **** #define INIT_NAMBUF(fs)	{ lfn = ff_memalloc((FF_MAX_LFN+1)*2); if (!lfn) LEAVE_FF(fs, FR_NOT_ENOUGH
 549:DRIVER/FatFs/source/ff.c **** #define FREE_NAMBUF()	ff_memfree(lfn)
 550:DRIVER/FatFs/source/ff.c **** #endif
 551:DRIVER/FatFs/source/ff.c **** #define LEAVE_MKFS(res)	{ if (!work) ff_memfree(buf); return res; }
 552:DRIVER/FatFs/source/ff.c **** #define MAX_MALLOC	0x8000	/* Must be >=FF_MAX_SS */
 553:DRIVER/FatFs/source/ff.c **** 
 554:DRIVER/FatFs/source/ff.c **** #else
 555:DRIVER/FatFs/source/ff.c **** #error Wrong setting of FF_USE_LFN
 556:DRIVER/FatFs/source/ff.c **** 
 557:DRIVER/FatFs/source/ff.c **** #endif	/* FF_USE_LFN == 1 */
 558:DRIVER/FatFs/source/ff.c **** #endif	/* FF_USE_LFN == 0 */
 559:DRIVER/FatFs/source/ff.c **** 
 560:DRIVER/FatFs/source/ff.c **** 
 561:DRIVER/FatFs/source/ff.c **** 
 562:DRIVER/FatFs/source/ff.c **** /*--------------------------------*/
 563:DRIVER/FatFs/source/ff.c **** /* Code conversion tables         */
 564:DRIVER/FatFs/source/ff.c **** /*--------------------------------*/
 565:DRIVER/FatFs/source/ff.c **** 
 566:DRIVER/FatFs/source/ff.c **** #if FF_CODE_PAGE == 0	/* Run-time code page configuration */
 567:DRIVER/FatFs/source/ff.c **** #define CODEPAGE CodePage
 568:DRIVER/FatFs/source/ff.c **** static WORD CodePage;	/* Current code page */
 569:DRIVER/FatFs/source/ff.c **** static const BYTE* ExCvt;	/* Ptr to SBCS up-case table Ct???[] (null:not used) */
 570:DRIVER/FatFs/source/ff.c **** static const BYTE* DbcTbl;	/* Ptr to DBCS code range table Dc???[] (null:not used) */
 571:DRIVER/FatFs/source/ff.c **** 
 572:DRIVER/FatFs/source/ff.c **** static const BYTE Ct437[] = TBL_CT437;
 573:DRIVER/FatFs/source/ff.c **** static const BYTE Ct720[] = TBL_CT720;
 574:DRIVER/FatFs/source/ff.c **** static const BYTE Ct737[] = TBL_CT737;
 575:DRIVER/FatFs/source/ff.c **** static const BYTE Ct771[] = TBL_CT771;
 576:DRIVER/FatFs/source/ff.c **** static const BYTE Ct775[] = TBL_CT775;
 577:DRIVER/FatFs/source/ff.c **** static const BYTE Ct850[] = TBL_CT850;
 578:DRIVER/FatFs/source/ff.c **** static const BYTE Ct852[] = TBL_CT852;
 579:DRIVER/FatFs/source/ff.c **** static const BYTE Ct855[] = TBL_CT855;
 580:DRIVER/FatFs/source/ff.c **** static const BYTE Ct857[] = TBL_CT857;
 581:DRIVER/FatFs/source/ff.c **** static const BYTE Ct860[] = TBL_CT860;
 582:DRIVER/FatFs/source/ff.c **** static const BYTE Ct861[] = TBL_CT861;
 583:DRIVER/FatFs/source/ff.c **** static const BYTE Ct862[] = TBL_CT862;
 584:DRIVER/FatFs/source/ff.c **** static const BYTE Ct863[] = TBL_CT863;
 585:DRIVER/FatFs/source/ff.c **** static const BYTE Ct864[] = TBL_CT864;
 586:DRIVER/FatFs/source/ff.c **** static const BYTE Ct865[] = TBL_CT865;
 587:DRIVER/FatFs/source/ff.c **** static const BYTE Ct866[] = TBL_CT866;
 588:DRIVER/FatFs/source/ff.c **** static const BYTE Ct869[] = TBL_CT869;
 589:DRIVER/FatFs/source/ff.c **** static const BYTE Dc932[] = TBL_DC932;
 590:DRIVER/FatFs/source/ff.c **** static const BYTE Dc936[] = TBL_DC936;
 591:DRIVER/FatFs/source/ff.c **** static const BYTE Dc949[] = TBL_DC949;
 592:DRIVER/FatFs/source/ff.c **** static const BYTE Dc950[] = TBL_DC950;
 593:DRIVER/FatFs/source/ff.c **** 
 594:DRIVER/FatFs/source/ff.c **** #elif FF_CODE_PAGE < 900	/* Static code page configuration (SBCS) */
 595:DRIVER/FatFs/source/ff.c **** #define CODEPAGE FF_CODE_PAGE
 596:DRIVER/FatFs/source/ff.c **** static const BYTE ExCvt[] = MKCVTBL(TBL_CT, FF_CODE_PAGE);
 597:DRIVER/FatFs/source/ff.c **** 
 598:DRIVER/FatFs/source/ff.c **** #else					/* Static code page configuration (DBCS) */
 599:DRIVER/FatFs/source/ff.c **** #define CODEPAGE FF_CODE_PAGE
 600:DRIVER/FatFs/source/ff.c **** static const BYTE DbcTbl[] = MKCVTBL(TBL_DC, FF_CODE_PAGE);
 601:DRIVER/FatFs/source/ff.c **** 
 602:DRIVER/FatFs/source/ff.c **** #endif
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 12


 603:DRIVER/FatFs/source/ff.c **** 
 604:DRIVER/FatFs/source/ff.c **** 
 605:DRIVER/FatFs/source/ff.c **** 
 606:DRIVER/FatFs/source/ff.c **** 
 607:DRIVER/FatFs/source/ff.c **** /*--------------------------------------------------------------------------
 608:DRIVER/FatFs/source/ff.c **** 
 609:DRIVER/FatFs/source/ff.c ****    Module Private Functions
 610:DRIVER/FatFs/source/ff.c **** 
 611:DRIVER/FatFs/source/ff.c **** ---------------------------------------------------------------------------*/
 612:DRIVER/FatFs/source/ff.c **** 
 613:DRIVER/FatFs/source/ff.c **** 
 614:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
 615:DRIVER/FatFs/source/ff.c **** /* Load/Store multi-byte word in the FAT structure                       */
 616:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
 617:DRIVER/FatFs/source/ff.c **** 
 618:DRIVER/FatFs/source/ff.c **** static WORD ld_word (const BYTE* ptr)	/*	 Load a 2-byte little-endian word */
 619:DRIVER/FatFs/source/ff.c **** {
  27              		.loc 1 619 1 view -0
  28              		.cfi_startproc
  29              		@ args = 0, pretend = 0, frame = 0
  30              		@ frame_needed = 0, uses_anonymous_args = 0
  31              		@ link register save eliminated.
 620:DRIVER/FatFs/source/ff.c **** 	WORD rv;
  32              		.loc 1 620 2 view .LVU1
 621:DRIVER/FatFs/source/ff.c **** 
 622:DRIVER/FatFs/source/ff.c **** 	rv = ptr[1];
  33              		.loc 1 622 2 view .LVU2
  34              		.loc 1 622 10 is_stmt 0 view .LVU3
  35 0000 4278     		ldrb	r2, [r0, #1]	@ zero_extendqisi2
  36              	.LVL1:
 623:DRIVER/FatFs/source/ff.c **** 	rv = rv << 8 | ptr[0];
  37              		.loc 1 623 2 is_stmt 1 view .LVU4
  38              		.loc 1 623 20 is_stmt 0 view .LVU5
  39 0002 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
  40              	.LVL2:
 624:DRIVER/FatFs/source/ff.c **** 	return rv;
  41              		.loc 1 624 2 is_stmt 1 view .LVU6
 625:DRIVER/FatFs/source/ff.c **** }
  42              		.loc 1 625 1 is_stmt 0 view .LVU7
  43 0004 40EA0220 		orr	r0, r0, r2, lsl #8
  44              	.LVL3:
  45              		.loc 1 625 1 view .LVU8
  46 0008 7047     		bx	lr
  47              		.cfi_endproc
  48              	.LFE0:
  50              		.section	.text.ld_dword,"ax",%progbits
  51              		.align	1
  52              		.syntax unified
  53              		.thumb
  54              		.thumb_func
  56              	ld_dword:
  57              	.LVL4:
  58              	.LFB1:
 626:DRIVER/FatFs/source/ff.c **** 
 627:DRIVER/FatFs/source/ff.c **** static DWORD ld_dword (const BYTE* ptr)	/* Load a 4-byte little-endian word */
 628:DRIVER/FatFs/source/ff.c **** {
  59              		.loc 1 628 1 is_stmt 1 view -0
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 13


  60              		.cfi_startproc
  61              		@ args = 0, pretend = 0, frame = 0
  62              		@ frame_needed = 0, uses_anonymous_args = 0
  63              		@ link register save eliminated.
 629:DRIVER/FatFs/source/ff.c **** 	DWORD rv;
  64              		.loc 1 629 2 view .LVU10
 630:DRIVER/FatFs/source/ff.c **** 
 631:DRIVER/FatFs/source/ff.c **** 	rv = ptr[3];
  65              		.loc 1 631 2 view .LVU11
  66              		.loc 1 631 10 is_stmt 0 view .LVU12
  67 0000 C378     		ldrb	r3, [r0, #3]	@ zero_extendqisi2
  68              	.LVL5:
 632:DRIVER/FatFs/source/ff.c **** 	rv = rv << 8 | ptr[2];
  69              		.loc 1 632 2 is_stmt 1 view .LVU13
  70              		.loc 1 632 20 is_stmt 0 view .LVU14
  71 0002 8278     		ldrb	r2, [r0, #2]	@ zero_extendqisi2
  72              		.loc 1 632 5 view .LVU15
  73 0004 42EA0322 		orr	r2, r2, r3, lsl #8
  74              	.LVL6:
 633:DRIVER/FatFs/source/ff.c **** 	rv = rv << 8 | ptr[1];
  75              		.loc 1 633 2 is_stmt 1 view .LVU16
  76              		.loc 1 633 20 is_stmt 0 view .LVU17
  77 0008 4378     		ldrb	r3, [r0, #1]	@ zero_extendqisi2
  78              		.loc 1 633 5 view .LVU18
  79 000a 43EA0223 		orr	r3, r3, r2, lsl #8
  80              	.LVL7:
 634:DRIVER/FatFs/source/ff.c **** 	rv = rv << 8 | ptr[0];
  81              		.loc 1 634 2 is_stmt 1 view .LVU19
  82              		.loc 1 634 20 is_stmt 0 view .LVU20
  83 000e 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
  84              	.LVL8:
 635:DRIVER/FatFs/source/ff.c **** 	return rv;
  85              		.loc 1 635 2 is_stmt 1 view .LVU21
 636:DRIVER/FatFs/source/ff.c **** }
  86              		.loc 1 636 1 is_stmt 0 view .LVU22
  87 0010 40EA0320 		orr	r0, r0, r3, lsl #8
  88              	.LVL9:
  89              		.loc 1 636 1 view .LVU23
  90 0014 7047     		bx	lr
  91              		.cfi_endproc
  92              	.LFE1:
  94              		.section	.text.st_word,"ax",%progbits
  95              		.align	1
  96              		.syntax unified
  97              		.thumb
  98              		.thumb_func
 100              	st_word:
 101              	.LVL10:
 102              	.LFB2:
 637:DRIVER/FatFs/source/ff.c **** 
 638:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
 639:DRIVER/FatFs/source/ff.c **** static QWORD ld_qword (const BYTE* ptr)	/* Load an 8-byte little-endian word */
 640:DRIVER/FatFs/source/ff.c **** {
 641:DRIVER/FatFs/source/ff.c **** 	QWORD rv;
 642:DRIVER/FatFs/source/ff.c **** 
 643:DRIVER/FatFs/source/ff.c **** 	rv = ptr[7];
 644:DRIVER/FatFs/source/ff.c **** 	rv = rv << 8 | ptr[6];
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 14


 645:DRIVER/FatFs/source/ff.c **** 	rv = rv << 8 | ptr[5];
 646:DRIVER/FatFs/source/ff.c **** 	rv = rv << 8 | ptr[4];
 647:DRIVER/FatFs/source/ff.c **** 	rv = rv << 8 | ptr[3];
 648:DRIVER/FatFs/source/ff.c **** 	rv = rv << 8 | ptr[2];
 649:DRIVER/FatFs/source/ff.c **** 	rv = rv << 8 | ptr[1];
 650:DRIVER/FatFs/source/ff.c **** 	rv = rv << 8 | ptr[0];
 651:DRIVER/FatFs/source/ff.c **** 	return rv;
 652:DRIVER/FatFs/source/ff.c **** }
 653:DRIVER/FatFs/source/ff.c **** #endif
 654:DRIVER/FatFs/source/ff.c **** 
 655:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY
 656:DRIVER/FatFs/source/ff.c **** static void st_word (BYTE* ptr, WORD val)	/* Store a 2-byte word in little-endian */
 657:DRIVER/FatFs/source/ff.c **** {
 103              		.loc 1 657 1 is_stmt 1 view -0
 104              		.cfi_startproc
 105              		@ args = 0, pretend = 0, frame = 0
 106              		@ frame_needed = 0, uses_anonymous_args = 0
 107              		@ link register save eliminated.
 658:DRIVER/FatFs/source/ff.c **** 	*ptr++ = (BYTE)val; val >>= 8;
 108              		.loc 1 658 2 view .LVU25
 109              		.loc 1 658 9 is_stmt 0 view .LVU26
 110 0000 0170     		strb	r1, [r0]
 111              		.loc 1 658 22 is_stmt 1 view .LVU27
 112              	.LVL11:
 659:DRIVER/FatFs/source/ff.c **** 	*ptr++ = (BYTE)val;
 113              		.loc 1 659 2 view .LVU28
 114              		.loc 1 659 11 is_stmt 0 view .LVU29
 115 0002 090A     		lsrs	r1, r1, #8
 116              	.LVL12:
 117              		.loc 1 659 9 view .LVU30
 118 0004 4170     		strb	r1, [r0, #1]
 660:DRIVER/FatFs/source/ff.c **** }
 119              		.loc 1 660 1 view .LVU31
 120 0006 7047     		bx	lr
 121              		.cfi_endproc
 122              	.LFE2:
 124              		.section	.text.st_dword,"ax",%progbits
 125              		.align	1
 126              		.syntax unified
 127              		.thumb
 128              		.thumb_func
 130              	st_dword:
 131              	.LVL13:
 132              	.LFB3:
 661:DRIVER/FatFs/source/ff.c **** 
 662:DRIVER/FatFs/source/ff.c **** static void st_dword (BYTE* ptr, DWORD val)	/* Store a 4-byte word in little-endian */
 663:DRIVER/FatFs/source/ff.c **** {
 133              		.loc 1 663 1 is_stmt 1 view -0
 134              		.cfi_startproc
 135              		@ args = 0, pretend = 0, frame = 0
 136              		@ frame_needed = 0, uses_anonymous_args = 0
 137              		@ link register save eliminated.
 664:DRIVER/FatFs/source/ff.c **** 	*ptr++ = (BYTE)val; val >>= 8;
 138              		.loc 1 664 2 view .LVU33
 139              		.loc 1 664 9 is_stmt 0 view .LVU34
 140 0000 0170     		strb	r1, [r0]
 141              		.loc 1 664 22 is_stmt 1 view .LVU35
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 15


 142              	.LVL14:
 665:DRIVER/FatFs/source/ff.c **** 	*ptr++ = (BYTE)val; val >>= 8;
 143              		.loc 1 665 2 view .LVU36
 144              		.loc 1 665 11 is_stmt 0 view .LVU37
 145 0002 C1F30723 		ubfx	r3, r1, #8, #8
 146              		.loc 1 665 9 view .LVU38
 147 0006 4370     		strb	r3, [r0, #1]
 148              		.loc 1 665 22 is_stmt 1 view .LVU39
 149              	.LVL15:
 666:DRIVER/FatFs/source/ff.c **** 	*ptr++ = (BYTE)val; val >>= 8;
 150              		.loc 1 666 2 view .LVU40
 151              		.loc 1 666 11 is_stmt 0 view .LVU41
 152 0008 C1F30743 		ubfx	r3, r1, #16, #8
 153              		.loc 1 666 9 view .LVU42
 154 000c 8370     		strb	r3, [r0, #2]
 155              		.loc 1 666 22 is_stmt 1 view .LVU43
 156              	.LVL16:
 667:DRIVER/FatFs/source/ff.c **** 	*ptr++ = (BYTE)val;
 157              		.loc 1 667 2 view .LVU44
 158              		.loc 1 667 11 is_stmt 0 view .LVU45
 159 000e 090E     		lsrs	r1, r1, #24
 160              	.LVL17:
 161              		.loc 1 667 9 view .LVU46
 162 0010 C170     		strb	r1, [r0, #3]
 668:DRIVER/FatFs/source/ff.c **** }
 163              		.loc 1 668 1 view .LVU47
 164 0012 7047     		bx	lr
 165              		.cfi_endproc
 166              	.LFE3:
 168              		.section	.text.dbc_1st,"ax",%progbits
 169              		.align	1
 170              		.syntax unified
 171              		.thumb
 172              		.thumb_func
 174              	dbc_1st:
 175              	.LVL18:
 176              	.LFB4:
 669:DRIVER/FatFs/source/ff.c **** 
 670:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
 671:DRIVER/FatFs/source/ff.c **** static void st_qword (BYTE* ptr, QWORD val)	/* Store an 8-byte word in little-endian */
 672:DRIVER/FatFs/source/ff.c **** {
 673:DRIVER/FatFs/source/ff.c **** 	*ptr++ = (BYTE)val; val >>= 8;
 674:DRIVER/FatFs/source/ff.c **** 	*ptr++ = (BYTE)val; val >>= 8;
 675:DRIVER/FatFs/source/ff.c **** 	*ptr++ = (BYTE)val; val >>= 8;
 676:DRIVER/FatFs/source/ff.c **** 	*ptr++ = (BYTE)val; val >>= 8;
 677:DRIVER/FatFs/source/ff.c **** 	*ptr++ = (BYTE)val; val >>= 8;
 678:DRIVER/FatFs/source/ff.c **** 	*ptr++ = (BYTE)val; val >>= 8;
 679:DRIVER/FatFs/source/ff.c **** 	*ptr++ = (BYTE)val; val >>= 8;
 680:DRIVER/FatFs/source/ff.c **** 	*ptr++ = (BYTE)val;
 681:DRIVER/FatFs/source/ff.c **** }
 682:DRIVER/FatFs/source/ff.c **** #endif
 683:DRIVER/FatFs/source/ff.c **** #endif	/* !FF_FS_READONLY */
 684:DRIVER/FatFs/source/ff.c **** 
 685:DRIVER/FatFs/source/ff.c **** 
 686:DRIVER/FatFs/source/ff.c **** 
 687:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
 688:DRIVER/FatFs/source/ff.c **** /* String functions                                                      */
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 16


 689:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
 690:DRIVER/FatFs/source/ff.c **** 
 691:DRIVER/FatFs/source/ff.c **** /* Test if the byte is DBC 1st byte */
 692:DRIVER/FatFs/source/ff.c **** static int dbc_1st (BYTE c)
 693:DRIVER/FatFs/source/ff.c **** {
 177              		.loc 1 693 1 is_stmt 1 view -0
 178              		.cfi_startproc
 179              		@ args = 0, pretend = 0, frame = 0
 180              		@ frame_needed = 0, uses_anonymous_args = 0
 181              		@ link register save eliminated.
 694:DRIVER/FatFs/source/ff.c **** #if FF_CODE_PAGE == 0		/* Variable code page */
 695:DRIVER/FatFs/source/ff.c **** 	if (DbcTbl && c >= DbcTbl[0]) {
 696:DRIVER/FatFs/source/ff.c **** 		if (c <= DbcTbl[1]) return 1;					/* 1st byte range 1 */
 697:DRIVER/FatFs/source/ff.c **** 		if (c >= DbcTbl[2] && c <= DbcTbl[3]) return 1;	/* 1st byte range 2 */
 698:DRIVER/FatFs/source/ff.c **** 	}
 699:DRIVER/FatFs/source/ff.c **** #elif FF_CODE_PAGE >= 900	/* DBCS fixed code page */
 700:DRIVER/FatFs/source/ff.c **** 	if (c >= DbcTbl[0]) {
 701:DRIVER/FatFs/source/ff.c **** 		if (c <= DbcTbl[1]) return 1;
 702:DRIVER/FatFs/source/ff.c **** 		if (c >= DbcTbl[2] && c <= DbcTbl[3]) return 1;
 703:DRIVER/FatFs/source/ff.c **** 	}
 704:DRIVER/FatFs/source/ff.c **** #else						/* SBCS fixed code page */
 705:DRIVER/FatFs/source/ff.c **** 	if (c != 0) return 0;	/* Always false */
 182              		.loc 1 705 2 view .LVU49
 706:DRIVER/FatFs/source/ff.c **** #endif
 707:DRIVER/FatFs/source/ff.c **** 	return 0;
 708:DRIVER/FatFs/source/ff.c **** }
 183              		.loc 1 708 1 is_stmt 0 view .LVU50
 184 0000 0020     		movs	r0, #0
 185              	.LVL19:
 186              		.loc 1 708 1 view .LVU51
 187 0002 7047     		bx	lr
 188              		.cfi_endproc
 189              	.LFE4:
 191              		.section	.text.dbc_2nd,"ax",%progbits
 192              		.align	1
 193              		.syntax unified
 194              		.thumb
 195              		.thumb_func
 197              	dbc_2nd:
 198              	.LVL20:
 199              	.LFB5:
 709:DRIVER/FatFs/source/ff.c **** 
 710:DRIVER/FatFs/source/ff.c **** 
 711:DRIVER/FatFs/source/ff.c **** /* Test if the byte is DBC 2nd byte */
 712:DRIVER/FatFs/source/ff.c **** static int dbc_2nd (BYTE c)
 713:DRIVER/FatFs/source/ff.c **** {
 200              		.loc 1 713 1 is_stmt 1 view -0
 201              		.cfi_startproc
 202              		@ args = 0, pretend = 0, frame = 0
 203              		@ frame_needed = 0, uses_anonymous_args = 0
 204              		@ link register save eliminated.
 714:DRIVER/FatFs/source/ff.c **** #if FF_CODE_PAGE == 0		/* Variable code page */
 715:DRIVER/FatFs/source/ff.c **** 	if (DbcTbl && c >= DbcTbl[4]) {
 716:DRIVER/FatFs/source/ff.c **** 		if (c <= DbcTbl[5]) return 1;					/* 2nd byte range 1 */
 717:DRIVER/FatFs/source/ff.c **** 		if (c >= DbcTbl[6] && c <= DbcTbl[7]) return 1;	/* 2nd byte range 2 */
 718:DRIVER/FatFs/source/ff.c **** 		if (c >= DbcTbl[8] && c <= DbcTbl[9]) return 1;	/* 2nd byte range 3 */
 719:DRIVER/FatFs/source/ff.c **** 	}
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 17


 720:DRIVER/FatFs/source/ff.c **** #elif FF_CODE_PAGE >= 900	/* DBCS fixed code page */
 721:DRIVER/FatFs/source/ff.c **** 	if (c >= DbcTbl[4]) {
 722:DRIVER/FatFs/source/ff.c **** 		if (c <= DbcTbl[5]) return 1;
 723:DRIVER/FatFs/source/ff.c **** 		if (c >= DbcTbl[6] && c <= DbcTbl[7]) return 1;
 724:DRIVER/FatFs/source/ff.c **** 		if (c >= DbcTbl[8] && c <= DbcTbl[9]) return 1;
 725:DRIVER/FatFs/source/ff.c **** 	}
 726:DRIVER/FatFs/source/ff.c **** #else						/* SBCS fixed code page */
 727:DRIVER/FatFs/source/ff.c **** 	if (c != 0) return 0;	/* Always false */
 205              		.loc 1 727 2 view .LVU53
 728:DRIVER/FatFs/source/ff.c **** #endif
 729:DRIVER/FatFs/source/ff.c **** 	return 0;
 730:DRIVER/FatFs/source/ff.c **** }
 206              		.loc 1 730 1 is_stmt 0 view .LVU54
 207 0000 0020     		movs	r0, #0
 208              	.LVL21:
 209              		.loc 1 730 1 view .LVU55
 210 0002 7047     		bx	lr
 211              		.cfi_endproc
 212              	.LFE5:
 214              		.section	.text.tchar2uni,"ax",%progbits
 215              		.align	1
 216              		.syntax unified
 217              		.thumb
 218              		.thumb_func
 220              	tchar2uni:
 221              	.LVL22:
 222              	.LFB6:
 731:DRIVER/FatFs/source/ff.c **** 
 732:DRIVER/FatFs/source/ff.c **** 
 733:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN
 734:DRIVER/FatFs/source/ff.c **** 
 735:DRIVER/FatFs/source/ff.c **** /* Get a Unicode code point from the TCHAR string in defined API encodeing */
 736:DRIVER/FatFs/source/ff.c **** static DWORD tchar2uni (	/* Returns a character in UTF-16 encoding (>=0x10000 on surrogate pair, 0x
 737:DRIVER/FatFs/source/ff.c **** 	const TCHAR** str		/* Pointer to pointer to TCHAR string in configured encoding */
 738:DRIVER/FatFs/source/ff.c **** )
 739:DRIVER/FatFs/source/ff.c **** {
 223              		.loc 1 739 1 is_stmt 1 view -0
 224              		.cfi_startproc
 225              		@ args = 0, pretend = 0, frame = 0
 226              		@ frame_needed = 0, uses_anonymous_args = 0
 227              		.loc 1 739 1 is_stmt 0 view .LVU57
 228 0000 00B5     		push	{lr}
 229              	.LCFI0:
 230              		.cfi_def_cfa_offset 4
 231              		.cfi_offset 14, -4
 232 0002 8646     		mov	lr, r0
 740:DRIVER/FatFs/source/ff.c **** 	DWORD uc;
 233              		.loc 1 740 2 is_stmt 1 view .LVU58
 741:DRIVER/FatFs/source/ff.c **** 	const TCHAR *p = *str;
 234              		.loc 1 741 2 view .LVU59
 235              	.LVL23:
 742:DRIVER/FatFs/source/ff.c **** 
 743:DRIVER/FatFs/source/ff.c **** #if FF_LFN_UNICODE == 1		/* UTF-16 input */
 744:DRIVER/FatFs/source/ff.c **** 	WCHAR wc;
 745:DRIVER/FatFs/source/ff.c **** 
 746:DRIVER/FatFs/source/ff.c **** 	uc = *p++;	/* Get a unit */
 747:DRIVER/FatFs/source/ff.c **** 	if (IsSurrogate(uc)) {	/* Surrogate? */
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 18


 748:DRIVER/FatFs/source/ff.c **** 		wc = *p++;		/* Get low surrogate */
 749:DRIVER/FatFs/source/ff.c **** 		if (!IsSurrogateH(uc) || !IsSurrogateL(wc)) return 0xFFFFFFFF;	/* Wrong surrogate? */
 750:DRIVER/FatFs/source/ff.c **** 		uc = uc << 16 | wc;
 751:DRIVER/FatFs/source/ff.c **** 	}
 752:DRIVER/FatFs/source/ff.c **** 
 753:DRIVER/FatFs/source/ff.c **** #elif FF_LFN_UNICODE == 2	/* UTF-8 input */
 754:DRIVER/FatFs/source/ff.c **** 	BYTE b;
 236              		.loc 1 754 2 view .LVU60
 755:DRIVER/FatFs/source/ff.c **** 	int nf;
 237              		.loc 1 755 2 view .LVU61
 756:DRIVER/FatFs/source/ff.c **** 
 757:DRIVER/FatFs/source/ff.c **** 	uc = (BYTE)*p++;	/* Get an encoding unit */
 238              		.loc 1 757 2 view .LVU62
 239              		.loc 1 757 15 is_stmt 0 view .LVU63
 240 0004 0268     		ldr	r2, [r0]
 241              	.LVL24:
 242              		.loc 1 757 13 view .LVU64
 243 0006 12F8013B 		ldrb	r3, [r2], #1	@ zero_extendqisi2
 244              	.LVL25:
 245              		.loc 1 757 5 view .LVU65
 246 000a 1846     		mov	r0, r3
 247              	.LVL26:
 758:DRIVER/FatFs/source/ff.c **** 	if (uc & 0x80) {	/* Multiple byte code? */
 248              		.loc 1 758 2 is_stmt 1 view .LVU66
 249              		.loc 1 758 5 is_stmt 0 view .LVU67
 250 000c 13F0800F 		tst	r3, #128
 251 0010 03D1     		bne	.L20
 252              	.LVL27:
 253              	.L8:
 759:DRIVER/FatFs/source/ff.c **** 		if        ((uc & 0xE0) == 0xC0) {	/* 2-byte sequence? */
 760:DRIVER/FatFs/source/ff.c **** 			uc &= 0x1F; nf = 1;
 761:DRIVER/FatFs/source/ff.c **** 		} else if ((uc & 0xF0) == 0xE0) {	/* 3-byte sequence? */
 762:DRIVER/FatFs/source/ff.c **** 			uc &= 0x0F; nf = 2;
 763:DRIVER/FatFs/source/ff.c **** 		} else if ((uc & 0xF8) == 0xF0) {	/* 4-byte sequence? */
 764:DRIVER/FatFs/source/ff.c **** 			uc &= 0x07; nf = 3;
 765:DRIVER/FatFs/source/ff.c **** 		} else {							/* Wrong sequence */
 766:DRIVER/FatFs/source/ff.c **** 			return 0xFFFFFFFF;
 767:DRIVER/FatFs/source/ff.c **** 		}
 768:DRIVER/FatFs/source/ff.c **** 		do {	/* Get trailing bytes */
 769:DRIVER/FatFs/source/ff.c **** 			b = (BYTE)*p++;
 770:DRIVER/FatFs/source/ff.c **** 			if ((b & 0xC0) != 0x80) return 0xFFFFFFFF;	/* Wrong sequence? */
 771:DRIVER/FatFs/source/ff.c **** 			uc = uc << 6 | (b & 0x3F);
 772:DRIVER/FatFs/source/ff.c **** 		} while (--nf != 0);
 773:DRIVER/FatFs/source/ff.c **** 		if (uc < 0x80 || IsSurrogate(uc) || uc >= 0x110000) return 0xFFFFFFFF;	/* Wrong code? */
 774:DRIVER/FatFs/source/ff.c **** 		if (uc >= 0x010000) uc = 0xD800DC00 | ((uc - 0x10000) << 6 & 0x3FF0000) | (uc & 0x3FF);	/* Make a
 775:DRIVER/FatFs/source/ff.c **** 	}
 776:DRIVER/FatFs/source/ff.c **** 
 777:DRIVER/FatFs/source/ff.c **** #elif FF_LFN_UNICODE == 3	/* UTF-32 input */
 778:DRIVER/FatFs/source/ff.c **** 	uc = (TCHAR)*p++;	/* Get a unit */
 779:DRIVER/FatFs/source/ff.c **** 	if (uc >= 0x110000 || IsSurrogate(uc)) return 0xFFFFFFFF;	/* Wrong code? */
 780:DRIVER/FatFs/source/ff.c **** 	if (uc >= 0x010000) uc = 0xD800DC00 | ((uc - 0x10000) << 6 & 0x3FF0000) | (uc & 0x3FF);	/* Make a 
 781:DRIVER/FatFs/source/ff.c **** 
 782:DRIVER/FatFs/source/ff.c **** #else		/* ANSI/OEM input */
 783:DRIVER/FatFs/source/ff.c **** 	BYTE b;
 784:DRIVER/FatFs/source/ff.c **** 	WCHAR wc;
 785:DRIVER/FatFs/source/ff.c **** 
 786:DRIVER/FatFs/source/ff.c **** 	wc = (BYTE)*p++;			/* Get a byte */
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 19


 787:DRIVER/FatFs/source/ff.c **** 	if (dbc_1st((BYTE)wc)) {	/* Is it a DBC 1st byte? */
 788:DRIVER/FatFs/source/ff.c **** 		b = (BYTE)*p++;			/* Get 2nd byte */
 789:DRIVER/FatFs/source/ff.c **** 		if (!dbc_2nd(b)) return 0xFFFFFFFF;	/* Invalid code? */
 790:DRIVER/FatFs/source/ff.c **** 		wc = (wc << 8) + b;		/* Make a DBC */
 791:DRIVER/FatFs/source/ff.c **** 	}
 792:DRIVER/FatFs/source/ff.c **** 	if (wc != 0) {
 793:DRIVER/FatFs/source/ff.c **** 		wc = ff_oem2uni(wc, CODEPAGE);	/* ANSI/OEM ==> Unicode */
 794:DRIVER/FatFs/source/ff.c **** 		if (wc == 0) return 0xFFFFFFFF;	/* Invalid code? */
 795:DRIVER/FatFs/source/ff.c **** 	}
 796:DRIVER/FatFs/source/ff.c **** 	uc = wc;
 797:DRIVER/FatFs/source/ff.c **** 
 798:DRIVER/FatFs/source/ff.c **** #endif
 799:DRIVER/FatFs/source/ff.c **** 	*str = p;	/* Next read pointer */
 254              		.loc 1 799 2 is_stmt 1 view .LVU68
 255              		.loc 1 799 7 is_stmt 0 view .LVU69
 256 0012 CEF80020 		str	r2, [lr]
 800:DRIVER/FatFs/source/ff.c **** 	return uc;
 257              		.loc 1 800 2 is_stmt 1 view .LVU70
 258              	.LVL28:
 259              	.L7:
 801:DRIVER/FatFs/source/ff.c **** }
 260              		.loc 1 801 1 is_stmt 0 view .LVU71
 261 0016 5DF804FB 		ldr	pc, [sp], #4
 262              	.LVL29:
 263              	.L20:
 759:DRIVER/FatFs/source/ff.c **** 		if        ((uc & 0xE0) == 0xC0) {	/* 2-byte sequence? */
 264              		.loc 1 759 3 is_stmt 1 view .LVU72
 759:DRIVER/FatFs/source/ff.c **** 		if        ((uc & 0xE0) == 0xC0) {	/* 2-byte sequence? */
 265              		.loc 1 759 13 is_stmt 0 view .LVU73
 266 001a 03F0E001 		and	r1, r3, #224
 267 001e C029     		cmp	r1, #192
 268 0020 0BD0     		beq	.L21
 761:DRIVER/FatFs/source/ff.c **** 			uc &= 0x0F; nf = 2;
 269              		.loc 1 761 10 is_stmt 1 view .LVU74
 761:DRIVER/FatFs/source/ff.c **** 			uc &= 0x0F; nf = 2;
 270              		.loc 1 761 13 is_stmt 0 view .LVU75
 271 0022 03F0F001 		and	r1, r3, #240
 272 0026 E029     		cmp	r1, #224
 273 0028 31D0     		beq	.L22
 763:DRIVER/FatFs/source/ff.c **** 			uc &= 0x07; nf = 3;
 274              		.loc 1 763 10 is_stmt 1 view .LVU76
 763:DRIVER/FatFs/source/ff.c **** 			uc &= 0x07; nf = 3;
 275              		.loc 1 763 13 is_stmt 0 view .LVU77
 276 002a 03F0F801 		and	r1, r3, #248
 277 002e F029     		cmp	r1, #240
 278 0030 31D1     		bne	.L14
 764:DRIVER/FatFs/source/ff.c **** 		} else {							/* Wrong sequence */
 279              		.loc 1 764 4 is_stmt 1 view .LVU78
 764:DRIVER/FatFs/source/ff.c **** 		} else {							/* Wrong sequence */
 280              		.loc 1 764 7 is_stmt 0 view .LVU79
 281 0032 03F00700 		and	r0, r3, #7
 282              	.LVL30:
 764:DRIVER/FatFs/source/ff.c **** 		} else {							/* Wrong sequence */
 283              		.loc 1 764 16 is_stmt 1 view .LVU80
 764:DRIVER/FatFs/source/ff.c **** 		} else {							/* Wrong sequence */
 284              		.loc 1 764 19 is_stmt 0 view .LVU81
 285 0036 0321     		movs	r1, #3
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 20


 286 0038 02E0     		b	.L13
 287              	.LVL31:
 288              	.L21:
 760:DRIVER/FatFs/source/ff.c **** 		} else if ((uc & 0xF0) == 0xE0) {	/* 3-byte sequence? */
 289              		.loc 1 760 4 is_stmt 1 view .LVU82
 760:DRIVER/FatFs/source/ff.c **** 		} else if ((uc & 0xF0) == 0xE0) {	/* 3-byte sequence? */
 290              		.loc 1 760 7 is_stmt 0 view .LVU83
 291 003a 03F01F00 		and	r0, r3, #31
 292              	.LVL32:
 760:DRIVER/FatFs/source/ff.c **** 		} else if ((uc & 0xF0) == 0xE0) {	/* 3-byte sequence? */
 293              		.loc 1 760 16 is_stmt 1 view .LVU84
 760:DRIVER/FatFs/source/ff.c **** 		} else if ((uc & 0xF0) == 0xE0) {	/* 3-byte sequence? */
 294              		.loc 1 760 19 is_stmt 0 view .LVU85
 295 003e 0121     		movs	r1, #1
 296              	.LVL33:
 297              	.L13:
 768:DRIVER/FatFs/source/ff.c **** 			b = (BYTE)*p++;
 298              		.loc 1 768 3 is_stmt 1 view .LVU86
 769:DRIVER/FatFs/source/ff.c **** 			if ((b & 0xC0) != 0x80) return 0xFFFFFFFF;	/* Wrong sequence? */
 299              		.loc 1 769 4 view .LVU87
 769:DRIVER/FatFs/source/ff.c **** 			if ((b & 0xC0) != 0x80) return 0xFFFFFFFF;	/* Wrong sequence? */
 300              		.loc 1 769 6 is_stmt 0 view .LVU88
 301 0040 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 302 0042 0132     		adds	r2, r2, #1
 303              	.LVL34:
 770:DRIVER/FatFs/source/ff.c **** 			uc = uc << 6 | (b & 0x3F);
 304              		.loc 1 770 4 is_stmt 1 view .LVU89
 770:DRIVER/FatFs/source/ff.c **** 			uc = uc << 6 | (b & 0x3F);
 305              		.loc 1 770 7 is_stmt 0 view .LVU90
 306 0044 03F0C00C 		and	ip, r3, #192
 307 0048 BCF1800F 		cmp	ip, #128
 308 004c 26D1     		bne	.L15
 771:DRIVER/FatFs/source/ff.c **** 		} while (--nf != 0);
 309              		.loc 1 771 4 is_stmt 1 view .LVU91
 771:DRIVER/FatFs/source/ff.c **** 		} while (--nf != 0);
 310              		.loc 1 771 22 is_stmt 0 view .LVU92
 311 004e 03F03F03 		and	r3, r3, #63
 312              	.LVL35:
 771:DRIVER/FatFs/source/ff.c **** 		} while (--nf != 0);
 313              		.loc 1 771 7 view .LVU93
 314 0052 43EA8010 		orr	r0, r3, r0, lsl #6
 315              	.LVL36:
 772:DRIVER/FatFs/source/ff.c **** 		if (uc < 0x80 || IsSurrogate(uc) || uc >= 0x110000) return 0xFFFFFFFF;	/* Wrong code? */
 316              		.loc 1 772 17 is_stmt 1 view .LVU94
 772:DRIVER/FatFs/source/ff.c **** 		if (uc < 0x80 || IsSurrogate(uc) || uc >= 0x110000) return 0xFFFFFFFF;	/* Wrong code? */
 317              		.loc 1 772 17 is_stmt 0 view .LVU95
 318 0056 0139     		subs	r1, r1, #1
 319              	.LVL37:
 772:DRIVER/FatFs/source/ff.c **** 		if (uc < 0x80 || IsSurrogate(uc) || uc >= 0x110000) return 0xFFFFFFFF;	/* Wrong code? */
 320              		.loc 1 772 17 view .LVU96
 321 0058 F2D1     		bne	.L13
 773:DRIVER/FatFs/source/ff.c **** 		if (uc >= 0x010000) uc = 0xD800DC00 | ((uc - 0x10000) << 6 & 0x3FF0000) | (uc & 0x3FF);	/* Make a
 322              		.loc 1 773 3 is_stmt 1 view .LVU97
 773:DRIVER/FatFs/source/ff.c **** 		if (uc >= 0x010000) uc = 0xD800DC00 | ((uc - 0x10000) << 6 & 0x3FF0000) | (uc & 0x3FF);	/* Make a
 323              		.loc 1 773 6 is_stmt 0 view .LVU98
 324 005a 7F28     		cmp	r0, #127
 325 005c 21D9     		bls	.L16
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 21


 773:DRIVER/FatFs/source/ff.c **** 		if (uc >= 0x010000) uc = 0xD800DC00 | ((uc - 0x10000) << 6 & 0x3FF0000) | (uc & 0x3FF);	/* Make a
 326              		.loc 1 773 20 discriminator 2 view .LVU99
 327 005e A0F55843 		sub	r3, r0, #55296
 773:DRIVER/FatFs/source/ff.c **** 		if (uc >= 0x010000) uc = 0xD800DC00 | ((uc - 0x10000) << 6 & 0x3FF0000) | (uc & 0x3FF);	/* Make a
 328              		.loc 1 773 17 discriminator 2 view .LVU100
 329 0062 B3F5006F 		cmp	r3, #2048
 330 0066 1FD3     		bcc	.L17
 773:DRIVER/FatFs/source/ff.c **** 		if (uc >= 0x010000) uc = 0xD800DC00 | ((uc - 0x10000) << 6 & 0x3FF0000) | (uc & 0x3FF);	/* Make a
 331              		.loc 1 773 36 discriminator 4 view .LVU101
 332 0068 B0F5881F 		cmp	r0, #1114112
 333 006c 1FD2     		bcs	.L18
 774:DRIVER/FatFs/source/ff.c **** 	}
 334              		.loc 1 774 3 is_stmt 1 view .LVU102
 774:DRIVER/FatFs/source/ff.c **** 	}
 335              		.loc 1 774 6 is_stmt 0 view .LVU103
 336 006e B0F5803F 		cmp	r0, #65536
 337 0072 CED3     		bcc	.L8
 774:DRIVER/FatFs/source/ff.c **** 	}
 338              		.loc 1 774 23 is_stmt 1 discriminator 1 view .LVU104
 774:DRIVER/FatFs/source/ff.c **** 	}
 339              		.loc 1 774 46 is_stmt 0 discriminator 1 view .LVU105
 340 0074 A0F58033 		sub	r3, r0, #65536
 774:DRIVER/FatFs/source/ff.c **** 	}
 341              		.loc 1 774 62 discriminator 1 view .LVU106
 342 0078 0E49     		ldr	r1, .L23
 343              	.LVL38:
 774:DRIVER/FatFs/source/ff.c **** 	}
 344              		.loc 1 774 62 discriminator 1 view .LVU107
 345 007a 01EA8311 		and	r1, r1, r3, lsl #6
 774:DRIVER/FatFs/source/ff.c **** 	}
 346              		.loc 1 774 81 discriminator 1 view .LVU108
 347 007e C0F30903 		ubfx	r3, r0, #0, #10
 774:DRIVER/FatFs/source/ff.c **** 	}
 348              		.loc 1 774 75 discriminator 1 view .LVU109
 349 0082 1943     		orrs	r1, r1, r3
 774:DRIVER/FatFs/source/ff.c **** 	}
 350              		.loc 1 774 26 discriminator 1 view .LVU110
 351 0084 41F05840 		orr	r0, r1, #-671088640
 352              	.LVL39:
 774:DRIVER/FatFs/source/ff.c **** 	}
 353              		.loc 1 774 26 discriminator 1 view .LVU111
 354 0088 40F45C40 		orr	r0, r0, #56320
 355              	.LVL40:
 774:DRIVER/FatFs/source/ff.c **** 	}
 356              		.loc 1 774 26 discriminator 1 view .LVU112
 357 008c C1E7     		b	.L8
 358              	.LVL41:
 359              	.L22:
 762:DRIVER/FatFs/source/ff.c **** 		} else if ((uc & 0xF8) == 0xF0) {	/* 4-byte sequence? */
 360              		.loc 1 762 4 is_stmt 1 view .LVU113
 762:DRIVER/FatFs/source/ff.c **** 		} else if ((uc & 0xF8) == 0xF0) {	/* 4-byte sequence? */
 361              		.loc 1 762 7 is_stmt 0 view .LVU114
 362 008e 03F00F00 		and	r0, r3, #15
 363              	.LVL42:
 762:DRIVER/FatFs/source/ff.c **** 		} else if ((uc & 0xF8) == 0xF0) {	/* 4-byte sequence? */
 364              		.loc 1 762 16 is_stmt 1 view .LVU115
 762:DRIVER/FatFs/source/ff.c **** 		} else if ((uc & 0xF8) == 0xF0) {	/* 4-byte sequence? */
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 22


 365              		.loc 1 762 19 is_stmt 0 view .LVU116
 366 0092 0221     		movs	r1, #2
 367 0094 D4E7     		b	.L13
 368              	.LVL43:
 369              	.L14:
 766:DRIVER/FatFs/source/ff.c **** 		}
 370              		.loc 1 766 11 view .LVU117
 371 0096 4FF0FF30 		mov	r0, #-1
 372              	.LVL44:
 766:DRIVER/FatFs/source/ff.c **** 		}
 373              		.loc 1 766 11 view .LVU118
 374 009a BCE7     		b	.L7
 375              	.LVL45:
 376              	.L15:
 770:DRIVER/FatFs/source/ff.c **** 			uc = uc << 6 | (b & 0x3F);
 377              		.loc 1 770 35 view .LVU119
 378 009c 4FF0FF30 		mov	r0, #-1
 379              	.LVL46:
 770:DRIVER/FatFs/source/ff.c **** 			uc = uc << 6 | (b & 0x3F);
 380              		.loc 1 770 35 view .LVU120
 381 00a0 B9E7     		b	.L7
 382              	.LVL47:
 383              	.L16:
 773:DRIVER/FatFs/source/ff.c **** 		if (uc >= 0x010000) uc = 0xD800DC00 | ((uc - 0x10000) << 6 & 0x3FF0000) | (uc & 0x3FF);	/* Make a
 384              		.loc 1 773 62 view .LVU121
 385 00a2 4FF0FF30 		mov	r0, #-1
 386              	.LVL48:
 773:DRIVER/FatFs/source/ff.c **** 		if (uc >= 0x010000) uc = 0xD800DC00 | ((uc - 0x10000) << 6 & 0x3FF0000) | (uc & 0x3FF);	/* Make a
 387              		.loc 1 773 62 view .LVU122
 388 00a6 B6E7     		b	.L7
 389              	.LVL49:
 390              	.L17:
 773:DRIVER/FatFs/source/ff.c **** 		if (uc >= 0x010000) uc = 0xD800DC00 | ((uc - 0x10000) << 6 & 0x3FF0000) | (uc & 0x3FF);	/* Make a
 391              		.loc 1 773 62 view .LVU123
 392 00a8 4FF0FF30 		mov	r0, #-1
 393              	.LVL50:
 773:DRIVER/FatFs/source/ff.c **** 		if (uc >= 0x010000) uc = 0xD800DC00 | ((uc - 0x10000) << 6 & 0x3FF0000) | (uc & 0x3FF);	/* Make a
 394              		.loc 1 773 62 view .LVU124
 395 00ac B3E7     		b	.L7
 396              	.LVL51:
 397              	.L18:
 773:DRIVER/FatFs/source/ff.c **** 		if (uc >= 0x010000) uc = 0xD800DC00 | ((uc - 0x10000) << 6 & 0x3FF0000) | (uc & 0x3FF);	/* Make a
 398              		.loc 1 773 62 view .LVU125
 399 00ae 4FF0FF30 		mov	r0, #-1
 400              	.LVL52:
 773:DRIVER/FatFs/source/ff.c **** 		if (uc >= 0x010000) uc = 0xD800DC00 | ((uc - 0x10000) << 6 & 0x3FF0000) | (uc & 0x3FF);	/* Make a
 401              		.loc 1 773 62 view .LVU126
 402 00b2 B0E7     		b	.L7
 403              	.L24:
 404              		.align	2
 405              	.L23:
 406 00b4 0000FF03 		.word	67043328
 407              		.cfi_endproc
 408              	.LFE6:
 410              		.section	.text.put_utf,"ax",%progbits
 411              		.align	1
 412              		.syntax unified
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 23


 413              		.thumb
 414              		.thumb_func
 416              	put_utf:
 417              	.LVL53:
 418              	.LFB7:
 802:DRIVER/FatFs/source/ff.c **** 
 803:DRIVER/FatFs/source/ff.c **** 
 804:DRIVER/FatFs/source/ff.c **** /* Store a Unicode char in defined API encoding */
 805:DRIVER/FatFs/source/ff.c **** static UINT put_utf (	/* Returns number of encoding units written (0:buffer overflow or wrong encod
 806:DRIVER/FatFs/source/ff.c **** 	DWORD chr,	/* UTF-16 encoded character (Surrogate pair if >=0x10000) */
 807:DRIVER/FatFs/source/ff.c **** 	TCHAR* buf,	/* Output buffer */
 808:DRIVER/FatFs/source/ff.c **** 	UINT szb	/* Size of the buffer */
 809:DRIVER/FatFs/source/ff.c **** )
 810:DRIVER/FatFs/source/ff.c **** {
 419              		.loc 1 810 1 is_stmt 1 view -0
 420              		.cfi_startproc
 421              		@ args = 0, pretend = 0, frame = 0
 422              		@ frame_needed = 0, uses_anonymous_args = 0
 423              		@ link register save eliminated.
 811:DRIVER/FatFs/source/ff.c **** #if FF_LFN_UNICODE == 1	/* UTF-16 output */
 812:DRIVER/FatFs/source/ff.c **** 	WCHAR hs, wc;
 813:DRIVER/FatFs/source/ff.c **** 
 814:DRIVER/FatFs/source/ff.c **** 	hs = (WCHAR)(chr >> 16);
 815:DRIVER/FatFs/source/ff.c **** 	wc = (WCHAR)chr;
 816:DRIVER/FatFs/source/ff.c **** 	if (hs == 0) {	/* Single encoding unit? */
 817:DRIVER/FatFs/source/ff.c **** 		if (szb < 1 || IsSurrogate(wc)) return 0;	/* Buffer overflow or wrong code? */
 818:DRIVER/FatFs/source/ff.c **** 		*buf = wc;
 819:DRIVER/FatFs/source/ff.c **** 		return 1;
 820:DRIVER/FatFs/source/ff.c **** 	}
 821:DRIVER/FatFs/source/ff.c **** 	if (szb < 2 || !IsSurrogateH(hs) || !IsSurrogateL(wc)) return 0;	/* Buffer overflow or wrong surro
 822:DRIVER/FatFs/source/ff.c **** 	*buf++ = hs;
 823:DRIVER/FatFs/source/ff.c **** 	*buf++ = wc;
 824:DRIVER/FatFs/source/ff.c **** 	return 2;
 825:DRIVER/FatFs/source/ff.c **** 
 826:DRIVER/FatFs/source/ff.c **** #elif FF_LFN_UNICODE == 2	/* UTF-8 output */
 827:DRIVER/FatFs/source/ff.c **** 	DWORD hc;
 424              		.loc 1 827 2 view .LVU128
 828:DRIVER/FatFs/source/ff.c **** 
 829:DRIVER/FatFs/source/ff.c **** 	if (chr < 0x80) {	/* Single byte code? */
 425              		.loc 1 829 2 view .LVU129
 426              		.loc 1 829 5 is_stmt 0 view .LVU130
 427 0000 7F28     		cmp	r0, #127
 428 0002 04D8     		bhi	.L26
 830:DRIVER/FatFs/source/ff.c **** 		if (szb < 1) return 0;	/* Buffer overflow? */
 429              		.loc 1 830 3 is_stmt 1 view .LVU131
 430              		.loc 1 830 6 is_stmt 0 view .LVU132
 431 0004 002A     		cmp	r2, #0
 432 0006 5BD0     		beq	.L30
 831:DRIVER/FatFs/source/ff.c **** 		*buf = (TCHAR)chr;
 433              		.loc 1 831 3 is_stmt 1 view .LVU133
 434              		.loc 1 831 8 is_stmt 0 view .LVU134
 435 0008 0870     		strb	r0, [r1]
 832:DRIVER/FatFs/source/ff.c **** 		return 1;
 436              		.loc 1 832 3 is_stmt 1 view .LVU135
 437              		.loc 1 832 10 is_stmt 0 view .LVU136
 438 000a 0120     		movs	r0, #1
 439              	.LVL54:
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 24


 440              		.loc 1 832 10 view .LVU137
 441 000c 7047     		bx	lr
 442              	.LVL55:
 443              	.L26:
 833:DRIVER/FatFs/source/ff.c **** 	}
 834:DRIVER/FatFs/source/ff.c **** 	if (chr < 0x800) {	/* 2-byte sequence? */
 444              		.loc 1 834 2 is_stmt 1 view .LVU138
 445              		.loc 1 834 5 is_stmt 0 view .LVU139
 446 000e B0F5006F 		cmp	r0, #2048
 447 0012 0FD2     		bcs	.L28
 835:DRIVER/FatFs/source/ff.c **** 		if (szb < 2) return 0;	/* Buffer overflow? */
 448              		.loc 1 835 3 is_stmt 1 view .LVU140
 449              		.loc 1 835 6 is_stmt 0 view .LVU141
 450 0014 012A     		cmp	r2, #1
 451 0016 01D8     		bhi	.L37
 452              		.loc 1 835 23 view .LVU142
 453 0018 0020     		movs	r0, #0
 454              	.LVL56:
 455              		.loc 1 835 23 view .LVU143
 456 001a 7047     		bx	lr
 457              	.LVL57:
 458              	.L37:
 836:DRIVER/FatFs/source/ff.c **** 		*buf++ = (TCHAR)(0xC0 | (chr >> 6 & 0x1F));
 459              		.loc 1 836 3 is_stmt 1 view .LVU144
 460              		.loc 1 836 37 is_stmt 0 view .LVU145
 461 001c C0F38413 		ubfx	r3, r0, #6, #5
 462              	.LVL58:
 463              		.loc 1 836 12 view .LVU146
 464 0020 43F0C003 		orr	r3, r3, #192
 465              		.loc 1 836 10 view .LVU147
 466 0024 0B70     		strb	r3, [r1]
 837:DRIVER/FatFs/source/ff.c **** 		*buf++ = (TCHAR)(0x80 | (chr >> 0 & 0x3F));
 467              		.loc 1 837 3 is_stmt 1 view .LVU148
 468              		.loc 1 837 37 is_stmt 0 view .LVU149
 469 0026 00F03F00 		and	r0, r0, #63
 470              	.LVL59:
 471              		.loc 1 837 12 view .LVU150
 472 002a 40F08000 		orr	r0, r0, #128
 473              		.loc 1 837 10 view .LVU151
 474 002e 4870     		strb	r0, [r1, #1]
 838:DRIVER/FatFs/source/ff.c **** 		return 2;
 475              		.loc 1 838 3 is_stmt 1 view .LVU152
 476              		.loc 1 838 10 is_stmt 0 view .LVU153
 477 0030 0220     		movs	r0, #2
 478 0032 7047     		bx	lr
 479              	.LVL60:
 480              	.L28:
 839:DRIVER/FatFs/source/ff.c **** 	}
 840:DRIVER/FatFs/source/ff.c **** 	if (chr < 0x10000) {	/* 3-byte sequence? */
 481              		.loc 1 840 2 is_stmt 1 view .LVU154
 482              		.loc 1 840 5 is_stmt 0 view .LVU155
 483 0034 B0F5803F 		cmp	r0, #65536
 484 0038 19D2     		bcs	.L29
 841:DRIVER/FatFs/source/ff.c **** 		if (szb < 3 || IsSurrogate(chr)) return 0;	/* Buffer overflow or wrong code? */
 485              		.loc 1 841 3 is_stmt 1 view .LVU156
 486              		.loc 1 841 6 is_stmt 0 view .LVU157
 487 003a 022A     		cmp	r2, #2
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 25


 488 003c 42D9     		bls	.L32
 489              		.loc 1 841 18 discriminator 2 view .LVU158
 490 003e A0F55843 		sub	r3, r0, #55296
 491              		.loc 1 841 15 discriminator 2 view .LVU159
 492 0042 B3F5006F 		cmp	r3, #2048
 493 0046 01D2     		bcs	.L38
 494              		.loc 1 841 43 view .LVU160
 495 0048 0020     		movs	r0, #0
 496              	.LVL61:
 497              		.loc 1 841 43 view .LVU161
 498 004a 7047     		bx	lr
 499              	.LVL62:
 500              	.L38:
 842:DRIVER/FatFs/source/ff.c **** 		*buf++ = (TCHAR)(0xE0 | (chr >> 12 & 0x0F));
 501              		.loc 1 842 3 is_stmt 1 view .LVU162
 502              		.loc 1 842 38 is_stmt 0 view .LVU163
 503 004c C0F30333 		ubfx	r3, r0, #12, #4
 504              	.LVL63:
 505              		.loc 1 842 12 view .LVU164
 506 0050 43F0E003 		orr	r3, r3, #224
 507              		.loc 1 842 10 view .LVU165
 508 0054 0B70     		strb	r3, [r1]
 843:DRIVER/FatFs/source/ff.c **** 		*buf++ = (TCHAR)(0x80 | (chr >> 6 & 0x3F));
 509              		.loc 1 843 3 is_stmt 1 view .LVU166
 510              		.loc 1 843 37 is_stmt 0 view .LVU167
 511 0056 C0F38513 		ubfx	r3, r0, #6, #6
 512              	.LVL64:
 513              		.loc 1 843 12 view .LVU168
 514 005a 43F08003 		orr	r3, r3, #128
 515              		.loc 1 843 10 view .LVU169
 516 005e 4B70     		strb	r3, [r1, #1]
 844:DRIVER/FatFs/source/ff.c **** 		*buf++ = (TCHAR)(0x80 | (chr >> 0 & 0x3F));
 517              		.loc 1 844 3 is_stmt 1 view .LVU170
 518              		.loc 1 844 37 is_stmt 0 view .LVU171
 519 0060 00F03F00 		and	r0, r0, #63
 520              	.LVL65:
 521              		.loc 1 844 12 view .LVU172
 522 0064 40F08000 		orr	r0, r0, #128
 523              		.loc 1 844 10 view .LVU173
 524 0068 8870     		strb	r0, [r1, #2]
 845:DRIVER/FatFs/source/ff.c **** 		return 3;
 525              		.loc 1 845 3 is_stmt 1 view .LVU174
 526              		.loc 1 845 10 is_stmt 0 view .LVU175
 527 006a 0320     		movs	r0, #3
 528 006c 7047     		bx	lr
 529              	.LVL66:
 530              	.L29:
 846:DRIVER/FatFs/source/ff.c **** 	}
 847:DRIVER/FatFs/source/ff.c **** 	/* 4-byte sequence */
 848:DRIVER/FatFs/source/ff.c **** 	if (szb < 4) return 0;	/* Buffer overflow? */
 531              		.loc 1 848 2 is_stmt 1 view .LVU176
 532              		.loc 1 848 5 is_stmt 0 view .LVU177
 533 006e 032A     		cmp	r2, #3
 534 0070 2AD9     		bls	.L34
 849:DRIVER/FatFs/source/ff.c **** 	hc = ((chr & 0xFFFF0000) - 0xD8000000) >> 6;	/* Get high 10 bits */
 535              		.loc 1 849 2 is_stmt 1 view .LVU178
 536              		.loc 1 849 13 is_stmt 0 view .LVU179
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 26


 537 0072 030C     		lsrs	r3, r0, #16
 538 0074 1B04     		lsls	r3, r3, #16
 539              		.loc 1 849 27 view .LVU180
 540 0076 03F12053 		add	r3, r3, #671088640
 541              		.loc 1 849 5 view .LVU181
 542 007a 9B09     		lsrs	r3, r3, #6
 543              	.LVL67:
 850:DRIVER/FatFs/source/ff.c **** 	chr = (chr & 0xFFFF) - 0xDC00;					/* Get low 10 bits */
 544              		.loc 1 850 2 is_stmt 1 view .LVU182
 545              		.loc 1 850 13 is_stmt 0 view .LVU183
 546 007c 80B2     		uxth	r0, r0
 547              	.LVL68:
 548              		.loc 1 850 6 view .LVU184
 549 007e A0F55C40 		sub	r0, r0, #56320
 550              	.LVL69:
 851:DRIVER/FatFs/source/ff.c **** 	if (hc >= 0x100000 || chr >= 0x400) return 0;	/* Wrong surrogate? */
 551              		.loc 1 851 2 is_stmt 1 view .LVU185
 552              		.loc 1 851 5 is_stmt 0 view .LVU186
 553 0082 B3F5801F 		cmp	r3, #1048576
 554 0086 21D2     		bcs	.L35
 555              		.loc 1 851 21 discriminator 2 view .LVU187
 556 0088 B0F5806F 		cmp	r0, #1024
 557 008c 20D2     		bcs	.L36
 852:DRIVER/FatFs/source/ff.c **** 	chr = (hc | chr) + 0x10000;
 558              		.loc 1 852 2 is_stmt 1 view .LVU188
 559              		.loc 1 852 12 is_stmt 0 view .LVU189
 560 008e 0343     		orrs	r3, r3, r0
 561              	.LVL70:
 562              		.loc 1 852 6 view .LVU190
 563 0090 03F58033 		add	r3, r3, #65536
 564              	.LVL71:
 853:DRIVER/FatFs/source/ff.c **** 	*buf++ = (TCHAR)(0xF0 | (chr >> 18 & 0x07));
 565              		.loc 1 853 2 is_stmt 1 view .LVU191
 566              		.loc 1 853 37 is_stmt 0 view .LVU192
 567 0094 C3F38242 		ubfx	r2, r3, #18, #3
 568              	.LVL72:
 569              		.loc 1 853 11 view .LVU193
 570 0098 42F0F002 		orr	r2, r2, #240
 571              		.loc 1 853 9 view .LVU194
 572 009c 0A70     		strb	r2, [r1]
 854:DRIVER/FatFs/source/ff.c **** 	*buf++ = (TCHAR)(0x80 | (chr >> 12 & 0x3F));
 573              		.loc 1 854 2 is_stmt 1 view .LVU195
 574              		.loc 1 854 37 is_stmt 0 view .LVU196
 575 009e C3F30532 		ubfx	r2, r3, #12, #6
 576              	.LVL73:
 577              		.loc 1 854 11 view .LVU197
 578 00a2 42F08002 		orr	r2, r2, #128
 579              		.loc 1 854 9 view .LVU198
 580 00a6 4A70     		strb	r2, [r1, #1]
 855:DRIVER/FatFs/source/ff.c **** 	*buf++ = (TCHAR)(0x80 | (chr >> 6 & 0x3F));
 581              		.loc 1 855 2 is_stmt 1 view .LVU199
 582              		.loc 1 855 36 is_stmt 0 view .LVU200
 583 00a8 C3F38512 		ubfx	r2, r3, #6, #6
 584              	.LVL74:
 585              		.loc 1 855 11 view .LVU201
 586 00ac 42F08002 		orr	r2, r2, #128
 587              		.loc 1 855 9 view .LVU202
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 27


 588 00b0 8A70     		strb	r2, [r1, #2]
 856:DRIVER/FatFs/source/ff.c **** 	*buf++ = (TCHAR)(0x80 | (chr >> 0 & 0x3F));
 589              		.loc 1 856 2 is_stmt 1 view .LVU203
 590              		.loc 1 856 36 is_stmt 0 view .LVU204
 591 00b2 03F03F03 		and	r3, r3, #63
 592              	.LVL75:
 593              		.loc 1 856 11 view .LVU205
 594 00b6 43F08003 		orr	r3, r3, #128
 595              		.loc 1 856 9 view .LVU206
 596 00ba CB70     		strb	r3, [r1, #3]
 857:DRIVER/FatFs/source/ff.c **** 	return 4;
 597              		.loc 1 857 2 is_stmt 1 view .LVU207
 598              		.loc 1 857 9 is_stmt 0 view .LVU208
 599 00bc 0420     		movs	r0, #4
 600              	.LVL76:
 601              		.loc 1 857 9 view .LVU209
 602 00be 7047     		bx	lr
 603              	.LVL77:
 604              	.L30:
 830:DRIVER/FatFs/source/ff.c **** 		*buf = (TCHAR)chr;
 605              		.loc 1 830 23 view .LVU210
 606 00c0 1046     		mov	r0, r2
 607              	.LVL78:
 830:DRIVER/FatFs/source/ff.c **** 		*buf = (TCHAR)chr;
 608              		.loc 1 830 23 view .LVU211
 609 00c2 7047     		bx	lr
 610              	.LVL79:
 611              	.L32:
 841:DRIVER/FatFs/source/ff.c **** 		*buf++ = (TCHAR)(0xE0 | (chr >> 12 & 0x0F));
 612              		.loc 1 841 43 view .LVU212
 613 00c4 0020     		movs	r0, #0
 614              	.LVL80:
 841:DRIVER/FatFs/source/ff.c **** 		*buf++ = (TCHAR)(0xE0 | (chr >> 12 & 0x0F));
 615              		.loc 1 841 43 view .LVU213
 616 00c6 7047     		bx	lr
 617              	.LVL81:
 618              	.L34:
 848:DRIVER/FatFs/source/ff.c **** 	hc = ((chr & 0xFFFF0000) - 0xD8000000) >> 6;	/* Get high 10 bits */
 619              		.loc 1 848 22 view .LVU214
 620 00c8 0020     		movs	r0, #0
 621              	.LVL82:
 848:DRIVER/FatFs/source/ff.c **** 	hc = ((chr & 0xFFFF0000) - 0xD8000000) >> 6;	/* Get high 10 bits */
 622              		.loc 1 848 22 view .LVU215
 623 00ca 7047     		bx	lr
 624              	.LVL83:
 625              	.L35:
 851:DRIVER/FatFs/source/ff.c **** 	chr = (hc | chr) + 0x10000;
 626              		.loc 1 851 45 view .LVU216
 627 00cc 0020     		movs	r0, #0
 628              	.LVL84:
 851:DRIVER/FatFs/source/ff.c **** 	chr = (hc | chr) + 0x10000;
 629              		.loc 1 851 45 view .LVU217
 630 00ce 7047     		bx	lr
 631              	.LVL85:
 632              	.L36:
 851:DRIVER/FatFs/source/ff.c **** 	chr = (hc | chr) + 0x10000;
 633              		.loc 1 851 45 view .LVU218
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 28


 634 00d0 0020     		movs	r0, #0
 635              	.LVL86:
 858:DRIVER/FatFs/source/ff.c **** 
 859:DRIVER/FatFs/source/ff.c **** #elif FF_LFN_UNICODE == 3	/* UTF-32 output */
 860:DRIVER/FatFs/source/ff.c **** 	DWORD hc;
 861:DRIVER/FatFs/source/ff.c **** 
 862:DRIVER/FatFs/source/ff.c **** 	if (szb < 1) return 0;	/* Buffer overflow? */
 863:DRIVER/FatFs/source/ff.c **** 	if (chr >= 0x10000) {	/* Out of BMP? */
 864:DRIVER/FatFs/source/ff.c **** 		hc = ((chr & 0xFFFF0000) - 0xD8000000) >> 6;	/* Get high 10 bits */
 865:DRIVER/FatFs/source/ff.c **** 		chr = (chr & 0xFFFF) - 0xDC00;					/* Get low 10 bits */
 866:DRIVER/FatFs/source/ff.c **** 		if (hc >= 0x100000 || chr >= 0x400) return 0;	/* Wrong surrogate? */
 867:DRIVER/FatFs/source/ff.c **** 		chr = (hc | chr) + 0x10000;
 868:DRIVER/FatFs/source/ff.c **** 	}
 869:DRIVER/FatFs/source/ff.c **** 	*buf++ = (TCHAR)chr;
 870:DRIVER/FatFs/source/ff.c **** 	return 1;
 871:DRIVER/FatFs/source/ff.c **** 
 872:DRIVER/FatFs/source/ff.c **** #else						/* ANSI/OEM output */
 873:DRIVER/FatFs/source/ff.c **** 	WCHAR wc;
 874:DRIVER/FatFs/source/ff.c **** 
 875:DRIVER/FatFs/source/ff.c **** 	wc = ff_uni2oem(chr, CODEPAGE);
 876:DRIVER/FatFs/source/ff.c **** 	if (wc >= 0x100) {	/* Is this a DBC? */
 877:DRIVER/FatFs/source/ff.c **** 		if (szb < 2) return 0;
 878:DRIVER/FatFs/source/ff.c **** 		*buf++ = (char)(wc >> 8);	/* Store DBC 1st byte */
 879:DRIVER/FatFs/source/ff.c **** 		*buf++ = (TCHAR)wc;			/* Store DBC 2nd byte */
 880:DRIVER/FatFs/source/ff.c **** 		return 2;
 881:DRIVER/FatFs/source/ff.c **** 	}
 882:DRIVER/FatFs/source/ff.c **** 	if (wc == 0 || szb < 1) return 0;	/* Invalid char or buffer overflow? */
 883:DRIVER/FatFs/source/ff.c **** 	*buf++ = (TCHAR)wc;					/* Store the character */
 884:DRIVER/FatFs/source/ff.c **** 	return 1;
 885:DRIVER/FatFs/source/ff.c **** #endif
 886:DRIVER/FatFs/source/ff.c **** }
 636              		.loc 1 886 1 view .LVU219
 637 00d2 7047     		bx	lr
 638              		.cfi_endproc
 639              	.LFE7:
 641              		.section	.text.clst2sect,"ax",%progbits
 642              		.align	1
 643              		.syntax unified
 644              		.thumb
 645              		.thumb_func
 647              	clst2sect:
 648              	.LVL87:
 649              	.LFB11:
 887:DRIVER/FatFs/source/ff.c **** #endif	/* FF_USE_LFN */
 888:DRIVER/FatFs/source/ff.c **** 
 889:DRIVER/FatFs/source/ff.c **** 
 890:DRIVER/FatFs/source/ff.c **** #if FF_FS_REENTRANT
 891:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
 892:DRIVER/FatFs/source/ff.c **** /* Request/Release grant to access the volume                            */
 893:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
 894:DRIVER/FatFs/source/ff.c **** 
 895:DRIVER/FatFs/source/ff.c **** static int lock_volume (	/* 1:Ok, 0:timeout */
 896:DRIVER/FatFs/source/ff.c **** 	FATFS* fs,				/* Filesystem object to lock */
 897:DRIVER/FatFs/source/ff.c **** 	int syslock				/* System lock required */
 898:DRIVER/FatFs/source/ff.c **** )
 899:DRIVER/FatFs/source/ff.c **** {
 900:DRIVER/FatFs/source/ff.c **** 	int rv;
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 29


 901:DRIVER/FatFs/source/ff.c **** 
 902:DRIVER/FatFs/source/ff.c **** 
 903:DRIVER/FatFs/source/ff.c **** #if FF_FS_LOCK
 904:DRIVER/FatFs/source/ff.c **** 	rv = ff_mutex_take(fs->ldrv);	/* Lock the volume */
 905:DRIVER/FatFs/source/ff.c **** 	if (rv && syslock) {			/* System lock reqiered? */
 906:DRIVER/FatFs/source/ff.c **** 		rv = ff_mutex_take(FF_VOLUMES);	/* Lock the system */
 907:DRIVER/FatFs/source/ff.c **** 		if (rv) {
 908:DRIVER/FatFs/source/ff.c **** 			SysLock = 2;				/* System lock succeeded */
 909:DRIVER/FatFs/source/ff.c **** 		} else {
 910:DRIVER/FatFs/source/ff.c **** 			ff_mutex_give(fs->ldrv);	/* Failed system lock */
 911:DRIVER/FatFs/source/ff.c **** 		}
 912:DRIVER/FatFs/source/ff.c **** 	}
 913:DRIVER/FatFs/source/ff.c **** #else
 914:DRIVER/FatFs/source/ff.c **** 	rv = syslock ? ff_mutex_take(fs->ldrv) : ff_mutex_take(fs->ldrv);	/* Lock the volume (this is to p
 915:DRIVER/FatFs/source/ff.c **** #endif
 916:DRIVER/FatFs/source/ff.c **** 	return rv;
 917:DRIVER/FatFs/source/ff.c **** }
 918:DRIVER/FatFs/source/ff.c **** 
 919:DRIVER/FatFs/source/ff.c **** 
 920:DRIVER/FatFs/source/ff.c **** static void unlock_volume (
 921:DRIVER/FatFs/source/ff.c **** 	FATFS* fs,		/* Filesystem object */
 922:DRIVER/FatFs/source/ff.c **** 	FRESULT res		/* Result code to be returned */
 923:DRIVER/FatFs/source/ff.c **** )
 924:DRIVER/FatFs/source/ff.c **** {
 925:DRIVER/FatFs/source/ff.c **** 	if (fs && res != FR_NOT_ENABLED && res != FR_INVALID_DRIVE && res != FR_TIMEOUT) {
 926:DRIVER/FatFs/source/ff.c **** #if FF_FS_LOCK
 927:DRIVER/FatFs/source/ff.c **** 		if (SysLock == 2) {	/* Is the system locked? */
 928:DRIVER/FatFs/source/ff.c **** 			SysLock = 1;
 929:DRIVER/FatFs/source/ff.c **** 			ff_mutex_give(FF_VOLUMES);
 930:DRIVER/FatFs/source/ff.c **** 		}
 931:DRIVER/FatFs/source/ff.c **** #endif
 932:DRIVER/FatFs/source/ff.c **** 		ff_mutex_give(fs->ldrv);	/* Unlock the volume */
 933:DRIVER/FatFs/source/ff.c **** 	}
 934:DRIVER/FatFs/source/ff.c **** }
 935:DRIVER/FatFs/source/ff.c **** 
 936:DRIVER/FatFs/source/ff.c **** #endif
 937:DRIVER/FatFs/source/ff.c **** 
 938:DRIVER/FatFs/source/ff.c **** 
 939:DRIVER/FatFs/source/ff.c **** 
 940:DRIVER/FatFs/source/ff.c **** #if FF_FS_LOCK
 941:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
 942:DRIVER/FatFs/source/ff.c **** /* File shareing control functions                                       */
 943:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
 944:DRIVER/FatFs/source/ff.c **** 
 945:DRIVER/FatFs/source/ff.c **** static FRESULT chk_share (	/* Check if the file can be accessed */
 946:DRIVER/FatFs/source/ff.c **** 	DIR* dp,		/* Directory object pointing the file to be checked */
 947:DRIVER/FatFs/source/ff.c **** 	int acc			/* Desired access type (0:Read mode open, 1:Write mode open, 2:Delete or rename) */
 948:DRIVER/FatFs/source/ff.c **** )
 949:DRIVER/FatFs/source/ff.c **** {
 950:DRIVER/FatFs/source/ff.c **** 	UINT i, be;
 951:DRIVER/FatFs/source/ff.c **** 
 952:DRIVER/FatFs/source/ff.c **** 	/* Search open object table for the object */
 953:DRIVER/FatFs/source/ff.c **** 	be = 0;
 954:DRIVER/FatFs/source/ff.c **** 	for (i = 0; i < FF_FS_LOCK; i++) {
 955:DRIVER/FatFs/source/ff.c **** 		if (Files[i].fs) {	/* Existing entry */
 956:DRIVER/FatFs/source/ff.c **** 			if (Files[i].fs == dp->obj.fs &&	 	/* Check if the object matches with an open object */
 957:DRIVER/FatFs/source/ff.c **** 				Files[i].clu == dp->obj.sclust &&
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 30


 958:DRIVER/FatFs/source/ff.c **** 				Files[i].ofs == dp->dptr) break;
 959:DRIVER/FatFs/source/ff.c **** 		} else {			/* Blank entry */
 960:DRIVER/FatFs/source/ff.c **** 			be = 1;
 961:DRIVER/FatFs/source/ff.c **** 		}
 962:DRIVER/FatFs/source/ff.c **** 	}
 963:DRIVER/FatFs/source/ff.c **** 	if (i == FF_FS_LOCK) {	/* The object has not been opened */
 964:DRIVER/FatFs/source/ff.c **** 		return (!be && acc != 2) ? FR_TOO_MANY_OPEN_FILES : FR_OK;	/* Is there a blank entry for new obje
 965:DRIVER/FatFs/source/ff.c **** 	}
 966:DRIVER/FatFs/source/ff.c **** 
 967:DRIVER/FatFs/source/ff.c **** 	/* The object was opened. Reject any open against writing file and all write mode open */
 968:DRIVER/FatFs/source/ff.c **** 	return (acc != 0 || Files[i].ctr == 0x100) ? FR_LOCKED : FR_OK;
 969:DRIVER/FatFs/source/ff.c **** }
 970:DRIVER/FatFs/source/ff.c **** 
 971:DRIVER/FatFs/source/ff.c **** 
 972:DRIVER/FatFs/source/ff.c **** static int enq_share (void)	/* Check if an entry is available for a new object */
 973:DRIVER/FatFs/source/ff.c **** {
 974:DRIVER/FatFs/source/ff.c **** 	UINT i;
 975:DRIVER/FatFs/source/ff.c **** 
 976:DRIVER/FatFs/source/ff.c **** 	for (i = 0; i < FF_FS_LOCK && Files[i].fs; i++) ;	/* Find a free entry */
 977:DRIVER/FatFs/source/ff.c **** 	return (i == FF_FS_LOCK) ? 0 : 1;
 978:DRIVER/FatFs/source/ff.c **** }
 979:DRIVER/FatFs/source/ff.c **** 
 980:DRIVER/FatFs/source/ff.c **** 
 981:DRIVER/FatFs/source/ff.c **** static UINT inc_share (	/* Increment object open counter and returns its index (0:Internal error) *
 982:DRIVER/FatFs/source/ff.c **** 	DIR* dp,	/* Directory object pointing the file to register or increment */
 983:DRIVER/FatFs/source/ff.c **** 	int acc		/* Desired access (0:Read, 1:Write, 2:Delete/Rename) */
 984:DRIVER/FatFs/source/ff.c **** )
 985:DRIVER/FatFs/source/ff.c **** {
 986:DRIVER/FatFs/source/ff.c **** 	UINT i;
 987:DRIVER/FatFs/source/ff.c **** 
 988:DRIVER/FatFs/source/ff.c **** 
 989:DRIVER/FatFs/source/ff.c **** 	for (i = 0; i < FF_FS_LOCK; i++) {	/* Find the object */
 990:DRIVER/FatFs/source/ff.c **** 		if (Files[i].fs == dp->obj.fs
 991:DRIVER/FatFs/source/ff.c **** 		 && Files[i].clu == dp->obj.sclust
 992:DRIVER/FatFs/source/ff.c **** 		 && Files[i].ofs == dp->dptr) break;
 993:DRIVER/FatFs/source/ff.c **** 	}
 994:DRIVER/FatFs/source/ff.c **** 
 995:DRIVER/FatFs/source/ff.c **** 	if (i == FF_FS_LOCK) {			/* Not opened. Register it as new. */
 996:DRIVER/FatFs/source/ff.c **** 		for (i = 0; i < FF_FS_LOCK && Files[i].fs; i++) ;	/* Find a free entry */
 997:DRIVER/FatFs/source/ff.c **** 		if (i == FF_FS_LOCK) return 0;	/* No free entry to register (int err) */
 998:DRIVER/FatFs/source/ff.c **** 		Files[i].fs = dp->obj.fs;
 999:DRIVER/FatFs/source/ff.c **** 		Files[i].clu = dp->obj.sclust;
1000:DRIVER/FatFs/source/ff.c **** 		Files[i].ofs = dp->dptr;
1001:DRIVER/FatFs/source/ff.c **** 		Files[i].ctr = 0;
1002:DRIVER/FatFs/source/ff.c **** 	}
1003:DRIVER/FatFs/source/ff.c **** 
1004:DRIVER/FatFs/source/ff.c **** 	if (acc >= 1 && Files[i].ctr) return 0;	/* Access violation (int err) */
1005:DRIVER/FatFs/source/ff.c **** 
1006:DRIVER/FatFs/source/ff.c **** 	Files[i].ctr = acc ? 0x100 : Files[i].ctr + 1;	/* Set semaphore value */
1007:DRIVER/FatFs/source/ff.c **** 
1008:DRIVER/FatFs/source/ff.c **** 	return i + 1;	/* Index number origin from 1 */
1009:DRIVER/FatFs/source/ff.c **** }
1010:DRIVER/FatFs/source/ff.c **** 
1011:DRIVER/FatFs/source/ff.c **** 
1012:DRIVER/FatFs/source/ff.c **** static FRESULT dec_share (	/* Decrement object open counter */
1013:DRIVER/FatFs/source/ff.c **** 	UINT i			/* Semaphore index (1..) */
1014:DRIVER/FatFs/source/ff.c **** )
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 31


1015:DRIVER/FatFs/source/ff.c **** {
1016:DRIVER/FatFs/source/ff.c **** 	UINT n;
1017:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
1018:DRIVER/FatFs/source/ff.c **** 
1019:DRIVER/FatFs/source/ff.c **** 
1020:DRIVER/FatFs/source/ff.c **** 	if (--i < FF_FS_LOCK) {	/* Index number origin from 0 */
1021:DRIVER/FatFs/source/ff.c **** 		n = Files[i].ctr;
1022:DRIVER/FatFs/source/ff.c **** 		if (n == 0x100) n = 0;	/* If write mode open, delete the object semaphore */
1023:DRIVER/FatFs/source/ff.c **** 		if (n > 0) n--;			/* Decrement read mode open count */
1024:DRIVER/FatFs/source/ff.c **** 		Files[i].ctr = n;
1025:DRIVER/FatFs/source/ff.c **** 		if (n == 0) {			/* Delete the object semaphore if open count becomes zero */
1026:DRIVER/FatFs/source/ff.c **** 			Files[i].fs = 0;	/* Free the entry <<<If this memory write operation is not in atomic, FF_FS_REE
1027:DRIVER/FatFs/source/ff.c **** 		}
1028:DRIVER/FatFs/source/ff.c **** 		res = FR_OK;
1029:DRIVER/FatFs/source/ff.c **** 	} else {
1030:DRIVER/FatFs/source/ff.c **** 		res = FR_INT_ERR;		/* Invalid index number */
1031:DRIVER/FatFs/source/ff.c **** 	}
1032:DRIVER/FatFs/source/ff.c **** 	return res;
1033:DRIVER/FatFs/source/ff.c **** }
1034:DRIVER/FatFs/source/ff.c **** 
1035:DRIVER/FatFs/source/ff.c **** 
1036:DRIVER/FatFs/source/ff.c **** static void clear_share (	/* Clear all lock entries of the volume */
1037:DRIVER/FatFs/source/ff.c **** 	FATFS* fs
1038:DRIVER/FatFs/source/ff.c **** )
1039:DRIVER/FatFs/source/ff.c **** {
1040:DRIVER/FatFs/source/ff.c **** 	UINT i;
1041:DRIVER/FatFs/source/ff.c **** 
1042:DRIVER/FatFs/source/ff.c **** 	for (i = 0; i < FF_FS_LOCK; i++) {
1043:DRIVER/FatFs/source/ff.c **** 		if (Files[i].fs == fs) Files[i].fs = 0;
1044:DRIVER/FatFs/source/ff.c **** 	}
1045:DRIVER/FatFs/source/ff.c **** }
1046:DRIVER/FatFs/source/ff.c **** 
1047:DRIVER/FatFs/source/ff.c **** #endif	/* FF_FS_LOCK */
1048:DRIVER/FatFs/source/ff.c **** 
1049:DRIVER/FatFs/source/ff.c **** 
1050:DRIVER/FatFs/source/ff.c **** 
1051:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
1052:DRIVER/FatFs/source/ff.c **** /* Move/Flush disk access window in the filesystem object                */
1053:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
1054:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY
1055:DRIVER/FatFs/source/ff.c **** static FRESULT sync_window (	/* Returns FR_OK or FR_DISK_ERR */
1056:DRIVER/FatFs/source/ff.c **** 	FATFS* fs			/* Filesystem object */
1057:DRIVER/FatFs/source/ff.c **** )
1058:DRIVER/FatFs/source/ff.c **** {
1059:DRIVER/FatFs/source/ff.c **** 	FRESULT res = FR_OK;
1060:DRIVER/FatFs/source/ff.c **** 
1061:DRIVER/FatFs/source/ff.c **** 
1062:DRIVER/FatFs/source/ff.c **** 	if (fs->wflag) {	/* Is the disk access window dirty? */
1063:DRIVER/FatFs/source/ff.c **** 		if (disk_write(fs->pdrv, fs->win, fs->winsect, 1) == RES_OK) {	/* Write it back into the volume *
1064:DRIVER/FatFs/source/ff.c **** 			fs->wflag = 0;	/* Clear window dirty flag */
1065:DRIVER/FatFs/source/ff.c **** 			if (fs->winsect - fs->fatbase < fs->fsize) {	/* Is it in the 1st FAT? */
1066:DRIVER/FatFs/source/ff.c **** 				if (fs->n_fats == 2) disk_write(fs->pdrv, fs->win, fs->winsect + fs->fsize, 1);	/* Reflect it t
1067:DRIVER/FatFs/source/ff.c **** 			}
1068:DRIVER/FatFs/source/ff.c **** 		} else {
1069:DRIVER/FatFs/source/ff.c **** 			res = FR_DISK_ERR;
1070:DRIVER/FatFs/source/ff.c **** 		}
1071:DRIVER/FatFs/source/ff.c **** 	}
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 32


1072:DRIVER/FatFs/source/ff.c **** 	return res;
1073:DRIVER/FatFs/source/ff.c **** }
1074:DRIVER/FatFs/source/ff.c **** #endif
1075:DRIVER/FatFs/source/ff.c **** 
1076:DRIVER/FatFs/source/ff.c **** 
1077:DRIVER/FatFs/source/ff.c **** static FRESULT move_window (	/* Returns FR_OK or FR_DISK_ERR */
1078:DRIVER/FatFs/source/ff.c **** 	FATFS* fs,		/* Filesystem object */
1079:DRIVER/FatFs/source/ff.c **** 	LBA_t sect		/* Sector LBA to make appearance in the fs->win[] */
1080:DRIVER/FatFs/source/ff.c **** )
1081:DRIVER/FatFs/source/ff.c **** {
1082:DRIVER/FatFs/source/ff.c **** 	FRESULT res = FR_OK;
1083:DRIVER/FatFs/source/ff.c **** 
1084:DRIVER/FatFs/source/ff.c **** 
1085:DRIVER/FatFs/source/ff.c **** 	if (sect != fs->winsect) {	/* Window offset changed? */
1086:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY
1087:DRIVER/FatFs/source/ff.c **** 		res = sync_window(fs);		/* Flush the window */
1088:DRIVER/FatFs/source/ff.c **** #endif
1089:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK) {			/* Fill sector window with new data */
1090:DRIVER/FatFs/source/ff.c **** 			if (disk_read(fs->pdrv, fs->win, sect, 1) != RES_OK) {
1091:DRIVER/FatFs/source/ff.c **** 				sect = (LBA_t)0 - 1;	/* Invalidate window if read data is not valid */
1092:DRIVER/FatFs/source/ff.c **** 				res = FR_DISK_ERR;
1093:DRIVER/FatFs/source/ff.c **** 			}
1094:DRIVER/FatFs/source/ff.c **** 			fs->winsect = sect;
1095:DRIVER/FatFs/source/ff.c **** 		}
1096:DRIVER/FatFs/source/ff.c **** 	}
1097:DRIVER/FatFs/source/ff.c **** 	return res;
1098:DRIVER/FatFs/source/ff.c **** }
1099:DRIVER/FatFs/source/ff.c **** 
1100:DRIVER/FatFs/source/ff.c **** 
1101:DRIVER/FatFs/source/ff.c **** 
1102:DRIVER/FatFs/source/ff.c **** 
1103:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY
1104:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
1105:DRIVER/FatFs/source/ff.c **** /* Synchronize filesystem and data on the storage                        */
1106:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
1107:DRIVER/FatFs/source/ff.c **** 
1108:DRIVER/FatFs/source/ff.c **** static FRESULT sync_fs (	/* Returns FR_OK or FR_DISK_ERR */
1109:DRIVER/FatFs/source/ff.c **** 	FATFS* fs		/* Filesystem object */
1110:DRIVER/FatFs/source/ff.c **** )
1111:DRIVER/FatFs/source/ff.c **** {
1112:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
1113:DRIVER/FatFs/source/ff.c **** 
1114:DRIVER/FatFs/source/ff.c **** 
1115:DRIVER/FatFs/source/ff.c **** 	res = sync_window(fs);
1116:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
1117:DRIVER/FatFs/source/ff.c **** 		if (fs->fs_type == FS_FAT32 && fs->fsi_flag == 1) {	/* FAT32: Update FSInfo sector if needed */
1118:DRIVER/FatFs/source/ff.c **** 			/* Create FSInfo structure */
1119:DRIVER/FatFs/source/ff.c **** 			memset(fs->win, 0, sizeof fs->win);
1120:DRIVER/FatFs/source/ff.c **** 			st_word(fs->win + BS_55AA, 0xAA55);					/* Boot signature */
1121:DRIVER/FatFs/source/ff.c **** 			st_dword(fs->win + FSI_LeadSig, 0x41615252);		/* Leading signature */
1122:DRIVER/FatFs/source/ff.c **** 			st_dword(fs->win + FSI_StrucSig, 0x61417272);		/* Structure signature */
1123:DRIVER/FatFs/source/ff.c **** 			st_dword(fs->win + FSI_Free_Count, fs->free_clst);	/* Number of free clusters */
1124:DRIVER/FatFs/source/ff.c **** 			st_dword(fs->win + FSI_Nxt_Free, fs->last_clst);	/* Last allocated culuster */
1125:DRIVER/FatFs/source/ff.c **** 			fs->winsect = fs->volbase + 1;						/* Write it into the FSInfo sector (Next to VBR) */
1126:DRIVER/FatFs/source/ff.c **** 			disk_write(fs->pdrv, fs->win, fs->winsect, 1);
1127:DRIVER/FatFs/source/ff.c **** 			fs->fsi_flag = 0;
1128:DRIVER/FatFs/source/ff.c **** 		}
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 33


1129:DRIVER/FatFs/source/ff.c **** 		/* Make sure that no pending write process in the lower layer */
1130:DRIVER/FatFs/source/ff.c **** 		if (disk_ioctl(fs->pdrv, CTRL_SYNC, 0) != RES_OK) res = FR_DISK_ERR;
1131:DRIVER/FatFs/source/ff.c **** 	}
1132:DRIVER/FatFs/source/ff.c **** 
1133:DRIVER/FatFs/source/ff.c **** 	return res;
1134:DRIVER/FatFs/source/ff.c **** }
1135:DRIVER/FatFs/source/ff.c **** 
1136:DRIVER/FatFs/source/ff.c **** #endif
1137:DRIVER/FatFs/source/ff.c **** 
1138:DRIVER/FatFs/source/ff.c **** 
1139:DRIVER/FatFs/source/ff.c **** 
1140:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
1141:DRIVER/FatFs/source/ff.c **** /* Get physical sector number from cluster number                        */
1142:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
1143:DRIVER/FatFs/source/ff.c **** 
1144:DRIVER/FatFs/source/ff.c **** static LBA_t clst2sect (	/* !=0:Sector number, 0:Failed (invalid cluster#) */
1145:DRIVER/FatFs/source/ff.c **** 	FATFS* fs,		/* Filesystem object */
1146:DRIVER/FatFs/source/ff.c **** 	DWORD clst		/* Cluster# to be converted */
1147:DRIVER/FatFs/source/ff.c **** )
1148:DRIVER/FatFs/source/ff.c **** {
 650              		.loc 1 1148 1 is_stmt 1 view -0
 651              		.cfi_startproc
 652              		@ args = 0, pretend = 0, frame = 0
 653              		@ frame_needed = 0, uses_anonymous_args = 0
 654              		@ link register save eliminated.
1149:DRIVER/FatFs/source/ff.c **** 	clst -= 2;		/* Cluster number is origin from 2 */
 655              		.loc 1 1149 2 view .LVU221
 656              		.loc 1 1149 7 is_stmt 0 view .LVU222
 657 0000 0239     		subs	r1, r1, #2
 658              	.LVL88:
1150:DRIVER/FatFs/source/ff.c **** 	if (clst >= fs->n_fatent - 2) return 0;		/* Is it invalid cluster number? */
 659              		.loc 1 1150 2 is_stmt 1 view .LVU223
 660              		.loc 1 1150 16 is_stmt 0 view .LVU224
 661 0002 C369     		ldr	r3, [r0, #28]
 662              		.loc 1 1150 27 view .LVU225
 663 0004 023B     		subs	r3, r3, #2
 664              		.loc 1 1150 5 view .LVU226
 665 0006 8B42     		cmp	r3, r1
 666 0008 04D9     		bls	.L41
1151:DRIVER/FatFs/source/ff.c **** 	return fs->database + (LBA_t)fs->csize * clst;	/* Start sector number of the cluster */
 667              		.loc 1 1151 2 is_stmt 1 view .LVU227
 668              		.loc 1 1151 11 is_stmt 0 view .LVU228
 669 000a 036B     		ldr	r3, [r0, #48]
 670              		.loc 1 1151 33 view .LVU229
 671 000c 4289     		ldrh	r2, [r0, #10]
 672              		.loc 1 1151 22 view .LVU230
 673 000e 01FB0230 		mla	r0, r1, r2, r3
 674              	.LVL89:
 675              		.loc 1 1151 22 view .LVU231
 676 0012 7047     		bx	lr
 677              	.LVL90:
 678              	.L41:
1150:DRIVER/FatFs/source/ff.c **** 	if (clst >= fs->n_fatent - 2) return 0;		/* Is it invalid cluster number? */
 679              		.loc 1 1150 39 view .LVU232
 680 0014 0020     		movs	r0, #0
 681              	.LVL91:
1152:DRIVER/FatFs/source/ff.c **** }
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 34


 682              		.loc 1 1152 1 view .LVU233
 683 0016 7047     		bx	lr
 684              		.cfi_endproc
 685              	.LFE11:
 687              		.section	.text.ld_clust,"ax",%progbits
 688              		.align	1
 689              		.syntax unified
 690              		.thumb
 691              		.thumb_func
 693              	ld_clust:
 694              	.LVL92:
 695              	.LFB20:
1153:DRIVER/FatFs/source/ff.c **** 
1154:DRIVER/FatFs/source/ff.c **** 
1155:DRIVER/FatFs/source/ff.c **** 
1156:DRIVER/FatFs/source/ff.c **** 
1157:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
1158:DRIVER/FatFs/source/ff.c **** /* FAT access - Read value of an FAT entry                               */
1159:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
1160:DRIVER/FatFs/source/ff.c **** 
1161:DRIVER/FatFs/source/ff.c **** static DWORD get_fat (		/* 0xFFFFFFFF:Disk error, 1:Internal error, 2..0x7FFFFFFF:Cluster status */
1162:DRIVER/FatFs/source/ff.c **** 	FFOBJID* obj,	/* Corresponding object */
1163:DRIVER/FatFs/source/ff.c **** 	DWORD clst		/* Cluster number to get the value */
1164:DRIVER/FatFs/source/ff.c **** )
1165:DRIVER/FatFs/source/ff.c **** {
1166:DRIVER/FatFs/source/ff.c **** 	UINT wc, bc;
1167:DRIVER/FatFs/source/ff.c **** 	DWORD val;
1168:DRIVER/FatFs/source/ff.c **** 	FATFS *fs = obj->fs;
1169:DRIVER/FatFs/source/ff.c **** 
1170:DRIVER/FatFs/source/ff.c **** 
1171:DRIVER/FatFs/source/ff.c **** 	if (clst < 2 || clst >= fs->n_fatent) {	/* Check if in valid range */
1172:DRIVER/FatFs/source/ff.c **** 		val = 1;	/* Internal error */
1173:DRIVER/FatFs/source/ff.c **** 
1174:DRIVER/FatFs/source/ff.c **** 	} else {
1175:DRIVER/FatFs/source/ff.c **** 		val = 0xFFFFFFFF;	/* Default value falls on disk error */
1176:DRIVER/FatFs/source/ff.c **** 
1177:DRIVER/FatFs/source/ff.c **** 		switch (fs->fs_type) {
1178:DRIVER/FatFs/source/ff.c **** 		case FS_FAT12 :
1179:DRIVER/FatFs/source/ff.c **** 			bc = (UINT)clst; bc += bc / 2;
1180:DRIVER/FatFs/source/ff.c **** 			if (move_window(fs, fs->fatbase + (bc / SS(fs))) != FR_OK) break;
1181:DRIVER/FatFs/source/ff.c **** 			wc = fs->win[bc++ % SS(fs)];		/* Get 1st byte of the entry */
1182:DRIVER/FatFs/source/ff.c **** 			if (move_window(fs, fs->fatbase + (bc / SS(fs))) != FR_OK) break;
1183:DRIVER/FatFs/source/ff.c **** 			wc |= fs->win[bc % SS(fs)] << 8;	/* Merge 2nd byte of the entry */
1184:DRIVER/FatFs/source/ff.c **** 			val = (clst & 1) ? (wc >> 4) : (wc & 0xFFF);	/* Adjust bit position */
1185:DRIVER/FatFs/source/ff.c **** 			break;
1186:DRIVER/FatFs/source/ff.c **** 
1187:DRIVER/FatFs/source/ff.c **** 		case FS_FAT16 :
1188:DRIVER/FatFs/source/ff.c **** 			if (move_window(fs, fs->fatbase + (clst / (SS(fs) / 2))) != FR_OK) break;
1189:DRIVER/FatFs/source/ff.c **** 			val = ld_word(fs->win + clst * 2 % SS(fs));		/* Simple WORD array */
1190:DRIVER/FatFs/source/ff.c **** 			break;
1191:DRIVER/FatFs/source/ff.c **** 
1192:DRIVER/FatFs/source/ff.c **** 		case FS_FAT32 :
1193:DRIVER/FatFs/source/ff.c **** 			if (move_window(fs, fs->fatbase + (clst / (SS(fs) / 4))) != FR_OK) break;
1194:DRIVER/FatFs/source/ff.c **** 			val = ld_dword(fs->win + clst * 4 % SS(fs)) & 0x0FFFFFFF;	/* Simple DWORD array but mask out upp
1195:DRIVER/FatFs/source/ff.c **** 			break;
1196:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
1197:DRIVER/FatFs/source/ff.c **** 		case FS_EXFAT :
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 35


1198:DRIVER/FatFs/source/ff.c **** 			if ((obj->objsize != 0 && obj->sclust != 0) || obj->stat == 0) {	/* Object except root dir must 
1199:DRIVER/FatFs/source/ff.c **** 				DWORD cofs = clst - obj->sclust;	/* Offset from start cluster */
1200:DRIVER/FatFs/source/ff.c **** 				DWORD clen = (DWORD)((LBA_t)((obj->objsize - 1) / SS(fs)) / fs->csize);	/* Number of clusters -
1201:DRIVER/FatFs/source/ff.c **** 
1202:DRIVER/FatFs/source/ff.c **** 				if (obj->stat == 2 && cofs <= clen) {	/* Is it a contiguous chain? */
1203:DRIVER/FatFs/source/ff.c **** 					val = (cofs == clen) ? 0x7FFFFFFF : clst + 1;	/* No data on the FAT, generate the value */
1204:DRIVER/FatFs/source/ff.c **** 					break;
1205:DRIVER/FatFs/source/ff.c **** 				}
1206:DRIVER/FatFs/source/ff.c **** 				if (obj->stat == 3 && cofs < obj->n_cont) {	/* Is it in the 1st fragment? */
1207:DRIVER/FatFs/source/ff.c **** 					val = clst + 1; 	/* Generate the value */
1208:DRIVER/FatFs/source/ff.c **** 					break;
1209:DRIVER/FatFs/source/ff.c **** 				}
1210:DRIVER/FatFs/source/ff.c **** 				if (obj->stat != 2) {	/* Get value from FAT if FAT chain is valid */
1211:DRIVER/FatFs/source/ff.c **** 					if (obj->n_frag != 0) {	/* Is it on the growing edge? */
1212:DRIVER/FatFs/source/ff.c **** 						val = 0x7FFFFFFF;	/* Generate EOC */
1213:DRIVER/FatFs/source/ff.c **** 					} else {
1214:DRIVER/FatFs/source/ff.c **** 						if (move_window(fs, fs->fatbase + (clst / (SS(fs) / 4))) != FR_OK) break;
1215:DRIVER/FatFs/source/ff.c **** 						val = ld_dword(fs->win + clst * 4 % SS(fs)) & 0x7FFFFFFF;
1216:DRIVER/FatFs/source/ff.c **** 					}
1217:DRIVER/FatFs/source/ff.c **** 					break;
1218:DRIVER/FatFs/source/ff.c **** 				}
1219:DRIVER/FatFs/source/ff.c **** 			}
1220:DRIVER/FatFs/source/ff.c **** 			val = 1;	/* Internal error */
1221:DRIVER/FatFs/source/ff.c **** 			break;
1222:DRIVER/FatFs/source/ff.c **** #endif
1223:DRIVER/FatFs/source/ff.c **** 		default:
1224:DRIVER/FatFs/source/ff.c **** 			val = 1;	/* Internal error */
1225:DRIVER/FatFs/source/ff.c **** 		}
1226:DRIVER/FatFs/source/ff.c **** 	}
1227:DRIVER/FatFs/source/ff.c **** 
1228:DRIVER/FatFs/source/ff.c **** 	return val;
1229:DRIVER/FatFs/source/ff.c **** }
1230:DRIVER/FatFs/source/ff.c **** 
1231:DRIVER/FatFs/source/ff.c **** 
1232:DRIVER/FatFs/source/ff.c **** 
1233:DRIVER/FatFs/source/ff.c **** 
1234:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY
1235:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
1236:DRIVER/FatFs/source/ff.c **** /* FAT access - Change value of an FAT entry                             */
1237:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
1238:DRIVER/FatFs/source/ff.c **** 
1239:DRIVER/FatFs/source/ff.c **** static FRESULT put_fat (	/* FR_OK(0):succeeded, !=0:error */
1240:DRIVER/FatFs/source/ff.c **** 	FATFS* fs,		/* Corresponding filesystem object */
1241:DRIVER/FatFs/source/ff.c **** 	DWORD clst,		/* FAT index number (cluster number) to be changed */
1242:DRIVER/FatFs/source/ff.c **** 	DWORD val		/* New value to be set to the entry */
1243:DRIVER/FatFs/source/ff.c **** )
1244:DRIVER/FatFs/source/ff.c **** {
1245:DRIVER/FatFs/source/ff.c **** 	UINT bc;
1246:DRIVER/FatFs/source/ff.c **** 	BYTE *p;
1247:DRIVER/FatFs/source/ff.c **** 	FRESULT res = FR_INT_ERR;
1248:DRIVER/FatFs/source/ff.c **** 
1249:DRIVER/FatFs/source/ff.c **** 
1250:DRIVER/FatFs/source/ff.c **** 	if (clst >= 2 && clst < fs->n_fatent) {	/* Check if in valid range */
1251:DRIVER/FatFs/source/ff.c **** 		switch (fs->fs_type) {
1252:DRIVER/FatFs/source/ff.c **** 		case FS_FAT12:
1253:DRIVER/FatFs/source/ff.c **** 			bc = (UINT)clst; bc += bc / 2;	/* bc: byte offset of the entry */
1254:DRIVER/FatFs/source/ff.c **** 			res = move_window(fs, fs->fatbase + (bc / SS(fs)));
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 36


1255:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) break;
1256:DRIVER/FatFs/source/ff.c **** 			p = fs->win + bc++ % SS(fs);
1257:DRIVER/FatFs/source/ff.c **** 			*p = (clst & 1) ? ((*p & 0x0F) | ((BYTE)val << 4)) : (BYTE)val;	/* Update 1st byte */
1258:DRIVER/FatFs/source/ff.c **** 			fs->wflag = 1;
1259:DRIVER/FatFs/source/ff.c **** 			res = move_window(fs, fs->fatbase + (bc / SS(fs)));
1260:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) break;
1261:DRIVER/FatFs/source/ff.c **** 			p = fs->win + bc % SS(fs);
1262:DRIVER/FatFs/source/ff.c **** 			*p = (clst & 1) ? (BYTE)(val >> 4) : ((*p & 0xF0) | ((BYTE)(val >> 8) & 0x0F));	/* Update 2nd by
1263:DRIVER/FatFs/source/ff.c **** 			fs->wflag = 1;
1264:DRIVER/FatFs/source/ff.c **** 			break;
1265:DRIVER/FatFs/source/ff.c **** 
1266:DRIVER/FatFs/source/ff.c **** 		case FS_FAT16:
1267:DRIVER/FatFs/source/ff.c **** 			res = move_window(fs, fs->fatbase + (clst / (SS(fs) / 2)));
1268:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) break;
1269:DRIVER/FatFs/source/ff.c **** 			st_word(fs->win + clst * 2 % SS(fs), (WORD)val);	/* Simple WORD array */
1270:DRIVER/FatFs/source/ff.c **** 			fs->wflag = 1;
1271:DRIVER/FatFs/source/ff.c **** 			break;
1272:DRIVER/FatFs/source/ff.c **** 
1273:DRIVER/FatFs/source/ff.c **** 		case FS_FAT32:
1274:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
1275:DRIVER/FatFs/source/ff.c **** 		case FS_EXFAT:
1276:DRIVER/FatFs/source/ff.c **** #endif
1277:DRIVER/FatFs/source/ff.c **** 			res = move_window(fs, fs->fatbase + (clst / (SS(fs) / 4)));
1278:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) break;
1279:DRIVER/FatFs/source/ff.c **** 			if (!FF_FS_EXFAT || fs->fs_type != FS_EXFAT) {
1280:DRIVER/FatFs/source/ff.c **** 				val = (val & 0x0FFFFFFF) | (ld_dword(fs->win + clst * 4 % SS(fs)) & 0xF0000000);
1281:DRIVER/FatFs/source/ff.c **** 			}
1282:DRIVER/FatFs/source/ff.c **** 			st_dword(fs->win + clst * 4 % SS(fs), val);
1283:DRIVER/FatFs/source/ff.c **** 			fs->wflag = 1;
1284:DRIVER/FatFs/source/ff.c **** 			break;
1285:DRIVER/FatFs/source/ff.c **** 		}
1286:DRIVER/FatFs/source/ff.c **** 	}
1287:DRIVER/FatFs/source/ff.c **** 	return res;
1288:DRIVER/FatFs/source/ff.c **** }
1289:DRIVER/FatFs/source/ff.c **** 
1290:DRIVER/FatFs/source/ff.c **** #endif /* !FF_FS_READONLY */
1291:DRIVER/FatFs/source/ff.c **** 
1292:DRIVER/FatFs/source/ff.c **** 
1293:DRIVER/FatFs/source/ff.c **** 
1294:DRIVER/FatFs/source/ff.c **** 
1295:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT && !FF_FS_READONLY
1296:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
1297:DRIVER/FatFs/source/ff.c **** /* exFAT: Accessing FAT and Allocation Bitmap                            */
1298:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
1299:DRIVER/FatFs/source/ff.c **** 
1300:DRIVER/FatFs/source/ff.c **** /*--------------------------------------*/
1301:DRIVER/FatFs/source/ff.c **** /* Find a contiguous free cluster block */
1302:DRIVER/FatFs/source/ff.c **** /*--------------------------------------*/
1303:DRIVER/FatFs/source/ff.c **** 
1304:DRIVER/FatFs/source/ff.c **** static DWORD find_bitmap (	/* 0:Not found, 2..:Cluster block found, 0xFFFFFFFF:Disk error */
1305:DRIVER/FatFs/source/ff.c **** 	FATFS* fs,	/* Filesystem object */
1306:DRIVER/FatFs/source/ff.c **** 	DWORD clst,	/* Cluster number to scan from */
1307:DRIVER/FatFs/source/ff.c **** 	DWORD ncl	/* Number of contiguous clusters to find (1..) */
1308:DRIVER/FatFs/source/ff.c **** )
1309:DRIVER/FatFs/source/ff.c **** {
1310:DRIVER/FatFs/source/ff.c **** 	BYTE bm, bv;
1311:DRIVER/FatFs/source/ff.c **** 	UINT i;
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 37


1312:DRIVER/FatFs/source/ff.c **** 	DWORD val, scl, ctr;
1313:DRIVER/FatFs/source/ff.c **** 
1314:DRIVER/FatFs/source/ff.c **** 
1315:DRIVER/FatFs/source/ff.c **** 	clst -= 2;	/* The first bit in the bitmap corresponds to cluster #2 */
1316:DRIVER/FatFs/source/ff.c **** 	if (clst >= fs->n_fatent - 2) clst = 0;
1317:DRIVER/FatFs/source/ff.c **** 	scl = val = clst; ctr = 0;
1318:DRIVER/FatFs/source/ff.c **** 	for (;;) {
1319:DRIVER/FatFs/source/ff.c **** 		if (move_window(fs, fs->bitbase + val / 8 / SS(fs)) != FR_OK) return 0xFFFFFFFF;
1320:DRIVER/FatFs/source/ff.c **** 		i = val / 8 % SS(fs); bm = 1 << (val % 8);
1321:DRIVER/FatFs/source/ff.c **** 		do {
1322:DRIVER/FatFs/source/ff.c **** 			do {
1323:DRIVER/FatFs/source/ff.c **** 				bv = fs->win[i] & bm; bm <<= 1;		/* Get bit value */
1324:DRIVER/FatFs/source/ff.c **** 				if (++val >= fs->n_fatent - 2) {	/* Next cluster (with wrap-around) */
1325:DRIVER/FatFs/source/ff.c **** 					val = 0; bm = 0; i = SS(fs);
1326:DRIVER/FatFs/source/ff.c **** 				}
1327:DRIVER/FatFs/source/ff.c **** 				if (bv == 0) {	/* Is it a free cluster? */
1328:DRIVER/FatFs/source/ff.c **** 					if (++ctr == ncl) return scl + 2;	/* Check if run length is sufficient for required */
1329:DRIVER/FatFs/source/ff.c **** 				} else {
1330:DRIVER/FatFs/source/ff.c **** 					scl = val; ctr = 0;		/* Encountered a cluster in-use, restart to scan */
1331:DRIVER/FatFs/source/ff.c **** 				}
1332:DRIVER/FatFs/source/ff.c **** 				if (val == clst) return 0;	/* All cluster scanned? */
1333:DRIVER/FatFs/source/ff.c **** 			} while (bm != 0);
1334:DRIVER/FatFs/source/ff.c **** 			bm = 1;
1335:DRIVER/FatFs/source/ff.c **** 		} while (++i < SS(fs));
1336:DRIVER/FatFs/source/ff.c **** 	}
1337:DRIVER/FatFs/source/ff.c **** }
1338:DRIVER/FatFs/source/ff.c **** 
1339:DRIVER/FatFs/source/ff.c **** 
1340:DRIVER/FatFs/source/ff.c **** /*----------------------------------------*/
1341:DRIVER/FatFs/source/ff.c **** /* Set/Clear a block of allocation bitmap */
1342:DRIVER/FatFs/source/ff.c **** /*----------------------------------------*/
1343:DRIVER/FatFs/source/ff.c **** 
1344:DRIVER/FatFs/source/ff.c **** static FRESULT change_bitmap (
1345:DRIVER/FatFs/source/ff.c **** 	FATFS* fs,	/* Filesystem object */
1346:DRIVER/FatFs/source/ff.c **** 	DWORD clst,	/* Cluster number to change from */
1347:DRIVER/FatFs/source/ff.c **** 	DWORD ncl,	/* Number of clusters to be changed */
1348:DRIVER/FatFs/source/ff.c **** 	int bv		/* bit value to be set (0 or 1) */
1349:DRIVER/FatFs/source/ff.c **** )
1350:DRIVER/FatFs/source/ff.c **** {
1351:DRIVER/FatFs/source/ff.c **** 	BYTE bm;
1352:DRIVER/FatFs/source/ff.c **** 	UINT i;
1353:DRIVER/FatFs/source/ff.c **** 	LBA_t sect;
1354:DRIVER/FatFs/source/ff.c **** 
1355:DRIVER/FatFs/source/ff.c **** 
1356:DRIVER/FatFs/source/ff.c **** 	clst -= 2;	/* The first bit corresponds to cluster #2 */
1357:DRIVER/FatFs/source/ff.c **** 	sect = fs->bitbase + clst / 8 / SS(fs);	/* Sector address */
1358:DRIVER/FatFs/source/ff.c **** 	i = clst / 8 % SS(fs);					/* Byte offset in the sector */
1359:DRIVER/FatFs/source/ff.c **** 	bm = 1 << (clst % 8);					/* Bit mask in the byte */
1360:DRIVER/FatFs/source/ff.c **** 	for (;;) {
1361:DRIVER/FatFs/source/ff.c **** 		if (move_window(fs, sect++) != FR_OK) return FR_DISK_ERR;
1362:DRIVER/FatFs/source/ff.c **** 		do {
1363:DRIVER/FatFs/source/ff.c **** 			do {
1364:DRIVER/FatFs/source/ff.c **** 				if (bv == (int)((fs->win[i] & bm) != 0)) return FR_INT_ERR;	/* Is the bit expected value? */
1365:DRIVER/FatFs/source/ff.c **** 				fs->win[i] ^= bm;	/* Flip the bit */
1366:DRIVER/FatFs/source/ff.c **** 				fs->wflag = 1;
1367:DRIVER/FatFs/source/ff.c **** 				if (--ncl == 0) return FR_OK;	/* All bits processed? */
1368:DRIVER/FatFs/source/ff.c **** 			} while (bm <<= 1);		/* Next bit */
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 38


1369:DRIVER/FatFs/source/ff.c **** 			bm = 1;
1370:DRIVER/FatFs/source/ff.c **** 		} while (++i < SS(fs));		/* Next byte */
1371:DRIVER/FatFs/source/ff.c **** 		i = 0;
1372:DRIVER/FatFs/source/ff.c **** 	}
1373:DRIVER/FatFs/source/ff.c **** }
1374:DRIVER/FatFs/source/ff.c **** 
1375:DRIVER/FatFs/source/ff.c **** 
1376:DRIVER/FatFs/source/ff.c **** /*---------------------------------------------*/
1377:DRIVER/FatFs/source/ff.c **** /* Fill the first fragment of the FAT chain    */
1378:DRIVER/FatFs/source/ff.c **** /*---------------------------------------------*/
1379:DRIVER/FatFs/source/ff.c **** 
1380:DRIVER/FatFs/source/ff.c **** static FRESULT fill_first_frag (
1381:DRIVER/FatFs/source/ff.c **** 	FFOBJID* obj	/* Pointer to the corresponding object */
1382:DRIVER/FatFs/source/ff.c **** )
1383:DRIVER/FatFs/source/ff.c **** {
1384:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
1385:DRIVER/FatFs/source/ff.c **** 	DWORD cl, n;
1386:DRIVER/FatFs/source/ff.c **** 
1387:DRIVER/FatFs/source/ff.c **** 
1388:DRIVER/FatFs/source/ff.c **** 	if (obj->stat == 3) {	/* Has the object been changed 'fragmented' in this session? */
1389:DRIVER/FatFs/source/ff.c **** 		for (cl = obj->sclust, n = obj->n_cont; n; cl++, n--) {	/* Create cluster chain on the FAT */
1390:DRIVER/FatFs/source/ff.c **** 			res = put_fat(obj->fs, cl, cl + 1);
1391:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) return res;
1392:DRIVER/FatFs/source/ff.c **** 		}
1393:DRIVER/FatFs/source/ff.c **** 		obj->stat = 0;	/* Change status 'FAT chain is valid' */
1394:DRIVER/FatFs/source/ff.c **** 	}
1395:DRIVER/FatFs/source/ff.c **** 	return FR_OK;
1396:DRIVER/FatFs/source/ff.c **** }
1397:DRIVER/FatFs/source/ff.c **** 
1398:DRIVER/FatFs/source/ff.c **** 
1399:DRIVER/FatFs/source/ff.c **** /*---------------------------------------------*/
1400:DRIVER/FatFs/source/ff.c **** /* Fill the last fragment of the FAT chain     */
1401:DRIVER/FatFs/source/ff.c **** /*---------------------------------------------*/
1402:DRIVER/FatFs/source/ff.c **** 
1403:DRIVER/FatFs/source/ff.c **** static FRESULT fill_last_frag (
1404:DRIVER/FatFs/source/ff.c **** 	FFOBJID* obj,	/* Pointer to the corresponding object */
1405:DRIVER/FatFs/source/ff.c **** 	DWORD lcl,		/* Last cluster of the fragment */
1406:DRIVER/FatFs/source/ff.c **** 	DWORD term		/* Value to set the last FAT entry */
1407:DRIVER/FatFs/source/ff.c **** )
1408:DRIVER/FatFs/source/ff.c **** {
1409:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
1410:DRIVER/FatFs/source/ff.c **** 
1411:DRIVER/FatFs/source/ff.c **** 
1412:DRIVER/FatFs/source/ff.c **** 	while (obj->n_frag > 0) {	/* Create the chain of last fragment */
1413:DRIVER/FatFs/source/ff.c **** 		res = put_fat(obj->fs, lcl - obj->n_frag + 1, (obj->n_frag > 1) ? lcl - obj->n_frag + 2 : term);
1414:DRIVER/FatFs/source/ff.c **** 		if (res != FR_OK) return res;
1415:DRIVER/FatFs/source/ff.c **** 		obj->n_frag--;
1416:DRIVER/FatFs/source/ff.c **** 	}
1417:DRIVER/FatFs/source/ff.c **** 	return FR_OK;
1418:DRIVER/FatFs/source/ff.c **** }
1419:DRIVER/FatFs/source/ff.c **** 
1420:DRIVER/FatFs/source/ff.c **** #endif	/* FF_FS_EXFAT && !FF_FS_READONLY */
1421:DRIVER/FatFs/source/ff.c **** 
1422:DRIVER/FatFs/source/ff.c **** 
1423:DRIVER/FatFs/source/ff.c **** 
1424:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY
1425:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 39


1426:DRIVER/FatFs/source/ff.c **** /* FAT handling - Remove a cluster chain                                 */
1427:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
1428:DRIVER/FatFs/source/ff.c **** 
1429:DRIVER/FatFs/source/ff.c **** static FRESULT remove_chain (	/* FR_OK(0):succeeded, !=0:error */
1430:DRIVER/FatFs/source/ff.c **** 	FFOBJID* obj,		/* Corresponding object */
1431:DRIVER/FatFs/source/ff.c **** 	DWORD clst,			/* Cluster to remove a chain from */
1432:DRIVER/FatFs/source/ff.c **** 	DWORD pclst			/* Previous cluster of clst (0 if entire chain) */
1433:DRIVER/FatFs/source/ff.c **** )
1434:DRIVER/FatFs/source/ff.c **** {
1435:DRIVER/FatFs/source/ff.c **** 	FRESULT res = FR_OK;
1436:DRIVER/FatFs/source/ff.c **** 	DWORD nxt;
1437:DRIVER/FatFs/source/ff.c **** 	FATFS *fs = obj->fs;
1438:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT || FF_USE_TRIM
1439:DRIVER/FatFs/source/ff.c **** 	DWORD scl = clst, ecl = clst;
1440:DRIVER/FatFs/source/ff.c **** #endif
1441:DRIVER/FatFs/source/ff.c **** #if FF_USE_TRIM
1442:DRIVER/FatFs/source/ff.c **** 	LBA_t rt[2];
1443:DRIVER/FatFs/source/ff.c **** #endif
1444:DRIVER/FatFs/source/ff.c **** 
1445:DRIVER/FatFs/source/ff.c **** 	if (clst < 2 || clst >= fs->n_fatent) return FR_INT_ERR;	/* Check if in valid range */
1446:DRIVER/FatFs/source/ff.c **** 
1447:DRIVER/FatFs/source/ff.c **** 	/* Mark the previous cluster 'EOC' on the FAT if it exists */
1448:DRIVER/FatFs/source/ff.c **** 	if (pclst != 0 && (!FF_FS_EXFAT || fs->fs_type != FS_EXFAT || obj->stat != 2)) {
1449:DRIVER/FatFs/source/ff.c **** 		res = put_fat(fs, pclst, 0xFFFFFFFF);
1450:DRIVER/FatFs/source/ff.c **** 		if (res != FR_OK) return res;
1451:DRIVER/FatFs/source/ff.c **** 	}
1452:DRIVER/FatFs/source/ff.c **** 
1453:DRIVER/FatFs/source/ff.c **** 	/* Remove the chain */
1454:DRIVER/FatFs/source/ff.c **** 	do {
1455:DRIVER/FatFs/source/ff.c **** 		nxt = get_fat(obj, clst);			/* Get cluster status */
1456:DRIVER/FatFs/source/ff.c **** 		if (nxt == 0) break;				/* Empty cluster? */
1457:DRIVER/FatFs/source/ff.c **** 		if (nxt == 1) return FR_INT_ERR;	/* Internal error? */
1458:DRIVER/FatFs/source/ff.c **** 		if (nxt == 0xFFFFFFFF) return FR_DISK_ERR;	/* Disk error? */
1459:DRIVER/FatFs/source/ff.c **** 		if (!FF_FS_EXFAT || fs->fs_type != FS_EXFAT) {
1460:DRIVER/FatFs/source/ff.c **** 			res = put_fat(fs, clst, 0);		/* Mark the cluster 'free' on the FAT */
1461:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) return res;
1462:DRIVER/FatFs/source/ff.c **** 		}
1463:DRIVER/FatFs/source/ff.c **** 		if (fs->free_clst < fs->n_fatent - 2) {	/* Update FSINFO */
1464:DRIVER/FatFs/source/ff.c **** 			fs->free_clst++;
1465:DRIVER/FatFs/source/ff.c **** 			fs->fsi_flag |= 1;
1466:DRIVER/FatFs/source/ff.c **** 		}
1467:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT || FF_USE_TRIM
1468:DRIVER/FatFs/source/ff.c **** 		if (ecl + 1 == nxt) {	/* Is next cluster contiguous? */
1469:DRIVER/FatFs/source/ff.c **** 			ecl = nxt;
1470:DRIVER/FatFs/source/ff.c **** 		} else {				/* End of contiguous cluster block */
1471:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
1472:DRIVER/FatFs/source/ff.c **** 			if (fs->fs_type == FS_EXFAT) {
1473:DRIVER/FatFs/source/ff.c **** 				res = change_bitmap(fs, scl, ecl - scl + 1, 0);	/* Mark the cluster block 'free' on the bitmap 
1474:DRIVER/FatFs/source/ff.c **** 				if (res != FR_OK) return res;
1475:DRIVER/FatFs/source/ff.c **** 			}
1476:DRIVER/FatFs/source/ff.c **** #endif
1477:DRIVER/FatFs/source/ff.c **** #if FF_USE_TRIM
1478:DRIVER/FatFs/source/ff.c **** 			rt[0] = clst2sect(fs, scl);					/* Start of data area to be freed */
1479:DRIVER/FatFs/source/ff.c **** 			rt[1] = clst2sect(fs, ecl) + fs->csize - 1;	/* End of data area to be freed */
1480:DRIVER/FatFs/source/ff.c **** 			disk_ioctl(fs->pdrv, CTRL_TRIM, rt);		/* Inform storage device that the data in the block may be
1481:DRIVER/FatFs/source/ff.c **** #endif
1482:DRIVER/FatFs/source/ff.c **** 			scl = ecl = nxt;
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 40


1483:DRIVER/FatFs/source/ff.c **** 		}
1484:DRIVER/FatFs/source/ff.c **** #endif
1485:DRIVER/FatFs/source/ff.c **** 		clst = nxt;					/* Next cluster */
1486:DRIVER/FatFs/source/ff.c **** 	} while (clst < fs->n_fatent);	/* Repeat while not the last link */
1487:DRIVER/FatFs/source/ff.c **** 
1488:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
1489:DRIVER/FatFs/source/ff.c **** 	/* Some post processes for chain status */
1490:DRIVER/FatFs/source/ff.c **** 	if (fs->fs_type == FS_EXFAT) {
1491:DRIVER/FatFs/source/ff.c **** 		if (pclst == 0) {	/* Has the entire chain been removed? */
1492:DRIVER/FatFs/source/ff.c **** 			obj->stat = 0;		/* Change the chain status 'initial' */
1493:DRIVER/FatFs/source/ff.c **** 		} else {
1494:DRIVER/FatFs/source/ff.c **** 			if (obj->stat == 0) {	/* Is it a fragmented chain from the beginning of this session? */
1495:DRIVER/FatFs/source/ff.c **** 				clst = obj->sclust;		/* Follow the chain to check if it gets contiguous */
1496:DRIVER/FatFs/source/ff.c **** 				while (clst != pclst) {
1497:DRIVER/FatFs/source/ff.c **** 					nxt = get_fat(obj, clst);
1498:DRIVER/FatFs/source/ff.c **** 					if (nxt < 2) return FR_INT_ERR;
1499:DRIVER/FatFs/source/ff.c **** 					if (nxt == 0xFFFFFFFF) return FR_DISK_ERR;
1500:DRIVER/FatFs/source/ff.c **** 					if (nxt != clst + 1) break;	/* Not contiguous? */
1501:DRIVER/FatFs/source/ff.c **** 					clst++;
1502:DRIVER/FatFs/source/ff.c **** 				}
1503:DRIVER/FatFs/source/ff.c **** 				if (clst == pclst) {	/* Has the chain got contiguous again? */
1504:DRIVER/FatFs/source/ff.c **** 					obj->stat = 2;		/* Change the chain status 'contiguous' */
1505:DRIVER/FatFs/source/ff.c **** 				}
1506:DRIVER/FatFs/source/ff.c **** 			} else {
1507:DRIVER/FatFs/source/ff.c **** 				if (obj->stat == 3 && pclst >= obj->sclust && pclst <= obj->sclust + obj->n_cont) {	/* Was the 
1508:DRIVER/FatFs/source/ff.c **** 					obj->stat = 2;	/* Change the chain status 'contiguous' */
1509:DRIVER/FatFs/source/ff.c **** 				}
1510:DRIVER/FatFs/source/ff.c **** 			}
1511:DRIVER/FatFs/source/ff.c **** 		}
1512:DRIVER/FatFs/source/ff.c **** 	}
1513:DRIVER/FatFs/source/ff.c **** #endif
1514:DRIVER/FatFs/source/ff.c **** 	return FR_OK;
1515:DRIVER/FatFs/source/ff.c **** }
1516:DRIVER/FatFs/source/ff.c **** 
1517:DRIVER/FatFs/source/ff.c **** 
1518:DRIVER/FatFs/source/ff.c **** 
1519:DRIVER/FatFs/source/ff.c **** 
1520:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
1521:DRIVER/FatFs/source/ff.c **** /* FAT handling - Stretch a chain or Create a new chain                  */
1522:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
1523:DRIVER/FatFs/source/ff.c **** 
1524:DRIVER/FatFs/source/ff.c **** static DWORD create_chain (	/* 0:No free cluster, 1:Internal error, 0xFFFFFFFF:Disk error, >=2:New 
1525:DRIVER/FatFs/source/ff.c **** 	FFOBJID* obj,		/* Corresponding object */
1526:DRIVER/FatFs/source/ff.c **** 	DWORD clst			/* Cluster# to stretch, 0:Create a new chain */
1527:DRIVER/FatFs/source/ff.c **** )
1528:DRIVER/FatFs/source/ff.c **** {
1529:DRIVER/FatFs/source/ff.c **** 	DWORD cs, ncl, scl;
1530:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
1531:DRIVER/FatFs/source/ff.c **** 	FATFS *fs = obj->fs;
1532:DRIVER/FatFs/source/ff.c **** 
1533:DRIVER/FatFs/source/ff.c **** 
1534:DRIVER/FatFs/source/ff.c **** 	if (clst == 0) {	/* Create a new chain */
1535:DRIVER/FatFs/source/ff.c **** 		scl = fs->last_clst;				/* Suggested cluster to start to find */
1536:DRIVER/FatFs/source/ff.c **** 		if (scl == 0 || scl >= fs->n_fatent) scl = 1;
1537:DRIVER/FatFs/source/ff.c **** 	}
1538:DRIVER/FatFs/source/ff.c **** 	else {				/* Stretch a chain */
1539:DRIVER/FatFs/source/ff.c **** 		cs = get_fat(obj, clst);			/* Check the cluster status */
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 41


1540:DRIVER/FatFs/source/ff.c **** 		if (cs < 2) return 1;				/* Test for insanity */
1541:DRIVER/FatFs/source/ff.c **** 		if (cs == 0xFFFFFFFF) return cs;	/* Test for disk error */
1542:DRIVER/FatFs/source/ff.c **** 		if (cs < fs->n_fatent) return cs;	/* It is already followed by next cluster */
1543:DRIVER/FatFs/source/ff.c **** 		scl = clst;							/* Cluster to start to find */
1544:DRIVER/FatFs/source/ff.c **** 	}
1545:DRIVER/FatFs/source/ff.c **** 	if (fs->free_clst == 0) return 0;		/* No free cluster */
1546:DRIVER/FatFs/source/ff.c **** 
1547:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
1548:DRIVER/FatFs/source/ff.c **** 	if (fs->fs_type == FS_EXFAT) {	/* On the exFAT volume */
1549:DRIVER/FatFs/source/ff.c **** 		ncl = find_bitmap(fs, scl, 1);				/* Find a free cluster */
1550:DRIVER/FatFs/source/ff.c **** 		if (ncl == 0 || ncl == 0xFFFFFFFF) return ncl;	/* No free cluster or hard error? */
1551:DRIVER/FatFs/source/ff.c **** 		res = change_bitmap(fs, ncl, 1, 1);			/* Mark the cluster 'in use' */
1552:DRIVER/FatFs/source/ff.c **** 		if (res == FR_INT_ERR) return 1;
1553:DRIVER/FatFs/source/ff.c **** 		if (res == FR_DISK_ERR) return 0xFFFFFFFF;
1554:DRIVER/FatFs/source/ff.c **** 		if (clst == 0) {							/* Is it a new chain? */
1555:DRIVER/FatFs/source/ff.c **** 			obj->stat = 2;							/* Set status 'contiguous' */
1556:DRIVER/FatFs/source/ff.c **** 		} else {									/* It is a stretched chain */
1557:DRIVER/FatFs/source/ff.c **** 			if (obj->stat == 2 && ncl != scl + 1) {	/* Is the chain got fragmented? */
1558:DRIVER/FatFs/source/ff.c **** 				obj->n_cont = scl - obj->sclust;	/* Set size of the contiguous part */
1559:DRIVER/FatFs/source/ff.c **** 				obj->stat = 3;						/* Change status 'just fragmented' */
1560:DRIVER/FatFs/source/ff.c **** 			}
1561:DRIVER/FatFs/source/ff.c **** 		}
1562:DRIVER/FatFs/source/ff.c **** 		if (obj->stat != 2) {	/* Is the file non-contiguous? */
1563:DRIVER/FatFs/source/ff.c **** 			if (ncl == clst + 1) {	/* Is the cluster next to previous one? */
1564:DRIVER/FatFs/source/ff.c **** 				obj->n_frag = obj->n_frag ? obj->n_frag + 1 : 2;	/* Increment size of last framgent */
1565:DRIVER/FatFs/source/ff.c **** 			} else {				/* New fragment */
1566:DRIVER/FatFs/source/ff.c **** 				if (obj->n_frag == 0) obj->n_frag = 1;
1567:DRIVER/FatFs/source/ff.c **** 				res = fill_last_frag(obj, clst, ncl);	/* Fill last fragment on the FAT and link it to new one *
1568:DRIVER/FatFs/source/ff.c **** 				if (res == FR_OK) obj->n_frag = 1;
1569:DRIVER/FatFs/source/ff.c **** 			}
1570:DRIVER/FatFs/source/ff.c **** 		}
1571:DRIVER/FatFs/source/ff.c **** 	} else
1572:DRIVER/FatFs/source/ff.c **** #endif
1573:DRIVER/FatFs/source/ff.c **** 	{	/* On the FAT/FAT32 volume */
1574:DRIVER/FatFs/source/ff.c **** 		ncl = 0;
1575:DRIVER/FatFs/source/ff.c **** 		if (scl == clst) {						/* Stretching an existing chain? */
1576:DRIVER/FatFs/source/ff.c **** 			ncl = scl + 1;						/* Test if next cluster is free */
1577:DRIVER/FatFs/source/ff.c **** 			if (ncl >= fs->n_fatent) ncl = 2;
1578:DRIVER/FatFs/source/ff.c **** 			cs = get_fat(obj, ncl);				/* Get next cluster status */
1579:DRIVER/FatFs/source/ff.c **** 			if (cs == 1 || cs == 0xFFFFFFFF) return cs;	/* Test for error */
1580:DRIVER/FatFs/source/ff.c **** 			if (cs != 0) {						/* Not free? */
1581:DRIVER/FatFs/source/ff.c **** 				cs = fs->last_clst;				/* Start at suggested cluster if it is valid */
1582:DRIVER/FatFs/source/ff.c **** 				if (cs >= 2 && cs < fs->n_fatent) scl = cs;
1583:DRIVER/FatFs/source/ff.c **** 				ncl = 0;
1584:DRIVER/FatFs/source/ff.c **** 			}
1585:DRIVER/FatFs/source/ff.c **** 		}
1586:DRIVER/FatFs/source/ff.c **** 		if (ncl == 0) {	/* The new cluster cannot be contiguous and find another fragment */
1587:DRIVER/FatFs/source/ff.c **** 			ncl = scl;	/* Start cluster */
1588:DRIVER/FatFs/source/ff.c **** 			for (;;) {
1589:DRIVER/FatFs/source/ff.c **** 				ncl++;							/* Next cluster */
1590:DRIVER/FatFs/source/ff.c **** 				if (ncl >= fs->n_fatent) {		/* Check wrap-around */
1591:DRIVER/FatFs/source/ff.c **** 					ncl = 2;
1592:DRIVER/FatFs/source/ff.c **** 					if (ncl > scl) return 0;	/* No free cluster found? */
1593:DRIVER/FatFs/source/ff.c **** 				}
1594:DRIVER/FatFs/source/ff.c **** 				cs = get_fat(obj, ncl);			/* Get the cluster status */
1595:DRIVER/FatFs/source/ff.c **** 				if (cs == 0) break;				/* Found a free cluster? */
1596:DRIVER/FatFs/source/ff.c **** 				if (cs == 1 || cs == 0xFFFFFFFF) return cs;	/* Test for error */
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 42


1597:DRIVER/FatFs/source/ff.c **** 				if (ncl == scl) return 0;		/* No free cluster found? */
1598:DRIVER/FatFs/source/ff.c **** 			}
1599:DRIVER/FatFs/source/ff.c **** 		}
1600:DRIVER/FatFs/source/ff.c **** 		res = put_fat(fs, ncl, 0xFFFFFFFF);		/* Mark the new cluster 'EOC' */
1601:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK && clst != 0) {
1602:DRIVER/FatFs/source/ff.c **** 			res = put_fat(fs, clst, ncl);		/* Link it from the previous one if needed */
1603:DRIVER/FatFs/source/ff.c **** 		}
1604:DRIVER/FatFs/source/ff.c **** 	}
1605:DRIVER/FatFs/source/ff.c **** 
1606:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {			/* Update FSINFO if function succeeded. */
1607:DRIVER/FatFs/source/ff.c **** 		fs->last_clst = ncl;
1608:DRIVER/FatFs/source/ff.c **** 		if (fs->free_clst <= fs->n_fatent - 2) fs->free_clst--;
1609:DRIVER/FatFs/source/ff.c **** 		fs->fsi_flag |= 1;
1610:DRIVER/FatFs/source/ff.c **** 	} else {
1611:DRIVER/FatFs/source/ff.c **** 		ncl = (res == FR_DISK_ERR) ? 0xFFFFFFFF : 1;	/* Failed. Generate error status */
1612:DRIVER/FatFs/source/ff.c **** 	}
1613:DRIVER/FatFs/source/ff.c **** 
1614:DRIVER/FatFs/source/ff.c **** 	return ncl;		/* Return new cluster number or error status */
1615:DRIVER/FatFs/source/ff.c **** }
1616:DRIVER/FatFs/source/ff.c **** 
1617:DRIVER/FatFs/source/ff.c **** #endif /* !FF_FS_READONLY */
1618:DRIVER/FatFs/source/ff.c **** 
1619:DRIVER/FatFs/source/ff.c **** 
1620:DRIVER/FatFs/source/ff.c **** 
1621:DRIVER/FatFs/source/ff.c **** 
1622:DRIVER/FatFs/source/ff.c **** #if FF_USE_FASTSEEK
1623:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
1624:DRIVER/FatFs/source/ff.c **** /* FAT handling - Convert offset into cluster with link map table        */
1625:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
1626:DRIVER/FatFs/source/ff.c **** 
1627:DRIVER/FatFs/source/ff.c **** static DWORD clmt_clust (	/* <2:Error, >=2:Cluster number */
1628:DRIVER/FatFs/source/ff.c **** 	FIL* fp,		/* Pointer to the file object */
1629:DRIVER/FatFs/source/ff.c **** 	FSIZE_t ofs		/* File offset to be converted to cluster# */
1630:DRIVER/FatFs/source/ff.c **** )
1631:DRIVER/FatFs/source/ff.c **** {
1632:DRIVER/FatFs/source/ff.c **** 	DWORD cl, ncl;
1633:DRIVER/FatFs/source/ff.c **** 	DWORD *tbl;
1634:DRIVER/FatFs/source/ff.c **** 	FATFS *fs = fp->obj.fs;
1635:DRIVER/FatFs/source/ff.c **** 
1636:DRIVER/FatFs/source/ff.c **** 
1637:DRIVER/FatFs/source/ff.c **** 	tbl = fp->cltbl + 1;	/* Top of CLMT */
1638:DRIVER/FatFs/source/ff.c **** 	cl = (DWORD)(ofs / SS(fs) / fs->csize);	/* Cluster order from top of the file */
1639:DRIVER/FatFs/source/ff.c **** 	for (;;) {
1640:DRIVER/FatFs/source/ff.c **** 		ncl = *tbl++;			/* Number of cluters in the fragment */
1641:DRIVER/FatFs/source/ff.c **** 		if (ncl == 0) return 0;	/* End of table? (error) */
1642:DRIVER/FatFs/source/ff.c **** 		if (cl < ncl) break;	/* In this fragment? */
1643:DRIVER/FatFs/source/ff.c **** 		cl -= ncl; tbl++;		/* Next fragment */
1644:DRIVER/FatFs/source/ff.c **** 	}
1645:DRIVER/FatFs/source/ff.c **** 	return cl + *tbl;	/* Return the cluster number */
1646:DRIVER/FatFs/source/ff.c **** }
1647:DRIVER/FatFs/source/ff.c **** 
1648:DRIVER/FatFs/source/ff.c **** #endif	/* FF_USE_FASTSEEK */
1649:DRIVER/FatFs/source/ff.c **** 
1650:DRIVER/FatFs/source/ff.c **** 
1651:DRIVER/FatFs/source/ff.c **** 
1652:DRIVER/FatFs/source/ff.c **** 
1653:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 43


1654:DRIVER/FatFs/source/ff.c **** /* Directory handling - Fill a cluster with zeros                        */
1655:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
1656:DRIVER/FatFs/source/ff.c **** 
1657:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY
1658:DRIVER/FatFs/source/ff.c **** static FRESULT dir_clear (	/* Returns FR_OK or FR_DISK_ERR */
1659:DRIVER/FatFs/source/ff.c **** 	FATFS *fs,		/* Filesystem object */
1660:DRIVER/FatFs/source/ff.c **** 	DWORD clst		/* Directory table to clear */
1661:DRIVER/FatFs/source/ff.c **** )
1662:DRIVER/FatFs/source/ff.c **** {
1663:DRIVER/FatFs/source/ff.c **** 	LBA_t sect;
1664:DRIVER/FatFs/source/ff.c **** 	UINT n, szb;
1665:DRIVER/FatFs/source/ff.c **** 	BYTE *ibuf;
1666:DRIVER/FatFs/source/ff.c **** 
1667:DRIVER/FatFs/source/ff.c **** 
1668:DRIVER/FatFs/source/ff.c **** 	if (sync_window(fs) != FR_OK) return FR_DISK_ERR;	/* Flush disk access window */
1669:DRIVER/FatFs/source/ff.c **** 	sect = clst2sect(fs, clst);		/* Top of the cluster */
1670:DRIVER/FatFs/source/ff.c **** 	fs->winsect = sect;				/* Set window to top of the cluster */
1671:DRIVER/FatFs/source/ff.c **** 	memset(fs->win, 0, sizeof fs->win);	/* Clear window buffer */
1672:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN == 3		/* Quick table clear by using multi-secter write */
1673:DRIVER/FatFs/source/ff.c **** 	/* Allocate a temporary buffer */
1674:DRIVER/FatFs/source/ff.c **** 	for (szb = ((DWORD)fs->csize * SS(fs) >= MAX_MALLOC) ? MAX_MALLOC : fs->csize * SS(fs), ibuf = 0; 
1675:DRIVER/FatFs/source/ff.c **** 	if (szb > SS(fs)) {		/* Buffer allocated? */
1676:DRIVER/FatFs/source/ff.c **** 		memset(ibuf, 0, szb);
1677:DRIVER/FatFs/source/ff.c **** 		szb /= SS(fs);		/* Bytes -> Sectors */
1678:DRIVER/FatFs/source/ff.c **** 		for (n = 0; n < fs->csize && disk_write(fs->pdrv, ibuf, sect + n, szb) == RES_OK; n += szb) ;	/* 
1679:DRIVER/FatFs/source/ff.c **** 		ff_memfree(ibuf);
1680:DRIVER/FatFs/source/ff.c **** 	} else
1681:DRIVER/FatFs/source/ff.c **** #endif
1682:DRIVER/FatFs/source/ff.c **** 	{
1683:DRIVER/FatFs/source/ff.c **** 		ibuf = fs->win; szb = 1;	/* Use window buffer (many single-sector writes may take a time) */
1684:DRIVER/FatFs/source/ff.c **** 		for (n = 0; n < fs->csize && disk_write(fs->pdrv, ibuf, sect + n, szb) == RES_OK; n += szb) ;	/* 
1685:DRIVER/FatFs/source/ff.c **** 	}
1686:DRIVER/FatFs/source/ff.c **** 	return (n == fs->csize) ? FR_OK : FR_DISK_ERR;
1687:DRIVER/FatFs/source/ff.c **** }
1688:DRIVER/FatFs/source/ff.c **** #endif	/* !FF_FS_READONLY */
1689:DRIVER/FatFs/source/ff.c **** 
1690:DRIVER/FatFs/source/ff.c **** 
1691:DRIVER/FatFs/source/ff.c **** 
1692:DRIVER/FatFs/source/ff.c **** 
1693:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
1694:DRIVER/FatFs/source/ff.c **** /* Directory handling - Set directory index                              */
1695:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
1696:DRIVER/FatFs/source/ff.c **** 
1697:DRIVER/FatFs/source/ff.c **** static FRESULT dir_sdi (	/* FR_OK(0):succeeded, !=0:error */
1698:DRIVER/FatFs/source/ff.c **** 	DIR* dp,		/* Pointer to directory object */
1699:DRIVER/FatFs/source/ff.c **** 	DWORD ofs		/* Offset of directory table */
1700:DRIVER/FatFs/source/ff.c **** )
1701:DRIVER/FatFs/source/ff.c **** {
1702:DRIVER/FatFs/source/ff.c **** 	DWORD csz, clst;
1703:DRIVER/FatFs/source/ff.c **** 	FATFS *fs = dp->obj.fs;
1704:DRIVER/FatFs/source/ff.c **** 
1705:DRIVER/FatFs/source/ff.c **** 
1706:DRIVER/FatFs/source/ff.c **** 	if (ofs >= (DWORD)((FF_FS_EXFAT && fs->fs_type == FS_EXFAT) ? MAX_DIR_EX : MAX_DIR) || ofs % SZDIR
1707:DRIVER/FatFs/source/ff.c **** 		return FR_INT_ERR;
1708:DRIVER/FatFs/source/ff.c **** 	}
1709:DRIVER/FatFs/source/ff.c **** 	dp->dptr = ofs;				/* Set current offset */
1710:DRIVER/FatFs/source/ff.c **** 	clst = dp->obj.sclust;		/* Table start cluster (0:root) */
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 44


1711:DRIVER/FatFs/source/ff.c **** 	if (clst == 0 && fs->fs_type >= FS_FAT32) {	/* Replace cluster# 0 with root cluster# */
1712:DRIVER/FatFs/source/ff.c **** 		clst = (DWORD)fs->dirbase;
1713:DRIVER/FatFs/source/ff.c **** 		if (FF_FS_EXFAT) dp->obj.stat = 0;	/* exFAT: Root dir has an FAT chain */
1714:DRIVER/FatFs/source/ff.c **** 	}
1715:DRIVER/FatFs/source/ff.c **** 
1716:DRIVER/FatFs/source/ff.c **** 	if (clst == 0) {	/* Static table (root-directory on the FAT volume) */
1717:DRIVER/FatFs/source/ff.c **** 		if (ofs / SZDIRE >= fs->n_rootdir) return FR_INT_ERR;	/* Is index out of range? */
1718:DRIVER/FatFs/source/ff.c **** 		dp->sect = fs->dirbase;
1719:DRIVER/FatFs/source/ff.c **** 
1720:DRIVER/FatFs/source/ff.c **** 	} else {			/* Dynamic table (sub-directory or root-directory on the FAT32/exFAT volume) */
1721:DRIVER/FatFs/source/ff.c **** 		csz = (DWORD)fs->csize * SS(fs);	/* Bytes per cluster */
1722:DRIVER/FatFs/source/ff.c **** 		while (ofs >= csz) {				/* Follow cluster chain */
1723:DRIVER/FatFs/source/ff.c **** 			clst = get_fat(&dp->obj, clst);				/* Get next cluster */
1724:DRIVER/FatFs/source/ff.c **** 			if (clst == 0xFFFFFFFF) return FR_DISK_ERR;	/* Disk error */
1725:DRIVER/FatFs/source/ff.c **** 			if (clst < 2 || clst >= fs->n_fatent) return FR_INT_ERR;	/* Reached to end of table or internal 
1726:DRIVER/FatFs/source/ff.c **** 			ofs -= csz;
1727:DRIVER/FatFs/source/ff.c **** 		}
1728:DRIVER/FatFs/source/ff.c **** 		dp->sect = clst2sect(fs, clst);
1729:DRIVER/FatFs/source/ff.c **** 	}
1730:DRIVER/FatFs/source/ff.c **** 	dp->clust = clst;					/* Current cluster# */
1731:DRIVER/FatFs/source/ff.c **** 	if (dp->sect == 0) return FR_INT_ERR;
1732:DRIVER/FatFs/source/ff.c **** 	dp->sect += ofs / SS(fs);			/* Sector# of the directory entry */
1733:DRIVER/FatFs/source/ff.c **** 	dp->dir = fs->win + (ofs % SS(fs));	/* Pointer to the entry in the win[] */
1734:DRIVER/FatFs/source/ff.c **** 
1735:DRIVER/FatFs/source/ff.c **** 	return FR_OK;
1736:DRIVER/FatFs/source/ff.c **** }
1737:DRIVER/FatFs/source/ff.c **** 
1738:DRIVER/FatFs/source/ff.c **** 
1739:DRIVER/FatFs/source/ff.c **** 
1740:DRIVER/FatFs/source/ff.c **** 
1741:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
1742:DRIVER/FatFs/source/ff.c **** /* Directory handling - Move directory table index next                  */
1743:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
1744:DRIVER/FatFs/source/ff.c **** 
1745:DRIVER/FatFs/source/ff.c **** static FRESULT dir_next (	/* FR_OK(0):succeeded, FR_NO_FILE:End of table, FR_DENIED:Could not stret
1746:DRIVER/FatFs/source/ff.c **** 	DIR* dp,				/* Pointer to the directory object */
1747:DRIVER/FatFs/source/ff.c **** 	int stretch				/* 0: Do not stretch table, 1: Stretch table if needed */
1748:DRIVER/FatFs/source/ff.c **** )
1749:DRIVER/FatFs/source/ff.c **** {
1750:DRIVER/FatFs/source/ff.c **** 	DWORD ofs, clst;
1751:DRIVER/FatFs/source/ff.c **** 	FATFS *fs = dp->obj.fs;
1752:DRIVER/FatFs/source/ff.c **** 
1753:DRIVER/FatFs/source/ff.c **** 
1754:DRIVER/FatFs/source/ff.c **** 	ofs = dp->dptr + SZDIRE;	/* Next entry */
1755:DRIVER/FatFs/source/ff.c **** 	if (ofs >= (DWORD)((FF_FS_EXFAT && fs->fs_type == FS_EXFAT) ? MAX_DIR_EX : MAX_DIR)) dp->sect = 0;
1756:DRIVER/FatFs/source/ff.c **** 	if (dp->sect == 0) return FR_NO_FILE;	/* Report EOT if it has been disabled */
1757:DRIVER/FatFs/source/ff.c **** 
1758:DRIVER/FatFs/source/ff.c **** 	if (ofs % SS(fs) == 0) {	/* Sector changed? */
1759:DRIVER/FatFs/source/ff.c **** 		dp->sect++;				/* Next sector */
1760:DRIVER/FatFs/source/ff.c **** 
1761:DRIVER/FatFs/source/ff.c **** 		if (dp->clust == 0) {	/* Static table */
1762:DRIVER/FatFs/source/ff.c **** 			if (ofs / SZDIRE >= fs->n_rootdir) {	/* Report EOT if it reached end of static table */
1763:DRIVER/FatFs/source/ff.c **** 				dp->sect = 0; return FR_NO_FILE;
1764:DRIVER/FatFs/source/ff.c **** 			}
1765:DRIVER/FatFs/source/ff.c **** 		}
1766:DRIVER/FatFs/source/ff.c **** 		else {					/* Dynamic table */
1767:DRIVER/FatFs/source/ff.c **** 			if ((ofs / SS(fs) & (fs->csize - 1)) == 0) {	/* Cluster changed? */
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 45


1768:DRIVER/FatFs/source/ff.c **** 				clst = get_fat(&dp->obj, dp->clust);		/* Get next cluster */
1769:DRIVER/FatFs/source/ff.c **** 				if (clst <= 1) return FR_INT_ERR;			/* Internal error */
1770:DRIVER/FatFs/source/ff.c **** 				if (clst == 0xFFFFFFFF) return FR_DISK_ERR;	/* Disk error */
1771:DRIVER/FatFs/source/ff.c **** 				if (clst >= fs->n_fatent) {					/* It reached end of dynamic table */
1772:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY
1773:DRIVER/FatFs/source/ff.c **** 					if (!stretch) {								/* If no stretch, report EOT */
1774:DRIVER/FatFs/source/ff.c **** 						dp->sect = 0; return FR_NO_FILE;
1775:DRIVER/FatFs/source/ff.c **** 					}
1776:DRIVER/FatFs/source/ff.c **** 					clst = create_chain(&dp->obj, dp->clust);	/* Allocate a cluster */
1777:DRIVER/FatFs/source/ff.c **** 					if (clst == 0) return FR_DENIED;			/* No free cluster */
1778:DRIVER/FatFs/source/ff.c **** 					if (clst == 1) return FR_INT_ERR;			/* Internal error */
1779:DRIVER/FatFs/source/ff.c **** 					if (clst == 0xFFFFFFFF) return FR_DISK_ERR;	/* Disk error */
1780:DRIVER/FatFs/source/ff.c **** 					if (dir_clear(fs, clst) != FR_OK) return FR_DISK_ERR;	/* Clean up the stretched table */
1781:DRIVER/FatFs/source/ff.c **** 					if (FF_FS_EXFAT) dp->obj.stat |= 4;			/* exFAT: The directory has been stretched */
1782:DRIVER/FatFs/source/ff.c **** #else
1783:DRIVER/FatFs/source/ff.c **** 					if (!stretch) dp->sect = 0;					/* (this line is to suppress compiler warning) */
1784:DRIVER/FatFs/source/ff.c **** 					dp->sect = 0; return FR_NO_FILE;			/* Report EOT */
1785:DRIVER/FatFs/source/ff.c **** #endif
1786:DRIVER/FatFs/source/ff.c **** 				}
1787:DRIVER/FatFs/source/ff.c **** 				dp->clust = clst;		/* Initialize data for new cluster */
1788:DRIVER/FatFs/source/ff.c **** 				dp->sect = clst2sect(fs, clst);
1789:DRIVER/FatFs/source/ff.c **** 			}
1790:DRIVER/FatFs/source/ff.c **** 		}
1791:DRIVER/FatFs/source/ff.c **** 	}
1792:DRIVER/FatFs/source/ff.c **** 	dp->dptr = ofs;						/* Current entry */
1793:DRIVER/FatFs/source/ff.c **** 	dp->dir = fs->win + ofs % SS(fs);	/* Pointer to the entry in the win[] */
1794:DRIVER/FatFs/source/ff.c **** 
1795:DRIVER/FatFs/source/ff.c **** 	return FR_OK;
1796:DRIVER/FatFs/source/ff.c **** }
1797:DRIVER/FatFs/source/ff.c **** 
1798:DRIVER/FatFs/source/ff.c **** 
1799:DRIVER/FatFs/source/ff.c **** 
1800:DRIVER/FatFs/source/ff.c **** 
1801:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY
1802:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
1803:DRIVER/FatFs/source/ff.c **** /* Directory handling - Reserve a block of directory entries             */
1804:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
1805:DRIVER/FatFs/source/ff.c **** 
1806:DRIVER/FatFs/source/ff.c **** static FRESULT dir_alloc (	/* FR_OK(0):succeeded, !=0:error */
1807:DRIVER/FatFs/source/ff.c **** 	DIR* dp,				/* Pointer to the directory object */
1808:DRIVER/FatFs/source/ff.c **** 	UINT n_ent				/* Number of contiguous entries to allocate */
1809:DRIVER/FatFs/source/ff.c **** )
1810:DRIVER/FatFs/source/ff.c **** {
1811:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
1812:DRIVER/FatFs/source/ff.c **** 	UINT n;
1813:DRIVER/FatFs/source/ff.c **** 	FATFS *fs = dp->obj.fs;
1814:DRIVER/FatFs/source/ff.c **** 
1815:DRIVER/FatFs/source/ff.c **** 
1816:DRIVER/FatFs/source/ff.c **** 	res = dir_sdi(dp, 0);
1817:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
1818:DRIVER/FatFs/source/ff.c **** 		n = 0;
1819:DRIVER/FatFs/source/ff.c **** 		do {
1820:DRIVER/FatFs/source/ff.c **** 			res = move_window(fs, dp->sect);
1821:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) break;
1822:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
1823:DRIVER/FatFs/source/ff.c **** 			if ((fs->fs_type == FS_EXFAT) ? (int)((dp->dir[XDIR_Type] & 0x80) == 0) : (int)(dp->dir[DIR_Name
1824:DRIVER/FatFs/source/ff.c **** #else
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 46


1825:DRIVER/FatFs/source/ff.c **** 			if (dp->dir[DIR_Name] == DDEM || dp->dir[DIR_Name] == 0) {	/* Is the entry free? */
1826:DRIVER/FatFs/source/ff.c **** #endif
1827:DRIVER/FatFs/source/ff.c **** 				if (++n == n_ent) break;	/* Is a block of contiguous free entries found? */
1828:DRIVER/FatFs/source/ff.c **** 			} else {
1829:DRIVER/FatFs/source/ff.c **** 				n = 0;				/* Not a free entry, restart to search */
1830:DRIVER/FatFs/source/ff.c **** 			}
1831:DRIVER/FatFs/source/ff.c **** 			res = dir_next(dp, 1);	/* Next entry with table stretch enabled */
1832:DRIVER/FatFs/source/ff.c **** 		} while (res == FR_OK);
1833:DRIVER/FatFs/source/ff.c **** 	}
1834:DRIVER/FatFs/source/ff.c **** 
1835:DRIVER/FatFs/source/ff.c **** 	if (res == FR_NO_FILE) res = FR_DENIED;	/* No directory entry to allocate */
1836:DRIVER/FatFs/source/ff.c **** 	return res;
1837:DRIVER/FatFs/source/ff.c **** }
1838:DRIVER/FatFs/source/ff.c **** 
1839:DRIVER/FatFs/source/ff.c **** #endif	/* !FF_FS_READONLY */
1840:DRIVER/FatFs/source/ff.c **** 
1841:DRIVER/FatFs/source/ff.c **** 
1842:DRIVER/FatFs/source/ff.c **** 
1843:DRIVER/FatFs/source/ff.c **** 
1844:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
1845:DRIVER/FatFs/source/ff.c **** /* FAT: Directory handling - Load/Store start cluster number             */
1846:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
1847:DRIVER/FatFs/source/ff.c **** 
1848:DRIVER/FatFs/source/ff.c **** static DWORD ld_clust (	/* Returns the top cluster value of the SFN entry */
1849:DRIVER/FatFs/source/ff.c **** 	FATFS* fs,			/* Pointer to the fs object */
1850:DRIVER/FatFs/source/ff.c **** 	const BYTE* dir		/* Pointer to the key entry */
1851:DRIVER/FatFs/source/ff.c **** )
1852:DRIVER/FatFs/source/ff.c **** {
 696              		.loc 1 1852 1 is_stmt 1 view -0
 697              		.cfi_startproc
 698              		@ args = 0, pretend = 0, frame = 0
 699              		@ frame_needed = 0, uses_anonymous_args = 0
 700              		.loc 1 1852 1 is_stmt 0 view .LVU235
 701 0000 70B5     		push	{r4, r5, r6, lr}
 702              	.LCFI1:
 703              		.cfi_def_cfa_offset 16
 704              		.cfi_offset 4, -16
 705              		.cfi_offset 5, -12
 706              		.cfi_offset 6, -8
 707              		.cfi_offset 14, -4
 708 0002 0646     		mov	r6, r0
 709 0004 0D46     		mov	r5, r1
1853:DRIVER/FatFs/source/ff.c **** 	DWORD cl;
 710              		.loc 1 1853 2 is_stmt 1 view .LVU236
1854:DRIVER/FatFs/source/ff.c **** 
1855:DRIVER/FatFs/source/ff.c **** 	cl = ld_word(dir + DIR_FstClusLO);
 711              		.loc 1 1855 2 view .LVU237
 712              		.loc 1 1855 7 is_stmt 0 view .LVU238
 713 0006 01F11A00 		add	r0, r1, #26
 714              	.LVL93:
 715              		.loc 1 1855 7 view .LVU239
 716 000a FFF7FEFF 		bl	ld_word
 717              	.LVL94:
1856:DRIVER/FatFs/source/ff.c **** 	if (fs->fs_type == FS_FAT32) {
 718              		.loc 1 1856 2 is_stmt 1 view .LVU240
 719              		.loc 1 1856 8 is_stmt 0 view .LVU241
 720 000e 3378     		ldrb	r3, [r6]	@ zero_extendqisi2
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 47


 721              		.loc 1 1856 5 view .LVU242
 722 0010 032B     		cmp	r3, #3
 723 0012 00D0     		beq	.L45
 724              	.LVL95:
 725              	.L42:
1857:DRIVER/FatFs/source/ff.c **** 		cl |= (DWORD)ld_word(dir + DIR_FstClusHI) << 16;
1858:DRIVER/FatFs/source/ff.c **** 	}
1859:DRIVER/FatFs/source/ff.c **** 
1860:DRIVER/FatFs/source/ff.c **** 	return cl;
1861:DRIVER/FatFs/source/ff.c **** }
 726              		.loc 1 1861 1 view .LVU243
 727 0014 70BD     		pop	{r4, r5, r6, pc}
 728              	.LVL96:
 729              	.L45:
 730              		.loc 1 1861 1 view .LVU244
 731 0016 0446     		mov	r4, r0
1857:DRIVER/FatFs/source/ff.c **** 		cl |= (DWORD)ld_word(dir + DIR_FstClusHI) << 16;
 732              		.loc 1 1857 3 is_stmt 1 view .LVU245
1857:DRIVER/FatFs/source/ff.c **** 		cl |= (DWORD)ld_word(dir + DIR_FstClusHI) << 16;
 733              		.loc 1 1857 16 is_stmt 0 view .LVU246
 734 0018 05F11400 		add	r0, r5, #20
 735              	.LVL97:
1857:DRIVER/FatFs/source/ff.c **** 		cl |= (DWORD)ld_word(dir + DIR_FstClusHI) << 16;
 736              		.loc 1 1857 16 view .LVU247
 737 001c FFF7FEFF 		bl	ld_word
 738              	.LVL98:
1857:DRIVER/FatFs/source/ff.c **** 		cl |= (DWORD)ld_word(dir + DIR_FstClusHI) << 16;
 739              		.loc 1 1857 6 view .LVU248
 740 0020 44EA0040 		orr	r0, r4, r0, lsl #16
 741              	.LVL99:
1860:DRIVER/FatFs/source/ff.c **** }
 742              		.loc 1 1860 2 is_stmt 1 view .LVU249
1860:DRIVER/FatFs/source/ff.c **** }
 743              		.loc 1 1860 9 is_stmt 0 view .LVU250
 744 0024 F6E7     		b	.L42
 745              		.cfi_endproc
 746              	.LFE20:
 748              		.section	.text.st_clust,"ax",%progbits
 749              		.align	1
 750              		.syntax unified
 751              		.thumb
 752              		.thumb_func
 754              	st_clust:
 755              	.LVL100:
 756              	.LFB21:
1862:DRIVER/FatFs/source/ff.c **** 
1863:DRIVER/FatFs/source/ff.c **** 
1864:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY
1865:DRIVER/FatFs/source/ff.c **** static void st_clust (
1866:DRIVER/FatFs/source/ff.c **** 	FATFS* fs,	/* Pointer to the fs object */
1867:DRIVER/FatFs/source/ff.c **** 	BYTE* dir,	/* Pointer to the key entry */
1868:DRIVER/FatFs/source/ff.c **** 	DWORD cl	/* Value to be set */
1869:DRIVER/FatFs/source/ff.c **** )
1870:DRIVER/FatFs/source/ff.c **** {
 757              		.loc 1 1870 1 is_stmt 1 view -0
 758              		.cfi_startproc
 759              		@ args = 0, pretend = 0, frame = 0
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 48


 760              		@ frame_needed = 0, uses_anonymous_args = 0
 761              		.loc 1 1870 1 is_stmt 0 view .LVU252
 762 0000 70B5     		push	{r4, r5, r6, lr}
 763              	.LCFI2:
 764              		.cfi_def_cfa_offset 16
 765              		.cfi_offset 4, -16
 766              		.cfi_offset 5, -12
 767              		.cfi_offset 6, -8
 768              		.cfi_offset 14, -4
 769 0002 0646     		mov	r6, r0
 770 0004 0C46     		mov	r4, r1
 771 0006 1546     		mov	r5, r2
1871:DRIVER/FatFs/source/ff.c **** 	st_word(dir + DIR_FstClusLO, (WORD)cl);
 772              		.loc 1 1871 2 is_stmt 1 view .LVU253
 773 0008 91B2     		uxth	r1, r2
 774              	.LVL101:
 775              		.loc 1 1871 2 is_stmt 0 view .LVU254
 776 000a 04F11A00 		add	r0, r4, #26
 777              	.LVL102:
 778              		.loc 1 1871 2 view .LVU255
 779 000e FFF7FEFF 		bl	st_word
 780              	.LVL103:
1872:DRIVER/FatFs/source/ff.c **** 	if (fs->fs_type == FS_FAT32) {
 781              		.loc 1 1872 2 is_stmt 1 view .LVU256
 782              		.loc 1 1872 8 is_stmt 0 view .LVU257
 783 0012 3378     		ldrb	r3, [r6]	@ zero_extendqisi2
 784              		.loc 1 1872 5 view .LVU258
 785 0014 032B     		cmp	r3, #3
 786 0016 00D0     		beq	.L49
 787              	.L46:
1873:DRIVER/FatFs/source/ff.c **** 		st_word(dir + DIR_FstClusHI, (WORD)(cl >> 16));
1874:DRIVER/FatFs/source/ff.c **** 	}
1875:DRIVER/FatFs/source/ff.c **** }
 788              		.loc 1 1875 1 view .LVU259
 789 0018 70BD     		pop	{r4, r5, r6, pc}
 790              	.LVL104:
 791              	.L49:
1873:DRIVER/FatFs/source/ff.c **** 		st_word(dir + DIR_FstClusHI, (WORD)(cl >> 16));
 792              		.loc 1 1873 3 is_stmt 1 view .LVU260
 793 001a 290C     		lsrs	r1, r5, #16
 794 001c 04F11400 		add	r0, r4, #20
 795 0020 FFF7FEFF 		bl	st_word
 796              	.LVL105:
 797              		.loc 1 1875 1 is_stmt 0 view .LVU261
 798 0024 F8E7     		b	.L46
 799              		.cfi_endproc
 800              	.LFE21:
 802              		.section	.text.pick_lfn,"ax",%progbits
 803              		.align	1
 804              		.syntax unified
 805              		.thumb
 806              		.thumb_func
 808              	pick_lfn:
 809              	.LVL106:
 810              	.LFB23:
1876:DRIVER/FatFs/source/ff.c **** #endif
1877:DRIVER/FatFs/source/ff.c **** 
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 49


1878:DRIVER/FatFs/source/ff.c **** 
1879:DRIVER/FatFs/source/ff.c **** 
1880:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN
1881:DRIVER/FatFs/source/ff.c **** /*--------------------------------------------------------*/
1882:DRIVER/FatFs/source/ff.c **** /* FAT-LFN: Compare a part of file name with an LFN entry */
1883:DRIVER/FatFs/source/ff.c **** /*--------------------------------------------------------*/
1884:DRIVER/FatFs/source/ff.c **** 
1885:DRIVER/FatFs/source/ff.c **** static int cmp_lfn (		/* 1:matched, 0:not matched */
1886:DRIVER/FatFs/source/ff.c **** 	const WCHAR* lfnbuf,	/* Pointer to the LFN working buffer to be compared */
1887:DRIVER/FatFs/source/ff.c **** 	BYTE* dir				/* Pointer to the directory entry containing the part of LFN */
1888:DRIVER/FatFs/source/ff.c **** )
1889:DRIVER/FatFs/source/ff.c **** {
1890:DRIVER/FatFs/source/ff.c **** 	UINT i, s;
1891:DRIVER/FatFs/source/ff.c **** 	WCHAR wc, uc;
1892:DRIVER/FatFs/source/ff.c **** 
1893:DRIVER/FatFs/source/ff.c **** 
1894:DRIVER/FatFs/source/ff.c **** 	if (ld_word(dir + LDIR_FstClusLO) != 0) return 0;	/* Check LDIR_FstClusLO */
1895:DRIVER/FatFs/source/ff.c **** 
1896:DRIVER/FatFs/source/ff.c **** 	i = ((dir[LDIR_Ord] & 0x3F) - 1) * 13;	/* Offset in the LFN buffer */
1897:DRIVER/FatFs/source/ff.c **** 
1898:DRIVER/FatFs/source/ff.c **** 	for (wc = 1, s = 0; s < 13; s++) {		/* Process all characters in the entry */
1899:DRIVER/FatFs/source/ff.c **** 		uc = ld_word(dir + LfnOfs[s]);		/* Pick an LFN character */
1900:DRIVER/FatFs/source/ff.c **** 		if (wc != 0) {
1901:DRIVER/FatFs/source/ff.c **** 			if (i >= FF_MAX_LFN + 1 || ff_wtoupper(uc) != ff_wtoupper(lfnbuf[i++])) {	/* Compare it */
1902:DRIVER/FatFs/source/ff.c **** 				return 0;					/* Not matched */
1903:DRIVER/FatFs/source/ff.c **** 			}
1904:DRIVER/FatFs/source/ff.c **** 			wc = uc;
1905:DRIVER/FatFs/source/ff.c **** 		} else {
1906:DRIVER/FatFs/source/ff.c **** 			if (uc != 0xFFFF) return 0;		/* Check filler */
1907:DRIVER/FatFs/source/ff.c **** 		}
1908:DRIVER/FatFs/source/ff.c **** 	}
1909:DRIVER/FatFs/source/ff.c **** 
1910:DRIVER/FatFs/source/ff.c **** 	if ((dir[LDIR_Ord] & LLEF) && wc && lfnbuf[i]) return 0;	/* Last segment matched but different len
1911:DRIVER/FatFs/source/ff.c **** 
1912:DRIVER/FatFs/source/ff.c **** 	return 1;		/* The part of LFN matched */
1913:DRIVER/FatFs/source/ff.c **** }
1914:DRIVER/FatFs/source/ff.c **** 
1915:DRIVER/FatFs/source/ff.c **** 
1916:DRIVER/FatFs/source/ff.c **** #if FF_FS_MINIMIZE <= 1 || FF_FS_RPATH >= 2 || FF_USE_LABEL || FF_FS_EXFAT
1917:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------*/
1918:DRIVER/FatFs/source/ff.c **** /* FAT-LFN: Pick a part of file name from an LFN entry */
1919:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------*/
1920:DRIVER/FatFs/source/ff.c **** 
1921:DRIVER/FatFs/source/ff.c **** static int pick_lfn (	/* 1:succeeded, 0:buffer overflow or invalid LFN entry */
1922:DRIVER/FatFs/source/ff.c **** 	WCHAR* lfnbuf,		/* Pointer to the LFN working buffer */
1923:DRIVER/FatFs/source/ff.c **** 	BYTE* dir			/* Pointer to the LFN entry */
1924:DRIVER/FatFs/source/ff.c **** )
1925:DRIVER/FatFs/source/ff.c **** {
 811              		.loc 1 1925 1 is_stmt 1 view -0
 812              		.cfi_startproc
 813              		@ args = 0, pretend = 0, frame = 0
 814              		@ frame_needed = 0, uses_anonymous_args = 0
 815              		.loc 1 1925 1 is_stmt 0 view .LVU263
 816 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 817              	.LCFI3:
 818              		.cfi_def_cfa_offset 24
 819              		.cfi_offset 4, -24
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 50


 820              		.cfi_offset 5, -20
 821              		.cfi_offset 6, -16
 822              		.cfi_offset 7, -12
 823              		.cfi_offset 8, -8
 824              		.cfi_offset 14, -4
 825 0004 8046     		mov	r8, r0
 826 0006 0E46     		mov	r6, r1
1926:DRIVER/FatFs/source/ff.c **** 	UINT i, s;
 827              		.loc 1 1926 2 is_stmt 1 view .LVU264
1927:DRIVER/FatFs/source/ff.c **** 	WCHAR wc, uc;
 828              		.loc 1 1927 2 view .LVU265
1928:DRIVER/FatFs/source/ff.c **** 
1929:DRIVER/FatFs/source/ff.c **** 
1930:DRIVER/FatFs/source/ff.c **** 	if (ld_word(dir + LDIR_FstClusLO) != 0) return 0;	/* Check LDIR_FstClusLO is 0 */
 829              		.loc 1 1930 2 view .LVU266
 830              		.loc 1 1930 6 is_stmt 0 view .LVU267
 831 0008 01F11A00 		add	r0, r1, #26
 832              	.LVL107:
 833              		.loc 1 1930 6 view .LVU268
 834 000c FFF7FEFF 		bl	ld_word
 835              	.LVL108:
 836              		.loc 1 1930 5 view .LVU269
 837 0010 58BB     		cbnz	r0, .L56
1931:DRIVER/FatFs/source/ff.c **** 
1932:DRIVER/FatFs/source/ff.c **** 	i = ((dir[LDIR_Ord] & ~LLEF) - 1) * 13;	/* Offset in the LFN buffer */
 838              		.loc 1 1932 2 is_stmt 1 view .LVU270
 839              		.loc 1 1932 11 is_stmt 0 view .LVU271
 840 0012 3578     		ldrb	r5, [r6]	@ zero_extendqisi2
 841              		.loc 1 1932 22 view .LVU272
 842 0014 25F04005 		bic	r5, r5, #64
 843              		.loc 1 1932 31 view .LVU273
 844 0018 013D     		subs	r5, r5, #1
 845              		.loc 1 1932 36 view .LVU274
 846 001a 05EB4503 		add	r3, r5, r5, lsl #1
 847              		.loc 1 1932 4 view .LVU275
 848 001e 05EB8305 		add	r5, r5, r3, lsl #2
 849              	.LVL109:
1933:DRIVER/FatFs/source/ff.c **** 
1934:DRIVER/FatFs/source/ff.c **** 	for (wc = 1, s = 0; s < 13; s++) {		/* Process all characters in the entry */
 850              		.loc 1 1934 2 is_stmt 1 view .LVU276
 851              		.loc 1 1934 10 is_stmt 0 view .LVU277
 852 0022 0127     		movs	r7, #1
 853              		.loc 1 1934 17 view .LVU278
 854 0024 0024     		movs	r4, #0
 855              		.loc 1 1934 2 view .LVU279
 856 0026 04E0     		b	.L52
 857              	.LVL110:
 858              	.L53:
1935:DRIVER/FatFs/source/ff.c **** 		uc = ld_word(dir + LfnOfs[s]);		/* Pick an LFN character */
1936:DRIVER/FatFs/source/ff.c **** 		if (wc != 0) {
1937:DRIVER/FatFs/source/ff.c **** 			if (i >= FF_MAX_LFN + 1) return 0;	/* Buffer overflow? */
1938:DRIVER/FatFs/source/ff.c **** 			lfnbuf[i++] = wc = uc;			/* Store it */
1939:DRIVER/FatFs/source/ff.c **** 		} else {
1940:DRIVER/FatFs/source/ff.c **** 			if (uc != 0xFFFF) return 0;		/* Check filler */
 859              		.loc 1 1940 4 is_stmt 1 view .LVU280
 860              		.loc 1 1940 7 is_stmt 0 view .LVU281
 861 0028 4FF6FF73 		movw	r3, #65535
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 51


 862 002c 9842     		cmp	r0, r3
 863 002e 21D1     		bne	.L58
 864              	.LVL111:
 865              	.L54:
1934:DRIVER/FatFs/source/ff.c **** 		uc = ld_word(dir + LfnOfs[s]);		/* Pick an LFN character */
 866              		.loc 1 1934 31 is_stmt 1 discriminator 2 view .LVU282
 867 0030 0134     		adds	r4, r4, #1
 868              	.LVL112:
 869              	.L52:
1934:DRIVER/FatFs/source/ff.c **** 		uc = ld_word(dir + LfnOfs[s]);		/* Pick an LFN character */
 870              		.loc 1 1934 24 discriminator 1 view .LVU283
 871 0032 0C2C     		cmp	r4, #12
 872 0034 0DD8     		bhi	.L63
1935:DRIVER/FatFs/source/ff.c **** 		uc = ld_word(dir + LfnOfs[s]);		/* Pick an LFN character */
 873              		.loc 1 1935 3 view .LVU284
1935:DRIVER/FatFs/source/ff.c **** 		uc = ld_word(dir + LfnOfs[s]);		/* Pick an LFN character */
 874              		.loc 1 1935 28 is_stmt 0 view .LVU285
 875 0036 134B     		ldr	r3, .L64
 876 0038 185D     		ldrb	r0, [r3, r4]	@ zero_extendqisi2
1935:DRIVER/FatFs/source/ff.c **** 		uc = ld_word(dir + LfnOfs[s]);		/* Pick an LFN character */
 877              		.loc 1 1935 8 view .LVU286
 878 003a 3044     		add	r0, r0, r6
 879 003c FFF7FEFF 		bl	ld_word
 880              	.LVL113:
1936:DRIVER/FatFs/source/ff.c **** 			if (i >= FF_MAX_LFN + 1) return 0;	/* Buffer overflow? */
 881              		.loc 1 1936 3 is_stmt 1 view .LVU287
1936:DRIVER/FatFs/source/ff.c **** 			if (i >= FF_MAX_LFN + 1) return 0;	/* Buffer overflow? */
 882              		.loc 1 1936 6 is_stmt 0 view .LVU288
 883 0040 002F     		cmp	r7, #0
 884 0042 F1D0     		beq	.L53
1937:DRIVER/FatFs/source/ff.c **** 			lfnbuf[i++] = wc = uc;			/* Store it */
 885              		.loc 1 1937 4 is_stmt 1 view .LVU289
1937:DRIVER/FatFs/source/ff.c **** 			lfnbuf[i++] = wc = uc;			/* Store it */
 886              		.loc 1 1937 7 is_stmt 0 view .LVU290
 887 0044 FF2D     		cmp	r5, #255
 888 0046 13D8     		bhi	.L57
1938:DRIVER/FatFs/source/ff.c **** 		} else {
 889              		.loc 1 1938 4 is_stmt 1 view .LVU291
 890              	.LVL114:
1938:DRIVER/FatFs/source/ff.c **** 		} else {
 891              		.loc 1 1938 16 is_stmt 0 view .LVU292
 892 0048 28F81500 		strh	r0, [r8, r5, lsl #1]	@ movhi
1938:DRIVER/FatFs/source/ff.c **** 		} else {
 893              		.loc 1 1938 21 view .LVU293
 894 004c 0746     		mov	r7, r0
1938:DRIVER/FatFs/source/ff.c **** 		} else {
 895              		.loc 1 1938 12 view .LVU294
 896 004e 0135     		adds	r5, r5, #1
 897              	.LVL115:
1938:DRIVER/FatFs/source/ff.c **** 		} else {
 898              		.loc 1 1938 12 view .LVU295
 899 0050 EEE7     		b	.L54
 900              	.LVL116:
 901              	.L63:
1941:DRIVER/FatFs/source/ff.c **** 		}
1942:DRIVER/FatFs/source/ff.c **** 	}
1943:DRIVER/FatFs/source/ff.c **** 
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 52


1944:DRIVER/FatFs/source/ff.c **** 	if (dir[LDIR_Ord] & LLEF && wc != 0) {	/* Put terminator if it is the last LFN part and not termin
 902              		.loc 1 1944 2 is_stmt 1 view .LVU296
 903              		.loc 1 1944 9 is_stmt 0 view .LVU297
 904 0052 3378     		ldrb	r3, [r6]	@ zero_extendqisi2
 905              		.loc 1 1944 5 view .LVU298
 906 0054 13F0400F 		tst	r3, #64
 907 0058 0ED0     		beq	.L59
 908              		.loc 1 1944 27 discriminator 1 view .LVU299
 909 005a 7FB1     		cbz	r7, .L60
1945:DRIVER/FatFs/source/ff.c **** 		if (i >= FF_MAX_LFN + 1) return 0;	/* Buffer overflow? */
 910              		.loc 1 1945 3 is_stmt 1 view .LVU300
 911              		.loc 1 1945 6 is_stmt 0 view .LVU301
 912 005c FF2D     		cmp	r5, #255
 913 005e 0FD8     		bhi	.L61
1946:DRIVER/FatFs/source/ff.c **** 		lfnbuf[i] = 0;
 914              		.loc 1 1946 3 is_stmt 1 view .LVU302
 915              		.loc 1 1946 13 is_stmt 0 view .LVU303
 916 0060 0023     		movs	r3, #0
 917 0062 28F81530 		strh	r3, [r8, r5, lsl #1]	@ movhi
1947:DRIVER/FatFs/source/ff.c **** 	}
1948:DRIVER/FatFs/source/ff.c **** 
1949:DRIVER/FatFs/source/ff.c **** 	return 1;		/* The part of LFN is valid */
 918              		.loc 1 1949 9 view .LVU304
 919 0066 0120     		movs	r0, #1
 920 0068 00E0     		b	.L50
 921              	.LVL117:
 922              	.L56:
1930:DRIVER/FatFs/source/ff.c **** 
 923              		.loc 1 1930 49 view .LVU305
 924 006a 0020     		movs	r0, #0
 925              	.L50:
1950:DRIVER/FatFs/source/ff.c **** }
 926              		.loc 1 1950 1 view .LVU306
 927 006c BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 928              	.LVL118:
 929              	.L57:
1937:DRIVER/FatFs/source/ff.c **** 			lfnbuf[i++] = wc = uc;			/* Store it */
 930              		.loc 1 1937 36 view .LVU307
 931 0070 0020     		movs	r0, #0
 932              	.LVL119:
1937:DRIVER/FatFs/source/ff.c **** 			lfnbuf[i++] = wc = uc;			/* Store it */
 933              		.loc 1 1937 36 view .LVU308
 934 0072 FBE7     		b	.L50
 935              	.LVL120:
 936              	.L58:
1940:DRIVER/FatFs/source/ff.c **** 		}
 937              		.loc 1 1940 29 view .LVU309
 938 0074 0020     		movs	r0, #0
 939              	.LVL121:
1940:DRIVER/FatFs/source/ff.c **** 		}
 940              		.loc 1 1940 29 view .LVU310
 941 0076 F9E7     		b	.L50
 942              	.LVL122:
 943              	.L59:
1949:DRIVER/FatFs/source/ff.c **** }
 944              		.loc 1 1949 9 view .LVU311
 945 0078 0120     		movs	r0, #1
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 53


 946 007a F7E7     		b	.L50
 947              	.L60:
 948 007c 0120     		movs	r0, #1
 949 007e F5E7     		b	.L50
 950              	.L61:
1945:DRIVER/FatFs/source/ff.c **** 		lfnbuf[i] = 0;
 951              		.loc 1 1945 35 view .LVU312
 952 0080 0020     		movs	r0, #0
 953 0082 F3E7     		b	.L50
 954              	.L65:
 955              		.align	2
 956              	.L64:
 957 0084 00000000 		.word	LfnOfs
 958              		.cfi_endproc
 959              	.LFE23:
 961              		.section	.text.put_lfn,"ax",%progbits
 962              		.align	1
 963              		.syntax unified
 964              		.thumb
 965              		.thumb_func
 967              	put_lfn:
 968              	.LVL123:
 969              	.LFB24:
1951:DRIVER/FatFs/source/ff.c **** #endif
1952:DRIVER/FatFs/source/ff.c **** 
1953:DRIVER/FatFs/source/ff.c **** 
1954:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY
1955:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------*/
1956:DRIVER/FatFs/source/ff.c **** /* FAT-LFN: Create an entry of LFN entries */
1957:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------*/
1958:DRIVER/FatFs/source/ff.c **** 
1959:DRIVER/FatFs/source/ff.c **** static void put_lfn (
1960:DRIVER/FatFs/source/ff.c **** 	const WCHAR* lfn,	/* Pointer to the LFN */
1961:DRIVER/FatFs/source/ff.c **** 	BYTE* dir,			/* Pointer to the LFN entry to be created */
1962:DRIVER/FatFs/source/ff.c **** 	BYTE ord,			/* LFN order (1-20) */
1963:DRIVER/FatFs/source/ff.c **** 	BYTE sum			/* Checksum of the corresponding SFN */
1964:DRIVER/FatFs/source/ff.c **** )
1965:DRIVER/FatFs/source/ff.c **** {
 970              		.loc 1 1965 1 is_stmt 1 view -0
 971              		.cfi_startproc
 972              		@ args = 0, pretend = 0, frame = 0
 973              		@ frame_needed = 0, uses_anonymous_args = 0
 974              		.loc 1 1965 1 is_stmt 0 view .LVU314
 975 0000 2DE9F843 		push	{r3, r4, r5, r6, r7, r8, r9, lr}
 976              	.LCFI4:
 977              		.cfi_def_cfa_offset 32
 978              		.cfi_offset 3, -32
 979              		.cfi_offset 4, -28
 980              		.cfi_offset 5, -24
 981              		.cfi_offset 6, -20
 982              		.cfi_offset 7, -16
 983              		.cfi_offset 8, -12
 984              		.cfi_offset 9, -8
 985              		.cfi_offset 14, -4
 986 0004 8046     		mov	r8, r0
 987 0006 0F46     		mov	r7, r1
 988 0008 9146     		mov	r9, r2
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 54


1966:DRIVER/FatFs/source/ff.c **** 	UINT i, s;
 989              		.loc 1 1966 2 is_stmt 1 view .LVU315
1967:DRIVER/FatFs/source/ff.c **** 	WCHAR wc;
 990              		.loc 1 1967 2 view .LVU316
1968:DRIVER/FatFs/source/ff.c **** 
1969:DRIVER/FatFs/source/ff.c **** 
1970:DRIVER/FatFs/source/ff.c **** 	dir[LDIR_Chksum] = sum;			/* Set checksum */
 991              		.loc 1 1970 2 view .LVU317
 992              		.loc 1 1970 19 is_stmt 0 view .LVU318
 993 000a 4B73     		strb	r3, [r1, #13]
1971:DRIVER/FatFs/source/ff.c **** 	dir[LDIR_Attr] = AM_LFN;		/* Set attribute. LFN entry */
 994              		.loc 1 1971 2 is_stmt 1 view .LVU319
 995              		.loc 1 1971 17 is_stmt 0 view .LVU320
 996 000c 0F23     		movs	r3, #15
 997              	.LVL124:
 998              		.loc 1 1971 17 view .LVU321
 999 000e CB72     		strb	r3, [r1, #11]
1972:DRIVER/FatFs/source/ff.c **** 	dir[LDIR_Type] = 0;
 1000              		.loc 1 1972 2 is_stmt 1 view .LVU322
 1001              		.loc 1 1972 17 is_stmt 0 view .LVU323
 1002 0010 0024     		movs	r4, #0
 1003 0012 0C73     		strb	r4, [r1, #12]
1973:DRIVER/FatFs/source/ff.c **** 	st_word(dir + LDIR_FstClusLO, 0);
 1004              		.loc 1 1973 2 is_stmt 1 view .LVU324
 1005 0014 2146     		mov	r1, r4
 1006              	.LVL125:
 1007              		.loc 1 1973 2 is_stmt 0 view .LVU325
 1008 0016 07F11A00 		add	r0, r7, #26
 1009              	.LVL126:
 1010              		.loc 1 1973 2 view .LVU326
 1011 001a FFF7FEFF 		bl	st_word
 1012              	.LVL127:
1974:DRIVER/FatFs/source/ff.c **** 
1975:DRIVER/FatFs/source/ff.c **** 	i = (ord - 1) * 13;				/* Get offset in the LFN working buffer */
 1013              		.loc 1 1975 2 is_stmt 1 view .LVU327
 1014              		.loc 1 1975 11 is_stmt 0 view .LVU328
 1015 001e 09F1FF36 		add	r6, r9, #-1
 1016              		.loc 1 1975 16 view .LVU329
 1017 0022 06EB4603 		add	r3, r6, r6, lsl #1
 1018              		.loc 1 1975 4 view .LVU330
 1019 0026 06EB8306 		add	r6, r6, r3, lsl #2
 1020              	.LVL128:
1976:DRIVER/FatFs/source/ff.c **** 	s = wc = 0;
 1021              		.loc 1 1976 2 is_stmt 1 view .LVU331
 1022              		.loc 1 1976 9 is_stmt 0 view .LVU332
 1023 002a 2546     		mov	r5, r4
 1024 002c 02E0     		b	.L69
 1025              	.LVL129:
 1026              	.L68:
1977:DRIVER/FatFs/source/ff.c **** 	do {
1978:DRIVER/FatFs/source/ff.c **** 		if (wc != 0xFFFF) wc = lfn[i++];	/* Get an effective character */
1979:DRIVER/FatFs/source/ff.c **** 		st_word(dir + LfnOfs[s], wc);		/* Put it */
1980:DRIVER/FatFs/source/ff.c **** 		if (wc == 0) wc = 0xFFFF;			/* Padding characters for following items */
1981:DRIVER/FatFs/source/ff.c **** 	} while (++s < 13);
 1027              		.loc 1 1981 15 is_stmt 1 view .LVU333
 1028 002e 0134     		adds	r4, r4, #1
 1029              	.LVL130:
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 55


 1030              		.loc 1 1981 15 is_stmt 0 view .LVU334
 1031 0030 0C2C     		cmp	r4, #12
 1032 0032 11D8     		bhi	.L74
 1033              	.LVL131:
 1034              	.L69:
1977:DRIVER/FatFs/source/ff.c **** 	do {
 1035              		.loc 1 1977 2 is_stmt 1 view .LVU335
1978:DRIVER/FatFs/source/ff.c **** 		st_word(dir + LfnOfs[s], wc);		/* Put it */
 1036              		.loc 1 1978 3 view .LVU336
1978:DRIVER/FatFs/source/ff.c **** 		st_word(dir + LfnOfs[s], wc);		/* Put it */
 1037              		.loc 1 1978 6 is_stmt 0 view .LVU337
 1038 0034 4FF6FF73 		movw	r3, #65535
 1039 0038 9D42     		cmp	r5, r3
 1040 003a 02D0     		beq	.L67
1978:DRIVER/FatFs/source/ff.c **** 		st_word(dir + LfnOfs[s], wc);		/* Put it */
 1041              		.loc 1 1978 21 is_stmt 1 discriminator 1 view .LVU338
 1042              	.LVL132:
1978:DRIVER/FatFs/source/ff.c **** 		st_word(dir + LfnOfs[s], wc);		/* Put it */
 1043              		.loc 1 1978 24 is_stmt 0 discriminator 1 view .LVU339
 1044 003c 38F81650 		ldrh	r5, [r8, r6, lsl #1]
 1045              	.LVL133:
1978:DRIVER/FatFs/source/ff.c **** 		st_word(dir + LfnOfs[s], wc);		/* Put it */
 1046              		.loc 1 1978 31 discriminator 1 view .LVU340
 1047 0040 0136     		adds	r6, r6, #1
 1048              	.LVL134:
 1049              	.L67:
1979:DRIVER/FatFs/source/ff.c **** 		if (wc == 0) wc = 0xFFFF;			/* Padding characters for following items */
 1050              		.loc 1 1979 3 is_stmt 1 view .LVU341
1979:DRIVER/FatFs/source/ff.c **** 		if (wc == 0) wc = 0xFFFF;			/* Padding characters for following items */
 1051              		.loc 1 1979 23 is_stmt 0 view .LVU342
 1052 0042 0C4B     		ldr	r3, .L75
 1053 0044 185D     		ldrb	r0, [r3, r4]	@ zero_extendqisi2
1979:DRIVER/FatFs/source/ff.c **** 		if (wc == 0) wc = 0xFFFF;			/* Padding characters for following items */
 1054              		.loc 1 1979 3 view .LVU343
 1055 0046 2946     		mov	r1, r5
 1056 0048 3844     		add	r0, r0, r7
 1057 004a FFF7FEFF 		bl	st_word
 1058              	.LVL135:
1980:DRIVER/FatFs/source/ff.c **** 	} while (++s < 13);
 1059              		.loc 1 1980 3 is_stmt 1 view .LVU344
1980:DRIVER/FatFs/source/ff.c **** 	} while (++s < 13);
 1060              		.loc 1 1980 6 is_stmt 0 view .LVU345
 1061 004e 002D     		cmp	r5, #0
 1062 0050 EDD1     		bne	.L68
1980:DRIVER/FatFs/source/ff.c **** 	} while (++s < 13);
 1063              		.loc 1 1980 19 view .LVU346
 1064 0052 4FF6FF75 		movw	r5, #65535
 1065              	.LVL136:
1980:DRIVER/FatFs/source/ff.c **** 	} while (++s < 13);
 1066              		.loc 1 1980 19 view .LVU347
 1067 0056 EAE7     		b	.L68
 1068              	.LVL137:
 1069              	.L74:
1982:DRIVER/FatFs/source/ff.c **** 	if (wc == 0xFFFF || !lfn[i]) ord |= LLEF;	/* Last LFN part is the start of LFN sequence */
 1070              		.loc 1 1982 2 is_stmt 1 view .LVU348
 1071              		.loc 1 1982 5 is_stmt 0 view .LVU349
 1072 0058 4FF6FF73 		movw	r3, #65535
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 56


 1073 005c 9D42     		cmp	r5, r3
 1074 005e 02D0     		beq	.L70
 1075              		.loc 1 1982 26 discriminator 2 view .LVU350
 1076 0060 38F81630 		ldrh	r3, [r8, r6, lsl #1]
 1077              		.loc 1 1982 19 discriminator 2 view .LVU351
 1078 0064 0BB9     		cbnz	r3, .L71
 1079              	.L70:
 1080              		.loc 1 1982 31 is_stmt 1 discriminator 3 view .LVU352
 1081              		.loc 1 1982 35 is_stmt 0 discriminator 3 view .LVU353
 1082 0066 49F04009 		orr	r9, r9, #64
 1083              	.LVL138:
 1084              	.L71:
1983:DRIVER/FatFs/source/ff.c **** 	dir[LDIR_Ord] = ord;			/* Set the LFN order */
 1085              		.loc 1 1983 2 is_stmt 1 view .LVU354
 1086              		.loc 1 1983 16 is_stmt 0 view .LVU355
 1087 006a 87F80090 		strb	r9, [r7]
1984:DRIVER/FatFs/source/ff.c **** }
 1088              		.loc 1 1984 1 view .LVU356
 1089 006e BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 1090              	.LVL139:
 1091              	.L76:
 1092              		.loc 1 1984 1 view .LVU357
 1093 0072 00BF     		.align	2
 1094              	.L75:
 1095 0074 00000000 		.word	LfnOfs
 1096              		.cfi_endproc
 1097              	.LFE24:
 1099              		.section	.text.sum_sfn,"ax",%progbits
 1100              		.align	1
 1101              		.syntax unified
 1102              		.thumb
 1103              		.thumb_func
 1105              	sum_sfn:
 1106              	.LVL140:
 1107              	.LFB26:
1985:DRIVER/FatFs/source/ff.c **** 
1986:DRIVER/FatFs/source/ff.c **** #endif	/* !FF_FS_READONLY */
1987:DRIVER/FatFs/source/ff.c **** #endif	/* FF_USE_LFN */
1988:DRIVER/FatFs/source/ff.c **** 
1989:DRIVER/FatFs/source/ff.c **** 
1990:DRIVER/FatFs/source/ff.c **** 
1991:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN && !FF_FS_READONLY
1992:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
1993:DRIVER/FatFs/source/ff.c **** /* FAT-LFN: Create a Numbered SFN                                        */
1994:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
1995:DRIVER/FatFs/source/ff.c **** 
1996:DRIVER/FatFs/source/ff.c **** static void gen_numname (
1997:DRIVER/FatFs/source/ff.c **** 	BYTE* dst,			/* Pointer to the buffer to store numbered SFN */
1998:DRIVER/FatFs/source/ff.c **** 	const BYTE* src,	/* Pointer to SFN in directory form */
1999:DRIVER/FatFs/source/ff.c **** 	const WCHAR* lfn,	/* Pointer to LFN */
2000:DRIVER/FatFs/source/ff.c **** 	UINT seq			/* Sequence number */
2001:DRIVER/FatFs/source/ff.c **** )
2002:DRIVER/FatFs/source/ff.c **** {
2003:DRIVER/FatFs/source/ff.c **** 	BYTE ns[8], c;
2004:DRIVER/FatFs/source/ff.c **** 	UINT i, j;
2005:DRIVER/FatFs/source/ff.c **** 	WCHAR wc;
2006:DRIVER/FatFs/source/ff.c **** 	DWORD sreg;
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 57


2007:DRIVER/FatFs/source/ff.c **** 
2008:DRIVER/FatFs/source/ff.c **** 
2009:DRIVER/FatFs/source/ff.c **** 	memcpy(dst, src, 11);	/* Prepare the SFN to be modified */
2010:DRIVER/FatFs/source/ff.c **** 
2011:DRIVER/FatFs/source/ff.c **** 	if (seq > 5) {	/* In case of many collisions, generate a hash number instead of sequential number 
2012:DRIVER/FatFs/source/ff.c **** 		sreg = seq;
2013:DRIVER/FatFs/source/ff.c **** 		while (*lfn) {	/* Create a CRC as hash value */
2014:DRIVER/FatFs/source/ff.c **** 			wc = *lfn++;
2015:DRIVER/FatFs/source/ff.c **** 			for (i = 0; i < 16; i++) {
2016:DRIVER/FatFs/source/ff.c **** 				sreg = (sreg << 1) + (wc & 1);
2017:DRIVER/FatFs/source/ff.c **** 				wc >>= 1;
2018:DRIVER/FatFs/source/ff.c **** 				if (sreg & 0x10000) sreg ^= 0x11021;
2019:DRIVER/FatFs/source/ff.c **** 			}
2020:DRIVER/FatFs/source/ff.c **** 		}
2021:DRIVER/FatFs/source/ff.c **** 		seq = (UINT)sreg;
2022:DRIVER/FatFs/source/ff.c **** 	}
2023:DRIVER/FatFs/source/ff.c **** 
2024:DRIVER/FatFs/source/ff.c **** 	/* Make suffix (~ + hexadecimal) */
2025:DRIVER/FatFs/source/ff.c **** 	i = 7;
2026:DRIVER/FatFs/source/ff.c **** 	do {
2027:DRIVER/FatFs/source/ff.c **** 		c = (BYTE)((seq % 16) + '0'); seq /= 16;
2028:DRIVER/FatFs/source/ff.c **** 		if (c > '9') c += 7;
2029:DRIVER/FatFs/source/ff.c **** 		ns[i--] = c;
2030:DRIVER/FatFs/source/ff.c **** 	} while (i && seq);
2031:DRIVER/FatFs/source/ff.c **** 	ns[i] = '~';
2032:DRIVER/FatFs/source/ff.c **** 
2033:DRIVER/FatFs/source/ff.c **** 	/* Append the suffix to the SFN body */
2034:DRIVER/FatFs/source/ff.c **** 	for (j = 0; j < i && dst[j] != ' '; j++) {	/* Find the offset to append */
2035:DRIVER/FatFs/source/ff.c **** 		if (dbc_1st(dst[j])) {	/* To avoid DBC break up */
2036:DRIVER/FatFs/source/ff.c **** 			if (j == i - 1) break;
2037:DRIVER/FatFs/source/ff.c **** 			j++;
2038:DRIVER/FatFs/source/ff.c **** 		}
2039:DRIVER/FatFs/source/ff.c **** 	}
2040:DRIVER/FatFs/source/ff.c **** 	do {	/* Append the suffix */
2041:DRIVER/FatFs/source/ff.c **** 		dst[j++] = (i < 8) ? ns[i++] : ' ';
2042:DRIVER/FatFs/source/ff.c **** 	} while (j < 8);
2043:DRIVER/FatFs/source/ff.c **** }
2044:DRIVER/FatFs/source/ff.c **** #endif	/* FF_USE_LFN && !FF_FS_READONLY */
2045:DRIVER/FatFs/source/ff.c **** 
2046:DRIVER/FatFs/source/ff.c **** 
2047:DRIVER/FatFs/source/ff.c **** 
2048:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN
2049:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
2050:DRIVER/FatFs/source/ff.c **** /* FAT-LFN: Calculate checksum of an SFN entry                           */
2051:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
2052:DRIVER/FatFs/source/ff.c **** 
2053:DRIVER/FatFs/source/ff.c **** static BYTE sum_sfn (
2054:DRIVER/FatFs/source/ff.c **** 	const BYTE* dir		/* Pointer to the SFN entry */
2055:DRIVER/FatFs/source/ff.c **** )
2056:DRIVER/FatFs/source/ff.c **** {
 1108              		.loc 1 2056 1 is_stmt 1 view -0
 1109              		.cfi_startproc
 1110              		@ args = 0, pretend = 0, frame = 0
 1111              		@ frame_needed = 0, uses_anonymous_args = 0
 1112              		@ link register save eliminated.
 1113              		.loc 1 2056 1 is_stmt 0 view .LVU359
 1114 0000 0146     		mov	r1, r0
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 58


2057:DRIVER/FatFs/source/ff.c **** 	BYTE sum = 0;
 1115              		.loc 1 2057 2 is_stmt 1 view .LVU360
 1116              	.LVL141:
2058:DRIVER/FatFs/source/ff.c **** 	UINT n = 11;
 1117              		.loc 1 2058 2 view .LVU361
 1118              		.loc 1 2058 7 is_stmt 0 view .LVU362
 1119 0002 4FF00B0C 		mov	ip, #11
2057:DRIVER/FatFs/source/ff.c **** 	BYTE sum = 0;
 1120              		.loc 1 2057 7 view .LVU363
 1121 0006 0020     		movs	r0, #0
 1122              	.LVL142:
 1123              	.L78:
2059:DRIVER/FatFs/source/ff.c **** 
2060:DRIVER/FatFs/source/ff.c **** 	do {
 1124              		.loc 1 2060 2 is_stmt 1 discriminator 1 view .LVU364
2061:DRIVER/FatFs/source/ff.c **** 		sum = (sum >> 1) + (sum << 7) + *dir++;
 1125              		.loc 1 2061 3 discriminator 1 view .LVU365
 1126              		.loc 1 2061 20 is_stmt 0 discriminator 1 view .LVU366
 1127 0008 C301     		lsls	r3, r0, #7
 1128 000a 43EA5003 		orr	r3, r3, r0, lsr #1
 1129 000e DBB2     		uxtb	r3, r3
 1130              		.loc 1 2061 35 discriminator 1 view .LVU367
 1131 0010 0A78     		ldrb	r2, [r1]	@ zero_extendqisi2
 1132 0012 0131     		adds	r1, r1, #1
 1133              	.LVL143:
 1134              		.loc 1 2061 7 discriminator 1 view .LVU368
 1135 0014 1344     		add	r3, r3, r2
 1136 0016 D8B2     		uxtb	r0, r3
 1137              	.LVL144:
2062:DRIVER/FatFs/source/ff.c **** 	} while (--n);
 1138              		.loc 1 2062 11 is_stmt 1 discriminator 1 view .LVU369
 1139              		.loc 1 2062 11 is_stmt 0 discriminator 1 view .LVU370
 1140 0018 BCF1010C 		subs	ip, ip, #1
 1141              	.LVL145:
 1142              		.loc 1 2062 11 discriminator 1 view .LVU371
 1143 001c F4D1     		bne	.L78
2063:DRIVER/FatFs/source/ff.c **** 	return sum;
 1144              		.loc 1 2063 2 is_stmt 1 view .LVU372
2064:DRIVER/FatFs/source/ff.c **** }
 1145              		.loc 1 2064 1 is_stmt 0 view .LVU373
 1146 001e 7047     		bx	lr
 1147              		.cfi_endproc
 1148              	.LFE26:
 1150              		.section	.text.get_ldnumber,"ax",%progbits
 1151              		.align	1
 1152              		.syntax unified
 1153              		.thumb
 1154              		.thumb_func
 1156              	get_ldnumber:
 1157              	.LVL146:
 1158              	.LFB34:
2065:DRIVER/FatFs/source/ff.c **** 
2066:DRIVER/FatFs/source/ff.c **** #endif	/* FF_USE_LFN */
2067:DRIVER/FatFs/source/ff.c **** 
2068:DRIVER/FatFs/source/ff.c **** 
2069:DRIVER/FatFs/source/ff.c **** 
2070:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 59


2071:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
2072:DRIVER/FatFs/source/ff.c **** /* exFAT: Checksum                                                       */
2073:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
2074:DRIVER/FatFs/source/ff.c **** 
2075:DRIVER/FatFs/source/ff.c **** static WORD xdir_sum (	/* Get checksum of the directoly entry block */
2076:DRIVER/FatFs/source/ff.c **** 	const BYTE* dir		/* Directory entry block to be calculated */
2077:DRIVER/FatFs/source/ff.c **** )
2078:DRIVER/FatFs/source/ff.c **** {
2079:DRIVER/FatFs/source/ff.c **** 	UINT i, szblk;
2080:DRIVER/FatFs/source/ff.c **** 	WORD sum;
2081:DRIVER/FatFs/source/ff.c **** 
2082:DRIVER/FatFs/source/ff.c **** 
2083:DRIVER/FatFs/source/ff.c **** 	szblk = (dir[XDIR_NumSec] + 1) * SZDIRE;	/* Number of bytes of the entry block */
2084:DRIVER/FatFs/source/ff.c **** 	for (i = sum = 0; i < szblk; i++) {
2085:DRIVER/FatFs/source/ff.c **** 		if (i == XDIR_SetSum) {	/* Skip 2-byte sum field */
2086:DRIVER/FatFs/source/ff.c **** 			i++;
2087:DRIVER/FatFs/source/ff.c **** 		} else {
2088:DRIVER/FatFs/source/ff.c **** 			sum = ((sum & 1) ? 0x8000 : 0) + (sum >> 1) + dir[i];
2089:DRIVER/FatFs/source/ff.c **** 		}
2090:DRIVER/FatFs/source/ff.c **** 	}
2091:DRIVER/FatFs/source/ff.c **** 	return sum;
2092:DRIVER/FatFs/source/ff.c **** }
2093:DRIVER/FatFs/source/ff.c **** 
2094:DRIVER/FatFs/source/ff.c **** 
2095:DRIVER/FatFs/source/ff.c **** 
2096:DRIVER/FatFs/source/ff.c **** static WORD xname_sum (	/* Get check sum (to be used as hash) of the file name */
2097:DRIVER/FatFs/source/ff.c **** 	const WCHAR* name	/* File name to be calculated */
2098:DRIVER/FatFs/source/ff.c **** )
2099:DRIVER/FatFs/source/ff.c **** {
2100:DRIVER/FatFs/source/ff.c **** 	WCHAR chr;
2101:DRIVER/FatFs/source/ff.c **** 	WORD sum = 0;
2102:DRIVER/FatFs/source/ff.c **** 
2103:DRIVER/FatFs/source/ff.c **** 
2104:DRIVER/FatFs/source/ff.c **** 	while ((chr = *name++) != 0) {
2105:DRIVER/FatFs/source/ff.c **** 		chr = (WCHAR)ff_wtoupper(chr);		/* File name needs to be up-case converted */
2106:DRIVER/FatFs/source/ff.c **** 		sum = ((sum & 1) ? 0x8000 : 0) + (sum >> 1) + (chr & 0xFF);
2107:DRIVER/FatFs/source/ff.c **** 		sum = ((sum & 1) ? 0x8000 : 0) + (sum >> 1) + (chr >> 8);
2108:DRIVER/FatFs/source/ff.c **** 	}
2109:DRIVER/FatFs/source/ff.c **** 	return sum;
2110:DRIVER/FatFs/source/ff.c **** }
2111:DRIVER/FatFs/source/ff.c **** 
2112:DRIVER/FatFs/source/ff.c **** 
2113:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY && FF_USE_MKFS
2114:DRIVER/FatFs/source/ff.c **** static DWORD xsum32 (	/* Returns 32-bit checksum */
2115:DRIVER/FatFs/source/ff.c **** 	BYTE  dat,			/* Byte to be calculated (byte-by-byte processing) */
2116:DRIVER/FatFs/source/ff.c **** 	DWORD sum			/* Previous sum value */
2117:DRIVER/FatFs/source/ff.c **** )
2118:DRIVER/FatFs/source/ff.c **** {
2119:DRIVER/FatFs/source/ff.c **** 	sum = ((sum & 1) ? 0x80000000 : 0) + (sum >> 1) + dat;
2120:DRIVER/FatFs/source/ff.c **** 	return sum;
2121:DRIVER/FatFs/source/ff.c **** }
2122:DRIVER/FatFs/source/ff.c **** #endif
2123:DRIVER/FatFs/source/ff.c **** 
2124:DRIVER/FatFs/source/ff.c **** 
2125:DRIVER/FatFs/source/ff.c **** 
2126:DRIVER/FatFs/source/ff.c **** /*------------------------------------*/
2127:DRIVER/FatFs/source/ff.c **** /* exFAT: Get a directory entry block */
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 60


2128:DRIVER/FatFs/source/ff.c **** /*------------------------------------*/
2129:DRIVER/FatFs/source/ff.c **** 
2130:DRIVER/FatFs/source/ff.c **** static FRESULT load_xdir (	/* FR_INT_ERR: invalid entry block */
2131:DRIVER/FatFs/source/ff.c **** 	DIR* dp					/* Reading directory object pointing top of the entry block to load */
2132:DRIVER/FatFs/source/ff.c **** )
2133:DRIVER/FatFs/source/ff.c **** {
2134:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
2135:DRIVER/FatFs/source/ff.c **** 	UINT i, sz_ent;
2136:DRIVER/FatFs/source/ff.c **** 	BYTE *dirb = dp->obj.fs->dirbuf;	/* Pointer to the on-memory directory entry block 85+C0+C1s */
2137:DRIVER/FatFs/source/ff.c **** 
2138:DRIVER/FatFs/source/ff.c **** 
2139:DRIVER/FatFs/source/ff.c **** 	/* Load file directory entry */
2140:DRIVER/FatFs/source/ff.c **** 	res = move_window(dp->obj.fs, dp->sect);
2141:DRIVER/FatFs/source/ff.c **** 	if (res != FR_OK) return res;
2142:DRIVER/FatFs/source/ff.c **** 	if (dp->dir[XDIR_Type] != ET_FILEDIR) return FR_INT_ERR;	/* Invalid order */
2143:DRIVER/FatFs/source/ff.c **** 	memcpy(dirb + 0 * SZDIRE, dp->dir, SZDIRE);
2144:DRIVER/FatFs/source/ff.c **** 	sz_ent = (dirb[XDIR_NumSec] + 1) * SZDIRE;
2145:DRIVER/FatFs/source/ff.c **** 	if (sz_ent < 3 * SZDIRE || sz_ent > 19 * SZDIRE) return FR_INT_ERR;
2146:DRIVER/FatFs/source/ff.c **** 
2147:DRIVER/FatFs/source/ff.c **** 	/* Load stream extension entry */
2148:DRIVER/FatFs/source/ff.c **** 	res = dir_next(dp, 0);
2149:DRIVER/FatFs/source/ff.c **** 	if (res == FR_NO_FILE) res = FR_INT_ERR;	/* It cannot be */
2150:DRIVER/FatFs/source/ff.c **** 	if (res != FR_OK) return res;
2151:DRIVER/FatFs/source/ff.c **** 	res = move_window(dp->obj.fs, dp->sect);
2152:DRIVER/FatFs/source/ff.c **** 	if (res != FR_OK) return res;
2153:DRIVER/FatFs/source/ff.c **** 	if (dp->dir[XDIR_Type] != ET_STREAM) return FR_INT_ERR;	/* Invalid order */
2154:DRIVER/FatFs/source/ff.c **** 	memcpy(dirb + 1 * SZDIRE, dp->dir, SZDIRE);
2155:DRIVER/FatFs/source/ff.c **** 	if (MAXDIRB(dirb[XDIR_NumName]) > sz_ent) return FR_INT_ERR;
2156:DRIVER/FatFs/source/ff.c **** 
2157:DRIVER/FatFs/source/ff.c **** 	/* Load file name entries */
2158:DRIVER/FatFs/source/ff.c **** 	i = 2 * SZDIRE;	/* Name offset to load */
2159:DRIVER/FatFs/source/ff.c **** 	do {
2160:DRIVER/FatFs/source/ff.c **** 		res = dir_next(dp, 0);
2161:DRIVER/FatFs/source/ff.c **** 		if (res == FR_NO_FILE) res = FR_INT_ERR;	/* It cannot be */
2162:DRIVER/FatFs/source/ff.c **** 		if (res != FR_OK) return res;
2163:DRIVER/FatFs/source/ff.c **** 		res = move_window(dp->obj.fs, dp->sect);
2164:DRIVER/FatFs/source/ff.c **** 		if (res != FR_OK) return res;
2165:DRIVER/FatFs/source/ff.c **** 		if (dp->dir[XDIR_Type] != ET_FILENAME) return FR_INT_ERR;	/* Invalid order */
2166:DRIVER/FatFs/source/ff.c **** 		if (i < MAXDIRB(FF_MAX_LFN)) memcpy(dirb + i, dp->dir, SZDIRE);
2167:DRIVER/FatFs/source/ff.c **** 	} while ((i += SZDIRE) < sz_ent);
2168:DRIVER/FatFs/source/ff.c **** 
2169:DRIVER/FatFs/source/ff.c **** 	/* Sanity check (do it for only accessible object) */
2170:DRIVER/FatFs/source/ff.c **** 	if (i <= MAXDIRB(FF_MAX_LFN)) {
2171:DRIVER/FatFs/source/ff.c **** 		if (xdir_sum(dirb) != ld_word(dirb + XDIR_SetSum)) return FR_INT_ERR;
2172:DRIVER/FatFs/source/ff.c **** 	}
2173:DRIVER/FatFs/source/ff.c **** 	return FR_OK;
2174:DRIVER/FatFs/source/ff.c **** }
2175:DRIVER/FatFs/source/ff.c **** 
2176:DRIVER/FatFs/source/ff.c **** 
2177:DRIVER/FatFs/source/ff.c **** /*------------------------------------------------------------------*/
2178:DRIVER/FatFs/source/ff.c **** /* exFAT: Initialize object allocation info with loaded entry block */
2179:DRIVER/FatFs/source/ff.c **** /*------------------------------------------------------------------*/
2180:DRIVER/FatFs/source/ff.c **** 
2181:DRIVER/FatFs/source/ff.c **** static void init_alloc_info (
2182:DRIVER/FatFs/source/ff.c **** 	FATFS* fs,		/* Filesystem object */
2183:DRIVER/FatFs/source/ff.c **** 	FFOBJID* obj	/* Object allocation information to be initialized */
2184:DRIVER/FatFs/source/ff.c **** )
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 61


2185:DRIVER/FatFs/source/ff.c **** {
2186:DRIVER/FatFs/source/ff.c **** 	obj->sclust = ld_dword(fs->dirbuf + XDIR_FstClus);		/* Start cluster */
2187:DRIVER/FatFs/source/ff.c **** 	obj->objsize = ld_qword(fs->dirbuf + XDIR_FileSize);	/* Size */
2188:DRIVER/FatFs/source/ff.c **** 	obj->stat = fs->dirbuf[XDIR_GenFlags] & 2;				/* Allocation status */
2189:DRIVER/FatFs/source/ff.c **** 	obj->n_frag = 0;										/* No last fragment info */
2190:DRIVER/FatFs/source/ff.c **** }
2191:DRIVER/FatFs/source/ff.c **** 
2192:DRIVER/FatFs/source/ff.c **** 
2193:DRIVER/FatFs/source/ff.c **** 
2194:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY || FF_FS_RPATH != 0
2195:DRIVER/FatFs/source/ff.c **** /*------------------------------------------------*/
2196:DRIVER/FatFs/source/ff.c **** /* exFAT: Load the object's directory entry block */
2197:DRIVER/FatFs/source/ff.c **** /*------------------------------------------------*/
2198:DRIVER/FatFs/source/ff.c **** 
2199:DRIVER/FatFs/source/ff.c **** static FRESULT load_obj_xdir (
2200:DRIVER/FatFs/source/ff.c **** 	DIR* dp,			/* Blank directory object to be used to access containing directory */
2201:DRIVER/FatFs/source/ff.c **** 	const FFOBJID* obj	/* Object with its containing directory information */
2202:DRIVER/FatFs/source/ff.c **** )
2203:DRIVER/FatFs/source/ff.c **** {
2204:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
2205:DRIVER/FatFs/source/ff.c **** 
2206:DRIVER/FatFs/source/ff.c **** 	/* Open object containing directory */
2207:DRIVER/FatFs/source/ff.c **** 	dp->obj.fs = obj->fs;
2208:DRIVER/FatFs/source/ff.c **** 	dp->obj.sclust = obj->c_scl;
2209:DRIVER/FatFs/source/ff.c **** 	dp->obj.stat = (BYTE)obj->c_size;
2210:DRIVER/FatFs/source/ff.c **** 	dp->obj.objsize = obj->c_size & 0xFFFFFF00;
2211:DRIVER/FatFs/source/ff.c **** 	dp->obj.n_frag = 0;
2212:DRIVER/FatFs/source/ff.c **** 	dp->blk_ofs = obj->c_ofs;
2213:DRIVER/FatFs/source/ff.c **** 
2214:DRIVER/FatFs/source/ff.c **** 	res = dir_sdi(dp, dp->blk_ofs);	/* Goto object's entry block */
2215:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
2216:DRIVER/FatFs/source/ff.c **** 		res = load_xdir(dp);		/* Load the object's entry block */
2217:DRIVER/FatFs/source/ff.c **** 	}
2218:DRIVER/FatFs/source/ff.c **** 	return res;
2219:DRIVER/FatFs/source/ff.c **** }
2220:DRIVER/FatFs/source/ff.c **** #endif
2221:DRIVER/FatFs/source/ff.c **** 
2222:DRIVER/FatFs/source/ff.c **** 
2223:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY
2224:DRIVER/FatFs/source/ff.c **** /*----------------------------------------*/
2225:DRIVER/FatFs/source/ff.c **** /* exFAT: Store the directory entry block */
2226:DRIVER/FatFs/source/ff.c **** /*----------------------------------------*/
2227:DRIVER/FatFs/source/ff.c **** 
2228:DRIVER/FatFs/source/ff.c **** static FRESULT store_xdir (
2229:DRIVER/FatFs/source/ff.c **** 	DIR* dp				/* Pointer to the directory object */
2230:DRIVER/FatFs/source/ff.c **** )
2231:DRIVER/FatFs/source/ff.c **** {
2232:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
2233:DRIVER/FatFs/source/ff.c **** 	UINT nent;
2234:DRIVER/FatFs/source/ff.c **** 	BYTE *dirb = dp->obj.fs->dirbuf;	/* Pointer to the directory entry block 85+C0+C1s */
2235:DRIVER/FatFs/source/ff.c **** 
2236:DRIVER/FatFs/source/ff.c **** 	/* Create set sum */
2237:DRIVER/FatFs/source/ff.c **** 	st_word(dirb + XDIR_SetSum, xdir_sum(dirb));
2238:DRIVER/FatFs/source/ff.c **** 	nent = dirb[XDIR_NumSec] + 1;
2239:DRIVER/FatFs/source/ff.c **** 
2240:DRIVER/FatFs/source/ff.c **** 	/* Store the directory entry block to the directory */
2241:DRIVER/FatFs/source/ff.c **** 	res = dir_sdi(dp, dp->blk_ofs);
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 62


2242:DRIVER/FatFs/source/ff.c **** 	while (res == FR_OK) {
2243:DRIVER/FatFs/source/ff.c **** 		res = move_window(dp->obj.fs, dp->sect);
2244:DRIVER/FatFs/source/ff.c **** 		if (res != FR_OK) break;
2245:DRIVER/FatFs/source/ff.c **** 		memcpy(dp->dir, dirb, SZDIRE);
2246:DRIVER/FatFs/source/ff.c **** 		dp->obj.fs->wflag = 1;
2247:DRIVER/FatFs/source/ff.c **** 		if (--nent == 0) break;
2248:DRIVER/FatFs/source/ff.c **** 		dirb += SZDIRE;
2249:DRIVER/FatFs/source/ff.c **** 		res = dir_next(dp, 0);
2250:DRIVER/FatFs/source/ff.c **** 	}
2251:DRIVER/FatFs/source/ff.c **** 	return (res == FR_OK || res == FR_DISK_ERR) ? res : FR_INT_ERR;
2252:DRIVER/FatFs/source/ff.c **** }
2253:DRIVER/FatFs/source/ff.c **** 
2254:DRIVER/FatFs/source/ff.c **** 
2255:DRIVER/FatFs/source/ff.c **** 
2256:DRIVER/FatFs/source/ff.c **** /*-------------------------------------------*/
2257:DRIVER/FatFs/source/ff.c **** /* exFAT: Create a new directory entry block */
2258:DRIVER/FatFs/source/ff.c **** /*-------------------------------------------*/
2259:DRIVER/FatFs/source/ff.c **** 
2260:DRIVER/FatFs/source/ff.c **** static void create_xdir (
2261:DRIVER/FatFs/source/ff.c **** 	BYTE* dirb,			/* Pointer to the directory entry block buffer */
2262:DRIVER/FatFs/source/ff.c **** 	const WCHAR* lfn	/* Pointer to the object name */
2263:DRIVER/FatFs/source/ff.c **** )
2264:DRIVER/FatFs/source/ff.c **** {
2265:DRIVER/FatFs/source/ff.c **** 	UINT i;
2266:DRIVER/FatFs/source/ff.c **** 	BYTE nc1, nlen;
2267:DRIVER/FatFs/source/ff.c **** 	WCHAR wc;
2268:DRIVER/FatFs/source/ff.c **** 
2269:DRIVER/FatFs/source/ff.c **** 
2270:DRIVER/FatFs/source/ff.c **** 	/* Create file-directory and stream-extension entry */
2271:DRIVER/FatFs/source/ff.c **** 	memset(dirb, 0, 2 * SZDIRE);
2272:DRIVER/FatFs/source/ff.c **** 	dirb[0 * SZDIRE + XDIR_Type] = ET_FILEDIR;
2273:DRIVER/FatFs/source/ff.c **** 	dirb[1 * SZDIRE + XDIR_Type] = ET_STREAM;
2274:DRIVER/FatFs/source/ff.c **** 
2275:DRIVER/FatFs/source/ff.c **** 	/* Create file-name entries */
2276:DRIVER/FatFs/source/ff.c **** 	i = SZDIRE * 2;	/* Top of file_name entries */
2277:DRIVER/FatFs/source/ff.c **** 	nlen = nc1 = 0; wc = 1;
2278:DRIVER/FatFs/source/ff.c **** 	do {
2279:DRIVER/FatFs/source/ff.c **** 		dirb[i++] = ET_FILENAME; dirb[i++] = 0;
2280:DRIVER/FatFs/source/ff.c **** 		do {	/* Fill name field */
2281:DRIVER/FatFs/source/ff.c **** 			if (wc != 0 && (wc = lfn[nlen]) != 0) nlen++;	/* Get a character if exist */
2282:DRIVER/FatFs/source/ff.c **** 			st_word(dirb + i, wc); 	/* Store it */
2283:DRIVER/FatFs/source/ff.c **** 			i += 2;
2284:DRIVER/FatFs/source/ff.c **** 		} while (i % SZDIRE != 0);
2285:DRIVER/FatFs/source/ff.c **** 		nc1++;
2286:DRIVER/FatFs/source/ff.c **** 	} while (lfn[nlen]);	/* Fill next entry if any char follows */
2287:DRIVER/FatFs/source/ff.c **** 
2288:DRIVER/FatFs/source/ff.c **** 	dirb[XDIR_NumName] = nlen;		/* Set name length */
2289:DRIVER/FatFs/source/ff.c **** 	dirb[XDIR_NumSec] = 1 + nc1;	/* Set secondary count (C0 + C1s) */
2290:DRIVER/FatFs/source/ff.c **** 	st_word(dirb + XDIR_NameHash, xname_sum(lfn));	/* Set name hash */
2291:DRIVER/FatFs/source/ff.c **** }
2292:DRIVER/FatFs/source/ff.c **** 
2293:DRIVER/FatFs/source/ff.c **** #endif	/* !FF_FS_READONLY */
2294:DRIVER/FatFs/source/ff.c **** #endif	/* FF_FS_EXFAT */
2295:DRIVER/FatFs/source/ff.c **** 
2296:DRIVER/FatFs/source/ff.c **** 
2297:DRIVER/FatFs/source/ff.c **** 
2298:DRIVER/FatFs/source/ff.c **** #if FF_FS_MINIMIZE <= 1 || FF_FS_RPATH >= 2 || FF_USE_LABEL || FF_FS_EXFAT
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 63


2299:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
2300:DRIVER/FatFs/source/ff.c **** /* Read an object from the directory                                     */
2301:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
2302:DRIVER/FatFs/source/ff.c **** 
2303:DRIVER/FatFs/source/ff.c **** #define DIR_READ_FILE(dp) dir_read(dp, 0)
2304:DRIVER/FatFs/source/ff.c **** #define DIR_READ_LABEL(dp) dir_read(dp, 1)
2305:DRIVER/FatFs/source/ff.c **** 
2306:DRIVER/FatFs/source/ff.c **** static FRESULT dir_read (
2307:DRIVER/FatFs/source/ff.c **** 	DIR* dp,		/* Pointer to the directory object */
2308:DRIVER/FatFs/source/ff.c **** 	int vol			/* Filtered by 0:file/directory or 1:volume label */
2309:DRIVER/FatFs/source/ff.c **** )
2310:DRIVER/FatFs/source/ff.c **** {
2311:DRIVER/FatFs/source/ff.c **** 	FRESULT res = FR_NO_FILE;
2312:DRIVER/FatFs/source/ff.c **** 	FATFS *fs = dp->obj.fs;
2313:DRIVER/FatFs/source/ff.c **** 	BYTE attr, b;
2314:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN
2315:DRIVER/FatFs/source/ff.c **** 	BYTE ord = 0xFF, sum = 0xFF;
2316:DRIVER/FatFs/source/ff.c **** #endif
2317:DRIVER/FatFs/source/ff.c **** 
2318:DRIVER/FatFs/source/ff.c **** 	while (dp->sect) {
2319:DRIVER/FatFs/source/ff.c **** 		res = move_window(fs, dp->sect);
2320:DRIVER/FatFs/source/ff.c **** 		if (res != FR_OK) break;
2321:DRIVER/FatFs/source/ff.c **** 		b = dp->dir[DIR_Name];	/* Test for the entry type */
2322:DRIVER/FatFs/source/ff.c **** 		if (b == 0) {
2323:DRIVER/FatFs/source/ff.c **** 			res = FR_NO_FILE; break; /* Reached to end of the directory */
2324:DRIVER/FatFs/source/ff.c **** 		}
2325:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
2326:DRIVER/FatFs/source/ff.c **** 		if (fs->fs_type == FS_EXFAT) {	/* On the exFAT volume */
2327:DRIVER/FatFs/source/ff.c **** 			if (FF_USE_LABEL && vol) {
2328:DRIVER/FatFs/source/ff.c **** 				if (b == ET_VLABEL) break;	/* Volume label entry? */
2329:DRIVER/FatFs/source/ff.c **** 			} else {
2330:DRIVER/FatFs/source/ff.c **** 				if (b == ET_FILEDIR) {		/* Start of the file entry block? */
2331:DRIVER/FatFs/source/ff.c **** 					dp->blk_ofs = dp->dptr;	/* Get location of the block */
2332:DRIVER/FatFs/source/ff.c **** 					res = load_xdir(dp);	/* Load the entry block */
2333:DRIVER/FatFs/source/ff.c **** 					if (res == FR_OK) {
2334:DRIVER/FatFs/source/ff.c **** 						dp->obj.attr = fs->dirbuf[XDIR_Attr] & AM_MASK;	/* Get attribute */
2335:DRIVER/FatFs/source/ff.c **** 					}
2336:DRIVER/FatFs/source/ff.c **** 					break;
2337:DRIVER/FatFs/source/ff.c **** 				}
2338:DRIVER/FatFs/source/ff.c **** 			}
2339:DRIVER/FatFs/source/ff.c **** 		} else
2340:DRIVER/FatFs/source/ff.c **** #endif
2341:DRIVER/FatFs/source/ff.c **** 		{	/* On the FAT/FAT32 volume */
2342:DRIVER/FatFs/source/ff.c **** 			dp->obj.attr = attr = dp->dir[DIR_Attr] & AM_MASK;	/* Get attribute */
2343:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN		/* LFN configuration */
2344:DRIVER/FatFs/source/ff.c **** 			if (b == DDEM || b == '.' || (int)((attr & ~AM_ARC) == AM_VOL) != vol) {	/* An entry without val
2345:DRIVER/FatFs/source/ff.c **** 				ord = 0xFF;
2346:DRIVER/FatFs/source/ff.c **** 			} else {
2347:DRIVER/FatFs/source/ff.c **** 				if (attr == AM_LFN) {	/* An LFN entry is found */
2348:DRIVER/FatFs/source/ff.c **** 					if (b & LLEF) {		/* Is it start of an LFN sequence? */
2349:DRIVER/FatFs/source/ff.c **** 						sum = dp->dir[LDIR_Chksum];
2350:DRIVER/FatFs/source/ff.c **** 						b &= (BYTE)~LLEF; ord = b;
2351:DRIVER/FatFs/source/ff.c **** 						dp->blk_ofs = dp->dptr;
2352:DRIVER/FatFs/source/ff.c **** 					}
2353:DRIVER/FatFs/source/ff.c **** 					/* Check LFN validity and capture it */
2354:DRIVER/FatFs/source/ff.c **** 					ord = (b == ord && sum == dp->dir[LDIR_Chksum] && pick_lfn(fs->lfnbuf, dp->dir)) ? ord - 1 : 0
2355:DRIVER/FatFs/source/ff.c **** 				} else {				/* An SFN entry is found */
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 64


2356:DRIVER/FatFs/source/ff.c **** 					if (ord != 0 || sum != sum_sfn(dp->dir)) {	/* Is there a valid LFN? */
2357:DRIVER/FatFs/source/ff.c **** 						dp->blk_ofs = 0xFFFFFFFF;	/* It has no LFN. */
2358:DRIVER/FatFs/source/ff.c **** 					}
2359:DRIVER/FatFs/source/ff.c **** 					break;
2360:DRIVER/FatFs/source/ff.c **** 				}
2361:DRIVER/FatFs/source/ff.c **** 			}
2362:DRIVER/FatFs/source/ff.c **** #else		/* Non LFN configuration */
2363:DRIVER/FatFs/source/ff.c **** 			if (b != DDEM && b != '.' && attr != AM_LFN && (int)((attr & ~AM_ARC) == AM_VOL) == vol) {	/* Is
2364:DRIVER/FatFs/source/ff.c **** 				break;
2365:DRIVER/FatFs/source/ff.c **** 			}
2366:DRIVER/FatFs/source/ff.c **** #endif
2367:DRIVER/FatFs/source/ff.c **** 		}
2368:DRIVER/FatFs/source/ff.c **** 		res = dir_next(dp, 0);		/* Next entry */
2369:DRIVER/FatFs/source/ff.c **** 		if (res != FR_OK) break;
2370:DRIVER/FatFs/source/ff.c **** 	}
2371:DRIVER/FatFs/source/ff.c **** 
2372:DRIVER/FatFs/source/ff.c **** 	if (res != FR_OK) dp->sect = 0;		/* Terminate the read operation on error or EOT */
2373:DRIVER/FatFs/source/ff.c **** 	return res;
2374:DRIVER/FatFs/source/ff.c **** }
2375:DRIVER/FatFs/source/ff.c **** 
2376:DRIVER/FatFs/source/ff.c **** #endif	/* FF_FS_MINIMIZE <= 1 || FF_USE_LABEL || FF_FS_RPATH >= 2 */
2377:DRIVER/FatFs/source/ff.c **** 
2378:DRIVER/FatFs/source/ff.c **** 
2379:DRIVER/FatFs/source/ff.c **** 
2380:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
2381:DRIVER/FatFs/source/ff.c **** /* Directory handling - Find an object in the directory                  */
2382:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
2383:DRIVER/FatFs/source/ff.c **** 
2384:DRIVER/FatFs/source/ff.c **** static FRESULT dir_find (	/* FR_OK(0):succeeded, !=0:error */
2385:DRIVER/FatFs/source/ff.c **** 	DIR* dp					/* Pointer to the directory object with the file name */
2386:DRIVER/FatFs/source/ff.c **** )
2387:DRIVER/FatFs/source/ff.c **** {
2388:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
2389:DRIVER/FatFs/source/ff.c **** 	FATFS *fs = dp->obj.fs;
2390:DRIVER/FatFs/source/ff.c **** 	BYTE c;
2391:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN
2392:DRIVER/FatFs/source/ff.c **** 	BYTE a, ord, sum;
2393:DRIVER/FatFs/source/ff.c **** #endif
2394:DRIVER/FatFs/source/ff.c **** 
2395:DRIVER/FatFs/source/ff.c **** 	res = dir_sdi(dp, 0);			/* Rewind directory object */
2396:DRIVER/FatFs/source/ff.c **** 	if (res != FR_OK) return res;
2397:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
2398:DRIVER/FatFs/source/ff.c **** 	if (fs->fs_type == FS_EXFAT) {	/* On the exFAT volume */
2399:DRIVER/FatFs/source/ff.c **** 		BYTE nc;
2400:DRIVER/FatFs/source/ff.c **** 		UINT di, ni;
2401:DRIVER/FatFs/source/ff.c **** 		WORD hash = xname_sum(fs->lfnbuf);		/* Hash value of the name to find */
2402:DRIVER/FatFs/source/ff.c **** 
2403:DRIVER/FatFs/source/ff.c **** 		while ((res = DIR_READ_FILE(dp)) == FR_OK) {	/* Read an item */
2404:DRIVER/FatFs/source/ff.c **** #if FF_MAX_LFN < 255
2405:DRIVER/FatFs/source/ff.c **** 			if (fs->dirbuf[XDIR_NumName] > FF_MAX_LFN) continue;		/* Skip comparison if inaccessible object 
2406:DRIVER/FatFs/source/ff.c **** #endif
2407:DRIVER/FatFs/source/ff.c **** 			if (ld_word(fs->dirbuf + XDIR_NameHash) != hash) continue;	/* Skip comparison if hash mismatched
2408:DRIVER/FatFs/source/ff.c **** 			for (nc = fs->dirbuf[XDIR_NumName], di = SZDIRE * 2, ni = 0; nc; nc--, di += 2, ni++) {	/* Compa
2409:DRIVER/FatFs/source/ff.c **** 				if ((di % SZDIRE) == 0) di += 2;
2410:DRIVER/FatFs/source/ff.c **** 				if (ff_wtoupper(ld_word(fs->dirbuf + di)) != ff_wtoupper(fs->lfnbuf[ni])) break;
2411:DRIVER/FatFs/source/ff.c **** 			}
2412:DRIVER/FatFs/source/ff.c **** 			if (nc == 0 && !fs->lfnbuf[ni]) break;	/* Name matched? */
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 65


2413:DRIVER/FatFs/source/ff.c **** 		}
2414:DRIVER/FatFs/source/ff.c **** 		return res;
2415:DRIVER/FatFs/source/ff.c **** 	}
2416:DRIVER/FatFs/source/ff.c **** #endif
2417:DRIVER/FatFs/source/ff.c **** 	/* On the FAT/FAT32 volume */
2418:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN
2419:DRIVER/FatFs/source/ff.c **** 	ord = sum = 0xFF; dp->blk_ofs = 0xFFFFFFFF;	/* Reset LFN sequence */
2420:DRIVER/FatFs/source/ff.c **** #endif
2421:DRIVER/FatFs/source/ff.c **** 	do {
2422:DRIVER/FatFs/source/ff.c **** 		res = move_window(fs, dp->sect);
2423:DRIVER/FatFs/source/ff.c **** 		if (res != FR_OK) break;
2424:DRIVER/FatFs/source/ff.c **** 		c = dp->dir[DIR_Name];
2425:DRIVER/FatFs/source/ff.c **** 		if (c == 0) { res = FR_NO_FILE; break; }	/* Reached to end of table */
2426:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN		/* LFN configuration */
2427:DRIVER/FatFs/source/ff.c **** 		dp->obj.attr = a = dp->dir[DIR_Attr] & AM_MASK;
2428:DRIVER/FatFs/source/ff.c **** 		if (c == DDEM || ((a & AM_VOL) && a != AM_LFN)) {	/* An entry without valid data */
2429:DRIVER/FatFs/source/ff.c **** 			ord = 0xFF; dp->blk_ofs = 0xFFFFFFFF;	/* Reset LFN sequence */
2430:DRIVER/FatFs/source/ff.c **** 		} else {
2431:DRIVER/FatFs/source/ff.c **** 			if (a == AM_LFN) {			/* An LFN entry is found */
2432:DRIVER/FatFs/source/ff.c **** 				if (!(dp->fn[NSFLAG] & NS_NOLFN)) {
2433:DRIVER/FatFs/source/ff.c **** 					if (c & LLEF) {		/* Is it start of LFN sequence? */
2434:DRIVER/FatFs/source/ff.c **** 						sum = dp->dir[LDIR_Chksum];
2435:DRIVER/FatFs/source/ff.c **** 						c &= (BYTE)~LLEF; ord = c;	/* LFN start order */
2436:DRIVER/FatFs/source/ff.c **** 						dp->blk_ofs = dp->dptr;	/* Start offset of LFN */
2437:DRIVER/FatFs/source/ff.c **** 					}
2438:DRIVER/FatFs/source/ff.c **** 					/* Check validity of the LFN entry and compare it with given name */
2439:DRIVER/FatFs/source/ff.c **** 					ord = (c == ord && sum == dp->dir[LDIR_Chksum] && cmp_lfn(fs->lfnbuf, dp->dir)) ? ord - 1 : 0x
2440:DRIVER/FatFs/source/ff.c **** 				}
2441:DRIVER/FatFs/source/ff.c **** 			} else {					/* An SFN entry is found */
2442:DRIVER/FatFs/source/ff.c **** 				if (ord == 0 && sum == sum_sfn(dp->dir)) break;	/* LFN matched? */
2443:DRIVER/FatFs/source/ff.c **** 				if (!(dp->fn[NSFLAG] & NS_LOSS) && !memcmp(dp->dir, dp->fn, 11)) break;	/* SFN matched? */
2444:DRIVER/FatFs/source/ff.c **** 				ord = 0xFF; dp->blk_ofs = 0xFFFFFFFF;	/* Reset LFN sequence */
2445:DRIVER/FatFs/source/ff.c **** 			}
2446:DRIVER/FatFs/source/ff.c **** 		}
2447:DRIVER/FatFs/source/ff.c **** #else		/* Non LFN configuration */
2448:DRIVER/FatFs/source/ff.c **** 		dp->obj.attr = dp->dir[DIR_Attr] & AM_MASK;
2449:DRIVER/FatFs/source/ff.c **** 		if (!(dp->dir[DIR_Attr] & AM_VOL) && !memcmp(dp->dir, dp->fn, 11)) break;	/* Is it a valid entry?
2450:DRIVER/FatFs/source/ff.c **** #endif
2451:DRIVER/FatFs/source/ff.c **** 		res = dir_next(dp, 0);	/* Next entry */
2452:DRIVER/FatFs/source/ff.c **** 	} while (res == FR_OK);
2453:DRIVER/FatFs/source/ff.c **** 
2454:DRIVER/FatFs/source/ff.c **** 	return res;
2455:DRIVER/FatFs/source/ff.c **** }
2456:DRIVER/FatFs/source/ff.c **** 
2457:DRIVER/FatFs/source/ff.c **** 
2458:DRIVER/FatFs/source/ff.c **** 
2459:DRIVER/FatFs/source/ff.c **** 
2460:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY
2461:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
2462:DRIVER/FatFs/source/ff.c **** /* Register an object to the directory                                   */
2463:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
2464:DRIVER/FatFs/source/ff.c **** 
2465:DRIVER/FatFs/source/ff.c **** static FRESULT dir_register (	/* FR_OK:succeeded, FR_DENIED:no free entry or too many SFN collision
2466:DRIVER/FatFs/source/ff.c **** 	DIR* dp						/* Target directory with object name to be created */
2467:DRIVER/FatFs/source/ff.c **** )
2468:DRIVER/FatFs/source/ff.c **** {
2469:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 66


2470:DRIVER/FatFs/source/ff.c **** 	FATFS *fs = dp->obj.fs;
2471:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN		/* LFN configuration */
2472:DRIVER/FatFs/source/ff.c **** 	UINT n, len, n_ent;
2473:DRIVER/FatFs/source/ff.c **** 	BYTE sn[12], sum;
2474:DRIVER/FatFs/source/ff.c **** 
2475:DRIVER/FatFs/source/ff.c **** 
2476:DRIVER/FatFs/source/ff.c **** 	if (dp->fn[NSFLAG] & (NS_DOT | NS_NONAME)) return FR_INVALID_NAME;	/* Check name validity */
2477:DRIVER/FatFs/source/ff.c **** 	for (len = 0; fs->lfnbuf[len]; len++) ;	/* Get lfn length */
2478:DRIVER/FatFs/source/ff.c **** 
2479:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
2480:DRIVER/FatFs/source/ff.c **** 	if (fs->fs_type == FS_EXFAT) {	/* On the exFAT volume */
2481:DRIVER/FatFs/source/ff.c **** 		n_ent = (len + 14) / 15 + 2;	/* Number of entries to allocate (85+C0+C1s) */
2482:DRIVER/FatFs/source/ff.c **** 		res = dir_alloc(dp, n_ent);		/* Allocate directory entries */
2483:DRIVER/FatFs/source/ff.c **** 		if (res != FR_OK) return res;
2484:DRIVER/FatFs/source/ff.c **** 		dp->blk_ofs = dp->dptr - SZDIRE * (n_ent - 1);	/* Set the allocated entry block offset */
2485:DRIVER/FatFs/source/ff.c **** 
2486:DRIVER/FatFs/source/ff.c **** 		if (dp->obj.stat & 4) {			/* Has the directory been stretched by new allocation? */
2487:DRIVER/FatFs/source/ff.c **** 			dp->obj.stat &= ~4;
2488:DRIVER/FatFs/source/ff.c **** 			res = fill_first_frag(&dp->obj);	/* Fill the first fragment on the FAT if needed */
2489:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) return res;
2490:DRIVER/FatFs/source/ff.c **** 			res = fill_last_frag(&dp->obj, dp->clust, 0xFFFFFFFF);	/* Fill the last fragment on the FAT if n
2491:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) return res;
2492:DRIVER/FatFs/source/ff.c **** 			if (dp->obj.sclust != 0) {		/* Is it a sub-directory? */
2493:DRIVER/FatFs/source/ff.c **** 				DIR dj;
2494:DRIVER/FatFs/source/ff.c **** 
2495:DRIVER/FatFs/source/ff.c **** 				res = load_obj_xdir(&dj, &dp->obj);	/* Load the object status */
2496:DRIVER/FatFs/source/ff.c **** 				if (res != FR_OK) return res;
2497:DRIVER/FatFs/source/ff.c **** 				dp->obj.objsize += (DWORD)fs->csize * SS(fs);		/* Increase the directory size by cluster size *
2498:DRIVER/FatFs/source/ff.c **** 				st_qword(fs->dirbuf + XDIR_FileSize, dp->obj.objsize);
2499:DRIVER/FatFs/source/ff.c **** 				st_qword(fs->dirbuf + XDIR_ValidFileSize, dp->obj.objsize);
2500:DRIVER/FatFs/source/ff.c **** 				fs->dirbuf[XDIR_GenFlags] = dp->obj.stat | 1;		/* Update the allocation status */
2501:DRIVER/FatFs/source/ff.c **** 				res = store_xdir(&dj);				/* Store the object status */
2502:DRIVER/FatFs/source/ff.c **** 				if (res != FR_OK) return res;
2503:DRIVER/FatFs/source/ff.c **** 			}
2504:DRIVER/FatFs/source/ff.c **** 		}
2505:DRIVER/FatFs/source/ff.c **** 
2506:DRIVER/FatFs/source/ff.c **** 		create_xdir(fs->dirbuf, fs->lfnbuf);	/* Create on-memory directory block to be written later */
2507:DRIVER/FatFs/source/ff.c **** 		return FR_OK;
2508:DRIVER/FatFs/source/ff.c **** 	}
2509:DRIVER/FatFs/source/ff.c **** #endif
2510:DRIVER/FatFs/source/ff.c **** 	/* On the FAT/FAT32 volume */
2511:DRIVER/FatFs/source/ff.c **** 	memcpy(sn, dp->fn, 12);
2512:DRIVER/FatFs/source/ff.c **** 	if (sn[NSFLAG] & NS_LOSS) {			/* When LFN is out of 8.3 format, generate a numbered name */
2513:DRIVER/FatFs/source/ff.c **** 		dp->fn[NSFLAG] = NS_NOLFN;		/* Find only SFN */
2514:DRIVER/FatFs/source/ff.c **** 		for (n = 1; n < 100; n++) {
2515:DRIVER/FatFs/source/ff.c **** 			gen_numname(dp->fn, sn, fs->lfnbuf, n);	/* Generate a numbered name */
2516:DRIVER/FatFs/source/ff.c **** 			res = dir_find(dp);				/* Check if the name collides with existing SFN */
2517:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) break;
2518:DRIVER/FatFs/source/ff.c **** 		}
2519:DRIVER/FatFs/source/ff.c **** 		if (n == 100) return FR_DENIED;		/* Abort if too many collisions */
2520:DRIVER/FatFs/source/ff.c **** 		if (res != FR_NO_FILE) return res;	/* Abort if the result is other than 'not collided' */
2521:DRIVER/FatFs/source/ff.c **** 		dp->fn[NSFLAG] = sn[NSFLAG];
2522:DRIVER/FatFs/source/ff.c **** 	}
2523:DRIVER/FatFs/source/ff.c **** 
2524:DRIVER/FatFs/source/ff.c **** 	/* Create an SFN with/without LFNs. */
2525:DRIVER/FatFs/source/ff.c **** 	n_ent = (sn[NSFLAG] & NS_LFN) ? (len + 12) / 13 + 1 : 1;	/* Number of entries to allocate */
2526:DRIVER/FatFs/source/ff.c **** 	res = dir_alloc(dp, n_ent);		/* Allocate entries */
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 67


2527:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK && --n_ent) {	/* Set LFN entry if needed */
2528:DRIVER/FatFs/source/ff.c **** 		res = dir_sdi(dp, dp->dptr - n_ent * SZDIRE);
2529:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK) {
2530:DRIVER/FatFs/source/ff.c **** 			sum = sum_sfn(dp->fn);	/* Checksum value of the SFN tied to the LFN */
2531:DRIVER/FatFs/source/ff.c **** 			do {					/* Store LFN entries in bottom first */
2532:DRIVER/FatFs/source/ff.c **** 				res = move_window(fs, dp->sect);
2533:DRIVER/FatFs/source/ff.c **** 				if (res != FR_OK) break;
2534:DRIVER/FatFs/source/ff.c **** 				put_lfn(fs->lfnbuf, dp->dir, (BYTE)n_ent, sum);
2535:DRIVER/FatFs/source/ff.c **** 				fs->wflag = 1;
2536:DRIVER/FatFs/source/ff.c **** 				res = dir_next(dp, 0);	/* Next entry */
2537:DRIVER/FatFs/source/ff.c **** 			} while (res == FR_OK && --n_ent);
2538:DRIVER/FatFs/source/ff.c **** 		}
2539:DRIVER/FatFs/source/ff.c **** 	}
2540:DRIVER/FatFs/source/ff.c **** 
2541:DRIVER/FatFs/source/ff.c **** #else	/* Non LFN configuration */
2542:DRIVER/FatFs/source/ff.c **** 	res = dir_alloc(dp, 1);		/* Allocate an entry for SFN */
2543:DRIVER/FatFs/source/ff.c **** 
2544:DRIVER/FatFs/source/ff.c **** #endif
2545:DRIVER/FatFs/source/ff.c **** 
2546:DRIVER/FatFs/source/ff.c **** 	/* Set SFN entry */
2547:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
2548:DRIVER/FatFs/source/ff.c **** 		res = move_window(fs, dp->sect);
2549:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK) {
2550:DRIVER/FatFs/source/ff.c **** 			memset(dp->dir, 0, SZDIRE);	/* Clean the entry */
2551:DRIVER/FatFs/source/ff.c **** 			memcpy(dp->dir + DIR_Name, dp->fn, 11);	/* Put SFN */
2552:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN
2553:DRIVER/FatFs/source/ff.c **** 			dp->dir[DIR_NTres] = dp->fn[NSFLAG] & (NS_BODY | NS_EXT);	/* Put NT flag */
2554:DRIVER/FatFs/source/ff.c **** #endif
2555:DRIVER/FatFs/source/ff.c **** 			fs->wflag = 1;
2556:DRIVER/FatFs/source/ff.c **** 		}
2557:DRIVER/FatFs/source/ff.c **** 	}
2558:DRIVER/FatFs/source/ff.c **** 
2559:DRIVER/FatFs/source/ff.c **** 	return res;
2560:DRIVER/FatFs/source/ff.c **** }
2561:DRIVER/FatFs/source/ff.c **** 
2562:DRIVER/FatFs/source/ff.c **** #endif /* !FF_FS_READONLY */
2563:DRIVER/FatFs/source/ff.c **** 
2564:DRIVER/FatFs/source/ff.c **** 
2565:DRIVER/FatFs/source/ff.c **** 
2566:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY && FF_FS_MINIMIZE == 0
2567:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
2568:DRIVER/FatFs/source/ff.c **** /* Remove an object from the directory                                   */
2569:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
2570:DRIVER/FatFs/source/ff.c **** 
2571:DRIVER/FatFs/source/ff.c **** static FRESULT dir_remove (	/* FR_OK:Succeeded, FR_DISK_ERR:A disk error */
2572:DRIVER/FatFs/source/ff.c **** 	DIR* dp					/* Directory object pointing the entry to be removed */
2573:DRIVER/FatFs/source/ff.c **** )
2574:DRIVER/FatFs/source/ff.c **** {
2575:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
2576:DRIVER/FatFs/source/ff.c **** 	FATFS *fs = dp->obj.fs;
2577:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN		/* LFN configuration */
2578:DRIVER/FatFs/source/ff.c **** 	DWORD last = dp->dptr;
2579:DRIVER/FatFs/source/ff.c **** 
2580:DRIVER/FatFs/source/ff.c **** 	res = (dp->blk_ofs == 0xFFFFFFFF) ? FR_OK : dir_sdi(dp, dp->blk_ofs);	/* Goto top of the entry blo
2581:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
2582:DRIVER/FatFs/source/ff.c **** 		do {
2583:DRIVER/FatFs/source/ff.c **** 			res = move_window(fs, dp->sect);
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 68


2584:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) break;
2585:DRIVER/FatFs/source/ff.c **** 			if (FF_FS_EXFAT && fs->fs_type == FS_EXFAT) {	/* On the exFAT volume */
2586:DRIVER/FatFs/source/ff.c **** 				dp->dir[XDIR_Type] &= 0x7F;	/* Clear the entry InUse flag. */
2587:DRIVER/FatFs/source/ff.c **** 			} else {										/* On the FAT/FAT32 volume */
2588:DRIVER/FatFs/source/ff.c **** 				dp->dir[DIR_Name] = DDEM;	/* Mark the entry 'deleted'. */
2589:DRIVER/FatFs/source/ff.c **** 			}
2590:DRIVER/FatFs/source/ff.c **** 			fs->wflag = 1;
2591:DRIVER/FatFs/source/ff.c **** 			if (dp->dptr >= last) break;	/* If reached last entry then all entries of the object has been de
2592:DRIVER/FatFs/source/ff.c **** 			res = dir_next(dp, 0);	/* Next entry */
2593:DRIVER/FatFs/source/ff.c **** 		} while (res == FR_OK);
2594:DRIVER/FatFs/source/ff.c **** 		if (res == FR_NO_FILE) res = FR_INT_ERR;
2595:DRIVER/FatFs/source/ff.c **** 	}
2596:DRIVER/FatFs/source/ff.c **** #else			/* Non LFN configuration */
2597:DRIVER/FatFs/source/ff.c **** 
2598:DRIVER/FatFs/source/ff.c **** 	res = move_window(fs, dp->sect);
2599:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
2600:DRIVER/FatFs/source/ff.c **** 		dp->dir[DIR_Name] = DDEM;	/* Mark the entry 'deleted'.*/
2601:DRIVER/FatFs/source/ff.c **** 		fs->wflag = 1;
2602:DRIVER/FatFs/source/ff.c **** 	}
2603:DRIVER/FatFs/source/ff.c **** #endif
2604:DRIVER/FatFs/source/ff.c **** 
2605:DRIVER/FatFs/source/ff.c **** 	return res;
2606:DRIVER/FatFs/source/ff.c **** }
2607:DRIVER/FatFs/source/ff.c **** 
2608:DRIVER/FatFs/source/ff.c **** #endif /* !FF_FS_READONLY && FF_FS_MINIMIZE == 0 */
2609:DRIVER/FatFs/source/ff.c **** 
2610:DRIVER/FatFs/source/ff.c **** 
2611:DRIVER/FatFs/source/ff.c **** 
2612:DRIVER/FatFs/source/ff.c **** #if FF_FS_MINIMIZE <= 1 || FF_FS_RPATH >= 2
2613:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
2614:DRIVER/FatFs/source/ff.c **** /* Get file information from directory entry                             */
2615:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
2616:DRIVER/FatFs/source/ff.c **** 
2617:DRIVER/FatFs/source/ff.c **** static void get_fileinfo (
2618:DRIVER/FatFs/source/ff.c **** 	DIR* dp,			/* Pointer to the directory object */
2619:DRIVER/FatFs/source/ff.c **** 	FILINFO* fno		/* Pointer to the file information to be filled */
2620:DRIVER/FatFs/source/ff.c **** )
2621:DRIVER/FatFs/source/ff.c **** {
2622:DRIVER/FatFs/source/ff.c **** 	UINT si, di;
2623:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN
2624:DRIVER/FatFs/source/ff.c **** 	BYTE lcf;
2625:DRIVER/FatFs/source/ff.c **** 	WCHAR wc, hs;
2626:DRIVER/FatFs/source/ff.c **** 	FATFS *fs = dp->obj.fs;
2627:DRIVER/FatFs/source/ff.c **** 	UINT nw;
2628:DRIVER/FatFs/source/ff.c **** #else
2629:DRIVER/FatFs/source/ff.c **** 	TCHAR c;
2630:DRIVER/FatFs/source/ff.c **** #endif
2631:DRIVER/FatFs/source/ff.c **** 
2632:DRIVER/FatFs/source/ff.c **** 
2633:DRIVER/FatFs/source/ff.c **** 	fno->fname[0] = 0;			/* Invaidate file info */
2634:DRIVER/FatFs/source/ff.c **** 	if (dp->sect == 0) return;	/* Exit if read pointer has reached end of directory */
2635:DRIVER/FatFs/source/ff.c **** 
2636:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN		/* LFN configuration */
2637:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
2638:DRIVER/FatFs/source/ff.c **** 	if (fs->fs_type == FS_EXFAT) {	/* exFAT volume */
2639:DRIVER/FatFs/source/ff.c **** 		UINT nc = 0;
2640:DRIVER/FatFs/source/ff.c **** 
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 69


2641:DRIVER/FatFs/source/ff.c **** 		si = SZDIRE * 2; di = 0;	/* 1st C1 entry in the entry block */
2642:DRIVER/FatFs/source/ff.c **** 		hs = 0;
2643:DRIVER/FatFs/source/ff.c **** 		while (nc < fs->dirbuf[XDIR_NumName]) {
2644:DRIVER/FatFs/source/ff.c **** 			if (si >= MAXDIRB(FF_MAX_LFN)) {	/* Truncated directory block? */
2645:DRIVER/FatFs/source/ff.c **** 				di = 0; break;
2646:DRIVER/FatFs/source/ff.c **** 			}
2647:DRIVER/FatFs/source/ff.c **** 			if ((si % SZDIRE) == 0) si += 2;	/* Skip entry type field */
2648:DRIVER/FatFs/source/ff.c **** 			wc = ld_word(fs->dirbuf + si); si += 2; nc++;	/* Get a character */
2649:DRIVER/FatFs/source/ff.c **** 			if (hs == 0 && IsSurrogate(wc)) {	/* Is it a surrogate? */
2650:DRIVER/FatFs/source/ff.c **** 				hs = wc; continue;				/* Get low surrogate */
2651:DRIVER/FatFs/source/ff.c **** 			}
2652:DRIVER/FatFs/source/ff.c **** 			nw = put_utf((DWORD)hs << 16 | wc, &fno->fname[di], FF_LFN_BUF - di);	/* Store it in API encodin
2653:DRIVER/FatFs/source/ff.c **** 			if (nw == 0) {						/* Buffer overflow or wrong char? */
2654:DRIVER/FatFs/source/ff.c **** 				di = 0; break;
2655:DRIVER/FatFs/source/ff.c **** 			}
2656:DRIVER/FatFs/source/ff.c **** 			di += nw;
2657:DRIVER/FatFs/source/ff.c **** 			hs = 0;
2658:DRIVER/FatFs/source/ff.c **** 		}
2659:DRIVER/FatFs/source/ff.c **** 		if (hs != 0) di = 0;					/* Broken surrogate pair? */
2660:DRIVER/FatFs/source/ff.c **** 		if (di == 0) fno->fname[di++] = '\?';	/* Inaccessible object name? */
2661:DRIVER/FatFs/source/ff.c **** 		fno->fname[di] = 0;						/* Terminate the name */
2662:DRIVER/FatFs/source/ff.c **** 		fno->altname[0] = 0;					/* exFAT does not support SFN */
2663:DRIVER/FatFs/source/ff.c **** 
2664:DRIVER/FatFs/source/ff.c **** 		fno->fattrib = fs->dirbuf[XDIR_Attr] & AM_MASKX;		/* Attribute */
2665:DRIVER/FatFs/source/ff.c **** 		fno->fsize = (fno->fattrib & AM_DIR) ? 0 : ld_qword(fs->dirbuf + XDIR_FileSize);	/* Size */
2666:DRIVER/FatFs/source/ff.c **** 		fno->ftime = ld_word(fs->dirbuf + XDIR_ModTime + 0);	/* Time */
2667:DRIVER/FatFs/source/ff.c **** 		fno->fdate = ld_word(fs->dirbuf + XDIR_ModTime + 2);	/* Date */
2668:DRIVER/FatFs/source/ff.c **** 		return;
2669:DRIVER/FatFs/source/ff.c **** 	} else
2670:DRIVER/FatFs/source/ff.c **** #endif
2671:DRIVER/FatFs/source/ff.c **** 	{	/* FAT/FAT32 volume */
2672:DRIVER/FatFs/source/ff.c **** 		if (dp->blk_ofs != 0xFFFFFFFF) {	/* Get LFN if available */
2673:DRIVER/FatFs/source/ff.c **** 			si = di = 0;
2674:DRIVER/FatFs/source/ff.c **** 			hs = 0;
2675:DRIVER/FatFs/source/ff.c **** 			while (fs->lfnbuf[si] != 0) {
2676:DRIVER/FatFs/source/ff.c **** 				wc = fs->lfnbuf[si++];		/* Get an LFN character (UTF-16) */
2677:DRIVER/FatFs/source/ff.c **** 				if (hs == 0 && IsSurrogate(wc)) {	/* Is it a surrogate? */
2678:DRIVER/FatFs/source/ff.c **** 					hs = wc; continue;		/* Get low surrogate */
2679:DRIVER/FatFs/source/ff.c **** 				}
2680:DRIVER/FatFs/source/ff.c **** 				nw = put_utf((DWORD)hs << 16 | wc, &fno->fname[di], FF_LFN_BUF - di);	/* Store it in API encodi
2681:DRIVER/FatFs/source/ff.c **** 				if (nw == 0) {				/* Buffer overflow or wrong char? */
2682:DRIVER/FatFs/source/ff.c **** 					di = 0; break;
2683:DRIVER/FatFs/source/ff.c **** 				}
2684:DRIVER/FatFs/source/ff.c **** 				di += nw;
2685:DRIVER/FatFs/source/ff.c **** 				hs = 0;
2686:DRIVER/FatFs/source/ff.c **** 			}
2687:DRIVER/FatFs/source/ff.c **** 			if (hs != 0) di = 0;	/* Broken surrogate pair? */
2688:DRIVER/FatFs/source/ff.c **** 			fno->fname[di] = 0;		/* Terminate the LFN (null string means LFN is invalid) */
2689:DRIVER/FatFs/source/ff.c **** 		}
2690:DRIVER/FatFs/source/ff.c **** 	}
2691:DRIVER/FatFs/source/ff.c **** 
2692:DRIVER/FatFs/source/ff.c **** 	si = di = 0;
2693:DRIVER/FatFs/source/ff.c **** 	while (si < 11) {		/* Get SFN from SFN entry */
2694:DRIVER/FatFs/source/ff.c **** 		wc = dp->dir[si++];			/* Get a char */
2695:DRIVER/FatFs/source/ff.c **** 		if (wc == ' ') continue;	/* Skip padding spaces */
2696:DRIVER/FatFs/source/ff.c **** 		if (wc == RDDEM) wc = DDEM;	/* Restore replaced DDEM character */
2697:DRIVER/FatFs/source/ff.c **** 		if (si == 9 && di < FF_SFN_BUF) fno->altname[di++] = '.';	/* Insert a . if extension is exist */
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 70


2698:DRIVER/FatFs/source/ff.c **** #if FF_LFN_UNICODE >= 1	/* Unicode output */
2699:DRIVER/FatFs/source/ff.c **** 		if (dbc_1st((BYTE)wc) && si != 8 && si != 11 && dbc_2nd(dp->dir[si])) {	/* Make a DBC if needed *
2700:DRIVER/FatFs/source/ff.c **** 			wc = wc << 8 | dp->dir[si++];
2701:DRIVER/FatFs/source/ff.c **** 		}
2702:DRIVER/FatFs/source/ff.c **** 		wc = ff_oem2uni(wc, CODEPAGE);		/* ANSI/OEM -> Unicode */
2703:DRIVER/FatFs/source/ff.c **** 		if (wc == 0) {				/* Wrong char in the current code page? */
2704:DRIVER/FatFs/source/ff.c **** 			di = 0; break;
2705:DRIVER/FatFs/source/ff.c **** 		}
2706:DRIVER/FatFs/source/ff.c **** 		nw = put_utf(wc, &fno->altname[di], FF_SFN_BUF - di);	/* Store it in API encoding */
2707:DRIVER/FatFs/source/ff.c **** 		if (nw == 0) {				/* Buffer overflow? */
2708:DRIVER/FatFs/source/ff.c **** 			di = 0; break;
2709:DRIVER/FatFs/source/ff.c **** 		}
2710:DRIVER/FatFs/source/ff.c **** 		di += nw;
2711:DRIVER/FatFs/source/ff.c **** #else					/* ANSI/OEM output */
2712:DRIVER/FatFs/source/ff.c **** 		fno->altname[di++] = (TCHAR)wc;	/* Store it without any conversion */
2713:DRIVER/FatFs/source/ff.c **** #endif
2714:DRIVER/FatFs/source/ff.c **** 	}
2715:DRIVER/FatFs/source/ff.c **** 	fno->altname[di] = 0;	/* Terminate the SFN  (null string means SFN is invalid) */
2716:DRIVER/FatFs/source/ff.c **** 
2717:DRIVER/FatFs/source/ff.c **** 	if (fno->fname[0] == 0) {	/* If LFN is invalid, altname[] needs to be copied to fname[] */
2718:DRIVER/FatFs/source/ff.c **** 		if (di == 0) {	/* If LFN and SFN both are invalid, this object is inaccessible */
2719:DRIVER/FatFs/source/ff.c **** 			fno->fname[di++] = '\?';
2720:DRIVER/FatFs/source/ff.c **** 		} else {
2721:DRIVER/FatFs/source/ff.c **** 			for (si = di = 0, lcf = NS_BODY; fno->altname[si]; si++, di++) {	/* Copy altname[] to fname[] wi
2722:DRIVER/FatFs/source/ff.c **** 				wc = (WCHAR)fno->altname[si];
2723:DRIVER/FatFs/source/ff.c **** 				if (wc == '.') lcf = NS_EXT;
2724:DRIVER/FatFs/source/ff.c **** 				if (IsUpper(wc) && (dp->dir[DIR_NTres] & lcf)) wc += 0x20;
2725:DRIVER/FatFs/source/ff.c **** 				fno->fname[di] = (TCHAR)wc;
2726:DRIVER/FatFs/source/ff.c **** 			}
2727:DRIVER/FatFs/source/ff.c **** 		}
2728:DRIVER/FatFs/source/ff.c **** 		fno->fname[di] = 0;	/* Terminate the LFN */
2729:DRIVER/FatFs/source/ff.c **** 		if (!dp->dir[DIR_NTres]) fno->altname[0] = 0;	/* Altname is not needed if neither LFN nor case in
2730:DRIVER/FatFs/source/ff.c **** 	}
2731:DRIVER/FatFs/source/ff.c **** 
2732:DRIVER/FatFs/source/ff.c **** #else	/* Non-LFN configuration */
2733:DRIVER/FatFs/source/ff.c **** 	si = di = 0;
2734:DRIVER/FatFs/source/ff.c **** 	while (si < 11) {		/* Copy name body and extension */
2735:DRIVER/FatFs/source/ff.c **** 		c = (TCHAR)dp->dir[si++];
2736:DRIVER/FatFs/source/ff.c **** 		if (c == ' ') continue;		/* Skip padding spaces */
2737:DRIVER/FatFs/source/ff.c **** 		if (c == RDDEM) c = DDEM;	/* Restore replaced DDEM character */
2738:DRIVER/FatFs/source/ff.c **** 		if (si == 9) fno->fname[di++] = '.';/* Insert a . if extension is exist */
2739:DRIVER/FatFs/source/ff.c **** 		fno->fname[di++] = c;
2740:DRIVER/FatFs/source/ff.c **** 	}
2741:DRIVER/FatFs/source/ff.c **** 	fno->fname[di] = 0;		/* Terminate the SFN */
2742:DRIVER/FatFs/source/ff.c **** #endif
2743:DRIVER/FatFs/source/ff.c **** 
2744:DRIVER/FatFs/source/ff.c **** 	fno->fattrib = dp->dir[DIR_Attr] & AM_MASK;			/* Attribute */
2745:DRIVER/FatFs/source/ff.c **** 	fno->fsize = ld_dword(dp->dir + DIR_FileSize);		/* Size */
2746:DRIVER/FatFs/source/ff.c **** 	fno->ftime = ld_word(dp->dir + DIR_ModTime + 0);	/* Time */
2747:DRIVER/FatFs/source/ff.c **** 	fno->fdate = ld_word(dp->dir + DIR_ModTime + 2);	/* Date */
2748:DRIVER/FatFs/source/ff.c **** }
2749:DRIVER/FatFs/source/ff.c **** 
2750:DRIVER/FatFs/source/ff.c **** #endif /* FF_FS_MINIMIZE <= 1 || FF_FS_RPATH >= 2 */
2751:DRIVER/FatFs/source/ff.c **** 
2752:DRIVER/FatFs/source/ff.c **** 
2753:DRIVER/FatFs/source/ff.c **** 
2754:DRIVER/FatFs/source/ff.c **** #if FF_USE_FIND && FF_FS_MINIMIZE <= 1
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 71


2755:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
2756:DRIVER/FatFs/source/ff.c **** /* Pattern matching                                                      */
2757:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
2758:DRIVER/FatFs/source/ff.c **** 
2759:DRIVER/FatFs/source/ff.c **** #define FIND_RECURS	4	/* Maximum number of wildcard terms in the pattern to limit recursion */
2760:DRIVER/FatFs/source/ff.c **** 
2761:DRIVER/FatFs/source/ff.c **** 
2762:DRIVER/FatFs/source/ff.c **** static DWORD get_achar (	/* Get a character and advance ptr */
2763:DRIVER/FatFs/source/ff.c **** 	const TCHAR** ptr		/* Pointer to pointer to the ANSI/OEM or Unicode string */
2764:DRIVER/FatFs/source/ff.c **** )
2765:DRIVER/FatFs/source/ff.c **** {
2766:DRIVER/FatFs/source/ff.c **** 	DWORD chr;
2767:DRIVER/FatFs/source/ff.c **** 
2768:DRIVER/FatFs/source/ff.c **** 
2769:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN && FF_LFN_UNICODE >= 1	/* Unicode input */
2770:DRIVER/FatFs/source/ff.c **** 	chr = tchar2uni(ptr);
2771:DRIVER/FatFs/source/ff.c **** 	if (chr == 0xFFFFFFFF) chr = 0;		/* Wrong UTF encoding is recognized as end of the string */
2772:DRIVER/FatFs/source/ff.c **** 	chr = ff_wtoupper(chr);
2773:DRIVER/FatFs/source/ff.c **** 
2774:DRIVER/FatFs/source/ff.c **** #else									/* ANSI/OEM input */
2775:DRIVER/FatFs/source/ff.c **** 	chr = (BYTE)*(*ptr)++;				/* Get a byte */
2776:DRIVER/FatFs/source/ff.c **** 	if (IsLower(chr)) chr -= 0x20;		/* To upper ASCII char */
2777:DRIVER/FatFs/source/ff.c **** #if FF_CODE_PAGE == 0
2778:DRIVER/FatFs/source/ff.c **** 	if (ExCvt && chr >= 0x80) chr = ExCvt[chr - 0x80];	/* To upper SBCS extended char */
2779:DRIVER/FatFs/source/ff.c **** #elif FF_CODE_PAGE < 900
2780:DRIVER/FatFs/source/ff.c **** 	if (chr >= 0x80) chr = ExCvt[chr - 0x80];	/* To upper SBCS extended char */
2781:DRIVER/FatFs/source/ff.c **** #endif
2782:DRIVER/FatFs/source/ff.c **** #if FF_CODE_PAGE == 0 || FF_CODE_PAGE >= 900
2783:DRIVER/FatFs/source/ff.c **** 	if (dbc_1st((BYTE)chr)) {	/* Get DBC 2nd byte if needed */
2784:DRIVER/FatFs/source/ff.c **** 		chr = dbc_2nd((BYTE)**ptr) ? chr << 8 | (BYTE)*(*ptr)++ : 0;
2785:DRIVER/FatFs/source/ff.c **** 	}
2786:DRIVER/FatFs/source/ff.c **** #endif
2787:DRIVER/FatFs/source/ff.c **** 
2788:DRIVER/FatFs/source/ff.c **** #endif
2789:DRIVER/FatFs/source/ff.c **** 	return chr;
2790:DRIVER/FatFs/source/ff.c **** }
2791:DRIVER/FatFs/source/ff.c **** 
2792:DRIVER/FatFs/source/ff.c **** 
2793:DRIVER/FatFs/source/ff.c **** static int pattern_match (	/* 0:mismatched, 1:matched */
2794:DRIVER/FatFs/source/ff.c **** 	const TCHAR* pat,	/* Matching pattern */
2795:DRIVER/FatFs/source/ff.c **** 	const TCHAR* nam,	/* String to be tested */
2796:DRIVER/FatFs/source/ff.c **** 	UINT skip,			/* Number of pre-skip chars (number of ?s, b8:infinite (* specified)) */
2797:DRIVER/FatFs/source/ff.c **** 	UINT recur			/* Recursion count */
2798:DRIVER/FatFs/source/ff.c **** )
2799:DRIVER/FatFs/source/ff.c **** {
2800:DRIVER/FatFs/source/ff.c **** 	const TCHAR *pptr;
2801:DRIVER/FatFs/source/ff.c **** 	const TCHAR *nptr;
2802:DRIVER/FatFs/source/ff.c **** 	DWORD pchr, nchr;
2803:DRIVER/FatFs/source/ff.c **** 	UINT sk;
2804:DRIVER/FatFs/source/ff.c **** 
2805:DRIVER/FatFs/source/ff.c **** 
2806:DRIVER/FatFs/source/ff.c **** 	while ((skip & 0xFF) != 0) {		/* Pre-skip name chars */
2807:DRIVER/FatFs/source/ff.c **** 		if (!get_achar(&nam)) return 0;	/* Branch mismatched if less name chars */
2808:DRIVER/FatFs/source/ff.c **** 		skip--;
2809:DRIVER/FatFs/source/ff.c **** 	}
2810:DRIVER/FatFs/source/ff.c **** 	if (*pat == 0 && skip) return 1;	/* Matched? (short circuit) */
2811:DRIVER/FatFs/source/ff.c **** 
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 72


2812:DRIVER/FatFs/source/ff.c **** 	do {
2813:DRIVER/FatFs/source/ff.c **** 		pptr = pat; nptr = nam;			/* Top of pattern and name to match */
2814:DRIVER/FatFs/source/ff.c **** 		for (;;) {
2815:DRIVER/FatFs/source/ff.c **** 			if (*pptr == '\?' || *pptr == '*') {	/* Wildcard term? */
2816:DRIVER/FatFs/source/ff.c **** 				if (recur == 0) return 0;	/* Too many wildcard terms? */
2817:DRIVER/FatFs/source/ff.c **** 				sk = 0;
2818:DRIVER/FatFs/source/ff.c **** 				do {	/* Analyze the wildcard term */
2819:DRIVER/FatFs/source/ff.c **** 					if (*pptr++ == '\?') {
2820:DRIVER/FatFs/source/ff.c **** 						sk++;
2821:DRIVER/FatFs/source/ff.c **** 					} else {
2822:DRIVER/FatFs/source/ff.c **** 						sk |= 0x100;
2823:DRIVER/FatFs/source/ff.c **** 					}
2824:DRIVER/FatFs/source/ff.c **** 				} while (*pptr == '\?' || *pptr == '*');
2825:DRIVER/FatFs/source/ff.c **** 				if (pattern_match(pptr, nptr, sk, recur - 1)) return 1;	/* Test new branch (recursive call) */
2826:DRIVER/FatFs/source/ff.c **** 				nchr = *nptr; break;	/* Branch mismatched */
2827:DRIVER/FatFs/source/ff.c **** 			}
2828:DRIVER/FatFs/source/ff.c **** 			pchr = get_achar(&pptr);	/* Get a pattern char */
2829:DRIVER/FatFs/source/ff.c **** 			nchr = get_achar(&nptr);	/* Get a name char */
2830:DRIVER/FatFs/source/ff.c **** 			if (pchr != nchr) break;	/* Branch mismatched? */
2831:DRIVER/FatFs/source/ff.c **** 			if (pchr == 0) return 1;	/* Branch matched? (matched at end of both strings) */
2832:DRIVER/FatFs/source/ff.c **** 		}
2833:DRIVER/FatFs/source/ff.c **** 		get_achar(&nam);			/* nam++ */
2834:DRIVER/FatFs/source/ff.c **** 	} while (skip && nchr);		/* Retry until end of name if infinite search is specified */
2835:DRIVER/FatFs/source/ff.c **** 
2836:DRIVER/FatFs/source/ff.c **** 	return 0;
2837:DRIVER/FatFs/source/ff.c **** }
2838:DRIVER/FatFs/source/ff.c **** 
2839:DRIVER/FatFs/source/ff.c **** #endif /* FF_USE_FIND && FF_FS_MINIMIZE <= 1 */
2840:DRIVER/FatFs/source/ff.c **** 
2841:DRIVER/FatFs/source/ff.c **** 
2842:DRIVER/FatFs/source/ff.c **** 
2843:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
2844:DRIVER/FatFs/source/ff.c **** /* Pick a top segment and create the object name in directory form       */
2845:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
2846:DRIVER/FatFs/source/ff.c **** 
2847:DRIVER/FatFs/source/ff.c **** static FRESULT create_name (	/* FR_OK: successful, FR_INVALID_NAME: could not create */
2848:DRIVER/FatFs/source/ff.c **** 	DIR* dp,					/* Pointer to the directory object */
2849:DRIVER/FatFs/source/ff.c **** 	const TCHAR** path			/* Pointer to pointer to the segment in the path string */
2850:DRIVER/FatFs/source/ff.c **** )
2851:DRIVER/FatFs/source/ff.c **** {
2852:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN		/* LFN configuration */
2853:DRIVER/FatFs/source/ff.c **** 	BYTE b, cf;
2854:DRIVER/FatFs/source/ff.c **** 	WCHAR wc;
2855:DRIVER/FatFs/source/ff.c **** 	WCHAR *lfn;
2856:DRIVER/FatFs/source/ff.c **** 	const TCHAR* p;
2857:DRIVER/FatFs/source/ff.c **** 	DWORD uc;
2858:DRIVER/FatFs/source/ff.c **** 	UINT i, ni, si, di;
2859:DRIVER/FatFs/source/ff.c **** 
2860:DRIVER/FatFs/source/ff.c **** 
2861:DRIVER/FatFs/source/ff.c **** 	/* Create LFN into LFN working buffer */
2862:DRIVER/FatFs/source/ff.c **** 	p = *path; lfn = dp->obj.fs->lfnbuf; di = 0;
2863:DRIVER/FatFs/source/ff.c **** 	for (;;) {
2864:DRIVER/FatFs/source/ff.c **** 		uc = tchar2uni(&p);			/* Get a character */
2865:DRIVER/FatFs/source/ff.c **** 		if (uc == 0xFFFFFFFF) return FR_INVALID_NAME;		/* Invalid code or UTF decode error */
2866:DRIVER/FatFs/source/ff.c **** 		if (uc >= 0x10000) lfn[di++] = (WCHAR)(uc >> 16);	/* Store high surrogate if needed */
2867:DRIVER/FatFs/source/ff.c **** 		wc = (WCHAR)uc;
2868:DRIVER/FatFs/source/ff.c **** 		if (wc < ' ' || IsSeparator(wc)) break;	/* Break if end of the path or a separator is found */
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 73


2869:DRIVER/FatFs/source/ff.c **** 		if (wc < 0x80 && strchr("*:<>|\"\?\x7F", (int)wc)) return FR_INVALID_NAME;	/* Reject illegal char
2870:DRIVER/FatFs/source/ff.c **** 		if (di >= FF_MAX_LFN) return FR_INVALID_NAME;	/* Reject too long name */
2871:DRIVER/FatFs/source/ff.c **** 		lfn[di++] = wc;				/* Store the Unicode character */
2872:DRIVER/FatFs/source/ff.c **** 	}
2873:DRIVER/FatFs/source/ff.c **** 	if (wc < ' ') {				/* Stopped at end of the path? */
2874:DRIVER/FatFs/source/ff.c **** 		cf = NS_LAST;			/* Last segment */
2875:DRIVER/FatFs/source/ff.c **** 	} else {					/* Stopped at a separator */
2876:DRIVER/FatFs/source/ff.c **** 		while (IsSeparator(*p)) p++;	/* Skip duplicated separators if exist */
2877:DRIVER/FatFs/source/ff.c **** 		cf = 0;					/* Next segment may follow */
2878:DRIVER/FatFs/source/ff.c **** 		if (IsTerminator(*p)) cf = NS_LAST;	/* Ignore terminating separator */
2879:DRIVER/FatFs/source/ff.c **** 	}
2880:DRIVER/FatFs/source/ff.c **** 	*path = p;					/* Return pointer to the next segment */
2881:DRIVER/FatFs/source/ff.c **** 
2882:DRIVER/FatFs/source/ff.c **** #if FF_FS_RPATH != 0
2883:DRIVER/FatFs/source/ff.c **** 	if ((di == 1 && lfn[di - 1] == '.') ||
2884:DRIVER/FatFs/source/ff.c **** 		(di == 2 && lfn[di - 1] == '.' && lfn[di - 2] == '.')) {	/* Is this segment a dot name? */
2885:DRIVER/FatFs/source/ff.c **** 		lfn[di] = 0;
2886:DRIVER/FatFs/source/ff.c **** 		for (i = 0; i < 11; i++) {	/* Create dot name for SFN entry */
2887:DRIVER/FatFs/source/ff.c **** 			dp->fn[i] = (i < di) ? '.' : ' ';
2888:DRIVER/FatFs/source/ff.c **** 		}
2889:DRIVER/FatFs/source/ff.c **** 		dp->fn[i] = cf | NS_DOT;	/* This is a dot entry */
2890:DRIVER/FatFs/source/ff.c **** 		return FR_OK;
2891:DRIVER/FatFs/source/ff.c **** 	}
2892:DRIVER/FatFs/source/ff.c **** #endif
2893:DRIVER/FatFs/source/ff.c **** 	while (di) {					/* Snip off trailing spaces and dots if exist */
2894:DRIVER/FatFs/source/ff.c **** 		wc = lfn[di - 1];
2895:DRIVER/FatFs/source/ff.c **** 		if (wc != ' ' && wc != '.') break;
2896:DRIVER/FatFs/source/ff.c **** 		di--;
2897:DRIVER/FatFs/source/ff.c **** 	}
2898:DRIVER/FatFs/source/ff.c **** 	lfn[di] = 0;							/* LFN is created into the working buffer */
2899:DRIVER/FatFs/source/ff.c **** 	if (di == 0) return FR_INVALID_NAME;	/* Reject null name */
2900:DRIVER/FatFs/source/ff.c **** 
2901:DRIVER/FatFs/source/ff.c **** 	/* Create SFN in directory form */
2902:DRIVER/FatFs/source/ff.c **** 	for (si = 0; lfn[si] == ' '; si++) ;	/* Remove leading spaces */
2903:DRIVER/FatFs/source/ff.c **** 	if (si > 0 || lfn[si] == '.') cf |= NS_LOSS | NS_LFN;	/* Is there any leading space or dot? */
2904:DRIVER/FatFs/source/ff.c **** 	while (di > 0 && lfn[di - 1] != '.') di--;	/* Find last dot (di<=si: no extension) */
2905:DRIVER/FatFs/source/ff.c **** 
2906:DRIVER/FatFs/source/ff.c **** 	memset(dp->fn, ' ', 11);
2907:DRIVER/FatFs/source/ff.c **** 	i = b = 0; ni = 8;
2908:DRIVER/FatFs/source/ff.c **** 	for (;;) {
2909:DRIVER/FatFs/source/ff.c **** 		wc = lfn[si++];					/* Get an LFN character */
2910:DRIVER/FatFs/source/ff.c **** 		if (wc == 0) break;				/* Break on end of the LFN */
2911:DRIVER/FatFs/source/ff.c **** 		if (wc == ' ' || (wc == '.' && si != di)) {	/* Remove embedded spaces and dots */
2912:DRIVER/FatFs/source/ff.c **** 			cf |= NS_LOSS | NS_LFN;
2913:DRIVER/FatFs/source/ff.c **** 			continue;
2914:DRIVER/FatFs/source/ff.c **** 		}
2915:DRIVER/FatFs/source/ff.c **** 
2916:DRIVER/FatFs/source/ff.c **** 		if (i >= ni || si == di) {		/* End of field? */
2917:DRIVER/FatFs/source/ff.c **** 			if (ni == 11) {				/* Name extension overflow? */
2918:DRIVER/FatFs/source/ff.c **** 				cf |= NS_LOSS | NS_LFN;
2919:DRIVER/FatFs/source/ff.c **** 				break;
2920:DRIVER/FatFs/source/ff.c **** 			}
2921:DRIVER/FatFs/source/ff.c **** 			if (si != di) cf |= NS_LOSS | NS_LFN;	/* Name body overflow? */
2922:DRIVER/FatFs/source/ff.c **** 			if (si > di) break;						/* No name extension? */
2923:DRIVER/FatFs/source/ff.c **** 			si = di; i = 8; ni = 11; b <<= 2;		/* Enter name extension */
2924:DRIVER/FatFs/source/ff.c **** 			continue;
2925:DRIVER/FatFs/source/ff.c **** 		}
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 74


2926:DRIVER/FatFs/source/ff.c **** 
2927:DRIVER/FatFs/source/ff.c **** 		if (wc >= 0x80) {	/* Is this an extended character? */
2928:DRIVER/FatFs/source/ff.c **** 			cf |= NS_LFN;	/* LFN entry needs to be created */
2929:DRIVER/FatFs/source/ff.c **** #if FF_CODE_PAGE == 0
2930:DRIVER/FatFs/source/ff.c **** 			if (ExCvt) {	/* In SBCS cfg */
2931:DRIVER/FatFs/source/ff.c **** 				wc = ff_uni2oem(wc, CODEPAGE);			/* Unicode ==> ANSI/OEM code */
2932:DRIVER/FatFs/source/ff.c **** 				if (wc & 0x80) wc = ExCvt[wc & 0x7F];	/* Convert extended character to upper (SBCS) */
2933:DRIVER/FatFs/source/ff.c **** 			} else {		/* In DBCS cfg */
2934:DRIVER/FatFs/source/ff.c **** 				wc = ff_uni2oem(ff_wtoupper(wc), CODEPAGE);	/* Unicode ==> Up-convert ==> ANSI/OEM code */
2935:DRIVER/FatFs/source/ff.c **** 			}
2936:DRIVER/FatFs/source/ff.c **** #elif FF_CODE_PAGE < 900	/* In SBCS cfg */
2937:DRIVER/FatFs/source/ff.c **** 			wc = ff_uni2oem(wc, CODEPAGE);			/* Unicode ==> ANSI/OEM code */
2938:DRIVER/FatFs/source/ff.c **** 			if (wc & 0x80) wc = ExCvt[wc & 0x7F];	/* Convert extended character to upper (SBCS) */
2939:DRIVER/FatFs/source/ff.c **** #else						/* In DBCS cfg */
2940:DRIVER/FatFs/source/ff.c **** 			wc = ff_uni2oem(ff_wtoupper(wc), CODEPAGE);	/* Unicode ==> Up-convert ==> ANSI/OEM code */
2941:DRIVER/FatFs/source/ff.c **** #endif
2942:DRIVER/FatFs/source/ff.c **** 		}
2943:DRIVER/FatFs/source/ff.c **** 
2944:DRIVER/FatFs/source/ff.c **** 		if (wc >= 0x100) {				/* Is this a DBC? */
2945:DRIVER/FatFs/source/ff.c **** 			if (i >= ni - 1) {			/* Field overflow? */
2946:DRIVER/FatFs/source/ff.c **** 				cf |= NS_LOSS | NS_LFN;
2947:DRIVER/FatFs/source/ff.c **** 				i = ni; continue;		/* Next field */
2948:DRIVER/FatFs/source/ff.c **** 			}
2949:DRIVER/FatFs/source/ff.c **** 			dp->fn[i++] = (BYTE)(wc >> 8);	/* Put 1st byte */
2950:DRIVER/FatFs/source/ff.c **** 		} else {						/* SBC */
2951:DRIVER/FatFs/source/ff.c **** 			if (wc == 0 || strchr("+,;=[]", (int)wc)) {	/* Replace illegal characters for SFN */
2952:DRIVER/FatFs/source/ff.c **** 				wc = '_'; cf |= NS_LOSS | NS_LFN;/* Lossy conversion */
2953:DRIVER/FatFs/source/ff.c **** 			} else {
2954:DRIVER/FatFs/source/ff.c **** 				if (IsUpper(wc)) {		/* ASCII upper case? */
2955:DRIVER/FatFs/source/ff.c **** 					b |= 2;
2956:DRIVER/FatFs/source/ff.c **** 				}
2957:DRIVER/FatFs/source/ff.c **** 				if (IsLower(wc)) {		/* ASCII lower case? */
2958:DRIVER/FatFs/source/ff.c **** 					b |= 1; wc -= 0x20;
2959:DRIVER/FatFs/source/ff.c **** 				}
2960:DRIVER/FatFs/source/ff.c **** 			}
2961:DRIVER/FatFs/source/ff.c **** 		}
2962:DRIVER/FatFs/source/ff.c **** 		dp->fn[i++] = (BYTE)wc;
2963:DRIVER/FatFs/source/ff.c **** 	}
2964:DRIVER/FatFs/source/ff.c **** 
2965:DRIVER/FatFs/source/ff.c **** 	if (dp->fn[0] == DDEM) dp->fn[0] = RDDEM;	/* If the first character collides with DDEM, replace it
2966:DRIVER/FatFs/source/ff.c **** 
2967:DRIVER/FatFs/source/ff.c **** 	if (ni == 8) b <<= 2;				/* Shift capital flags if no extension */
2968:DRIVER/FatFs/source/ff.c **** 	if ((b & 0x0C) == 0x0C || (b & 0x03) == 0x03) cf |= NS_LFN;	/* LFN entry needs to be created if co
2969:DRIVER/FatFs/source/ff.c **** 	if (!(cf & NS_LFN)) {				/* When LFN is in 8.3 format without extended character, NT flags are cre
2970:DRIVER/FatFs/source/ff.c **** 		if (b & 0x01) cf |= NS_EXT;		/* NT flag (Extension has small capital letters only) */
2971:DRIVER/FatFs/source/ff.c **** 		if (b & 0x04) cf |= NS_BODY;	/* NT flag (Body has small capital letters only) */
2972:DRIVER/FatFs/source/ff.c **** 	}
2973:DRIVER/FatFs/source/ff.c **** 
2974:DRIVER/FatFs/source/ff.c **** 	dp->fn[NSFLAG] = cf;	/* SFN is created into dp->fn[] */
2975:DRIVER/FatFs/source/ff.c **** 
2976:DRIVER/FatFs/source/ff.c **** 	return FR_OK;
2977:DRIVER/FatFs/source/ff.c **** 
2978:DRIVER/FatFs/source/ff.c **** 
2979:DRIVER/FatFs/source/ff.c **** #else	/* FF_USE_LFN : Non-LFN configuration */
2980:DRIVER/FatFs/source/ff.c **** 	BYTE c, d;
2981:DRIVER/FatFs/source/ff.c **** 	BYTE *sfn;
2982:DRIVER/FatFs/source/ff.c **** 	UINT ni, si, i;
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 75


2983:DRIVER/FatFs/source/ff.c **** 	const char *p;
2984:DRIVER/FatFs/source/ff.c **** 
2985:DRIVER/FatFs/source/ff.c **** 	/* Create file name in directory form */
2986:DRIVER/FatFs/source/ff.c **** 	p = *path; sfn = dp->fn;
2987:DRIVER/FatFs/source/ff.c **** 	memset(sfn, ' ', 11);
2988:DRIVER/FatFs/source/ff.c **** 	si = i = 0; ni = 8;
2989:DRIVER/FatFs/source/ff.c **** #if FF_FS_RPATH != 0
2990:DRIVER/FatFs/source/ff.c **** 	if (p[si] == '.') { /* Is this a dot entry? */
2991:DRIVER/FatFs/source/ff.c **** 		for (;;) {
2992:DRIVER/FatFs/source/ff.c **** 			c = (BYTE)p[si++];
2993:DRIVER/FatFs/source/ff.c **** 			if (c != '.' || si >= 3) break;
2994:DRIVER/FatFs/source/ff.c **** 			sfn[i++] = c;
2995:DRIVER/FatFs/source/ff.c **** 		}
2996:DRIVER/FatFs/source/ff.c **** 		if (!IsSeparator(c) && c > ' ') return FR_INVALID_NAME;
2997:DRIVER/FatFs/source/ff.c **** 		*path = p + si;					/* Return pointer to the next segment */
2998:DRIVER/FatFs/source/ff.c **** 		sfn[NSFLAG] = (c <= ' ') ? NS_LAST | NS_DOT : NS_DOT;	/* Set last segment flag if end of the path
2999:DRIVER/FatFs/source/ff.c **** 		return FR_OK;
3000:DRIVER/FatFs/source/ff.c **** 	}
3001:DRIVER/FatFs/source/ff.c **** #endif
3002:DRIVER/FatFs/source/ff.c **** 	for (;;) {
3003:DRIVER/FatFs/source/ff.c **** 		c = (BYTE)p[si++];				/* Get a byte */
3004:DRIVER/FatFs/source/ff.c **** 		if (c <= ' ') break; 			/* Break if end of the path name */
3005:DRIVER/FatFs/source/ff.c **** 		if (IsSeparator(c)) {			/* Break if a separator is found */
3006:DRIVER/FatFs/source/ff.c **** 			while (IsSeparator(p[si])) si++;	/* Skip duplicated separator if exist */
3007:DRIVER/FatFs/source/ff.c **** 			break;
3008:DRIVER/FatFs/source/ff.c **** 		}
3009:DRIVER/FatFs/source/ff.c **** 		if (c == '.' || i >= ni) {		/* End of body or field overflow? */
3010:DRIVER/FatFs/source/ff.c **** 			if (ni == 11 || c != '.') return FR_INVALID_NAME;	/* Field overflow or invalid dot? */
3011:DRIVER/FatFs/source/ff.c **** 			i = 8; ni = 11;				/* Enter file extension field */
3012:DRIVER/FatFs/source/ff.c **** 			continue;
3013:DRIVER/FatFs/source/ff.c **** 		}
3014:DRIVER/FatFs/source/ff.c **** #if FF_CODE_PAGE == 0
3015:DRIVER/FatFs/source/ff.c **** 		if (ExCvt && c >= 0x80) {		/* Is SBC extended character? */
3016:DRIVER/FatFs/source/ff.c **** 			c = ExCvt[c & 0x7F];		/* To upper SBC extended character */
3017:DRIVER/FatFs/source/ff.c **** 		}
3018:DRIVER/FatFs/source/ff.c **** #elif FF_CODE_PAGE < 900
3019:DRIVER/FatFs/source/ff.c **** 		if (c >= 0x80) {				/* Is SBC extended character? */
3020:DRIVER/FatFs/source/ff.c **** 			c = ExCvt[c & 0x7F];		/* To upper SBC extended character */
3021:DRIVER/FatFs/source/ff.c **** 		}
3022:DRIVER/FatFs/source/ff.c **** #endif
3023:DRIVER/FatFs/source/ff.c **** 		if (dbc_1st(c)) {				/* Check if it is a DBC 1st byte */
3024:DRIVER/FatFs/source/ff.c **** 			d = (BYTE)p[si++];			/* Get 2nd byte */
3025:DRIVER/FatFs/source/ff.c **** 			if (!dbc_2nd(d) || i >= ni - 1) return FR_INVALID_NAME;	/* Reject invalid DBC */
3026:DRIVER/FatFs/source/ff.c **** 			sfn[i++] = c;
3027:DRIVER/FatFs/source/ff.c **** 			sfn[i++] = d;
3028:DRIVER/FatFs/source/ff.c **** 		} else {						/* SBC */
3029:DRIVER/FatFs/source/ff.c **** 			if (strchr("*+,:;<=>[]|\"\?\x7F", (int)c)) return FR_INVALID_NAME;	/* Reject illegal chrs for SF
3030:DRIVER/FatFs/source/ff.c **** 			if (IsLower(c)) c -= 0x20;	/* To upper */
3031:DRIVER/FatFs/source/ff.c **** 			sfn[i++] = c;
3032:DRIVER/FatFs/source/ff.c **** 		}
3033:DRIVER/FatFs/source/ff.c **** 	}
3034:DRIVER/FatFs/source/ff.c **** 	*path = &p[si];						/* Return pointer to the next segment */
3035:DRIVER/FatFs/source/ff.c **** 	if (i == 0) return FR_INVALID_NAME;	/* Reject nul string */
3036:DRIVER/FatFs/source/ff.c **** 
3037:DRIVER/FatFs/source/ff.c **** 	if (sfn[0] == DDEM) sfn[0] = RDDEM;	/* If the first character collides with DDEM, replace it with 
3038:DRIVER/FatFs/source/ff.c **** 	sfn[NSFLAG] = (c <= ' ' || p[si] <= ' ') ? NS_LAST : 0;	/* Set last segment flag if end of the pat
3039:DRIVER/FatFs/source/ff.c **** 
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 76


3040:DRIVER/FatFs/source/ff.c **** 	return FR_OK;
3041:DRIVER/FatFs/source/ff.c **** #endif /* FF_USE_LFN */
3042:DRIVER/FatFs/source/ff.c **** }
3043:DRIVER/FatFs/source/ff.c **** 
3044:DRIVER/FatFs/source/ff.c **** 
3045:DRIVER/FatFs/source/ff.c **** 
3046:DRIVER/FatFs/source/ff.c **** 
3047:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
3048:DRIVER/FatFs/source/ff.c **** /* Follow a file path                                                    */
3049:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
3050:DRIVER/FatFs/source/ff.c **** 
3051:DRIVER/FatFs/source/ff.c **** static FRESULT follow_path (	/* FR_OK(0): successful, !=0: error code */
3052:DRIVER/FatFs/source/ff.c **** 	DIR* dp,					/* Directory object to return last directory and found object */
3053:DRIVER/FatFs/source/ff.c **** 	const TCHAR* path			/* Full-path string to find a file or directory */
3054:DRIVER/FatFs/source/ff.c **** )
3055:DRIVER/FatFs/source/ff.c **** {
3056:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
3057:DRIVER/FatFs/source/ff.c **** 	BYTE ns;
3058:DRIVER/FatFs/source/ff.c **** 	FATFS *fs = dp->obj.fs;
3059:DRIVER/FatFs/source/ff.c **** 
3060:DRIVER/FatFs/source/ff.c **** 
3061:DRIVER/FatFs/source/ff.c **** #if FF_FS_RPATH != 0
3062:DRIVER/FatFs/source/ff.c **** 	if (!IsSeparator(*path) && (FF_STR_VOLUME_ID != 2 || !IsTerminator(*path))) {	/* Without heading s
3063:DRIVER/FatFs/source/ff.c **** 		dp->obj.sclust = fs->cdir;			/* Start at the current directory */
3064:DRIVER/FatFs/source/ff.c **** 	} else
3065:DRIVER/FatFs/source/ff.c **** #endif
3066:DRIVER/FatFs/source/ff.c **** 	{										/* With heading separator */
3067:DRIVER/FatFs/source/ff.c **** 		while (IsSeparator(*path)) path++;	/* Strip separators */
3068:DRIVER/FatFs/source/ff.c **** 		dp->obj.sclust = 0;					/* Start from the root directory */
3069:DRIVER/FatFs/source/ff.c **** 	}
3070:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
3071:DRIVER/FatFs/source/ff.c **** 	dp->obj.n_frag = 0;	/* Invalidate last fragment counter of the object */
3072:DRIVER/FatFs/source/ff.c **** #if FF_FS_RPATH != 0
3073:DRIVER/FatFs/source/ff.c **** 	if (fs->fs_type == FS_EXFAT && dp->obj.sclust) {	/* exFAT: Retrieve the sub-directory's status */
3074:DRIVER/FatFs/source/ff.c **** 		DIR dj;
3075:DRIVER/FatFs/source/ff.c **** 
3076:DRIVER/FatFs/source/ff.c **** 		dp->obj.c_scl = fs->cdc_scl;
3077:DRIVER/FatFs/source/ff.c **** 		dp->obj.c_size = fs->cdc_size;
3078:DRIVER/FatFs/source/ff.c **** 		dp->obj.c_ofs = fs->cdc_ofs;
3079:DRIVER/FatFs/source/ff.c **** 		res = load_obj_xdir(&dj, &dp->obj);
3080:DRIVER/FatFs/source/ff.c **** 		if (res != FR_OK) return res;
3081:DRIVER/FatFs/source/ff.c **** 		dp->obj.objsize = ld_dword(fs->dirbuf + XDIR_FileSize);
3082:DRIVER/FatFs/source/ff.c **** 		dp->obj.stat = fs->dirbuf[XDIR_GenFlags] & 2;
3083:DRIVER/FatFs/source/ff.c **** 	}
3084:DRIVER/FatFs/source/ff.c **** #endif
3085:DRIVER/FatFs/source/ff.c **** #endif
3086:DRIVER/FatFs/source/ff.c **** 
3087:DRIVER/FatFs/source/ff.c **** 	if ((UINT)*path < ' ') {				/* Null path name is the origin directory itself */
3088:DRIVER/FatFs/source/ff.c **** 		dp->fn[NSFLAG] = NS_NONAME;
3089:DRIVER/FatFs/source/ff.c **** 		res = dir_sdi(dp, 0);
3090:DRIVER/FatFs/source/ff.c **** 
3091:DRIVER/FatFs/source/ff.c **** 	} else {								/* Follow path */
3092:DRIVER/FatFs/source/ff.c **** 		for (;;) {
3093:DRIVER/FatFs/source/ff.c **** 			res = create_name(dp, &path);	/* Get a segment name of the path */
3094:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) break;
3095:DRIVER/FatFs/source/ff.c **** 			res = dir_find(dp);				/* Find an object with the segment name */
3096:DRIVER/FatFs/source/ff.c **** 			ns = dp->fn[NSFLAG];
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 77


3097:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) {				/* Failed to find the object */
3098:DRIVER/FatFs/source/ff.c **** 				if (res == FR_NO_FILE) {	/* Object is not found */
3099:DRIVER/FatFs/source/ff.c **** 					if (FF_FS_RPATH && (ns & NS_DOT)) {	/* If dot entry is not exist, stay there */
3100:DRIVER/FatFs/source/ff.c **** 						if (!(ns & NS_LAST)) continue;	/* Continue to follow if not last segment */
3101:DRIVER/FatFs/source/ff.c **** 						dp->fn[NSFLAG] = NS_NONAME;
3102:DRIVER/FatFs/source/ff.c **** 						res = FR_OK;
3103:DRIVER/FatFs/source/ff.c **** 					} else {							/* Could not find the object */
3104:DRIVER/FatFs/source/ff.c **** 						if (!(ns & NS_LAST)) res = FR_NO_PATH;	/* Adjust error code if not last segment */
3105:DRIVER/FatFs/source/ff.c **** 					}
3106:DRIVER/FatFs/source/ff.c **** 				}
3107:DRIVER/FatFs/source/ff.c **** 				break;
3108:DRIVER/FatFs/source/ff.c **** 			}
3109:DRIVER/FatFs/source/ff.c **** 			if (ns & NS_LAST) break;		/* Last segment matched. Function completed. */
3110:DRIVER/FatFs/source/ff.c **** 			/* Get into the sub-directory */
3111:DRIVER/FatFs/source/ff.c **** 			if (!(dp->obj.attr & AM_DIR)) {	/* It is not a sub-directory and cannot follow */
3112:DRIVER/FatFs/source/ff.c **** 				res = FR_NO_PATH; break;
3113:DRIVER/FatFs/source/ff.c **** 			}
3114:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
3115:DRIVER/FatFs/source/ff.c **** 			if (fs->fs_type == FS_EXFAT) {	/* Save containing directory information for next dir */
3116:DRIVER/FatFs/source/ff.c **** 				dp->obj.c_scl = dp->obj.sclust;
3117:DRIVER/FatFs/source/ff.c **** 				dp->obj.c_size = ((DWORD)dp->obj.objsize & 0xFFFFFF00) | dp->obj.stat;
3118:DRIVER/FatFs/source/ff.c **** 				dp->obj.c_ofs = dp->blk_ofs;
3119:DRIVER/FatFs/source/ff.c **** 				init_alloc_info(fs, &dp->obj);	/* Open next directory */
3120:DRIVER/FatFs/source/ff.c **** 			} else
3121:DRIVER/FatFs/source/ff.c **** #endif
3122:DRIVER/FatFs/source/ff.c **** 			{
3123:DRIVER/FatFs/source/ff.c **** 				dp->obj.sclust = ld_clust(fs, fs->win + dp->dptr % SS(fs));	/* Open next directory */
3124:DRIVER/FatFs/source/ff.c **** 			}
3125:DRIVER/FatFs/source/ff.c **** 		}
3126:DRIVER/FatFs/source/ff.c **** 	}
3127:DRIVER/FatFs/source/ff.c **** 
3128:DRIVER/FatFs/source/ff.c **** 	return res;
3129:DRIVER/FatFs/source/ff.c **** }
3130:DRIVER/FatFs/source/ff.c **** 
3131:DRIVER/FatFs/source/ff.c **** 
3132:DRIVER/FatFs/source/ff.c **** 
3133:DRIVER/FatFs/source/ff.c **** 
3134:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
3135:DRIVER/FatFs/source/ff.c **** /* Get logical drive number from path name                               */
3136:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
3137:DRIVER/FatFs/source/ff.c **** 
3138:DRIVER/FatFs/source/ff.c **** static int get_ldnumber (	/* Returns logical drive number (-1:invalid drive number or null pointer)
3139:DRIVER/FatFs/source/ff.c **** 	const TCHAR** path		/* Pointer to pointer to the path name */
3140:DRIVER/FatFs/source/ff.c **** )
3141:DRIVER/FatFs/source/ff.c **** {
 1159              		.loc 1 3141 1 is_stmt 1 view -0
 1160              		.cfi_startproc
 1161              		@ args = 0, pretend = 0, frame = 0
 1162              		@ frame_needed = 0, uses_anonymous_args = 0
 1163              		@ link register save eliminated.
 1164              		.loc 1 3141 1 is_stmt 0 view .LVU375
 1165 0000 0146     		mov	r1, r0
3142:DRIVER/FatFs/source/ff.c **** 	const TCHAR *tp;
 1166              		.loc 1 3142 2 is_stmt 1 view .LVU376
3143:DRIVER/FatFs/source/ff.c **** 	const TCHAR *tt;
 1167              		.loc 1 3143 2 view .LVU377
3144:DRIVER/FatFs/source/ff.c **** 	TCHAR tc;
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 78


 1168              		.loc 1 3144 2 view .LVU378
3145:DRIVER/FatFs/source/ff.c **** 	int i;
 1169              		.loc 1 3145 2 view .LVU379
3146:DRIVER/FatFs/source/ff.c **** 	int vol = -1;
 1170              		.loc 1 3146 2 view .LVU380
 1171              	.LVL147:
3147:DRIVER/FatFs/source/ff.c **** #if FF_STR_VOLUME_ID		/* Find string volume ID */
3148:DRIVER/FatFs/source/ff.c **** 	const char *sp;
3149:DRIVER/FatFs/source/ff.c **** 	char c;
3150:DRIVER/FatFs/source/ff.c **** #endif
3151:DRIVER/FatFs/source/ff.c **** 
3152:DRIVER/FatFs/source/ff.c **** 	tt = tp = *path;
 1172              		.loc 1 3152 2 view .LVU381
 1173              		.loc 1 3152 10 is_stmt 0 view .LVU382
 1174 0002 0068     		ldr	r0, [r0]
 1175              	.LVL148:
3153:DRIVER/FatFs/source/ff.c **** 	if (!tp) return vol;	/* Invalid path name? */
 1176              		.loc 1 3153 2 is_stmt 1 view .LVU383
 1177              		.loc 1 3153 5 is_stmt 0 view .LVU384
 1178 0004 20B3     		cbz	r0, .L84
3152:DRIVER/FatFs/source/ff.c **** 	if (!tp) return vol;	/* Invalid path name? */
 1179              		.loc 1 3152 5 view .LVU385
 1180 0006 0246     		mov	r2, r0
 1181              	.LVL149:
 1182              	.L82:
3154:DRIVER/FatFs/source/ff.c **** 	do {					/* Find a colon in the path */
 1183              		.loc 1 3154 2 is_stmt 1 discriminator 2 view .LVU386
3155:DRIVER/FatFs/source/ff.c **** 		tc = *tt++;
 1184              		.loc 1 3155 3 discriminator 2 view .LVU387
 1185              		.loc 1 3155 6 is_stmt 0 discriminator 2 view .LVU388
 1186 0008 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 1187 000a 0132     		adds	r2, r2, #1
 1188              	.LVL150:
3156:DRIVER/FatFs/source/ff.c **** 	} while (!IsTerminator(tc) && tc != ':');
 1189              		.loc 1 3156 29 is_stmt 1 discriminator 2 view .LVU389
 1190 000c 1F2B     		cmp	r3, #31
 1191 000e 01D9     		bls	.L81
 1192              		.loc 1 3156 29 is_stmt 0 discriminator 1 view .LVU390
 1193 0010 3A2B     		cmp	r3, #58
 1194 0012 F9D1     		bne	.L82
 1195              	.L81:
3157:DRIVER/FatFs/source/ff.c **** 
3158:DRIVER/FatFs/source/ff.c **** 	if (tc == ':') {	/* DOS/Windows style volume ID? */
 1196              		.loc 1 3158 2 is_stmt 1 view .LVU391
 1197              		.loc 1 3158 5 is_stmt 0 view .LVU392
 1198 0014 3A2B     		cmp	r3, #58
 1199 0016 01D0     		beq	.L89
3159:DRIVER/FatFs/source/ff.c **** 		i = FF_VOLUMES;
3160:DRIVER/FatFs/source/ff.c **** 		if (IsDigit(*tp) && tp + 2 == tt) {	/* Is there a numeric volume ID + colon? */
3161:DRIVER/FatFs/source/ff.c **** 			i = (int)*tp - '0';	/* Get the LD number */
3162:DRIVER/FatFs/source/ff.c **** 		}
3163:DRIVER/FatFs/source/ff.c **** #if FF_STR_VOLUME_ID == 1	/* Arbitrary string is enabled */
3164:DRIVER/FatFs/source/ff.c **** 		else {
3165:DRIVER/FatFs/source/ff.c **** 			i = 0;
3166:DRIVER/FatFs/source/ff.c **** 			do {
3167:DRIVER/FatFs/source/ff.c **** 				sp = VolumeStr[i]; tp = *path;	/* This string volume ID and path name */
3168:DRIVER/FatFs/source/ff.c **** 				do {	/* Compare the volume ID with path name */
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 79


3169:DRIVER/FatFs/source/ff.c **** 					c = *sp++; tc = *tp++;
3170:DRIVER/FatFs/source/ff.c **** 					if (IsLower(c)) c -= 0x20;
3171:DRIVER/FatFs/source/ff.c **** 					if (IsLower(tc)) tc -= 0x20;
3172:DRIVER/FatFs/source/ff.c **** 				} while (c && (TCHAR)c == tc);
3173:DRIVER/FatFs/source/ff.c **** 			} while ((c || tp != tt) && ++i < FF_VOLUMES);	/* Repeat for each id until pattern match */
3174:DRIVER/FatFs/source/ff.c **** 		}
3175:DRIVER/FatFs/source/ff.c **** #endif
3176:DRIVER/FatFs/source/ff.c **** 		if (i < FF_VOLUMES) {	/* If a volume ID is found, get the drive number and strip it */
3177:DRIVER/FatFs/source/ff.c **** 			vol = i;		/* Drive number */
3178:DRIVER/FatFs/source/ff.c **** 			*path = tt;		/* Snip the drive prefix off */
3179:DRIVER/FatFs/source/ff.c **** 		}
3180:DRIVER/FatFs/source/ff.c **** 		return vol;
3181:DRIVER/FatFs/source/ff.c **** 	}
3182:DRIVER/FatFs/source/ff.c **** #if FF_STR_VOLUME_ID == 2		/* Unix style volume ID is enabled */
3183:DRIVER/FatFs/source/ff.c **** 	if (*tp == '/') {			/* Is there a volume ID? */
3184:DRIVER/FatFs/source/ff.c **** 		while (*(tp + 1) == '/') tp++;	/* Skip duplicated separator */
3185:DRIVER/FatFs/source/ff.c **** 		i = 0;
3186:DRIVER/FatFs/source/ff.c **** 		do {
3187:DRIVER/FatFs/source/ff.c **** 			tt = tp; sp = VolumeStr[i]; /* Path name and this string volume ID */
3188:DRIVER/FatFs/source/ff.c **** 			do {	/* Compare the volume ID with path name */
3189:DRIVER/FatFs/source/ff.c **** 				c = *sp++; tc = *(++tt);
3190:DRIVER/FatFs/source/ff.c **** 				if (IsLower(c)) c -= 0x20;
3191:DRIVER/FatFs/source/ff.c **** 				if (IsLower(tc)) tc -= 0x20;
3192:DRIVER/FatFs/source/ff.c **** 			} while (c && (TCHAR)c == tc);
3193:DRIVER/FatFs/source/ff.c **** 		} while ((c || (tc != '/' && !IsTerminator(tc))) && ++i < FF_VOLUMES);	/* Repeat for each ID unti
3194:DRIVER/FatFs/source/ff.c **** 		if (i < FF_VOLUMES) {	/* If a volume ID is found, get the drive number and strip it */
3195:DRIVER/FatFs/source/ff.c **** 			vol = i;		/* Drive number */
3196:DRIVER/FatFs/source/ff.c **** 			*path = tt;		/* Snip the drive prefix off */
3197:DRIVER/FatFs/source/ff.c **** 		}
3198:DRIVER/FatFs/source/ff.c **** 		return vol;
3199:DRIVER/FatFs/source/ff.c **** 	}
3200:DRIVER/FatFs/source/ff.c **** #endif
3201:DRIVER/FatFs/source/ff.c **** 	/* No drive prefix is found */
3202:DRIVER/FatFs/source/ff.c **** #if FF_FS_RPATH != 0
3203:DRIVER/FatFs/source/ff.c **** 	vol = CurrVol;	/* Default drive is current drive */
3204:DRIVER/FatFs/source/ff.c **** #else
3205:DRIVER/FatFs/source/ff.c **** 	vol = 0;		/* Default drive is 0 */
3206:DRIVER/FatFs/source/ff.c **** #endif
3207:DRIVER/FatFs/source/ff.c **** 	return vol;		/* Return the default drive */
 1200              		.loc 1 3207 9 view .LVU393
 1201 0018 0020     		movs	r0, #0
 1202              	.LVL151:
3208:DRIVER/FatFs/source/ff.c **** }
 1203              		.loc 1 3208 1 view .LVU394
 1204 001a 7047     		bx	lr
 1205              	.LVL152:
 1206              	.L89:
3159:DRIVER/FatFs/source/ff.c **** 		i = FF_VOLUMES;
 1207              		.loc 1 3159 3 is_stmt 1 view .LVU395
3160:DRIVER/FatFs/source/ff.c **** 			i = (int)*tp - '0';	/* Get the LD number */
 1208              		.loc 1 3160 3 view .LVU396
3160:DRIVER/FatFs/source/ff.c **** 			i = (int)*tp - '0';	/* Get the LD number */
 1209              		.loc 1 3160 7 is_stmt 0 view .LVU397
 1210 001c 0378     		ldrb	r3, [r0]	@ zero_extendqisi2
 1211              	.LVL153:
3160:DRIVER/FatFs/source/ff.c **** 			i = (int)*tp - '0';	/* Get the LD number */
 1212              		.loc 1 3160 7 view .LVU398
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 80


 1213 001e A3F1300C 		sub	ip, r3, #48
 1214 0022 5FFA8CFC 		uxtb	ip, ip
3160:DRIVER/FatFs/source/ff.c **** 			i = (int)*tp - '0';	/* Get the LD number */
 1215              		.loc 1 3160 6 view .LVU399
 1216 0026 BCF1090F 		cmp	ip, #9
 1217 002a 0ED8     		bhi	.L86
3160:DRIVER/FatFs/source/ff.c **** 			i = (int)*tp - '0';	/* Get the LD number */
 1218              		.loc 1 3160 26 discriminator 1 view .LVU400
 1219 002c 0230     		adds	r0, r0, #2
 1220              	.LVL154:
3160:DRIVER/FatFs/source/ff.c **** 			i = (int)*tp - '0';	/* Get the LD number */
 1221              		.loc 1 3160 20 discriminator 1 view .LVU401
 1222 002e 9042     		cmp	r0, r2
 1223 0030 02D0     		beq	.L90
3146:DRIVER/FatFs/source/ff.c **** #if FF_STR_VOLUME_ID		/* Find string volume ID */
 1224              		.loc 1 3146 6 view .LVU402
 1225 0032 4FF0FF30 		mov	r0, #-1
 1226 0036 7047     		bx	lr
 1227              	.L90:
3161:DRIVER/FatFs/source/ff.c **** 		}
 1228              		.loc 1 3161 4 is_stmt 1 view .LVU403
3161:DRIVER/FatFs/source/ff.c **** 		}
 1229              		.loc 1 3161 6 is_stmt 0 view .LVU404
 1230 0038 A3F13000 		sub	r0, r3, #48
 1231              	.LVL155:
3176:DRIVER/FatFs/source/ff.c **** 			vol = i;		/* Drive number */
 1232              		.loc 1 3176 3 is_stmt 1 view .LVU405
3176:DRIVER/FatFs/source/ff.c **** 			vol = i;		/* Drive number */
 1233              		.loc 1 3176 6 is_stmt 0 view .LVU406
 1234 003c 0128     		cmp	r0, #1
 1235 003e 02DD     		ble	.L91
3146:DRIVER/FatFs/source/ff.c **** #if FF_STR_VOLUME_ID		/* Find string volume ID */
 1236              		.loc 1 3146 6 view .LVU407
 1237 0040 4FF0FF30 		mov	r0, #-1
 1238              	.LVL156:
3180:DRIVER/FatFs/source/ff.c **** 	}
 1239              		.loc 1 3180 3 is_stmt 1 view .LVU408
3180:DRIVER/FatFs/source/ff.c **** 	}
 1240              		.loc 1 3180 10 is_stmt 0 view .LVU409
 1241 0044 7047     		bx	lr
 1242              	.LVL157:
 1243              	.L91:
3177:DRIVER/FatFs/source/ff.c **** 			*path = tt;		/* Snip the drive prefix off */
 1244              		.loc 1 3177 4 is_stmt 1 view .LVU410
3178:DRIVER/FatFs/source/ff.c **** 		}
 1245              		.loc 1 3178 4 view .LVU411
3178:DRIVER/FatFs/source/ff.c **** 		}
 1246              		.loc 1 3178 10 is_stmt 0 view .LVU412
 1247 0046 0A60     		str	r2, [r1]
 1248              	.LVL158:
3178:DRIVER/FatFs/source/ff.c **** 		}
 1249              		.loc 1 3178 10 view .LVU413
 1250 0048 7047     		bx	lr
 1251              	.LVL159:
 1252              	.L86:
3146:DRIVER/FatFs/source/ff.c **** #if FF_STR_VOLUME_ID		/* Find string volume ID */
 1253              		.loc 1 3146 6 view .LVU414
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 81


 1254 004a 4FF0FF30 		mov	r0, #-1
 1255              	.LVL160:
3146:DRIVER/FatFs/source/ff.c **** #if FF_STR_VOLUME_ID		/* Find string volume ID */
 1256              		.loc 1 3146 6 view .LVU415
 1257 004e 7047     		bx	lr
 1258              	.LVL161:
 1259              	.L84:
3153:DRIVER/FatFs/source/ff.c **** 	do {					/* Find a colon in the path */
 1260              		.loc 1 3153 18 view .LVU416
 1261 0050 4FF0FF30 		mov	r0, #-1
 1262              	.LVL162:
3153:DRIVER/FatFs/source/ff.c **** 	do {					/* Find a colon in the path */
 1263              		.loc 1 3153 18 view .LVU417
 1264 0054 7047     		bx	lr
 1265              		.cfi_endproc
 1266              	.LFE34:
 1268              		.section	.text.validate,"ax",%progbits
 1269              		.align	1
 1270              		.syntax unified
 1271              		.thumb
 1272              		.thumb_func
 1274              	validate:
 1275              	.LVL163:
 1276              	.LFB38:
3209:DRIVER/FatFs/source/ff.c **** 
3210:DRIVER/FatFs/source/ff.c **** 
3211:DRIVER/FatFs/source/ff.c **** 
3212:DRIVER/FatFs/source/ff.c **** 
3213:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
3214:DRIVER/FatFs/source/ff.c **** /* GPT support functions                                                 */
3215:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
3216:DRIVER/FatFs/source/ff.c **** 
3217:DRIVER/FatFs/source/ff.c **** #if FF_LBA64
3218:DRIVER/FatFs/source/ff.c **** 
3219:DRIVER/FatFs/source/ff.c **** /* Calculate CRC32 in byte-by-byte */
3220:DRIVER/FatFs/source/ff.c **** 
3221:DRIVER/FatFs/source/ff.c **** static DWORD crc32 (	/* Returns next CRC value */
3222:DRIVER/FatFs/source/ff.c **** 	DWORD crc,			/* Current CRC value */
3223:DRIVER/FatFs/source/ff.c **** 	BYTE d				/* A byte to be processed */
3224:DRIVER/FatFs/source/ff.c **** )
3225:DRIVER/FatFs/source/ff.c **** {
3226:DRIVER/FatFs/source/ff.c **** 	BYTE b;
3227:DRIVER/FatFs/source/ff.c **** 
3228:DRIVER/FatFs/source/ff.c **** 
3229:DRIVER/FatFs/source/ff.c **** 	for (b = 1; b; b <<= 1) {
3230:DRIVER/FatFs/source/ff.c **** 		crc ^= (d & b) ? 1 : 0;
3231:DRIVER/FatFs/source/ff.c **** 		crc = (crc & 1) ? crc >> 1 ^ 0xEDB88320 : crc >> 1;
3232:DRIVER/FatFs/source/ff.c **** 	}
3233:DRIVER/FatFs/source/ff.c **** 	return crc;
3234:DRIVER/FatFs/source/ff.c **** }
3235:DRIVER/FatFs/source/ff.c **** 
3236:DRIVER/FatFs/source/ff.c **** 
3237:DRIVER/FatFs/source/ff.c **** /* Check validity of GPT header */
3238:DRIVER/FatFs/source/ff.c **** 
3239:DRIVER/FatFs/source/ff.c **** static int test_gpt_header (	/* 0:Invalid, 1:Valid */
3240:DRIVER/FatFs/source/ff.c **** 	const BYTE* gpth			/* Pointer to the GPT header */
3241:DRIVER/FatFs/source/ff.c **** )
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 82


3242:DRIVER/FatFs/source/ff.c **** {
3243:DRIVER/FatFs/source/ff.c **** 	UINT i;
3244:DRIVER/FatFs/source/ff.c **** 	DWORD bcc, hlen;
3245:DRIVER/FatFs/source/ff.c **** 
3246:DRIVER/FatFs/source/ff.c **** 
3247:DRIVER/FatFs/source/ff.c **** 	if (memcmp(gpth + GPTH_Sign, "EFI PART" "\0\0\1", 12)) return 0;	/* Check signature and version (1
3248:DRIVER/FatFs/source/ff.c **** 	hlen = ld_dword(gpth + GPTH_Size);						/* Check header size */
3249:DRIVER/FatFs/source/ff.c **** 	if (hlen < 92 || hlen > FF_MIN_SS) return 0;
3250:DRIVER/FatFs/source/ff.c **** 	for (i = 0, bcc = 0xFFFFFFFF; i < hlen; i++) {			/* Check header BCC */
3251:DRIVER/FatFs/source/ff.c **** 		bcc = crc32(bcc, i - GPTH_Bcc < 4 ? 0 : gpth[i]);
3252:DRIVER/FatFs/source/ff.c **** 	}
3253:DRIVER/FatFs/source/ff.c **** 	if (~bcc != ld_dword(gpth + GPTH_Bcc)) return 0;
3254:DRIVER/FatFs/source/ff.c **** 	if (ld_dword(gpth + GPTH_PteSize) != SZ_GPTE) return 0;	/* Table entry size (must be SZ_GPTE bytes
3255:DRIVER/FatFs/source/ff.c **** 	if (ld_dword(gpth + GPTH_PtNum) > 128) return 0;		/* Table size (must be 128 entries or less) */
3256:DRIVER/FatFs/source/ff.c **** 
3257:DRIVER/FatFs/source/ff.c **** 	return 1;
3258:DRIVER/FatFs/source/ff.c **** }
3259:DRIVER/FatFs/source/ff.c **** 
3260:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY && FF_USE_MKFS
3261:DRIVER/FatFs/source/ff.c **** 
3262:DRIVER/FatFs/source/ff.c **** /* Generate random value */
3263:DRIVER/FatFs/source/ff.c **** static DWORD make_rand (
3264:DRIVER/FatFs/source/ff.c **** 	DWORD seed,		/* Seed value */
3265:DRIVER/FatFs/source/ff.c **** 	BYTE *buff,		/* Output buffer */
3266:DRIVER/FatFs/source/ff.c **** 	UINT n			/* Data length */
3267:DRIVER/FatFs/source/ff.c **** )
3268:DRIVER/FatFs/source/ff.c **** {
3269:DRIVER/FatFs/source/ff.c **** 	UINT r;
3270:DRIVER/FatFs/source/ff.c **** 
3271:DRIVER/FatFs/source/ff.c **** 
3272:DRIVER/FatFs/source/ff.c **** 	if (seed == 0) seed = 1;
3273:DRIVER/FatFs/source/ff.c **** 	do {
3274:DRIVER/FatFs/source/ff.c **** 		for (r = 0; r < 8; r++) seed = seed & 1 ? seed >> 1 ^ 0xA3000000 : seed >> 1;	/* Shift 8 bits the
3275:DRIVER/FatFs/source/ff.c **** 		*buff++ = (BYTE)seed;
3276:DRIVER/FatFs/source/ff.c **** 	} while (--n);
3277:DRIVER/FatFs/source/ff.c **** 	return seed;
3278:DRIVER/FatFs/source/ff.c **** }
3279:DRIVER/FatFs/source/ff.c **** 
3280:DRIVER/FatFs/source/ff.c **** #endif
3281:DRIVER/FatFs/source/ff.c **** #endif
3282:DRIVER/FatFs/source/ff.c **** 
3283:DRIVER/FatFs/source/ff.c **** 
3284:DRIVER/FatFs/source/ff.c **** 
3285:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
3286:DRIVER/FatFs/source/ff.c **** /* Load a sector and check if it is an FAT VBR                           */
3287:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
3288:DRIVER/FatFs/source/ff.c **** 
3289:DRIVER/FatFs/source/ff.c **** /* Check what the sector is */
3290:DRIVER/FatFs/source/ff.c **** 
3291:DRIVER/FatFs/source/ff.c **** static UINT check_fs (	/* 0:FAT/FAT32 VBR, 1:exFAT VBR, 2:Not FAT and valid BS, 3:Not FAT and inval
3292:DRIVER/FatFs/source/ff.c **** 	FATFS* fs,			/* Filesystem object */
3293:DRIVER/FatFs/source/ff.c **** 	LBA_t sect			/* Sector to load and check if it is an FAT-VBR or not */
3294:DRIVER/FatFs/source/ff.c **** )
3295:DRIVER/FatFs/source/ff.c **** {
3296:DRIVER/FatFs/source/ff.c **** 	WORD w, sign;
3297:DRIVER/FatFs/source/ff.c **** 	BYTE b;
3298:DRIVER/FatFs/source/ff.c **** 
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 83


3299:DRIVER/FatFs/source/ff.c **** 
3300:DRIVER/FatFs/source/ff.c **** 	fs->wflag = 0; fs->winsect = (LBA_t)0 - 1;		/* Invaidate window */
3301:DRIVER/FatFs/source/ff.c **** 	if (move_window(fs, sect) != FR_OK) return 4;	/* Load the boot sector */
3302:DRIVER/FatFs/source/ff.c **** 	sign = ld_word(fs->win + BS_55AA);
3303:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
3304:DRIVER/FatFs/source/ff.c **** 	if (sign == 0xAA55 && !memcmp(fs->win + BS_JmpBoot, "\xEB\x76\x90" "EXFAT   ", 11)) return 1;	/* I
3305:DRIVER/FatFs/source/ff.c **** #endif
3306:DRIVER/FatFs/source/ff.c **** 	b = fs->win[BS_JmpBoot];
3307:DRIVER/FatFs/source/ff.c **** 	if (b == 0xEB || b == 0xE9 || b == 0xE8) {	/* Valid JumpBoot code? (short jump, near jump or near 
3308:DRIVER/FatFs/source/ff.c **** 		if (sign == 0xAA55 && !memcmp(fs->win + BS_FilSysType32, "FAT32   ", 8)) {
3309:DRIVER/FatFs/source/ff.c **** 			return 0;	/* It is an FAT32 VBR */
3310:DRIVER/FatFs/source/ff.c **** 		}
3311:DRIVER/FatFs/source/ff.c **** 		/* FAT volumes formatted with early MS-DOS lack BS_55AA and BS_FilSysType, so FAT VBR needs to be
3312:DRIVER/FatFs/source/ff.c **** 		w = ld_word(fs->win + BPB_BytsPerSec);
3313:DRIVER/FatFs/source/ff.c **** 		b = fs->win[BPB_SecPerClus];
3314:DRIVER/FatFs/source/ff.c **** 		if ((w & (w - 1)) == 0 && w >= FF_MIN_SS && w <= FF_MAX_SS	/* Properness of sector size (512-4096
3315:DRIVER/FatFs/source/ff.c **** 			&& b != 0 && (b & (b - 1)) == 0				/* Properness of cluster size (2^n) */
3316:DRIVER/FatFs/source/ff.c **** 			&& ld_word(fs->win + BPB_RsvdSecCnt) != 0	/* Properness of reserved sectors (MNBZ) */
3317:DRIVER/FatFs/source/ff.c **** 			&& (UINT)fs->win[BPB_NumFATs] - 1 <= 1		/* Properness of FATs (1 or 2) */
3318:DRIVER/FatFs/source/ff.c **** 			&& ld_word(fs->win + BPB_RootEntCnt) != 0	/* Properness of root dir entries (MNBZ) */
3319:DRIVER/FatFs/source/ff.c **** 			&& (ld_word(fs->win + BPB_TotSec16) >= 128 || ld_dword(fs->win + BPB_TotSec32) >= 0x10000)	/* Pr
3320:DRIVER/FatFs/source/ff.c **** 			&& ld_word(fs->win + BPB_FATSz16) != 0) {	/* Properness of FAT size (MNBZ) */
3321:DRIVER/FatFs/source/ff.c **** 				return 0;	/* It can be presumed an FAT VBR */
3322:DRIVER/FatFs/source/ff.c **** 		}
3323:DRIVER/FatFs/source/ff.c **** 	}
3324:DRIVER/FatFs/source/ff.c **** 	return sign == 0xAA55 ? 2 : 3;	/* Not an FAT VBR (valid or invalid BS) */
3325:DRIVER/FatFs/source/ff.c **** }
3326:DRIVER/FatFs/source/ff.c **** 
3327:DRIVER/FatFs/source/ff.c **** 
3328:DRIVER/FatFs/source/ff.c **** /* Find an FAT volume */
3329:DRIVER/FatFs/source/ff.c **** /* (It supports only generic partitioning rules, MBR, GPT and SFD) */
3330:DRIVER/FatFs/source/ff.c **** 
3331:DRIVER/FatFs/source/ff.c **** static UINT find_volume (	/* Returns BS status found in the hosting drive */
3332:DRIVER/FatFs/source/ff.c **** 	FATFS* fs,		/* Filesystem object */
3333:DRIVER/FatFs/source/ff.c **** 	UINT part		/* Partition to fined = 0:find as SFD and partitions, >0:forced partition number */
3334:DRIVER/FatFs/source/ff.c **** )
3335:DRIVER/FatFs/source/ff.c **** {
3336:DRIVER/FatFs/source/ff.c **** 	UINT fmt, i;
3337:DRIVER/FatFs/source/ff.c **** 	DWORD mbr_pt[4];
3338:DRIVER/FatFs/source/ff.c **** 
3339:DRIVER/FatFs/source/ff.c **** 
3340:DRIVER/FatFs/source/ff.c **** 	fmt = check_fs(fs, 0);				/* Load sector 0 and check if it is an FAT VBR as SFD format */
3341:DRIVER/FatFs/source/ff.c **** 	if (fmt != 2 && (fmt >= 3 || part == 0)) return fmt;	/* Returns if it is an FAT VBR as auto scan, 
3342:DRIVER/FatFs/source/ff.c **** 
3343:DRIVER/FatFs/source/ff.c **** 	/* Sector 0 is not an FAT VBR or forced partition number wants a partition */
3344:DRIVER/FatFs/source/ff.c **** 
3345:DRIVER/FatFs/source/ff.c **** #if FF_LBA64
3346:DRIVER/FatFs/source/ff.c **** 	if (fs->win[MBR_Table + PTE_System] == 0xEE) {	/* GPT protective MBR? */
3347:DRIVER/FatFs/source/ff.c **** 		DWORD n_ent, v_ent, ofs;
3348:DRIVER/FatFs/source/ff.c **** 		QWORD pt_lba;
3349:DRIVER/FatFs/source/ff.c **** 
3350:DRIVER/FatFs/source/ff.c **** 		if (move_window(fs, 1) != FR_OK) return 4;	/* Load GPT header sector (next to MBR) */
3351:DRIVER/FatFs/source/ff.c **** 		if (!test_gpt_header(fs->win)) return 3;	/* Check if GPT header is valid */
3352:DRIVER/FatFs/source/ff.c **** 		n_ent = ld_dword(fs->win + GPTH_PtNum);		/* Number of entries */
3353:DRIVER/FatFs/source/ff.c **** 		pt_lba = ld_qword(fs->win + GPTH_PtOfs);	/* Table location */
3354:DRIVER/FatFs/source/ff.c **** 		for (v_ent = i = 0; i < n_ent; i++) {		/* Find FAT partition */
3355:DRIVER/FatFs/source/ff.c **** 			if (move_window(fs, pt_lba + i * SZ_GPTE / SS(fs)) != FR_OK) return 4;	/* PT sector */
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 84


3356:DRIVER/FatFs/source/ff.c **** 			ofs = i * SZ_GPTE % SS(fs);												/* Offset in the sector */
3357:DRIVER/FatFs/source/ff.c **** 			if (!memcmp(fs->win + ofs + GPTE_PtGuid, GUID_MS_Basic, 16)) {	/* MS basic data partition? */
3358:DRIVER/FatFs/source/ff.c **** 				v_ent++;
3359:DRIVER/FatFs/source/ff.c **** 				fmt = check_fs(fs, ld_qword(fs->win + ofs + GPTE_FstLba));	/* Load VBR and check status */
3360:DRIVER/FatFs/source/ff.c **** 				if (part == 0 && fmt <= 1) return fmt;			/* Auto search (valid FAT volume found first) */
3361:DRIVER/FatFs/source/ff.c **** 				if (part != 0 && v_ent == part) return fmt;		/* Forced partition order (regardless of it is val
3362:DRIVER/FatFs/source/ff.c **** 			}
3363:DRIVER/FatFs/source/ff.c **** 		}
3364:DRIVER/FatFs/source/ff.c **** 		return 3;	/* Not found */
3365:DRIVER/FatFs/source/ff.c **** 	}
3366:DRIVER/FatFs/source/ff.c **** #endif
3367:DRIVER/FatFs/source/ff.c **** 	if (FF_MULTI_PARTITION && part > 4) return 3;	/* MBR has 4 partitions max */
3368:DRIVER/FatFs/source/ff.c **** 	for (i = 0; i < 4; i++) {		/* Load partition offset in the MBR */
3369:DRIVER/FatFs/source/ff.c **** 		mbr_pt[i] = ld_dword(fs->win + MBR_Table + i * SZ_PTE + PTE_StLba);
3370:DRIVER/FatFs/source/ff.c **** 	}
3371:DRIVER/FatFs/source/ff.c **** 	i = part ? part - 1 : 0;		/* Table index to find first */
3372:DRIVER/FatFs/source/ff.c **** 	do {							/* Find an FAT volume */
3373:DRIVER/FatFs/source/ff.c **** 		fmt = mbr_pt[i] ? check_fs(fs, mbr_pt[i]) : 3;	/* Check if the partition is FAT */
3374:DRIVER/FatFs/source/ff.c **** 	} while (part == 0 && fmt >= 2 && ++i < 4);
3375:DRIVER/FatFs/source/ff.c **** 	return fmt;
3376:DRIVER/FatFs/source/ff.c **** }
3377:DRIVER/FatFs/source/ff.c **** 
3378:DRIVER/FatFs/source/ff.c **** 
3379:DRIVER/FatFs/source/ff.c **** 
3380:DRIVER/FatFs/source/ff.c **** 
3381:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
3382:DRIVER/FatFs/source/ff.c **** /* Determine logical drive number and mount the volume if needed         */
3383:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
3384:DRIVER/FatFs/source/ff.c **** 
3385:DRIVER/FatFs/source/ff.c **** static FRESULT mount_volume (	/* FR_OK(0): successful, !=0: an error occurred */
3386:DRIVER/FatFs/source/ff.c **** 	const TCHAR** path,			/* Pointer to pointer to the path name (drive number) */
3387:DRIVER/FatFs/source/ff.c **** 	FATFS** rfs,				/* Pointer to pointer to the found filesystem object */
3388:DRIVER/FatFs/source/ff.c **** 	BYTE mode					/* Desiered access mode to check write protection */
3389:DRIVER/FatFs/source/ff.c **** )
3390:DRIVER/FatFs/source/ff.c **** {
3391:DRIVER/FatFs/source/ff.c **** 	int vol;
3392:DRIVER/FatFs/source/ff.c **** 	FATFS *fs;
3393:DRIVER/FatFs/source/ff.c **** 	DSTATUS stat;
3394:DRIVER/FatFs/source/ff.c **** 	LBA_t bsect;
3395:DRIVER/FatFs/source/ff.c **** 	DWORD tsect, sysect, fasize, nclst, szbfat;
3396:DRIVER/FatFs/source/ff.c **** 	WORD nrsv;
3397:DRIVER/FatFs/source/ff.c **** 	UINT fmt;
3398:DRIVER/FatFs/source/ff.c **** 
3399:DRIVER/FatFs/source/ff.c **** 
3400:DRIVER/FatFs/source/ff.c **** 	/* Get logical drive number */
3401:DRIVER/FatFs/source/ff.c **** 	*rfs = 0;
3402:DRIVER/FatFs/source/ff.c **** 	vol = get_ldnumber(path);
3403:DRIVER/FatFs/source/ff.c **** 	if (vol < 0) return FR_INVALID_DRIVE;
3404:DRIVER/FatFs/source/ff.c **** 
3405:DRIVER/FatFs/source/ff.c **** 	/* Check if the filesystem object is valid or not */
3406:DRIVER/FatFs/source/ff.c **** 	fs = FatFs[vol];					/* Get pointer to the filesystem object */
3407:DRIVER/FatFs/source/ff.c **** 	if (!fs) return FR_NOT_ENABLED;		/* Is the filesystem object available? */
3408:DRIVER/FatFs/source/ff.c **** #if FF_FS_REENTRANT
3409:DRIVER/FatFs/source/ff.c **** 	if (!lock_volume(fs, 1)) return FR_TIMEOUT;	/* Lock the volume, and system if needed */
3410:DRIVER/FatFs/source/ff.c **** #endif
3411:DRIVER/FatFs/source/ff.c **** 	*rfs = fs;							/* Return pointer to the filesystem object */
3412:DRIVER/FatFs/source/ff.c **** 
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 85


3413:DRIVER/FatFs/source/ff.c **** 	mode &= (BYTE)~FA_READ;				/* Desired access mode, write access or not */
3414:DRIVER/FatFs/source/ff.c **** 	if (fs->fs_type != 0) {				/* If the volume has been mounted */
3415:DRIVER/FatFs/source/ff.c **** 		stat = disk_status(fs->pdrv);
3416:DRIVER/FatFs/source/ff.c **** 		if (!(stat & STA_NOINIT)) {		/* and the physical drive is kept initialized */
3417:DRIVER/FatFs/source/ff.c **** 			if (!FF_FS_READONLY && mode && (stat & STA_PROTECT)) {	/* Check write protection if needed */
3418:DRIVER/FatFs/source/ff.c **** 				return FR_WRITE_PROTECTED;
3419:DRIVER/FatFs/source/ff.c **** 			}
3420:DRIVER/FatFs/source/ff.c **** 			return FR_OK;				/* The filesystem object is already valid */
3421:DRIVER/FatFs/source/ff.c **** 		}
3422:DRIVER/FatFs/source/ff.c **** 	}
3423:DRIVER/FatFs/source/ff.c **** 
3424:DRIVER/FatFs/source/ff.c **** 	/* The filesystem object is not valid. */
3425:DRIVER/FatFs/source/ff.c **** 	/* Following code attempts to mount the volume. (find an FAT volume, analyze the BPB and initializ
3426:DRIVER/FatFs/source/ff.c **** 
3427:DRIVER/FatFs/source/ff.c **** 	fs->fs_type = 0;					/* Invalidate the filesystem object */
3428:DRIVER/FatFs/source/ff.c **** 	stat = disk_initialize(fs->pdrv);	/* Initialize the volume hosting physical drive */
3429:DRIVER/FatFs/source/ff.c **** 	if (stat & STA_NOINIT) { 			/* Check if the initialization succeeded */
3430:DRIVER/FatFs/source/ff.c **** 		return FR_NOT_READY;			/* Failed to initialize due to no medium or hard error */
3431:DRIVER/FatFs/source/ff.c **** 	}
3432:DRIVER/FatFs/source/ff.c **** 	if (!FF_FS_READONLY && mode && (stat & STA_PROTECT)) { /* Check disk write protection if needed */
3433:DRIVER/FatFs/source/ff.c **** 		return FR_WRITE_PROTECTED;
3434:DRIVER/FatFs/source/ff.c **** 	}
3435:DRIVER/FatFs/source/ff.c **** #if FF_MAX_SS != FF_MIN_SS				/* Get sector size (multiple sector size cfg only) */
3436:DRIVER/FatFs/source/ff.c **** 	if (disk_ioctl(fs->pdrv, GET_SECTOR_SIZE, &SS(fs)) != RES_OK) return FR_DISK_ERR;
3437:DRIVER/FatFs/source/ff.c **** 	if (SS(fs) > FF_MAX_SS || SS(fs) < FF_MIN_SS || (SS(fs) & (SS(fs) - 1))) return FR_DISK_ERR;
3438:DRIVER/FatFs/source/ff.c **** #endif
3439:DRIVER/FatFs/source/ff.c **** 
3440:DRIVER/FatFs/source/ff.c **** 	/* Find an FAT volume on the hosting drive */
3441:DRIVER/FatFs/source/ff.c **** 	fmt = find_volume(fs, LD2PT(vol));
3442:DRIVER/FatFs/source/ff.c **** 	if (fmt == 4) return FR_DISK_ERR;		/* An error occurred in the disk I/O layer */
3443:DRIVER/FatFs/source/ff.c **** 	if (fmt >= 2) return FR_NO_FILESYSTEM;	/* No FAT volume is found */
3444:DRIVER/FatFs/source/ff.c **** 	bsect = fs->winsect;					/* Volume offset in the hosting physical drive */
3445:DRIVER/FatFs/source/ff.c **** 
3446:DRIVER/FatFs/source/ff.c **** 	/* An FAT volume is found (bsect). Following code initializes the filesystem object */
3447:DRIVER/FatFs/source/ff.c **** 
3448:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
3449:DRIVER/FatFs/source/ff.c **** 	if (fmt == 1) {
3450:DRIVER/FatFs/source/ff.c **** 		QWORD maxlba;
3451:DRIVER/FatFs/source/ff.c **** 		DWORD so, cv, bcl, i;
3452:DRIVER/FatFs/source/ff.c **** 
3453:DRIVER/FatFs/source/ff.c **** 		for (i = BPB_ZeroedEx; i < BPB_ZeroedEx + 53 && fs->win[i] == 0; i++) ;	/* Check zero filler */
3454:DRIVER/FatFs/source/ff.c **** 		if (i < BPB_ZeroedEx + 53) return FR_NO_FILESYSTEM;
3455:DRIVER/FatFs/source/ff.c **** 
3456:DRIVER/FatFs/source/ff.c **** 		if (ld_word(fs->win + BPB_FSVerEx) != 0x100) return FR_NO_FILESYSTEM;	/* Check exFAT version (mus
3457:DRIVER/FatFs/source/ff.c **** 
3458:DRIVER/FatFs/source/ff.c **** 		if (1 << fs->win[BPB_BytsPerSecEx] != SS(fs)) {	/* (BPB_BytsPerSecEx must be equal to the physica
3459:DRIVER/FatFs/source/ff.c **** 			return FR_NO_FILESYSTEM;
3460:DRIVER/FatFs/source/ff.c **** 		}
3461:DRIVER/FatFs/source/ff.c **** 
3462:DRIVER/FatFs/source/ff.c **** 		maxlba = ld_qword(fs->win + BPB_TotSecEx) + bsect;	/* Last LBA of the volume + 1 */
3463:DRIVER/FatFs/source/ff.c **** 		if (!FF_LBA64 && maxlba >= 0x100000000) return FR_NO_FILESYSTEM;	/* (It cannot be accessed in 32-
3464:DRIVER/FatFs/source/ff.c **** 
3465:DRIVER/FatFs/source/ff.c **** 		fs->fsize = ld_dword(fs->win + BPB_FatSzEx);	/* Number of sectors per FAT */
3466:DRIVER/FatFs/source/ff.c **** 
3467:DRIVER/FatFs/source/ff.c **** 		fs->n_fats = fs->win[BPB_NumFATsEx];			/* Number of FATs */
3468:DRIVER/FatFs/source/ff.c **** 		if (fs->n_fats != 1) return FR_NO_FILESYSTEM;	/* (Supports only 1 FAT) */
3469:DRIVER/FatFs/source/ff.c **** 
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 86


3470:DRIVER/FatFs/source/ff.c **** 		fs->csize = 1 << fs->win[BPB_SecPerClusEx];		/* Cluster size */
3471:DRIVER/FatFs/source/ff.c **** 		if (fs->csize == 0)	return FR_NO_FILESYSTEM;	/* (Must be 1..32768 sectors) */
3472:DRIVER/FatFs/source/ff.c **** 
3473:DRIVER/FatFs/source/ff.c **** 		nclst = ld_dword(fs->win + BPB_NumClusEx);		/* Number of clusters */
3474:DRIVER/FatFs/source/ff.c **** 		if (nclst > MAX_EXFAT) return FR_NO_FILESYSTEM;	/* (Too many clusters) */
3475:DRIVER/FatFs/source/ff.c **** 		fs->n_fatent = nclst + 2;
3476:DRIVER/FatFs/source/ff.c **** 
3477:DRIVER/FatFs/source/ff.c **** 		/* Boundaries and Limits */
3478:DRIVER/FatFs/source/ff.c **** 		fs->volbase = bsect;
3479:DRIVER/FatFs/source/ff.c **** 		fs->database = bsect + ld_dword(fs->win + BPB_DataOfsEx);
3480:DRIVER/FatFs/source/ff.c **** 		fs->fatbase = bsect + ld_dword(fs->win + BPB_FatOfsEx);
3481:DRIVER/FatFs/source/ff.c **** 		if (maxlba < (QWORD)fs->database + nclst * fs->csize) return FR_NO_FILESYSTEM;	/* (Volume size mu
3482:DRIVER/FatFs/source/ff.c **** 		fs->dirbase = ld_dword(fs->win + BPB_RootClusEx);
3483:DRIVER/FatFs/source/ff.c **** 
3484:DRIVER/FatFs/source/ff.c **** 		/* Get bitmap location and check if it is contiguous (implementation assumption) */
3485:DRIVER/FatFs/source/ff.c **** 		so = i = 0;
3486:DRIVER/FatFs/source/ff.c **** 		for (;;) {	/* Find the bitmap entry in the root directory (in only first cluster) */
3487:DRIVER/FatFs/source/ff.c **** 			if (i == 0) {
3488:DRIVER/FatFs/source/ff.c **** 				if (so >= fs->csize) return FR_NO_FILESYSTEM;	/* Not found? */
3489:DRIVER/FatFs/source/ff.c **** 				if (move_window(fs, clst2sect(fs, (DWORD)fs->dirbase) + so) != FR_OK) return FR_DISK_ERR;
3490:DRIVER/FatFs/source/ff.c **** 				so++;
3491:DRIVER/FatFs/source/ff.c **** 			}
3492:DRIVER/FatFs/source/ff.c **** 			if (fs->win[i] == ET_BITMAP) break;			/* Is it a bitmap entry? */
3493:DRIVER/FatFs/source/ff.c **** 			i = (i + SZDIRE) % SS(fs);	/* Next entry */
3494:DRIVER/FatFs/source/ff.c **** 		}
3495:DRIVER/FatFs/source/ff.c **** 		bcl = ld_dword(fs->win + i + 20);				/* Bitmap cluster */
3496:DRIVER/FatFs/source/ff.c **** 		if (bcl < 2 || bcl >= fs->n_fatent) return FR_NO_FILESYSTEM;	/* (Wrong cluster#) */
3497:DRIVER/FatFs/source/ff.c **** 		fs->bitbase = fs->database + fs->csize * (bcl - 2);	/* Bitmap sector */
3498:DRIVER/FatFs/source/ff.c **** 		for (;;) {	/* Check if bitmap is contiguous */
3499:DRIVER/FatFs/source/ff.c **** 			if (move_window(fs, fs->fatbase + bcl / (SS(fs) / 4)) != FR_OK) return FR_DISK_ERR;
3500:DRIVER/FatFs/source/ff.c **** 			cv = ld_dword(fs->win + bcl % (SS(fs) / 4) * 4);
3501:DRIVER/FatFs/source/ff.c **** 			if (cv == 0xFFFFFFFF) break;				/* Last link? */
3502:DRIVER/FatFs/source/ff.c **** 			if (cv != ++bcl) return FR_NO_FILESYSTEM;	/* Fragmented bitmap? */
3503:DRIVER/FatFs/source/ff.c **** 		}
3504:DRIVER/FatFs/source/ff.c **** 
3505:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY
3506:DRIVER/FatFs/source/ff.c **** 		fs->last_clst = fs->free_clst = 0xFFFFFFFF;		/* Initialize cluster allocation information */
3507:DRIVER/FatFs/source/ff.c **** #endif
3508:DRIVER/FatFs/source/ff.c **** 		fmt = FS_EXFAT;			/* FAT sub-type */
3509:DRIVER/FatFs/source/ff.c **** 	} else
3510:DRIVER/FatFs/source/ff.c **** #endif	/* FF_FS_EXFAT */
3511:DRIVER/FatFs/source/ff.c **** 	{
3512:DRIVER/FatFs/source/ff.c **** 		if (ld_word(fs->win + BPB_BytsPerSec) != SS(fs)) return FR_NO_FILESYSTEM;	/* (BPB_BytsPerSec must
3513:DRIVER/FatFs/source/ff.c **** 
3514:DRIVER/FatFs/source/ff.c **** 		fasize = ld_word(fs->win + BPB_FATSz16);		/* Number of sectors per FAT */
3515:DRIVER/FatFs/source/ff.c **** 		if (fasize == 0) fasize = ld_dword(fs->win + BPB_FATSz32);
3516:DRIVER/FatFs/source/ff.c **** 		fs->fsize = fasize;
3517:DRIVER/FatFs/source/ff.c **** 
3518:DRIVER/FatFs/source/ff.c **** 		fs->n_fats = fs->win[BPB_NumFATs];				/* Number of FATs */
3519:DRIVER/FatFs/source/ff.c **** 		if (fs->n_fats != 1 && fs->n_fats != 2) return FR_NO_FILESYSTEM;	/* (Must be 1 or 2) */
3520:DRIVER/FatFs/source/ff.c **** 		fasize *= fs->n_fats;							/* Number of sectors for FAT area */
3521:DRIVER/FatFs/source/ff.c **** 
3522:DRIVER/FatFs/source/ff.c **** 		fs->csize = fs->win[BPB_SecPerClus];			/* Cluster size */
3523:DRIVER/FatFs/source/ff.c **** 		if (fs->csize == 0 || (fs->csize & (fs->csize - 1))) return FR_NO_FILESYSTEM;	/* (Must be power o
3524:DRIVER/FatFs/source/ff.c **** 
3525:DRIVER/FatFs/source/ff.c **** 		fs->n_rootdir = ld_word(fs->win + BPB_RootEntCnt);	/* Number of root directory entries */
3526:DRIVER/FatFs/source/ff.c **** 		if (fs->n_rootdir % (SS(fs) / SZDIRE)) return FR_NO_FILESYSTEM;	/* (Must be sector aligned) */
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 87


3527:DRIVER/FatFs/source/ff.c **** 
3528:DRIVER/FatFs/source/ff.c **** 		tsect = ld_word(fs->win + BPB_TotSec16);		/* Number of sectors on the volume */
3529:DRIVER/FatFs/source/ff.c **** 		if (tsect == 0) tsect = ld_dword(fs->win + BPB_TotSec32);
3530:DRIVER/FatFs/source/ff.c **** 
3531:DRIVER/FatFs/source/ff.c **** 		nrsv = ld_word(fs->win + BPB_RsvdSecCnt);		/* Number of reserved sectors */
3532:DRIVER/FatFs/source/ff.c **** 		if (nrsv == 0) return FR_NO_FILESYSTEM;			/* (Must not be 0) */
3533:DRIVER/FatFs/source/ff.c **** 
3534:DRIVER/FatFs/source/ff.c **** 		/* Determine the FAT sub type */
3535:DRIVER/FatFs/source/ff.c **** 		sysect = nrsv + fasize + fs->n_rootdir / (SS(fs) / SZDIRE);	/* RSV + FAT + DIR */
3536:DRIVER/FatFs/source/ff.c **** 		if (tsect < sysect) return FR_NO_FILESYSTEM;	/* (Invalid volume size) */
3537:DRIVER/FatFs/source/ff.c **** 		nclst = (tsect - sysect) / fs->csize;			/* Number of clusters */
3538:DRIVER/FatFs/source/ff.c **** 		if (nclst == 0) return FR_NO_FILESYSTEM;		/* (Invalid volume size) */
3539:DRIVER/FatFs/source/ff.c **** 		fmt = 0;
3540:DRIVER/FatFs/source/ff.c **** 		if (nclst <= MAX_FAT32) fmt = FS_FAT32;
3541:DRIVER/FatFs/source/ff.c **** 		if (nclst <= MAX_FAT16) fmt = FS_FAT16;
3542:DRIVER/FatFs/source/ff.c **** 		if (nclst <= MAX_FAT12) fmt = FS_FAT12;
3543:DRIVER/FatFs/source/ff.c **** 		if (fmt == 0) return FR_NO_FILESYSTEM;
3544:DRIVER/FatFs/source/ff.c **** 
3545:DRIVER/FatFs/source/ff.c **** 		/* Boundaries and Limits */
3546:DRIVER/FatFs/source/ff.c **** 		fs->n_fatent = nclst + 2;						/* Number of FAT entries */
3547:DRIVER/FatFs/source/ff.c **** 		fs->volbase = bsect;							/* Volume start sector */
3548:DRIVER/FatFs/source/ff.c **** 		fs->fatbase = bsect + nrsv; 					/* FAT start sector */
3549:DRIVER/FatFs/source/ff.c **** 		fs->database = bsect + sysect;					/* Data start sector */
3550:DRIVER/FatFs/source/ff.c **** 		if (fmt == FS_FAT32) {
3551:DRIVER/FatFs/source/ff.c **** 			if (ld_word(fs->win + BPB_FSVer32) != 0) return FR_NO_FILESYSTEM;	/* (Must be FAT32 revision 0.0
3552:DRIVER/FatFs/source/ff.c **** 			if (fs->n_rootdir != 0) return FR_NO_FILESYSTEM;	/* (BPB_RootEntCnt must be 0) */
3553:DRIVER/FatFs/source/ff.c **** 			fs->dirbase = ld_dword(fs->win + BPB_RootClus32);	/* Root directory start cluster */
3554:DRIVER/FatFs/source/ff.c **** 			szbfat = fs->n_fatent * 4;					/* (Needed FAT size) */
3555:DRIVER/FatFs/source/ff.c **** 		} else {
3556:DRIVER/FatFs/source/ff.c **** 			if (fs->n_rootdir == 0)	return FR_NO_FILESYSTEM;	/* (BPB_RootEntCnt must not be 0) */
3557:DRIVER/FatFs/source/ff.c **** 			fs->dirbase = fs->fatbase + fasize;			/* Root directory start sector */
3558:DRIVER/FatFs/source/ff.c **** 			szbfat = (fmt == FS_FAT16) ?				/* (Needed FAT size) */
3559:DRIVER/FatFs/source/ff.c **** 				fs->n_fatent * 2 : fs->n_fatent * 3 / 2 + (fs->n_fatent & 1);
3560:DRIVER/FatFs/source/ff.c **** 		}
3561:DRIVER/FatFs/source/ff.c **** 		if (fs->fsize < (szbfat + (SS(fs) - 1)) / SS(fs)) return FR_NO_FILESYSTEM;	/* (BPB_FATSz must not
3562:DRIVER/FatFs/source/ff.c **** 
3563:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY
3564:DRIVER/FatFs/source/ff.c **** 		/* Get FSInfo if available */
3565:DRIVER/FatFs/source/ff.c **** 		fs->last_clst = fs->free_clst = 0xFFFFFFFF;		/* Initialize cluster allocation information */
3566:DRIVER/FatFs/source/ff.c **** 		fs->fsi_flag = 0x80;
3567:DRIVER/FatFs/source/ff.c **** #if (FF_FS_NOFSINFO & 3) != 3
3568:DRIVER/FatFs/source/ff.c **** 		if (fmt == FS_FAT32				/* Allow to update FSInfo only if BPB_FSInfo32 == 1 */
3569:DRIVER/FatFs/source/ff.c **** 			&& ld_word(fs->win + BPB_FSInfo32) == 1
3570:DRIVER/FatFs/source/ff.c **** 			&& move_window(fs, bsect + 1) == FR_OK)
3571:DRIVER/FatFs/source/ff.c **** 		{
3572:DRIVER/FatFs/source/ff.c **** 			fs->fsi_flag = 0;
3573:DRIVER/FatFs/source/ff.c **** 			if (ld_word(fs->win + BS_55AA) == 0xAA55	/* Load FSInfo data if available */
3574:DRIVER/FatFs/source/ff.c **** 				&& ld_dword(fs->win + FSI_LeadSig) == 0x41615252
3575:DRIVER/FatFs/source/ff.c **** 				&& ld_dword(fs->win + FSI_StrucSig) == 0x61417272)
3576:DRIVER/FatFs/source/ff.c **** 			{
3577:DRIVER/FatFs/source/ff.c **** #if (FF_FS_NOFSINFO & 1) == 0
3578:DRIVER/FatFs/source/ff.c **** 				fs->free_clst = ld_dword(fs->win + FSI_Free_Count);
3579:DRIVER/FatFs/source/ff.c **** #endif
3580:DRIVER/FatFs/source/ff.c **** #if (FF_FS_NOFSINFO & 2) == 0
3581:DRIVER/FatFs/source/ff.c **** 				fs->last_clst = ld_dword(fs->win + FSI_Nxt_Free);
3582:DRIVER/FatFs/source/ff.c **** #endif
3583:DRIVER/FatFs/source/ff.c **** 			}
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 88


3584:DRIVER/FatFs/source/ff.c **** 		}
3585:DRIVER/FatFs/source/ff.c **** #endif	/* (FF_FS_NOFSINFO & 3) != 3 */
3586:DRIVER/FatFs/source/ff.c **** #endif	/* !FF_FS_READONLY */
3587:DRIVER/FatFs/source/ff.c **** 	}
3588:DRIVER/FatFs/source/ff.c **** 
3589:DRIVER/FatFs/source/ff.c **** 	fs->fs_type = (BYTE)fmt;/* FAT sub-type (the filesystem object gets valid) */
3590:DRIVER/FatFs/source/ff.c **** 	fs->id = ++Fsid;		/* Volume mount ID */
3591:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN == 1
3592:DRIVER/FatFs/source/ff.c **** 	fs->lfnbuf = LfnBuf;	/* Static LFN working buffer */
3593:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
3594:DRIVER/FatFs/source/ff.c **** 	fs->dirbuf = DirBuf;	/* Static directory block scratchpad buuffer */
3595:DRIVER/FatFs/source/ff.c **** #endif
3596:DRIVER/FatFs/source/ff.c **** #endif
3597:DRIVER/FatFs/source/ff.c **** #if FF_FS_RPATH != 0
3598:DRIVER/FatFs/source/ff.c **** 	fs->cdir = 0;			/* Initialize current directory */
3599:DRIVER/FatFs/source/ff.c **** #endif
3600:DRIVER/FatFs/source/ff.c **** #if FF_FS_LOCK				/* Clear file lock semaphores */
3601:DRIVER/FatFs/source/ff.c **** 	clear_share(fs);
3602:DRIVER/FatFs/source/ff.c **** #endif
3603:DRIVER/FatFs/source/ff.c **** 	return FR_OK;
3604:DRIVER/FatFs/source/ff.c **** }
3605:DRIVER/FatFs/source/ff.c **** 
3606:DRIVER/FatFs/source/ff.c **** 
3607:DRIVER/FatFs/source/ff.c **** 
3608:DRIVER/FatFs/source/ff.c **** 
3609:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
3610:DRIVER/FatFs/source/ff.c **** /* Check if the file/directory object is valid or not                    */
3611:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
3612:DRIVER/FatFs/source/ff.c **** 
3613:DRIVER/FatFs/source/ff.c **** static FRESULT validate (	/* Returns FR_OK or FR_INVALID_OBJECT */
3614:DRIVER/FatFs/source/ff.c **** 	FFOBJID* obj,			/* Pointer to the FFOBJID, the 1st member in the FIL/DIR structure, to check valid
3615:DRIVER/FatFs/source/ff.c **** 	FATFS** rfs				/* Pointer to pointer to the owner filesystem object to return */
3616:DRIVER/FatFs/source/ff.c **** )
3617:DRIVER/FatFs/source/ff.c **** {
 1277              		.loc 1 3617 1 is_stmt 1 view -0
 1278              		.cfi_startproc
 1279              		@ args = 0, pretend = 0, frame = 0
 1280              		@ frame_needed = 0, uses_anonymous_args = 0
 1281              		.loc 1 3617 1 is_stmt 0 view .LVU419
 1282 0000 38B5     		push	{r3, r4, r5, lr}
 1283              	.LCFI5:
 1284              		.cfi_def_cfa_offset 16
 1285              		.cfi_offset 3, -16
 1286              		.cfi_offset 4, -12
 1287              		.cfi_offset 5, -8
 1288              		.cfi_offset 14, -4
 1289 0002 0D46     		mov	r5, r1
3618:DRIVER/FatFs/source/ff.c **** 	FRESULT res = FR_INVALID_OBJECT;
 1290              		.loc 1 3618 2 is_stmt 1 view .LVU420
 1291              	.LVL164:
3619:DRIVER/FatFs/source/ff.c **** 
3620:DRIVER/FatFs/source/ff.c **** 
3621:DRIVER/FatFs/source/ff.c **** 	if (obj && obj->fs && obj->fs->fs_type && obj->id == obj->fs->id) {	/* Test if the object is valid
 1292              		.loc 1 3621 2 view .LVU421
 1293              		.loc 1 3621 5 is_stmt 0 view .LVU422
 1294 0004 0446     		mov	r4, r0
 1295 0006 98B1     		cbz	r0, .L94
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 89


 1296              		.loc 1 3621 16 discriminator 1 view .LVU423
 1297 0008 0368     		ldr	r3, [r0]
 1298              		.loc 1 3621 10 discriminator 1 view .LVU424
 1299 000a 9BB1     		cbz	r3, .L95
 1300              		.loc 1 3621 31 discriminator 2 view .LVU425
 1301 000c 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 1302              		.loc 1 3621 21 discriminator 2 view .LVU426
 1303 000e A2B1     		cbz	r2, .L96
 1304              		.loc 1 3621 47 discriminator 3 view .LVU427
 1305 0010 8188     		ldrh	r1, [r0, #4]
 1306              	.LVL165:
 1307              		.loc 1 3621 62 discriminator 3 view .LVU428
 1308 0012 DA88     		ldrh	r2, [r3, #6]
 1309              		.loc 1 3621 41 discriminator 3 view .LVU429
 1310 0014 9142     		cmp	r1, r2
 1311 0016 03D0     		beq	.L100
3618:DRIVER/FatFs/source/ff.c **** 	FRESULT res = FR_INVALID_OBJECT;
 1312              		.loc 1 3618 10 view .LVU430
 1313 0018 0920     		movs	r0, #9
 1314              	.LVL166:
3622:DRIVER/FatFs/source/ff.c **** #if FF_FS_REENTRANT
3623:DRIVER/FatFs/source/ff.c **** 		if (lock_volume(obj->fs, 0)) {	/* Take a grant to access the volume */
3624:DRIVER/FatFs/source/ff.c **** 			if (!(disk_status(obj->fs->pdrv) & STA_NOINIT)) { /* Test if the hosting phsical drive is kept i
3625:DRIVER/FatFs/source/ff.c **** 				res = FR_OK;
3626:DRIVER/FatFs/source/ff.c **** 			} else {
3627:DRIVER/FatFs/source/ff.c **** 				unlock_volume(obj->fs, FR_OK);	/* Invalidated volume, abort to access */
3628:DRIVER/FatFs/source/ff.c **** 			}
3629:DRIVER/FatFs/source/ff.c **** 		} else {	/* Could not take */
3630:DRIVER/FatFs/source/ff.c **** 			res = FR_TIMEOUT;
3631:DRIVER/FatFs/source/ff.c **** 		}
3632:DRIVER/FatFs/source/ff.c **** #else
3633:DRIVER/FatFs/source/ff.c **** 		if (!(disk_status(obj->fs->pdrv) & STA_NOINIT)) { /* Test if the hosting phsical drive is kept in
3634:DRIVER/FatFs/source/ff.c **** 			res = FR_OK;
3635:DRIVER/FatFs/source/ff.c **** 		}
3636:DRIVER/FatFs/source/ff.c **** #endif
3637:DRIVER/FatFs/source/ff.c **** 	}
3638:DRIVER/FatFs/source/ff.c **** 	*rfs = (res == FR_OK) ? obj->fs : 0;	/* Return corresponding filesystem object if it is valid */
 1315              		.loc 1 3638 34 view .LVU431
 1316 001a 0024     		movs	r4, #0
 1317              	.LVL167:
 1318              	.L93:
 1319              		.loc 1 3638 7 discriminator 4 view .LVU432
 1320 001c 2C60     		str	r4, [r5]
3639:DRIVER/FatFs/source/ff.c **** 	return res;
 1321              		.loc 1 3639 2 is_stmt 1 discriminator 4 view .LVU433
3640:DRIVER/FatFs/source/ff.c **** }
 1322              		.loc 1 3640 1 is_stmt 0 discriminator 4 view .LVU434
 1323 001e 38BD     		pop	{r3, r4, r5, pc}
 1324              	.LVL168:
 1325              	.L100:
3633:DRIVER/FatFs/source/ff.c **** 			res = FR_OK;
 1326              		.loc 1 3633 3 is_stmt 1 view .LVU435
3633:DRIVER/FatFs/source/ff.c **** 			res = FR_OK;
 1327              		.loc 1 3633 9 is_stmt 0 view .LVU436
 1328 0020 5878     		ldrb	r0, [r3, #1]	@ zero_extendqisi2
 1329              	.LVL169:
3633:DRIVER/FatFs/source/ff.c **** 			res = FR_OK;
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 90


 1330              		.loc 1 3633 9 view .LVU437
 1331 0022 FFF7FEFF 		bl	disk_status
 1332              	.LVL170:
3633:DRIVER/FatFs/source/ff.c **** 			res = FR_OK;
 1333              		.loc 1 3633 6 view .LVU438
 1334 0026 10F00100 		ands	r0, r0, #1
 1335 002a 09D1     		bne	.L98
3634:DRIVER/FatFs/source/ff.c **** 		}
 1336              		.loc 1 3634 4 is_stmt 1 view .LVU439
 1337              	.LVL171:
3638:DRIVER/FatFs/source/ff.c **** 	return res;
 1338              		.loc 1 3638 2 view .LVU440
3638:DRIVER/FatFs/source/ff.c **** 	return res;
 1339              		.loc 1 3638 34 is_stmt 0 view .LVU441
 1340 002c 2468     		ldr	r4, [r4]
 1341              	.LVL172:
3638:DRIVER/FatFs/source/ff.c **** 	return res;
 1342              		.loc 1 3638 34 view .LVU442
 1343 002e F5E7     		b	.L93
 1344              	.LVL173:
 1345              	.L94:
3618:DRIVER/FatFs/source/ff.c **** 
 1346              		.loc 1 3618 10 view .LVU443
 1347 0030 0920     		movs	r0, #9
 1348              	.LVL174:
3618:DRIVER/FatFs/source/ff.c **** 
 1349              		.loc 1 3618 10 view .LVU444
 1350 0032 F3E7     		b	.L93
 1351              	.LVL175:
 1352              	.L95:
3638:DRIVER/FatFs/source/ff.c **** 	return res;
 1353              		.loc 1 3638 34 view .LVU445
 1354 0034 1C46     		mov	r4, r3
3618:DRIVER/FatFs/source/ff.c **** 
 1355              		.loc 1 3618 10 view .LVU446
 1356 0036 0920     		movs	r0, #9
 1357              	.LVL176:
3618:DRIVER/FatFs/source/ff.c **** 
 1358              		.loc 1 3618 10 view .LVU447
 1359 0038 F0E7     		b	.L93
 1360              	.LVL177:
 1361              	.L96:
3618:DRIVER/FatFs/source/ff.c **** 
 1362              		.loc 1 3618 10 view .LVU448
 1363 003a 0920     		movs	r0, #9
 1364              	.LVL178:
3638:DRIVER/FatFs/source/ff.c **** 	return res;
 1365              		.loc 1 3638 34 view .LVU449
 1366 003c 0024     		movs	r4, #0
 1367              	.LVL179:
3638:DRIVER/FatFs/source/ff.c **** 	return res;
 1368              		.loc 1 3638 34 view .LVU450
 1369 003e EDE7     		b	.L93
 1370              	.LVL180:
 1371              	.L98:
3618:DRIVER/FatFs/source/ff.c **** 
 1372              		.loc 1 3618 10 view .LVU451
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 91


 1373 0040 0920     		movs	r0, #9
3638:DRIVER/FatFs/source/ff.c **** 	return res;
 1374              		.loc 1 3638 34 view .LVU452
 1375 0042 0024     		movs	r4, #0
 1376              	.LVL181:
3638:DRIVER/FatFs/source/ff.c **** 	return res;
 1377              		.loc 1 3638 34 view .LVU453
 1378 0044 EAE7     		b	.L93
 1379              		.cfi_endproc
 1380              	.LFE38:
 1382              		.section	.text.sync_window,"ax",%progbits
 1383              		.align	1
 1384              		.syntax unified
 1385              		.thumb
 1386              		.thumb_func
 1388              	sync_window:
 1389              	.LVL182:
 1390              	.LFB8:
1058:DRIVER/FatFs/source/ff.c **** 	FRESULT res = FR_OK;
 1391              		.loc 1 1058 1 is_stmt 1 view -0
 1392              		.cfi_startproc
 1393              		@ args = 0, pretend = 0, frame = 0
 1394              		@ frame_needed = 0, uses_anonymous_args = 0
1058:DRIVER/FatFs/source/ff.c **** 	FRESULT res = FR_OK;
 1395              		.loc 1 1058 1 is_stmt 0 view .LVU455
 1396 0000 70B5     		push	{r4, r5, r6, lr}
 1397              	.LCFI6:
 1398              		.cfi_def_cfa_offset 16
 1399              		.cfi_offset 4, -16
 1400              		.cfi_offset 5, -12
 1401              		.cfi_offset 6, -8
 1402              		.cfi_offset 14, -4
1059:DRIVER/FatFs/source/ff.c **** 
 1403              		.loc 1 1059 2 is_stmt 1 view .LVU456
 1404              	.LVL183:
1062:DRIVER/FatFs/source/ff.c **** 		if (disk_write(fs->pdrv, fs->win, fs->winsect, 1) == RES_OK) {	/* Write it back into the volume *
 1405              		.loc 1 1062 2 view .LVU457
1062:DRIVER/FatFs/source/ff.c **** 		if (disk_write(fs->pdrv, fs->win, fs->winsect, 1) == RES_OK) {	/* Write it back into the volume *
 1406              		.loc 1 1062 8 is_stmt 0 view .LVU458
 1407 0002 0579     		ldrb	r5, [r0, #4]	@ zero_extendqisi2
1062:DRIVER/FatFs/source/ff.c **** 		if (disk_write(fs->pdrv, fs->win, fs->winsect, 1) == RES_OK) {	/* Write it back into the volume *
 1408              		.loc 1 1062 5 view .LVU459
 1409 0004 0DB9     		cbnz	r5, .L105
 1410              	.LVL184:
 1411              	.L102:
1072:DRIVER/FatFs/source/ff.c **** }
 1412              		.loc 1 1072 2 is_stmt 1 view .LVU460
1073:DRIVER/FatFs/source/ff.c **** #endif
 1413              		.loc 1 1073 1 is_stmt 0 view .LVU461
 1414 0006 2846     		mov	r0, r5
 1415 0008 70BD     		pop	{r4, r5, r6, pc}
 1416              	.LVL185:
 1417              	.L105:
1073:DRIVER/FatFs/source/ff.c **** #endif
 1418              		.loc 1 1073 1 view .LVU462
 1419 000a 0446     		mov	r4, r0
1063:DRIVER/FatFs/source/ff.c **** 			fs->wflag = 0;	/* Clear window dirty flag */
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 92


 1420              		.loc 1 1063 3 is_stmt 1 view .LVU463
1063:DRIVER/FatFs/source/ff.c **** 			fs->wflag = 0;	/* Clear window dirty flag */
 1421              		.loc 1 1063 30 is_stmt 0 view .LVU464
 1422 000c 00F13806 		add	r6, r0, #56
1063:DRIVER/FatFs/source/ff.c **** 			fs->wflag = 0;	/* Clear window dirty flag */
 1423              		.loc 1 1063 7 view .LVU465
 1424 0010 0123     		movs	r3, #1
 1425 0012 426B     		ldr	r2, [r0, #52]
 1426 0014 3146     		mov	r1, r6
 1427 0016 4078     		ldrb	r0, [r0, #1]	@ zero_extendqisi2
 1428              	.LVL186:
1063:DRIVER/FatFs/source/ff.c **** 			fs->wflag = 0;	/* Clear window dirty flag */
 1429              		.loc 1 1063 7 view .LVU466
 1430 0018 FFF7FEFF 		bl	disk_write
 1431              	.LVL187:
1063:DRIVER/FatFs/source/ff.c **** 			fs->wflag = 0;	/* Clear window dirty flag */
 1432              		.loc 1 1063 6 view .LVU467
 1433 001c 0546     		mov	r5, r0
 1434 001e 88B9     		cbnz	r0, .L103
1064:DRIVER/FatFs/source/ff.c **** 			if (fs->winsect - fs->fatbase < fs->fsize) {	/* Is it in the 1st FAT? */
 1435              		.loc 1 1064 4 is_stmt 1 view .LVU468
1064:DRIVER/FatFs/source/ff.c **** 			if (fs->winsect - fs->fatbase < fs->fsize) {	/* Is it in the 1st FAT? */
 1436              		.loc 1 1064 14 is_stmt 0 view .LVU469
 1437 0020 0023     		movs	r3, #0
 1438 0022 2371     		strb	r3, [r4, #4]
1065:DRIVER/FatFs/source/ff.c **** 				if (fs->n_fats == 2) disk_write(fs->pdrv, fs->win, fs->winsect + fs->fsize, 1);	/* Reflect it t
 1439              		.loc 1 1065 4 is_stmt 1 view .LVU470
1065:DRIVER/FatFs/source/ff.c **** 				if (fs->n_fats == 2) disk_write(fs->pdrv, fs->win, fs->winsect + fs->fsize, 1);	/* Reflect it t
 1440              		.loc 1 1065 10 is_stmt 0 view .LVU471
 1441 0024 616B     		ldr	r1, [r4, #52]
1065:DRIVER/FatFs/source/ff.c **** 				if (fs->n_fats == 2) disk_write(fs->pdrv, fs->win, fs->winsect + fs->fsize, 1);	/* Reflect it t
 1442              		.loc 1 1065 24 view .LVU472
 1443 0026 A36A     		ldr	r3, [r4, #40]
1065:DRIVER/FatFs/source/ff.c **** 				if (fs->n_fats == 2) disk_write(fs->pdrv, fs->win, fs->winsect + fs->fsize, 1);	/* Reflect it t
 1444              		.loc 1 1065 20 view .LVU473
 1445 0028 CB1A     		subs	r3, r1, r3
1065:DRIVER/FatFs/source/ff.c **** 				if (fs->n_fats == 2) disk_write(fs->pdrv, fs->win, fs->winsect + fs->fsize, 1);	/* Reflect it t
 1446              		.loc 1 1065 38 view .LVU474
 1447 002a 226A     		ldr	r2, [r4, #32]
1065:DRIVER/FatFs/source/ff.c **** 				if (fs->n_fats == 2) disk_write(fs->pdrv, fs->win, fs->winsect + fs->fsize, 1);	/* Reflect it t
 1448              		.loc 1 1065 7 view .LVU475
 1449 002c 9342     		cmp	r3, r2
 1450 002e EAD2     		bcs	.L102
1066:DRIVER/FatFs/source/ff.c **** 			}
 1451              		.loc 1 1066 5 is_stmt 1 view .LVU476
1066:DRIVER/FatFs/source/ff.c **** 			}
 1452              		.loc 1 1066 11 is_stmt 0 view .LVU477
 1453 0030 E378     		ldrb	r3, [r4, #3]	@ zero_extendqisi2
1066:DRIVER/FatFs/source/ff.c **** 			}
 1454              		.loc 1 1066 8 view .LVU478
 1455 0032 022B     		cmp	r3, #2
 1456 0034 E7D1     		bne	.L102
1066:DRIVER/FatFs/source/ff.c **** 			}
 1457              		.loc 1 1066 26 is_stmt 1 discriminator 1 view .LVU479
 1458 0036 0123     		movs	r3, #1
 1459 0038 0A44     		add	r2, r2, r1
 1460 003a 3146     		mov	r1, r6
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 93


 1461 003c 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 1462 003e FFF7FEFF 		bl	disk_write
 1463              	.LVL188:
 1464 0042 E0E7     		b	.L102
 1465              	.L103:
1069:DRIVER/FatFs/source/ff.c **** 		}
 1466              		.loc 1 1069 8 is_stmt 0 view .LVU480
 1467 0044 0125     		movs	r5, #1
 1468 0046 DEE7     		b	.L102
 1469              		.cfi_endproc
 1470              	.LFE8:
 1472              		.section	.text.move_window,"ax",%progbits
 1473              		.align	1
 1474              		.syntax unified
 1475              		.thumb
 1476              		.thumb_func
 1478              	move_window:
 1479              	.LVL189:
 1480              	.LFB9:
1081:DRIVER/FatFs/source/ff.c **** 	FRESULT res = FR_OK;
 1481              		.loc 1 1081 1 is_stmt 1 view -0
 1482              		.cfi_startproc
 1483              		@ args = 0, pretend = 0, frame = 0
 1484              		@ frame_needed = 0, uses_anonymous_args = 0
1081:DRIVER/FatFs/source/ff.c **** 	FRESULT res = FR_OK;
 1485              		.loc 1 1081 1 is_stmt 0 view .LVU482
 1486 0000 70B5     		push	{r4, r5, r6, lr}
 1487              	.LCFI7:
 1488              		.cfi_def_cfa_offset 16
 1489              		.cfi_offset 4, -16
 1490              		.cfi_offset 5, -12
 1491              		.cfi_offset 6, -8
 1492              		.cfi_offset 14, -4
1082:DRIVER/FatFs/source/ff.c **** 
 1493              		.loc 1 1082 2 is_stmt 1 view .LVU483
 1494              	.LVL190:
1085:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY
 1495              		.loc 1 1085 2 view .LVU484
1085:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY
 1496              		.loc 1 1085 16 is_stmt 0 view .LVU485
 1497 0002 436B     		ldr	r3, [r0, #52]
1085:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY
 1498              		.loc 1 1085 5 view .LVU486
 1499 0004 8B42     		cmp	r3, r1
 1500 0006 02D1     		bne	.L112
1082:DRIVER/FatFs/source/ff.c **** 
 1501              		.loc 1 1082 10 view .LVU487
 1502 0008 0026     		movs	r6, #0
 1503              	.LVL191:
 1504              	.L107:
1097:DRIVER/FatFs/source/ff.c **** }
 1505              		.loc 1 1097 2 is_stmt 1 view .LVU488
1098:DRIVER/FatFs/source/ff.c **** 
 1506              		.loc 1 1098 1 is_stmt 0 view .LVU489
 1507 000a 3046     		mov	r0, r6
 1508 000c 70BD     		pop	{r4, r5, r6, pc}
 1509              	.LVL192:
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 94


 1510              	.L112:
1098:DRIVER/FatFs/source/ff.c **** 
 1511              		.loc 1 1098 1 view .LVU490
 1512 000e 0446     		mov	r4, r0
 1513 0010 0D46     		mov	r5, r1
1087:DRIVER/FatFs/source/ff.c **** #endif
 1514              		.loc 1 1087 3 is_stmt 1 view .LVU491
1087:DRIVER/FatFs/source/ff.c **** #endif
 1515              		.loc 1 1087 9 is_stmt 0 view .LVU492
 1516 0012 FFF7FEFF 		bl	sync_window
 1517              	.LVL193:
1089:DRIVER/FatFs/source/ff.c **** 			if (disk_read(fs->pdrv, fs->win, sect, 1) != RES_OK) {
 1518              		.loc 1 1089 3 is_stmt 1 view .LVU493
1089:DRIVER/FatFs/source/ff.c **** 			if (disk_read(fs->pdrv, fs->win, sect, 1) != RES_OK) {
 1519              		.loc 1 1089 6 is_stmt 0 view .LVU494
 1520 0016 0646     		mov	r6, r0
 1521 0018 0028     		cmp	r0, #0
 1522 001a F6D1     		bne	.L107
1090:DRIVER/FatFs/source/ff.c **** 				sect = (LBA_t)0 - 1;	/* Invalidate window if read data is not valid */
 1523              		.loc 1 1090 4 is_stmt 1 view .LVU495
1090:DRIVER/FatFs/source/ff.c **** 				sect = (LBA_t)0 - 1;	/* Invalidate window if read data is not valid */
 1524              		.loc 1 1090 8 is_stmt 0 view .LVU496
 1525 001c 0123     		movs	r3, #1
 1526 001e 2A46     		mov	r2, r5
 1527 0020 04F13801 		add	r1, r4, #56
 1528 0024 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 1529              	.LVL194:
1090:DRIVER/FatFs/source/ff.c **** 				sect = (LBA_t)0 - 1;	/* Invalidate window if read data is not valid */
 1530              		.loc 1 1090 8 view .LVU497
 1531 0026 FFF7FEFF 		bl	disk_read
 1532              	.LVL195:
1090:DRIVER/FatFs/source/ff.c **** 				sect = (LBA_t)0 - 1;	/* Invalidate window if read data is not valid */
 1533              		.loc 1 1090 7 view .LVU498
 1534 002a 10B1     		cbz	r0, .L108
1092:DRIVER/FatFs/source/ff.c **** 			}
 1535              		.loc 1 1092 9 view .LVU499
 1536 002c 0126     		movs	r6, #1
1091:DRIVER/FatFs/source/ff.c **** 				res = FR_DISK_ERR;
 1537              		.loc 1 1091 10 view .LVU500
 1538 002e 4FF0FF35 		mov	r5, #-1
 1539              	.LVL196:
 1540              	.L108:
1094:DRIVER/FatFs/source/ff.c **** 		}
 1541              		.loc 1 1094 4 is_stmt 1 view .LVU501
1094:DRIVER/FatFs/source/ff.c **** 		}
 1542              		.loc 1 1094 16 is_stmt 0 view .LVU502
 1543 0032 6563     		str	r5, [r4, #52]
 1544 0034 E9E7     		b	.L107
 1545              		.cfi_endproc
 1546              	.LFE9:
 1548              		.section	.rodata.check_fs.str1.4,"aMS",%progbits,1
 1549              		.align	2
 1550              	.LC0:
 1551 0000 46415433 		.ascii	"FAT32   \000"
 1551      32202020 
 1551      00
 1552              		.section	.text.check_fs,"ax",%progbits
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 95


 1553              		.align	1
 1554              		.syntax unified
 1555              		.thumb
 1556              		.thumb_func
 1558              	check_fs:
 1559              	.LVL197:
 1560              	.LFB35:
3295:DRIVER/FatFs/source/ff.c **** 	WORD w, sign;
 1561              		.loc 1 3295 1 is_stmt 1 view -0
 1562              		.cfi_startproc
 1563              		@ args = 0, pretend = 0, frame = 0
 1564              		@ frame_needed = 0, uses_anonymous_args = 0
3295:DRIVER/FatFs/source/ff.c **** 	WORD w, sign;
 1565              		.loc 1 3295 1 is_stmt 0 view .LVU504
 1566 0000 38B5     		push	{r3, r4, r5, lr}
 1567              	.LCFI8:
 1568              		.cfi_def_cfa_offset 16
 1569              		.cfi_offset 3, -16
 1570              		.cfi_offset 4, -12
 1571              		.cfi_offset 5, -8
 1572              		.cfi_offset 14, -4
 1573 0002 0446     		mov	r4, r0
3296:DRIVER/FatFs/source/ff.c **** 	BYTE b;
 1574              		.loc 1 3296 2 is_stmt 1 view .LVU505
3297:DRIVER/FatFs/source/ff.c **** 
 1575              		.loc 1 3297 2 view .LVU506
3300:DRIVER/FatFs/source/ff.c **** 	if (move_window(fs, sect) != FR_OK) return 4;	/* Load the boot sector */
 1576              		.loc 1 3300 2 view .LVU507
3300:DRIVER/FatFs/source/ff.c **** 	if (move_window(fs, sect) != FR_OK) return 4;	/* Load the boot sector */
 1577              		.loc 1 3300 12 is_stmt 0 view .LVU508
 1578 0004 0023     		movs	r3, #0
 1579 0006 0371     		strb	r3, [r0, #4]
3300:DRIVER/FatFs/source/ff.c **** 	if (move_window(fs, sect) != FR_OK) return 4;	/* Load the boot sector */
 1580              		.loc 1 3300 17 is_stmt 1 view .LVU509
3300:DRIVER/FatFs/source/ff.c **** 	if (move_window(fs, sect) != FR_OK) return 4;	/* Load the boot sector */
 1581              		.loc 1 3300 29 is_stmt 0 view .LVU510
 1582 0008 4FF0FF33 		mov	r3, #-1
 1583 000c 4363     		str	r3, [r0, #52]
3301:DRIVER/FatFs/source/ff.c **** 	sign = ld_word(fs->win + BS_55AA);
 1584              		.loc 1 3301 2 is_stmt 1 view .LVU511
3301:DRIVER/FatFs/source/ff.c **** 	sign = ld_word(fs->win + BS_55AA);
 1585              		.loc 1 3301 6 is_stmt 0 view .LVU512
 1586 000e FFF7FEFF 		bl	move_window
 1587              	.LVL198:
3301:DRIVER/FatFs/source/ff.c **** 	sign = ld_word(fs->win + BS_55AA);
 1588              		.loc 1 3301 5 view .LVU513
 1589 0012 0028     		cmp	r0, #0
 1590 0014 5CD1     		bne	.L119
3302:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
 1591              		.loc 1 3302 2 is_stmt 1 view .LVU514
3302:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
 1592              		.loc 1 3302 9 is_stmt 0 view .LVU515
 1593 0016 04F23620 		addw	r0, r4, #566
 1594 001a FFF7FEFF 		bl	ld_word
 1595              	.LVL199:
 1596 001e 0546     		mov	r5, r0
 1597              	.LVL200:
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 96


3306:DRIVER/FatFs/source/ff.c **** 	if (b == 0xEB || b == 0xE9 || b == 0xE8) {	/* Valid JumpBoot code? (short jump, near jump or near 
 1598              		.loc 1 3306 2 is_stmt 1 view .LVU516
3306:DRIVER/FatFs/source/ff.c **** 	if (b == 0xEB || b == 0xE9 || b == 0xE8) {	/* Valid JumpBoot code? (short jump, near jump or near 
 1599              		.loc 1 3306 4 is_stmt 0 view .LVU517
 1600 0020 94F83830 		ldrb	r3, [r4, #56]	@ zero_extendqisi2
 1601              	.LVL201:
3307:DRIVER/FatFs/source/ff.c **** 		if (sign == 0xAA55 && !memcmp(fs->win + BS_FilSysType32, "FAT32   ", 8)) {
 1602              		.loc 1 3307 2 is_stmt 1 view .LVU518
3307:DRIVER/FatFs/source/ff.c **** 		if (sign == 0xAA55 && !memcmp(fs->win + BS_FilSysType32, "FAT32   ", 8)) {
 1603              		.loc 1 3307 5 is_stmt 0 view .LVU519
 1604 0024 EB2B     		cmp	r3, #235
 1605 0026 09D0     		beq	.L115
3307:DRIVER/FatFs/source/ff.c **** 		if (sign == 0xAA55 && !memcmp(fs->win + BS_FilSysType32, "FAT32   ", 8)) {
 1606              		.loc 1 3307 16 discriminator 1 view .LVU520
 1607 0028 E92B     		cmp	r3, #233
 1608 002a 07D0     		beq	.L115
3307:DRIVER/FatFs/source/ff.c **** 		if (sign == 0xAA55 && !memcmp(fs->win + BS_FilSysType32, "FAT32   ", 8)) {
 1609              		.loc 1 3307 29 discriminator 2 view .LVU521
 1610 002c E82B     		cmp	r3, #232
 1611 002e 05D0     		beq	.L115
 1612              	.LVL202:
 1613              	.L116:
3324:DRIVER/FatFs/source/ff.c **** }
 1614              		.loc 1 3324 2 is_stmt 1 view .LVU522
3324:DRIVER/FatFs/source/ff.c **** }
 1615              		.loc 1 3324 28 is_stmt 0 view .LVU523
 1616 0030 4AF65523 		movw	r3, #43605
 1617 0034 9D42     		cmp	r5, r3
 1618 0036 49D0     		beq	.L124
 1619 0038 0320     		movs	r0, #3
 1620              	.LVL203:
 1621              	.L113:
3325:DRIVER/FatFs/source/ff.c **** 
 1622              		.loc 1 3325 1 view .LVU524
 1623 003a 38BD     		pop	{r3, r4, r5, pc}
 1624              	.LVL204:
 1625              	.L115:
3308:DRIVER/FatFs/source/ff.c **** 			return 0;	/* It is an FAT32 VBR */
 1626              		.loc 1 3308 3 is_stmt 1 view .LVU525
3308:DRIVER/FatFs/source/ff.c **** 			return 0;	/* It is an FAT32 VBR */
 1627              		.loc 1 3308 6 is_stmt 0 view .LVU526
 1628 003c 4AF65523 		movw	r3, #43605
 1629              	.LVL205:
3308:DRIVER/FatFs/source/ff.c **** 			return 0;	/* It is an FAT32 VBR */
 1630              		.loc 1 3308 6 view .LVU527
 1631 0040 9D42     		cmp	r5, r3
 1632 0042 39D0     		beq	.L125
 1633              	.LVL206:
 1634              	.L117:
3312:DRIVER/FatFs/source/ff.c **** 		b = fs->win[BPB_SecPerClus];
 1635              		.loc 1 3312 3 is_stmt 1 view .LVU528
3312:DRIVER/FatFs/source/ff.c **** 		b = fs->win[BPB_SecPerClus];
 1636              		.loc 1 3312 7 is_stmt 0 view .LVU529
 1637 0044 04F14300 		add	r0, r4, #67
 1638 0048 FFF7FEFF 		bl	ld_word
 1639              	.LVL207:
3313:DRIVER/FatFs/source/ff.c **** 		if ((w & (w - 1)) == 0 && w >= FF_MIN_SS && w <= FF_MAX_SS	/* Properness of sector size (512-4096
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 97


 1640              		.loc 1 3313 3 is_stmt 1 view .LVU530
3313:DRIVER/FatFs/source/ff.c **** 		if ((w & (w - 1)) == 0 && w >= FF_MIN_SS && w <= FF_MAX_SS	/* Properness of sector size (512-4096
 1641              		.loc 1 3313 5 is_stmt 0 view .LVU531
 1642 004c 94F84520 		ldrb	r2, [r4, #69]	@ zero_extendqisi2
 1643              	.LVL208:
3314:DRIVER/FatFs/source/ff.c **** 			&& b != 0 && (b & (b - 1)) == 0				/* Properness of cluster size (2^n) */
 1644              		.loc 1 3314 3 is_stmt 1 view .LVU532
3314:DRIVER/FatFs/source/ff.c **** 			&& b != 0 && (b & (b - 1)) == 0				/* Properness of cluster size (2^n) */
 1645              		.loc 1 3314 15 is_stmt 0 view .LVU533
 1646 0050 431E     		subs	r3, r0, #1
3314:DRIVER/FatFs/source/ff.c **** 			&& b != 0 && (b & (b - 1)) == 0				/* Properness of cluster size (2^n) */
 1647              		.loc 1 3314 6 view .LVU534
 1648 0052 1842     		tst	r0, r3
 1649 0054 ECD1     		bne	.L116
3314:DRIVER/FatFs/source/ff.c **** 			&& b != 0 && (b & (b - 1)) == 0				/* Properness of cluster size (2^n) */
 1650              		.loc 1 3314 26 discriminator 1 view .LVU535
 1651 0056 B0F5007F 		cmp	r0, #512
 1652 005a E9D3     		bcc	.L116
3314:DRIVER/FatFs/source/ff.c **** 			&& b != 0 && (b & (b - 1)) == 0				/* Properness of cluster size (2^n) */
 1653              		.loc 1 3314 44 discriminator 2 view .LVU536
 1654 005c B0F5805F 		cmp	r0, #4096
 1655 0060 E6D8     		bhi	.L116
3315:DRIVER/FatFs/source/ff.c **** 			&& ld_word(fs->win + BPB_RsvdSecCnt) != 0	/* Properness of reserved sectors (MNBZ) */
 1656              		.loc 1 3315 4 view .LVU537
 1657 0062 002A     		cmp	r2, #0
 1658 0064 E4D0     		beq	.L116
3315:DRIVER/FatFs/source/ff.c **** 			&& ld_word(fs->win + BPB_RsvdSecCnt) != 0	/* Properness of reserved sectors (MNBZ) */
 1659              		.loc 1 3315 25 discriminator 1 view .LVU538
 1660 0066 531E     		subs	r3, r2, #1
3315:DRIVER/FatFs/source/ff.c **** 			&& ld_word(fs->win + BPB_RsvdSecCnt) != 0	/* Properness of reserved sectors (MNBZ) */
 1661              		.loc 1 3315 14 discriminator 1 view .LVU539
 1662 0068 1A42     		tst	r2, r3
 1663 006a E1D1     		bne	.L116
3316:DRIVER/FatFs/source/ff.c **** 			&& (UINT)fs->win[BPB_NumFATs] - 1 <= 1		/* Properness of FATs (1 or 2) */
 1664              		.loc 1 3316 7 view .LVU540
 1665 006c 04F14600 		add	r0, r4, #70
 1666              	.LVL209:
3316:DRIVER/FatFs/source/ff.c **** 			&& (UINT)fs->win[BPB_NumFATs] - 1 <= 1		/* Properness of FATs (1 or 2) */
 1667              		.loc 1 3316 7 view .LVU541
 1668 0070 FFF7FEFF 		bl	ld_word
 1669              	.LVL210:
3316:DRIVER/FatFs/source/ff.c **** 			&& (UINT)fs->win[BPB_NumFATs] - 1 <= 1		/* Properness of FATs (1 or 2) */
 1670              		.loc 1 3316 4 view .LVU542
 1671 0074 0028     		cmp	r0, #0
 1672 0076 DBD0     		beq	.L116
3317:DRIVER/FatFs/source/ff.c **** 			&& ld_word(fs->win + BPB_RootEntCnt) != 0	/* Properness of root dir entries (MNBZ) */
 1673              		.loc 1 3317 20 view .LVU543
 1674 0078 94F84830 		ldrb	r3, [r4, #72]	@ zero_extendqisi2
3317:DRIVER/FatFs/source/ff.c **** 			&& ld_word(fs->win + BPB_RootEntCnt) != 0	/* Properness of root dir entries (MNBZ) */
 1675              		.loc 1 3317 34 view .LVU544
 1676 007c 013B     		subs	r3, r3, #1
3317:DRIVER/FatFs/source/ff.c **** 			&& ld_word(fs->win + BPB_RootEntCnt) != 0	/* Properness of root dir entries (MNBZ) */
 1677              		.loc 1 3317 4 view .LVU545
 1678 007e 012B     		cmp	r3, #1
 1679 0080 D6D8     		bhi	.L116
3318:DRIVER/FatFs/source/ff.c **** 			&& (ld_word(fs->win + BPB_TotSec16) >= 128 || ld_dword(fs->win + BPB_TotSec32) >= 0x10000)	/* Pr
 1680              		.loc 1 3318 7 view .LVU546
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 98


 1681 0082 04F14900 		add	r0, r4, #73
 1682 0086 FFF7FEFF 		bl	ld_word
 1683              	.LVL211:
3318:DRIVER/FatFs/source/ff.c **** 			&& (ld_word(fs->win + BPB_TotSec16) >= 128 || ld_dword(fs->win + BPB_TotSec32) >= 0x10000)	/* Pr
 1684              		.loc 1 3318 4 view .LVU547
 1685 008a 0028     		cmp	r0, #0
 1686 008c D0D0     		beq	.L116
3319:DRIVER/FatFs/source/ff.c **** 			&& ld_word(fs->win + BPB_FATSz16) != 0) {	/* Properness of FAT size (MNBZ) */
 1687              		.loc 1 3319 8 view .LVU548
 1688 008e 04F14B00 		add	r0, r4, #75
 1689 0092 FFF7FEFF 		bl	ld_word
 1690              	.LVL212:
3319:DRIVER/FatFs/source/ff.c **** 			&& ld_word(fs->win + BPB_FATSz16) != 0) {	/* Properness of FAT size (MNBZ) */
 1691              		.loc 1 3319 4 view .LVU549
 1692 0096 7F28     		cmp	r0, #127
 1693 0098 06D8     		bhi	.L118
3319:DRIVER/FatFs/source/ff.c **** 			&& ld_word(fs->win + BPB_FATSz16) != 0) {	/* Properness of FAT size (MNBZ) */
 1694              		.loc 1 3319 50 discriminator 1 view .LVU550
 1695 009a 04F15800 		add	r0, r4, #88
 1696 009e FFF7FEFF 		bl	ld_dword
 1697              	.LVL213:
3319:DRIVER/FatFs/source/ff.c **** 			&& ld_word(fs->win + BPB_FATSz16) != 0) {	/* Properness of FAT size (MNBZ) */
 1698              		.loc 1 3319 47 discriminator 1 view .LVU551
 1699 00a2 B0F5803F 		cmp	r0, #65536
 1700 00a6 C3D3     		bcc	.L116
 1701              	.L118:
3320:DRIVER/FatFs/source/ff.c **** 				return 0;	/* It can be presumed an FAT VBR */
 1702              		.loc 1 3320 7 view .LVU552
 1703 00a8 04F14E00 		add	r0, r4, #78
 1704 00ac FFF7FEFF 		bl	ld_word
 1705              	.LVL214:
3320:DRIVER/FatFs/source/ff.c **** 				return 0;	/* It can be presumed an FAT VBR */
 1706              		.loc 1 3320 4 view .LVU553
 1707 00b0 0028     		cmp	r0, #0
 1708 00b2 BDD0     		beq	.L116
3321:DRIVER/FatFs/source/ff.c **** 		}
 1709              		.loc 1 3321 12 view .LVU554
 1710 00b4 0020     		movs	r0, #0
 1711 00b6 C0E7     		b	.L113
 1712              	.LVL215:
 1713              	.L125:
3308:DRIVER/FatFs/source/ff.c **** 			return 0;	/* It is an FAT32 VBR */
 1714              		.loc 1 3308 26 discriminator 1 view .LVU555
 1715 00b8 0822     		movs	r2, #8
 1716 00ba 0649     		ldr	r1, .L126
 1717 00bc 04F18A00 		add	r0, r4, #138
 1718 00c0 FFF7FEFF 		bl	memcmp
 1719              	.LVL216:
3308:DRIVER/FatFs/source/ff.c **** 			return 0;	/* It is an FAT32 VBR */
 1720              		.loc 1 3308 22 discriminator 1 view .LVU556
 1721 00c4 0028     		cmp	r0, #0
 1722 00c6 BDD1     		bne	.L117
3309:DRIVER/FatFs/source/ff.c **** 		}
 1723              		.loc 1 3309 11 view .LVU557
 1724 00c8 0020     		movs	r0, #0
 1725 00ca B6E7     		b	.L113
 1726              	.LVL217:
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 99


 1727              	.L124:
3324:DRIVER/FatFs/source/ff.c **** }
 1728              		.loc 1 3324 28 view .LVU558
 1729 00cc 0220     		movs	r0, #2
 1730 00ce B4E7     		b	.L113
 1731              	.LVL218:
 1732              	.L119:
3301:DRIVER/FatFs/source/ff.c **** 	sign = ld_word(fs->win + BS_55AA);
 1733              		.loc 1 3301 45 view .LVU559
 1734 00d0 0420     		movs	r0, #4
 1735 00d2 B2E7     		b	.L113
 1736              	.L127:
 1737              		.align	2
 1738              	.L126:
 1739 00d4 00000000 		.word	.LC0
 1740              		.cfi_endproc
 1741              	.LFE35:
 1743              		.section	.text.find_volume,"ax",%progbits
 1744              		.align	1
 1745              		.syntax unified
 1746              		.thumb
 1747              		.thumb_func
 1749              	find_volume:
 1750              	.LVL219:
 1751              	.LFB36:
3335:DRIVER/FatFs/source/ff.c **** 	UINT fmt, i;
 1752              		.loc 1 3335 1 is_stmt 1 view -0
 1753              		.cfi_startproc
 1754              		@ args = 0, pretend = 0, frame = 16
 1755              		@ frame_needed = 0, uses_anonymous_args = 0
3335:DRIVER/FatFs/source/ff.c **** 	UINT fmt, i;
 1756              		.loc 1 3335 1 is_stmt 0 view .LVU561
 1757 0000 70B5     		push	{r4, r5, r6, lr}
 1758              	.LCFI9:
 1759              		.cfi_def_cfa_offset 16
 1760              		.cfi_offset 4, -16
 1761              		.cfi_offset 5, -12
 1762              		.cfi_offset 6, -8
 1763              		.cfi_offset 14, -4
 1764 0002 84B0     		sub	sp, sp, #16
 1765              	.LCFI10:
 1766              		.cfi_def_cfa_offset 32
 1767 0004 0646     		mov	r6, r0
 1768 0006 0D46     		mov	r5, r1
3336:DRIVER/FatFs/source/ff.c **** 	DWORD mbr_pt[4];
 1769              		.loc 1 3336 2 is_stmt 1 view .LVU562
3337:DRIVER/FatFs/source/ff.c **** 
 1770              		.loc 1 3337 2 view .LVU563
3340:DRIVER/FatFs/source/ff.c **** 	if (fmt != 2 && (fmt >= 3 || part == 0)) return fmt;	/* Returns if it is an FAT VBR as auto scan, 
 1771              		.loc 1 3340 2 view .LVU564
3340:DRIVER/FatFs/source/ff.c **** 	if (fmt != 2 && (fmt >= 3 || part == 0)) return fmt;	/* Returns if it is an FAT VBR as auto scan, 
 1772              		.loc 1 3340 8 is_stmt 0 view .LVU565
 1773 0008 0021     		movs	r1, #0
 1774              	.LVL220:
3340:DRIVER/FatFs/source/ff.c **** 	if (fmt != 2 && (fmt >= 3 || part == 0)) return fmt;	/* Returns if it is an FAT VBR as auto scan, 
 1775              		.loc 1 3340 8 view .LVU566
 1776 000a FFF7FEFF 		bl	check_fs
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 100


 1777              	.LVL221:
3341:DRIVER/FatFs/source/ff.c **** 
 1778              		.loc 1 3341 2 is_stmt 1 view .LVU567
3341:DRIVER/FatFs/source/ff.c **** 
 1779              		.loc 1 3341 5 is_stmt 0 view .LVU568
 1780 000e 0228     		cmp	r0, #2
 1781 0010 03D0     		beq	.L136
3341:DRIVER/FatFs/source/ff.c **** 
 1782              		.loc 1 3341 15 discriminator 1 view .LVU569
 1783 0012 2BD8     		bhi	.L128
3341:DRIVER/FatFs/source/ff.c **** 
 1784              		.loc 1 3341 28 discriminator 3 view .LVU570
 1785 0014 55B3     		cbz	r5, .L128
 1786 0016 0024     		movs	r4, #0
 1787 0018 00E0     		b	.L131
 1788              	.L136:
 1789 001a 0024     		movs	r4, #0
 1790              	.LVL222:
 1791              	.L131:
3368:DRIVER/FatFs/source/ff.c **** 		mbr_pt[i] = ld_dword(fs->win + MBR_Table + i * SZ_PTE + PTE_StLba);
 1792              		.loc 1 3368 16 is_stmt 1 discriminator 1 view .LVU571
 1793 001c 032C     		cmp	r4, #3
 1794 001e 0ED8     		bhi	.L140
3369:DRIVER/FatFs/source/ff.c **** 	}
 1795              		.loc 1 3369 3 discriminator 3 view .LVU572
3369:DRIVER/FatFs/source/ff.c **** 	}
 1796              		.loc 1 3369 24 is_stmt 0 discriminator 3 view .LVU573
 1797 0020 06F13800 		add	r0, r6, #56
3369:DRIVER/FatFs/source/ff.c **** 	}
 1798              		.loc 1 3369 48 discriminator 3 view .LVU574
 1799 0024 2301     		lsls	r3, r4, #4
3369:DRIVER/FatFs/source/ff.c **** 	}
 1800              		.loc 1 3369 57 discriminator 3 view .LVU575
 1801 0026 03F5E373 		add	r3, r3, #454
3369:DRIVER/FatFs/source/ff.c **** 	}
 1802              		.loc 1 3369 15 discriminator 3 view .LVU576
 1803 002a 1844     		add	r0, r0, r3
 1804 002c FFF7FEFF 		bl	ld_dword
 1805              	.LVL223:
3369:DRIVER/FatFs/source/ff.c **** 	}
 1806              		.loc 1 3369 13 discriminator 3 view .LVU577
 1807 0030 04AB     		add	r3, sp, #16
 1808 0032 03EB8403 		add	r3, r3, r4, lsl #2
 1809 0036 43F8100C 		str	r0, [r3, #-16]
3368:DRIVER/FatFs/source/ff.c **** 		mbr_pt[i] = ld_dword(fs->win + MBR_Table + i * SZ_PTE + PTE_StLba);
 1810              		.loc 1 3368 22 is_stmt 1 discriminator 3 view .LVU578
 1811 003a 0134     		adds	r4, r4, #1
 1812              	.LVL224:
3368:DRIVER/FatFs/source/ff.c **** 		mbr_pt[i] = ld_dword(fs->win + MBR_Table + i * SZ_PTE + PTE_StLba);
 1813              		.loc 1 3368 22 is_stmt 0 discriminator 3 view .LVU579
 1814 003c EEE7     		b	.L131
 1815              	.L140:
3371:DRIVER/FatFs/source/ff.c **** 	do {							/* Find an FAT volume */
 1816              		.loc 1 3371 2 is_stmt 1 view .LVU580
3371:DRIVER/FatFs/source/ff.c **** 	do {							/* Find an FAT volume */
 1817              		.loc 1 3371 22 is_stmt 0 view .LVU581
 1818 003e 0DB1     		cbz	r5, .L137
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 101


3371:DRIVER/FatFs/source/ff.c **** 	do {							/* Find an FAT volume */
 1819              		.loc 1 3371 22 discriminator 1 view .LVU582
 1820 0040 6C1E     		subs	r4, r5, #1
 1821              	.LVL225:
3371:DRIVER/FatFs/source/ff.c **** 	do {							/* Find an FAT volume */
 1822              		.loc 1 3371 22 discriminator 1 view .LVU583
 1823 0042 0AE0     		b	.L135
 1824              	.LVL226:
 1825              	.L137:
3371:DRIVER/FatFs/source/ff.c **** 	do {							/* Find an FAT volume */
 1826              		.loc 1 3371 22 view .LVU584
 1827 0044 2C46     		mov	r4, r5
 1828              	.LVL227:
3371:DRIVER/FatFs/source/ff.c **** 	do {							/* Find an FAT volume */
 1829              		.loc 1 3371 22 view .LVU585
 1830 0046 08E0     		b	.L135
 1831              	.LVL228:
 1832              	.L141:
3373:DRIVER/FatFs/source/ff.c **** 	} while (part == 0 && fmt >= 2 && ++i < 4);
 1833              		.loc 1 3373 21 discriminator 1 view .LVU586
 1834 0048 3046     		mov	r0, r6
 1835 004a FFF7FEFF 		bl	check_fs
 1836              	.LVL229:
 1837              	.L134:
3374:DRIVER/FatFs/source/ff.c **** 	return fmt;
 1838              		.loc 1 3374 33 is_stmt 1 discriminator 4 view .LVU587
 1839 004e 6DB9     		cbnz	r5, .L128
3374:DRIVER/FatFs/source/ff.c **** 	return fmt;
 1840              		.loc 1 3374 21 is_stmt 0 discriminator 1 view .LVU588
 1841 0050 0128     		cmp	r0, #1
 1842 0052 0BD9     		bls	.L128
3374:DRIVER/FatFs/source/ff.c **** 	return fmt;
 1843              		.loc 1 3374 33 discriminator 2 view .LVU589
 1844 0054 0134     		adds	r4, r4, #1
 1845              	.LVL230:
3374:DRIVER/FatFs/source/ff.c **** 	return fmt;
 1846              		.loc 1 3374 33 discriminator 2 view .LVU590
 1847 0056 032C     		cmp	r4, #3
 1848 0058 08D8     		bhi	.L128
 1849              	.LVL231:
 1850              	.L135:
3372:DRIVER/FatFs/source/ff.c **** 		fmt = mbr_pt[i] ? check_fs(fs, mbr_pt[i]) : 3;	/* Check if the partition is FAT */
 1851              		.loc 1 3372 2 is_stmt 1 view .LVU591
3373:DRIVER/FatFs/source/ff.c **** 	} while (part == 0 && fmt >= 2 && ++i < 4);
 1852              		.loc 1 3373 3 view .LVU592
3373:DRIVER/FatFs/source/ff.c **** 	} while (part == 0 && fmt >= 2 && ++i < 4);
 1853              		.loc 1 3373 15 is_stmt 0 view .LVU593
 1854 005a 04AB     		add	r3, sp, #16
 1855 005c 03EB8403 		add	r3, r3, r4, lsl #2
 1856 0060 53F8101C 		ldr	r1, [r3, #-16]
3373:DRIVER/FatFs/source/ff.c **** 	} while (part == 0 && fmt >= 2 && ++i < 4);
 1857              		.loc 1 3373 45 view .LVU594
 1858 0064 0029     		cmp	r1, #0
 1859 0066 EFD1     		bne	.L141
 1860 0068 0320     		movs	r0, #3
 1861 006a F0E7     		b	.L134
 1862              	.LVL232:
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 102


 1863              	.L128:
3376:DRIVER/FatFs/source/ff.c **** 
 1864              		.loc 1 3376 1 view .LVU595
 1865 006c 04B0     		add	sp, sp, #16
 1866              	.LCFI11:
 1867              		.cfi_def_cfa_offset 16
 1868              		@ sp needed
 1869 006e 70BD     		pop	{r4, r5, r6, pc}
3376:DRIVER/FatFs/source/ff.c **** 
 1870              		.loc 1 3376 1 view .LVU596
 1871              		.cfi_endproc
 1872              	.LFE36:
 1874              		.section	.text.mount_volume,"ax",%progbits
 1875              		.align	1
 1876              		.syntax unified
 1877              		.thumb
 1878              		.thumb_func
 1880              	mount_volume:
 1881              	.LVL233:
 1882              	.LFB37:
3390:DRIVER/FatFs/source/ff.c **** 	int vol;
 1883              		.loc 1 3390 1 is_stmt 1 view -0
 1884              		.cfi_startproc
 1885              		@ args = 0, pretend = 0, frame = 8
 1886              		@ frame_needed = 0, uses_anonymous_args = 0
3390:DRIVER/FatFs/source/ff.c **** 	int vol;
 1887              		.loc 1 3390 1 is_stmt 0 view .LVU598
 1888 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 1889              	.LCFI12:
 1890              		.cfi_def_cfa_offset 36
 1891              		.cfi_offset 4, -36
 1892              		.cfi_offset 5, -32
 1893              		.cfi_offset 6, -28
 1894              		.cfi_offset 7, -24
 1895              		.cfi_offset 8, -20
 1896              		.cfi_offset 9, -16
 1897              		.cfi_offset 10, -12
 1898              		.cfi_offset 11, -8
 1899              		.cfi_offset 14, -4
 1900 0004 83B0     		sub	sp, sp, #12
 1901              	.LCFI13:
 1902              		.cfi_def_cfa_offset 48
 1903 0006 0D46     		mov	r5, r1
 1904 0008 1646     		mov	r6, r2
3391:DRIVER/FatFs/source/ff.c **** 	FATFS *fs;
 1905              		.loc 1 3391 2 is_stmt 1 view .LVU599
3392:DRIVER/FatFs/source/ff.c **** 	DSTATUS stat;
 1906              		.loc 1 3392 2 view .LVU600
3393:DRIVER/FatFs/source/ff.c **** 	LBA_t bsect;
 1907              		.loc 1 3393 2 view .LVU601
3394:DRIVER/FatFs/source/ff.c **** 	DWORD tsect, sysect, fasize, nclst, szbfat;
 1908              		.loc 1 3394 2 view .LVU602
3395:DRIVER/FatFs/source/ff.c **** 	WORD nrsv;
 1909              		.loc 1 3395 2 view .LVU603
3396:DRIVER/FatFs/source/ff.c **** 	UINT fmt;
 1910              		.loc 1 3396 2 view .LVU604
3397:DRIVER/FatFs/source/ff.c **** 
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 103


 1911              		.loc 1 3397 2 view .LVU605
3401:DRIVER/FatFs/source/ff.c **** 	vol = get_ldnumber(path);
 1912              		.loc 1 3401 2 view .LVU606
3401:DRIVER/FatFs/source/ff.c **** 	vol = get_ldnumber(path);
 1913              		.loc 1 3401 7 is_stmt 0 view .LVU607
 1914 000a 0023     		movs	r3, #0
 1915 000c 0B60     		str	r3, [r1]
3402:DRIVER/FatFs/source/ff.c **** 	if (vol < 0) return FR_INVALID_DRIVE;
 1916              		.loc 1 3402 2 is_stmt 1 view .LVU608
3402:DRIVER/FatFs/source/ff.c **** 	if (vol < 0) return FR_INVALID_DRIVE;
 1917              		.loc 1 3402 8 is_stmt 0 view .LVU609
 1918 000e FFF7FEFF 		bl	get_ldnumber
 1919              	.LVL234:
3403:DRIVER/FatFs/source/ff.c **** 
 1920              		.loc 1 3403 2 is_stmt 1 view .LVU610
3403:DRIVER/FatFs/source/ff.c **** 
 1921              		.loc 1 3403 5 is_stmt 0 view .LVU611
 1922 0012 0028     		cmp	r0, #0
3403:DRIVER/FatFs/source/ff.c **** 
 1923              		.loc 1 3403 5 view .LVU612
 1924 0014 C0F24181 		blt	.L155
3406:DRIVER/FatFs/source/ff.c **** 	if (!fs) return FR_NOT_ENABLED;		/* Is the filesystem object available? */
 1925              		.loc 1 3406 2 is_stmt 1 view .LVU613
3406:DRIVER/FatFs/source/ff.c **** 	if (!fs) return FR_NOT_ENABLED;		/* Is the filesystem object available? */
 1926              		.loc 1 3406 5 is_stmt 0 view .LVU614
 1927 0018 B64B     		ldr	r3, .L187
 1928 001a 53F82040 		ldr	r4, [r3, r0, lsl #2]
 1929              	.LVL235:
3407:DRIVER/FatFs/source/ff.c **** #if FF_FS_REENTRANT
 1930              		.loc 1 3407 2 is_stmt 1 view .LVU615
3407:DRIVER/FatFs/source/ff.c **** #if FF_FS_REENTRANT
 1931              		.loc 1 3407 5 is_stmt 0 view .LVU616
 1932 001e 002C     		cmp	r4, #0
 1933 0020 00F04081 		beq	.L156
3411:DRIVER/FatFs/source/ff.c **** 
 1934              		.loc 1 3411 2 is_stmt 1 view .LVU617
3411:DRIVER/FatFs/source/ff.c **** 
 1935              		.loc 1 3411 7 is_stmt 0 view .LVU618
 1936 0024 2C60     		str	r4, [r5]
3413:DRIVER/FatFs/source/ff.c **** 	if (fs->fs_type != 0) {				/* If the volume has been mounted */
 1937              		.loc 1 3413 2 is_stmt 1 view .LVU619
3413:DRIVER/FatFs/source/ff.c **** 	if (fs->fs_type != 0) {				/* If the volume has been mounted */
 1938              		.loc 1 3413 7 is_stmt 0 view .LVU620
 1939 0026 06F0FE06 		and	r6, r6, #254
 1940              	.LVL236:
3414:DRIVER/FatFs/source/ff.c **** 		stat = disk_status(fs->pdrv);
 1941              		.loc 1 3414 2 is_stmt 1 view .LVU621
3414:DRIVER/FatFs/source/ff.c **** 		stat = disk_status(fs->pdrv);
 1942              		.loc 1 3414 8 is_stmt 0 view .LVU622
 1943 002a 2378     		ldrb	r3, [r4]	@ zero_extendqisi2
3414:DRIVER/FatFs/source/ff.c **** 		stat = disk_status(fs->pdrv);
 1944              		.loc 1 3414 5 view .LVU623
 1945 002c 73B1     		cbz	r3, .L144
3415:DRIVER/FatFs/source/ff.c **** 		if (!(stat & STA_NOINIT)) {		/* and the physical drive is kept initialized */
 1946              		.loc 1 3415 3 is_stmt 1 view .LVU624
3415:DRIVER/FatFs/source/ff.c **** 		if (!(stat & STA_NOINIT)) {		/* and the physical drive is kept initialized */
 1947              		.loc 1 3415 10 is_stmt 0 view .LVU625
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 104


 1948 002e 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 1949              	.LVL237:
3415:DRIVER/FatFs/source/ff.c **** 		if (!(stat & STA_NOINIT)) {		/* and the physical drive is kept initialized */
 1950              		.loc 1 3415 10 view .LVU626
 1951 0030 FFF7FEFF 		bl	disk_status
 1952              	.LVL238:
3416:DRIVER/FatFs/source/ff.c **** 			if (!FF_FS_READONLY && mode && (stat & STA_PROTECT)) {	/* Check write protection if needed */
 1953              		.loc 1 3416 3 is_stmt 1 view .LVU627
3416:DRIVER/FatFs/source/ff.c **** 			if (!FF_FS_READONLY && mode && (stat & STA_PROTECT)) {	/* Check write protection if needed */
 1954              		.loc 1 3416 6 is_stmt 0 view .LVU628
 1955 0034 10F00105 		ands	r5, r0, #1
 1956              	.LVL239:
3416:DRIVER/FatFs/source/ff.c **** 			if (!FF_FS_READONLY && mode && (stat & STA_PROTECT)) {	/* Check write protection if needed */
 1957              		.loc 1 3416 6 view .LVU629
 1958 0038 08D1     		bne	.L144
3417:DRIVER/FatFs/source/ff.c **** 				return FR_WRITE_PROTECTED;
 1959              		.loc 1 3417 4 is_stmt 1 view .LVU630
3417:DRIVER/FatFs/source/ff.c **** 				return FR_WRITE_PROTECTED;
 1960              		.loc 1 3417 7 is_stmt 0 view .LVU631
 1961 003a 002E     		cmp	r6, #0
 1962 003c 00F02E81 		beq	.L143
3417:DRIVER/FatFs/source/ff.c **** 				return FR_WRITE_PROTECTED;
 1963              		.loc 1 3417 32 discriminator 1 view .LVU632
 1964 0040 10F0040F 		tst	r0, #4
 1965 0044 00F02A81 		beq	.L143
3418:DRIVER/FatFs/source/ff.c **** 			}
 1966              		.loc 1 3418 12 view .LVU633
 1967 0048 0A25     		movs	r5, #10
 1968 004a 27E1     		b	.L143
 1969              	.LVL240:
 1970              	.L144:
3427:DRIVER/FatFs/source/ff.c **** 	stat = disk_initialize(fs->pdrv);	/* Initialize the volume hosting physical drive */
 1971              		.loc 1 3427 2 is_stmt 1 view .LVU634
3427:DRIVER/FatFs/source/ff.c **** 	stat = disk_initialize(fs->pdrv);	/* Initialize the volume hosting physical drive */
 1972              		.loc 1 3427 14 is_stmt 0 view .LVU635
 1973 004c 0023     		movs	r3, #0
 1974 004e 2370     		strb	r3, [r4]
3428:DRIVER/FatFs/source/ff.c **** 	if (stat & STA_NOINIT) { 			/* Check if the initialization succeeded */
 1975              		.loc 1 3428 2 is_stmt 1 view .LVU636
3428:DRIVER/FatFs/source/ff.c **** 	if (stat & STA_NOINIT) { 			/* Check if the initialization succeeded */
 1976              		.loc 1 3428 9 is_stmt 0 view .LVU637
 1977 0050 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 1978 0052 FFF7FEFF 		bl	disk_initialize
 1979              	.LVL241:
3429:DRIVER/FatFs/source/ff.c **** 		return FR_NOT_READY;			/* Failed to initialize due to no medium or hard error */
 1980              		.loc 1 3429 2 is_stmt 1 view .LVU638
3429:DRIVER/FatFs/source/ff.c **** 		return FR_NOT_READY;			/* Failed to initialize due to no medium or hard error */
 1981              		.loc 1 3429 5 is_stmt 0 view .LVU639
 1982 0056 10F0010F 		tst	r0, #1
 1983 005a 40F02581 		bne	.L158
3432:DRIVER/FatFs/source/ff.c **** 		return FR_WRITE_PROTECTED;
 1984              		.loc 1 3432 2 is_stmt 1 view .LVU640
3432:DRIVER/FatFs/source/ff.c **** 		return FR_WRITE_PROTECTED;
 1985              		.loc 1 3432 5 is_stmt 0 view .LVU641
 1986 005e 1EB1     		cbz	r6, .L145
3432:DRIVER/FatFs/source/ff.c **** 		return FR_WRITE_PROTECTED;
 1987              		.loc 1 3432 30 discriminator 1 view .LVU642
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 105


 1988 0060 10F0040F 		tst	r0, #4
 1989 0064 40F02281 		bne	.L159
 1990              	.L145:
3436:DRIVER/FatFs/source/ff.c **** 	if (SS(fs) > FF_MAX_SS || SS(fs) < FF_MIN_SS || (SS(fs) & (SS(fs) - 1))) return FR_DISK_ERR;
 1991              		.loc 1 3436 2 is_stmt 1 view .LVU643
3436:DRIVER/FatFs/source/ff.c **** 	if (SS(fs) > FF_MAX_SS || SS(fs) < FF_MIN_SS || (SS(fs) & (SS(fs) - 1))) return FR_DISK_ERR;
 1992              		.loc 1 3436 6 is_stmt 0 view .LVU644
 1993 0068 04F10C02 		add	r2, r4, #12
 1994 006c 0221     		movs	r1, #2
 1995 006e 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 1996              	.LVL242:
3436:DRIVER/FatFs/source/ff.c **** 	if (SS(fs) > FF_MAX_SS || SS(fs) < FF_MIN_SS || (SS(fs) & (SS(fs) - 1))) return FR_DISK_ERR;
 1997              		.loc 1 3436 6 view .LVU645
 1998 0070 FFF7FEFF 		bl	disk_ioctl
 1999              	.LVL243:
3436:DRIVER/FatFs/source/ff.c **** 	if (SS(fs) > FF_MAX_SS || SS(fs) < FF_MIN_SS || (SS(fs) & (SS(fs) - 1))) return FR_DISK_ERR;
 2000              		.loc 1 3436 5 view .LVU646
 2001 0074 0546     		mov	r5, r0
 2002 0076 0028     		cmp	r0, #0
 2003 0078 40F01A81 		bne	.L160
3437:DRIVER/FatFs/source/ff.c **** #endif
 2004              		.loc 1 3437 2 is_stmt 1 view .LVU647
3437:DRIVER/FatFs/source/ff.c **** #endif
 2005              		.loc 1 3437 6 is_stmt 0 view .LVU648
 2006 007c A289     		ldrh	r2, [r4, #12]
3437:DRIVER/FatFs/source/ff.c **** #endif
 2007              		.loc 1 3437 25 view .LVU649
 2008 007e A2F50073 		sub	r3, r2, #512
 2009 0082 9BB2     		uxth	r3, r3
3437:DRIVER/FatFs/source/ff.c **** #endif
 2010              		.loc 1 3437 5 view .LVU650
 2011 0084 B3F5606F 		cmp	r3, #3584
 2012 0088 00F21481 		bhi	.L161
3437:DRIVER/FatFs/source/ff.c **** #endif
 2013              		.loc 1 3437 68 discriminator 2 view .LVU651
 2014 008c 531E     		subs	r3, r2, #1
3437:DRIVER/FatFs/source/ff.c **** #endif
 2015              		.loc 1 3437 47 discriminator 2 view .LVU652
 2016 008e 1A42     		tst	r2, r3
 2017 0090 01D0     		beq	.L182
3437:DRIVER/FatFs/source/ff.c **** #endif
 2018              		.loc 1 3437 82 view .LVU653
 2019 0092 0125     		movs	r5, #1
 2020 0094 02E1     		b	.L143
 2021              	.L182:
3441:DRIVER/FatFs/source/ff.c **** 	if (fmt == 4) return FR_DISK_ERR;		/* An error occurred in the disk I/O layer */
 2022              		.loc 1 3441 2 is_stmt 1 view .LVU654
3441:DRIVER/FatFs/source/ff.c **** 	if (fmt == 4) return FR_DISK_ERR;		/* An error occurred in the disk I/O layer */
 2023              		.loc 1 3441 8 is_stmt 0 view .LVU655
 2024 0096 0021     		movs	r1, #0
 2025 0098 2046     		mov	r0, r4
 2026 009a FFF7FEFF 		bl	find_volume
 2027              	.LVL244:
3442:DRIVER/FatFs/source/ff.c **** 	if (fmt >= 2) return FR_NO_FILESYSTEM;	/* No FAT volume is found */
 2028              		.loc 1 3442 2 is_stmt 1 view .LVU656
3442:DRIVER/FatFs/source/ff.c **** 	if (fmt >= 2) return FR_NO_FILESYSTEM;	/* No FAT volume is found */
 2029              		.loc 1 3442 5 is_stmt 0 view .LVU657
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 106


 2030 009e 0428     		cmp	r0, #4
 2031 00a0 00F00A81 		beq	.L163
3443:DRIVER/FatFs/source/ff.c **** 	bsect = fs->winsect;					/* Volume offset in the hosting physical drive */
 2032              		.loc 1 3443 2 is_stmt 1 view .LVU658
3443:DRIVER/FatFs/source/ff.c **** 	bsect = fs->winsect;					/* Volume offset in the hosting physical drive */
 2033              		.loc 1 3443 5 is_stmt 0 view .LVU659
 2034 00a4 0128     		cmp	r0, #1
 2035 00a6 00F20981 		bhi	.L164
3444:DRIVER/FatFs/source/ff.c **** 
 2036              		.loc 1 3444 2 is_stmt 1 view .LVU660
3444:DRIVER/FatFs/source/ff.c **** 
 2037              		.loc 1 3444 8 is_stmt 0 view .LVU661
 2038 00aa D4F834A0 		ldr	r10, [r4, #52]
 2039              	.LVL245:
3512:DRIVER/FatFs/source/ff.c **** 
 2040              		.loc 1 3512 3 is_stmt 1 view .LVU662
3512:DRIVER/FatFs/source/ff.c **** 
 2041              		.loc 1 3512 7 is_stmt 0 view .LVU663
 2042 00ae 04F14300 		add	r0, r4, #67
 2043              	.LVL246:
3512:DRIVER/FatFs/source/ff.c **** 
 2044              		.loc 1 3512 7 view .LVU664
 2045 00b2 FFF7FEFF 		bl	ld_word
 2046              	.LVL247:
3512:DRIVER/FatFs/source/ff.c **** 
 2047              		.loc 1 3512 44 view .LVU665
 2048 00b6 A789     		ldrh	r7, [r4, #12]
3512:DRIVER/FatFs/source/ff.c **** 
 2049              		.loc 1 3512 6 view .LVU666
 2050 00b8 B842     		cmp	r0, r7
 2051 00ba 40F00181 		bne	.L165
3514:DRIVER/FatFs/source/ff.c **** 		if (fasize == 0) fasize = ld_dword(fs->win + BPB_FATSz32);
 2052              		.loc 1 3514 3 is_stmt 1 view .LVU667
3514:DRIVER/FatFs/source/ff.c **** 		if (fasize == 0) fasize = ld_dword(fs->win + BPB_FATSz32);
 2053              		.loc 1 3514 12 is_stmt 0 view .LVU668
 2054 00be 04F14E00 		add	r0, r4, #78
 2055 00c2 FFF7FEFF 		bl	ld_word
 2056              	.LVL248:
3514:DRIVER/FatFs/source/ff.c **** 		if (fasize == 0) fasize = ld_dword(fs->win + BPB_FATSz32);
 2057              		.loc 1 3514 10 view .LVU669
 2058 00c6 0646     		mov	r6, r0
 2059              	.LVL249:
3515:DRIVER/FatFs/source/ff.c **** 		fs->fsize = fasize;
 2060              		.loc 1 3515 3 is_stmt 1 view .LVU670
3515:DRIVER/FatFs/source/ff.c **** 		fs->fsize = fasize;
 2061              		.loc 1 3515 6 is_stmt 0 view .LVU671
 2062 00c8 20B9     		cbnz	r0, .L146
3515:DRIVER/FatFs/source/ff.c **** 		fs->fsize = fasize;
 2063              		.loc 1 3515 20 is_stmt 1 discriminator 1 view .LVU672
3515:DRIVER/FatFs/source/ff.c **** 		fs->fsize = fasize;
 2064              		.loc 1 3515 29 is_stmt 0 discriminator 1 view .LVU673
 2065 00ca 04F15C00 		add	r0, r4, #92
 2066              	.LVL250:
3515:DRIVER/FatFs/source/ff.c **** 		fs->fsize = fasize;
 2067              		.loc 1 3515 29 discriminator 1 view .LVU674
 2068 00ce FFF7FEFF 		bl	ld_dword
 2069              	.LVL251:
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 107


 2070 00d2 0646     		mov	r6, r0
 2071              	.LVL252:
 2072              	.L146:
3516:DRIVER/FatFs/source/ff.c **** 
 2073              		.loc 1 3516 3 is_stmt 1 view .LVU675
3516:DRIVER/FatFs/source/ff.c **** 
 2074              		.loc 1 3516 13 is_stmt 0 view .LVU676
 2075 00d4 2662     		str	r6, [r4, #32]
3518:DRIVER/FatFs/source/ff.c **** 		if (fs->n_fats != 1 && fs->n_fats != 2) return FR_NO_FILESYSTEM;	/* (Must be 1 or 2) */
 2076              		.loc 1 3518 3 is_stmt 1 view .LVU677
3518:DRIVER/FatFs/source/ff.c **** 		if (fs->n_fats != 1 && fs->n_fats != 2) return FR_NO_FILESYSTEM;	/* (Must be 1 or 2) */
 2077              		.loc 1 3518 23 is_stmt 0 view .LVU678
 2078 00d6 94F84820 		ldrb	r2, [r4, #72]	@ zero_extendqisi2
3518:DRIVER/FatFs/source/ff.c **** 		if (fs->n_fats != 1 && fs->n_fats != 2) return FR_NO_FILESYSTEM;	/* (Must be 1 or 2) */
 2079              		.loc 1 3518 14 view .LVU679
 2080 00da E270     		strb	r2, [r4, #3]
3519:DRIVER/FatFs/source/ff.c **** 		fasize *= fs->n_fats;							/* Number of sectors for FAT area */
 2081              		.loc 1 3519 3 is_stmt 1 view .LVU680
3519:DRIVER/FatFs/source/ff.c **** 		fasize *= fs->n_fats;							/* Number of sectors for FAT area */
 2082              		.loc 1 3519 23 is_stmt 0 view .LVU681
 2083 00dc 531E     		subs	r3, r2, #1
 2084 00de DBB2     		uxtb	r3, r3
3519:DRIVER/FatFs/source/ff.c **** 		fasize *= fs->n_fats;							/* Number of sectors for FAT area */
 2085              		.loc 1 3519 6 view .LVU682
 2086 00e0 012B     		cmp	r3, #1
 2087 00e2 00F2EF80 		bhi	.L166
3520:DRIVER/FatFs/source/ff.c **** 
 2088              		.loc 1 3520 3 is_stmt 1 view .LVU683
3520:DRIVER/FatFs/source/ff.c **** 
 2089              		.loc 1 3520 10 is_stmt 0 view .LVU684
 2090 00e6 06FB02F3 		mul	r3, r6, r2
 2091 00ea 0093     		str	r3, [sp]
 2092              	.LVL253:
3522:DRIVER/FatFs/source/ff.c **** 		if (fs->csize == 0 || (fs->csize & (fs->csize - 1))) return FR_NO_FILESYSTEM;	/* (Must be power o
 2093              		.loc 1 3522 3 is_stmt 1 view .LVU685
3522:DRIVER/FatFs/source/ff.c **** 		if (fs->csize == 0 || (fs->csize & (fs->csize - 1))) return FR_NO_FILESYSTEM;	/* (Must be power o
 2094              		.loc 1 3522 22 is_stmt 0 view .LVU686
 2095 00ec 94F84580 		ldrb	r8, [r4, #69]	@ zero_extendqisi2
3522:DRIVER/FatFs/source/ff.c **** 		if (fs->csize == 0 || (fs->csize & (fs->csize - 1))) return FR_NO_FILESYSTEM;	/* (Must be power o
 2096              		.loc 1 3522 13 view .LVU687
 2097 00f0 A4F80A80 		strh	r8, [r4, #10]	@ movhi
3523:DRIVER/FatFs/source/ff.c **** 
 2098              		.loc 1 3523 3 is_stmt 1 view .LVU688
3523:DRIVER/FatFs/source/ff.c **** 
 2099              		.loc 1 3523 6 is_stmt 0 view .LVU689
 2100 00f4 B8F1000F 		cmp	r8, #0
 2101 00f8 00F0E680 		beq	.L167
3523:DRIVER/FatFs/source/ff.c **** 
 2102              		.loc 1 3523 49 discriminator 2 view .LVU690
 2103 00fc 08F1FF33 		add	r3, r8, #-1
 2104              	.LVL254:
3523:DRIVER/FatFs/source/ff.c **** 
 2105              		.loc 1 3523 22 discriminator 2 view .LVU691
 2106 0100 18EA030F 		tst	r8, r3
 2107 0104 40F0E280 		bne	.L168
3525:DRIVER/FatFs/source/ff.c **** 		if (fs->n_rootdir % (SS(fs) / SZDIRE)) return FR_NO_FILESYSTEM;	/* (Must be sector aligned) */
 2108              		.loc 1 3525 3 is_stmt 1 view .LVU692
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 108


3525:DRIVER/FatFs/source/ff.c **** 		if (fs->n_rootdir % (SS(fs) / SZDIRE)) return FR_NO_FILESYSTEM;	/* (Must be sector aligned) */
 2109              		.loc 1 3525 19 is_stmt 0 view .LVU693
 2110 0108 04F14900 		add	r0, r4, #73
 2111 010c FFF7FEFF 		bl	ld_word
 2112              	.LVL255:
 2113 0110 8146     		mov	r9, r0
3525:DRIVER/FatFs/source/ff.c **** 		if (fs->n_rootdir % (SS(fs) / SZDIRE)) return FR_NO_FILESYSTEM;	/* (Must be sector aligned) */
 2114              		.loc 1 3525 17 view .LVU694
 2115 0112 2081     		strh	r0, [r4, #8]	@ movhi
3526:DRIVER/FatFs/source/ff.c **** 
 2116              		.loc 1 3526 3 is_stmt 1 view .LVU695
3526:DRIVER/FatFs/source/ff.c **** 
 2117              		.loc 1 3526 7 is_stmt 0 view .LVU696
 2118 0114 4FEA571B 		lsr	fp, r7, #5
 2119 0118 B0FBFBF3 		udiv	r3, r0, fp
 2120 011c 0BFB1303 		mls	r3, fp, r3, r0
 2121 0120 9BB2     		uxth	r3, r3
3526:DRIVER/FatFs/source/ff.c **** 
 2122              		.loc 1 3526 6 view .LVU697
 2123 0122 002B     		cmp	r3, #0
 2124 0124 40F0D480 		bne	.L169
3528:DRIVER/FatFs/source/ff.c **** 		if (tsect == 0) tsect = ld_dword(fs->win + BPB_TotSec32);
 2125              		.loc 1 3528 3 is_stmt 1 view .LVU698
3528:DRIVER/FatFs/source/ff.c **** 		if (tsect == 0) tsect = ld_dword(fs->win + BPB_TotSec32);
 2126              		.loc 1 3528 11 is_stmt 0 view .LVU699
 2127 0128 04F14B00 		add	r0, r4, #75
 2128 012c FFF7FEFF 		bl	ld_word
 2129              	.LVL256:
3528:DRIVER/FatFs/source/ff.c **** 		if (tsect == 0) tsect = ld_dword(fs->win + BPB_TotSec32);
 2130              		.loc 1 3528 9 view .LVU700
 2131 0130 0190     		str	r0, [sp, #4]
 2132              	.LVL257:
3529:DRIVER/FatFs/source/ff.c **** 
 2133              		.loc 1 3529 3 is_stmt 1 view .LVU701
3529:DRIVER/FatFs/source/ff.c **** 
 2134              		.loc 1 3529 6 is_stmt 0 view .LVU702
 2135 0132 20B9     		cbnz	r0, .L147
3529:DRIVER/FatFs/source/ff.c **** 
 2136              		.loc 1 3529 19 is_stmt 1 discriminator 1 view .LVU703
3529:DRIVER/FatFs/source/ff.c **** 
 2137              		.loc 1 3529 27 is_stmt 0 discriminator 1 view .LVU704
 2138 0134 04F15800 		add	r0, r4, #88
 2139              	.LVL258:
3529:DRIVER/FatFs/source/ff.c **** 
 2140              		.loc 1 3529 27 discriminator 1 view .LVU705
 2141 0138 FFF7FEFF 		bl	ld_dword
 2142              	.LVL259:
 2143 013c 0190     		str	r0, [sp, #4]
 2144              	.LVL260:
 2145              	.L147:
3531:DRIVER/FatFs/source/ff.c **** 		if (nrsv == 0) return FR_NO_FILESYSTEM;			/* (Must not be 0) */
 2146              		.loc 1 3531 3 is_stmt 1 view .LVU706
3531:DRIVER/FatFs/source/ff.c **** 		if (nrsv == 0) return FR_NO_FILESYSTEM;			/* (Must not be 0) */
 2147              		.loc 1 3531 10 is_stmt 0 view .LVU707
 2148 013e 04F14600 		add	r0, r4, #70
 2149 0142 FFF7FEFF 		bl	ld_word
 2150              	.LVL261:
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 109


3532:DRIVER/FatFs/source/ff.c **** 
 2151              		.loc 1 3532 3 is_stmt 1 view .LVU708
3532:DRIVER/FatFs/source/ff.c **** 
 2152              		.loc 1 3532 6 is_stmt 0 view .LVU709
 2153 0146 0146     		mov	r1, r0
 2154 0148 0028     		cmp	r0, #0
 2155 014a 00F0C380 		beq	.L170
3535:DRIVER/FatFs/source/ff.c **** 		if (tsect < sysect) return FR_NO_FILESYSTEM;	/* (Invalid volume size) */
 2156              		.loc 1 3535 3 is_stmt 1 view .LVU710
3535:DRIVER/FatFs/source/ff.c **** 		if (tsect < sysect) return FR_NO_FILESYSTEM;	/* (Invalid volume size) */
 2157              		.loc 1 3535 17 is_stmt 0 view .LVU711
 2158 014e 009B     		ldr	r3, [sp]
 2159 0150 C318     		adds	r3, r0, r3
3535:DRIVER/FatFs/source/ff.c **** 		if (tsect < sysect) return FR_NO_FILESYSTEM;	/* (Invalid volume size) */
 2160              		.loc 1 3535 42 view .LVU712
 2161 0152 B9FBFBFB 		udiv	fp, r9, fp
3535:DRIVER/FatFs/source/ff.c **** 		if (tsect < sysect) return FR_NO_FILESYSTEM;	/* (Invalid volume size) */
 2162              		.loc 1 3535 10 view .LVU713
 2163 0156 5B44     		add	r3, r3, fp
 2164              	.LVL262:
3536:DRIVER/FatFs/source/ff.c **** 		nclst = (tsect - sysect) / fs->csize;			/* Number of clusters */
 2165              		.loc 1 3536 3 is_stmt 1 view .LVU714
3536:DRIVER/FatFs/source/ff.c **** 		nclst = (tsect - sysect) / fs->csize;			/* Number of clusters */
 2166              		.loc 1 3536 6 is_stmt 0 view .LVU715
 2167 0158 019A     		ldr	r2, [sp, #4]
 2168 015a 9A42     		cmp	r2, r3
 2169 015c C0F0BC80 		bcc	.L171
3537:DRIVER/FatFs/source/ff.c **** 		if (nclst == 0) return FR_NO_FILESYSTEM;		/* (Invalid volume size) */
 2170              		.loc 1 3537 3 is_stmt 1 view .LVU716
3537:DRIVER/FatFs/source/ff.c **** 		if (nclst == 0) return FR_NO_FILESYSTEM;		/* (Invalid volume size) */
 2171              		.loc 1 3537 18 is_stmt 0 view .LVU717
 2172 0160 D21A     		subs	r2, r2, r3
3537:DRIVER/FatFs/source/ff.c **** 		if (nclst == 0) return FR_NO_FILESYSTEM;		/* (Invalid volume size) */
 2173              		.loc 1 3537 9 view .LVU718
 2174 0162 B2FBF8F0 		udiv	r0, r2, r8
 2175              	.LVL263:
3538:DRIVER/FatFs/source/ff.c **** 		fmt = 0;
 2176              		.loc 1 3538 3 is_stmt 1 view .LVU719
3538:DRIVER/FatFs/source/ff.c **** 		fmt = 0;
 2177              		.loc 1 3538 6 is_stmt 0 view .LVU720
 2178 0166 4245     		cmp	r2, r8
 2179 0168 C0F0B880 		bcc	.L172
3539:DRIVER/FatFs/source/ff.c **** 		if (nclst <= MAX_FAT32) fmt = FS_FAT32;
 2180              		.loc 1 3539 3 is_stmt 1 view .LVU721
 2181              	.LVL264:
3540:DRIVER/FatFs/source/ff.c **** 		if (nclst <= MAX_FAT16) fmt = FS_FAT16;
 2182              		.loc 1 3540 3 view .LVU722
3540:DRIVER/FatFs/source/ff.c **** 		if (nclst <= MAX_FAT16) fmt = FS_FAT16;
 2183              		.loc 1 3540 6 is_stmt 0 view .LVU723
 2184 016c 624A     		ldr	r2, .L187+4
 2185 016e 9042     		cmp	r0, r2
 2186 0170 06D8     		bhi	.L173
3540:DRIVER/FatFs/source/ff.c **** 		if (nclst <= MAX_FAT16) fmt = FS_FAT16;
 2187              		.loc 1 3540 27 is_stmt 1 view .LVU724
 2188              	.LVL265:
3541:DRIVER/FatFs/source/ff.c **** 		if (nclst <= MAX_FAT12) fmt = FS_FAT12;
 2189              		.loc 1 3541 3 view .LVU725
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 110


3541:DRIVER/FatFs/source/ff.c **** 		if (nclst <= MAX_FAT12) fmt = FS_FAT12;
 2190              		.loc 1 3541 6 is_stmt 0 view .LVU726
 2191 0172 4FF6F572 		movw	r2, #65525
 2192 0176 9042     		cmp	r0, r2
 2193 0178 45D8     		bhi	.L174
3541:DRIVER/FatFs/source/ff.c **** 		if (nclst <= MAX_FAT12) fmt = FS_FAT12;
 2194              		.loc 1 3541 31 view .LVU727
 2195 017a 4FF00208 		mov	r8, #2
 2196 017e 01E0     		b	.L148
 2197              	.LVL266:
 2198              	.L173:
3539:DRIVER/FatFs/source/ff.c **** 		if (nclst <= MAX_FAT32) fmt = FS_FAT32;
 2199              		.loc 1 3539 7 view .LVU728
 2200 0180 4FF00008 		mov	r8, #0
 2201              	.LVL267:
 2202              	.L148:
3542:DRIVER/FatFs/source/ff.c **** 		if (fmt == 0) return FR_NO_FILESYSTEM;
 2203              		.loc 1 3542 3 is_stmt 1 view .LVU729
3542:DRIVER/FatFs/source/ff.c **** 		if (fmt == 0) return FR_NO_FILESYSTEM;
 2204              		.loc 1 3542 6 is_stmt 0 view .LVU730
 2205 0184 40F6F572 		movw	r2, #4085
 2206 0188 9042     		cmp	r0, r2
 2207 018a 3FD9     		bls	.L175
 2208              	.LVL268:
 2209              	.L149:
3543:DRIVER/FatFs/source/ff.c **** 
 2210              		.loc 1 3543 3 is_stmt 1 view .LVU731
3543:DRIVER/FatFs/source/ff.c **** 
 2211              		.loc 1 3543 6 is_stmt 0 view .LVU732
 2212 018c B8F1000F 		cmp	r8, #0
 2213 0190 00F0A680 		beq	.L183
 2214              	.LVL269:
 2215              	.L150:
3546:DRIVER/FatFs/source/ff.c **** 		fs->volbase = bsect;							/* Volume start sector */
 2216              		.loc 1 3546 3 is_stmt 1 view .LVU733
3546:DRIVER/FatFs/source/ff.c **** 		fs->volbase = bsect;							/* Volume start sector */
 2217              		.loc 1 3546 24 is_stmt 0 view .LVU734
 2218 0194 00F1020B 		add	fp, r0, #2
3546:DRIVER/FatFs/source/ff.c **** 		fs->volbase = bsect;							/* Volume start sector */
 2219              		.loc 1 3546 16 view .LVU735
 2220 0198 C4F81CB0 		str	fp, [r4, #28]
3547:DRIVER/FatFs/source/ff.c **** 		fs->fatbase = bsect + nrsv; 					/* FAT start sector */
 2221              		.loc 1 3547 3 is_stmt 1 view .LVU736
3547:DRIVER/FatFs/source/ff.c **** 		fs->fatbase = bsect + nrsv; 					/* FAT start sector */
 2222              		.loc 1 3547 15 is_stmt 0 view .LVU737
 2223 019c C4F824A0 		str	r10, [r4, #36]
3548:DRIVER/FatFs/source/ff.c **** 		fs->database = bsect + sysect;					/* Data start sector */
 2224              		.loc 1 3548 3 is_stmt 1 view .LVU738
3548:DRIVER/FatFs/source/ff.c **** 		fs->database = bsect + sysect;					/* Data start sector */
 2225              		.loc 1 3548 23 is_stmt 0 view .LVU739
 2226 01a0 01EB0A02 		add	r2, r1, r10
3548:DRIVER/FatFs/source/ff.c **** 		fs->database = bsect + sysect;					/* Data start sector */
 2227              		.loc 1 3548 15 view .LVU740
 2228 01a4 A262     		str	r2, [r4, #40]
3549:DRIVER/FatFs/source/ff.c **** 		if (fmt == FS_FAT32) {
 2229              		.loc 1 3549 3 is_stmt 1 view .LVU741
3549:DRIVER/FatFs/source/ff.c **** 		if (fmt == FS_FAT32) {
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 111


 2230              		.loc 1 3549 24 is_stmt 0 view .LVU742
 2231 01a6 5344     		add	r3, r3, r10
 2232              	.LVL270:
3549:DRIVER/FatFs/source/ff.c **** 		if (fmt == FS_FAT32) {
 2233              		.loc 1 3549 16 view .LVU743
 2234 01a8 2363     		str	r3, [r4, #48]
3550:DRIVER/FatFs/source/ff.c **** 			if (ld_word(fs->win + BPB_FSVer32) != 0) return FR_NO_FILESYSTEM;	/* (Must be FAT32 revision 0.0
 2235              		.loc 1 3550 3 is_stmt 1 view .LVU744
3550:DRIVER/FatFs/source/ff.c **** 			if (ld_word(fs->win + BPB_FSVer32) != 0) return FR_NO_FILESYSTEM;	/* (Must be FAT32 revision 0.0
 2236              		.loc 1 3550 6 is_stmt 0 view .LVU745
 2237 01aa B8F1030F 		cmp	r8, #3
 2238 01ae 30D0     		beq	.L184
3556:DRIVER/FatFs/source/ff.c **** 			fs->dirbase = fs->fatbase + fasize;			/* Root directory start sector */
 2239              		.loc 1 3556 4 is_stmt 1 view .LVU746
3556:DRIVER/FatFs/source/ff.c **** 			fs->dirbase = fs->fatbase + fasize;			/* Root directory start sector */
 2240              		.loc 1 3556 7 is_stmt 0 view .LVU747
 2241 01b0 B9F1000F 		cmp	r9, #0
 2242 01b4 00F09A80 		beq	.L179
3557:DRIVER/FatFs/source/ff.c **** 			szbfat = (fmt == FS_FAT16) ?				/* (Needed FAT size) */
 2243              		.loc 1 3557 4 is_stmt 1 view .LVU748
3557:DRIVER/FatFs/source/ff.c **** 			szbfat = (fmt == FS_FAT16) ?				/* (Needed FAT size) */
 2244              		.loc 1 3557 30 is_stmt 0 view .LVU749
 2245 01b8 009B     		ldr	r3, [sp]
 2246 01ba 1A44     		add	r2, r2, r3
3557:DRIVER/FatFs/source/ff.c **** 			szbfat = (fmt == FS_FAT16) ?				/* (Needed FAT size) */
 2247              		.loc 1 3557 16 view .LVU750
 2248 01bc E262     		str	r2, [r4, #44]
3558:DRIVER/FatFs/source/ff.c **** 				fs->n_fatent * 2 : fs->n_fatent * 3 / 2 + (fs->n_fatent & 1);
 2249              		.loc 1 3558 4 is_stmt 1 view .LVU751
3559:DRIVER/FatFs/source/ff.c **** 		}
 2250              		.loc 1 3559 22 is_stmt 0 view .LVU752
 2251 01be B8F1020F 		cmp	r8, #2
 2252 01c2 37D0     		beq	.L185
3559:DRIVER/FatFs/source/ff.c **** 		}
 2253              		.loc 1 3559 37 discriminator 2 view .LVU753
 2254 01c4 0BEB4B02 		add	r2, fp, fp, lsl #1
3559:DRIVER/FatFs/source/ff.c **** 		}
 2255              		.loc 1 3559 61 discriminator 2 view .LVU754
 2256 01c8 0BF00103 		and	r3, fp, #1
3559:DRIVER/FatFs/source/ff.c **** 		}
 2257              		.loc 1 3559 22 discriminator 2 view .LVU755
 2258 01cc 03EB5203 		add	r3, r3, r2, lsr #1
 2259              	.LVL271:
 2260              	.L152:
3561:DRIVER/FatFs/source/ff.c **** 
 2261              		.loc 1 3561 3 is_stmt 1 view .LVU756
3561:DRIVER/FatFs/source/ff.c **** 
 2262              		.loc 1 3561 27 is_stmt 0 view .LVU757
 2263 01d0 3B44     		add	r3, r3, r7
 2264              	.LVL272:
3561:DRIVER/FatFs/source/ff.c **** 
 2265              		.loc 1 3561 27 view .LVU758
 2266 01d2 013B     		subs	r3, r3, #1
3561:DRIVER/FatFs/source/ff.c **** 
 2267              		.loc 1 3561 43 view .LVU759
 2268 01d4 B3FBF7F3 		udiv	r3, r3, r7
3561:DRIVER/FatFs/source/ff.c **** 
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 112


 2269              		.loc 1 3561 6 view .LVU760
 2270 01d8 B342     		cmp	r3, r6
 2271 01da 00F28980 		bhi	.L180
3565:DRIVER/FatFs/source/ff.c **** 		fs->fsi_flag = 0x80;
 2272              		.loc 1 3565 3 is_stmt 1 view .LVU761
3565:DRIVER/FatFs/source/ff.c **** 		fs->fsi_flag = 0x80;
 2273              		.loc 1 3565 33 is_stmt 0 view .LVU762
 2274 01de 4FF0FF33 		mov	r3, #-1
 2275 01e2 A361     		str	r3, [r4, #24]
3565:DRIVER/FatFs/source/ff.c **** 		fs->fsi_flag = 0x80;
 2276              		.loc 1 3565 17 view .LVU763
 2277 01e4 6361     		str	r3, [r4, #20]
3566:DRIVER/FatFs/source/ff.c **** #if (FF_FS_NOFSINFO & 3) != 3
 2278              		.loc 1 3566 3 is_stmt 1 view .LVU764
3566:DRIVER/FatFs/source/ff.c **** #if (FF_FS_NOFSINFO & 3) != 3
 2279              		.loc 1 3566 16 is_stmt 0 view .LVU765
 2280 01e6 8023     		movs	r3, #128
 2281 01e8 6371     		strb	r3, [r4, #5]
3568:DRIVER/FatFs/source/ff.c **** 			&& ld_word(fs->win + BPB_FSInfo32) == 1
 2282              		.loc 1 3568 3 is_stmt 1 view .LVU766
3568:DRIVER/FatFs/source/ff.c **** 			&& ld_word(fs->win + BPB_FSInfo32) == 1
 2283              		.loc 1 3568 6 is_stmt 0 view .LVU767
 2284 01ea B8F1030F 		cmp	r8, #3
 2285 01ee 24D0     		beq	.L186
 2286              	.L154:
3589:DRIVER/FatFs/source/ff.c **** 	fs->id = ++Fsid;		/* Volume mount ID */
 2287              		.loc 1 3589 2 is_stmt 1 view .LVU768
3589:DRIVER/FatFs/source/ff.c **** 	fs->id = ++Fsid;		/* Volume mount ID */
 2288              		.loc 1 3589 14 is_stmt 0 view .LVU769
 2289 01f0 84F80080 		strb	r8, [r4]
3590:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN == 1
 2290              		.loc 1 3590 2 is_stmt 1 view .LVU770
3590:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN == 1
 2291              		.loc 1 3590 11 is_stmt 0 view .LVU771
 2292 01f4 414A     		ldr	r2, .L187+8
 2293 01f6 1388     		ldrh	r3, [r2]
 2294 01f8 0133     		adds	r3, r3, #1
 2295 01fa 9BB2     		uxth	r3, r3
3590:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN == 1
 2296              		.loc 1 3590 9 view .LVU772
 2297 01fc 1380     		strh	r3, [r2]	@ movhi
 2298 01fe E380     		strh	r3, [r4, #6]	@ movhi
3592:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
 2299              		.loc 1 3592 2 is_stmt 1 view .LVU773
3592:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
 2300              		.loc 1 3592 13 is_stmt 0 view .LVU774
 2301 0200 3F4B     		ldr	r3, .L187+12
 2302 0202 2361     		str	r3, [r4, #16]
3603:DRIVER/FatFs/source/ff.c **** }
 2303              		.loc 1 3603 2 is_stmt 1 view .LVU775
3603:DRIVER/FatFs/source/ff.c **** }
 2304              		.loc 1 3603 9 is_stmt 0 view .LVU776
 2305 0204 4AE0     		b	.L143
 2306              	.LVL273:
 2307              	.L174:
3540:DRIVER/FatFs/source/ff.c **** 		if (nclst <= MAX_FAT16) fmt = FS_FAT16;
 2308              		.loc 1 3540 31 view .LVU777
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 113


 2309 0206 4FF00308 		mov	r8, #3
 2310 020a BFE7     		b	.L149
 2311              	.LVL274:
 2312              	.L175:
3542:DRIVER/FatFs/source/ff.c **** 		if (fmt == 0) return FR_NO_FILESYSTEM;
 2313              		.loc 1 3542 31 view .LVU778
 2314 020c 4FF00108 		mov	r8, #1
 2315              	.LVL275:
3542:DRIVER/FatFs/source/ff.c **** 		if (fmt == 0) return FR_NO_FILESYSTEM;
 2316              		.loc 1 3542 31 view .LVU779
 2317 0210 C0E7     		b	.L150
 2318              	.LVL276:
 2319              	.L184:
3551:DRIVER/FatFs/source/ff.c **** 			if (fs->n_rootdir != 0) return FR_NO_FILESYSTEM;	/* (BPB_RootEntCnt must be 0) */
 2320              		.loc 1 3551 4 is_stmt 1 view .LVU780
3551:DRIVER/FatFs/source/ff.c **** 			if (fs->n_rootdir != 0) return FR_NO_FILESYSTEM;	/* (BPB_RootEntCnt must be 0) */
 2321              		.loc 1 3551 8 is_stmt 0 view .LVU781
 2322 0212 04F16200 		add	r0, r4, #98
 2323              	.LVL277:
3551:DRIVER/FatFs/source/ff.c **** 			if (fs->n_rootdir != 0) return FR_NO_FILESYSTEM;	/* (BPB_RootEntCnt must be 0) */
 2324              		.loc 1 3551 8 view .LVU782
 2325 0216 FFF7FEFF 		bl	ld_word
 2326              	.LVL278:
3551:DRIVER/FatFs/source/ff.c **** 			if (fs->n_rootdir != 0) return FR_NO_FILESYSTEM;	/* (BPB_RootEntCnt must be 0) */
 2327              		.loc 1 3551 7 view .LVU783
 2328 021a 0028     		cmp	r0, #0
 2329 021c 62D1     		bne	.L177
3552:DRIVER/FatFs/source/ff.c **** 			fs->dirbase = ld_dword(fs->win + BPB_RootClus32);	/* Root directory start cluster */
 2330              		.loc 1 3552 4 is_stmt 1 view .LVU784
3552:DRIVER/FatFs/source/ff.c **** 			fs->dirbase = ld_dword(fs->win + BPB_RootClus32);	/* Root directory start cluster */
 2331              		.loc 1 3552 7 is_stmt 0 view .LVU785
 2332 021e B9F1000F 		cmp	r9, #0
 2333 0222 61D1     		bne	.L178
3553:DRIVER/FatFs/source/ff.c **** 			szbfat = fs->n_fatent * 4;					/* (Needed FAT size) */
 2334              		.loc 1 3553 4 is_stmt 1 view .LVU786
3553:DRIVER/FatFs/source/ff.c **** 			szbfat = fs->n_fatent * 4;					/* (Needed FAT size) */
 2335              		.loc 1 3553 18 is_stmt 0 view .LVU787
 2336 0224 04F16400 		add	r0, r4, #100
 2337 0228 FFF7FEFF 		bl	ld_dword
 2338              	.LVL279:
3553:DRIVER/FatFs/source/ff.c **** 			szbfat = fs->n_fatent * 4;					/* (Needed FAT size) */
 2339              		.loc 1 3553 16 view .LVU788
 2340 022c E062     		str	r0, [r4, #44]
3554:DRIVER/FatFs/source/ff.c **** 		} else {
 2341              		.loc 1 3554 4 is_stmt 1 view .LVU789
3554:DRIVER/FatFs/source/ff.c **** 		} else {
 2342              		.loc 1 3554 11 is_stmt 0 view .LVU790
 2343 022e 4FEA8B03 		lsl	r3, fp, #2
 2344              	.LVL280:
3554:DRIVER/FatFs/source/ff.c **** 		} else {
 2345              		.loc 1 3554 11 view .LVU791
 2346 0232 CDE7     		b	.L152
 2347              	.LVL281:
 2348              	.L185:
3559:DRIVER/FatFs/source/ff.c **** 		}
 2349              		.loc 1 3559 22 discriminator 1 view .LVU792
 2350 0234 4FEA4B03 		lsl	r3, fp, #1
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 114


 2351 0238 CAE7     		b	.L152
 2352              	.LVL282:
 2353              	.L186:
3569:DRIVER/FatFs/source/ff.c **** 			&& move_window(fs, bsect + 1) == FR_OK)
 2354              		.loc 1 3569 7 view .LVU793
 2355 023a 04F16800 		add	r0, r4, #104
 2356 023e FFF7FEFF 		bl	ld_word
 2357              	.LVL283:
3569:DRIVER/FatFs/source/ff.c **** 			&& move_window(fs, bsect + 1) == FR_OK)
 2358              		.loc 1 3569 4 view .LVU794
 2359 0242 0128     		cmp	r0, #1
 2360 0244 D4D1     		bne	.L154
3570:DRIVER/FatFs/source/ff.c **** 		{
 2361              		.loc 1 3570 7 view .LVU795
 2362 0246 0AF10101 		add	r1, r10, #1
 2363 024a 2046     		mov	r0, r4
 2364 024c FFF7FEFF 		bl	move_window
 2365              	.LVL284:
3570:DRIVER/FatFs/source/ff.c **** 		{
 2366              		.loc 1 3570 4 view .LVU796
 2367 0250 0028     		cmp	r0, #0
 2368 0252 CDD1     		bne	.L154
3572:DRIVER/FatFs/source/ff.c **** 			if (ld_word(fs->win + BS_55AA) == 0xAA55	/* Load FSInfo data if available */
 2369              		.loc 1 3572 4 is_stmt 1 view .LVU797
3572:DRIVER/FatFs/source/ff.c **** 			if (ld_word(fs->win + BS_55AA) == 0xAA55	/* Load FSInfo data if available */
 2370              		.loc 1 3572 17 is_stmt 0 view .LVU798
 2371 0254 0023     		movs	r3, #0
 2372 0256 6371     		strb	r3, [r4, #5]
3573:DRIVER/FatFs/source/ff.c **** 				&& ld_dword(fs->win + FSI_LeadSig) == 0x41615252
 2373              		.loc 1 3573 4 is_stmt 1 view .LVU799
3573:DRIVER/FatFs/source/ff.c **** 				&& ld_dword(fs->win + FSI_LeadSig) == 0x41615252
 2374              		.loc 1 3573 8 is_stmt 0 view .LVU800
 2375 0258 04F23620 		addw	r0, r4, #566
 2376 025c FFF7FEFF 		bl	ld_word
 2377              	.LVL285:
3573:DRIVER/FatFs/source/ff.c **** 				&& ld_dword(fs->win + FSI_LeadSig) == 0x41615252
 2378              		.loc 1 3573 7 view .LVU801
 2379 0260 4AF65523 		movw	r3, #43605
 2380 0264 9842     		cmp	r0, r3
 2381 0266 C3D1     		bne	.L154
3574:DRIVER/FatFs/source/ff.c **** 				&& ld_dword(fs->win + FSI_StrucSig) == 0x61417272)
 2382              		.loc 1 3574 8 view .LVU802
 2383 0268 04F13800 		add	r0, r4, #56
 2384 026c FFF7FEFF 		bl	ld_dword
 2385              	.LVL286:
3574:DRIVER/FatFs/source/ff.c **** 				&& ld_dword(fs->win + FSI_StrucSig) == 0x61417272)
 2386              		.loc 1 3574 5 view .LVU803
 2387 0270 244B     		ldr	r3, .L187+16
 2388 0272 9842     		cmp	r0, r3
 2389 0274 BCD1     		bne	.L154
3575:DRIVER/FatFs/source/ff.c **** 			{
 2390              		.loc 1 3575 8 view .LVU804
 2391 0276 04F50770 		add	r0, r4, #540
 2392 027a FFF7FEFF 		bl	ld_dword
 2393              	.LVL287:
3575:DRIVER/FatFs/source/ff.c **** 			{
 2394              		.loc 1 3575 5 view .LVU805
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 115


 2395 027e 224B     		ldr	r3, .L187+20
 2396 0280 9842     		cmp	r0, r3
 2397 0282 B5D1     		bne	.L154
3578:DRIVER/FatFs/source/ff.c **** #endif
 2398              		.loc 1 3578 5 is_stmt 1 view .LVU806
3578:DRIVER/FatFs/source/ff.c **** #endif
 2399              		.loc 1 3578 21 is_stmt 0 view .LVU807
 2400 0284 04F50870 		add	r0, r4, #544
 2401 0288 FFF7FEFF 		bl	ld_dword
 2402              	.LVL288:
3578:DRIVER/FatFs/source/ff.c **** #endif
 2403              		.loc 1 3578 19 view .LVU808
 2404 028c A061     		str	r0, [r4, #24]
3581:DRIVER/FatFs/source/ff.c **** #endif
 2405              		.loc 1 3581 5 is_stmt 1 view .LVU809
3581:DRIVER/FatFs/source/ff.c **** #endif
 2406              		.loc 1 3581 21 is_stmt 0 view .LVU810
 2407 028e 04F50970 		add	r0, r4, #548
 2408 0292 FFF7FEFF 		bl	ld_dword
 2409              	.LVL289:
3581:DRIVER/FatFs/source/ff.c **** #endif
 2410              		.loc 1 3581 19 view .LVU811
 2411 0296 6061     		str	r0, [r4, #20]
 2412 0298 AAE7     		b	.L154
 2413              	.LVL290:
 2414              	.L155:
3403:DRIVER/FatFs/source/ff.c **** 
 2415              		.loc 1 3403 22 view .LVU812
 2416 029a 0B25     		movs	r5, #11
 2417              	.LVL291:
 2418              	.L143:
3604:DRIVER/FatFs/source/ff.c **** 
 2419              		.loc 1 3604 1 view .LVU813
 2420 029c 2846     		mov	r0, r5
 2421 029e 03B0     		add	sp, sp, #12
 2422              	.LCFI14:
 2423              		.cfi_remember_state
 2424              		.cfi_def_cfa_offset 36
 2425              		@ sp needed
 2426 02a0 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 2427              	.LVL292:
 2428              	.L156:
 2429              	.LCFI15:
 2430              		.cfi_restore_state
3407:DRIVER/FatFs/source/ff.c **** #if FF_FS_REENTRANT
 2431              		.loc 1 3407 18 view .LVU814
 2432 02a4 0C25     		movs	r5, #12
 2433              	.LVL293:
3407:DRIVER/FatFs/source/ff.c **** #if FF_FS_REENTRANT
 2434              		.loc 1 3407 18 view .LVU815
 2435 02a6 F9E7     		b	.L143
 2436              	.LVL294:
 2437              	.L158:
3430:DRIVER/FatFs/source/ff.c **** 	}
 2438              		.loc 1 3430 10 view .LVU816
 2439 02a8 0325     		movs	r5, #3
 2440 02aa F7E7     		b	.L143
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 116


 2441              	.L159:
3433:DRIVER/FatFs/source/ff.c **** 	}
 2442              		.loc 1 3433 10 view .LVU817
 2443 02ac 0A25     		movs	r5, #10
 2444 02ae F5E7     		b	.L143
 2445              	.LVL295:
 2446              	.L160:
3436:DRIVER/FatFs/source/ff.c **** 	if (SS(fs) > FF_MAX_SS || SS(fs) < FF_MIN_SS || (SS(fs) & (SS(fs) - 1))) return FR_DISK_ERR;
 2447              		.loc 1 3436 71 view .LVU818
 2448 02b0 0125     		movs	r5, #1
 2449 02b2 F3E7     		b	.L143
 2450              	.L161:
3437:DRIVER/FatFs/source/ff.c **** #endif
 2451              		.loc 1 3437 82 view .LVU819
 2452 02b4 0125     		movs	r5, #1
 2453 02b6 F1E7     		b	.L143
 2454              	.LVL296:
 2455              	.L163:
3442:DRIVER/FatFs/source/ff.c **** 	if (fmt >= 2) return FR_NO_FILESYSTEM;	/* No FAT volume is found */
 2456              		.loc 1 3442 23 view .LVU820
 2457 02b8 0125     		movs	r5, #1
 2458 02ba EFE7     		b	.L143
 2459              	.L164:
3443:DRIVER/FatFs/source/ff.c **** 	bsect = fs->winsect;					/* Volume offset in the hosting physical drive */
 2460              		.loc 1 3443 23 view .LVU821
 2461 02bc 0D25     		movs	r5, #13
 2462 02be EDE7     		b	.L143
 2463              	.LVL297:
 2464              	.L165:
3512:DRIVER/FatFs/source/ff.c **** 
 2465              		.loc 1 3512 59 view .LVU822
 2466 02c0 0D25     		movs	r5, #13
 2467 02c2 EBE7     		b	.L143
 2468              	.LVL298:
 2469              	.L166:
3519:DRIVER/FatFs/source/ff.c **** 		fasize *= fs->n_fats;							/* Number of sectors for FAT area */
 2470              		.loc 1 3519 50 view .LVU823
 2471 02c4 0D25     		movs	r5, #13
 2472 02c6 E9E7     		b	.L143
 2473              	.LVL299:
 2474              	.L167:
3523:DRIVER/FatFs/source/ff.c **** 
 2475              		.loc 1 3523 63 view .LVU824
 2476 02c8 0D25     		movs	r5, #13
 2477 02ca E7E7     		b	.L143
 2478              	.LVL300:
 2479              	.L168:
3523:DRIVER/FatFs/source/ff.c **** 
 2480              		.loc 1 3523 63 view .LVU825
 2481 02cc 0D25     		movs	r5, #13
 2482 02ce E5E7     		b	.L143
 2483              	.L169:
3526:DRIVER/FatFs/source/ff.c **** 
 2484              		.loc 1 3526 49 view .LVU826
 2485 02d0 0D25     		movs	r5, #13
 2486 02d2 E3E7     		b	.L143
 2487              	.LVL301:
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 117


 2488              	.L170:
3532:DRIVER/FatFs/source/ff.c **** 
 2489              		.loc 1 3532 25 view .LVU827
 2490 02d4 0D25     		movs	r5, #13
 2491 02d6 E1E7     		b	.L143
 2492              	.LVL302:
 2493              	.L171:
3536:DRIVER/FatFs/source/ff.c **** 		nclst = (tsect - sysect) / fs->csize;			/* Number of clusters */
 2494              		.loc 1 3536 30 view .LVU828
 2495 02d8 0D25     		movs	r5, #13
 2496 02da DFE7     		b	.L143
 2497              	.LVL303:
 2498              	.L172:
3538:DRIVER/FatFs/source/ff.c **** 		fmt = 0;
 2499              		.loc 1 3538 26 view .LVU829
 2500 02dc 0D25     		movs	r5, #13
 2501 02de DDE7     		b	.L143
 2502              	.LVL304:
 2503              	.L183:
3543:DRIVER/FatFs/source/ff.c **** 
 2504              		.loc 1 3543 24 view .LVU830
 2505 02e0 0D25     		movs	r5, #13
 2506 02e2 DBE7     		b	.L143
 2507              	.LVL305:
 2508              	.L177:
3551:DRIVER/FatFs/source/ff.c **** 			if (fs->n_rootdir != 0) return FR_NO_FILESYSTEM;	/* (BPB_RootEntCnt must be 0) */
 2509              		.loc 1 3551 52 view .LVU831
 2510 02e4 0D25     		movs	r5, #13
 2511 02e6 D9E7     		b	.L143
 2512              	.L178:
3552:DRIVER/FatFs/source/ff.c **** 			fs->dirbase = ld_dword(fs->win + BPB_RootClus32);	/* Root directory start cluster */
 2513              		.loc 1 3552 35 view .LVU832
 2514 02e8 0D25     		movs	r5, #13
 2515 02ea D7E7     		b	.L143
 2516              	.LVL306:
 2517              	.L179:
3556:DRIVER/FatFs/source/ff.c **** 			fs->dirbase = fs->fatbase + fasize;			/* Root directory start sector */
 2518              		.loc 1 3556 35 view .LVU833
 2519 02ec 0D25     		movs	r5, #13
 2520 02ee D5E7     		b	.L143
 2521              	.LVL307:
 2522              	.L180:
3561:DRIVER/FatFs/source/ff.c **** 
 2523              		.loc 1 3561 60 view .LVU834
 2524 02f0 0D25     		movs	r5, #13
 2525 02f2 D3E7     		b	.L143
 2526              	.L188:
 2527              		.align	2
 2528              	.L187:
 2529 02f4 00000000 		.word	FatFs
 2530 02f8 F5FFFF0F 		.word	268435445
 2531 02fc 00000000 		.word	Fsid
 2532 0300 00000000 		.word	LfnBuf
 2533 0304 52526141 		.word	1096897106
 2534 0308 72724161 		.word	1631679090
 2535              		.cfi_endproc
 2536              	.LFE37:
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 118


 2538              		.section	.text.put_fat,"ax",%progbits
 2539              		.align	1
 2540              		.syntax unified
 2541              		.thumb
 2542              		.thumb_func
 2544              	put_fat:
 2545              	.LVL308:
 2546              	.LFB13:
1244:DRIVER/FatFs/source/ff.c **** 	UINT bc;
 2547              		.loc 1 1244 1 is_stmt 1 view -0
 2548              		.cfi_startproc
 2549              		@ args = 0, pretend = 0, frame = 0
 2550              		@ frame_needed = 0, uses_anonymous_args = 0
1244:DRIVER/FatFs/source/ff.c **** 	UINT bc;
 2551              		.loc 1 1244 1 is_stmt 0 view .LVU836
 2552 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 2553              	.LCFI16:
 2554              		.cfi_def_cfa_offset 32
 2555              		.cfi_offset 4, -32
 2556              		.cfi_offset 5, -28
 2557              		.cfi_offset 6, -24
 2558              		.cfi_offset 7, -20
 2559              		.cfi_offset 8, -16
 2560              		.cfi_offset 9, -12
 2561              		.cfi_offset 10, -8
 2562              		.cfi_offset 14, -4
1245:DRIVER/FatFs/source/ff.c **** 	BYTE *p;
 2563              		.loc 1 1245 2 is_stmt 1 view .LVU837
1246:DRIVER/FatFs/source/ff.c **** 	FRESULT res = FR_INT_ERR;
 2564              		.loc 1 1246 2 view .LVU838
1247:DRIVER/FatFs/source/ff.c **** 
 2565              		.loc 1 1247 2 view .LVU839
 2566              	.LVL309:
1250:DRIVER/FatFs/source/ff.c **** 		switch (fs->fs_type) {
 2567              		.loc 1 1250 2 view .LVU840
1250:DRIVER/FatFs/source/ff.c **** 		switch (fs->fs_type) {
 2568              		.loc 1 1250 5 is_stmt 0 view .LVU841
 2569 0004 0129     		cmp	r1, #1
 2570 0006 40F29580 		bls	.L197
 2571 000a 0446     		mov	r4, r0
 2572 000c 0D46     		mov	r5, r1
 2573 000e 1746     		mov	r7, r2
1250:DRIVER/FatFs/source/ff.c **** 		switch (fs->fs_type) {
 2574              		.loc 1 1250 28 discriminator 1 view .LVU842
 2575 0010 C369     		ldr	r3, [r0, #28]
1250:DRIVER/FatFs/source/ff.c **** 		switch (fs->fs_type) {
 2576              		.loc 1 1250 16 discriminator 1 view .LVU843
 2577 0012 8B42     		cmp	r3, r1
 2578 0014 40F29080 		bls	.L198
1251:DRIVER/FatFs/source/ff.c **** 		case FS_FAT12:
 2579              		.loc 1 1251 3 is_stmt 1 view .LVU844
1251:DRIVER/FatFs/source/ff.c **** 		case FS_FAT12:
 2580              		.loc 1 1251 13 is_stmt 0 view .LVU845
 2581 0018 0378     		ldrb	r3, [r0]	@ zero_extendqisi2
1251:DRIVER/FatFs/source/ff.c **** 		case FS_FAT12:
 2582              		.loc 1 1251 3 view .LVU846
 2583 001a 022B     		cmp	r3, #2
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 119


 2584 001c 4ED0     		beq	.L191
 2585 001e 032B     		cmp	r3, #3
 2586 0020 66D0     		beq	.L192
 2587 0022 012B     		cmp	r3, #1
 2588 0024 03D0     		beq	.L201
 2589 0026 0226     		movs	r6, #2
 2590              	.LVL310:
 2591              	.L190:
1287:DRIVER/FatFs/source/ff.c **** }
 2592              		.loc 1 1287 2 is_stmt 1 view .LVU847
1288:DRIVER/FatFs/source/ff.c **** 
 2593              		.loc 1 1288 1 is_stmt 0 view .LVU848
 2594 0028 3046     		mov	r0, r6
 2595 002a BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 2596              	.LVL311:
 2597              	.L201:
1253:DRIVER/FatFs/source/ff.c **** 			res = move_window(fs, fs->fatbase + (bc / SS(fs)));
 2598              		.loc 1 1253 4 is_stmt 1 view .LVU849
1253:DRIVER/FatFs/source/ff.c **** 			res = move_window(fs, fs->fatbase + (bc / SS(fs)));
 2599              		.loc 1 1253 21 view .LVU850
1253:DRIVER/FatFs/source/ff.c **** 			res = move_window(fs, fs->fatbase + (bc / SS(fs)));
 2600              		.loc 1 1253 24 is_stmt 0 view .LVU851
 2601 002e 01EB5108 		add	r8, r1, r1, lsr #1
 2602              	.LVL312:
1254:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) break;
 2603              		.loc 1 1254 4 is_stmt 1 view .LVU852
1254:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) break;
 2604              		.loc 1 1254 28 is_stmt 0 view .LVU853
 2605 0032 816A     		ldr	r1, [r0, #40]
 2606              	.LVL313:
1254:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) break;
 2607              		.loc 1 1254 46 view .LVU854
 2608 0034 8389     		ldrh	r3, [r0, #12]
1254:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) break;
 2609              		.loc 1 1254 44 view .LVU855
 2610 0036 B8FBF3F3 		udiv	r3, r8, r3
1254:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) break;
 2611              		.loc 1 1254 10 view .LVU856
 2612 003a 1944     		add	r1, r1, r3
 2613 003c FFF7FEFF 		bl	move_window
 2614              	.LVL314:
1255:DRIVER/FatFs/source/ff.c **** 			p = fs->win + bc++ % SS(fs);
 2615              		.loc 1 1255 4 is_stmt 1 view .LVU857
1255:DRIVER/FatFs/source/ff.c **** 			p = fs->win + bc++ % SS(fs);
 2616              		.loc 1 1255 7 is_stmt 0 view .LVU858
 2617 0040 0646     		mov	r6, r0
 2618 0042 0028     		cmp	r0, #0
 2619 0044 F0D1     		bne	.L190
1256:DRIVER/FatFs/source/ff.c **** 			*p = (clst & 1) ? ((*p & 0x0F) | ((BYTE)val << 4)) : (BYTE)val;	/* Update 1st byte */
 2620              		.loc 1 1256 4 is_stmt 1 view .LVU859
1256:DRIVER/FatFs/source/ff.c **** 			*p = (clst & 1) ? ((*p & 0x0F) | ((BYTE)val << 4)) : (BYTE)val;	/* Update 1st byte */
 2621              		.loc 1 1256 8 is_stmt 0 view .LVU860
 2622 0046 04F1380A 		add	r10, r4, #56
1256:DRIVER/FatFs/source/ff.c **** 			*p = (clst & 1) ? ((*p & 0x0F) | ((BYTE)val << 4)) : (BYTE)val;	/* Update 1st byte */
 2623              		.loc 1 1256 20 view .LVU861
 2624 004a 08F10109 		add	r9, r8, #1
 2625              	.LVL315:
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 120


1256:DRIVER/FatFs/source/ff.c **** 			*p = (clst & 1) ? ((*p & 0x0F) | ((BYTE)val << 4)) : (BYTE)val;	/* Update 1st byte */
 2626              		.loc 1 1256 25 view .LVU862
 2627 004e A389     		ldrh	r3, [r4, #12]
1256:DRIVER/FatFs/source/ff.c **** 			*p = (clst & 1) ? ((*p & 0x0F) | ((BYTE)val << 4)) : (BYTE)val;	/* Update 1st byte */
 2628              		.loc 1 1256 23 view .LVU863
 2629 0050 B8FBF3F2 		udiv	r2, r8, r3
 2630 0054 03FB1288 		mls	r8, r3, r2, r8
 2631              	.LVL316:
1257:DRIVER/FatFs/source/ff.c **** 			fs->wflag = 1;
 2632              		.loc 1 1257 4 is_stmt 1 view .LVU864
1257:DRIVER/FatFs/source/ff.c **** 			fs->wflag = 1;
 2633              		.loc 1 1257 7 is_stmt 0 view .LVU865
 2634 0058 15F00105 		ands	r5, r5, #1
 2635              	.LVL317:
1257:DRIVER/FatFs/source/ff.c **** 			fs->wflag = 1;
 2636              		.loc 1 1257 7 view .LVU866
 2637 005c 24D0     		beq	.L193
1257:DRIVER/FatFs/source/ff.c **** 			fs->wflag = 1;
 2638              		.loc 1 1257 24 discriminator 1 view .LVU867
 2639 005e 1AF80830 		ldrb	r3, [r10, r8]	@ zero_extendqisi2
1257:DRIVER/FatFs/source/ff.c **** 			fs->wflag = 1;
 2640              		.loc 1 1257 48 discriminator 1 view .LVU868
 2641 0062 3A01     		lsls	r2, r7, #4
 2642 0064 02F47F62 		and	r2, r2, #4080
1257:DRIVER/FatFs/source/ff.c **** 			fs->wflag = 1;
 2643              		.loc 1 1257 7 discriminator 1 view .LVU869
 2644 0068 03F00F03 		and	r3, r3, #15
 2645 006c 1343     		orrs	r3, r3, r2
 2646 006e DBB2     		uxtb	r3, r3
 2647              	.L194:
1257:DRIVER/FatFs/source/ff.c **** 			fs->wflag = 1;
 2648              		.loc 1 1257 7 discriminator 4 view .LVU870
 2649 0070 0AF80830 		strb	r3, [r10, r8]
1258:DRIVER/FatFs/source/ff.c **** 			res = move_window(fs, fs->fatbase + (bc / SS(fs)));
 2650              		.loc 1 1258 4 is_stmt 1 discriminator 4 view .LVU871
1258:DRIVER/FatFs/source/ff.c **** 			res = move_window(fs, fs->fatbase + (bc / SS(fs)));
 2651              		.loc 1 1258 14 is_stmt 0 discriminator 4 view .LVU872
 2652 0074 0123     		movs	r3, #1
 2653 0076 2371     		strb	r3, [r4, #4]
1259:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) break;
 2654              		.loc 1 1259 4 is_stmt 1 discriminator 4 view .LVU873
1259:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) break;
 2655              		.loc 1 1259 28 is_stmt 0 discriminator 4 view .LVU874
 2656 0078 A16A     		ldr	r1, [r4, #40]
1259:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) break;
 2657              		.loc 1 1259 46 discriminator 4 view .LVU875
 2658 007a A389     		ldrh	r3, [r4, #12]
1259:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) break;
 2659              		.loc 1 1259 44 discriminator 4 view .LVU876
 2660 007c B9FBF3F3 		udiv	r3, r9, r3
1259:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) break;
 2661              		.loc 1 1259 10 discriminator 4 view .LVU877
 2662 0080 1944     		add	r1, r1, r3
 2663 0082 2046     		mov	r0, r4
 2664              	.LVL318:
1259:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) break;
 2665              		.loc 1 1259 10 discriminator 4 view .LVU878
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 121


 2666 0084 FFF7FEFF 		bl	move_window
 2667              	.LVL319:
1260:DRIVER/FatFs/source/ff.c **** 			p = fs->win + bc % SS(fs);
 2668              		.loc 1 1260 4 is_stmt 1 discriminator 4 view .LVU879
1260:DRIVER/FatFs/source/ff.c **** 			p = fs->win + bc % SS(fs);
 2669              		.loc 1 1260 7 is_stmt 0 discriminator 4 view .LVU880
 2670 0088 0646     		mov	r6, r0
 2671 008a 0028     		cmp	r0, #0
 2672 008c CCD1     		bne	.L190
1261:DRIVER/FatFs/source/ff.c **** 			*p = (clst & 1) ? (BYTE)(val >> 4) : ((*p & 0xF0) | ((BYTE)(val >> 8) & 0x0F));	/* Update 2nd by
 2673              		.loc 1 1261 4 is_stmt 1 view .LVU881
1261:DRIVER/FatFs/source/ff.c **** 			*p = (clst & 1) ? (BYTE)(val >> 4) : ((*p & 0xF0) | ((BYTE)(val >> 8) & 0x0F));	/* Update 2nd by
 2674              		.loc 1 1261 23 is_stmt 0 view .LVU882
 2675 008e A389     		ldrh	r3, [r4, #12]
1261:DRIVER/FatFs/source/ff.c **** 			*p = (clst & 1) ? (BYTE)(val >> 4) : ((*p & 0xF0) | ((BYTE)(val >> 8) & 0x0F));	/* Update 2nd by
 2676              		.loc 1 1261 21 view .LVU883
 2677 0090 B9FBF3F2 		udiv	r2, r9, r3
 2678 0094 03FB1299 		mls	r9, r3, r2, r9
 2679              	.LVL320:
1262:DRIVER/FatFs/source/ff.c **** 			fs->wflag = 1;
 2680              		.loc 1 1262 4 is_stmt 1 view .LVU884
1262:DRIVER/FatFs/source/ff.c **** 			fs->wflag = 1;
 2681              		.loc 1 1262 7 is_stmt 0 view .LVU885
 2682 0098 45B1     		cbz	r5, .L195
1262:DRIVER/FatFs/source/ff.c **** 			fs->wflag = 1;
 2683              		.loc 1 1262 7 discriminator 1 view .LVU886
 2684 009a C7F30713 		ubfx	r3, r7, #4, #8
 2685              	.L196:
1262:DRIVER/FatFs/source/ff.c **** 			fs->wflag = 1;
 2686              		.loc 1 1262 7 discriminator 4 view .LVU887
 2687 009e 0AF80930 		strb	r3, [r10, r9]
1263:DRIVER/FatFs/source/ff.c **** 			break;
 2688              		.loc 1 1263 4 is_stmt 1 discriminator 4 view .LVU888
1263:DRIVER/FatFs/source/ff.c **** 			break;
 2689              		.loc 1 1263 14 is_stmt 0 discriminator 4 view .LVU889
 2690 00a2 0123     		movs	r3, #1
 2691 00a4 2371     		strb	r3, [r4, #4]
1264:DRIVER/FatFs/source/ff.c **** 
 2692              		.loc 1 1264 4 is_stmt 1 discriminator 4 view .LVU890
 2693 00a6 BFE7     		b	.L190
 2694              	.LVL321:
 2695              	.L193:
1257:DRIVER/FatFs/source/ff.c **** 			fs->wflag = 1;
 2696              		.loc 1 1257 7 is_stmt 0 discriminator 2 view .LVU891
 2697 00a8 FBB2     		uxtb	r3, r7
 2698 00aa E1E7     		b	.L194
 2699              	.LVL322:
 2700              	.L195:
1262:DRIVER/FatFs/source/ff.c **** 			fs->wflag = 1;
 2701              		.loc 1 1262 43 discriminator 2 view .LVU892
 2702 00ac 1AF80930 		ldrb	r3, [r10, r9]	@ zero_extendqisi2
1262:DRIVER/FatFs/source/ff.c **** 			fs->wflag = 1;
 2703              		.loc 1 1262 74 discriminator 2 view .LVU893
 2704 00b0 C7F30322 		ubfx	r2, r7, #8, #4
1262:DRIVER/FatFs/source/ff.c **** 			fs->wflag = 1;
 2705              		.loc 1 1262 7 discriminator 2 view .LVU894
 2706 00b4 23F00F03 		bic	r3, r3, #15
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 122


 2707 00b8 1343     		orrs	r3, r3, r2
 2708 00ba F0E7     		b	.L196
 2709              	.LVL323:
 2710              	.L191:
1267:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) break;
 2711              		.loc 1 1267 4 is_stmt 1 view .LVU895
1267:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) break;
 2712              		.loc 1 1267 28 is_stmt 0 view .LVU896
 2713 00bc 816A     		ldr	r1, [r0, #40]
 2714              	.LVL324:
1267:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) break;
 2715              		.loc 1 1267 49 view .LVU897
 2716 00be 8389     		ldrh	r3, [r0, #12]
1267:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) break;
 2717              		.loc 1 1267 56 view .LVU898
 2718 00c0 5B08     		lsrs	r3, r3, #1
1267:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) break;
 2719              		.loc 1 1267 46 view .LVU899
 2720 00c2 B5FBF3F3 		udiv	r3, r5, r3
1267:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) break;
 2721              		.loc 1 1267 10 view .LVU900
 2722 00c6 1944     		add	r1, r1, r3
 2723 00c8 FFF7FEFF 		bl	move_window
 2724              	.LVL325:
1268:DRIVER/FatFs/source/ff.c **** 			st_word(fs->win + clst * 2 % SS(fs), (WORD)val);	/* Simple WORD array */
 2725              		.loc 1 1268 4 is_stmt 1 view .LVU901
1268:DRIVER/FatFs/source/ff.c **** 			st_word(fs->win + clst * 2 % SS(fs), (WORD)val);	/* Simple WORD array */
 2726              		.loc 1 1268 7 is_stmt 0 view .LVU902
 2727 00cc 0646     		mov	r6, r0
 2728 00ce 0028     		cmp	r0, #0
 2729 00d0 AAD1     		bne	.L190
1269:DRIVER/FatFs/source/ff.c **** 			fs->wflag = 1;
 2730              		.loc 1 1269 4 is_stmt 1 view .LVU903
1269:DRIVER/FatFs/source/ff.c **** 			fs->wflag = 1;
 2731              		.loc 1 1269 12 is_stmt 0 view .LVU904
 2732 00d2 04F13800 		add	r0, r4, #56
 2733              	.LVL326:
1269:DRIVER/FatFs/source/ff.c **** 			fs->wflag = 1;
 2734              		.loc 1 1269 27 view .LVU905
 2735 00d6 6D00     		lsls	r5, r5, #1
 2736              	.LVL327:
1269:DRIVER/FatFs/source/ff.c **** 			fs->wflag = 1;
 2737              		.loc 1 1269 33 view .LVU906
 2738 00d8 A389     		ldrh	r3, [r4, #12]
1269:DRIVER/FatFs/source/ff.c **** 			fs->wflag = 1;
 2739              		.loc 1 1269 31 view .LVU907
 2740 00da B5FBF3F2 		udiv	r2, r5, r3
 2741 00de 03FB1255 		mls	r5, r3, r2, r5
1269:DRIVER/FatFs/source/ff.c **** 			fs->wflag = 1;
 2742              		.loc 1 1269 4 view .LVU908
 2743 00e2 B9B2     		uxth	r1, r7
 2744 00e4 2844     		add	r0, r0, r5
 2745 00e6 FFF7FEFF 		bl	st_word
 2746              	.LVL328:
1270:DRIVER/FatFs/source/ff.c **** 			break;
 2747              		.loc 1 1270 4 is_stmt 1 view .LVU909
1270:DRIVER/FatFs/source/ff.c **** 			break;
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 123


 2748              		.loc 1 1270 14 is_stmt 0 view .LVU910
 2749 00ea 0123     		movs	r3, #1
 2750 00ec 2371     		strb	r3, [r4, #4]
1271:DRIVER/FatFs/source/ff.c **** 
 2751              		.loc 1 1271 4 is_stmt 1 view .LVU911
 2752 00ee 9BE7     		b	.L190
 2753              	.LVL329:
 2754              	.L192:
1277:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) break;
 2755              		.loc 1 1277 4 view .LVU912
1277:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) break;
 2756              		.loc 1 1277 28 is_stmt 0 view .LVU913
 2757 00f0 816A     		ldr	r1, [r0, #40]
 2758              	.LVL330:
1277:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) break;
 2759              		.loc 1 1277 49 view .LVU914
 2760 00f2 8389     		ldrh	r3, [r0, #12]
1277:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) break;
 2761              		.loc 1 1277 56 view .LVU915
 2762 00f4 9B08     		lsrs	r3, r3, #2
1277:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) break;
 2763              		.loc 1 1277 46 view .LVU916
 2764 00f6 B5FBF3F3 		udiv	r3, r5, r3
1277:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) break;
 2765              		.loc 1 1277 10 view .LVU917
 2766 00fa 1944     		add	r1, r1, r3
 2767 00fc FFF7FEFF 		bl	move_window
 2768              	.LVL331:
1278:DRIVER/FatFs/source/ff.c **** 			if (!FF_FS_EXFAT || fs->fs_type != FS_EXFAT) {
 2769              		.loc 1 1278 4 is_stmt 1 view .LVU918
1278:DRIVER/FatFs/source/ff.c **** 			if (!FF_FS_EXFAT || fs->fs_type != FS_EXFAT) {
 2770              		.loc 1 1278 7 is_stmt 0 view .LVU919
 2771 0100 0646     		mov	r6, r0
 2772 0102 0028     		cmp	r0, #0
 2773 0104 90D1     		bne	.L190
1279:DRIVER/FatFs/source/ff.c **** 				val = (val & 0x0FFFFFFF) | (ld_dword(fs->win + clst * 4 % SS(fs)) & 0xF0000000);
 2774              		.loc 1 1279 4 is_stmt 1 view .LVU920
1280:DRIVER/FatFs/source/ff.c **** 			}
 2775              		.loc 1 1280 5 view .LVU921
1280:DRIVER/FatFs/source/ff.c **** 			}
 2776              		.loc 1 1280 16 is_stmt 0 view .LVU922
 2777 0106 27F07047 		bic	r7, r7, #-268435456
 2778              	.LVL332:
1280:DRIVER/FatFs/source/ff.c **** 			}
 2779              		.loc 1 1280 42 view .LVU923
 2780 010a 04F13803 		add	r3, r4, #56
1280:DRIVER/FatFs/source/ff.c **** 			}
 2781              		.loc 1 1280 57 view .LVU924
 2782 010e AD00     		lsls	r5, r5, #2
 2783              	.LVL333:
1280:DRIVER/FatFs/source/ff.c **** 			}
 2784              		.loc 1 1280 63 view .LVU925
 2785 0110 A289     		ldrh	r2, [r4, #12]
1280:DRIVER/FatFs/source/ff.c **** 			}
 2786              		.loc 1 1280 61 view .LVU926
 2787 0112 B5FBF2F1 		udiv	r1, r5, r2
 2788 0116 02FB1155 		mls	r5, r2, r1, r5
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 124


1280:DRIVER/FatFs/source/ff.c **** 			}
 2789              		.loc 1 1280 33 view .LVU927
 2790 011a 1D44     		add	r5, r5, r3
 2791 011c 2846     		mov	r0, r5
 2792              	.LVL334:
1280:DRIVER/FatFs/source/ff.c **** 			}
 2793              		.loc 1 1280 33 view .LVU928
 2794 011e FFF7FEFF 		bl	ld_dword
 2795              	.LVL335:
1280:DRIVER/FatFs/source/ff.c **** 			}
 2796              		.loc 1 1280 71 view .LVU929
 2797 0122 00F07041 		and	r1, r0, #-268435456
 2798              	.LVL336:
1282:DRIVER/FatFs/source/ff.c **** 			fs->wflag = 1;
 2799              		.loc 1 1282 4 is_stmt 1 view .LVU930
 2800 0126 3943     		orrs	r1, r1, r7
 2801              	.LVL337:
1282:DRIVER/FatFs/source/ff.c **** 			fs->wflag = 1;
 2802              		.loc 1 1282 4 is_stmt 0 view .LVU931
 2803 0128 2846     		mov	r0, r5
 2804 012a FFF7FEFF 		bl	st_dword
 2805              	.LVL338:
1283:DRIVER/FatFs/source/ff.c **** 			break;
 2806              		.loc 1 1283 4 is_stmt 1 view .LVU932
1283:DRIVER/FatFs/source/ff.c **** 			break;
 2807              		.loc 1 1283 14 is_stmt 0 view .LVU933
 2808 012e 0123     		movs	r3, #1
 2809 0130 2371     		strb	r3, [r4, #4]
1284:DRIVER/FatFs/source/ff.c **** 		}
 2810              		.loc 1 1284 4 is_stmt 1 view .LVU934
 2811 0132 79E7     		b	.L190
 2812              	.LVL339:
 2813              	.L197:
1247:DRIVER/FatFs/source/ff.c **** 
 2814              		.loc 1 1247 10 is_stmt 0 view .LVU935
 2815 0134 0226     		movs	r6, #2
 2816 0136 77E7     		b	.L190
 2817              	.L198:
1247:DRIVER/FatFs/source/ff.c **** 
 2818              		.loc 1 1247 10 view .LVU936
 2819 0138 0226     		movs	r6, #2
 2820 013a 75E7     		b	.L190
 2821              		.cfi_endproc
 2822              	.LFE13:
 2824              		.section	.text.get_fat,"ax",%progbits
 2825              		.align	1
 2826              		.syntax unified
 2827              		.thumb
 2828              		.thumb_func
 2830              	get_fat:
 2831              	.LVL340:
 2832              	.LFB12:
1165:DRIVER/FatFs/source/ff.c **** 	UINT wc, bc;
 2833              		.loc 1 1165 1 is_stmt 1 view -0
 2834              		.cfi_startproc
 2835              		@ args = 0, pretend = 0, frame = 0
 2836              		@ frame_needed = 0, uses_anonymous_args = 0
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 125


1165:DRIVER/FatFs/source/ff.c **** 	UINT wc, bc;
 2837              		.loc 1 1165 1 is_stmt 0 view .LVU938
 2838 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 2839              	.LCFI17:
 2840              		.cfi_def_cfa_offset 24
 2841              		.cfi_offset 3, -24
 2842              		.cfi_offset 4, -20
 2843              		.cfi_offset 5, -16
 2844              		.cfi_offset 6, -12
 2845              		.cfi_offset 7, -8
 2846              		.cfi_offset 14, -4
1166:DRIVER/FatFs/source/ff.c **** 	DWORD val;
 2847              		.loc 1 1166 2 is_stmt 1 view .LVU939
1167:DRIVER/FatFs/source/ff.c **** 	FATFS *fs = obj->fs;
 2848              		.loc 1 1167 2 view .LVU940
1168:DRIVER/FatFs/source/ff.c **** 
 2849              		.loc 1 1168 2 view .LVU941
1168:DRIVER/FatFs/source/ff.c **** 
 2850              		.loc 1 1168 9 is_stmt 0 view .LVU942
 2851 0002 0568     		ldr	r5, [r0]
 2852              	.LVL341:
1171:DRIVER/FatFs/source/ff.c **** 		val = 1;	/* Internal error */
 2853              		.loc 1 1171 2 is_stmt 1 view .LVU943
1171:DRIVER/FatFs/source/ff.c **** 		val = 1;	/* Internal error */
 2854              		.loc 1 1171 5 is_stmt 0 view .LVU944
 2855 0004 0129     		cmp	r1, #1
 2856 0006 6CD9     		bls	.L207
 2857 0008 0C46     		mov	r4, r1
1171:DRIVER/FatFs/source/ff.c **** 		val = 1;	/* Internal error */
 2858              		.loc 1 1171 28 discriminator 1 view .LVU945
 2859 000a EB69     		ldr	r3, [r5, #28]
1171:DRIVER/FatFs/source/ff.c **** 		val = 1;	/* Internal error */
 2860              		.loc 1 1171 15 discriminator 1 view .LVU946
 2861 000c 8B42     		cmp	r3, r1
 2862 000e 6AD9     		bls	.L208
1175:DRIVER/FatFs/source/ff.c **** 
 2863              		.loc 1 1175 3 is_stmt 1 view .LVU947
 2864              	.LVL342:
1177:DRIVER/FatFs/source/ff.c **** 		case FS_FAT12 :
 2865              		.loc 1 1177 3 view .LVU948
1177:DRIVER/FatFs/source/ff.c **** 		case FS_FAT12 :
 2866              		.loc 1 1177 13 is_stmt 0 view .LVU949
 2867 0010 2B78     		ldrb	r3, [r5]	@ zero_extendqisi2
1177:DRIVER/FatFs/source/ff.c **** 		case FS_FAT12 :
 2868              		.loc 1 1177 3 view .LVU950
 2869 0012 022B     		cmp	r3, #2
 2870 0014 37D0     		beq	.L204
 2871 0016 032B     		cmp	r3, #3
 2872 0018 4BD0     		beq	.L205
 2873 001a 012B     		cmp	r3, #1
 2874 001c 01D0     		beq	.L215
 2875 001e 0120     		movs	r0, #1
 2876              	.LVL343:
1177:DRIVER/FatFs/source/ff.c **** 		case FS_FAT12 :
 2877              		.loc 1 1177 3 view .LVU951
 2878 0020 60E0     		b	.L202
 2879              	.LVL344:
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 126


 2880              	.L215:
1179:DRIVER/FatFs/source/ff.c **** 			if (move_window(fs, fs->fatbase + (bc / SS(fs))) != FR_OK) break;
 2881              		.loc 1 1179 4 is_stmt 1 view .LVU952
1179:DRIVER/FatFs/source/ff.c **** 			if (move_window(fs, fs->fatbase + (bc / SS(fs))) != FR_OK) break;
 2882              		.loc 1 1179 21 view .LVU953
1179:DRIVER/FatFs/source/ff.c **** 			if (move_window(fs, fs->fatbase + (bc / SS(fs))) != FR_OK) break;
 2883              		.loc 1 1179 24 is_stmt 0 view .LVU954
 2884 0022 01EB5106 		add	r6, r1, r1, lsr #1
 2885              	.LVL345:
1180:DRIVER/FatFs/source/ff.c **** 			wc = fs->win[bc++ % SS(fs)];		/* Get 1st byte of the entry */
 2886              		.loc 1 1180 4 is_stmt 1 view .LVU955
1180:DRIVER/FatFs/source/ff.c **** 			wc = fs->win[bc++ % SS(fs)];		/* Get 1st byte of the entry */
 2887              		.loc 1 1180 26 is_stmt 0 view .LVU956
 2888 0026 A96A     		ldr	r1, [r5, #40]
 2889              	.LVL346:
1180:DRIVER/FatFs/source/ff.c **** 			wc = fs->win[bc++ % SS(fs)];		/* Get 1st byte of the entry */
 2890              		.loc 1 1180 44 view .LVU957
 2891 0028 AB89     		ldrh	r3, [r5, #12]
1180:DRIVER/FatFs/source/ff.c **** 			wc = fs->win[bc++ % SS(fs)];		/* Get 1st byte of the entry */
 2892              		.loc 1 1180 42 view .LVU958
 2893 002a B6FBF3F3 		udiv	r3, r6, r3
1180:DRIVER/FatFs/source/ff.c **** 			wc = fs->win[bc++ % SS(fs)];		/* Get 1st byte of the entry */
 2894              		.loc 1 1180 8 view .LVU959
 2895 002e 1944     		add	r1, r1, r3
 2896 0030 2846     		mov	r0, r5
 2897              	.LVL347:
1180:DRIVER/FatFs/source/ff.c **** 			wc = fs->win[bc++ % SS(fs)];		/* Get 1st byte of the entry */
 2898              		.loc 1 1180 8 view .LVU960
 2899 0032 FFF7FEFF 		bl	move_window
 2900              	.LVL348:
1180:DRIVER/FatFs/source/ff.c **** 			wc = fs->win[bc++ % SS(fs)];		/* Get 1st byte of the entry */
 2901              		.loc 1 1180 7 view .LVU961
 2902 0036 10B1     		cbz	r0, .L216
1175:DRIVER/FatFs/source/ff.c **** 
 2903              		.loc 1 1175 7 view .LVU962
 2904 0038 4FF0FF30 		mov	r0, #-1
 2905 003c 52E0     		b	.L202
 2906              	.L216:
1181:DRIVER/FatFs/source/ff.c **** 			if (move_window(fs, fs->fatbase + (bc / SS(fs))) != FR_OK) break;
 2907              		.loc 1 1181 4 is_stmt 1 view .LVU963
1181:DRIVER/FatFs/source/ff.c **** 			if (move_window(fs, fs->fatbase + (bc / SS(fs))) != FR_OK) break;
 2908              		.loc 1 1181 19 is_stmt 0 view .LVU964
 2909 003e 771C     		adds	r7, r6, #1
 2910              	.LVL349:
1181:DRIVER/FatFs/source/ff.c **** 			if (move_window(fs, fs->fatbase + (bc / SS(fs))) != FR_OK) break;
 2911              		.loc 1 1181 24 view .LVU965
 2912 0040 AB89     		ldrh	r3, [r5, #12]
1181:DRIVER/FatFs/source/ff.c **** 			if (move_window(fs, fs->fatbase + (bc / SS(fs))) != FR_OK) break;
 2913              		.loc 1 1181 22 view .LVU966
 2914 0042 B6FBF3F2 		udiv	r2, r6, r3
 2915 0046 03FB1266 		mls	r6, r3, r2, r6
1181:DRIVER/FatFs/source/ff.c **** 			if (move_window(fs, fs->fatbase + (bc / SS(fs))) != FR_OK) break;
 2916              		.loc 1 1181 16 view .LVU967
 2917 004a 2E44     		add	r6, r6, r5
 2918 004c 96F83860 		ldrb	r6, [r6, #56]	@ zero_extendqisi2
 2919              	.LVL350:
1182:DRIVER/FatFs/source/ff.c **** 			wc |= fs->win[bc % SS(fs)] << 8;	/* Merge 2nd byte of the entry */
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 127


 2920              		.loc 1 1182 4 is_stmt 1 view .LVU968
1182:DRIVER/FatFs/source/ff.c **** 			wc |= fs->win[bc % SS(fs)] << 8;	/* Merge 2nd byte of the entry */
 2921              		.loc 1 1182 26 is_stmt 0 view .LVU969
 2922 0050 A96A     		ldr	r1, [r5, #40]
1182:DRIVER/FatFs/source/ff.c **** 			wc |= fs->win[bc % SS(fs)] << 8;	/* Merge 2nd byte of the entry */
 2923              		.loc 1 1182 42 view .LVU970
 2924 0052 B7FBF3F3 		udiv	r3, r7, r3
1182:DRIVER/FatFs/source/ff.c **** 			wc |= fs->win[bc % SS(fs)] << 8;	/* Merge 2nd byte of the entry */
 2925              		.loc 1 1182 8 view .LVU971
 2926 0056 1944     		add	r1, r1, r3
 2927 0058 2846     		mov	r0, r5
 2928 005a FFF7FEFF 		bl	move_window
 2929              	.LVL351:
1182:DRIVER/FatFs/source/ff.c **** 			wc |= fs->win[bc % SS(fs)] << 8;	/* Merge 2nd byte of the entry */
 2930              		.loc 1 1182 7 view .LVU972
 2931 005e 0028     		cmp	r0, #0
 2932 0060 43D1     		bne	.L211
1183:DRIVER/FatFs/source/ff.c **** 			val = (clst & 1) ? (wc >> 4) : (wc & 0xFFF);	/* Adjust bit position */
 2933              		.loc 1 1183 4 is_stmt 1 view .LVU973
1183:DRIVER/FatFs/source/ff.c **** 			val = (clst & 1) ? (wc >> 4) : (wc & 0xFFF);	/* Adjust bit position */
 2934              		.loc 1 1183 23 is_stmt 0 view .LVU974
 2935 0062 AB89     		ldrh	r3, [r5, #12]
1183:DRIVER/FatFs/source/ff.c **** 			val = (clst & 1) ? (wc >> 4) : (wc & 0xFFF);	/* Adjust bit position */
 2936              		.loc 1 1183 21 view .LVU975
 2937 0064 B7FBF3F2 		udiv	r2, r7, r3
 2938 0068 03FB1277 		mls	r7, r3, r2, r7
 2939              	.LVL352:
1183:DRIVER/FatFs/source/ff.c **** 			val = (clst & 1) ? (wc >> 4) : (wc & 0xFFF);	/* Adjust bit position */
 2940              		.loc 1 1183 17 view .LVU976
 2941 006c 2F44     		add	r7, r7, r5
 2942 006e 97F83830 		ldrb	r3, [r7, #56]	@ zero_extendqisi2
1183:DRIVER/FatFs/source/ff.c **** 			val = (clst & 1) ? (wc >> 4) : (wc & 0xFFF);	/* Adjust bit position */
 2943              		.loc 1 1183 7 view .LVU977
 2944 0072 46EA0320 		orr	r0, r6, r3, lsl #8
 2945              	.LVL353:
1184:DRIVER/FatFs/source/ff.c **** 			break;
 2946              		.loc 1 1184 4 is_stmt 1 view .LVU978
1184:DRIVER/FatFs/source/ff.c **** 			break;
 2947              		.loc 1 1184 33 is_stmt 0 view .LVU979
 2948 0076 14F0010F 		tst	r4, #1
 2949 007a 01D0     		beq	.L206
1184:DRIVER/FatFs/source/ff.c **** 			break;
 2950              		.loc 1 1184 33 discriminator 1 view .LVU980
 2951 007c 0009     		lsrs	r0, r0, #4
 2952              	.LVL354:
1184:DRIVER/FatFs/source/ff.c **** 			break;
 2953              		.loc 1 1184 33 discriminator 1 view .LVU981
 2954 007e 31E0     		b	.L202
 2955              	.LVL355:
 2956              	.L206:
1184:DRIVER/FatFs/source/ff.c **** 			break;
 2957              		.loc 1 1184 33 discriminator 2 view .LVU982
 2958 0080 C0F30B00 		ubfx	r0, r0, #0, #12
 2959              	.LVL356:
1184:DRIVER/FatFs/source/ff.c **** 			break;
 2960              		.loc 1 1184 33 discriminator 2 view .LVU983
 2961 0084 2EE0     		b	.L202
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 128


 2962              	.LVL357:
 2963              	.L204:
1188:DRIVER/FatFs/source/ff.c **** 			val = ld_word(fs->win + clst * 2 % SS(fs));		/* Simple WORD array */
 2964              		.loc 1 1188 4 is_stmt 1 view .LVU984
1188:DRIVER/FatFs/source/ff.c **** 			val = ld_word(fs->win + clst * 2 % SS(fs));		/* Simple WORD array */
 2965              		.loc 1 1188 26 is_stmt 0 view .LVU985
 2966 0086 A96A     		ldr	r1, [r5, #40]
 2967              	.LVL358:
1188:DRIVER/FatFs/source/ff.c **** 			val = ld_word(fs->win + clst * 2 % SS(fs));		/* Simple WORD array */
 2968              		.loc 1 1188 47 view .LVU986
 2969 0088 AB89     		ldrh	r3, [r5, #12]
1188:DRIVER/FatFs/source/ff.c **** 			val = ld_word(fs->win + clst * 2 % SS(fs));		/* Simple WORD array */
 2970              		.loc 1 1188 54 view .LVU987
 2971 008a 5B08     		lsrs	r3, r3, #1
1188:DRIVER/FatFs/source/ff.c **** 			val = ld_word(fs->win + clst * 2 % SS(fs));		/* Simple WORD array */
 2972              		.loc 1 1188 44 view .LVU988
 2973 008c B4FBF3F3 		udiv	r3, r4, r3
1188:DRIVER/FatFs/source/ff.c **** 			val = ld_word(fs->win + clst * 2 % SS(fs));		/* Simple WORD array */
 2974              		.loc 1 1188 8 view .LVU989
 2975 0090 1944     		add	r1, r1, r3
 2976 0092 2846     		mov	r0, r5
 2977              	.LVL359:
1188:DRIVER/FatFs/source/ff.c **** 			val = ld_word(fs->win + clst * 2 % SS(fs));		/* Simple WORD array */
 2978              		.loc 1 1188 8 view .LVU990
 2979 0094 FFF7FEFF 		bl	move_window
 2980              	.LVL360:
1188:DRIVER/FatFs/source/ff.c **** 			val = ld_word(fs->win + clst * 2 % SS(fs));		/* Simple WORD array */
 2981              		.loc 1 1188 7 view .LVU991
 2982 0098 50BB     		cbnz	r0, .L212
1189:DRIVER/FatFs/source/ff.c **** 			break;
 2983              		.loc 1 1189 4 is_stmt 1 view .LVU992
1189:DRIVER/FatFs/source/ff.c **** 			break;
 2984              		.loc 1 1189 18 is_stmt 0 view .LVU993
 2985 009a 05F13800 		add	r0, r5, #56
1189:DRIVER/FatFs/source/ff.c **** 			break;
 2986              		.loc 1 1189 33 view .LVU994
 2987 009e 6400     		lsls	r4, r4, #1
 2988              	.LVL361:
1189:DRIVER/FatFs/source/ff.c **** 			break;
 2989              		.loc 1 1189 39 view .LVU995
 2990 00a0 AB89     		ldrh	r3, [r5, #12]
1189:DRIVER/FatFs/source/ff.c **** 			break;
 2991              		.loc 1 1189 37 view .LVU996
 2992 00a2 B4FBF3F2 		udiv	r2, r4, r3
 2993 00a6 03FB1244 		mls	r4, r3, r2, r4
1189:DRIVER/FatFs/source/ff.c **** 			break;
 2994              		.loc 1 1189 10 view .LVU997
 2995 00aa 2044     		add	r0, r0, r4
 2996 00ac FFF7FEFF 		bl	ld_word
 2997              	.LVL362:
1190:DRIVER/FatFs/source/ff.c **** 
 2998              		.loc 1 1190 4 is_stmt 1 view .LVU998
 2999 00b0 18E0     		b	.L202
 3000              	.LVL363:
 3001              	.L205:
1193:DRIVER/FatFs/source/ff.c **** 			val = ld_dword(fs->win + clst * 4 % SS(fs)) & 0x0FFFFFFF;	/* Simple DWORD array but mask out upp
 3002              		.loc 1 1193 4 view .LVU999
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 129


1193:DRIVER/FatFs/source/ff.c **** 			val = ld_dword(fs->win + clst * 4 % SS(fs)) & 0x0FFFFFFF;	/* Simple DWORD array but mask out upp
 3003              		.loc 1 1193 26 is_stmt 0 view .LVU1000
 3004 00b2 A96A     		ldr	r1, [r5, #40]
 3005              	.LVL364:
1193:DRIVER/FatFs/source/ff.c **** 			val = ld_dword(fs->win + clst * 4 % SS(fs)) & 0x0FFFFFFF;	/* Simple DWORD array but mask out upp
 3006              		.loc 1 1193 47 view .LVU1001
 3007 00b4 AB89     		ldrh	r3, [r5, #12]
1193:DRIVER/FatFs/source/ff.c **** 			val = ld_dword(fs->win + clst * 4 % SS(fs)) & 0x0FFFFFFF;	/* Simple DWORD array but mask out upp
 3008              		.loc 1 1193 54 view .LVU1002
 3009 00b6 9B08     		lsrs	r3, r3, #2
1193:DRIVER/FatFs/source/ff.c **** 			val = ld_dword(fs->win + clst * 4 % SS(fs)) & 0x0FFFFFFF;	/* Simple DWORD array but mask out upp
 3010              		.loc 1 1193 44 view .LVU1003
 3011 00b8 B4FBF3F3 		udiv	r3, r4, r3
1193:DRIVER/FatFs/source/ff.c **** 			val = ld_dword(fs->win + clst * 4 % SS(fs)) & 0x0FFFFFFF;	/* Simple DWORD array but mask out upp
 3012              		.loc 1 1193 8 view .LVU1004
 3013 00bc 1944     		add	r1, r1, r3
 3014 00be 2846     		mov	r0, r5
 3015              	.LVL365:
1193:DRIVER/FatFs/source/ff.c **** 			val = ld_dword(fs->win + clst * 4 % SS(fs)) & 0x0FFFFFFF;	/* Simple DWORD array but mask out upp
 3016              		.loc 1 1193 8 view .LVU1005
 3017 00c0 FFF7FEFF 		bl	move_window
 3018              	.LVL366:
1193:DRIVER/FatFs/source/ff.c **** 			val = ld_dword(fs->win + clst * 4 % SS(fs)) & 0x0FFFFFFF;	/* Simple DWORD array but mask out upp
 3019              		.loc 1 1193 7 view .LVU1006
 3020 00c4 B8B9     		cbnz	r0, .L213
1194:DRIVER/FatFs/source/ff.c **** 			break;
 3021              		.loc 1 1194 4 is_stmt 1 view .LVU1007
1194:DRIVER/FatFs/source/ff.c **** 			break;
 3022              		.loc 1 1194 19 is_stmt 0 view .LVU1008
 3023 00c6 05F13800 		add	r0, r5, #56
1194:DRIVER/FatFs/source/ff.c **** 			break;
 3024              		.loc 1 1194 34 view .LVU1009
 3025 00ca A400     		lsls	r4, r4, #2
 3026              	.LVL367:
1194:DRIVER/FatFs/source/ff.c **** 			break;
 3027              		.loc 1 1194 40 view .LVU1010
 3028 00cc AB89     		ldrh	r3, [r5, #12]
1194:DRIVER/FatFs/source/ff.c **** 			break;
 3029              		.loc 1 1194 38 view .LVU1011
 3030 00ce B4FBF3F2 		udiv	r2, r4, r3
 3031 00d2 03FB1244 		mls	r4, r3, r2, r4
1194:DRIVER/FatFs/source/ff.c **** 			break;
 3032              		.loc 1 1194 10 view .LVU1012
 3033 00d6 2044     		add	r0, r0, r4
 3034 00d8 FFF7FEFF 		bl	ld_dword
 3035              	.LVL368:
1194:DRIVER/FatFs/source/ff.c **** 			break;
 3036              		.loc 1 1194 8 view .LVU1013
 3037 00dc 20F07040 		bic	r0, r0, #-268435456
 3038              	.LVL369:
1195:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
 3039              		.loc 1 1195 4 is_stmt 1 view .LVU1014
 3040 00e0 00E0     		b	.L202
 3041              	.LVL370:
 3042              	.L207:
1172:DRIVER/FatFs/source/ff.c **** 
 3043              		.loc 1 1172 7 is_stmt 0 view .LVU1015
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 130


 3044 00e2 0120     		movs	r0, #1
 3045              	.LVL371:
 3046              	.L202:
1229:DRIVER/FatFs/source/ff.c **** 
 3047              		.loc 1 1229 1 view .LVU1016
 3048 00e4 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 3049              	.LVL372:
 3050              	.L208:
1172:DRIVER/FatFs/source/ff.c **** 
 3051              		.loc 1 1172 7 view .LVU1017
 3052 00e6 0120     		movs	r0, #1
 3053              	.LVL373:
1172:DRIVER/FatFs/source/ff.c **** 
 3054              		.loc 1 1172 7 view .LVU1018
 3055 00e8 FCE7     		b	.L202
 3056              	.LVL374:
 3057              	.L211:
1175:DRIVER/FatFs/source/ff.c **** 
 3058              		.loc 1 1175 7 view .LVU1019
 3059 00ea 4FF0FF30 		mov	r0, #-1
 3060 00ee F9E7     		b	.L202
 3061              	.LVL375:
 3062              	.L212:
1175:DRIVER/FatFs/source/ff.c **** 
 3063              		.loc 1 1175 7 view .LVU1020
 3064 00f0 4FF0FF30 		mov	r0, #-1
 3065 00f4 F6E7     		b	.L202
 3066              	.L213:
1175:DRIVER/FatFs/source/ff.c **** 
 3067              		.loc 1 1175 7 view .LVU1021
 3068 00f6 4FF0FF30 		mov	r0, #-1
1228:DRIVER/FatFs/source/ff.c **** }
 3069              		.loc 1 1228 2 is_stmt 1 view .LVU1022
1228:DRIVER/FatFs/source/ff.c **** }
 3070              		.loc 1 1228 9 is_stmt 0 view .LVU1023
 3071 00fa F3E7     		b	.L202
 3072              		.cfi_endproc
 3073              	.LFE12:
 3075              		.section	.text.dir_sdi,"ax",%progbits
 3076              		.align	1
 3077              		.syntax unified
 3078              		.thumb
 3079              		.thumb_func
 3081              	dir_sdi:
 3082              	.LVL376:
 3083              	.LFB17:
1701:DRIVER/FatFs/source/ff.c **** 	DWORD csz, clst;
 3084              		.loc 1 1701 1 is_stmt 1 view -0
 3085              		.cfi_startproc
 3086              		@ args = 0, pretend = 0, frame = 0
 3087              		@ frame_needed = 0, uses_anonymous_args = 0
1701:DRIVER/FatFs/source/ff.c **** 	DWORD csz, clst;
 3088              		.loc 1 1701 1 is_stmt 0 view .LVU1025
 3089 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 3090              	.LCFI18:
 3091              		.cfi_def_cfa_offset 24
 3092              		.cfi_offset 4, -24
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 131


 3093              		.cfi_offset 5, -20
 3094              		.cfi_offset 6, -16
 3095              		.cfi_offset 7, -12
 3096              		.cfi_offset 8, -8
 3097              		.cfi_offset 14, -4
1702:DRIVER/FatFs/source/ff.c **** 	FATFS *fs = dp->obj.fs;
 3098              		.loc 1 1702 2 is_stmt 1 view .LVU1026
1703:DRIVER/FatFs/source/ff.c **** 
 3099              		.loc 1 1703 2 view .LVU1027
1703:DRIVER/FatFs/source/ff.c **** 
 3100              		.loc 1 1703 9 is_stmt 0 view .LVU1028
 3101 0004 D0F80080 		ldr	r8, [r0]
 3102              	.LVL377:
1706:DRIVER/FatFs/source/ff.c **** 		return FR_INT_ERR;
 3103              		.loc 1 1706 2 is_stmt 1 view .LVU1029
1706:DRIVER/FatFs/source/ff.c **** 		return FR_INT_ERR;
 3104              		.loc 1 1706 5 is_stmt 0 view .LVU1030
 3105 0008 B1F5001F 		cmp	r1, #2097152
 3106 000c 49D2     		bcs	.L224
 3107 000e 0746     		mov	r7, r0
 3108 0010 0E46     		mov	r6, r1
1706:DRIVER/FatFs/source/ff.c **** 		return FR_INT_ERR;
 3109              		.loc 1 1706 86 discriminator 1 view .LVU1031
 3110 0012 11F01F0F 		tst	r1, #31
 3111 0016 47D1     		bne	.L225
1709:DRIVER/FatFs/source/ff.c **** 	clst = dp->obj.sclust;		/* Table start cluster (0:root) */
 3112              		.loc 1 1709 2 is_stmt 1 view .LVU1032
1709:DRIVER/FatFs/source/ff.c **** 	clst = dp->obj.sclust;		/* Table start cluster (0:root) */
 3113              		.loc 1 1709 11 is_stmt 0 view .LVU1033
 3114 0018 0161     		str	r1, [r0, #16]
1710:DRIVER/FatFs/source/ff.c **** 	if (clst == 0 && fs->fs_type >= FS_FAT32) {	/* Replace cluster# 0 with root cluster# */
 3115              		.loc 1 1710 2 is_stmt 1 view .LVU1034
1710:DRIVER/FatFs/source/ff.c **** 	if (clst == 0 && fs->fs_type >= FS_FAT32) {	/* Replace cluster# 0 with root cluster# */
 3116              		.loc 1 1710 7 is_stmt 0 view .LVU1035
 3117 001a 8468     		ldr	r4, [r0, #8]
 3118              	.LVL378:
1711:DRIVER/FatFs/source/ff.c **** 		clst = (DWORD)fs->dirbase;
 3119              		.loc 1 1711 2 is_stmt 1 view .LVU1036
1711:DRIVER/FatFs/source/ff.c **** 		clst = (DWORD)fs->dirbase;
 3120              		.loc 1 1711 5 is_stmt 0 view .LVU1037
 3121 001c 1CBB     		cbnz	r4, .L219
1711:DRIVER/FatFs/source/ff.c **** 		clst = (DWORD)fs->dirbase;
 3122              		.loc 1 1711 21 discriminator 1 view .LVU1038
 3123 001e 98F80030 		ldrb	r3, [r8]	@ zero_extendqisi2
1711:DRIVER/FatFs/source/ff.c **** 		clst = (DWORD)fs->dirbase;
 3124              		.loc 1 1711 16 discriminator 1 view .LVU1039
 3125 0022 022B     		cmp	r3, #2
 3126 0024 01D9     		bls	.L220
1712:DRIVER/FatFs/source/ff.c **** 		if (FF_FS_EXFAT) dp->obj.stat = 0;	/* exFAT: Root dir has an FAT chain */
 3127              		.loc 1 1712 3 is_stmt 1 view .LVU1040
1712:DRIVER/FatFs/source/ff.c **** 		if (FF_FS_EXFAT) dp->obj.stat = 0;	/* exFAT: Root dir has an FAT chain */
 3128              		.loc 1 1712 8 is_stmt 0 view .LVU1041
 3129 0026 D8F82C40 		ldr	r4, [r8, #44]
 3130              	.LVL379:
1713:DRIVER/FatFs/source/ff.c **** 	}
 3131              		.loc 1 1713 3 is_stmt 1 view .LVU1042
 3132              	.L220:
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 132


1716:DRIVER/FatFs/source/ff.c **** 		if (ofs / SZDIRE >= fs->n_rootdir) return FR_INT_ERR;	/* Is index out of range? */
 3133              		.loc 1 1716 2 view .LVU1043
1716:DRIVER/FatFs/source/ff.c **** 		if (ofs / SZDIRE >= fs->n_rootdir) return FR_INT_ERR;	/* Is index out of range? */
 3134              		.loc 1 1716 5 is_stmt 0 view .LVU1044
 3135 002a E4B9     		cbnz	r4, .L219
1717:DRIVER/FatFs/source/ff.c **** 		dp->sect = fs->dirbase;
 3136              		.loc 1 1717 3 is_stmt 1 view .LVU1045
1717:DRIVER/FatFs/source/ff.c **** 		dp->sect = fs->dirbase;
 3137              		.loc 1 1717 25 is_stmt 0 view .LVU1046
 3138 002c B8F80830 		ldrh	r3, [r8, #8]
1717:DRIVER/FatFs/source/ff.c **** 		dp->sect = fs->dirbase;
 3139              		.loc 1 1717 6 view .LVU1047
 3140 0030 B3EB561F 		cmp	r3, r6, lsr #5
 3141 0034 3AD9     		bls	.L226
1718:DRIVER/FatFs/source/ff.c **** 
 3142              		.loc 1 1718 3 is_stmt 1 view .LVU1048
1718:DRIVER/FatFs/source/ff.c **** 
 3143              		.loc 1 1718 16 is_stmt 0 view .LVU1049
 3144 0036 D8F82C30 		ldr	r3, [r8, #44]
1718:DRIVER/FatFs/source/ff.c **** 
 3145              		.loc 1 1718 12 view .LVU1050
 3146 003a BB61     		str	r3, [r7, #24]
 3147              	.LVL380:
 3148              	.L221:
1730:DRIVER/FatFs/source/ff.c **** 	if (dp->sect == 0) return FR_INT_ERR;
 3149              		.loc 1 1730 2 is_stmt 1 view .LVU1051
1730:DRIVER/FatFs/source/ff.c **** 	if (dp->sect == 0) return FR_INT_ERR;
 3150              		.loc 1 1730 12 is_stmt 0 view .LVU1052
 3151 003c 7C61     		str	r4, [r7, #20]
1731:DRIVER/FatFs/source/ff.c **** 	dp->sect += ofs / SS(fs);			/* Sector# of the directory entry */
 3152              		.loc 1 1731 2 is_stmt 1 view .LVU1053
1731:DRIVER/FatFs/source/ff.c **** 	dp->sect += ofs / SS(fs);			/* Sector# of the directory entry */
 3153              		.loc 1 1731 8 is_stmt 0 view .LVU1054
 3154 003e BB69     		ldr	r3, [r7, #24]
1731:DRIVER/FatFs/source/ff.c **** 	dp->sect += ofs / SS(fs);			/* Sector# of the directory entry */
 3155              		.loc 1 1731 5 view .LVU1055
 3156 0040 E3B3     		cbz	r3, .L230
1732:DRIVER/FatFs/source/ff.c **** 	dp->dir = fs->win + (ofs % SS(fs));	/* Pointer to the entry in the win[] */
 3157              		.loc 1 1732 2 is_stmt 1 view .LVU1056
1732:DRIVER/FatFs/source/ff.c **** 	dp->dir = fs->win + (ofs % SS(fs));	/* Pointer to the entry in the win[] */
 3158              		.loc 1 1732 20 is_stmt 0 view .LVU1057
 3159 0042 B8F80C20 		ldrh	r2, [r8, #12]
1732:DRIVER/FatFs/source/ff.c **** 	dp->dir = fs->win + (ofs % SS(fs));	/* Pointer to the entry in the win[] */
 3160              		.loc 1 1732 18 view .LVU1058
 3161 0046 B6FBF2F2 		udiv	r2, r6, r2
1732:DRIVER/FatFs/source/ff.c **** 	dp->dir = fs->win + (ofs % SS(fs));	/* Pointer to the entry in the win[] */
 3162              		.loc 1 1732 11 view .LVU1059
 3163 004a 1344     		add	r3, r3, r2
 3164 004c BB61     		str	r3, [r7, #24]
1733:DRIVER/FatFs/source/ff.c **** 
 3165              		.loc 1 1733 2 is_stmt 1 view .LVU1060
1733:DRIVER/FatFs/source/ff.c **** 
 3166              		.loc 1 1733 12 is_stmt 0 view .LVU1061
 3167 004e 08F13803 		add	r3, r8, #56
1733:DRIVER/FatFs/source/ff.c **** 
 3168              		.loc 1 1733 29 view .LVU1062
 3169 0052 B8F80C20 		ldrh	r2, [r8, #12]
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 133


1733:DRIVER/FatFs/source/ff.c **** 
 3170              		.loc 1 1733 27 view .LVU1063
 3171 0056 B6FBF2F1 		udiv	r1, r6, r2
 3172 005a 02FB1161 		mls	r1, r2, r1, r6
1733:DRIVER/FatFs/source/ff.c **** 
 3173              		.loc 1 1733 20 view .LVU1064
 3174 005e 0B44     		add	r3, r3, r1
1733:DRIVER/FatFs/source/ff.c **** 
 3175              		.loc 1 1733 10 view .LVU1065
 3176 0060 FB61     		str	r3, [r7, #28]
1735:DRIVER/FatFs/source/ff.c **** }
 3177              		.loc 1 1735 2 is_stmt 1 view .LVU1066
1735:DRIVER/FatFs/source/ff.c **** }
 3178              		.loc 1 1735 9 is_stmt 0 view .LVU1067
 3179 0062 0020     		movs	r0, #0
 3180 0064 1EE0     		b	.L218
 3181              	.LVL381:
 3182              	.L219:
1721:DRIVER/FatFs/source/ff.c **** 		while (ofs >= csz) {				/* Follow cluster chain */
 3183              		.loc 1 1721 3 is_stmt 1 view .LVU1068
1721:DRIVER/FatFs/source/ff.c **** 		while (ofs >= csz) {				/* Follow cluster chain */
 3184              		.loc 1 1721 18 is_stmt 0 view .LVU1069
 3185 0066 B8F80A50 		ldrh	r5, [r8, #10]
1721:DRIVER/FatFs/source/ff.c **** 		while (ofs >= csz) {				/* Follow cluster chain */
 3186              		.loc 1 1721 28 view .LVU1070
 3187 006a B8F80C30 		ldrh	r3, [r8, #12]
1721:DRIVER/FatFs/source/ff.c **** 		while (ofs >= csz) {				/* Follow cluster chain */
 3188              		.loc 1 1721 7 view .LVU1071
 3189 006e 03FB05F5 		mul	r5, r3, r5
 3190              	.LVL382:
1722:DRIVER/FatFs/source/ff.c **** 			clst = get_fat(&dp->obj, clst);				/* Get next cluster */
 3191              		.loc 1 1722 3 is_stmt 1 view .LVU1072
 3192              	.L222:
1722:DRIVER/FatFs/source/ff.c **** 			clst = get_fat(&dp->obj, clst);				/* Get next cluster */
 3193              		.loc 1 1722 14 view .LVU1073
 3194 0072 AE42     		cmp	r6, r5
 3195 0074 0FD3     		bcc	.L232
1723:DRIVER/FatFs/source/ff.c **** 			if (clst == 0xFFFFFFFF) return FR_DISK_ERR;	/* Disk error */
 3196              		.loc 1 1723 4 view .LVU1074
1723:DRIVER/FatFs/source/ff.c **** 			if (clst == 0xFFFFFFFF) return FR_DISK_ERR;	/* Disk error */
 3197              		.loc 1 1723 11 is_stmt 0 view .LVU1075
 3198 0076 2146     		mov	r1, r4
 3199 0078 3846     		mov	r0, r7
 3200 007a FFF7FEFF 		bl	get_fat
 3201              	.LVL383:
 3202 007e 0446     		mov	r4, r0
 3203              	.LVL384:
1724:DRIVER/FatFs/source/ff.c **** 			if (clst < 2 || clst >= fs->n_fatent) return FR_INT_ERR;	/* Reached to end of table or internal 
 3204              		.loc 1 1724 4 is_stmt 1 view .LVU1076
1724:DRIVER/FatFs/source/ff.c **** 			if (clst < 2 || clst >= fs->n_fatent) return FR_INT_ERR;	/* Reached to end of table or internal 
 3205              		.loc 1 1724 7 is_stmt 0 view .LVU1077
 3206 0080 B0F1FF3F 		cmp	r0, #-1
 3207 0084 14D0     		beq	.L227
1725:DRIVER/FatFs/source/ff.c **** 			ofs -= csz;
 3208              		.loc 1 1725 4 is_stmt 1 view .LVU1078
1725:DRIVER/FatFs/source/ff.c **** 			ofs -= csz;
 3209              		.loc 1 1725 7 is_stmt 0 view .LVU1079
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 134


 3210 0086 0128     		cmp	r0, #1
 3211 0088 14D9     		bls	.L228
1725:DRIVER/FatFs/source/ff.c **** 			ofs -= csz;
 3212              		.loc 1 1725 30 discriminator 2 view .LVU1080
 3213 008a D8F81C30 		ldr	r3, [r8, #28]
1725:DRIVER/FatFs/source/ff.c **** 			ofs -= csz;
 3214              		.loc 1 1725 17 discriminator 2 view .LVU1081
 3215 008e 8342     		cmp	r3, r0
 3216 0090 12D9     		bls	.L229
1726:DRIVER/FatFs/source/ff.c **** 		}
 3217              		.loc 1 1726 4 is_stmt 1 view .LVU1082
1726:DRIVER/FatFs/source/ff.c **** 		}
 3218              		.loc 1 1726 8 is_stmt 0 view .LVU1083
 3219 0092 761B     		subs	r6, r6, r5
 3220              	.LVL385:
1726:DRIVER/FatFs/source/ff.c **** 		}
 3221              		.loc 1 1726 8 view .LVU1084
 3222 0094 EDE7     		b	.L222
 3223              	.LVL386:
 3224              	.L232:
1728:DRIVER/FatFs/source/ff.c **** 	}
 3225              		.loc 1 1728 3 is_stmt 1 view .LVU1085
1728:DRIVER/FatFs/source/ff.c **** 	}
 3226              		.loc 1 1728 14 is_stmt 0 view .LVU1086
 3227 0096 2146     		mov	r1, r4
 3228 0098 4046     		mov	r0, r8
 3229 009a FFF7FEFF 		bl	clst2sect
 3230              	.LVL387:
1728:DRIVER/FatFs/source/ff.c **** 	}
 3231              		.loc 1 1728 12 view .LVU1087
 3232 009e B861     		str	r0, [r7, #24]
 3233 00a0 CCE7     		b	.L221
 3234              	.LVL388:
 3235              	.L224:
1707:DRIVER/FatFs/source/ff.c **** 	}
 3236              		.loc 1 1707 10 view .LVU1088
 3237 00a2 0220     		movs	r0, #2
 3238              	.LVL389:
 3239              	.L218:
1736:DRIVER/FatFs/source/ff.c **** 
 3240              		.loc 1 1736 1 view .LVU1089
 3241 00a4 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 3242              	.LVL390:
 3243              	.L225:
1707:DRIVER/FatFs/source/ff.c **** 	}
 3244              		.loc 1 1707 10 view .LVU1090
 3245 00a8 0220     		movs	r0, #2
 3246              	.LVL391:
1707:DRIVER/FatFs/source/ff.c **** 	}
 3247              		.loc 1 1707 10 view .LVU1091
 3248 00aa FBE7     		b	.L218
 3249              	.LVL392:
 3250              	.L226:
1717:DRIVER/FatFs/source/ff.c **** 		dp->sect = fs->dirbase;
 3251              		.loc 1 1717 45 view .LVU1092
 3252 00ac 0220     		movs	r0, #2
 3253              	.LVL393:
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 135


1717:DRIVER/FatFs/source/ff.c **** 		dp->sect = fs->dirbase;
 3254              		.loc 1 1717 45 view .LVU1093
 3255 00ae F9E7     		b	.L218
 3256              	.LVL394:
 3257              	.L227:
1724:DRIVER/FatFs/source/ff.c **** 			if (clst < 2 || clst >= fs->n_fatent) return FR_INT_ERR;	/* Reached to end of table or internal 
 3258              		.loc 1 1724 35 view .LVU1094
 3259 00b0 0120     		movs	r0, #1
 3260              	.LVL395:
1724:DRIVER/FatFs/source/ff.c **** 			if (clst < 2 || clst >= fs->n_fatent) return FR_INT_ERR;	/* Reached to end of table or internal 
 3261              		.loc 1 1724 35 view .LVU1095
 3262 00b2 F7E7     		b	.L218
 3263              	.LVL396:
 3264              	.L228:
1725:DRIVER/FatFs/source/ff.c **** 			ofs -= csz;
 3265              		.loc 1 1725 49 view .LVU1096
 3266 00b4 0220     		movs	r0, #2
 3267              	.LVL397:
1725:DRIVER/FatFs/source/ff.c **** 			ofs -= csz;
 3268              		.loc 1 1725 49 view .LVU1097
 3269 00b6 F5E7     		b	.L218
 3270              	.LVL398:
 3271              	.L229:
1725:DRIVER/FatFs/source/ff.c **** 			ofs -= csz;
 3272              		.loc 1 1725 49 view .LVU1098
 3273 00b8 0220     		movs	r0, #2
 3274              	.LVL399:
1725:DRIVER/FatFs/source/ff.c **** 			ofs -= csz;
 3275              		.loc 1 1725 49 view .LVU1099
 3276 00ba F3E7     		b	.L218
 3277              	.LVL400:
 3278              	.L230:
1731:DRIVER/FatFs/source/ff.c **** 	dp->sect += ofs / SS(fs);			/* Sector# of the directory entry */
 3279              		.loc 1 1731 28 view .LVU1100
 3280 00bc 0220     		movs	r0, #2
 3281 00be F1E7     		b	.L218
 3282              		.cfi_endproc
 3283              	.LFE17:
 3285              		.section	.text.create_chain,"ax",%progbits
 3286              		.align	1
 3287              		.syntax unified
 3288              		.thumb
 3289              		.thumb_func
 3291              	create_chain:
 3292              	.LVL401:
 3293              	.LFB15:
1528:DRIVER/FatFs/source/ff.c **** 	DWORD cs, ncl, scl;
 3294              		.loc 1 1528 1 is_stmt 1 view -0
 3295              		.cfi_startproc
 3296              		@ args = 0, pretend = 0, frame = 0
 3297              		@ frame_needed = 0, uses_anonymous_args = 0
1528:DRIVER/FatFs/source/ff.c **** 	DWORD cs, ncl, scl;
 3298              		.loc 1 1528 1 is_stmt 0 view .LVU1102
 3299 0000 2DE9F843 		push	{r3, r4, r5, r6, r7, r8, r9, lr}
 3300              	.LCFI19:
 3301              		.cfi_def_cfa_offset 32
 3302              		.cfi_offset 3, -32
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 136


 3303              		.cfi_offset 4, -28
 3304              		.cfi_offset 5, -24
 3305              		.cfi_offset 6, -20
 3306              		.cfi_offset 7, -16
 3307              		.cfi_offset 8, -12
 3308              		.cfi_offset 9, -8
 3309              		.cfi_offset 14, -4
 3310 0004 0646     		mov	r6, r0
1529:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
 3311              		.loc 1 1529 2 is_stmt 1 view .LVU1103
1530:DRIVER/FatFs/source/ff.c **** 	FATFS *fs = obj->fs;
 3312              		.loc 1 1530 2 view .LVU1104
1531:DRIVER/FatFs/source/ff.c **** 
 3313              		.loc 1 1531 2 view .LVU1105
1531:DRIVER/FatFs/source/ff.c **** 
 3314              		.loc 1 1531 9 is_stmt 0 view .LVU1106
 3315 0006 0768     		ldr	r7, [r0]
 3316              	.LVL402:
1534:DRIVER/FatFs/source/ff.c **** 		scl = fs->last_clst;				/* Suggested cluster to start to find */
 3317              		.loc 1 1534 2 is_stmt 1 view .LVU1107
1534:DRIVER/FatFs/source/ff.c **** 		scl = fs->last_clst;				/* Suggested cluster to start to find */
 3318              		.loc 1 1534 5 is_stmt 0 view .LVU1108
 3319 0008 8846     		mov	r8, r1
 3320 000a 31B9     		cbnz	r1, .L234
1535:DRIVER/FatFs/source/ff.c **** 		if (scl == 0 || scl >= fs->n_fatent) scl = 1;
 3321              		.loc 1 1535 3 is_stmt 1 view .LVU1109
1535:DRIVER/FatFs/source/ff.c **** 		if (scl == 0 || scl >= fs->n_fatent) scl = 1;
 3322              		.loc 1 1535 7 is_stmt 0 view .LVU1110
 3323 000c 7D69     		ldr	r5, [r7, #20]
 3324              	.LVL403:
1536:DRIVER/FatFs/source/ff.c **** 	}
 3325              		.loc 1 1536 3 is_stmt 1 view .LVU1111
1536:DRIVER/FatFs/source/ff.c **** 	}
 3326              		.loc 1 1536 6 is_stmt 0 view .LVU1112
 3327 000e 8DB1     		cbz	r5, .L245
1536:DRIVER/FatFs/source/ff.c **** 	}
 3328              		.loc 1 1536 28 discriminator 2 view .LVU1113
 3329 0010 FB69     		ldr	r3, [r7, #28]
1536:DRIVER/FatFs/source/ff.c **** 	}
 3330              		.loc 1 1536 16 discriminator 2 view .LVU1114
 3331 0012 AB42     		cmp	r3, r5
 3332 0014 0FD8     		bhi	.L235
1536:DRIVER/FatFs/source/ff.c **** 	}
 3333              		.loc 1 1536 44 view .LVU1115
 3334 0016 0125     		movs	r5, #1
 3335              	.LVL404:
1536:DRIVER/FatFs/source/ff.c **** 	}
 3336              		.loc 1 1536 44 view .LVU1116
 3337 0018 0DE0     		b	.L235
 3338              	.LVL405:
 3339              	.L234:
1539:DRIVER/FatFs/source/ff.c **** 		if (cs < 2) return 1;				/* Test for insanity */
 3340              		.loc 1 1539 3 is_stmt 1 view .LVU1117
1539:DRIVER/FatFs/source/ff.c **** 		if (cs < 2) return 1;				/* Test for insanity */
 3341              		.loc 1 1539 8 is_stmt 0 view .LVU1118
 3342 001a FFF7FEFF 		bl	get_fat
 3343              	.LVL406:
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 137


1539:DRIVER/FatFs/source/ff.c **** 		if (cs < 2) return 1;				/* Test for insanity */
 3344              		.loc 1 1539 8 view .LVU1119
 3345 001e 0346     		mov	r3, r0
 3346              	.LVL407:
1540:DRIVER/FatFs/source/ff.c **** 		if (cs == 0xFFFFFFFF) return cs;	/* Test for disk error */
 3347              		.loc 1 1540 3 is_stmt 1 view .LVU1120
1540:DRIVER/FatFs/source/ff.c **** 		if (cs == 0xFFFFFFFF) return cs;	/* Test for disk error */
 3348              		.loc 1 1540 6 is_stmt 0 view .LVU1121
 3349 0020 0128     		cmp	r0, #1
 3350 0022 78D9     		bls	.L247
1541:DRIVER/FatFs/source/ff.c **** 		if (cs < fs->n_fatent) return cs;	/* It is already followed by next cluster */
 3351              		.loc 1 1541 3 is_stmt 1 view .LVU1122
1541:DRIVER/FatFs/source/ff.c **** 		if (cs < fs->n_fatent) return cs;	/* It is already followed by next cluster */
 3352              		.loc 1 1541 6 is_stmt 0 view .LVU1123
 3353 0024 B0F1FF3F 		cmp	r0, #-1
 3354 0028 6FD0     		beq	.L233
1542:DRIVER/FatFs/source/ff.c **** 		scl = clst;							/* Cluster to start to find */
 3355              		.loc 1 1542 3 is_stmt 1 view .LVU1124
1542:DRIVER/FatFs/source/ff.c **** 		scl = clst;							/* Cluster to start to find */
 3356              		.loc 1 1542 14 is_stmt 0 view .LVU1125
 3357 002a FA69     		ldr	r2, [r7, #28]
1542:DRIVER/FatFs/source/ff.c **** 		scl = clst;							/* Cluster to start to find */
 3358              		.loc 1 1542 6 view .LVU1126
 3359 002c 8242     		cmp	r2, r0
 3360 002e 6CD8     		bhi	.L233
1543:DRIVER/FatFs/source/ff.c **** 	}
 3361              		.loc 1 1543 7 view .LVU1127
 3362 0030 4546     		mov	r5, r8
 3363 0032 00E0     		b	.L235
 3364              	.LVL408:
 3365              	.L245:
1536:DRIVER/FatFs/source/ff.c **** 	}
 3366              		.loc 1 1536 44 view .LVU1128
 3367 0034 0125     		movs	r5, #1
 3368              	.LVL409:
 3369              	.L235:
1545:DRIVER/FatFs/source/ff.c **** 
 3370              		.loc 1 1545 2 is_stmt 1 view .LVU1129
1545:DRIVER/FatFs/source/ff.c **** 
 3371              		.loc 1 1545 8 is_stmt 0 view .LVU1130
 3372 0036 BB69     		ldr	r3, [r7, #24]
1545:DRIVER/FatFs/source/ff.c **** 
 3373              		.loc 1 1545 5 view .LVU1131
 3374 0038 002B     		cmp	r3, #0
 3375 003a 66D0     		beq	.L233
1574:DRIVER/FatFs/source/ff.c **** 		if (scl == clst) {						/* Stretching an existing chain? */
 3376              		.loc 1 1574 3 is_stmt 1 view .LVU1132
 3377              	.LVL410:
1575:DRIVER/FatFs/source/ff.c **** 			ncl = scl + 1;						/* Test if next cluster is free */
 3378              		.loc 1 1575 3 view .LVU1133
1575:DRIVER/FatFs/source/ff.c **** 			ncl = scl + 1;						/* Test if next cluster is free */
 3379              		.loc 1 1575 6 is_stmt 0 view .LVU1134
 3380 003c 4545     		cmp	r5, r8
 3381 003e 06D0     		beq	.L257
1574:DRIVER/FatFs/source/ff.c **** 		if (scl == clst) {						/* Stretching an existing chain? */
 3382              		.loc 1 1574 7 view .LVU1135
 3383 0040 4FF00009 		mov	r9, #0
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 138


 3384              	.LVL411:
 3385              	.L237:
1586:DRIVER/FatFs/source/ff.c **** 			ncl = scl;	/* Start cluster */
 3386              		.loc 1 1586 3 is_stmt 1 view .LVU1136
1586:DRIVER/FatFs/source/ff.c **** 			ncl = scl;	/* Start cluster */
 3387              		.loc 1 1586 6 is_stmt 0 view .LVU1137
 3388 0044 B9F1000F 		cmp	r9, #0
 3389 0048 3AD1     		bne	.L239
1587:DRIVER/FatFs/source/ff.c **** 			for (;;) {
 3390              		.loc 1 1587 8 view .LVU1138
 3391 004a 2C46     		mov	r4, r5
 3392 004c 2FE0     		b	.L241
 3393              	.LVL412:
 3394              	.L257:
1576:DRIVER/FatFs/source/ff.c **** 			if (ncl >= fs->n_fatent) ncl = 2;
 3395              		.loc 1 1576 4 is_stmt 1 view .LVU1139
1576:DRIVER/FatFs/source/ff.c **** 			if (ncl >= fs->n_fatent) ncl = 2;
 3396              		.loc 1 1576 8 is_stmt 0 view .LVU1140
 3397 004e 05F10109 		add	r9, r5, #1
 3398              	.LVL413:
1577:DRIVER/FatFs/source/ff.c **** 			cs = get_fat(obj, ncl);				/* Get next cluster status */
 3399              		.loc 1 1577 4 is_stmt 1 view .LVU1141
1577:DRIVER/FatFs/source/ff.c **** 			cs = get_fat(obj, ncl);				/* Get next cluster status */
 3400              		.loc 1 1577 17 is_stmt 0 view .LVU1142
 3401 0052 FB69     		ldr	r3, [r7, #28]
1577:DRIVER/FatFs/source/ff.c **** 			cs = get_fat(obj, ncl);				/* Get next cluster status */
 3402              		.loc 1 1577 7 view .LVU1143
 3403 0054 4B45     		cmp	r3, r9
 3404 0056 01D8     		bhi	.L238
1577:DRIVER/FatFs/source/ff.c **** 			cs = get_fat(obj, ncl);				/* Get next cluster status */
 3405              		.loc 1 1577 33 view .LVU1144
 3406 0058 4FF00209 		mov	r9, #2
 3407              	.LVL414:
 3408              	.L238:
1578:DRIVER/FatFs/source/ff.c **** 			if (cs == 1 || cs == 0xFFFFFFFF) return cs;	/* Test for error */
 3409              		.loc 1 1578 4 is_stmt 1 view .LVU1145
1578:DRIVER/FatFs/source/ff.c **** 			if (cs == 1 || cs == 0xFFFFFFFF) return cs;	/* Test for error */
 3410              		.loc 1 1578 9 is_stmt 0 view .LVU1146
 3411 005c 4946     		mov	r1, r9
 3412 005e 3046     		mov	r0, r6
 3413 0060 FFF7FEFF 		bl	get_fat
 3414              	.LVL415:
 3415 0064 0346     		mov	r3, r0
 3416              	.LVL416:
1579:DRIVER/FatFs/source/ff.c **** 			if (cs != 0) {						/* Not free? */
 3417              		.loc 1 1579 4 is_stmt 1 view .LVU1147
1579:DRIVER/FatFs/source/ff.c **** 			if (cs != 0) {						/* Not free? */
 3418              		.loc 1 1579 7 is_stmt 0 view .LVU1148
 3419 0066 0128     		cmp	r0, #1
 3420 0068 4FD0     		beq	.L233
1579:DRIVER/FatFs/source/ff.c **** 			if (cs != 0) {						/* Not free? */
 3421              		.loc 1 1579 16 discriminator 2 view .LVU1149
 3422 006a B0F1FF3F 		cmp	r0, #-1
 3423 006e 4CD0     		beq	.L233
1580:DRIVER/FatFs/source/ff.c **** 				cs = fs->last_clst;				/* Start at suggested cluster if it is valid */
 3424              		.loc 1 1580 4 is_stmt 1 view .LVU1150
1580:DRIVER/FatFs/source/ff.c **** 				cs = fs->last_clst;				/* Start at suggested cluster if it is valid */
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 139


 3425              		.loc 1 1580 7 is_stmt 0 view .LVU1151
 3426 0070 0028     		cmp	r0, #0
 3427 0072 E7D0     		beq	.L237
1581:DRIVER/FatFs/source/ff.c **** 				if (cs >= 2 && cs < fs->n_fatent) scl = cs;
 3428              		.loc 1 1581 5 is_stmt 1 view .LVU1152
1581:DRIVER/FatFs/source/ff.c **** 				if (cs >= 2 && cs < fs->n_fatent) scl = cs;
 3429              		.loc 1 1581 8 is_stmt 0 view .LVU1153
 3430 0074 7B69     		ldr	r3, [r7, #20]
 3431              	.LVL417:
1582:DRIVER/FatFs/source/ff.c **** 				ncl = 0;
 3432              		.loc 1 1582 5 is_stmt 1 view .LVU1154
1582:DRIVER/FatFs/source/ff.c **** 				ncl = 0;
 3433              		.loc 1 1582 8 is_stmt 0 view .LVU1155
 3434 0076 012B     		cmp	r3, #1
 3435 0078 05D9     		bls	.L250
1582:DRIVER/FatFs/source/ff.c **** 				ncl = 0;
 3436              		.loc 1 1582 27 discriminator 1 view .LVU1156
 3437 007a FA69     		ldr	r2, [r7, #28]
1582:DRIVER/FatFs/source/ff.c **** 				ncl = 0;
 3438              		.loc 1 1582 17 discriminator 1 view .LVU1157
 3439 007c 9A42     		cmp	r2, r3
 3440 007e 05D8     		bhi	.L251
1583:DRIVER/FatFs/source/ff.c **** 			}
 3441              		.loc 1 1583 9 view .LVU1158
 3442 0080 4FF00009 		mov	r9, #0
 3443              	.LVL418:
1583:DRIVER/FatFs/source/ff.c **** 			}
 3444              		.loc 1 1583 9 view .LVU1159
 3445 0084 DEE7     		b	.L237
 3446              	.LVL419:
 3447              	.L250:
1583:DRIVER/FatFs/source/ff.c **** 			}
 3448              		.loc 1 1583 9 view .LVU1160
 3449 0086 4FF00009 		mov	r9, #0
 3450              	.LVL420:
1583:DRIVER/FatFs/source/ff.c **** 			}
 3451              		.loc 1 1583 9 view .LVU1161
 3452 008a DBE7     		b	.L237
 3453              	.LVL421:
 3454              	.L251:
1582:DRIVER/FatFs/source/ff.c **** 				ncl = 0;
 3455              		.loc 1 1582 43 view .LVU1162
 3456 008c 1D46     		mov	r5, r3
 3457              	.LVL422:
1583:DRIVER/FatFs/source/ff.c **** 			}
 3458              		.loc 1 1583 9 view .LVU1163
 3459 008e 4FF00009 		mov	r9, #0
 3460              	.LVL423:
1583:DRIVER/FatFs/source/ff.c **** 			}
 3461              		.loc 1 1583 9 view .LVU1164
 3462 0092 D7E7     		b	.L237
 3463              	.LVL424:
 3464              	.L240:
1594:DRIVER/FatFs/source/ff.c **** 				if (cs == 0) break;				/* Found a free cluster? */
 3465              		.loc 1 1594 5 is_stmt 1 view .LVU1165
1594:DRIVER/FatFs/source/ff.c **** 				if (cs == 0) break;				/* Found a free cluster? */
 3466              		.loc 1 1594 10 is_stmt 0 view .LVU1166
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 140


 3467 0094 2146     		mov	r1, r4
 3468 0096 3046     		mov	r0, r6
 3469 0098 FFF7FEFF 		bl	get_fat
 3470              	.LVL425:
1595:DRIVER/FatFs/source/ff.c **** 				if (cs == 1 || cs == 0xFFFFFFFF) return cs;	/* Test for error */
 3471              		.loc 1 1595 5 is_stmt 1 view .LVU1167
1595:DRIVER/FatFs/source/ff.c **** 				if (cs == 1 || cs == 0xFFFFFFFF) return cs;	/* Test for error */
 3472              		.loc 1 1595 8 is_stmt 0 view .LVU1168
 3473 009c 0346     		mov	r3, r0
 3474 009e 70B1     		cbz	r0, .L253
1596:DRIVER/FatFs/source/ff.c **** 				if (ncl == scl) return 0;		/* No free cluster found? */
 3475              		.loc 1 1596 5 is_stmt 1 view .LVU1169
1596:DRIVER/FatFs/source/ff.c **** 				if (ncl == scl) return 0;		/* No free cluster found? */
 3476              		.loc 1 1596 8 is_stmt 0 view .LVU1170
 3477 00a0 0128     		cmp	r0, #1
 3478 00a2 32D0     		beq	.L233
1596:DRIVER/FatFs/source/ff.c **** 				if (ncl == scl) return 0;		/* No free cluster found? */
 3479              		.loc 1 1596 17 discriminator 2 view .LVU1171
 3480 00a4 B0F1FF3F 		cmp	r0, #-1
 3481 00a8 2FD0     		beq	.L233
1597:DRIVER/FatFs/source/ff.c **** 			}
 3482              		.loc 1 1597 5 is_stmt 1 view .LVU1172
1597:DRIVER/FatFs/source/ff.c **** 			}
 3483              		.loc 1 1597 8 is_stmt 0 view .LVU1173
 3484 00aa AC42     		cmp	r4, r5
 3485 00ac 37D0     		beq	.L258
 3486              	.LVL426:
 3487              	.L241:
1588:DRIVER/FatFs/source/ff.c **** 				ncl++;							/* Next cluster */
 3488              		.loc 1 1588 4 is_stmt 1 view .LVU1174
1589:DRIVER/FatFs/source/ff.c **** 				if (ncl >= fs->n_fatent) {		/* Check wrap-around */
 3489              		.loc 1 1589 5 view .LVU1175
1589:DRIVER/FatFs/source/ff.c **** 				if (ncl >= fs->n_fatent) {		/* Check wrap-around */
 3490              		.loc 1 1589 8 is_stmt 0 view .LVU1176
 3491 00ae 0134     		adds	r4, r4, #1
 3492              	.LVL427:
1590:DRIVER/FatFs/source/ff.c **** 					ncl = 2;
 3493              		.loc 1 1590 5 is_stmt 1 view .LVU1177
1590:DRIVER/FatFs/source/ff.c **** 					ncl = 2;
 3494              		.loc 1 1590 18 is_stmt 0 view .LVU1178
 3495 00b0 FB69     		ldr	r3, [r7, #28]
1590:DRIVER/FatFs/source/ff.c **** 					ncl = 2;
 3496              		.loc 1 1590 8 view .LVU1179
 3497 00b2 A342     		cmp	r3, r4
 3498 00b4 EED8     		bhi	.L240
1591:DRIVER/FatFs/source/ff.c **** 					if (ncl > scl) return 0;	/* No free cluster found? */
 3499              		.loc 1 1591 6 is_stmt 1 view .LVU1180
 3500              	.LVL428:
1592:DRIVER/FatFs/source/ff.c **** 				}
 3501              		.loc 1 1592 6 view .LVU1181
1592:DRIVER/FatFs/source/ff.c **** 				}
 3502              		.loc 1 1592 9 is_stmt 0 view .LVU1182
 3503 00b6 012D     		cmp	r5, #1
 3504 00b8 2FD9     		bls	.L252
1591:DRIVER/FatFs/source/ff.c **** 					if (ncl > scl) return 0;	/* No free cluster found? */
 3505              		.loc 1 1591 10 view .LVU1183
 3506 00ba 0224     		movs	r4, #2
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 141


 3507 00bc EAE7     		b	.L240
 3508              	.LVL429:
 3509              	.L253:
1591:DRIVER/FatFs/source/ff.c **** 					if (ncl > scl) return 0;	/* No free cluster found? */
 3510              		.loc 1 1591 10 view .LVU1184
 3511 00be A146     		mov	r9, r4
 3512              	.LVL430:
 3513              	.L239:
1600:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK && clst != 0) {
 3514              		.loc 1 1600 3 is_stmt 1 view .LVU1185
1600:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK && clst != 0) {
 3515              		.loc 1 1600 9 is_stmt 0 view .LVU1186
 3516 00c0 4FF0FF32 		mov	r2, #-1
 3517 00c4 4946     		mov	r1, r9
 3518 00c6 3846     		mov	r0, r7
 3519 00c8 FFF7FEFF 		bl	put_fat
 3520              	.LVL431:
1601:DRIVER/FatFs/source/ff.c **** 			res = put_fat(fs, clst, ncl);		/* Link it from the previous one if needed */
 3521              		.loc 1 1601 3 is_stmt 1 view .LVU1187
1601:DRIVER/FatFs/source/ff.c **** 			res = put_fat(fs, clst, ncl);		/* Link it from the previous one if needed */
 3522              		.loc 1 1601 6 is_stmt 0 view .LVU1188
 3523 00cc 0346     		mov	r3, r0
 3524 00ce C8B9     		cbnz	r0, .L242
1601:DRIVER/FatFs/source/ff.c **** 			res = put_fat(fs, clst, ncl);		/* Link it from the previous one if needed */
 3525              		.loc 1 1601 20 discriminator 1 view .LVU1189
 3526 00d0 B8F1000F 		cmp	r8, #0
 3527 00d4 0FD1     		bne	.L259
 3528              	.LVL432:
 3529              	.L243:
1606:DRIVER/FatFs/source/ff.c **** 		fs->last_clst = ncl;
 3530              		.loc 1 1606 2 is_stmt 1 view .LVU1190
1606:DRIVER/FatFs/source/ff.c **** 		fs->last_clst = ncl;
 3531              		.loc 1 1606 5 is_stmt 0 view .LVU1191
 3532 00d6 ABB9     		cbnz	r3, .L242
1607:DRIVER/FatFs/source/ff.c **** 		if (fs->free_clst <= fs->n_fatent - 2) fs->free_clst--;
 3533              		.loc 1 1607 3 is_stmt 1 view .LVU1192
1607:DRIVER/FatFs/source/ff.c **** 		if (fs->free_clst <= fs->n_fatent - 2) fs->free_clst--;
 3534              		.loc 1 1607 17 is_stmt 0 view .LVU1193
 3535 00d8 C7F81490 		str	r9, [r7, #20]
1608:DRIVER/FatFs/source/ff.c **** 		fs->fsi_flag |= 1;
 3536              		.loc 1 1608 3 is_stmt 1 view .LVU1194
1608:DRIVER/FatFs/source/ff.c **** 		fs->fsi_flag |= 1;
 3537              		.loc 1 1608 9 is_stmt 0 view .LVU1195
 3538 00dc BA69     		ldr	r2, [r7, #24]
1608:DRIVER/FatFs/source/ff.c **** 		fs->fsi_flag |= 1;
 3539              		.loc 1 1608 26 view .LVU1196
 3540 00de FB69     		ldr	r3, [r7, #28]
 3541              	.LVL433:
1608:DRIVER/FatFs/source/ff.c **** 		fs->fsi_flag |= 1;
 3542              		.loc 1 1608 37 view .LVU1197
 3543 00e0 023B     		subs	r3, r3, #2
1608:DRIVER/FatFs/source/ff.c **** 		fs->fsi_flag |= 1;
 3544              		.loc 1 1608 6 view .LVU1198
 3545 00e2 9A42     		cmp	r2, r3
 3546 00e4 01D8     		bhi	.L244
1608:DRIVER/FatFs/source/ff.c **** 		fs->fsi_flag |= 1;
 3547              		.loc 1 1608 42 is_stmt 1 discriminator 1 view .LVU1199
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 142


1608:DRIVER/FatFs/source/ff.c **** 		fs->fsi_flag |= 1;
 3548              		.loc 1 1608 55 is_stmt 0 discriminator 1 view .LVU1200
 3549 00e6 013A     		subs	r2, r2, #1
 3550 00e8 BA61     		str	r2, [r7, #24]
 3551              	.L244:
1609:DRIVER/FatFs/source/ff.c **** 	} else {
 3552              		.loc 1 1609 3 is_stmt 1 view .LVU1201
1609:DRIVER/FatFs/source/ff.c **** 	} else {
 3553              		.loc 1 1609 5 is_stmt 0 view .LVU1202
 3554 00ea 7B79     		ldrb	r3, [r7, #5]	@ zero_extendqisi2
1609:DRIVER/FatFs/source/ff.c **** 	} else {
 3555              		.loc 1 1609 16 view .LVU1203
 3556 00ec 43F00103 		orr	r3, r3, #1
 3557 00f0 7B71     		strb	r3, [r7, #5]
 3558 00f2 4B46     		mov	r3, r9
 3559 00f4 09E0     		b	.L233
 3560              	.LVL434:
 3561              	.L259:
1602:DRIVER/FatFs/source/ff.c **** 		}
 3562              		.loc 1 1602 4 is_stmt 1 view .LVU1204
1602:DRIVER/FatFs/source/ff.c **** 		}
 3563              		.loc 1 1602 10 is_stmt 0 view .LVU1205
 3564 00f6 4A46     		mov	r2, r9
 3565 00f8 4146     		mov	r1, r8
 3566 00fa 3846     		mov	r0, r7
 3567              	.LVL435:
1602:DRIVER/FatFs/source/ff.c **** 		}
 3568              		.loc 1 1602 10 view .LVU1206
 3569 00fc FFF7FEFF 		bl	put_fat
 3570              	.LVL436:
 3571 0100 0346     		mov	r3, r0
 3572              	.LVL437:
1602:DRIVER/FatFs/source/ff.c **** 		}
 3573              		.loc 1 1602 10 view .LVU1207
 3574 0102 E8E7     		b	.L243
 3575              	.LVL438:
 3576              	.L242:
1611:DRIVER/FatFs/source/ff.c **** 	}
 3577              		.loc 1 1611 3 is_stmt 1 view .LVU1208
1611:DRIVER/FatFs/source/ff.c **** 	}
 3578              		.loc 1 1611 43 is_stmt 0 view .LVU1209
 3579 0104 012B     		cmp	r3, #1
 3580 0106 03D0     		beq	.L260
 3581 0108 0123     		movs	r3, #1
 3582              	.LVL439:
 3583              	.L233:
1615:DRIVER/FatFs/source/ff.c **** 
 3584              		.loc 1 1615 1 view .LVU1210
 3585 010a 1846     		mov	r0, r3
 3586 010c BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 3587              	.LVL440:
 3588              	.L260:
1611:DRIVER/FatFs/source/ff.c **** 	}
 3589              		.loc 1 1611 43 view .LVU1211
 3590 0110 4FF0FF33 		mov	r3, #-1
 3591 0114 F9E7     		b	.L233
 3592              	.LVL441:
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 143


 3593              	.L247:
1540:DRIVER/FatFs/source/ff.c **** 		if (cs == 0xFFFFFFFF) return cs;	/* Test for disk error */
 3594              		.loc 1 1540 22 view .LVU1212
 3595 0116 0123     		movs	r3, #1
 3596 0118 F7E7     		b	.L233
 3597              	.LVL442:
 3598              	.L252:
1592:DRIVER/FatFs/source/ff.c **** 				}
 3599              		.loc 1 1592 28 view .LVU1213
 3600 011a 4B46     		mov	r3, r9
 3601 011c F5E7     		b	.L233
 3602              	.LVL443:
 3603              	.L258:
1597:DRIVER/FatFs/source/ff.c **** 			}
 3604              		.loc 1 1597 28 view .LVU1214
 3605 011e 4B46     		mov	r3, r9
 3606 0120 F3E7     		b	.L233
 3607              		.cfi_endproc
 3608              	.LFE15:
 3610              		.section	.text.remove_chain,"ax",%progbits
 3611              		.align	1
 3612              		.syntax unified
 3613              		.thumb
 3614              		.thumb_func
 3616              	remove_chain:
 3617              	.LVL444:
 3618              	.LFB14:
1434:DRIVER/FatFs/source/ff.c **** 	FRESULT res = FR_OK;
 3619              		.loc 1 1434 1 is_stmt 1 view -0
 3620              		.cfi_startproc
 3621              		@ args = 0, pretend = 0, frame = 0
 3622              		@ frame_needed = 0, uses_anonymous_args = 0
1434:DRIVER/FatFs/source/ff.c **** 	FRESULT res = FR_OK;
 3623              		.loc 1 1434 1 is_stmt 0 view .LVU1216
 3624 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 3625              	.LCFI20:
 3626              		.cfi_def_cfa_offset 24
 3627              		.cfi_offset 3, -24
 3628              		.cfi_offset 4, -20
 3629              		.cfi_offset 5, -16
 3630              		.cfi_offset 6, -12
 3631              		.cfi_offset 7, -8
 3632              		.cfi_offset 14, -4
 3633 0002 0C46     		mov	r4, r1
1435:DRIVER/FatFs/source/ff.c **** 	DWORD nxt;
 3634              		.loc 1 1435 2 is_stmt 1 view .LVU1217
 3635              	.LVL445:
1436:DRIVER/FatFs/source/ff.c **** 	FATFS *fs = obj->fs;
 3636              		.loc 1 1436 2 view .LVU1218
1437:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT || FF_USE_TRIM
 3637              		.loc 1 1437 2 view .LVU1219
1437:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT || FF_USE_TRIM
 3638              		.loc 1 1437 9 is_stmt 0 view .LVU1220
 3639 0004 0568     		ldr	r5, [r0]
 3640              	.LVL446:
1445:DRIVER/FatFs/source/ff.c **** 
 3641              		.loc 1 1445 2 is_stmt 1 view .LVU1221
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 144


1445:DRIVER/FatFs/source/ff.c **** 
 3642              		.loc 1 1445 5 is_stmt 0 view .LVU1222
 3643 0006 0129     		cmp	r1, #1
 3644 0008 2ED9     		bls	.L266
 3645 000a 0646     		mov	r6, r0
 3646 000c 1146     		mov	r1, r2
 3647              	.LVL447:
1445:DRIVER/FatFs/source/ff.c **** 
 3648              		.loc 1 1445 28 discriminator 2 view .LVU1223
 3649 000e EB69     		ldr	r3, [r5, #28]
1445:DRIVER/FatFs/source/ff.c **** 
 3650              		.loc 1 1445 15 discriminator 2 view .LVU1224
 3651 0010 A342     		cmp	r3, r4
 3652 0012 2BD9     		bls	.L267
1448:DRIVER/FatFs/source/ff.c **** 		res = put_fat(fs, pclst, 0xFFFFFFFF);
 3653              		.loc 1 1448 2 is_stmt 1 view .LVU1225
1448:DRIVER/FatFs/source/ff.c **** 		res = put_fat(fs, pclst, 0xFFFFFFFF);
 3654              		.loc 1 1448 5 is_stmt 0 view .LVU1226
 3655 0014 4AB1     		cbz	r2, .L265
1449:DRIVER/FatFs/source/ff.c **** 		if (res != FR_OK) return res;
 3656              		.loc 1 1449 3 is_stmt 1 view .LVU1227
1449:DRIVER/FatFs/source/ff.c **** 		if (res != FR_OK) return res;
 3657              		.loc 1 1449 9 is_stmt 0 view .LVU1228
 3658 0016 4FF0FF32 		mov	r2, #-1
 3659              	.LVL448:
1449:DRIVER/FatFs/source/ff.c **** 		if (res != FR_OK) return res;
 3660              		.loc 1 1449 9 view .LVU1229
 3661 001a 2846     		mov	r0, r5
 3662              	.LVL449:
1449:DRIVER/FatFs/source/ff.c **** 		if (res != FR_OK) return res;
 3663              		.loc 1 1449 9 view .LVU1230
 3664 001c FFF7FEFF 		bl	put_fat
 3665              	.LVL450:
1450:DRIVER/FatFs/source/ff.c **** 	}
 3666              		.loc 1 1450 3 is_stmt 1 view .LVU1231
1450:DRIVER/FatFs/source/ff.c **** 	}
 3667              		.loc 1 1450 6 is_stmt 0 view .LVU1232
 3668 0020 0746     		mov	r7, r0
 3669 0022 10B1     		cbz	r0, .L265
 3670 0024 23E0     		b	.L262
 3671              	.LVL451:
 3672              	.L264:
1485:DRIVER/FatFs/source/ff.c **** 	} while (clst < fs->n_fatent);	/* Repeat while not the last link */
 3673              		.loc 1 1485 3 is_stmt 1 view .LVU1233
1486:DRIVER/FatFs/source/ff.c **** 
 3674              		.loc 1 1486 16 view .LVU1234
 3675 0026 A242     		cmp	r2, r4
 3676 0028 21D9     		bls	.L262
 3677              	.LVL452:
 3678              	.L265:
1454:DRIVER/FatFs/source/ff.c **** 		nxt = get_fat(obj, clst);			/* Get cluster status */
 3679              		.loc 1 1454 2 view .LVU1235
1455:DRIVER/FatFs/source/ff.c **** 		if (nxt == 0) break;				/* Empty cluster? */
 3680              		.loc 1 1455 3 view .LVU1236
 3681 002a 2746     		mov	r7, r4
1455:DRIVER/FatFs/source/ff.c **** 		if (nxt == 0) break;				/* Empty cluster? */
 3682              		.loc 1 1455 9 is_stmt 0 view .LVU1237
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 145


 3683 002c 2146     		mov	r1, r4
 3684 002e 3046     		mov	r0, r6
 3685 0030 FFF7FEFF 		bl	get_fat
 3686              	.LVL453:
1456:DRIVER/FatFs/source/ff.c **** 		if (nxt == 1) return FR_INT_ERR;	/* Internal error? */
 3687              		.loc 1 1456 3 is_stmt 1 view .LVU1238
1456:DRIVER/FatFs/source/ff.c **** 		if (nxt == 1) return FR_INT_ERR;	/* Internal error? */
 3688              		.loc 1 1456 6 is_stmt 0 view .LVU1239
 3689 0034 0446     		mov	r4, r0
 3690              	.LVL454:
1456:DRIVER/FatFs/source/ff.c **** 		if (nxt == 1) return FR_INT_ERR;	/* Internal error? */
 3691              		.loc 1 1456 6 view .LVU1240
 3692 0036 E0B1     		cbz	r0, .L268
1457:DRIVER/FatFs/source/ff.c **** 		if (nxt == 0xFFFFFFFF) return FR_DISK_ERR;	/* Disk error? */
 3693              		.loc 1 1457 3 is_stmt 1 view .LVU1241
1457:DRIVER/FatFs/source/ff.c **** 		if (nxt == 0xFFFFFFFF) return FR_DISK_ERR;	/* Disk error? */
 3694              		.loc 1 1457 6 is_stmt 0 view .LVU1242
 3695 0038 0128     		cmp	r0, #1
 3696 003a 1CD0     		beq	.L269
1458:DRIVER/FatFs/source/ff.c **** 		if (!FF_FS_EXFAT || fs->fs_type != FS_EXFAT) {
 3697              		.loc 1 1458 3 is_stmt 1 view .LVU1243
1458:DRIVER/FatFs/source/ff.c **** 		if (!FF_FS_EXFAT || fs->fs_type != FS_EXFAT) {
 3698              		.loc 1 1458 6 is_stmt 0 view .LVU1244
 3699 003c B0F1FF3F 		cmp	r0, #-1
 3700 0040 1BD0     		beq	.L270
1459:DRIVER/FatFs/source/ff.c **** 			res = put_fat(fs, clst, 0);		/* Mark the cluster 'free' on the FAT */
 3701              		.loc 1 1459 3 is_stmt 1 view .LVU1245
1460:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) return res;
 3702              		.loc 1 1460 4 view .LVU1246
1460:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) return res;
 3703              		.loc 1 1460 10 is_stmt 0 view .LVU1247
 3704 0042 0022     		movs	r2, #0
 3705 0044 3946     		mov	r1, r7
 3706 0046 2846     		mov	r0, r5
 3707              	.LVL455:
1460:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) return res;
 3708              		.loc 1 1460 10 view .LVU1248
 3709 0048 FFF7FEFF 		bl	put_fat
 3710              	.LVL456:
1461:DRIVER/FatFs/source/ff.c **** 		}
 3711              		.loc 1 1461 4 is_stmt 1 view .LVU1249
1461:DRIVER/FatFs/source/ff.c **** 		}
 3712              		.loc 1 1461 7 is_stmt 0 view .LVU1250
 3713 004c 0746     		mov	r7, r0
 3714              	.LVL457:
1461:DRIVER/FatFs/source/ff.c **** 		}
 3715              		.loc 1 1461 7 view .LVU1251
 3716 004e 70B9     		cbnz	r0, .L262
1463:DRIVER/FatFs/source/ff.c **** 			fs->free_clst++;
 3717              		.loc 1 1463 3 is_stmt 1 view .LVU1252
1463:DRIVER/FatFs/source/ff.c **** 			fs->free_clst++;
 3718              		.loc 1 1463 9 is_stmt 0 view .LVU1253
 3719 0050 AB69     		ldr	r3, [r5, #24]
1463:DRIVER/FatFs/source/ff.c **** 			fs->free_clst++;
 3720              		.loc 1 1463 25 view .LVU1254
 3721 0052 EA69     		ldr	r2, [r5, #28]
1463:DRIVER/FatFs/source/ff.c **** 			fs->free_clst++;
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 146


 3722              		.loc 1 1463 36 view .LVU1255
 3723 0054 911E     		subs	r1, r2, #2
1463:DRIVER/FatFs/source/ff.c **** 			fs->free_clst++;
 3724              		.loc 1 1463 6 view .LVU1256
 3725 0056 8B42     		cmp	r3, r1
 3726 0058 E5D2     		bcs	.L264
1464:DRIVER/FatFs/source/ff.c **** 			fs->fsi_flag |= 1;
 3727              		.loc 1 1464 4 is_stmt 1 view .LVU1257
1464:DRIVER/FatFs/source/ff.c **** 			fs->fsi_flag |= 1;
 3728              		.loc 1 1464 17 is_stmt 0 view .LVU1258
 3729 005a 0133     		adds	r3, r3, #1
 3730 005c AB61     		str	r3, [r5, #24]
1465:DRIVER/FatFs/source/ff.c **** 		}
 3731              		.loc 1 1465 4 is_stmt 1 view .LVU1259
1465:DRIVER/FatFs/source/ff.c **** 		}
 3732              		.loc 1 1465 6 is_stmt 0 view .LVU1260
 3733 005e 6B79     		ldrb	r3, [r5, #5]	@ zero_extendqisi2
1465:DRIVER/FatFs/source/ff.c **** 		}
 3734              		.loc 1 1465 17 view .LVU1261
 3735 0060 43F00103 		orr	r3, r3, #1
 3736 0064 6B71     		strb	r3, [r5, #5]
 3737 0066 DEE7     		b	.L264
 3738              	.LVL458:
 3739              	.L266:
1445:DRIVER/FatFs/source/ff.c **** 
 3740              		.loc 1 1445 47 view .LVU1262
 3741 0068 0227     		movs	r7, #2
 3742 006a 00E0     		b	.L262
 3743              	.LVL459:
 3744              	.L267:
1445:DRIVER/FatFs/source/ff.c **** 
 3745              		.loc 1 1445 47 view .LVU1263
 3746 006c 0227     		movs	r7, #2
 3747              	.LVL460:
 3748              	.L262:
1515:DRIVER/FatFs/source/ff.c **** 
 3749              		.loc 1 1515 1 view .LVU1264
 3750 006e 3846     		mov	r0, r7
 3751 0070 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 3752              	.LVL461:
 3753              	.L268:
1514:DRIVER/FatFs/source/ff.c **** }
 3754              		.loc 1 1514 9 view .LVU1265
 3755 0072 0027     		movs	r7, #0
 3756              	.LVL462:
1514:DRIVER/FatFs/source/ff.c **** }
 3757              		.loc 1 1514 9 view .LVU1266
 3758 0074 FBE7     		b	.L262
 3759              	.LVL463:
 3760              	.L269:
1457:DRIVER/FatFs/source/ff.c **** 		if (nxt == 0xFFFFFFFF) return FR_DISK_ERR;	/* Disk error? */
 3761              		.loc 1 1457 24 view .LVU1267
 3762 0076 0227     		movs	r7, #2
 3763              	.LVL464:
1457:DRIVER/FatFs/source/ff.c **** 		if (nxt == 0xFFFFFFFF) return FR_DISK_ERR;	/* Disk error? */
 3764              		.loc 1 1457 24 view .LVU1268
 3765 0078 F9E7     		b	.L262
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 147


 3766              	.LVL465:
 3767              	.L270:
1458:DRIVER/FatFs/source/ff.c **** 		if (!FF_FS_EXFAT || fs->fs_type != FS_EXFAT) {
 3768              		.loc 1 1458 33 view .LVU1269
 3769 007a 0127     		movs	r7, #1
 3770              	.LVL466:
1458:DRIVER/FatFs/source/ff.c **** 		if (!FF_FS_EXFAT || fs->fs_type != FS_EXFAT) {
 3771              		.loc 1 1458 33 view .LVU1270
 3772 007c F7E7     		b	.L262
 3773              		.cfi_endproc
 3774              	.LFE14:
 3776              		.section	.text.dir_clear,"ax",%progbits
 3777              		.align	1
 3778              		.syntax unified
 3779              		.thumb
 3780              		.thumb_func
 3782              	dir_clear:
 3783              	.LVL467:
 3784              	.LFB16:
1662:DRIVER/FatFs/source/ff.c **** 	LBA_t sect;
 3785              		.loc 1 1662 1 is_stmt 1 view -0
 3786              		.cfi_startproc
 3787              		@ args = 0, pretend = 0, frame = 0
 3788              		@ frame_needed = 0, uses_anonymous_args = 0
1662:DRIVER/FatFs/source/ff.c **** 	LBA_t sect;
 3789              		.loc 1 1662 1 is_stmt 0 view .LVU1272
 3790 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 3791              	.LCFI21:
 3792              		.cfi_def_cfa_offset 24
 3793              		.cfi_offset 3, -24
 3794              		.cfi_offset 4, -20
 3795              		.cfi_offset 5, -16
 3796              		.cfi_offset 6, -12
 3797              		.cfi_offset 7, -8
 3798              		.cfi_offset 14, -4
 3799 0002 0546     		mov	r5, r0
 3800 0004 0C46     		mov	r4, r1
1663:DRIVER/FatFs/source/ff.c **** 	UINT n, szb;
 3801              		.loc 1 1663 2 is_stmt 1 view .LVU1273
1664:DRIVER/FatFs/source/ff.c **** 	BYTE *ibuf;
 3802              		.loc 1 1664 2 view .LVU1274
1665:DRIVER/FatFs/source/ff.c **** 
 3803              		.loc 1 1665 2 view .LVU1275
1668:DRIVER/FatFs/source/ff.c **** 	sect = clst2sect(fs, clst);		/* Top of the cluster */
 3804              		.loc 1 1668 2 view .LVU1276
1668:DRIVER/FatFs/source/ff.c **** 	sect = clst2sect(fs, clst);		/* Top of the cluster */
 3805              		.loc 1 1668 6 is_stmt 0 view .LVU1277
 3806 0006 FFF7FEFF 		bl	sync_window
 3807              	.LVL468:
1668:DRIVER/FatFs/source/ff.c **** 	sect = clst2sect(fs, clst);		/* Top of the cluster */
 3808              		.loc 1 1668 5 view .LVU1278
 3809 000a 08B1     		cbz	r0, .L279
1668:DRIVER/FatFs/source/ff.c **** 	sect = clst2sect(fs, clst);		/* Top of the cluster */
 3810              		.loc 1 1668 39 view .LVU1279
 3811 000c 0120     		movs	r0, #1
 3812              	.LVL469:
 3813              	.L273:
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 148


1687:DRIVER/FatFs/source/ff.c **** #endif	/* !FF_FS_READONLY */
 3814              		.loc 1 1687 1 view .LVU1280
 3815 000e F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 3816              	.LVL470:
 3817              	.L279:
1669:DRIVER/FatFs/source/ff.c **** 	fs->winsect = sect;				/* Set window to top of the cluster */
 3818              		.loc 1 1669 2 is_stmt 1 view .LVU1281
1669:DRIVER/FatFs/source/ff.c **** 	fs->winsect = sect;				/* Set window to top of the cluster */
 3819              		.loc 1 1669 9 is_stmt 0 view .LVU1282
 3820 0010 2146     		mov	r1, r4
 3821 0012 2846     		mov	r0, r5
 3822 0014 FFF7FEFF 		bl	clst2sect
 3823              	.LVL471:
 3824 0018 0646     		mov	r6, r0
 3825              	.LVL472:
1670:DRIVER/FatFs/source/ff.c **** 	memset(fs->win, 0, sizeof fs->win);	/* Clear window buffer */
 3826              		.loc 1 1670 2 is_stmt 1 view .LVU1283
1670:DRIVER/FatFs/source/ff.c **** 	memset(fs->win, 0, sizeof fs->win);	/* Clear window buffer */
 3827              		.loc 1 1670 14 is_stmt 0 view .LVU1284
 3828 001a 6863     		str	r0, [r5, #52]
1671:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN == 3		/* Quick table clear by using multi-secter write */
 3829              		.loc 1 1671 2 is_stmt 1 view .LVU1285
1671:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN == 3		/* Quick table clear by using multi-secter write */
 3830              		.loc 1 1671 11 is_stmt 0 view .LVU1286
 3831 001c 05F13807 		add	r7, r5, #56
1671:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN == 3		/* Quick table clear by using multi-secter write */
 3832              		.loc 1 1671 2 view .LVU1287
 3833 0020 4FF48052 		mov	r2, #4096
 3834 0024 0021     		movs	r1, #0
 3835 0026 3846     		mov	r0, r7
 3836              	.LVL473:
1671:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN == 3		/* Quick table clear by using multi-secter write */
 3837              		.loc 1 1671 2 view .LVU1288
 3838 0028 FFF7FEFF 		bl	memset
 3839              	.LVL474:
1683:DRIVER/FatFs/source/ff.c **** 		for (n = 0; n < fs->csize && disk_write(fs->pdrv, ibuf, sect + n, szb) == RES_OK; n += szb) ;	/* 
 3840              		.loc 1 1683 3 is_stmt 1 view .LVU1289
1683:DRIVER/FatFs/source/ff.c **** 		for (n = 0; n < fs->csize && disk_write(fs->pdrv, ibuf, sect + n, szb) == RES_OK; n += szb) ;	/* 
 3841              		.loc 1 1683 19 view .LVU1290
1684:DRIVER/FatFs/source/ff.c **** 	}
 3842              		.loc 1 1684 3 view .LVU1291
1684:DRIVER/FatFs/source/ff.c **** 	}
 3843              		.loc 1 1684 10 is_stmt 0 view .LVU1292
 3844 002c 0024     		movs	r4, #0
 3845              	.LVL475:
1684:DRIVER/FatFs/source/ff.c **** 	}
 3846              		.loc 1 1684 3 view .LVU1293
 3847 002e 00E0     		b	.L274
 3848              	.LVL476:
 3849              	.L276:
1684:DRIVER/FatFs/source/ff.c **** 	}
 3850              		.loc 1 1684 87 is_stmt 1 discriminator 4 view .LVU1294
 3851 0030 0134     		adds	r4, r4, #1
 3852              	.LVL477:
 3853              	.L274:
1684:DRIVER/FatFs/source/ff.c **** 	}
 3854              		.loc 1 1684 29 discriminator 1 view .LVU1295
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 149


1684:DRIVER/FatFs/source/ff.c **** 	}
 3855              		.loc 1 1684 21 is_stmt 0 discriminator 1 view .LVU1296
 3856 0032 6B89     		ldrh	r3, [r5, #10]
1684:DRIVER/FatFs/source/ff.c **** 	}
 3857              		.loc 1 1684 29 discriminator 1 view .LVU1297
 3858 0034 A342     		cmp	r3, r4
 3859 0036 07D9     		bls	.L275
1684:DRIVER/FatFs/source/ff.c **** 	}
 3860              		.loc 1 1684 32 discriminator 3 view .LVU1298
 3861 0038 0123     		movs	r3, #1
 3862 003a A219     		adds	r2, r4, r6
 3863 003c 3946     		mov	r1, r7
 3864 003e 6878     		ldrb	r0, [r5, #1]	@ zero_extendqisi2
 3865 0040 FFF7FEFF 		bl	disk_write
 3866              	.LVL478:
1684:DRIVER/FatFs/source/ff.c **** 	}
 3867              		.loc 1 1684 29 discriminator 3 view .LVU1299
 3868 0044 0028     		cmp	r0, #0
 3869 0046 F3D0     		beq	.L276
 3870              	.L275:
1686:DRIVER/FatFs/source/ff.c **** }
 3871              		.loc 1 1686 2 is_stmt 1 view .LVU1300
1686:DRIVER/FatFs/source/ff.c **** }
 3872              		.loc 1 1686 17 is_stmt 0 view .LVU1301
 3873 0048 6889     		ldrh	r0, [r5, #10]
1686:DRIVER/FatFs/source/ff.c **** }
 3874              		.loc 1 1686 34 view .LVU1302
 3875 004a 001B     		subs	r0, r0, r4
 3876 004c 18BF     		it	ne
 3877 004e 0120     		movne	r0, #1
 3878 0050 DDE7     		b	.L273
 3879              		.cfi_endproc
 3880              	.LFE16:
 3882              		.section	.text.dir_next,"ax",%progbits
 3883              		.align	1
 3884              		.syntax unified
 3885              		.thumb
 3886              		.thumb_func
 3888              	dir_next:
 3889              	.LVL479:
 3890              	.LFB18:
1749:DRIVER/FatFs/source/ff.c **** 	DWORD ofs, clst;
 3891              		.loc 1 1749 1 is_stmt 1 view -0
 3892              		.cfi_startproc
 3893              		@ args = 0, pretend = 0, frame = 0
 3894              		@ frame_needed = 0, uses_anonymous_args = 0
1749:DRIVER/FatFs/source/ff.c **** 	DWORD ofs, clst;
 3895              		.loc 1 1749 1 is_stmt 0 view .LVU1304
 3896 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 3897              	.LCFI22:
 3898              		.cfi_def_cfa_offset 24
 3899              		.cfi_offset 4, -24
 3900              		.cfi_offset 5, -20
 3901              		.cfi_offset 6, -16
 3902              		.cfi_offset 7, -12
 3903              		.cfi_offset 8, -8
 3904              		.cfi_offset 14, -4
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 150


 3905 0004 0546     		mov	r5, r0
 3906 0006 0F46     		mov	r7, r1
1750:DRIVER/FatFs/source/ff.c **** 	FATFS *fs = dp->obj.fs;
 3907              		.loc 1 1750 2 is_stmt 1 view .LVU1305
1751:DRIVER/FatFs/source/ff.c **** 
 3908              		.loc 1 1751 2 view .LVU1306
1751:DRIVER/FatFs/source/ff.c **** 
 3909              		.loc 1 1751 9 is_stmt 0 view .LVU1307
 3910 0008 0668     		ldr	r6, [r0]
 3911              	.LVL480:
1754:DRIVER/FatFs/source/ff.c **** 	if (ofs >= (DWORD)((FF_FS_EXFAT && fs->fs_type == FS_EXFAT) ? MAX_DIR_EX : MAX_DIR)) dp->sect = 0;
 3912              		.loc 1 1754 2 is_stmt 1 view .LVU1308
1754:DRIVER/FatFs/source/ff.c **** 	if (ofs >= (DWORD)((FF_FS_EXFAT && fs->fs_type == FS_EXFAT) ? MAX_DIR_EX : MAX_DIR)) dp->sect = 0;
 3913              		.loc 1 1754 10 is_stmt 0 view .LVU1309
 3914 000a 0469     		ldr	r4, [r0, #16]
1754:DRIVER/FatFs/source/ff.c **** 	if (ofs >= (DWORD)((FF_FS_EXFAT && fs->fs_type == FS_EXFAT) ? MAX_DIR_EX : MAX_DIR)) dp->sect = 0;
 3915              		.loc 1 1754 6 view .LVU1310
 3916 000c 2034     		adds	r4, r4, #32
 3917              	.LVL481:
1755:DRIVER/FatFs/source/ff.c **** 	if (dp->sect == 0) return FR_NO_FILE;	/* Report EOT if it has been disabled */
 3918              		.loc 1 1755 2 is_stmt 1 view .LVU1311
1755:DRIVER/FatFs/source/ff.c **** 	if (dp->sect == 0) return FR_NO_FILE;	/* Report EOT if it has been disabled */
 3919              		.loc 1 1755 5 is_stmt 0 view .LVU1312
 3920 000e B4F5001F 		cmp	r4, #2097152
 3921 0012 01D3     		bcc	.L281
1755:DRIVER/FatFs/source/ff.c **** 	if (dp->sect == 0) return FR_NO_FILE;	/* Report EOT if it has been disabled */
 3922              		.loc 1 1755 87 is_stmt 1 discriminator 1 view .LVU1313
1755:DRIVER/FatFs/source/ff.c **** 	if (dp->sect == 0) return FR_NO_FILE;	/* Report EOT if it has been disabled */
 3923              		.loc 1 1755 96 is_stmt 0 discriminator 1 view .LVU1314
 3924 0014 0023     		movs	r3, #0
 3925 0016 8361     		str	r3, [r0, #24]
 3926              	.L281:
1756:DRIVER/FatFs/source/ff.c **** 
 3927              		.loc 1 1756 2 is_stmt 1 view .LVU1315
1756:DRIVER/FatFs/source/ff.c **** 
 3928              		.loc 1 1756 8 is_stmt 0 view .LVU1316
 3929 0018 AB69     		ldr	r3, [r5, #24]
1756:DRIVER/FatFs/source/ff.c **** 
 3930              		.loc 1 1756 5 view .LVU1317
 3931 001a 002B     		cmp	r3, #0
 3932 001c 4ED0     		beq	.L287
1758:DRIVER/FatFs/source/ff.c **** 		dp->sect++;				/* Next sector */
 3933              		.loc 1 1758 2 is_stmt 1 view .LVU1318
1758:DRIVER/FatFs/source/ff.c **** 		dp->sect++;				/* Next sector */
 3934              		.loc 1 1758 12 is_stmt 0 view .LVU1319
 3935 001e B189     		ldrh	r1, [r6, #12]
 3936              	.LVL482:
1758:DRIVER/FatFs/source/ff.c **** 		dp->sect++;				/* Next sector */
 3937              		.loc 1 1758 10 view .LVU1320
 3938 0020 B4FBF1F2 		udiv	r2, r4, r1
 3939 0024 01FB1242 		mls	r2, r1, r2, r4
1758:DRIVER/FatFs/source/ff.c **** 		dp->sect++;				/* Next sector */
 3940              		.loc 1 1758 5 view .LVU1321
 3941 0028 3AB9     		cbnz	r2, .L283
1759:DRIVER/FatFs/source/ff.c **** 
 3942              		.loc 1 1759 3 is_stmt 1 view .LVU1322
1759:DRIVER/FatFs/source/ff.c **** 
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 151


 3943              		.loc 1 1759 11 is_stmt 0 view .LVU1323
 3944 002a 0133     		adds	r3, r3, #1
 3945 002c AB61     		str	r3, [r5, #24]
1761:DRIVER/FatFs/source/ff.c **** 			if (ofs / SZDIRE >= fs->n_rootdir) {	/* Report EOT if it reached end of static table */
 3946              		.loc 1 1761 3 is_stmt 1 view .LVU1324
1761:DRIVER/FatFs/source/ff.c **** 			if (ofs / SZDIRE >= fs->n_rootdir) {	/* Report EOT if it reached end of static table */
 3947              		.loc 1 1761 9 is_stmt 0 view .LVU1325
 3948 002e 6969     		ldr	r1, [r5, #20]
1761:DRIVER/FatFs/source/ff.c **** 			if (ofs / SZDIRE >= fs->n_rootdir) {	/* Report EOT if it reached end of static table */
 3949              		.loc 1 1761 6 view .LVU1326
 3950 0030 A1B9     		cbnz	r1, .L284
1762:DRIVER/FatFs/source/ff.c **** 				dp->sect = 0; return FR_NO_FILE;
 3951              		.loc 1 1762 4 is_stmt 1 view .LVU1327
1762:DRIVER/FatFs/source/ff.c **** 				dp->sect = 0; return FR_NO_FILE;
 3952              		.loc 1 1762 26 is_stmt 0 view .LVU1328
 3953 0032 3389     		ldrh	r3, [r6, #8]
1762:DRIVER/FatFs/source/ff.c **** 				dp->sect = 0; return FR_NO_FILE;
 3954              		.loc 1 1762 7 view .LVU1329
 3955 0034 B3EB541F 		cmp	r3, r4, lsr #5
 3956 0038 0CD9     		bls	.L295
 3957              	.LVL483:
 3958              	.L283:
1792:DRIVER/FatFs/source/ff.c **** 	dp->dir = fs->win + ofs % SS(fs);	/* Pointer to the entry in the win[] */
 3959              		.loc 1 1792 2 is_stmt 1 view .LVU1330
1792:DRIVER/FatFs/source/ff.c **** 	dp->dir = fs->win + ofs % SS(fs);	/* Pointer to the entry in the win[] */
 3960              		.loc 1 1792 11 is_stmt 0 view .LVU1331
 3961 003a 2C61     		str	r4, [r5, #16]
1793:DRIVER/FatFs/source/ff.c **** 
 3962              		.loc 1 1793 2 is_stmt 1 view .LVU1332
1793:DRIVER/FatFs/source/ff.c **** 
 3963              		.loc 1 1793 12 is_stmt 0 view .LVU1333
 3964 003c 06F13803 		add	r3, r6, #56
1793:DRIVER/FatFs/source/ff.c **** 
 3965              		.loc 1 1793 28 view .LVU1334
 3966 0040 B289     		ldrh	r2, [r6, #12]
1793:DRIVER/FatFs/source/ff.c **** 
 3967              		.loc 1 1793 26 view .LVU1335
 3968 0042 B4FBF2F1 		udiv	r1, r4, r2
 3969 0046 02FB1144 		mls	r4, r2, r1, r4
 3970              	.LVL484:
1793:DRIVER/FatFs/source/ff.c **** 
 3971              		.loc 1 1793 20 view .LVU1336
 3972 004a 2344     		add	r3, r3, r4
1793:DRIVER/FatFs/source/ff.c **** 
 3973              		.loc 1 1793 10 view .LVU1337
 3974 004c EB61     		str	r3, [r5, #28]
1795:DRIVER/FatFs/source/ff.c **** }
 3975              		.loc 1 1795 2 is_stmt 1 view .LVU1338
1795:DRIVER/FatFs/source/ff.c **** }
 3976              		.loc 1 1795 9 is_stmt 0 view .LVU1339
 3977 004e 0020     		movs	r0, #0
 3978              	.LVL485:
 3979              	.L282:
1796:DRIVER/FatFs/source/ff.c **** 
 3980              		.loc 1 1796 1 view .LVU1340
 3981 0050 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 3982              	.LVL486:
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 152


 3983              	.L295:
1763:DRIVER/FatFs/source/ff.c **** 			}
 3984              		.loc 1 1763 5 is_stmt 1 view .LVU1341
1763:DRIVER/FatFs/source/ff.c **** 			}
 3985              		.loc 1 1763 14 is_stmt 0 view .LVU1342
 3986 0054 0023     		movs	r3, #0
 3987 0056 AB61     		str	r3, [r5, #24]
1763:DRIVER/FatFs/source/ff.c **** 			}
 3988              		.loc 1 1763 19 is_stmt 1 view .LVU1343
1763:DRIVER/FatFs/source/ff.c **** 			}
 3989              		.loc 1 1763 26 is_stmt 0 view .LVU1344
 3990 0058 0420     		movs	r0, #4
 3991              	.LVL487:
1763:DRIVER/FatFs/source/ff.c **** 			}
 3992              		.loc 1 1763 26 view .LVU1345
 3993 005a F9E7     		b	.L282
 3994              	.LVL488:
 3995              	.L284:
1767:DRIVER/FatFs/source/ff.c **** 				clst = get_fat(&dp->obj, dp->clust);		/* Get next cluster */
 3996              		.loc 1 1767 4 is_stmt 1 view .LVU1346
1767:DRIVER/FatFs/source/ff.c **** 				clst = get_fat(&dp->obj, dp->clust);		/* Get next cluster */
 3997              		.loc 1 1767 15 is_stmt 0 view .LVU1347
 3998 005c B289     		ldrh	r2, [r6, #12]
1767:DRIVER/FatFs/source/ff.c **** 				clst = get_fat(&dp->obj, dp->clust);		/* Get next cluster */
 3999              		.loc 1 1767 13 view .LVU1348
 4000 005e B4FBF2F2 		udiv	r2, r4, r2
1767:DRIVER/FatFs/source/ff.c **** 				clst = get_fat(&dp->obj, dp->clust);		/* Get next cluster */
 4001              		.loc 1 1767 27 view .LVU1349
 4002 0062 7389     		ldrh	r3, [r6, #10]
1767:DRIVER/FatFs/source/ff.c **** 				clst = get_fat(&dp->obj, dp->clust);		/* Get next cluster */
 4003              		.loc 1 1767 35 view .LVU1350
 4004 0064 013B     		subs	r3, r3, #1
1767:DRIVER/FatFs/source/ff.c **** 				clst = get_fat(&dp->obj, dp->clust);		/* Get next cluster */
 4005              		.loc 1 1767 7 view .LVU1351
 4006 0066 1A42     		tst	r2, r3
 4007 0068 E7D1     		bne	.L283
1768:DRIVER/FatFs/source/ff.c **** 				if (clst <= 1) return FR_INT_ERR;			/* Internal error */
 4008              		.loc 1 1768 5 is_stmt 1 view .LVU1352
1768:DRIVER/FatFs/source/ff.c **** 				if (clst <= 1) return FR_INT_ERR;			/* Internal error */
 4009              		.loc 1 1768 12 is_stmt 0 view .LVU1353
 4010 006a 2846     		mov	r0, r5
 4011              	.LVL489:
1768:DRIVER/FatFs/source/ff.c **** 				if (clst <= 1) return FR_INT_ERR;			/* Internal error */
 4012              		.loc 1 1768 12 view .LVU1354
 4013 006c FFF7FEFF 		bl	get_fat
 4014              	.LVL490:
 4015 0070 8046     		mov	r8, r0
 4016              	.LVL491:
1769:DRIVER/FatFs/source/ff.c **** 				if (clst == 0xFFFFFFFF) return FR_DISK_ERR;	/* Disk error */
 4017              		.loc 1 1769 5 is_stmt 1 view .LVU1355
1769:DRIVER/FatFs/source/ff.c **** 				if (clst == 0xFFFFFFFF) return FR_DISK_ERR;	/* Disk error */
 4018              		.loc 1 1769 8 is_stmt 0 view .LVU1356
 4019 0072 0128     		cmp	r0, #1
 4020 0074 24D9     		bls	.L288
1770:DRIVER/FatFs/source/ff.c **** 				if (clst >= fs->n_fatent) {					/* It reached end of dynamic table */
 4021              		.loc 1 1770 5 is_stmt 1 view .LVU1357
1770:DRIVER/FatFs/source/ff.c **** 				if (clst >= fs->n_fatent) {					/* It reached end of dynamic table */
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 153


 4022              		.loc 1 1770 8 is_stmt 0 view .LVU1358
 4023 0076 B0F1FF3F 		cmp	r0, #-1
 4024 007a 23D0     		beq	.L289
1771:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY
 4025              		.loc 1 1771 5 is_stmt 1 view .LVU1359
1771:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY
 4026              		.loc 1 1771 19 is_stmt 0 view .LVU1360
 4027 007c F369     		ldr	r3, [r6, #28]
1771:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY
 4028              		.loc 1 1771 8 view .LVU1361
 4029 007e 8342     		cmp	r3, r0
 4030 0080 10D8     		bhi	.L285
1773:DRIVER/FatFs/source/ff.c **** 						dp->sect = 0; return FR_NO_FILE;
 4031              		.loc 1 1773 6 is_stmt 1 view .LVU1362
1773:DRIVER/FatFs/source/ff.c **** 						dp->sect = 0; return FR_NO_FILE;
 4032              		.loc 1 1773 9 is_stmt 0 view .LVU1363
 4033 0082 BFB1     		cbz	r7, .L296
1776:DRIVER/FatFs/source/ff.c **** 					if (clst == 0) return FR_DENIED;			/* No free cluster */
 4034              		.loc 1 1776 6 is_stmt 1 view .LVU1364
1776:DRIVER/FatFs/source/ff.c **** 					if (clst == 0) return FR_DENIED;			/* No free cluster */
 4035              		.loc 1 1776 13 is_stmt 0 view .LVU1365
 4036 0084 6969     		ldr	r1, [r5, #20]
 4037 0086 2846     		mov	r0, r5
 4038              	.LVL492:
1776:DRIVER/FatFs/source/ff.c **** 					if (clst == 0) return FR_DENIED;			/* No free cluster */
 4039              		.loc 1 1776 13 view .LVU1366
 4040 0088 FFF7FEFF 		bl	create_chain
 4041              	.LVL493:
1777:DRIVER/FatFs/source/ff.c **** 					if (clst == 1) return FR_INT_ERR;			/* Internal error */
 4042              		.loc 1 1777 6 is_stmt 1 view .LVU1367
1777:DRIVER/FatFs/source/ff.c **** 					if (clst == 1) return FR_INT_ERR;			/* Internal error */
 4043              		.loc 1 1777 9 is_stmt 0 view .LVU1368
 4044 008c 8046     		mov	r8, r0
 4045 008e D8B1     		cbz	r0, .L290
1778:DRIVER/FatFs/source/ff.c **** 					if (clst == 0xFFFFFFFF) return FR_DISK_ERR;	/* Disk error */
 4046              		.loc 1 1778 6 is_stmt 1 view .LVU1369
1778:DRIVER/FatFs/source/ff.c **** 					if (clst == 0xFFFFFFFF) return FR_DISK_ERR;	/* Disk error */
 4047              		.loc 1 1778 9 is_stmt 0 view .LVU1370
 4048 0090 0128     		cmp	r0, #1
 4049 0092 1BD0     		beq	.L291
1779:DRIVER/FatFs/source/ff.c **** 					if (dir_clear(fs, clst) != FR_OK) return FR_DISK_ERR;	/* Clean up the stretched table */
 4050              		.loc 1 1779 6 is_stmt 1 view .LVU1371
1779:DRIVER/FatFs/source/ff.c **** 					if (dir_clear(fs, clst) != FR_OK) return FR_DISK_ERR;	/* Clean up the stretched table */
 4051              		.loc 1 1779 9 is_stmt 0 view .LVU1372
 4052 0094 B0F1FF3F 		cmp	r0, #-1
 4053 0098 1AD0     		beq	.L292
1780:DRIVER/FatFs/source/ff.c **** 					if (FF_FS_EXFAT) dp->obj.stat |= 4;			/* exFAT: The directory has been stretched */
 4054              		.loc 1 1780 6 is_stmt 1 view .LVU1373
1780:DRIVER/FatFs/source/ff.c **** 					if (FF_FS_EXFAT) dp->obj.stat |= 4;			/* exFAT: The directory has been stretched */
 4055              		.loc 1 1780 10 is_stmt 0 view .LVU1374
 4056 009a 0146     		mov	r1, r0
 4057 009c 3046     		mov	r0, r6
 4058              	.LVL494:
1780:DRIVER/FatFs/source/ff.c **** 					if (FF_FS_EXFAT) dp->obj.stat |= 4;			/* exFAT: The directory has been stretched */
 4059              		.loc 1 1780 10 view .LVU1375
 4060 009e FFF7FEFF 		bl	dir_clear
 4061              	.LVL495:
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 154


1780:DRIVER/FatFs/source/ff.c **** 					if (FF_FS_EXFAT) dp->obj.stat |= 4;			/* exFAT: The directory has been stretched */
 4062              		.loc 1 1780 9 view .LVU1376
 4063 00a2 B8B9     		cbnz	r0, .L293
 4064              	.L285:
1787:DRIVER/FatFs/source/ff.c **** 				dp->sect = clst2sect(fs, clst);
 4065              		.loc 1 1787 5 is_stmt 1 view .LVU1377
1787:DRIVER/FatFs/source/ff.c **** 				dp->sect = clst2sect(fs, clst);
 4066              		.loc 1 1787 15 is_stmt 0 view .LVU1378
 4067 00a4 C5F81480 		str	r8, [r5, #20]
1788:DRIVER/FatFs/source/ff.c **** 			}
 4068              		.loc 1 1788 5 is_stmt 1 view .LVU1379
1788:DRIVER/FatFs/source/ff.c **** 			}
 4069              		.loc 1 1788 16 is_stmt 0 view .LVU1380
 4070 00a8 4146     		mov	r1, r8
 4071 00aa 3046     		mov	r0, r6
 4072 00ac FFF7FEFF 		bl	clst2sect
 4073              	.LVL496:
1788:DRIVER/FatFs/source/ff.c **** 			}
 4074              		.loc 1 1788 14 view .LVU1381
 4075 00b0 A861     		str	r0, [r5, #24]
 4076 00b2 C2E7     		b	.L283
 4077              	.LVL497:
 4078              	.L296:
1774:DRIVER/FatFs/source/ff.c **** 					}
 4079              		.loc 1 1774 7 is_stmt 1 view .LVU1382
1774:DRIVER/FatFs/source/ff.c **** 					}
 4080              		.loc 1 1774 16 is_stmt 0 view .LVU1383
 4081 00b4 0023     		movs	r3, #0
 4082 00b6 AB61     		str	r3, [r5, #24]
1774:DRIVER/FatFs/source/ff.c **** 					}
 4083              		.loc 1 1774 21 is_stmt 1 view .LVU1384
1774:DRIVER/FatFs/source/ff.c **** 					}
 4084              		.loc 1 1774 28 is_stmt 0 view .LVU1385
 4085 00b8 0420     		movs	r0, #4
 4086              	.LVL498:
1774:DRIVER/FatFs/source/ff.c **** 					}
 4087              		.loc 1 1774 28 view .LVU1386
 4088 00ba C9E7     		b	.L282
 4089              	.LVL499:
 4090              	.L287:
1756:DRIVER/FatFs/source/ff.c **** 
 4091              		.loc 1 1756 28 view .LVU1387
 4092 00bc 0420     		movs	r0, #4
 4093              	.LVL500:
1756:DRIVER/FatFs/source/ff.c **** 
 4094              		.loc 1 1756 28 view .LVU1388
 4095 00be C7E7     		b	.L282
 4096              	.LVL501:
 4097              	.L288:
1769:DRIVER/FatFs/source/ff.c **** 				if (clst == 0xFFFFFFFF) return FR_DISK_ERR;	/* Disk error */
 4098              		.loc 1 1769 27 view .LVU1389
 4099 00c0 0220     		movs	r0, #2
 4100              	.LVL502:
1769:DRIVER/FatFs/source/ff.c **** 				if (clst == 0xFFFFFFFF) return FR_DISK_ERR;	/* Disk error */
 4101              		.loc 1 1769 27 view .LVU1390
 4102 00c2 C5E7     		b	.L282
 4103              	.LVL503:
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 155


 4104              	.L289:
1770:DRIVER/FatFs/source/ff.c **** 				if (clst >= fs->n_fatent) {					/* It reached end of dynamic table */
 4105              		.loc 1 1770 36 view .LVU1391
 4106 00c4 0120     		movs	r0, #1
 4107              	.LVL504:
1770:DRIVER/FatFs/source/ff.c **** 				if (clst >= fs->n_fatent) {					/* It reached end of dynamic table */
 4108              		.loc 1 1770 36 view .LVU1392
 4109 00c6 C3E7     		b	.L282
 4110              	.LVL505:
 4111              	.L290:
1777:DRIVER/FatFs/source/ff.c **** 					if (clst == 1) return FR_INT_ERR;			/* Internal error */
 4112              		.loc 1 1777 28 view .LVU1393
 4113 00c8 0720     		movs	r0, #7
 4114              	.LVL506:
1777:DRIVER/FatFs/source/ff.c **** 					if (clst == 1) return FR_INT_ERR;			/* Internal error */
 4115              		.loc 1 1777 28 view .LVU1394
 4116 00ca C1E7     		b	.L282
 4117              	.LVL507:
 4118              	.L291:
1778:DRIVER/FatFs/source/ff.c **** 					if (clst == 0xFFFFFFFF) return FR_DISK_ERR;	/* Disk error */
 4119              		.loc 1 1778 28 view .LVU1395
 4120 00cc 0220     		movs	r0, #2
 4121              	.LVL508:
1778:DRIVER/FatFs/source/ff.c **** 					if (clst == 0xFFFFFFFF) return FR_DISK_ERR;	/* Disk error */
 4122              		.loc 1 1778 28 view .LVU1396
 4123 00ce BFE7     		b	.L282
 4124              	.LVL509:
 4125              	.L292:
1779:DRIVER/FatFs/source/ff.c **** 					if (dir_clear(fs, clst) != FR_OK) return FR_DISK_ERR;	/* Clean up the stretched table */
 4126              		.loc 1 1779 37 view .LVU1397
 4127 00d0 0120     		movs	r0, #1
 4128              	.LVL510:
1779:DRIVER/FatFs/source/ff.c **** 					if (dir_clear(fs, clst) != FR_OK) return FR_DISK_ERR;	/* Clean up the stretched table */
 4129              		.loc 1 1779 37 view .LVU1398
 4130 00d2 BDE7     		b	.L282
 4131              	.L293:
1780:DRIVER/FatFs/source/ff.c **** 					if (FF_FS_EXFAT) dp->obj.stat |= 4;			/* exFAT: The directory has been stretched */
 4132              		.loc 1 1780 47 view .LVU1399
 4133 00d4 0120     		movs	r0, #1
 4134 00d6 BBE7     		b	.L282
 4135              		.cfi_endproc
 4136              	.LFE18:
 4138              		.section	.text.dir_alloc,"ax",%progbits
 4139              		.align	1
 4140              		.syntax unified
 4141              		.thumb
 4142              		.thumb_func
 4144              	dir_alloc:
 4145              	.LVL511:
 4146              	.LFB19:
1810:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
 4147              		.loc 1 1810 1 is_stmt 1 view -0
 4148              		.cfi_startproc
 4149              		@ args = 0, pretend = 0, frame = 0
 4150              		@ frame_needed = 0, uses_anonymous_args = 0
1810:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
 4151              		.loc 1 1810 1 is_stmt 0 view .LVU1401
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 156


 4152 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 4153              	.LCFI23:
 4154              		.cfi_def_cfa_offset 24
 4155              		.cfi_offset 3, -24
 4156              		.cfi_offset 4, -20
 4157              		.cfi_offset 5, -16
 4158              		.cfi_offset 6, -12
 4159              		.cfi_offset 7, -8
 4160              		.cfi_offset 14, -4
 4161 0002 0446     		mov	r4, r0
 4162 0004 0E46     		mov	r6, r1
1811:DRIVER/FatFs/source/ff.c **** 	UINT n;
 4163              		.loc 1 1811 2 is_stmt 1 view .LVU1402
1812:DRIVER/FatFs/source/ff.c **** 	FATFS *fs = dp->obj.fs;
 4164              		.loc 1 1812 2 view .LVU1403
1813:DRIVER/FatFs/source/ff.c **** 
 4165              		.loc 1 1813 2 view .LVU1404
1813:DRIVER/FatFs/source/ff.c **** 
 4166              		.loc 1 1813 9 is_stmt 0 view .LVU1405
 4167 0006 0768     		ldr	r7, [r0]
 4168              	.LVL512:
1816:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
 4169              		.loc 1 1816 2 is_stmt 1 view .LVU1406
1816:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
 4170              		.loc 1 1816 8 is_stmt 0 view .LVU1407
 4171 0008 0021     		movs	r1, #0
 4172              	.LVL513:
1816:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
 4173              		.loc 1 1816 8 view .LVU1408
 4174 000a FFF7FEFF 		bl	dir_sdi
 4175              	.LVL514:
1817:DRIVER/FatFs/source/ff.c **** 		n = 0;
 4176              		.loc 1 1817 2 is_stmt 1 view .LVU1409
1817:DRIVER/FatFs/source/ff.c **** 		n = 0;
 4177              		.loc 1 1817 5 is_stmt 0 view .LVU1410
 4178 000e 0246     		mov	r2, r0
 4179 0010 C0B9     		cbnz	r0, .L298
1818:DRIVER/FatFs/source/ff.c **** 		do {
 4180              		.loc 1 1818 5 view .LVU1411
 4181 0012 0025     		movs	r5, #0
 4182 0014 08E0     		b	.L301
 4183              	.LVL515:
 4184              	.L299:
1827:DRIVER/FatFs/source/ff.c **** 			} else {
 4185              		.loc 1 1827 5 is_stmt 1 view .LVU1412
1827:DRIVER/FatFs/source/ff.c **** 			} else {
 4186              		.loc 1 1827 8 is_stmt 0 view .LVU1413
 4187 0016 0135     		adds	r5, r5, #1
 4188              	.LVL516:
1827:DRIVER/FatFs/source/ff.c **** 			} else {
 4189              		.loc 1 1827 8 view .LVU1414
 4190 0018 B542     		cmp	r5, r6
 4191 001a 13D0     		beq	.L298
 4192              	.LVL517:
 4193              	.L300:
1831:DRIVER/FatFs/source/ff.c **** 		} while (res == FR_OK);
 4194              		.loc 1 1831 4 is_stmt 1 view .LVU1415
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 157


1831:DRIVER/FatFs/source/ff.c **** 		} while (res == FR_OK);
 4195              		.loc 1 1831 10 is_stmt 0 view .LVU1416
 4196 001c 0121     		movs	r1, #1
 4197 001e 2046     		mov	r0, r4
 4198              	.LVL518:
1831:DRIVER/FatFs/source/ff.c **** 		} while (res == FR_OK);
 4199              		.loc 1 1831 10 view .LVU1417
 4200 0020 FFF7FEFF 		bl	dir_next
 4201              	.LVL519:
1832:DRIVER/FatFs/source/ff.c **** 	}
 4202              		.loc 1 1832 16 is_stmt 1 view .LVU1418
 4203 0024 0246     		mov	r2, r0
 4204 0026 68B9     		cbnz	r0, .L298
 4205              	.LVL520:
 4206              	.L301:
1819:DRIVER/FatFs/source/ff.c **** 			res = move_window(fs, dp->sect);
 4207              		.loc 1 1819 3 view .LVU1419
1820:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) break;
 4208              		.loc 1 1820 4 view .LVU1420
1820:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) break;
 4209              		.loc 1 1820 10 is_stmt 0 view .LVU1421
 4210 0028 A169     		ldr	r1, [r4, #24]
 4211 002a 3846     		mov	r0, r7
 4212              	.LVL521:
1820:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) break;
 4213              		.loc 1 1820 10 view .LVU1422
 4214 002c FFF7FEFF 		bl	move_window
 4215              	.LVL522:
1821:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
 4216              		.loc 1 1821 4 is_stmt 1 view .LVU1423
1821:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
 4217              		.loc 1 1821 7 is_stmt 0 view .LVU1424
 4218 0030 0246     		mov	r2, r0
 4219 0032 38B9     		cbnz	r0, .L298
1825:DRIVER/FatFs/source/ff.c **** #endif
 4220              		.loc 1 1825 4 is_stmt 1 view .LVU1425
1825:DRIVER/FatFs/source/ff.c **** #endif
 4221              		.loc 1 1825 10 is_stmt 0 view .LVU1426
 4222 0034 E369     		ldr	r3, [r4, #28]
1825:DRIVER/FatFs/source/ff.c **** #endif
 4223              		.loc 1 1825 15 view .LVU1427
 4224 0036 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
1825:DRIVER/FatFs/source/ff.c **** #endif
 4225              		.loc 1 1825 7 view .LVU1428
 4226 0038 E52B     		cmp	r3, #229
 4227 003a ECD0     		beq	.L299
1825:DRIVER/FatFs/source/ff.c **** #endif
 4228              		.loc 1 1825 34 discriminator 1 view .LVU1429
 4229 003c 002B     		cmp	r3, #0
 4230 003e EAD0     		beq	.L299
1829:DRIVER/FatFs/source/ff.c **** 			}
 4231              		.loc 1 1829 7 view .LVU1430
 4232 0040 0025     		movs	r5, #0
 4233              	.LVL523:
1829:DRIVER/FatFs/source/ff.c **** 			}
 4234              		.loc 1 1829 7 view .LVU1431
 4235 0042 EBE7     		b	.L300
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 158


 4236              	.LVL524:
 4237              	.L298:
1835:DRIVER/FatFs/source/ff.c **** 	return res;
 4238              		.loc 1 1835 2 is_stmt 1 view .LVU1432
1835:DRIVER/FatFs/source/ff.c **** 	return res;
 4239              		.loc 1 1835 5 is_stmt 0 view .LVU1433
 4240 0044 042A     		cmp	r2, #4
 4241 0046 01D0     		beq	.L306
 4242              	.LVL525:
 4243              	.L302:
1836:DRIVER/FatFs/source/ff.c **** }
 4244              		.loc 1 1836 2 is_stmt 1 view .LVU1434
1837:DRIVER/FatFs/source/ff.c **** 
 4245              		.loc 1 1837 1 is_stmt 0 view .LVU1435
 4246 0048 1046     		mov	r0, r2
 4247 004a F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 4248              	.LVL526:
 4249              	.L306:
1835:DRIVER/FatFs/source/ff.c **** 	return res;
 4250              		.loc 1 1835 29 view .LVU1436
 4251 004c 0722     		movs	r2, #7
 4252              	.LVL527:
1835:DRIVER/FatFs/source/ff.c **** 	return res;
 4253              		.loc 1 1835 29 view .LVU1437
 4254 004e FBE7     		b	.L302
 4255              		.cfi_endproc
 4256              	.LFE19:
 4258              		.section	.text.dir_read,"ax",%progbits
 4259              		.align	1
 4260              		.syntax unified
 4261              		.thumb
 4262              		.thumb_func
 4264              	dir_read:
 4265              	.LVL528:
 4266              	.LFB27:
2310:DRIVER/FatFs/source/ff.c **** 	FRESULT res = FR_NO_FILE;
 4267              		.loc 1 2310 1 is_stmt 1 view -0
 4268              		.cfi_startproc
 4269              		@ args = 0, pretend = 0, frame = 0
 4270              		@ frame_needed = 0, uses_anonymous_args = 0
2310:DRIVER/FatFs/source/ff.c **** 	FRESULT res = FR_NO_FILE;
 4271              		.loc 1 2310 1 is_stmt 0 view .LVU1439
 4272 0000 2DE9F843 		push	{r3, r4, r5, r6, r7, r8, r9, lr}
 4273              	.LCFI24:
 4274              		.cfi_def_cfa_offset 32
 4275              		.cfi_offset 3, -32
 4276              		.cfi_offset 4, -28
 4277              		.cfi_offset 5, -24
 4278              		.cfi_offset 6, -20
 4279              		.cfi_offset 7, -16
 4280              		.cfi_offset 8, -12
 4281              		.cfi_offset 9, -8
 4282              		.cfi_offset 14, -4
 4283 0004 0446     		mov	r4, r0
 4284 0006 8846     		mov	r8, r1
2311:DRIVER/FatFs/source/ff.c **** 	FATFS *fs = dp->obj.fs;
 4285              		.loc 1 2311 2 is_stmt 1 view .LVU1440
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 159


 4286              	.LVL529:
2312:DRIVER/FatFs/source/ff.c **** 	BYTE attr, b;
 4287              		.loc 1 2312 2 view .LVU1441
2312:DRIVER/FatFs/source/ff.c **** 	BYTE attr, b;
 4288              		.loc 1 2312 9 is_stmt 0 view .LVU1442
 4289 0008 0768     		ldr	r7, [r0]
 4290              	.LVL530:
2313:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN
 4291              		.loc 1 2313 2 is_stmt 1 view .LVU1443
2315:DRIVER/FatFs/source/ff.c **** #endif
 4292              		.loc 1 2315 2 view .LVU1444
2318:DRIVER/FatFs/source/ff.c **** 		res = move_window(fs, dp->sect);
 4293              		.loc 1 2318 2 view .LVU1445
2315:DRIVER/FatFs/source/ff.c **** #endif
 4294              		.loc 1 2315 19 is_stmt 0 view .LVU1446
 4295 000a 4FF0FF09 		mov	r9, #255
2315:DRIVER/FatFs/source/ff.c **** #endif
 4296              		.loc 1 2315 7 view .LVU1447
 4297 000e 4E46     		mov	r6, r9
2311:DRIVER/FatFs/source/ff.c **** 	FATFS *fs = dp->obj.fs;
 4298              		.loc 1 2311 10 view .LVU1448
 4299 0010 0425     		movs	r5, #4
2318:DRIVER/FatFs/source/ff.c **** 		res = move_window(fs, dp->sect);
 4300              		.loc 1 2318 8 view .LVU1449
 4301 0012 2EE0     		b	.L308
 4302              	.LVL531:
 4303              	.L326:
2347:DRIVER/FatFs/source/ff.c **** 					if (b & LLEF) {		/* Is it start of an LFN sequence? */
 4304              		.loc 1 2347 5 is_stmt 1 view .LVU1450
2347:DRIVER/FatFs/source/ff.c **** 					if (b & LLEF) {		/* Is it start of an LFN sequence? */
 4305              		.loc 1 2347 8 is_stmt 0 view .LVU1451
 4306 0014 0F2B     		cmp	r3, #15
 4307 0016 19D1     		bne	.L311
2348:DRIVER/FatFs/source/ff.c **** 						sum = dp->dir[LDIR_Chksum];
 4308              		.loc 1 2348 6 is_stmt 1 view .LVU1452
2348:DRIVER/FatFs/source/ff.c **** 						sum = dp->dir[LDIR_Chksum];
 4309              		.loc 1 2348 9 is_stmt 0 view .LVU1453
 4310 0018 12F0400F 		tst	r2, #64
 4311 001c 06D0     		beq	.L312
2349:DRIVER/FatFs/source/ff.c **** 						b &= (BYTE)~LLEF; ord = b;
 4312              		.loc 1 2349 7 is_stmt 1 view .LVU1454
2349:DRIVER/FatFs/source/ff.c **** 						b &= (BYTE)~LLEF; ord = b;
 4313              		.loc 1 2349 11 is_stmt 0 view .LVU1455
 4314 001e 91F80D90 		ldrb	r9, [r1, #13]	@ zero_extendqisi2
 4315              	.LVL532:
2350:DRIVER/FatFs/source/ff.c **** 						dp->blk_ofs = dp->dptr;
 4316              		.loc 1 2350 7 is_stmt 1 view .LVU1456
2350:DRIVER/FatFs/source/ff.c **** 						dp->blk_ofs = dp->dptr;
 4317              		.loc 1 2350 9 is_stmt 0 view .LVU1457
 4318 0022 02F0BF02 		and	r2, r2, #191
 4319              	.LVL533:
2350:DRIVER/FatFs/source/ff.c **** 						dp->blk_ofs = dp->dptr;
 4320              		.loc 1 2350 25 is_stmt 1 view .LVU1458
2351:DRIVER/FatFs/source/ff.c **** 					}
 4321              		.loc 1 2351 7 view .LVU1459
2351:DRIVER/FatFs/source/ff.c **** 					}
 4322              		.loc 1 2351 23 is_stmt 0 view .LVU1460
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 160


 4323 0026 2369     		ldr	r3, [r4, #16]
 4324              	.LVL534:
2351:DRIVER/FatFs/source/ff.c **** 					}
 4325              		.loc 1 2351 19 view .LVU1461
 4326 0028 E362     		str	r3, [r4, #44]
2350:DRIVER/FatFs/source/ff.c **** 						dp->blk_ofs = dp->dptr;
 4327              		.loc 1 2350 29 view .LVU1462
 4328 002a 1646     		mov	r6, r2
 4329              	.LVL535:
 4330              	.L312:
2354:DRIVER/FatFs/source/ff.c **** 				} else {				/* An SFN entry is found */
 4331              		.loc 1 2354 6 is_stmt 1 view .LVU1463
2354:DRIVER/FatFs/source/ff.c **** 				} else {				/* An SFN entry is found */
 4332              		.loc 1 2354 10 is_stmt 0 view .LVU1464
 4333 002c B242     		cmp	r2, r6
 4334 002e 01D0     		beq	.L324
2354:DRIVER/FatFs/source/ff.c **** 				} else {				/* An SFN entry is found */
 4335              		.loc 1 2354 10 view .LVU1465
 4336 0030 FF26     		movs	r6, #255
 4337              	.LVL536:
2354:DRIVER/FatFs/source/ff.c **** 				} else {				/* An SFN entry is found */
 4338              		.loc 1 2354 10 view .LVU1466
 4339 0032 18E0     		b	.L310
 4340              	.LVL537:
 4341              	.L324:
2354:DRIVER/FatFs/source/ff.c **** 				} else {				/* An SFN entry is found */
 4342              		.loc 1 2354 39 discriminator 1 view .LVU1467
 4343 0034 4B7B     		ldrb	r3, [r1, #13]	@ zero_extendqisi2
2354:DRIVER/FatFs/source/ff.c **** 				} else {				/* An SFN entry is found */
 4344              		.loc 1 2354 22 discriminator 1 view .LVU1468
 4345 0036 4B45     		cmp	r3, r9
 4346 0038 01D0     		beq	.L325
2354:DRIVER/FatFs/source/ff.c **** 				} else {				/* An SFN entry is found */
 4347              		.loc 1 2354 10 view .LVU1469
 4348 003a FF26     		movs	r6, #255
 4349              	.LVL538:
2354:DRIVER/FatFs/source/ff.c **** 				} else {				/* An SFN entry is found */
 4350              		.loc 1 2354 10 view .LVU1470
 4351 003c 13E0     		b	.L310
 4352              	.LVL539:
 4353              	.L325:
2354:DRIVER/FatFs/source/ff.c **** 				} else {				/* An SFN entry is found */
 4354              		.loc 1 2354 56 discriminator 3 view .LVU1471
 4355 003e 3869     		ldr	r0, [r7, #16]
 4356 0040 FFF7FEFF 		bl	pick_lfn
 4357              	.LVL540:
2354:DRIVER/FatFs/source/ff.c **** 				} else {				/* An SFN entry is found */
 4358              		.loc 1 2354 53 discriminator 3 view .LVU1472
 4359 0044 88B3     		cbz	r0, .L322
2354:DRIVER/FatFs/source/ff.c **** 				} else {				/* An SFN entry is found */
 4360              		.loc 1 2354 10 discriminator 5 view .LVU1473
 4361 0046 013E     		subs	r6, r6, #1
 4362              	.LVL541:
2354:DRIVER/FatFs/source/ff.c **** 				} else {				/* An SFN entry is found */
 4363              		.loc 1 2354 10 discriminator 5 view .LVU1474
 4364 0048 F6B2     		uxtb	r6, r6
 4365 004a 0CE0     		b	.L310
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 161


 4366              	.LVL542:
 4367              	.L311:
2356:DRIVER/FatFs/source/ff.c **** 						dp->blk_ofs = 0xFFFFFFFF;	/* It has no LFN. */
 4368              		.loc 1 2356 6 is_stmt 1 view .LVU1475
2356:DRIVER/FatFs/source/ff.c **** 						dp->blk_ofs = 0xFFFFFFFF;	/* It has no LFN. */
 4369              		.loc 1 2356 9 is_stmt 0 view .LVU1476
 4370 004c 26B9     		cbnz	r6, .L313
2356:DRIVER/FatFs/source/ff.c **** 						dp->blk_ofs = 0xFFFFFFFF;	/* It has no LFN. */
 4371              		.loc 1 2356 29 discriminator 1 view .LVU1477
 4372 004e 0846     		mov	r0, r1
 4373 0050 FFF7FEFF 		bl	sum_sfn
 4374              	.LVL543:
2356:DRIVER/FatFs/source/ff.c **** 						dp->blk_ofs = 0xFFFFFFFF;	/* It has no LFN. */
 4375              		.loc 1 2356 19 discriminator 1 view .LVU1478
 4376 0054 4845     		cmp	r0, r9
 4377 0056 2BD0     		beq	.L309
 4378              	.L313:
2357:DRIVER/FatFs/source/ff.c **** 					}
 4379              		.loc 1 2357 7 is_stmt 1 view .LVU1479
2357:DRIVER/FatFs/source/ff.c **** 					}
 4380              		.loc 1 2357 19 is_stmt 0 view .LVU1480
 4381 0058 4FF0FF33 		mov	r3, #-1
 4382 005c E362     		str	r3, [r4, #44]
 4383 005e 27E0     		b	.L309
 4384              	.LVL544:
 4385              	.L317:
2345:DRIVER/FatFs/source/ff.c **** 			} else {
 4386              		.loc 1 2345 9 view .LVU1481
 4387 0060 FF26     		movs	r6, #255
 4388              	.LVL545:
2345:DRIVER/FatFs/source/ff.c **** 			} else {
 4389              		.loc 1 2345 9 view .LVU1482
 4390 0062 00E0     		b	.L310
 4391              	.LVL546:
 4392              	.L318:
2345:DRIVER/FatFs/source/ff.c **** 			} else {
 4393              		.loc 1 2345 9 view .LVU1483
 4394 0064 FF26     		movs	r6, #255
 4395              	.LVL547:
 4396              	.L310:
2368:DRIVER/FatFs/source/ff.c **** 		if (res != FR_OK) break;
 4397              		.loc 1 2368 3 is_stmt 1 view .LVU1484
2368:DRIVER/FatFs/source/ff.c **** 		if (res != FR_OK) break;
 4398              		.loc 1 2368 9 is_stmt 0 view .LVU1485
 4399 0066 0021     		movs	r1, #0
 4400 0068 2046     		mov	r0, r4
 4401 006a FFF7FEFF 		bl	dir_next
 4402              	.LVL548:
2369:DRIVER/FatFs/source/ff.c **** 	}
 4403              		.loc 1 2369 3 is_stmt 1 view .LVU1486
2369:DRIVER/FatFs/source/ff.c **** 	}
 4404              		.loc 1 2369 6 is_stmt 0 view .LVU1487
 4405 006e 0546     		mov	r5, r0
 4406 0070 F0B9     		cbnz	r0, .L309
 4407              	.LVL549:
 4408              	.L308:
2318:DRIVER/FatFs/source/ff.c **** 		res = move_window(fs, dp->sect);
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 162


 4409              		.loc 1 2318 9 is_stmt 1 view .LVU1488
2318:DRIVER/FatFs/source/ff.c **** 		res = move_window(fs, dp->sect);
 4410              		.loc 1 2318 11 is_stmt 0 view .LVU1489
 4411 0072 A169     		ldr	r1, [r4, #24]
2318:DRIVER/FatFs/source/ff.c **** 		res = move_window(fs, dp->sect);
 4412              		.loc 1 2318 9 view .LVU1490
 4413 0074 E1B1     		cbz	r1, .L309
2319:DRIVER/FatFs/source/ff.c **** 		if (res != FR_OK) break;
 4414              		.loc 1 2319 3 is_stmt 1 view .LVU1491
2319:DRIVER/FatFs/source/ff.c **** 		if (res != FR_OK) break;
 4415              		.loc 1 2319 9 is_stmt 0 view .LVU1492
 4416 0076 3846     		mov	r0, r7
 4417 0078 FFF7FEFF 		bl	move_window
 4418              	.LVL550:
2320:DRIVER/FatFs/source/ff.c **** 		b = dp->dir[DIR_Name];	/* Test for the entry type */
 4419              		.loc 1 2320 3 is_stmt 1 view .LVU1493
2320:DRIVER/FatFs/source/ff.c **** 		b = dp->dir[DIR_Name];	/* Test for the entry type */
 4420              		.loc 1 2320 6 is_stmt 0 view .LVU1494
 4421 007c 0546     		mov	r5, r0
 4422 007e B8B9     		cbnz	r0, .L309
2321:DRIVER/FatFs/source/ff.c **** 		if (b == 0) {
 4423              		.loc 1 2321 3 is_stmt 1 view .LVU1495
2321:DRIVER/FatFs/source/ff.c **** 		if (b == 0) {
 4424              		.loc 1 2321 9 is_stmt 0 view .LVU1496
 4425 0080 E169     		ldr	r1, [r4, #28]
2321:DRIVER/FatFs/source/ff.c **** 		if (b == 0) {
 4426              		.loc 1 2321 5 view .LVU1497
 4427 0082 0A78     		ldrb	r2, [r1]	@ zero_extendqisi2
 4428              	.LVL551:
2322:DRIVER/FatFs/source/ff.c **** 			res = FR_NO_FILE; break; /* Reached to end of the directory */
 4429              		.loc 1 2322 3 is_stmt 1 view .LVU1498
2322:DRIVER/FatFs/source/ff.c **** 			res = FR_NO_FILE; break; /* Reached to end of the directory */
 4430              		.loc 1 2322 6 is_stmt 0 view .LVU1499
 4431 0084 9AB1     		cbz	r2, .L316
2342:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN		/* LFN configuration */
 4432              		.loc 1 2342 4 is_stmt 1 view .LVU1500
2342:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN		/* LFN configuration */
 4433              		.loc 1 2342 33 is_stmt 0 view .LVU1501
 4434 0086 CB7A     		ldrb	r3, [r1, #11]	@ zero_extendqisi2
2342:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN		/* LFN configuration */
 4435              		.loc 1 2342 24 view .LVU1502
 4436 0088 03F03F03 		and	r3, r3, #63
 4437              	.LVL552:
2342:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN		/* LFN configuration */
 4438              		.loc 1 2342 17 view .LVU1503
 4439 008c A371     		strb	r3, [r4, #6]
2344:DRIVER/FatFs/source/ff.c **** 				ord = 0xFF;
 4440              		.loc 1 2344 4 is_stmt 1 view .LVU1504
2344:DRIVER/FatFs/source/ff.c **** 				ord = 0xFF;
 4441              		.loc 1 2344 7 is_stmt 0 view .LVU1505
 4442 008e E52A     		cmp	r2, #229
 4443 0090 E6D0     		beq	.L317
2344:DRIVER/FatFs/source/ff.c **** 				ord = 0xFF;
 4444              		.loc 1 2344 18 discriminator 1 view .LVU1506
 4445 0092 2E2A     		cmp	r2, #46
 4446 0094 E6D0     		beq	.L318
2344:DRIVER/FatFs/source/ff.c **** 				ord = 0xFF;
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 163


 4447              		.loc 1 2344 45 discriminator 2 view .LVU1507
 4448 0096 23F02000 		bic	r0, r3, #32
 4449              	.LVL553:
2344:DRIVER/FatFs/source/ff.c **** 				ord = 0xFF;
 4450              		.loc 1 2344 33 discriminator 2 view .LVU1508
 4451 009a 0828     		cmp	r0, #8
 4452 009c 14BF     		ite	ne
 4453 009e 0020     		movne	r0, #0
 4454 00a0 0120     		moveq	r0, #1
2344:DRIVER/FatFs/source/ff.c **** 				ord = 0xFF;
 4455              		.loc 1 2344 30 discriminator 2 view .LVU1509
 4456 00a2 4045     		cmp	r0, r8
 4457 00a4 B6D0     		beq	.L326
2345:DRIVER/FatFs/source/ff.c **** 			} else {
 4458              		.loc 1 2345 9 view .LVU1510
 4459 00a6 FF26     		movs	r6, #255
 4460              	.LVL554:
2345:DRIVER/FatFs/source/ff.c **** 			} else {
 4461              		.loc 1 2345 9 view .LVU1511
 4462 00a8 DDE7     		b	.L310
 4463              	.LVL555:
 4464              	.L322:
2354:DRIVER/FatFs/source/ff.c **** 				} else {				/* An SFN entry is found */
 4465              		.loc 1 2354 10 view .LVU1512
 4466 00aa FF26     		movs	r6, #255
 4467              	.LVL556:
2354:DRIVER/FatFs/source/ff.c **** 				} else {				/* An SFN entry is found */
 4468              		.loc 1 2354 10 view .LVU1513
 4469 00ac DBE7     		b	.L310
 4470              	.LVL557:
 4471              	.L316:
2323:DRIVER/FatFs/source/ff.c **** 		}
 4472              		.loc 1 2323 8 view .LVU1514
 4473 00ae 0425     		movs	r5, #4
 4474              	.LVL558:
 4475              	.L309:
2372:DRIVER/FatFs/source/ff.c **** 	return res;
 4476              		.loc 1 2372 2 is_stmt 1 view .LVU1515
2372:DRIVER/FatFs/source/ff.c **** 	return res;
 4477              		.loc 1 2372 5 is_stmt 0 view .LVU1516
 4478 00b0 0DB1     		cbz	r5, .L315
2372:DRIVER/FatFs/source/ff.c **** 	return res;
 4479              		.loc 1 2372 20 is_stmt 1 discriminator 1 view .LVU1517
2372:DRIVER/FatFs/source/ff.c **** 	return res;
 4480              		.loc 1 2372 29 is_stmt 0 discriminator 1 view .LVU1518
 4481 00b2 0023     		movs	r3, #0
 4482 00b4 A361     		str	r3, [r4, #24]
 4483              	.L315:
2373:DRIVER/FatFs/source/ff.c **** }
 4484              		.loc 1 2373 2 is_stmt 1 view .LVU1519
2374:DRIVER/FatFs/source/ff.c **** 
 4485              		.loc 1 2374 1 is_stmt 0 view .LVU1520
 4486 00b6 2846     		mov	r0, r5
 4487 00b8 BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
2374:DRIVER/FatFs/source/ff.c **** 
 4488              		.loc 1 2374 1 view .LVU1521
 4489              		.cfi_endproc
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 164


 4490              	.LFE27:
 4492              		.section	.text.dir_remove,"ax",%progbits
 4493              		.align	1
 4494              		.syntax unified
 4495              		.thumb
 4496              		.thumb_func
 4498              	dir_remove:
 4499              	.LVL559:
 4500              	.LFB30:
2574:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
 4501              		.loc 1 2574 1 is_stmt 1 view -0
 4502              		.cfi_startproc
 4503              		@ args = 0, pretend = 0, frame = 0
 4504              		@ frame_needed = 0, uses_anonymous_args = 0
2574:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
 4505              		.loc 1 2574 1 is_stmt 0 view .LVU1523
 4506 0000 70B5     		push	{r4, r5, r6, lr}
 4507              	.LCFI25:
 4508              		.cfi_def_cfa_offset 16
 4509              		.cfi_offset 4, -16
 4510              		.cfi_offset 5, -12
 4511              		.cfi_offset 6, -8
 4512              		.cfi_offset 14, -4
 4513 0002 0446     		mov	r4, r0
2575:DRIVER/FatFs/source/ff.c **** 	FATFS *fs = dp->obj.fs;
 4514              		.loc 1 2575 2 is_stmt 1 view .LVU1524
2576:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN		/* LFN configuration */
 4515              		.loc 1 2576 2 view .LVU1525
2576:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN		/* LFN configuration */
 4516              		.loc 1 2576 9 is_stmt 0 view .LVU1526
 4517 0004 0568     		ldr	r5, [r0]
 4518              	.LVL560:
2578:DRIVER/FatFs/source/ff.c **** 
 4519              		.loc 1 2578 2 is_stmt 1 view .LVU1527
2578:DRIVER/FatFs/source/ff.c **** 
 4520              		.loc 1 2578 8 is_stmt 0 view .LVU1528
 4521 0006 0669     		ldr	r6, [r0, #16]
 4522              	.LVL561:
2580:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
 4523              		.loc 1 2580 2 is_stmt 1 view .LVU1529
2580:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
 4524              		.loc 1 2580 11 is_stmt 0 view .LVU1530
 4525 0008 C16A     		ldr	r1, [r0, #44]
2580:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
 4526              		.loc 1 2580 44 view .LVU1531
 4527 000a B1F1FF3F 		cmp	r1, #-1
 4528 000e 1AD1     		bne	.L335
 4529 0010 0023     		movs	r3, #0
 4530              	.LVL562:
 4531              	.L328:
2581:DRIVER/FatFs/source/ff.c **** 		do {
 4532              		.loc 1 2581 2 is_stmt 1 discriminator 4 view .LVU1532
2581:DRIVER/FatFs/source/ff.c **** 		do {
 4533              		.loc 1 2581 5 is_stmt 0 discriminator 4 view .LVU1533
 4534 0012 B3B9     		cbnz	r3, .L329
 4535              	.LVL563:
 4536              	.L331:
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 165


2582:DRIVER/FatFs/source/ff.c **** 			res = move_window(fs, dp->sect);
 4537              		.loc 1 2582 3 is_stmt 1 view .LVU1534
2583:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) break;
 4538              		.loc 1 2583 4 view .LVU1535
2583:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) break;
 4539              		.loc 1 2583 10 is_stmt 0 view .LVU1536
 4540 0014 A169     		ldr	r1, [r4, #24]
 4541 0016 2846     		mov	r0, r5
 4542 0018 FFF7FEFF 		bl	move_window
 4543              	.LVL564:
2584:DRIVER/FatFs/source/ff.c **** 			if (FF_FS_EXFAT && fs->fs_type == FS_EXFAT) {	/* On the exFAT volume */
 4544              		.loc 1 2584 4 is_stmt 1 view .LVU1537
2584:DRIVER/FatFs/source/ff.c **** 			if (FF_FS_EXFAT && fs->fs_type == FS_EXFAT) {	/* On the exFAT volume */
 4545              		.loc 1 2584 7 is_stmt 0 view .LVU1538
 4546 001c 0346     		mov	r3, r0
 4547 001e 70B9     		cbnz	r0, .L330
2585:DRIVER/FatFs/source/ff.c **** 				dp->dir[XDIR_Type] &= 0x7F;	/* Clear the entry InUse flag. */
 4548              		.loc 1 2585 4 is_stmt 1 view .LVU1539
2588:DRIVER/FatFs/source/ff.c **** 			}
 4549              		.loc 1 2588 5 view .LVU1540
2588:DRIVER/FatFs/source/ff.c **** 			}
 4550              		.loc 1 2588 7 is_stmt 0 view .LVU1541
 4551 0020 E269     		ldr	r2, [r4, #28]
2588:DRIVER/FatFs/source/ff.c **** 			}
 4552              		.loc 1 2588 23 view .LVU1542
 4553 0022 E521     		movs	r1, #229
 4554 0024 1170     		strb	r1, [r2]
2590:DRIVER/FatFs/source/ff.c **** 			if (dp->dptr >= last) break;	/* If reached last entry then all entries of the object has been de
 4555              		.loc 1 2590 4 is_stmt 1 view .LVU1543
2590:DRIVER/FatFs/source/ff.c **** 			if (dp->dptr >= last) break;	/* If reached last entry then all entries of the object has been de
 4556              		.loc 1 2590 14 is_stmt 0 view .LVU1544
 4557 0026 0122     		movs	r2, #1
 4558 0028 2A71     		strb	r2, [r5, #4]
2591:DRIVER/FatFs/source/ff.c **** 			res = dir_next(dp, 0);	/* Next entry */
 4559              		.loc 1 2591 4 is_stmt 1 view .LVU1545
2591:DRIVER/FatFs/source/ff.c **** 			res = dir_next(dp, 0);	/* Next entry */
 4560              		.loc 1 2591 10 is_stmt 0 view .LVU1546
 4561 002a 2269     		ldr	r2, [r4, #16]
2591:DRIVER/FatFs/source/ff.c **** 			res = dir_next(dp, 0);	/* Next entry */
 4562              		.loc 1 2591 7 view .LVU1547
 4563 002c B242     		cmp	r2, r6
 4564 002e 06D2     		bcs	.L330
2592:DRIVER/FatFs/source/ff.c **** 		} while (res == FR_OK);
 4565              		.loc 1 2592 4 is_stmt 1 view .LVU1548
2592:DRIVER/FatFs/source/ff.c **** 		} while (res == FR_OK);
 4566              		.loc 1 2592 10 is_stmt 0 view .LVU1549
 4567 0030 0021     		movs	r1, #0
 4568 0032 2046     		mov	r0, r4
 4569              	.LVL565:
2592:DRIVER/FatFs/source/ff.c **** 		} while (res == FR_OK);
 4570              		.loc 1 2592 10 view .LVU1550
 4571 0034 FFF7FEFF 		bl	dir_next
 4572              	.LVL566:
2593:DRIVER/FatFs/source/ff.c **** 		if (res == FR_NO_FILE) res = FR_INT_ERR;
 4573              		.loc 1 2593 16 is_stmt 1 view .LVU1551
 4574 0038 0346     		mov	r3, r0
 4575 003a 0028     		cmp	r0, #0
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 166


 4576 003c EAD0     		beq	.L331
 4577              	.L330:
 4578              	.LVL567:
2594:DRIVER/FatFs/source/ff.c **** 	}
 4579              		.loc 1 2594 3 view .LVU1552
2594:DRIVER/FatFs/source/ff.c **** 	}
 4580              		.loc 1 2594 6 is_stmt 0 view .LVU1553
 4581 003e 042B     		cmp	r3, #4
 4582 0040 05D0     		beq	.L336
 4583              	.LVL568:
 4584              	.L329:
2605:DRIVER/FatFs/source/ff.c **** }
 4585              		.loc 1 2605 2 is_stmt 1 view .LVU1554
2606:DRIVER/FatFs/source/ff.c **** 
 4586              		.loc 1 2606 1 is_stmt 0 view .LVU1555
 4587 0042 1846     		mov	r0, r3
 4588 0044 70BD     		pop	{r4, r5, r6, pc}
 4589              	.LVL569:
 4590              	.L335:
2580:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
 4591              		.loc 1 2580 46 discriminator 1 view .LVU1556
 4592 0046 FFF7FEFF 		bl	dir_sdi
 4593              	.LVL570:
2580:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
 4594              		.loc 1 2580 46 discriminator 1 view .LVU1557
 4595 004a 0346     		mov	r3, r0
 4596 004c E1E7     		b	.L328
 4597              	.LVL571:
 4598              	.L336:
2594:DRIVER/FatFs/source/ff.c **** 	}
 4599              		.loc 1 2594 30 view .LVU1558
 4600 004e 0223     		movs	r3, #2
 4601              	.LVL572:
2594:DRIVER/FatFs/source/ff.c **** 	}
 4602              		.loc 1 2594 30 view .LVU1559
 4603 0050 F7E7     		b	.L329
 4604              		.cfi_endproc
 4605              	.LFE30:
 4607              		.section	.text.sync_fs,"ax",%progbits
 4608              		.align	1
 4609              		.syntax unified
 4610              		.thumb
 4611              		.thumb_func
 4613              	sync_fs:
 4614              	.LVL573:
 4615              	.LFB10:
1111:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
 4616              		.loc 1 1111 1 is_stmt 1 view -0
 4617              		.cfi_startproc
 4618              		@ args = 0, pretend = 0, frame = 0
 4619              		@ frame_needed = 0, uses_anonymous_args = 0
1111:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
 4620              		.loc 1 1111 1 is_stmt 0 view .LVU1561
 4621 0000 70B5     		push	{r4, r5, r6, lr}
 4622              	.LCFI26:
 4623              		.cfi_def_cfa_offset 16
 4624              		.cfi_offset 4, -16
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 167


 4625              		.cfi_offset 5, -12
 4626              		.cfi_offset 6, -8
 4627              		.cfi_offset 14, -4
 4628 0002 0446     		mov	r4, r0
1112:DRIVER/FatFs/source/ff.c **** 
 4629              		.loc 1 1112 2 is_stmt 1 view .LVU1562
1115:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
 4630              		.loc 1 1115 2 view .LVU1563
1115:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
 4631              		.loc 1 1115 8 is_stmt 0 view .LVU1564
 4632 0004 FFF7FEFF 		bl	sync_window
 4633              	.LVL574:
1116:DRIVER/FatFs/source/ff.c **** 		if (fs->fs_type == FS_FAT32 && fs->fsi_flag == 1) {	/* FAT32: Update FSInfo sector if needed */
 4634              		.loc 1 1116 2 is_stmt 1 view .LVU1565
1116:DRIVER/FatFs/source/ff.c **** 		if (fs->fs_type == FS_FAT32 && fs->fsi_flag == 1) {	/* FAT32: Update FSInfo sector if needed */
 4635              		.loc 1 1116 5 is_stmt 0 view .LVU1566
 4636 0008 0546     		mov	r5, r0
 4637 000a 48B9     		cbnz	r0, .L338
1117:DRIVER/FatFs/source/ff.c **** 			/* Create FSInfo structure */
 4638              		.loc 1 1117 3 is_stmt 1 view .LVU1567
1117:DRIVER/FatFs/source/ff.c **** 			/* Create FSInfo structure */
 4639              		.loc 1 1117 9 is_stmt 0 view .LVU1568
 4640 000c 2378     		ldrb	r3, [r4]	@ zero_extendqisi2
1117:DRIVER/FatFs/source/ff.c **** 			/* Create FSInfo structure */
 4641              		.loc 1 1117 6 view .LVU1569
 4642 000e 032B     		cmp	r3, #3
 4643 0010 08D0     		beq	.L342
 4644              	.LVL575:
 4645              	.L339:
1130:DRIVER/FatFs/source/ff.c **** 	}
 4646              		.loc 1 1130 3 is_stmt 1 view .LVU1570
1130:DRIVER/FatFs/source/ff.c **** 	}
 4647              		.loc 1 1130 7 is_stmt 0 view .LVU1571
 4648 0012 0022     		movs	r2, #0
 4649 0014 1146     		mov	r1, r2
 4650 0016 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 4651 0018 FFF7FEFF 		bl	disk_ioctl
 4652              	.LVL576:
1130:DRIVER/FatFs/source/ff.c **** 	}
 4653              		.loc 1 1130 6 view .LVU1572
 4654 001c 00B1     		cbz	r0, .L338
1130:DRIVER/FatFs/source/ff.c **** 	}
 4655              		.loc 1 1130 57 view .LVU1573
 4656 001e 0125     		movs	r5, #1
 4657              	.L338:
 4658              	.LVL577:
1133:DRIVER/FatFs/source/ff.c **** }
 4659              		.loc 1 1133 2 is_stmt 1 view .LVU1574
1134:DRIVER/FatFs/source/ff.c **** 
 4660              		.loc 1 1134 1 is_stmt 0 view .LVU1575
 4661 0020 2846     		mov	r0, r5
 4662 0022 70BD     		pop	{r4, r5, r6, pc}
 4663              	.LVL578:
 4664              	.L342:
1117:DRIVER/FatFs/source/ff.c **** 			/* Create FSInfo structure */
 4665              		.loc 1 1117 36 discriminator 1 view .LVU1576
 4666 0024 6379     		ldrb	r3, [r4, #5]	@ zero_extendqisi2
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 168


1117:DRIVER/FatFs/source/ff.c **** 			/* Create FSInfo structure */
 4667              		.loc 1 1117 31 discriminator 1 view .LVU1577
 4668 0026 012B     		cmp	r3, #1
 4669 0028 F3D1     		bne	.L339
1119:DRIVER/FatFs/source/ff.c **** 			st_word(fs->win + BS_55AA, 0xAA55);					/* Boot signature */
 4670              		.loc 1 1119 4 is_stmt 1 view .LVU1578
1119:DRIVER/FatFs/source/ff.c **** 			st_word(fs->win + BS_55AA, 0xAA55);					/* Boot signature */
 4671              		.loc 1 1119 13 is_stmt 0 view .LVU1579
 4672 002a 04F13806 		add	r6, r4, #56
1119:DRIVER/FatFs/source/ff.c **** 			st_word(fs->win + BS_55AA, 0xAA55);					/* Boot signature */
 4673              		.loc 1 1119 4 view .LVU1580
 4674 002e 4FF48052 		mov	r2, #4096
 4675 0032 0021     		movs	r1, #0
 4676 0034 3046     		mov	r0, r6
 4677              	.LVL579:
1119:DRIVER/FatFs/source/ff.c **** 			st_word(fs->win + BS_55AA, 0xAA55);					/* Boot signature */
 4678              		.loc 1 1119 4 view .LVU1581
 4679 0036 FFF7FEFF 		bl	memset
 4680              	.LVL580:
1120:DRIVER/FatFs/source/ff.c **** 			st_dword(fs->win + FSI_LeadSig, 0x41615252);		/* Leading signature */
 4681              		.loc 1 1120 4 is_stmt 1 view .LVU1582
 4682 003a 4AF65521 		movw	r1, #43605
 4683 003e 04F23620 		addw	r0, r4, #566
 4684 0042 FFF7FEFF 		bl	st_word
 4685              	.LVL581:
1121:DRIVER/FatFs/source/ff.c **** 			st_dword(fs->win + FSI_StrucSig, 0x61417272);		/* Structure signature */
 4686              		.loc 1 1121 4 view .LVU1583
 4687 0046 0F49     		ldr	r1, .L343
 4688 0048 3046     		mov	r0, r6
 4689 004a FFF7FEFF 		bl	st_dword
 4690              	.LVL582:
1122:DRIVER/FatFs/source/ff.c **** 			st_dword(fs->win + FSI_Free_Count, fs->free_clst);	/* Number of free clusters */
 4691              		.loc 1 1122 4 view .LVU1584
 4692 004e 0E49     		ldr	r1, .L343+4
 4693 0050 04F50770 		add	r0, r4, #540
 4694 0054 FFF7FEFF 		bl	st_dword
 4695              	.LVL583:
1123:DRIVER/FatFs/source/ff.c **** 			st_dword(fs->win + FSI_Nxt_Free, fs->last_clst);	/* Last allocated culuster */
 4696              		.loc 1 1123 4 view .LVU1585
 4697 0058 A169     		ldr	r1, [r4, #24]
 4698 005a 04F50870 		add	r0, r4, #544
 4699 005e FFF7FEFF 		bl	st_dword
 4700              	.LVL584:
1124:DRIVER/FatFs/source/ff.c **** 			fs->winsect = fs->volbase + 1;						/* Write it into the FSInfo sector (Next to VBR) */
 4701              		.loc 1 1124 4 view .LVU1586
 4702 0062 6169     		ldr	r1, [r4, #20]
 4703 0064 04F50970 		add	r0, r4, #548
 4704 0068 FFF7FEFF 		bl	st_dword
 4705              	.LVL585:
1125:DRIVER/FatFs/source/ff.c **** 			disk_write(fs->pdrv, fs->win, fs->winsect, 1);
 4706              		.loc 1 1125 4 view .LVU1587
1125:DRIVER/FatFs/source/ff.c **** 			disk_write(fs->pdrv, fs->win, fs->winsect, 1);
 4707              		.loc 1 1125 20 is_stmt 0 view .LVU1588
 4708 006c 626A     		ldr	r2, [r4, #36]
1125:DRIVER/FatFs/source/ff.c **** 			disk_write(fs->pdrv, fs->win, fs->winsect, 1);
 4709              		.loc 1 1125 30 view .LVU1589
 4710 006e 0132     		adds	r2, r2, #1
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 169


1125:DRIVER/FatFs/source/ff.c **** 			disk_write(fs->pdrv, fs->win, fs->winsect, 1);
 4711              		.loc 1 1125 16 view .LVU1590
 4712 0070 6263     		str	r2, [r4, #52]
1126:DRIVER/FatFs/source/ff.c **** 			fs->fsi_flag = 0;
 4713              		.loc 1 1126 4 is_stmt 1 view .LVU1591
 4714 0072 0123     		movs	r3, #1
 4715 0074 3146     		mov	r1, r6
 4716 0076 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 4717 0078 FFF7FEFF 		bl	disk_write
 4718              	.LVL586:
1127:DRIVER/FatFs/source/ff.c **** 		}
 4719              		.loc 1 1127 4 view .LVU1592
1127:DRIVER/FatFs/source/ff.c **** 		}
 4720              		.loc 1 1127 17 is_stmt 0 view .LVU1593
 4721 007c 0023     		movs	r3, #0
 4722 007e 6371     		strb	r3, [r4, #5]
 4723 0080 C7E7     		b	.L339
 4724              	.L344:
 4725 0082 00BF     		.align	2
 4726              	.L343:
 4727 0084 52526141 		.word	1096897106
 4728 0088 72724161 		.word	1631679090
 4729              		.cfi_endproc
 4730              	.LFE10:
 4732              		.section	.text.create_partition,"ax",%progbits
 4733              		.align	1
 4734              		.syntax unified
 4735              		.thumb
 4736              		.thumb_func
 4738              	create_partition:
 4739              	.LVL587:
 4740              	.LFB55:
3641:DRIVER/FatFs/source/ff.c **** 
3642:DRIVER/FatFs/source/ff.c **** 
3643:DRIVER/FatFs/source/ff.c **** 
3644:DRIVER/FatFs/source/ff.c **** 
3645:DRIVER/FatFs/source/ff.c **** /*---------------------------------------------------------------------------
3646:DRIVER/FatFs/source/ff.c **** 
3647:DRIVER/FatFs/source/ff.c ****    Public Functions (FatFs API)
3648:DRIVER/FatFs/source/ff.c **** 
3649:DRIVER/FatFs/source/ff.c **** ----------------------------------------------------------------------------*/
3650:DRIVER/FatFs/source/ff.c **** 
3651:DRIVER/FatFs/source/ff.c **** 
3652:DRIVER/FatFs/source/ff.c **** 
3653:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
3654:DRIVER/FatFs/source/ff.c **** /* Mount/Unmount a Logical Drive                                         */
3655:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
3656:DRIVER/FatFs/source/ff.c **** 
3657:DRIVER/FatFs/source/ff.c **** FRESULT f_mount (
3658:DRIVER/FatFs/source/ff.c **** 	FATFS* fs,			/* Pointer to the filesystem object to be registered (NULL:unmount)*/
3659:DRIVER/FatFs/source/ff.c **** 	const TCHAR* path,	/* Logical drive number to be mounted/unmounted */
3660:DRIVER/FatFs/source/ff.c **** 	BYTE opt			/* Mount option: 0=Do not mount (delayed mount), 1=Mount immediately */
3661:DRIVER/FatFs/source/ff.c **** )
3662:DRIVER/FatFs/source/ff.c **** {
3663:DRIVER/FatFs/source/ff.c **** 	FATFS *cfs;
3664:DRIVER/FatFs/source/ff.c **** 	int vol;
3665:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 170


3666:DRIVER/FatFs/source/ff.c **** 	const TCHAR *rp = path;
3667:DRIVER/FatFs/source/ff.c **** 
3668:DRIVER/FatFs/source/ff.c **** 
3669:DRIVER/FatFs/source/ff.c **** 	/* Get volume ID (logical drive number) */
3670:DRIVER/FatFs/source/ff.c **** 	vol = get_ldnumber(&rp);
3671:DRIVER/FatFs/source/ff.c **** 	if (vol < 0) return FR_INVALID_DRIVE;
3672:DRIVER/FatFs/source/ff.c **** 	cfs = FatFs[vol];			/* Pointer to the filesystem object of the volume */
3673:DRIVER/FatFs/source/ff.c **** 
3674:DRIVER/FatFs/source/ff.c **** 	if (cfs) {					/* Unregister current filesystem object if regsitered */
3675:DRIVER/FatFs/source/ff.c **** 		FatFs[vol] = 0;
3676:DRIVER/FatFs/source/ff.c **** #if FF_FS_LOCK
3677:DRIVER/FatFs/source/ff.c **** 		clear_share(cfs);
3678:DRIVER/FatFs/source/ff.c **** #endif
3679:DRIVER/FatFs/source/ff.c **** #if FF_FS_REENTRANT				/* Discard mutex of the current volume */
3680:DRIVER/FatFs/source/ff.c **** 		ff_mutex_delete(vol);
3681:DRIVER/FatFs/source/ff.c **** #endif
3682:DRIVER/FatFs/source/ff.c **** 		cfs->fs_type = 0;		/* Invalidate the filesystem object to be unregistered */
3683:DRIVER/FatFs/source/ff.c **** 	}
3684:DRIVER/FatFs/source/ff.c **** 
3685:DRIVER/FatFs/source/ff.c **** 	if (fs) {					/* Register new filesystem object */
3686:DRIVER/FatFs/source/ff.c **** 		fs->pdrv = LD2PD(vol);	/* Volume hosting physical drive */
3687:DRIVER/FatFs/source/ff.c **** #if FF_FS_REENTRANT				/* Create a volume mutex */
3688:DRIVER/FatFs/source/ff.c **** 		fs->ldrv = (BYTE)vol;	/* Owner volume ID */
3689:DRIVER/FatFs/source/ff.c **** 		if (!ff_mutex_create(vol)) return FR_INT_ERR;
3690:DRIVER/FatFs/source/ff.c **** #if FF_FS_LOCK
3691:DRIVER/FatFs/source/ff.c **** 		if (SysLock == 0) {		/* Create a system mutex if needed */
3692:DRIVER/FatFs/source/ff.c **** 			if (!ff_mutex_create(FF_VOLUMES)) {
3693:DRIVER/FatFs/source/ff.c **** 				ff_mutex_delete(vol);
3694:DRIVER/FatFs/source/ff.c **** 				return FR_INT_ERR;
3695:DRIVER/FatFs/source/ff.c **** 			}
3696:DRIVER/FatFs/source/ff.c **** 			SysLock = 1;		/* System mutex is ready */
3697:DRIVER/FatFs/source/ff.c **** 		}
3698:DRIVER/FatFs/source/ff.c **** #endif
3699:DRIVER/FatFs/source/ff.c **** #endif
3700:DRIVER/FatFs/source/ff.c **** 		fs->fs_type = 0;		/* Invalidate the new filesystem object */
3701:DRIVER/FatFs/source/ff.c **** 		FatFs[vol] = fs;		/* Register new fs object */
3702:DRIVER/FatFs/source/ff.c **** 	}
3703:DRIVER/FatFs/source/ff.c **** 
3704:DRIVER/FatFs/source/ff.c **** 	if (opt == 0) return FR_OK;	/* Do not mount now, it will be mounted in subsequent file functions *
3705:DRIVER/FatFs/source/ff.c **** 
3706:DRIVER/FatFs/source/ff.c **** 	res = mount_volume(&path, &fs, 0);	/* Force mounted the volume */
3707:DRIVER/FatFs/source/ff.c **** 	LEAVE_FF(fs, res);
3708:DRIVER/FatFs/source/ff.c **** }
3709:DRIVER/FatFs/source/ff.c **** 
3710:DRIVER/FatFs/source/ff.c **** 
3711:DRIVER/FatFs/source/ff.c **** 
3712:DRIVER/FatFs/source/ff.c **** 
3713:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
3714:DRIVER/FatFs/source/ff.c **** /* Open or Create a File                                                 */
3715:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
3716:DRIVER/FatFs/source/ff.c **** 
3717:DRIVER/FatFs/source/ff.c **** FRESULT f_open (
3718:DRIVER/FatFs/source/ff.c **** 	FIL* fp,			/* Pointer to the blank file object */
3719:DRIVER/FatFs/source/ff.c **** 	const TCHAR* path,	/* Pointer to the file name */
3720:DRIVER/FatFs/source/ff.c **** 	BYTE mode			/* Access mode and open mode flags */
3721:DRIVER/FatFs/source/ff.c **** )
3722:DRIVER/FatFs/source/ff.c **** {
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 171


3723:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
3724:DRIVER/FatFs/source/ff.c **** 	DIR dj;
3725:DRIVER/FatFs/source/ff.c **** 	FATFS *fs;
3726:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY
3727:DRIVER/FatFs/source/ff.c **** 	DWORD cl, bcs, clst, tm;
3728:DRIVER/FatFs/source/ff.c **** 	LBA_t sc;
3729:DRIVER/FatFs/source/ff.c **** 	FSIZE_t ofs;
3730:DRIVER/FatFs/source/ff.c **** #endif
3731:DRIVER/FatFs/source/ff.c **** 	DEF_NAMBUF
3732:DRIVER/FatFs/source/ff.c **** 
3733:DRIVER/FatFs/source/ff.c **** 
3734:DRIVER/FatFs/source/ff.c **** 	if (!fp) return FR_INVALID_OBJECT;
3735:DRIVER/FatFs/source/ff.c **** 
3736:DRIVER/FatFs/source/ff.c **** 	/* Get logical drive number */
3737:DRIVER/FatFs/source/ff.c **** 	mode &= FF_FS_READONLY ? FA_READ : FA_READ | FA_WRITE | FA_CREATE_ALWAYS | FA_CREATE_NEW | FA_OPEN
3738:DRIVER/FatFs/source/ff.c **** 	res = mount_volume(&path, &fs, mode);
3739:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
3740:DRIVER/FatFs/source/ff.c **** 		dj.obj.fs = fs;
3741:DRIVER/FatFs/source/ff.c **** 		INIT_NAMBUF(fs);
3742:DRIVER/FatFs/source/ff.c **** 		res = follow_path(&dj, path);	/* Follow the file path */
3743:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY	/* Read/Write configuration */
3744:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK) {
3745:DRIVER/FatFs/source/ff.c **** 			if (dj.fn[NSFLAG] & NS_NONAME) {	/* Origin directory itself? */
3746:DRIVER/FatFs/source/ff.c **** 				res = FR_INVALID_NAME;
3747:DRIVER/FatFs/source/ff.c **** 			}
3748:DRIVER/FatFs/source/ff.c **** #if FF_FS_LOCK
3749:DRIVER/FatFs/source/ff.c **** 			else {
3750:DRIVER/FatFs/source/ff.c **** 				res = chk_share(&dj, (mode & ~FA_READ) ? 1 : 0);	/* Check if the file can be used */
3751:DRIVER/FatFs/source/ff.c **** 			}
3752:DRIVER/FatFs/source/ff.c **** #endif
3753:DRIVER/FatFs/source/ff.c **** 		}
3754:DRIVER/FatFs/source/ff.c **** 		/* Create or Open a file */
3755:DRIVER/FatFs/source/ff.c **** 		if (mode & (FA_CREATE_ALWAYS | FA_OPEN_ALWAYS | FA_CREATE_NEW)) {
3756:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) {					/* No file, create new */
3757:DRIVER/FatFs/source/ff.c **** 				if (res == FR_NO_FILE) {		/* There is no file to open, create a new entry */
3758:DRIVER/FatFs/source/ff.c **** #if FF_FS_LOCK
3759:DRIVER/FatFs/source/ff.c **** 					res = enq_share() ? dir_register(&dj) : FR_TOO_MANY_OPEN_FILES;
3760:DRIVER/FatFs/source/ff.c **** #else
3761:DRIVER/FatFs/source/ff.c **** 					res = dir_register(&dj);
3762:DRIVER/FatFs/source/ff.c **** #endif
3763:DRIVER/FatFs/source/ff.c **** 				}
3764:DRIVER/FatFs/source/ff.c **** 				mode |= FA_CREATE_ALWAYS;		/* File is created */
3765:DRIVER/FatFs/source/ff.c **** 			}
3766:DRIVER/FatFs/source/ff.c **** 			else {								/* Any object with the same name is already existing */
3767:DRIVER/FatFs/source/ff.c **** 				if (dj.obj.attr & (AM_RDO | AM_DIR)) {	/* Cannot overwrite it (R/O or DIR) */
3768:DRIVER/FatFs/source/ff.c **** 					res = FR_DENIED;
3769:DRIVER/FatFs/source/ff.c **** 				} else {
3770:DRIVER/FatFs/source/ff.c **** 					if (mode & FA_CREATE_NEW) res = FR_EXIST;	/* Cannot create as new file */
3771:DRIVER/FatFs/source/ff.c **** 				}
3772:DRIVER/FatFs/source/ff.c **** 			}
3773:DRIVER/FatFs/source/ff.c **** 			if (res == FR_OK && (mode & FA_CREATE_ALWAYS)) {	/* Truncate the file if overwrite mode */
3774:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
3775:DRIVER/FatFs/source/ff.c **** 				if (fs->fs_type == FS_EXFAT) {
3776:DRIVER/FatFs/source/ff.c **** 					/* Get current allocation info */
3777:DRIVER/FatFs/source/ff.c **** 					fp->obj.fs = fs;
3778:DRIVER/FatFs/source/ff.c **** 					init_alloc_info(fs, &fp->obj);
3779:DRIVER/FatFs/source/ff.c **** 					/* Set directory entry block initial state */
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 172


3780:DRIVER/FatFs/source/ff.c **** 					memset(fs->dirbuf + 2, 0, 30);	/* Clear 85 entry except for NumSec */
3781:DRIVER/FatFs/source/ff.c **** 					memset(fs->dirbuf + 38, 0, 26);	/* Clear C0 entry except for NumName and NameHash */
3782:DRIVER/FatFs/source/ff.c **** 					fs->dirbuf[XDIR_Attr] = AM_ARC;
3783:DRIVER/FatFs/source/ff.c **** 					st_dword(fs->dirbuf + XDIR_CrtTime, GET_FATTIME());
3784:DRIVER/FatFs/source/ff.c **** 					fs->dirbuf[XDIR_GenFlags] = 1;
3785:DRIVER/FatFs/source/ff.c **** 					res = store_xdir(&dj);
3786:DRIVER/FatFs/source/ff.c **** 					if (res == FR_OK && fp->obj.sclust != 0) {	/* Remove the cluster chain if exist */
3787:DRIVER/FatFs/source/ff.c **** 						res = remove_chain(&fp->obj, fp->obj.sclust, 0);
3788:DRIVER/FatFs/source/ff.c **** 						fs->last_clst = fp->obj.sclust - 1;		/* Reuse the cluster hole */
3789:DRIVER/FatFs/source/ff.c **** 					}
3790:DRIVER/FatFs/source/ff.c **** 				} else
3791:DRIVER/FatFs/source/ff.c **** #endif
3792:DRIVER/FatFs/source/ff.c **** 				{
3793:DRIVER/FatFs/source/ff.c **** 					/* Set directory entry initial state */
3794:DRIVER/FatFs/source/ff.c **** 					tm = GET_FATTIME();					/* Set created time */
3795:DRIVER/FatFs/source/ff.c **** 					st_dword(dj.dir + DIR_CrtTime, tm);
3796:DRIVER/FatFs/source/ff.c **** 					st_dword(dj.dir + DIR_ModTime, tm);
3797:DRIVER/FatFs/source/ff.c **** 					cl = ld_clust(fs, dj.dir);			/* Get current cluster chain */
3798:DRIVER/FatFs/source/ff.c **** 					dj.dir[DIR_Attr] = AM_ARC;			/* Reset attribute */
3799:DRIVER/FatFs/source/ff.c **** 					st_clust(fs, dj.dir, 0);			/* Reset file allocation info */
3800:DRIVER/FatFs/source/ff.c **** 					st_dword(dj.dir + DIR_FileSize, 0);
3801:DRIVER/FatFs/source/ff.c **** 					fs->wflag = 1;
3802:DRIVER/FatFs/source/ff.c **** 					if (cl != 0) {						/* Remove the cluster chain if exist */
3803:DRIVER/FatFs/source/ff.c **** 						sc = fs->winsect;
3804:DRIVER/FatFs/source/ff.c **** 						res = remove_chain(&dj.obj, cl, 0);
3805:DRIVER/FatFs/source/ff.c **** 						if (res == FR_OK) {
3806:DRIVER/FatFs/source/ff.c **** 							res = move_window(fs, sc);
3807:DRIVER/FatFs/source/ff.c **** 							fs->last_clst = cl - 1;		/* Reuse the cluster hole */
3808:DRIVER/FatFs/source/ff.c **** 						}
3809:DRIVER/FatFs/source/ff.c **** 					}
3810:DRIVER/FatFs/source/ff.c **** 				}
3811:DRIVER/FatFs/source/ff.c **** 			}
3812:DRIVER/FatFs/source/ff.c **** 		}
3813:DRIVER/FatFs/source/ff.c **** 		else {	/* Open an existing file */
3814:DRIVER/FatFs/source/ff.c **** 			if (res == FR_OK) {					/* Is the object exsiting? */
3815:DRIVER/FatFs/source/ff.c **** 				if (dj.obj.attr & AM_DIR) {		/* File open against a directory */
3816:DRIVER/FatFs/source/ff.c **** 					res = FR_NO_FILE;
3817:DRIVER/FatFs/source/ff.c **** 				} else {
3818:DRIVER/FatFs/source/ff.c **** 					if ((mode & FA_WRITE) && (dj.obj.attr & AM_RDO)) { /* Write mode open against R/O file */
3819:DRIVER/FatFs/source/ff.c **** 						res = FR_DENIED;
3820:DRIVER/FatFs/source/ff.c **** 					}
3821:DRIVER/FatFs/source/ff.c **** 				}
3822:DRIVER/FatFs/source/ff.c **** 			}
3823:DRIVER/FatFs/source/ff.c **** 		}
3824:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK) {
3825:DRIVER/FatFs/source/ff.c **** 			if (mode & FA_CREATE_ALWAYS) mode |= FA_MODIFIED;	/* Set file change flag if created or overwrit
3826:DRIVER/FatFs/source/ff.c **** 			fp->dir_sect = fs->winsect;			/* Pointer to the directory entry */
3827:DRIVER/FatFs/source/ff.c **** 			fp->dir_ptr = dj.dir;
3828:DRIVER/FatFs/source/ff.c **** #if FF_FS_LOCK
3829:DRIVER/FatFs/source/ff.c **** 			fp->obj.lockid = inc_share(&dj, (mode & ~FA_READ) ? 1 : 0);	/* Lock the file for this session */
3830:DRIVER/FatFs/source/ff.c **** 			if (fp->obj.lockid == 0) res = FR_INT_ERR;
3831:DRIVER/FatFs/source/ff.c **** #endif
3832:DRIVER/FatFs/source/ff.c **** 		}
3833:DRIVER/FatFs/source/ff.c **** #else		/* R/O configuration */
3834:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK) {
3835:DRIVER/FatFs/source/ff.c **** 			if (dj.fn[NSFLAG] & NS_NONAME) {	/* Is it origin directory itself? */
3836:DRIVER/FatFs/source/ff.c **** 				res = FR_INVALID_NAME;
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 173


3837:DRIVER/FatFs/source/ff.c **** 			} else {
3838:DRIVER/FatFs/source/ff.c **** 				if (dj.obj.attr & AM_DIR) {		/* Is it a directory? */
3839:DRIVER/FatFs/source/ff.c **** 					res = FR_NO_FILE;
3840:DRIVER/FatFs/source/ff.c **** 				}
3841:DRIVER/FatFs/source/ff.c **** 			}
3842:DRIVER/FatFs/source/ff.c **** 		}
3843:DRIVER/FatFs/source/ff.c **** #endif
3844:DRIVER/FatFs/source/ff.c **** 
3845:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK) {
3846:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
3847:DRIVER/FatFs/source/ff.c **** 			if (fs->fs_type == FS_EXFAT) {
3848:DRIVER/FatFs/source/ff.c **** 				fp->obj.c_scl = dj.obj.sclust;							/* Get containing directory info */
3849:DRIVER/FatFs/source/ff.c **** 				fp->obj.c_size = ((DWORD)dj.obj.objsize & 0xFFFFFF00) | dj.obj.stat;
3850:DRIVER/FatFs/source/ff.c **** 				fp->obj.c_ofs = dj.blk_ofs;
3851:DRIVER/FatFs/source/ff.c **** 				init_alloc_info(fs, &fp->obj);
3852:DRIVER/FatFs/source/ff.c **** 			} else
3853:DRIVER/FatFs/source/ff.c **** #endif
3854:DRIVER/FatFs/source/ff.c **** 			{
3855:DRIVER/FatFs/source/ff.c **** 				fp->obj.sclust = ld_clust(fs, dj.dir);					/* Get object allocation info */
3856:DRIVER/FatFs/source/ff.c **** 				fp->obj.objsize = ld_dword(dj.dir + DIR_FileSize);
3857:DRIVER/FatFs/source/ff.c **** 			}
3858:DRIVER/FatFs/source/ff.c **** #if FF_USE_FASTSEEK
3859:DRIVER/FatFs/source/ff.c **** 			fp->cltbl = 0;		/* Disable fast seek mode */
3860:DRIVER/FatFs/source/ff.c **** #endif
3861:DRIVER/FatFs/source/ff.c **** 			fp->obj.fs = fs;	/* Validate the file object */
3862:DRIVER/FatFs/source/ff.c **** 			fp->obj.id = fs->id;
3863:DRIVER/FatFs/source/ff.c **** 			fp->flag = mode;	/* Set file access mode */
3864:DRIVER/FatFs/source/ff.c **** 			fp->err = 0;		/* Clear error flag */
3865:DRIVER/FatFs/source/ff.c **** 			fp->sect = 0;		/* Invalidate current data sector */
3866:DRIVER/FatFs/source/ff.c **** 			fp->fptr = 0;		/* Set file pointer top of the file */
3867:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY
3868:DRIVER/FatFs/source/ff.c **** #if !FF_FS_TINY
3869:DRIVER/FatFs/source/ff.c **** 			memset(fp->buf, 0, sizeof fp->buf);	/* Clear sector buffer */
3870:DRIVER/FatFs/source/ff.c **** #endif
3871:DRIVER/FatFs/source/ff.c **** 			if ((mode & FA_SEEKEND) && fp->obj.objsize > 0) {	/* Seek to end of file if FA_OPEN_APPEND is sp
3872:DRIVER/FatFs/source/ff.c **** 				fp->fptr = fp->obj.objsize;			/* Offset to seek */
3873:DRIVER/FatFs/source/ff.c **** 				bcs = (DWORD)fs->csize * SS(fs);	/* Cluster size in byte */
3874:DRIVER/FatFs/source/ff.c **** 				clst = fp->obj.sclust;				/* Follow the cluster chain */
3875:DRIVER/FatFs/source/ff.c **** 				for (ofs = fp->obj.objsize; res == FR_OK && ofs > bcs; ofs -= bcs) {
3876:DRIVER/FatFs/source/ff.c **** 					clst = get_fat(&fp->obj, clst);
3877:DRIVER/FatFs/source/ff.c **** 					if (clst <= 1) res = FR_INT_ERR;
3878:DRIVER/FatFs/source/ff.c **** 					if (clst == 0xFFFFFFFF) res = FR_DISK_ERR;
3879:DRIVER/FatFs/source/ff.c **** 				}
3880:DRIVER/FatFs/source/ff.c **** 				fp->clust = clst;
3881:DRIVER/FatFs/source/ff.c **** 				if (res == FR_OK && ofs % SS(fs)) {	/* Fill sector buffer if not on the sector boundary */
3882:DRIVER/FatFs/source/ff.c **** 					sc = clst2sect(fs, clst);
3883:DRIVER/FatFs/source/ff.c **** 					if (sc == 0) {
3884:DRIVER/FatFs/source/ff.c **** 						res = FR_INT_ERR;
3885:DRIVER/FatFs/source/ff.c **** 					} else {
3886:DRIVER/FatFs/source/ff.c **** 						fp->sect = sc + (DWORD)(ofs / SS(fs));
3887:DRIVER/FatFs/source/ff.c **** #if !FF_FS_TINY
3888:DRIVER/FatFs/source/ff.c **** 						if (disk_read(fs->pdrv, fp->buf, fp->sect, 1) != RES_OK) res = FR_DISK_ERR;
3889:DRIVER/FatFs/source/ff.c **** #endif
3890:DRIVER/FatFs/source/ff.c **** 					}
3891:DRIVER/FatFs/source/ff.c **** 				}
3892:DRIVER/FatFs/source/ff.c **** #if FF_FS_LOCK
3893:DRIVER/FatFs/source/ff.c **** 				if (res != FR_OK) dec_share(fp->obj.lockid); /* Decrement file open counter if seek failed */
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 174


3894:DRIVER/FatFs/source/ff.c **** #endif
3895:DRIVER/FatFs/source/ff.c **** 			}
3896:DRIVER/FatFs/source/ff.c **** #endif
3897:DRIVER/FatFs/source/ff.c **** 		}
3898:DRIVER/FatFs/source/ff.c **** 
3899:DRIVER/FatFs/source/ff.c **** 		FREE_NAMBUF();
3900:DRIVER/FatFs/source/ff.c **** 	}
3901:DRIVER/FatFs/source/ff.c **** 
3902:DRIVER/FatFs/source/ff.c **** 	if (res != FR_OK) fp->obj.fs = 0;	/* Invalidate file object on error */
3903:DRIVER/FatFs/source/ff.c **** 
3904:DRIVER/FatFs/source/ff.c **** 	LEAVE_FF(fs, res);
3905:DRIVER/FatFs/source/ff.c **** }
3906:DRIVER/FatFs/source/ff.c **** 
3907:DRIVER/FatFs/source/ff.c **** 
3908:DRIVER/FatFs/source/ff.c **** 
3909:DRIVER/FatFs/source/ff.c **** 
3910:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
3911:DRIVER/FatFs/source/ff.c **** /* Read File                                                             */
3912:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
3913:DRIVER/FatFs/source/ff.c **** 
3914:DRIVER/FatFs/source/ff.c **** FRESULT f_read (
3915:DRIVER/FatFs/source/ff.c **** 	FIL* fp, 	/* Open file to be read */
3916:DRIVER/FatFs/source/ff.c **** 	void* buff,	/* Data buffer to store the read data */
3917:DRIVER/FatFs/source/ff.c **** 	UINT btr,	/* Number of bytes to read */
3918:DRIVER/FatFs/source/ff.c **** 	UINT* br	/* Number of bytes read */
3919:DRIVER/FatFs/source/ff.c **** )
3920:DRIVER/FatFs/source/ff.c **** {
3921:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
3922:DRIVER/FatFs/source/ff.c **** 	FATFS *fs;
3923:DRIVER/FatFs/source/ff.c **** 	DWORD clst;
3924:DRIVER/FatFs/source/ff.c **** 	LBA_t sect;
3925:DRIVER/FatFs/source/ff.c **** 	FSIZE_t remain;
3926:DRIVER/FatFs/source/ff.c **** 	UINT rcnt, cc, csect;
3927:DRIVER/FatFs/source/ff.c **** 	BYTE *rbuff = (BYTE*)buff;
3928:DRIVER/FatFs/source/ff.c **** 
3929:DRIVER/FatFs/source/ff.c **** 
3930:DRIVER/FatFs/source/ff.c **** 	*br = 0;	/* Clear read byte counter */
3931:DRIVER/FatFs/source/ff.c **** 	res = validate(&fp->obj, &fs);				/* Check validity of the file object */
3932:DRIVER/FatFs/source/ff.c **** 	if (res != FR_OK || (res = (FRESULT)fp->err) != FR_OK) LEAVE_FF(fs, res);	/* Check validity */
3933:DRIVER/FatFs/source/ff.c **** 	if (!(fp->flag & FA_READ)) LEAVE_FF(fs, FR_DENIED); /* Check access mode */
3934:DRIVER/FatFs/source/ff.c **** 	remain = fp->obj.objsize - fp->fptr;
3935:DRIVER/FatFs/source/ff.c **** 	if (btr > remain) btr = (UINT)remain;		/* Truncate btr by remaining bytes */
3936:DRIVER/FatFs/source/ff.c **** 
3937:DRIVER/FatFs/source/ff.c **** 	for ( ; btr > 0; btr -= rcnt, *br += rcnt, rbuff += rcnt, fp->fptr += rcnt) {	/* Repeat until btr 
3938:DRIVER/FatFs/source/ff.c **** 		if (fp->fptr % SS(fs) == 0) {			/* On the sector boundary? */
3939:DRIVER/FatFs/source/ff.c **** 			csect = (UINT)(fp->fptr / SS(fs) & (fs->csize - 1));	/* Sector offset in the cluster */
3940:DRIVER/FatFs/source/ff.c **** 			if (csect == 0) {					/* On the cluster boundary? */
3941:DRIVER/FatFs/source/ff.c **** 				if (fp->fptr == 0) {			/* On the top of the file? */
3942:DRIVER/FatFs/source/ff.c **** 					clst = fp->obj.sclust;		/* Follow cluster chain from the origin */
3943:DRIVER/FatFs/source/ff.c **** 				} else {						/* Middle or end of the file */
3944:DRIVER/FatFs/source/ff.c **** #if FF_USE_FASTSEEK
3945:DRIVER/FatFs/source/ff.c **** 					if (fp->cltbl) {
3946:DRIVER/FatFs/source/ff.c **** 						clst = clmt_clust(fp, fp->fptr);	/* Get cluster# from the CLMT */
3947:DRIVER/FatFs/source/ff.c **** 					} else
3948:DRIVER/FatFs/source/ff.c **** #endif
3949:DRIVER/FatFs/source/ff.c **** 					{
3950:DRIVER/FatFs/source/ff.c **** 						clst = get_fat(&fp->obj, fp->clust);	/* Follow cluster chain on the FAT */
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 175


3951:DRIVER/FatFs/source/ff.c **** 					}
3952:DRIVER/FatFs/source/ff.c **** 				}
3953:DRIVER/FatFs/source/ff.c **** 				if (clst < 2) ABORT(fs, FR_INT_ERR);
3954:DRIVER/FatFs/source/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
3955:DRIVER/FatFs/source/ff.c **** 				fp->clust = clst;				/* Update current cluster */
3956:DRIVER/FatFs/source/ff.c **** 			}
3957:DRIVER/FatFs/source/ff.c **** 			sect = clst2sect(fs, fp->clust);	/* Get current sector */
3958:DRIVER/FatFs/source/ff.c **** 			if (sect == 0) ABORT(fs, FR_INT_ERR);
3959:DRIVER/FatFs/source/ff.c **** 			sect += csect;
3960:DRIVER/FatFs/source/ff.c **** 			cc = btr / SS(fs);					/* When remaining bytes >= sector size, */
3961:DRIVER/FatFs/source/ff.c **** 			if (cc > 0) {						/* Read maximum contiguous sectors directly */
3962:DRIVER/FatFs/source/ff.c **** 				if (csect + cc > fs->csize) {	/* Clip at cluster boundary */
3963:DRIVER/FatFs/source/ff.c **** 					cc = fs->csize - csect;
3964:DRIVER/FatFs/source/ff.c **** 				}
3965:DRIVER/FatFs/source/ff.c **** 				if (disk_read(fs->pdrv, rbuff, sect, cc) != RES_OK) ABORT(fs, FR_DISK_ERR);
3966:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY && FF_FS_MINIMIZE <= 2		/* Replace one of the read sectors with cached data if 
3967:DRIVER/FatFs/source/ff.c **** #if FF_FS_TINY
3968:DRIVER/FatFs/source/ff.c **** 				if (fs->wflag && fs->winsect - sect < cc) {
3969:DRIVER/FatFs/source/ff.c **** 					memcpy(rbuff + ((fs->winsect - sect) * SS(fs)), fs->win, SS(fs));
3970:DRIVER/FatFs/source/ff.c **** 				}
3971:DRIVER/FatFs/source/ff.c **** #else
3972:DRIVER/FatFs/source/ff.c **** 				if ((fp->flag & FA_DIRTY) && fp->sect - sect < cc) {
3973:DRIVER/FatFs/source/ff.c **** 					memcpy(rbuff + ((fp->sect - sect) * SS(fs)), fp->buf, SS(fs));
3974:DRIVER/FatFs/source/ff.c **** 				}
3975:DRIVER/FatFs/source/ff.c **** #endif
3976:DRIVER/FatFs/source/ff.c **** #endif
3977:DRIVER/FatFs/source/ff.c **** 				rcnt = SS(fs) * cc;				/* Number of bytes transferred */
3978:DRIVER/FatFs/source/ff.c **** 				continue;
3979:DRIVER/FatFs/source/ff.c **** 			}
3980:DRIVER/FatFs/source/ff.c **** #if !FF_FS_TINY
3981:DRIVER/FatFs/source/ff.c **** 			if (fp->sect != sect) {			/* Load data sector if not in cache */
3982:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY
3983:DRIVER/FatFs/source/ff.c **** 				if (fp->flag & FA_DIRTY) {		/* Write-back dirty sector cache */
3984:DRIVER/FatFs/source/ff.c **** 					if (disk_write(fs->pdrv, fp->buf, fp->sect, 1) != RES_OK) ABORT(fs, FR_DISK_ERR);
3985:DRIVER/FatFs/source/ff.c **** 					fp->flag &= (BYTE)~FA_DIRTY;
3986:DRIVER/FatFs/source/ff.c **** 				}
3987:DRIVER/FatFs/source/ff.c **** #endif
3988:DRIVER/FatFs/source/ff.c **** 				if (disk_read(fs->pdrv, fp->buf, sect, 1) != RES_OK) ABORT(fs, FR_DISK_ERR);	/* Fill sector cac
3989:DRIVER/FatFs/source/ff.c **** 			}
3990:DRIVER/FatFs/source/ff.c **** #endif
3991:DRIVER/FatFs/source/ff.c **** 			fp->sect = sect;
3992:DRIVER/FatFs/source/ff.c **** 		}
3993:DRIVER/FatFs/source/ff.c **** 		rcnt = SS(fs) - (UINT)fp->fptr % SS(fs);	/* Number of bytes remains in the sector */
3994:DRIVER/FatFs/source/ff.c **** 		if (rcnt > btr) rcnt = btr;					/* Clip it by btr if needed */
3995:DRIVER/FatFs/source/ff.c **** #if FF_FS_TINY
3996:DRIVER/FatFs/source/ff.c **** 		if (move_window(fs, fp->sect) != FR_OK) ABORT(fs, FR_DISK_ERR);	/* Move sector window */
3997:DRIVER/FatFs/source/ff.c **** 		memcpy(rbuff, fs->win + fp->fptr % SS(fs), rcnt);	/* Extract partial sector */
3998:DRIVER/FatFs/source/ff.c **** #else
3999:DRIVER/FatFs/source/ff.c **** 		memcpy(rbuff, fp->buf + fp->fptr % SS(fs), rcnt);	/* Extract partial sector */
4000:DRIVER/FatFs/source/ff.c **** #endif
4001:DRIVER/FatFs/source/ff.c **** 	}
4002:DRIVER/FatFs/source/ff.c **** 
4003:DRIVER/FatFs/source/ff.c **** 	LEAVE_FF(fs, FR_OK);
4004:DRIVER/FatFs/source/ff.c **** }
4005:DRIVER/FatFs/source/ff.c **** 
4006:DRIVER/FatFs/source/ff.c **** 
4007:DRIVER/FatFs/source/ff.c **** 
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 176


4008:DRIVER/FatFs/source/ff.c **** 
4009:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY
4010:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
4011:DRIVER/FatFs/source/ff.c **** /* Write File                                                            */
4012:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
4013:DRIVER/FatFs/source/ff.c **** 
4014:DRIVER/FatFs/source/ff.c **** FRESULT f_write (
4015:DRIVER/FatFs/source/ff.c **** 	FIL* fp,			/* Open file to be written */
4016:DRIVER/FatFs/source/ff.c **** 	const void* buff,	/* Data to be written */
4017:DRIVER/FatFs/source/ff.c **** 	UINT btw,			/* Number of bytes to write */
4018:DRIVER/FatFs/source/ff.c **** 	UINT* bw			/* Number of bytes written */
4019:DRIVER/FatFs/source/ff.c **** )
4020:DRIVER/FatFs/source/ff.c **** {
4021:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
4022:DRIVER/FatFs/source/ff.c **** 	FATFS *fs;
4023:DRIVER/FatFs/source/ff.c **** 	DWORD clst;
4024:DRIVER/FatFs/source/ff.c **** 	LBA_t sect;
4025:DRIVER/FatFs/source/ff.c **** 	UINT wcnt, cc, csect;
4026:DRIVER/FatFs/source/ff.c **** 	const BYTE *wbuff = (const BYTE*)buff;
4027:DRIVER/FatFs/source/ff.c **** 
4028:DRIVER/FatFs/source/ff.c **** 
4029:DRIVER/FatFs/source/ff.c **** 	*bw = 0;	/* Clear write byte counter */
4030:DRIVER/FatFs/source/ff.c **** 	res = validate(&fp->obj, &fs);			/* Check validity of the file object */
4031:DRIVER/FatFs/source/ff.c **** 	if (res != FR_OK || (res = (FRESULT)fp->err) != FR_OK) LEAVE_FF(fs, res);	/* Check validity */
4032:DRIVER/FatFs/source/ff.c **** 	if (!(fp->flag & FA_WRITE)) LEAVE_FF(fs, FR_DENIED);	/* Check access mode */
4033:DRIVER/FatFs/source/ff.c **** 
4034:DRIVER/FatFs/source/ff.c **** 	/* Check fptr wrap-around (file size cannot reach 4 GiB at FAT volume) */
4035:DRIVER/FatFs/source/ff.c **** 	if ((!FF_FS_EXFAT || fs->fs_type != FS_EXFAT) && (DWORD)(fp->fptr + btw) < (DWORD)fp->fptr) {
4036:DRIVER/FatFs/source/ff.c **** 		btw = (UINT)(0xFFFFFFFF - (DWORD)fp->fptr);
4037:DRIVER/FatFs/source/ff.c **** 	}
4038:DRIVER/FatFs/source/ff.c **** 
4039:DRIVER/FatFs/source/ff.c **** 	for ( ; btw > 0; btw -= wcnt, *bw += wcnt, wbuff += wcnt, fp->fptr += wcnt, fp->obj.objsize = (fp-
4040:DRIVER/FatFs/source/ff.c **** 		if (fp->fptr % SS(fs) == 0) {		/* On the sector boundary? */
4041:DRIVER/FatFs/source/ff.c **** 			csect = (UINT)(fp->fptr / SS(fs)) & (fs->csize - 1);	/* Sector offset in the cluster */
4042:DRIVER/FatFs/source/ff.c **** 			if (csect == 0) {				/* On the cluster boundary? */
4043:DRIVER/FatFs/source/ff.c **** 				if (fp->fptr == 0) {		/* On the top of the file? */
4044:DRIVER/FatFs/source/ff.c **** 					clst = fp->obj.sclust;	/* Follow from the origin */
4045:DRIVER/FatFs/source/ff.c **** 					if (clst == 0) {		/* If no cluster is allocated, */
4046:DRIVER/FatFs/source/ff.c **** 						clst = create_chain(&fp->obj, 0);	/* create a new cluster chain */
4047:DRIVER/FatFs/source/ff.c **** 					}
4048:DRIVER/FatFs/source/ff.c **** 				} else {					/* On the middle or end of the file */
4049:DRIVER/FatFs/source/ff.c **** #if FF_USE_FASTSEEK
4050:DRIVER/FatFs/source/ff.c **** 					if (fp->cltbl) {
4051:DRIVER/FatFs/source/ff.c **** 						clst = clmt_clust(fp, fp->fptr);	/* Get cluster# from the CLMT */
4052:DRIVER/FatFs/source/ff.c **** 					} else
4053:DRIVER/FatFs/source/ff.c **** #endif
4054:DRIVER/FatFs/source/ff.c **** 					{
4055:DRIVER/FatFs/source/ff.c **** 						clst = create_chain(&fp->obj, fp->clust);	/* Follow or stretch cluster chain on the FAT */
4056:DRIVER/FatFs/source/ff.c **** 					}
4057:DRIVER/FatFs/source/ff.c **** 				}
4058:DRIVER/FatFs/source/ff.c **** 				if (clst == 0) break;		/* Could not allocate a new cluster (disk full) */
4059:DRIVER/FatFs/source/ff.c **** 				if (clst == 1) ABORT(fs, FR_INT_ERR);
4060:DRIVER/FatFs/source/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
4061:DRIVER/FatFs/source/ff.c **** 				fp->clust = clst;			/* Update current cluster */
4062:DRIVER/FatFs/source/ff.c **** 				if (fp->obj.sclust == 0) fp->obj.sclust = clst;	/* Set start cluster if the first write */
4063:DRIVER/FatFs/source/ff.c **** 			}
4064:DRIVER/FatFs/source/ff.c **** #if FF_FS_TINY
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 177


4065:DRIVER/FatFs/source/ff.c **** 			if (fs->winsect == fp->sect && sync_window(fs) != FR_OK) ABORT(fs, FR_DISK_ERR);	/* Write-back s
4066:DRIVER/FatFs/source/ff.c **** #else
4067:DRIVER/FatFs/source/ff.c **** 			if (fp->flag & FA_DIRTY) {		/* Write-back sector cache */
4068:DRIVER/FatFs/source/ff.c **** 				if (disk_write(fs->pdrv, fp->buf, fp->sect, 1) != RES_OK) ABORT(fs, FR_DISK_ERR);
4069:DRIVER/FatFs/source/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
4070:DRIVER/FatFs/source/ff.c **** 			}
4071:DRIVER/FatFs/source/ff.c **** #endif
4072:DRIVER/FatFs/source/ff.c **** 			sect = clst2sect(fs, fp->clust);	/* Get current sector */
4073:DRIVER/FatFs/source/ff.c **** 			if (sect == 0) ABORT(fs, FR_INT_ERR);
4074:DRIVER/FatFs/source/ff.c **** 			sect += csect;
4075:DRIVER/FatFs/source/ff.c **** 			cc = btw / SS(fs);				/* When remaining bytes >= sector size, */
4076:DRIVER/FatFs/source/ff.c **** 			if (cc > 0) {					/* Write maximum contiguous sectors directly */
4077:DRIVER/FatFs/source/ff.c **** 				if (csect + cc > fs->csize) {	/* Clip at cluster boundary */
4078:DRIVER/FatFs/source/ff.c **** 					cc = fs->csize - csect;
4079:DRIVER/FatFs/source/ff.c **** 				}
4080:DRIVER/FatFs/source/ff.c **** 				if (disk_write(fs->pdrv, wbuff, sect, cc) != RES_OK) ABORT(fs, FR_DISK_ERR);
4081:DRIVER/FatFs/source/ff.c **** #if FF_FS_MINIMIZE <= 2
4082:DRIVER/FatFs/source/ff.c **** #if FF_FS_TINY
4083:DRIVER/FatFs/source/ff.c **** 				if (fs->winsect - sect < cc) {	/* Refill sector cache if it gets invalidated by the direct writ
4084:DRIVER/FatFs/source/ff.c **** 					memcpy(fs->win, wbuff + ((fs->winsect - sect) * SS(fs)), SS(fs));
4085:DRIVER/FatFs/source/ff.c **** 					fs->wflag = 0;
4086:DRIVER/FatFs/source/ff.c **** 				}
4087:DRIVER/FatFs/source/ff.c **** #else
4088:DRIVER/FatFs/source/ff.c **** 				if (fp->sect - sect < cc) { /* Refill sector cache if it gets invalidated by the direct write *
4089:DRIVER/FatFs/source/ff.c **** 					memcpy(fp->buf, wbuff + ((fp->sect - sect) * SS(fs)), SS(fs));
4090:DRIVER/FatFs/source/ff.c **** 					fp->flag &= (BYTE)~FA_DIRTY;
4091:DRIVER/FatFs/source/ff.c **** 				}
4092:DRIVER/FatFs/source/ff.c **** #endif
4093:DRIVER/FatFs/source/ff.c **** #endif
4094:DRIVER/FatFs/source/ff.c **** 				wcnt = SS(fs) * cc;		/* Number of bytes transferred */
4095:DRIVER/FatFs/source/ff.c **** 				continue;
4096:DRIVER/FatFs/source/ff.c **** 			}
4097:DRIVER/FatFs/source/ff.c **** #if FF_FS_TINY
4098:DRIVER/FatFs/source/ff.c **** 			if (fp->fptr >= fp->obj.objsize) {	/* Avoid silly cache filling on the growing edge */
4099:DRIVER/FatFs/source/ff.c **** 				if (sync_window(fs) != FR_OK) ABORT(fs, FR_DISK_ERR);
4100:DRIVER/FatFs/source/ff.c **** 				fs->winsect = sect;
4101:DRIVER/FatFs/source/ff.c **** 			}
4102:DRIVER/FatFs/source/ff.c **** #else
4103:DRIVER/FatFs/source/ff.c **** 			if (fp->sect != sect && 		/* Fill sector cache with file data */
4104:DRIVER/FatFs/source/ff.c **** 				fp->fptr < fp->obj.objsize &&
4105:DRIVER/FatFs/source/ff.c **** 				disk_read(fs->pdrv, fp->buf, sect, 1) != RES_OK) {
4106:DRIVER/FatFs/source/ff.c **** 					ABORT(fs, FR_DISK_ERR);
4107:DRIVER/FatFs/source/ff.c **** 			}
4108:DRIVER/FatFs/source/ff.c **** #endif
4109:DRIVER/FatFs/source/ff.c **** 			fp->sect = sect;
4110:DRIVER/FatFs/source/ff.c **** 		}
4111:DRIVER/FatFs/source/ff.c **** 		wcnt = SS(fs) - (UINT)fp->fptr % SS(fs);	/* Number of bytes remains in the sector */
4112:DRIVER/FatFs/source/ff.c **** 		if (wcnt > btw) wcnt = btw;					/* Clip it by btw if needed */
4113:DRIVER/FatFs/source/ff.c **** #if FF_FS_TINY
4114:DRIVER/FatFs/source/ff.c **** 		if (move_window(fs, fp->sect) != FR_OK) ABORT(fs, FR_DISK_ERR);	/* Move sector window */
4115:DRIVER/FatFs/source/ff.c **** 		memcpy(fs->win + fp->fptr % SS(fs), wbuff, wcnt);	/* Fit data to the sector */
4116:DRIVER/FatFs/source/ff.c **** 		fs->wflag = 1;
4117:DRIVER/FatFs/source/ff.c **** #else
4118:DRIVER/FatFs/source/ff.c **** 		memcpy(fp->buf + fp->fptr % SS(fs), wbuff, wcnt);	/* Fit data to the sector */
4119:DRIVER/FatFs/source/ff.c **** 		fp->flag |= FA_DIRTY;
4120:DRIVER/FatFs/source/ff.c **** #endif
4121:DRIVER/FatFs/source/ff.c **** 	}
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 178


4122:DRIVER/FatFs/source/ff.c **** 
4123:DRIVER/FatFs/source/ff.c **** 	fp->flag |= FA_MODIFIED;				/* Set file change flag */
4124:DRIVER/FatFs/source/ff.c **** 
4125:DRIVER/FatFs/source/ff.c **** 	LEAVE_FF(fs, FR_OK);
4126:DRIVER/FatFs/source/ff.c **** }
4127:DRIVER/FatFs/source/ff.c **** 
4128:DRIVER/FatFs/source/ff.c **** 
4129:DRIVER/FatFs/source/ff.c **** 
4130:DRIVER/FatFs/source/ff.c **** 
4131:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
4132:DRIVER/FatFs/source/ff.c **** /* Synchronize the File                                                  */
4133:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
4134:DRIVER/FatFs/source/ff.c **** 
4135:DRIVER/FatFs/source/ff.c **** FRESULT f_sync (
4136:DRIVER/FatFs/source/ff.c **** 	FIL* fp		/* Open file to be synced */
4137:DRIVER/FatFs/source/ff.c **** )
4138:DRIVER/FatFs/source/ff.c **** {
4139:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
4140:DRIVER/FatFs/source/ff.c **** 	FATFS *fs;
4141:DRIVER/FatFs/source/ff.c **** 	DWORD tm;
4142:DRIVER/FatFs/source/ff.c **** 	BYTE *dir;
4143:DRIVER/FatFs/source/ff.c **** 
4144:DRIVER/FatFs/source/ff.c **** 
4145:DRIVER/FatFs/source/ff.c **** 	res = validate(&fp->obj, &fs);	/* Check validity of the file object */
4146:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
4147:DRIVER/FatFs/source/ff.c **** 		if (fp->flag & FA_MODIFIED) {	/* Is there any change to the file? */
4148:DRIVER/FatFs/source/ff.c **** #if !FF_FS_TINY
4149:DRIVER/FatFs/source/ff.c **** 			if (fp->flag & FA_DIRTY) {	/* Write-back cached data if needed */
4150:DRIVER/FatFs/source/ff.c **** 				if (disk_write(fs->pdrv, fp->buf, fp->sect, 1) != RES_OK) LEAVE_FF(fs, FR_DISK_ERR);
4151:DRIVER/FatFs/source/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
4152:DRIVER/FatFs/source/ff.c **** 			}
4153:DRIVER/FatFs/source/ff.c **** #endif
4154:DRIVER/FatFs/source/ff.c **** 			/* Update the directory entry */
4155:DRIVER/FatFs/source/ff.c **** 			tm = GET_FATTIME();				/* Modified time */
4156:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
4157:DRIVER/FatFs/source/ff.c **** 			if (fs->fs_type == FS_EXFAT) {
4158:DRIVER/FatFs/source/ff.c **** 				res = fill_first_frag(&fp->obj);	/* Fill first fragment on the FAT if needed */
4159:DRIVER/FatFs/source/ff.c **** 				if (res == FR_OK) {
4160:DRIVER/FatFs/source/ff.c **** 					res = fill_last_frag(&fp->obj, fp->clust, 0xFFFFFFFF);	/* Fill last fragment on the FAT if nee
4161:DRIVER/FatFs/source/ff.c **** 				}
4162:DRIVER/FatFs/source/ff.c **** 				if (res == FR_OK) {
4163:DRIVER/FatFs/source/ff.c **** 					DIR dj;
4164:DRIVER/FatFs/source/ff.c **** 					DEF_NAMBUF
4165:DRIVER/FatFs/source/ff.c **** 
4166:DRIVER/FatFs/source/ff.c **** 					INIT_NAMBUF(fs);
4167:DRIVER/FatFs/source/ff.c **** 					res = load_obj_xdir(&dj, &fp->obj);	/* Load directory entry block */
4168:DRIVER/FatFs/source/ff.c **** 					if (res == FR_OK) {
4169:DRIVER/FatFs/source/ff.c **** 						fs->dirbuf[XDIR_Attr] |= AM_ARC;				/* Set archive attribute to indicate that the file has be
4170:DRIVER/FatFs/source/ff.c **** 						fs->dirbuf[XDIR_GenFlags] = fp->obj.stat | 1;	/* Update file allocation information */
4171:DRIVER/FatFs/source/ff.c **** 						st_dword(fs->dirbuf + XDIR_FstClus, fp->obj.sclust);		/* Update start cluster */
4172:DRIVER/FatFs/source/ff.c **** 						st_qword(fs->dirbuf + XDIR_FileSize, fp->obj.objsize);		/* Update file size */
4173:DRIVER/FatFs/source/ff.c **** 						st_qword(fs->dirbuf + XDIR_ValidFileSize, fp->obj.objsize);	/* (FatFs does not support Valid 
4174:DRIVER/FatFs/source/ff.c **** 						st_dword(fs->dirbuf + XDIR_ModTime, tm);		/* Update modified time */
4175:DRIVER/FatFs/source/ff.c **** 						fs->dirbuf[XDIR_ModTime10] = 0;
4176:DRIVER/FatFs/source/ff.c **** 						st_dword(fs->dirbuf + XDIR_AccTime, 0);
4177:DRIVER/FatFs/source/ff.c **** 						res = store_xdir(&dj);	/* Restore it to the directory */
4178:DRIVER/FatFs/source/ff.c **** 						if (res == FR_OK) {
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 179


4179:DRIVER/FatFs/source/ff.c **** 							res = sync_fs(fs);
4180:DRIVER/FatFs/source/ff.c **** 							fp->flag &= (BYTE)~FA_MODIFIED;
4181:DRIVER/FatFs/source/ff.c **** 						}
4182:DRIVER/FatFs/source/ff.c **** 					}
4183:DRIVER/FatFs/source/ff.c **** 					FREE_NAMBUF();
4184:DRIVER/FatFs/source/ff.c **** 				}
4185:DRIVER/FatFs/source/ff.c **** 			} else
4186:DRIVER/FatFs/source/ff.c **** #endif
4187:DRIVER/FatFs/source/ff.c **** 			{
4188:DRIVER/FatFs/source/ff.c **** 				res = move_window(fs, fp->dir_sect);
4189:DRIVER/FatFs/source/ff.c **** 				if (res == FR_OK) {
4190:DRIVER/FatFs/source/ff.c **** 					dir = fp->dir_ptr;
4191:DRIVER/FatFs/source/ff.c **** 					dir[DIR_Attr] |= AM_ARC;						/* Set archive attribute to indicate that the file has been chan
4192:DRIVER/FatFs/source/ff.c **** 					st_clust(fp->obj.fs, dir, fp->obj.sclust);		/* Update file allocation information  */
4193:DRIVER/FatFs/source/ff.c **** 					st_dword(dir + DIR_FileSize, (DWORD)fp->obj.objsize);	/* Update file size */
4194:DRIVER/FatFs/source/ff.c **** 					st_dword(dir + DIR_ModTime, tm);				/* Update modified time */
4195:DRIVER/FatFs/source/ff.c **** 					st_word(dir + DIR_LstAccDate, 0);
4196:DRIVER/FatFs/source/ff.c **** 					fs->wflag = 1;
4197:DRIVER/FatFs/source/ff.c **** 					res = sync_fs(fs);					/* Restore it to the directory */
4198:DRIVER/FatFs/source/ff.c **** 					fp->flag &= (BYTE)~FA_MODIFIED;
4199:DRIVER/FatFs/source/ff.c **** 				}
4200:DRIVER/FatFs/source/ff.c **** 			}
4201:DRIVER/FatFs/source/ff.c **** 		}
4202:DRIVER/FatFs/source/ff.c **** 	}
4203:DRIVER/FatFs/source/ff.c **** 
4204:DRIVER/FatFs/source/ff.c **** 	LEAVE_FF(fs, res);
4205:DRIVER/FatFs/source/ff.c **** }
4206:DRIVER/FatFs/source/ff.c **** 
4207:DRIVER/FatFs/source/ff.c **** #endif /* !FF_FS_READONLY */
4208:DRIVER/FatFs/source/ff.c **** 
4209:DRIVER/FatFs/source/ff.c **** 
4210:DRIVER/FatFs/source/ff.c **** 
4211:DRIVER/FatFs/source/ff.c **** 
4212:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
4213:DRIVER/FatFs/source/ff.c **** /* Close File                                                            */
4214:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
4215:DRIVER/FatFs/source/ff.c **** 
4216:DRIVER/FatFs/source/ff.c **** FRESULT f_close (
4217:DRIVER/FatFs/source/ff.c **** 	FIL* fp		/* Open file to be closed */
4218:DRIVER/FatFs/source/ff.c **** )
4219:DRIVER/FatFs/source/ff.c **** {
4220:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
4221:DRIVER/FatFs/source/ff.c **** 	FATFS *fs;
4222:DRIVER/FatFs/source/ff.c **** 
4223:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY
4224:DRIVER/FatFs/source/ff.c **** 	res = f_sync(fp);					/* Flush cached data */
4225:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK)
4226:DRIVER/FatFs/source/ff.c **** #endif
4227:DRIVER/FatFs/source/ff.c **** 	{
4228:DRIVER/FatFs/source/ff.c **** 		res = validate(&fp->obj, &fs);	/* Lock volume */
4229:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK) {
4230:DRIVER/FatFs/source/ff.c **** #if FF_FS_LOCK
4231:DRIVER/FatFs/source/ff.c **** 			res = dec_share(fp->obj.lockid);		/* Decrement file open counter */
4232:DRIVER/FatFs/source/ff.c **** 			if (res == FR_OK) fp->obj.fs = 0;	/* Invalidate file object */
4233:DRIVER/FatFs/source/ff.c **** #else
4234:DRIVER/FatFs/source/ff.c **** 			fp->obj.fs = 0;	/* Invalidate file object */
4235:DRIVER/FatFs/source/ff.c **** #endif
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 180


4236:DRIVER/FatFs/source/ff.c **** #if FF_FS_REENTRANT
4237:DRIVER/FatFs/source/ff.c **** 			unlock_volume(fs, FR_OK);		/* Unlock volume */
4238:DRIVER/FatFs/source/ff.c **** #endif
4239:DRIVER/FatFs/source/ff.c **** 		}
4240:DRIVER/FatFs/source/ff.c **** 	}
4241:DRIVER/FatFs/source/ff.c **** 	return res;
4242:DRIVER/FatFs/source/ff.c **** }
4243:DRIVER/FatFs/source/ff.c **** 
4244:DRIVER/FatFs/source/ff.c **** 
4245:DRIVER/FatFs/source/ff.c **** 
4246:DRIVER/FatFs/source/ff.c **** 
4247:DRIVER/FatFs/source/ff.c **** #if FF_FS_RPATH >= 1
4248:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
4249:DRIVER/FatFs/source/ff.c **** /* Change Current Directory or Current Drive, Get Current Directory      */
4250:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
4251:DRIVER/FatFs/source/ff.c **** 
4252:DRIVER/FatFs/source/ff.c **** FRESULT f_chdrive (
4253:DRIVER/FatFs/source/ff.c **** 	const TCHAR* path		/* Drive number to set */
4254:DRIVER/FatFs/source/ff.c **** )
4255:DRIVER/FatFs/source/ff.c **** {
4256:DRIVER/FatFs/source/ff.c **** 	int vol;
4257:DRIVER/FatFs/source/ff.c **** 
4258:DRIVER/FatFs/source/ff.c **** 
4259:DRIVER/FatFs/source/ff.c **** 	/* Get logical drive number */
4260:DRIVER/FatFs/source/ff.c **** 	vol = get_ldnumber(&path);
4261:DRIVER/FatFs/source/ff.c **** 	if (vol < 0) return FR_INVALID_DRIVE;
4262:DRIVER/FatFs/source/ff.c **** 	CurrVol = (BYTE)vol;	/* Set it as current volume */
4263:DRIVER/FatFs/source/ff.c **** 
4264:DRIVER/FatFs/source/ff.c **** 	return FR_OK;
4265:DRIVER/FatFs/source/ff.c **** }
4266:DRIVER/FatFs/source/ff.c **** 
4267:DRIVER/FatFs/source/ff.c **** 
4268:DRIVER/FatFs/source/ff.c **** 
4269:DRIVER/FatFs/source/ff.c **** FRESULT f_chdir (
4270:DRIVER/FatFs/source/ff.c **** 	const TCHAR* path	/* Pointer to the directory path */
4271:DRIVER/FatFs/source/ff.c **** )
4272:DRIVER/FatFs/source/ff.c **** {
4273:DRIVER/FatFs/source/ff.c **** #if FF_STR_VOLUME_ID == 2
4274:DRIVER/FatFs/source/ff.c **** 	UINT i;
4275:DRIVER/FatFs/source/ff.c **** #endif
4276:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
4277:DRIVER/FatFs/source/ff.c **** 	DIR dj;
4278:DRIVER/FatFs/source/ff.c **** 	FATFS *fs;
4279:DRIVER/FatFs/source/ff.c **** 	DEF_NAMBUF
4280:DRIVER/FatFs/source/ff.c **** 
4281:DRIVER/FatFs/source/ff.c **** 
4282:DRIVER/FatFs/source/ff.c **** 	/* Get logical drive */
4283:DRIVER/FatFs/source/ff.c **** 	res = mount_volume(&path, &fs, 0);
4284:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
4285:DRIVER/FatFs/source/ff.c **** 		dj.obj.fs = fs;
4286:DRIVER/FatFs/source/ff.c **** 		INIT_NAMBUF(fs);
4287:DRIVER/FatFs/source/ff.c **** 		res = follow_path(&dj, path);		/* Follow the path */
4288:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK) {					/* Follow completed */
4289:DRIVER/FatFs/source/ff.c **** 			if (dj.fn[NSFLAG] & NS_NONAME) {	/* Is it the start directory itself? */
4290:DRIVER/FatFs/source/ff.c **** 				fs->cdir = dj.obj.sclust;
4291:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
4292:DRIVER/FatFs/source/ff.c **** 				if (fs->fs_type == FS_EXFAT) {
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 181


4293:DRIVER/FatFs/source/ff.c **** 					fs->cdc_scl = dj.obj.c_scl;
4294:DRIVER/FatFs/source/ff.c **** 					fs->cdc_size = dj.obj.c_size;
4295:DRIVER/FatFs/source/ff.c **** 					fs->cdc_ofs = dj.obj.c_ofs;
4296:DRIVER/FatFs/source/ff.c **** 				}
4297:DRIVER/FatFs/source/ff.c **** #endif
4298:DRIVER/FatFs/source/ff.c **** 			} else {
4299:DRIVER/FatFs/source/ff.c **** 				if (dj.obj.attr & AM_DIR) {	/* It is a sub-directory */
4300:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
4301:DRIVER/FatFs/source/ff.c **** 					if (fs->fs_type == FS_EXFAT) {
4302:DRIVER/FatFs/source/ff.c **** 						fs->cdir = ld_dword(fs->dirbuf + XDIR_FstClus);		/* Sub-directory cluster */
4303:DRIVER/FatFs/source/ff.c **** 						fs->cdc_scl = dj.obj.sclust;						/* Save containing directory information */
4304:DRIVER/FatFs/source/ff.c **** 						fs->cdc_size = ((DWORD)dj.obj.objsize & 0xFFFFFF00) | dj.obj.stat;
4305:DRIVER/FatFs/source/ff.c **** 						fs->cdc_ofs = dj.blk_ofs;
4306:DRIVER/FatFs/source/ff.c **** 					} else
4307:DRIVER/FatFs/source/ff.c **** #endif
4308:DRIVER/FatFs/source/ff.c **** 					{
4309:DRIVER/FatFs/source/ff.c **** 						fs->cdir = ld_clust(fs, dj.dir);					/* Sub-directory cluster */
4310:DRIVER/FatFs/source/ff.c **** 					}
4311:DRIVER/FatFs/source/ff.c **** 				} else {
4312:DRIVER/FatFs/source/ff.c **** 					res = FR_NO_PATH;		/* Reached but a file */
4313:DRIVER/FatFs/source/ff.c **** 				}
4314:DRIVER/FatFs/source/ff.c **** 			}
4315:DRIVER/FatFs/source/ff.c **** 		}
4316:DRIVER/FatFs/source/ff.c **** 		FREE_NAMBUF();
4317:DRIVER/FatFs/source/ff.c **** 		if (res == FR_NO_FILE) res = FR_NO_PATH;
4318:DRIVER/FatFs/source/ff.c **** #if FF_STR_VOLUME_ID == 2	/* Also current drive is changed if in Unix style volume ID */
4319:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK) {
4320:DRIVER/FatFs/source/ff.c **** 			for (i = FF_VOLUMES - 1; i && fs != FatFs[i]; i--) ;	/* Set current drive */
4321:DRIVER/FatFs/source/ff.c **** 			CurrVol = (BYTE)i;
4322:DRIVER/FatFs/source/ff.c **** 		}
4323:DRIVER/FatFs/source/ff.c **** #endif
4324:DRIVER/FatFs/source/ff.c **** 	}
4325:DRIVER/FatFs/source/ff.c **** 
4326:DRIVER/FatFs/source/ff.c **** 	LEAVE_FF(fs, res);
4327:DRIVER/FatFs/source/ff.c **** }
4328:DRIVER/FatFs/source/ff.c **** 
4329:DRIVER/FatFs/source/ff.c **** 
4330:DRIVER/FatFs/source/ff.c **** #if FF_FS_RPATH >= 2
4331:DRIVER/FatFs/source/ff.c **** FRESULT f_getcwd (
4332:DRIVER/FatFs/source/ff.c **** 	TCHAR* buff,	/* Pointer to the directory path */
4333:DRIVER/FatFs/source/ff.c **** 	UINT len		/* Size of buff in unit of TCHAR */
4334:DRIVER/FatFs/source/ff.c **** )
4335:DRIVER/FatFs/source/ff.c **** {
4336:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
4337:DRIVER/FatFs/source/ff.c **** 	DIR dj;
4338:DRIVER/FatFs/source/ff.c **** 	FATFS *fs;
4339:DRIVER/FatFs/source/ff.c **** 	UINT i, n;
4340:DRIVER/FatFs/source/ff.c **** 	DWORD ccl;
4341:DRIVER/FatFs/source/ff.c **** 	TCHAR *tp = buff;
4342:DRIVER/FatFs/source/ff.c **** #if FF_VOLUMES >= 2
4343:DRIVER/FatFs/source/ff.c **** 	UINT vl;
4344:DRIVER/FatFs/source/ff.c **** #if FF_STR_VOLUME_ID
4345:DRIVER/FatFs/source/ff.c **** 	const char *vp;
4346:DRIVER/FatFs/source/ff.c **** #endif
4347:DRIVER/FatFs/source/ff.c **** #endif
4348:DRIVER/FatFs/source/ff.c **** 	FILINFO fno;
4349:DRIVER/FatFs/source/ff.c **** 	DEF_NAMBUF
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 182


4350:DRIVER/FatFs/source/ff.c **** 
4351:DRIVER/FatFs/source/ff.c **** 
4352:DRIVER/FatFs/source/ff.c **** 	/* Get logical drive */
4353:DRIVER/FatFs/source/ff.c **** 	buff[0] = 0;	/* Set null string to get current volume */
4354:DRIVER/FatFs/source/ff.c **** 	res = mount_volume((const TCHAR**)&buff, &fs, 0);	/* Get current volume */
4355:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
4356:DRIVER/FatFs/source/ff.c **** 		dj.obj.fs = fs;
4357:DRIVER/FatFs/source/ff.c **** 		INIT_NAMBUF(fs);
4358:DRIVER/FatFs/source/ff.c **** 
4359:DRIVER/FatFs/source/ff.c **** 		/* Follow parent directories and create the path */
4360:DRIVER/FatFs/source/ff.c **** 		i = len;			/* Bottom of buffer (directory stack base) */
4361:DRIVER/FatFs/source/ff.c **** 		if (!FF_FS_EXFAT || fs->fs_type != FS_EXFAT) {	/* (Cannot do getcwd on exFAT and returns root pat
4362:DRIVER/FatFs/source/ff.c **** 			dj.obj.sclust = fs->cdir;				/* Start to follow upper directory from current directory */
4363:DRIVER/FatFs/source/ff.c **** 			while ((ccl = dj.obj.sclust) != 0) {	/* Repeat while current directory is a sub-directory */
4364:DRIVER/FatFs/source/ff.c **** 				res = dir_sdi(&dj, 1 * SZDIRE);	/* Get parent directory */
4365:DRIVER/FatFs/source/ff.c **** 				if (res != FR_OK) break;
4366:DRIVER/FatFs/source/ff.c **** 				res = move_window(fs, dj.sect);
4367:DRIVER/FatFs/source/ff.c **** 				if (res != FR_OK) break;
4368:DRIVER/FatFs/source/ff.c **** 				dj.obj.sclust = ld_clust(fs, dj.dir);	/* Goto parent directory */
4369:DRIVER/FatFs/source/ff.c **** 				res = dir_sdi(&dj, 0);
4370:DRIVER/FatFs/source/ff.c **** 				if (res != FR_OK) break;
4371:DRIVER/FatFs/source/ff.c **** 				do {							/* Find the entry links to the child directory */
4372:DRIVER/FatFs/source/ff.c **** 					res = DIR_READ_FILE(&dj);
4373:DRIVER/FatFs/source/ff.c **** 					if (res != FR_OK) break;
4374:DRIVER/FatFs/source/ff.c **** 					if (ccl == ld_clust(fs, dj.dir)) break;	/* Found the entry */
4375:DRIVER/FatFs/source/ff.c **** 					res = dir_next(&dj, 0);
4376:DRIVER/FatFs/source/ff.c **** 				} while (res == FR_OK);
4377:DRIVER/FatFs/source/ff.c **** 				if (res == FR_NO_FILE) res = FR_INT_ERR;/* It cannot be 'not found'. */
4378:DRIVER/FatFs/source/ff.c **** 				if (res != FR_OK) break;
4379:DRIVER/FatFs/source/ff.c **** 				get_fileinfo(&dj, &fno);		/* Get the directory name and push it to the buffer */
4380:DRIVER/FatFs/source/ff.c **** 				for (n = 0; fno.fname[n]; n++) ;	/* Name length */
4381:DRIVER/FatFs/source/ff.c **** 				if (i < n + 1) {	/* Insufficient space to store the path name? */
4382:DRIVER/FatFs/source/ff.c **** 					res = FR_NOT_ENOUGH_CORE; break;
4383:DRIVER/FatFs/source/ff.c **** 				}
4384:DRIVER/FatFs/source/ff.c **** 				while (n) buff[--i] = fno.fname[--n];	/* Stack the name */
4385:DRIVER/FatFs/source/ff.c **** 				buff[--i] = '/';
4386:DRIVER/FatFs/source/ff.c **** 			}
4387:DRIVER/FatFs/source/ff.c **** 		}
4388:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK) {
4389:DRIVER/FatFs/source/ff.c **** 			if (i == len) buff[--i] = '/';	/* Is it the root-directory? */
4390:DRIVER/FatFs/source/ff.c **** #if FF_VOLUMES >= 2			/* Put drive prefix */
4391:DRIVER/FatFs/source/ff.c **** 			vl = 0;
4392:DRIVER/FatFs/source/ff.c **** #if FF_STR_VOLUME_ID >= 1	/* String volume ID */
4393:DRIVER/FatFs/source/ff.c **** 			for (n = 0, vp = (const char*)VolumeStr[CurrVol]; vp[n]; n++) ;
4394:DRIVER/FatFs/source/ff.c **** 			if (i >= n + 2) {
4395:DRIVER/FatFs/source/ff.c **** 				if (FF_STR_VOLUME_ID == 2) *tp++ = (TCHAR)'/';
4396:DRIVER/FatFs/source/ff.c **** 				for (vl = 0; vl < n; *tp++ = (TCHAR)vp[vl], vl++) ;
4397:DRIVER/FatFs/source/ff.c **** 				if (FF_STR_VOLUME_ID == 1) *tp++ = (TCHAR)':';
4398:DRIVER/FatFs/source/ff.c **** 				vl++;
4399:DRIVER/FatFs/source/ff.c **** 			}
4400:DRIVER/FatFs/source/ff.c **** #else						/* Numeric volume ID */
4401:DRIVER/FatFs/source/ff.c **** 			if (i >= 3) {
4402:DRIVER/FatFs/source/ff.c **** 				*tp++ = (TCHAR)'0' + CurrVol;
4403:DRIVER/FatFs/source/ff.c **** 				*tp++ = (TCHAR)':';
4404:DRIVER/FatFs/source/ff.c **** 				vl = 2;
4405:DRIVER/FatFs/source/ff.c **** 			}
4406:DRIVER/FatFs/source/ff.c **** #endif
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 183


4407:DRIVER/FatFs/source/ff.c **** 			if (vl == 0) res = FR_NOT_ENOUGH_CORE;
4408:DRIVER/FatFs/source/ff.c **** #endif
4409:DRIVER/FatFs/source/ff.c **** 			/* Add current directory path */
4410:DRIVER/FatFs/source/ff.c **** 			if (res == FR_OK) {
4411:DRIVER/FatFs/source/ff.c **** 				do {	/* Copy stacked path string */
4412:DRIVER/FatFs/source/ff.c **** 					*tp++ = buff[i++];
4413:DRIVER/FatFs/source/ff.c **** 				} while (i < len);
4414:DRIVER/FatFs/source/ff.c **** 			}
4415:DRIVER/FatFs/source/ff.c **** 		}
4416:DRIVER/FatFs/source/ff.c **** 		FREE_NAMBUF();
4417:DRIVER/FatFs/source/ff.c **** 	}
4418:DRIVER/FatFs/source/ff.c **** 
4419:DRIVER/FatFs/source/ff.c **** 	*tp = 0;
4420:DRIVER/FatFs/source/ff.c **** 	LEAVE_FF(fs, res);
4421:DRIVER/FatFs/source/ff.c **** }
4422:DRIVER/FatFs/source/ff.c **** 
4423:DRIVER/FatFs/source/ff.c **** #endif /* FF_FS_RPATH >= 2 */
4424:DRIVER/FatFs/source/ff.c **** #endif /* FF_FS_RPATH >= 1 */
4425:DRIVER/FatFs/source/ff.c **** 
4426:DRIVER/FatFs/source/ff.c **** 
4427:DRIVER/FatFs/source/ff.c **** 
4428:DRIVER/FatFs/source/ff.c **** #if FF_FS_MINIMIZE <= 2
4429:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
4430:DRIVER/FatFs/source/ff.c **** /* Seek File Read/Write Pointer                                          */
4431:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
4432:DRIVER/FatFs/source/ff.c **** 
4433:DRIVER/FatFs/source/ff.c **** FRESULT f_lseek (
4434:DRIVER/FatFs/source/ff.c **** 	FIL* fp,		/* Pointer to the file object */
4435:DRIVER/FatFs/source/ff.c **** 	FSIZE_t ofs		/* File pointer from top of file */
4436:DRIVER/FatFs/source/ff.c **** )
4437:DRIVER/FatFs/source/ff.c **** {
4438:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
4439:DRIVER/FatFs/source/ff.c **** 	FATFS *fs;
4440:DRIVER/FatFs/source/ff.c **** 	DWORD clst, bcs;
4441:DRIVER/FatFs/source/ff.c **** 	LBA_t nsect;
4442:DRIVER/FatFs/source/ff.c **** 	FSIZE_t ifptr;
4443:DRIVER/FatFs/source/ff.c **** #if FF_USE_FASTSEEK
4444:DRIVER/FatFs/source/ff.c **** 	DWORD cl, pcl, ncl, tcl, tlen, ulen;
4445:DRIVER/FatFs/source/ff.c **** 	DWORD *tbl;
4446:DRIVER/FatFs/source/ff.c **** 	LBA_t dsc;
4447:DRIVER/FatFs/source/ff.c **** #endif
4448:DRIVER/FatFs/source/ff.c **** 
4449:DRIVER/FatFs/source/ff.c **** 	res = validate(&fp->obj, &fs);		/* Check validity of the file object */
4450:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) res = (FRESULT)fp->err;
4451:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT && !FF_FS_READONLY
4452:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK && fs->fs_type == FS_EXFAT) {
4453:DRIVER/FatFs/source/ff.c **** 		res = fill_last_frag(&fp->obj, fp->clust, 0xFFFFFFFF);	/* Fill last fragment on the FAT if needed
4454:DRIVER/FatFs/source/ff.c **** 	}
4455:DRIVER/FatFs/source/ff.c **** #endif
4456:DRIVER/FatFs/source/ff.c **** 	if (res != FR_OK) LEAVE_FF(fs, res);
4457:DRIVER/FatFs/source/ff.c **** 
4458:DRIVER/FatFs/source/ff.c **** #if FF_USE_FASTSEEK
4459:DRIVER/FatFs/source/ff.c **** 	if (fp->cltbl) {	/* Fast seek */
4460:DRIVER/FatFs/source/ff.c **** 		if (ofs == CREATE_LINKMAP) {	/* Create CLMT */
4461:DRIVER/FatFs/source/ff.c **** 			tbl = fp->cltbl;
4462:DRIVER/FatFs/source/ff.c **** 			tlen = *tbl++; ulen = 2;	/* Given table size and required table size */
4463:DRIVER/FatFs/source/ff.c **** 			cl = fp->obj.sclust;		/* Origin of the chain */
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 184


4464:DRIVER/FatFs/source/ff.c **** 			if (cl != 0) {
4465:DRIVER/FatFs/source/ff.c **** 				do {
4466:DRIVER/FatFs/source/ff.c **** 					/* Get a fragment */
4467:DRIVER/FatFs/source/ff.c **** 					tcl = cl; ncl = 0; ulen += 2;	/* Top, length and used items */
4468:DRIVER/FatFs/source/ff.c **** 					do {
4469:DRIVER/FatFs/source/ff.c **** 						pcl = cl; ncl++;
4470:DRIVER/FatFs/source/ff.c **** 						cl = get_fat(&fp->obj, cl);
4471:DRIVER/FatFs/source/ff.c **** 						if (cl <= 1) ABORT(fs, FR_INT_ERR);
4472:DRIVER/FatFs/source/ff.c **** 						if (cl == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
4473:DRIVER/FatFs/source/ff.c **** 					} while (cl == pcl + 1);
4474:DRIVER/FatFs/source/ff.c **** 					if (ulen <= tlen) {		/* Store the length and top of the fragment */
4475:DRIVER/FatFs/source/ff.c **** 						*tbl++ = ncl; *tbl++ = tcl;
4476:DRIVER/FatFs/source/ff.c **** 					}
4477:DRIVER/FatFs/source/ff.c **** 				} while (cl < fs->n_fatent);	/* Repeat until end of chain */
4478:DRIVER/FatFs/source/ff.c **** 			}
4479:DRIVER/FatFs/source/ff.c **** 			*fp->cltbl = ulen;	/* Number of items used */
4480:DRIVER/FatFs/source/ff.c **** 			if (ulen <= tlen) {
4481:DRIVER/FatFs/source/ff.c **** 				*tbl = 0;		/* Terminate table */
4482:DRIVER/FatFs/source/ff.c **** 			} else {
4483:DRIVER/FatFs/source/ff.c **** 				res = FR_NOT_ENOUGH_CORE;	/* Given table size is smaller than required */
4484:DRIVER/FatFs/source/ff.c **** 			}
4485:DRIVER/FatFs/source/ff.c **** 		} else {						/* Fast seek */
4486:DRIVER/FatFs/source/ff.c **** 			if (ofs > fp->obj.objsize) ofs = fp->obj.objsize;	/* Clip offset at the file size */
4487:DRIVER/FatFs/source/ff.c **** 			fp->fptr = ofs;				/* Set file pointer */
4488:DRIVER/FatFs/source/ff.c **** 			if (ofs > 0) {
4489:DRIVER/FatFs/source/ff.c **** 				fp->clust = clmt_clust(fp, ofs - 1);
4490:DRIVER/FatFs/source/ff.c **** 				dsc = clst2sect(fs, fp->clust);
4491:DRIVER/FatFs/source/ff.c **** 				if (dsc == 0) ABORT(fs, FR_INT_ERR);
4492:DRIVER/FatFs/source/ff.c **** 				dsc += (DWORD)((ofs - 1) / SS(fs)) & (fs->csize - 1);
4493:DRIVER/FatFs/source/ff.c **** 				if (fp->fptr % SS(fs) && dsc != fp->sect) {	/* Refill sector cache if needed */
4494:DRIVER/FatFs/source/ff.c **** #if !FF_FS_TINY
4495:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY
4496:DRIVER/FatFs/source/ff.c **** 					if (fp->flag & FA_DIRTY) {		/* Write-back dirty sector cache */
4497:DRIVER/FatFs/source/ff.c **** 						if (disk_write(fs->pdrv, fp->buf, fp->sect, 1) != RES_OK) ABORT(fs, FR_DISK_ERR);
4498:DRIVER/FatFs/source/ff.c **** 						fp->flag &= (BYTE)~FA_DIRTY;
4499:DRIVER/FatFs/source/ff.c **** 					}
4500:DRIVER/FatFs/source/ff.c **** #endif
4501:DRIVER/FatFs/source/ff.c **** 					if (disk_read(fs->pdrv, fp->buf, dsc, 1) != RES_OK) ABORT(fs, FR_DISK_ERR);	/* Load current se
4502:DRIVER/FatFs/source/ff.c **** #endif
4503:DRIVER/FatFs/source/ff.c **** 					fp->sect = dsc;
4504:DRIVER/FatFs/source/ff.c **** 				}
4505:DRIVER/FatFs/source/ff.c **** 			}
4506:DRIVER/FatFs/source/ff.c **** 		}
4507:DRIVER/FatFs/source/ff.c **** 	} else
4508:DRIVER/FatFs/source/ff.c **** #endif
4509:DRIVER/FatFs/source/ff.c **** 
4510:DRIVER/FatFs/source/ff.c **** 	/* Normal Seek */
4511:DRIVER/FatFs/source/ff.c **** 	{
4512:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
4513:DRIVER/FatFs/source/ff.c **** 		if (fs->fs_type != FS_EXFAT && ofs >= 0x100000000) ofs = 0xFFFFFFFF;	/* Clip at 4 GiB - 1 if at F
4514:DRIVER/FatFs/source/ff.c **** #endif
4515:DRIVER/FatFs/source/ff.c **** 		if (ofs > fp->obj.objsize && (FF_FS_READONLY || !(fp->flag & FA_WRITE))) {	/* In read-only mode, 
4516:DRIVER/FatFs/source/ff.c **** 			ofs = fp->obj.objsize;
4517:DRIVER/FatFs/source/ff.c **** 		}
4518:DRIVER/FatFs/source/ff.c **** 		ifptr = fp->fptr;
4519:DRIVER/FatFs/source/ff.c **** 		fp->fptr = nsect = 0;
4520:DRIVER/FatFs/source/ff.c **** 		if (ofs > 0) {
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 185


4521:DRIVER/FatFs/source/ff.c **** 			bcs = (DWORD)fs->csize * SS(fs);	/* Cluster size (byte) */
4522:DRIVER/FatFs/source/ff.c **** 			if (ifptr > 0 &&
4523:DRIVER/FatFs/source/ff.c **** 				(ofs - 1) / bcs >= (ifptr - 1) / bcs) {	/* When seek to same or following cluster, */
4524:DRIVER/FatFs/source/ff.c **** 				fp->fptr = (ifptr - 1) & ~(FSIZE_t)(bcs - 1);	/* start from the current cluster */
4525:DRIVER/FatFs/source/ff.c **** 				ofs -= fp->fptr;
4526:DRIVER/FatFs/source/ff.c **** 				clst = fp->clust;
4527:DRIVER/FatFs/source/ff.c **** 			} else {									/* When seek to back cluster, */
4528:DRIVER/FatFs/source/ff.c **** 				clst = fp->obj.sclust;					/* start from the first cluster */
4529:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY
4530:DRIVER/FatFs/source/ff.c **** 				if (clst == 0) {						/* If no cluster chain, create a new chain */
4531:DRIVER/FatFs/source/ff.c **** 					clst = create_chain(&fp->obj, 0);
4532:DRIVER/FatFs/source/ff.c **** 					if (clst == 1) ABORT(fs, FR_INT_ERR);
4533:DRIVER/FatFs/source/ff.c **** 					if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
4534:DRIVER/FatFs/source/ff.c **** 					fp->obj.sclust = clst;
4535:DRIVER/FatFs/source/ff.c **** 				}
4536:DRIVER/FatFs/source/ff.c **** #endif
4537:DRIVER/FatFs/source/ff.c **** 				fp->clust = clst;
4538:DRIVER/FatFs/source/ff.c **** 			}
4539:DRIVER/FatFs/source/ff.c **** 			if (clst != 0) {
4540:DRIVER/FatFs/source/ff.c **** 				while (ofs > bcs) {						/* Cluster following loop */
4541:DRIVER/FatFs/source/ff.c **** 					ofs -= bcs; fp->fptr += bcs;
4542:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY
4543:DRIVER/FatFs/source/ff.c **** 					if (fp->flag & FA_WRITE) {			/* Check if in write mode or not */
4544:DRIVER/FatFs/source/ff.c **** 						if (FF_FS_EXFAT && fp->fptr > fp->obj.objsize) {	/* No FAT chain object needs correct objsize
4545:DRIVER/FatFs/source/ff.c **** 							fp->obj.objsize = fp->fptr;
4546:DRIVER/FatFs/source/ff.c **** 							fp->flag |= FA_MODIFIED;
4547:DRIVER/FatFs/source/ff.c **** 						}
4548:DRIVER/FatFs/source/ff.c **** 						clst = create_chain(&fp->obj, clst);	/* Follow chain with forceed stretch */
4549:DRIVER/FatFs/source/ff.c **** 						if (clst == 0) {				/* Clip file size in case of disk full */
4550:DRIVER/FatFs/source/ff.c **** 							ofs = 0; break;
4551:DRIVER/FatFs/source/ff.c **** 						}
4552:DRIVER/FatFs/source/ff.c **** 					} else
4553:DRIVER/FatFs/source/ff.c **** #endif
4554:DRIVER/FatFs/source/ff.c **** 					{
4555:DRIVER/FatFs/source/ff.c **** 						clst = get_fat(&fp->obj, clst);	/* Follow cluster chain if not in write mode */
4556:DRIVER/FatFs/source/ff.c **** 					}
4557:DRIVER/FatFs/source/ff.c **** 					if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
4558:DRIVER/FatFs/source/ff.c **** 					if (clst <= 1 || clst >= fs->n_fatent) ABORT(fs, FR_INT_ERR);
4559:DRIVER/FatFs/source/ff.c **** 					fp->clust = clst;
4560:DRIVER/FatFs/source/ff.c **** 				}
4561:DRIVER/FatFs/source/ff.c **** 				fp->fptr += ofs;
4562:DRIVER/FatFs/source/ff.c **** 				if (ofs % SS(fs)) {
4563:DRIVER/FatFs/source/ff.c **** 					nsect = clst2sect(fs, clst);	/* Current sector */
4564:DRIVER/FatFs/source/ff.c **** 					if (nsect == 0) ABORT(fs, FR_INT_ERR);
4565:DRIVER/FatFs/source/ff.c **** 					nsect += (DWORD)(ofs / SS(fs));
4566:DRIVER/FatFs/source/ff.c **** 				}
4567:DRIVER/FatFs/source/ff.c **** 			}
4568:DRIVER/FatFs/source/ff.c **** 		}
4569:DRIVER/FatFs/source/ff.c **** 		if (!FF_FS_READONLY && fp->fptr > fp->obj.objsize) {	/* Set file change flag if the file size is 
4570:DRIVER/FatFs/source/ff.c **** 			fp->obj.objsize = fp->fptr;
4571:DRIVER/FatFs/source/ff.c **** 			fp->flag |= FA_MODIFIED;
4572:DRIVER/FatFs/source/ff.c **** 		}
4573:DRIVER/FatFs/source/ff.c **** 		if (fp->fptr % SS(fs) && nsect != fp->sect) {	/* Fill sector cache if needed */
4574:DRIVER/FatFs/source/ff.c **** #if !FF_FS_TINY
4575:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY
4576:DRIVER/FatFs/source/ff.c **** 			if (fp->flag & FA_DIRTY) {			/* Write-back dirty sector cache */
4577:DRIVER/FatFs/source/ff.c **** 				if (disk_write(fs->pdrv, fp->buf, fp->sect, 1) != RES_OK) ABORT(fs, FR_DISK_ERR);
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 186


4578:DRIVER/FatFs/source/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
4579:DRIVER/FatFs/source/ff.c **** 			}
4580:DRIVER/FatFs/source/ff.c **** #endif
4581:DRIVER/FatFs/source/ff.c **** 			if (disk_read(fs->pdrv, fp->buf, nsect, 1) != RES_OK) ABORT(fs, FR_DISK_ERR);	/* Fill sector cac
4582:DRIVER/FatFs/source/ff.c **** #endif
4583:DRIVER/FatFs/source/ff.c **** 			fp->sect = nsect;
4584:DRIVER/FatFs/source/ff.c **** 		}
4585:DRIVER/FatFs/source/ff.c **** 	}
4586:DRIVER/FatFs/source/ff.c **** 
4587:DRIVER/FatFs/source/ff.c **** 	LEAVE_FF(fs, res);
4588:DRIVER/FatFs/source/ff.c **** }
4589:DRIVER/FatFs/source/ff.c **** 
4590:DRIVER/FatFs/source/ff.c **** 
4591:DRIVER/FatFs/source/ff.c **** 
4592:DRIVER/FatFs/source/ff.c **** #if FF_FS_MINIMIZE <= 1
4593:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
4594:DRIVER/FatFs/source/ff.c **** /* Create a Directory Object                                             */
4595:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
4596:DRIVER/FatFs/source/ff.c **** 
4597:DRIVER/FatFs/source/ff.c **** FRESULT f_opendir (
4598:DRIVER/FatFs/source/ff.c **** 	DIR* dp,			/* Pointer to directory object to create */
4599:DRIVER/FatFs/source/ff.c **** 	const TCHAR* path	/* Pointer to the directory path */
4600:DRIVER/FatFs/source/ff.c **** )
4601:DRIVER/FatFs/source/ff.c **** {
4602:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
4603:DRIVER/FatFs/source/ff.c **** 	FATFS *fs;
4604:DRIVER/FatFs/source/ff.c **** 	DEF_NAMBUF
4605:DRIVER/FatFs/source/ff.c **** 
4606:DRIVER/FatFs/source/ff.c **** 
4607:DRIVER/FatFs/source/ff.c **** 	if (!dp) return FR_INVALID_OBJECT;
4608:DRIVER/FatFs/source/ff.c **** 
4609:DRIVER/FatFs/source/ff.c **** 	/* Get logical drive */
4610:DRIVER/FatFs/source/ff.c **** 	res = mount_volume(&path, &fs, 0);
4611:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
4612:DRIVER/FatFs/source/ff.c **** 		dp->obj.fs = fs;
4613:DRIVER/FatFs/source/ff.c **** 		INIT_NAMBUF(fs);
4614:DRIVER/FatFs/source/ff.c **** 		res = follow_path(dp, path);			/* Follow the path to the directory */
4615:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK) {						/* Follow completed */
4616:DRIVER/FatFs/source/ff.c **** 			if (!(dp->fn[NSFLAG] & NS_NONAME)) {	/* It is not the origin directory itself */
4617:DRIVER/FatFs/source/ff.c **** 				if (dp->obj.attr & AM_DIR) {		/* This object is a sub-directory */
4618:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
4619:DRIVER/FatFs/source/ff.c **** 					if (fs->fs_type == FS_EXFAT) {
4620:DRIVER/FatFs/source/ff.c **** 						dp->obj.c_scl = dp->obj.sclust;	/* Get containing directory inforamation */
4621:DRIVER/FatFs/source/ff.c **** 						dp->obj.c_size = ((DWORD)dp->obj.objsize & 0xFFFFFF00) | dp->obj.stat;
4622:DRIVER/FatFs/source/ff.c **** 						dp->obj.c_ofs = dp->blk_ofs;
4623:DRIVER/FatFs/source/ff.c **** 						init_alloc_info(fs, &dp->obj);	/* Get object allocation info */
4624:DRIVER/FatFs/source/ff.c **** 					} else
4625:DRIVER/FatFs/source/ff.c **** #endif
4626:DRIVER/FatFs/source/ff.c **** 					{
4627:DRIVER/FatFs/source/ff.c **** 						dp->obj.sclust = ld_clust(fs, dp->dir);	/* Get object allocation info */
4628:DRIVER/FatFs/source/ff.c **** 					}
4629:DRIVER/FatFs/source/ff.c **** 				} else {						/* This object is a file */
4630:DRIVER/FatFs/source/ff.c **** 					res = FR_NO_PATH;
4631:DRIVER/FatFs/source/ff.c **** 				}
4632:DRIVER/FatFs/source/ff.c **** 			}
4633:DRIVER/FatFs/source/ff.c **** 			if (res == FR_OK) {
4634:DRIVER/FatFs/source/ff.c **** 				dp->obj.id = fs->id;
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 187


4635:DRIVER/FatFs/source/ff.c **** 				res = dir_sdi(dp, 0);			/* Rewind directory */
4636:DRIVER/FatFs/source/ff.c **** #if FF_FS_LOCK
4637:DRIVER/FatFs/source/ff.c **** 				if (res == FR_OK) {
4638:DRIVER/FatFs/source/ff.c **** 					if (dp->obj.sclust != 0) {
4639:DRIVER/FatFs/source/ff.c **** 						dp->obj.lockid = inc_share(dp, 0);	/* Lock the sub directory */
4640:DRIVER/FatFs/source/ff.c **** 						if (!dp->obj.lockid) res = FR_TOO_MANY_OPEN_FILES;
4641:DRIVER/FatFs/source/ff.c **** 					} else {
4642:DRIVER/FatFs/source/ff.c **** 						dp->obj.lockid = 0;	/* Root directory need not to be locked */
4643:DRIVER/FatFs/source/ff.c **** 					}
4644:DRIVER/FatFs/source/ff.c **** 				}
4645:DRIVER/FatFs/source/ff.c **** #endif
4646:DRIVER/FatFs/source/ff.c **** 			}
4647:DRIVER/FatFs/source/ff.c **** 		}
4648:DRIVER/FatFs/source/ff.c **** 		FREE_NAMBUF();
4649:DRIVER/FatFs/source/ff.c **** 		if (res == FR_NO_FILE) res = FR_NO_PATH;
4650:DRIVER/FatFs/source/ff.c **** 	}
4651:DRIVER/FatFs/source/ff.c **** 	if (res != FR_OK) dp->obj.fs = 0;		/* Invalidate the directory object if function failed */
4652:DRIVER/FatFs/source/ff.c **** 
4653:DRIVER/FatFs/source/ff.c **** 	LEAVE_FF(fs, res);
4654:DRIVER/FatFs/source/ff.c **** }
4655:DRIVER/FatFs/source/ff.c **** 
4656:DRIVER/FatFs/source/ff.c **** 
4657:DRIVER/FatFs/source/ff.c **** 
4658:DRIVER/FatFs/source/ff.c **** 
4659:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
4660:DRIVER/FatFs/source/ff.c **** /* Close Directory                                                       */
4661:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
4662:DRIVER/FatFs/source/ff.c **** 
4663:DRIVER/FatFs/source/ff.c **** FRESULT f_closedir (
4664:DRIVER/FatFs/source/ff.c **** 	DIR *dp		/* Pointer to the directory object to be closed */
4665:DRIVER/FatFs/source/ff.c **** )
4666:DRIVER/FatFs/source/ff.c **** {
4667:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
4668:DRIVER/FatFs/source/ff.c **** 	FATFS *fs;
4669:DRIVER/FatFs/source/ff.c **** 
4670:DRIVER/FatFs/source/ff.c **** 
4671:DRIVER/FatFs/source/ff.c **** 	res = validate(&dp->obj, &fs);	/* Check validity of the file object */
4672:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
4673:DRIVER/FatFs/source/ff.c **** #if FF_FS_LOCK
4674:DRIVER/FatFs/source/ff.c **** 		if (dp->obj.lockid) res = dec_share(dp->obj.lockid);	/* Decrement sub-directory open counter */
4675:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK) dp->obj.fs = 0;	/* Invalidate directory object */
4676:DRIVER/FatFs/source/ff.c **** #else
4677:DRIVER/FatFs/source/ff.c **** 		dp->obj.fs = 0;	/* Invalidate directory object */
4678:DRIVER/FatFs/source/ff.c **** #endif
4679:DRIVER/FatFs/source/ff.c **** #if FF_FS_REENTRANT
4680:DRIVER/FatFs/source/ff.c **** 		unlock_volume(fs, FR_OK);	/* Unlock volume */
4681:DRIVER/FatFs/source/ff.c **** #endif
4682:DRIVER/FatFs/source/ff.c **** 	}
4683:DRIVER/FatFs/source/ff.c **** 	return res;
4684:DRIVER/FatFs/source/ff.c **** }
4685:DRIVER/FatFs/source/ff.c **** 
4686:DRIVER/FatFs/source/ff.c **** 
4687:DRIVER/FatFs/source/ff.c **** 
4688:DRIVER/FatFs/source/ff.c **** 
4689:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
4690:DRIVER/FatFs/source/ff.c **** /* Read Directory Entries in Sequence                                    */
4691:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 188


4692:DRIVER/FatFs/source/ff.c **** 
4693:DRIVER/FatFs/source/ff.c **** FRESULT f_readdir (
4694:DRIVER/FatFs/source/ff.c **** 	DIR* dp,			/* Pointer to the open directory object */
4695:DRIVER/FatFs/source/ff.c **** 	FILINFO* fno		/* Pointer to file information to return */
4696:DRIVER/FatFs/source/ff.c **** )
4697:DRIVER/FatFs/source/ff.c **** {
4698:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
4699:DRIVER/FatFs/source/ff.c **** 	FATFS *fs;
4700:DRIVER/FatFs/source/ff.c **** 	DEF_NAMBUF
4701:DRIVER/FatFs/source/ff.c **** 
4702:DRIVER/FatFs/source/ff.c **** 
4703:DRIVER/FatFs/source/ff.c **** 	res = validate(&dp->obj, &fs);	/* Check validity of the directory object */
4704:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
4705:DRIVER/FatFs/source/ff.c **** 		if (!fno) {
4706:DRIVER/FatFs/source/ff.c **** 			res = dir_sdi(dp, 0);		/* Rewind the directory object */
4707:DRIVER/FatFs/source/ff.c **** 		} else {
4708:DRIVER/FatFs/source/ff.c **** 			INIT_NAMBUF(fs);
4709:DRIVER/FatFs/source/ff.c **** 			res = DIR_READ_FILE(dp);		/* Read an item */
4710:DRIVER/FatFs/source/ff.c **** 			if (res == FR_NO_FILE) res = FR_OK;	/* Ignore end of directory */
4711:DRIVER/FatFs/source/ff.c **** 			if (res == FR_OK) {				/* A valid entry is found */
4712:DRIVER/FatFs/source/ff.c **** 				get_fileinfo(dp, fno);		/* Get the object information */
4713:DRIVER/FatFs/source/ff.c **** 				res = dir_next(dp, 0);		/* Increment index for next */
4714:DRIVER/FatFs/source/ff.c **** 				if (res == FR_NO_FILE) res = FR_OK;	/* Ignore end of directory now */
4715:DRIVER/FatFs/source/ff.c **** 			}
4716:DRIVER/FatFs/source/ff.c **** 			FREE_NAMBUF();
4717:DRIVER/FatFs/source/ff.c **** 		}
4718:DRIVER/FatFs/source/ff.c **** 	}
4719:DRIVER/FatFs/source/ff.c **** 	LEAVE_FF(fs, res);
4720:DRIVER/FatFs/source/ff.c **** }
4721:DRIVER/FatFs/source/ff.c **** 
4722:DRIVER/FatFs/source/ff.c **** 
4723:DRIVER/FatFs/source/ff.c **** 
4724:DRIVER/FatFs/source/ff.c **** #if FF_USE_FIND
4725:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
4726:DRIVER/FatFs/source/ff.c **** /* Find Next File                                                        */
4727:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
4728:DRIVER/FatFs/source/ff.c **** 
4729:DRIVER/FatFs/source/ff.c **** FRESULT f_findnext (
4730:DRIVER/FatFs/source/ff.c **** 	DIR* dp,		/* Pointer to the open directory object */
4731:DRIVER/FatFs/source/ff.c **** 	FILINFO* fno	/* Pointer to the file information structure */
4732:DRIVER/FatFs/source/ff.c **** )
4733:DRIVER/FatFs/source/ff.c **** {
4734:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
4735:DRIVER/FatFs/source/ff.c **** 
4736:DRIVER/FatFs/source/ff.c **** 
4737:DRIVER/FatFs/source/ff.c **** 	for (;;) {
4738:DRIVER/FatFs/source/ff.c **** 		res = f_readdir(dp, fno);		/* Get a directory item */
4739:DRIVER/FatFs/source/ff.c **** 		if (res != FR_OK || !fno || !fno->fname[0]) break;	/* Terminate if any error or end of directory 
4740:DRIVER/FatFs/source/ff.c **** 		if (pattern_match(dp->pat, fno->fname, 0, FIND_RECURS)) break;		/* Test for the file name */
4741:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN && FF_USE_FIND == 2
4742:DRIVER/FatFs/source/ff.c **** 		if (pattern_match(dp->pat, fno->altname, 0, FIND_RECURS)) break;	/* Test for alternative name if 
4743:DRIVER/FatFs/source/ff.c **** #endif
4744:DRIVER/FatFs/source/ff.c **** 	}
4745:DRIVER/FatFs/source/ff.c **** 	return res;
4746:DRIVER/FatFs/source/ff.c **** }
4747:DRIVER/FatFs/source/ff.c **** 
4748:DRIVER/FatFs/source/ff.c **** 
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 189


4749:DRIVER/FatFs/source/ff.c **** 
4750:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
4751:DRIVER/FatFs/source/ff.c **** /* Find First File                                                       */
4752:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
4753:DRIVER/FatFs/source/ff.c **** 
4754:DRIVER/FatFs/source/ff.c **** FRESULT f_findfirst (
4755:DRIVER/FatFs/source/ff.c **** 	DIR* dp,				/* Pointer to the blank directory object */
4756:DRIVER/FatFs/source/ff.c **** 	FILINFO* fno,			/* Pointer to the file information structure */
4757:DRIVER/FatFs/source/ff.c **** 	const TCHAR* path,		/* Pointer to the directory to open */
4758:DRIVER/FatFs/source/ff.c **** 	const TCHAR* pattern	/* Pointer to the matching pattern */
4759:DRIVER/FatFs/source/ff.c **** )
4760:DRIVER/FatFs/source/ff.c **** {
4761:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
4762:DRIVER/FatFs/source/ff.c **** 
4763:DRIVER/FatFs/source/ff.c **** 
4764:DRIVER/FatFs/source/ff.c **** 	dp->pat = pattern;		/* Save pointer to pattern string */
4765:DRIVER/FatFs/source/ff.c **** 	res = f_opendir(dp, path);		/* Open the target directory */
4766:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
4767:DRIVER/FatFs/source/ff.c **** 		res = f_findnext(dp, fno);	/* Find the first item */
4768:DRIVER/FatFs/source/ff.c **** 	}
4769:DRIVER/FatFs/source/ff.c **** 	return res;
4770:DRIVER/FatFs/source/ff.c **** }
4771:DRIVER/FatFs/source/ff.c **** 
4772:DRIVER/FatFs/source/ff.c **** #endif	/* FF_USE_FIND */
4773:DRIVER/FatFs/source/ff.c **** 
4774:DRIVER/FatFs/source/ff.c **** 
4775:DRIVER/FatFs/source/ff.c **** 
4776:DRIVER/FatFs/source/ff.c **** #if FF_FS_MINIMIZE == 0
4777:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
4778:DRIVER/FatFs/source/ff.c **** /* Get File Status                                                       */
4779:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
4780:DRIVER/FatFs/source/ff.c **** 
4781:DRIVER/FatFs/source/ff.c **** FRESULT f_stat (
4782:DRIVER/FatFs/source/ff.c **** 	const TCHAR* path,	/* Pointer to the file path */
4783:DRIVER/FatFs/source/ff.c **** 	FILINFO* fno		/* Pointer to file information to return */
4784:DRIVER/FatFs/source/ff.c **** )
4785:DRIVER/FatFs/source/ff.c **** {
4786:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
4787:DRIVER/FatFs/source/ff.c **** 	DIR dj;
4788:DRIVER/FatFs/source/ff.c **** 	DEF_NAMBUF
4789:DRIVER/FatFs/source/ff.c **** 
4790:DRIVER/FatFs/source/ff.c **** 
4791:DRIVER/FatFs/source/ff.c **** 	/* Get logical drive */
4792:DRIVER/FatFs/source/ff.c **** 	res = mount_volume(&path, &dj.obj.fs, 0);
4793:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
4794:DRIVER/FatFs/source/ff.c **** 		INIT_NAMBUF(dj.obj.fs);
4795:DRIVER/FatFs/source/ff.c **** 		res = follow_path(&dj, path);	/* Follow the file path */
4796:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK) {				/* Follow completed */
4797:DRIVER/FatFs/source/ff.c **** 			if (dj.fn[NSFLAG] & NS_NONAME) {	/* It is origin directory */
4798:DRIVER/FatFs/source/ff.c **** 				res = FR_INVALID_NAME;
4799:DRIVER/FatFs/source/ff.c **** 			} else {							/* Found an object */
4800:DRIVER/FatFs/source/ff.c **** 				if (fno) get_fileinfo(&dj, fno);
4801:DRIVER/FatFs/source/ff.c **** 			}
4802:DRIVER/FatFs/source/ff.c **** 		}
4803:DRIVER/FatFs/source/ff.c **** 		FREE_NAMBUF();
4804:DRIVER/FatFs/source/ff.c **** 	}
4805:DRIVER/FatFs/source/ff.c **** 
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 190


4806:DRIVER/FatFs/source/ff.c **** 	LEAVE_FF(dj.obj.fs, res);
4807:DRIVER/FatFs/source/ff.c **** }
4808:DRIVER/FatFs/source/ff.c **** 
4809:DRIVER/FatFs/source/ff.c **** 
4810:DRIVER/FatFs/source/ff.c **** 
4811:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY
4812:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
4813:DRIVER/FatFs/source/ff.c **** /* Get Number of Free Clusters                                           */
4814:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
4815:DRIVER/FatFs/source/ff.c **** 
4816:DRIVER/FatFs/source/ff.c **** FRESULT f_getfree (
4817:DRIVER/FatFs/source/ff.c **** 	const TCHAR* path,	/* Logical drive number */
4818:DRIVER/FatFs/source/ff.c **** 	DWORD* nclst,		/* Pointer to a variable to return number of free clusters */
4819:DRIVER/FatFs/source/ff.c **** 	FATFS** fatfs		/* Pointer to return pointer to corresponding filesystem object */
4820:DRIVER/FatFs/source/ff.c **** )
4821:DRIVER/FatFs/source/ff.c **** {
4822:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
4823:DRIVER/FatFs/source/ff.c **** 	FATFS *fs;
4824:DRIVER/FatFs/source/ff.c **** 	DWORD nfree, clst, stat;
4825:DRIVER/FatFs/source/ff.c **** 	LBA_t sect;
4826:DRIVER/FatFs/source/ff.c **** 	UINT i;
4827:DRIVER/FatFs/source/ff.c **** 	FFOBJID obj;
4828:DRIVER/FatFs/source/ff.c **** 
4829:DRIVER/FatFs/source/ff.c **** 
4830:DRIVER/FatFs/source/ff.c **** 	/* Get logical drive */
4831:DRIVER/FatFs/source/ff.c **** 	res = mount_volume(&path, &fs, 0);
4832:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
4833:DRIVER/FatFs/source/ff.c **** 		*fatfs = fs;				/* Return ptr to the fs object */
4834:DRIVER/FatFs/source/ff.c **** 		/* If free_clst is valid, return it without full FAT scan */
4835:DRIVER/FatFs/source/ff.c **** 		if (fs->free_clst <= fs->n_fatent - 2) {
4836:DRIVER/FatFs/source/ff.c **** 			*nclst = fs->free_clst;
4837:DRIVER/FatFs/source/ff.c **** 		} else {
4838:DRIVER/FatFs/source/ff.c **** 			/* Scan FAT to obtain number of free clusters */
4839:DRIVER/FatFs/source/ff.c **** 			nfree = 0;
4840:DRIVER/FatFs/source/ff.c **** 			if (fs->fs_type == FS_FAT12) {	/* FAT12: Scan bit field FAT entries */
4841:DRIVER/FatFs/source/ff.c **** 				clst = 2; obj.fs = fs;
4842:DRIVER/FatFs/source/ff.c **** 				do {
4843:DRIVER/FatFs/source/ff.c **** 					stat = get_fat(&obj, clst);
4844:DRIVER/FatFs/source/ff.c **** 					if (stat == 0xFFFFFFFF) {
4845:DRIVER/FatFs/source/ff.c **** 						res = FR_DISK_ERR; break;
4846:DRIVER/FatFs/source/ff.c **** 					}
4847:DRIVER/FatFs/source/ff.c **** 					if (stat == 1) {
4848:DRIVER/FatFs/source/ff.c **** 						res = FR_INT_ERR; break;
4849:DRIVER/FatFs/source/ff.c **** 					}
4850:DRIVER/FatFs/source/ff.c **** 					if (stat == 0) nfree++;
4851:DRIVER/FatFs/source/ff.c **** 				} while (++clst < fs->n_fatent);
4852:DRIVER/FatFs/source/ff.c **** 			} else {
4853:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
4854:DRIVER/FatFs/source/ff.c **** 				if (fs->fs_type == FS_EXFAT) {	/* exFAT: Scan allocation bitmap */
4855:DRIVER/FatFs/source/ff.c **** 					BYTE bm;
4856:DRIVER/FatFs/source/ff.c **** 					UINT b;
4857:DRIVER/FatFs/source/ff.c **** 
4858:DRIVER/FatFs/source/ff.c **** 					clst = fs->n_fatent - 2;	/* Number of clusters */
4859:DRIVER/FatFs/source/ff.c **** 					sect = fs->bitbase;			/* Bitmap sector */
4860:DRIVER/FatFs/source/ff.c **** 					i = 0;						/* Offset in the sector */
4861:DRIVER/FatFs/source/ff.c **** 					do {	/* Counts numbuer of bits with zero in the bitmap */
4862:DRIVER/FatFs/source/ff.c **** 						if (i == 0) {	/* New sector? */
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 191


4863:DRIVER/FatFs/source/ff.c **** 							res = move_window(fs, sect++);
4864:DRIVER/FatFs/source/ff.c **** 							if (res != FR_OK) break;
4865:DRIVER/FatFs/source/ff.c **** 						}
4866:DRIVER/FatFs/source/ff.c **** 						for (b = 8, bm = ~fs->win[i]; b && clst; b--, clst--) {
4867:DRIVER/FatFs/source/ff.c **** 							nfree += bm & 1;
4868:DRIVER/FatFs/source/ff.c **** 							bm >>= 1;
4869:DRIVER/FatFs/source/ff.c **** 						}
4870:DRIVER/FatFs/source/ff.c **** 						i = (i + 1) % SS(fs);
4871:DRIVER/FatFs/source/ff.c **** 					} while (clst);
4872:DRIVER/FatFs/source/ff.c **** 				} else
4873:DRIVER/FatFs/source/ff.c **** #endif
4874:DRIVER/FatFs/source/ff.c **** 				{	/* FAT16/32: Scan WORD/DWORD FAT entries */
4875:DRIVER/FatFs/source/ff.c **** 					clst = fs->n_fatent;	/* Number of entries */
4876:DRIVER/FatFs/source/ff.c **** 					sect = fs->fatbase;		/* Top of the FAT */
4877:DRIVER/FatFs/source/ff.c **** 					i = 0;					/* Offset in the sector */
4878:DRIVER/FatFs/source/ff.c **** 					do {	/* Counts numbuer of entries with zero in the FAT */
4879:DRIVER/FatFs/source/ff.c **** 						if (i == 0) {	/* New sector? */
4880:DRIVER/FatFs/source/ff.c **** 							res = move_window(fs, sect++);
4881:DRIVER/FatFs/source/ff.c **** 							if (res != FR_OK) break;
4882:DRIVER/FatFs/source/ff.c **** 						}
4883:DRIVER/FatFs/source/ff.c **** 						if (fs->fs_type == FS_FAT16) {
4884:DRIVER/FatFs/source/ff.c **** 							if (ld_word(fs->win + i) == 0) nfree++;
4885:DRIVER/FatFs/source/ff.c **** 							i += 2;
4886:DRIVER/FatFs/source/ff.c **** 						} else {
4887:DRIVER/FatFs/source/ff.c **** 							if ((ld_dword(fs->win + i) & 0x0FFFFFFF) == 0) nfree++;
4888:DRIVER/FatFs/source/ff.c **** 							i += 4;
4889:DRIVER/FatFs/source/ff.c **** 						}
4890:DRIVER/FatFs/source/ff.c **** 						i %= SS(fs);
4891:DRIVER/FatFs/source/ff.c **** 					} while (--clst);
4892:DRIVER/FatFs/source/ff.c **** 				}
4893:DRIVER/FatFs/source/ff.c **** 			}
4894:DRIVER/FatFs/source/ff.c **** 			if (res == FR_OK) {		/* Update parameters if succeeded */
4895:DRIVER/FatFs/source/ff.c **** 				*nclst = nfree;			/* Return the free clusters */
4896:DRIVER/FatFs/source/ff.c **** 				fs->free_clst = nfree;	/* Now free_clst is valid */
4897:DRIVER/FatFs/source/ff.c **** 				fs->fsi_flag |= 1;		/* FAT32: FSInfo is to be updated */
4898:DRIVER/FatFs/source/ff.c **** 			}
4899:DRIVER/FatFs/source/ff.c **** 		}
4900:DRIVER/FatFs/source/ff.c **** 	}
4901:DRIVER/FatFs/source/ff.c **** 
4902:DRIVER/FatFs/source/ff.c **** 	LEAVE_FF(fs, res);
4903:DRIVER/FatFs/source/ff.c **** }
4904:DRIVER/FatFs/source/ff.c **** 
4905:DRIVER/FatFs/source/ff.c **** 
4906:DRIVER/FatFs/source/ff.c **** 
4907:DRIVER/FatFs/source/ff.c **** 
4908:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
4909:DRIVER/FatFs/source/ff.c **** /* Truncate File                                                         */
4910:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
4911:DRIVER/FatFs/source/ff.c **** 
4912:DRIVER/FatFs/source/ff.c **** FRESULT f_truncate (
4913:DRIVER/FatFs/source/ff.c **** 	FIL* fp		/* Pointer to the file object */
4914:DRIVER/FatFs/source/ff.c **** )
4915:DRIVER/FatFs/source/ff.c **** {
4916:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
4917:DRIVER/FatFs/source/ff.c **** 	FATFS *fs;
4918:DRIVER/FatFs/source/ff.c **** 	DWORD ncl;
4919:DRIVER/FatFs/source/ff.c **** 
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 192


4920:DRIVER/FatFs/source/ff.c **** 
4921:DRIVER/FatFs/source/ff.c **** 	res = validate(&fp->obj, &fs);	/* Check validity of the file object */
4922:DRIVER/FatFs/source/ff.c **** 	if (res != FR_OK || (res = (FRESULT)fp->err) != FR_OK) LEAVE_FF(fs, res);
4923:DRIVER/FatFs/source/ff.c **** 	if (!(fp->flag & FA_WRITE)) LEAVE_FF(fs, FR_DENIED);	/* Check access mode */
4924:DRIVER/FatFs/source/ff.c **** 
4925:DRIVER/FatFs/source/ff.c **** 	if (fp->fptr < fp->obj.objsize) {	/* Process when fptr is not on the eof */
4926:DRIVER/FatFs/source/ff.c **** 		if (fp->fptr == 0) {	/* When set file size to zero, remove entire cluster chain */
4927:DRIVER/FatFs/source/ff.c **** 			res = remove_chain(&fp->obj, fp->obj.sclust, 0);
4928:DRIVER/FatFs/source/ff.c **** 			fp->obj.sclust = 0;
4929:DRIVER/FatFs/source/ff.c **** 		} else {				/* When truncate a part of the file, remove remaining clusters */
4930:DRIVER/FatFs/source/ff.c **** 			ncl = get_fat(&fp->obj, fp->clust);
4931:DRIVER/FatFs/source/ff.c **** 			res = FR_OK;
4932:DRIVER/FatFs/source/ff.c **** 			if (ncl == 0xFFFFFFFF) res = FR_DISK_ERR;
4933:DRIVER/FatFs/source/ff.c **** 			if (ncl == 1) res = FR_INT_ERR;
4934:DRIVER/FatFs/source/ff.c **** 			if (res == FR_OK && ncl < fs->n_fatent) {
4935:DRIVER/FatFs/source/ff.c **** 				res = remove_chain(&fp->obj, ncl, fp->clust);
4936:DRIVER/FatFs/source/ff.c **** 			}
4937:DRIVER/FatFs/source/ff.c **** 		}
4938:DRIVER/FatFs/source/ff.c **** 		fp->obj.objsize = fp->fptr;	/* Set file size to current read/write point */
4939:DRIVER/FatFs/source/ff.c **** 		fp->flag |= FA_MODIFIED;
4940:DRIVER/FatFs/source/ff.c **** #if !FF_FS_TINY
4941:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK && (fp->flag & FA_DIRTY)) {
4942:DRIVER/FatFs/source/ff.c **** 			if (disk_write(fs->pdrv, fp->buf, fp->sect, 1) != RES_OK) {
4943:DRIVER/FatFs/source/ff.c **** 				res = FR_DISK_ERR;
4944:DRIVER/FatFs/source/ff.c **** 			} else {
4945:DRIVER/FatFs/source/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
4946:DRIVER/FatFs/source/ff.c **** 			}
4947:DRIVER/FatFs/source/ff.c **** 		}
4948:DRIVER/FatFs/source/ff.c **** #endif
4949:DRIVER/FatFs/source/ff.c **** 		if (res != FR_OK) ABORT(fs, res);
4950:DRIVER/FatFs/source/ff.c **** 	}
4951:DRIVER/FatFs/source/ff.c **** 
4952:DRIVER/FatFs/source/ff.c **** 	LEAVE_FF(fs, res);
4953:DRIVER/FatFs/source/ff.c **** }
4954:DRIVER/FatFs/source/ff.c **** 
4955:DRIVER/FatFs/source/ff.c **** 
4956:DRIVER/FatFs/source/ff.c **** 
4957:DRIVER/FatFs/source/ff.c **** 
4958:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
4959:DRIVER/FatFs/source/ff.c **** /* Delete a File/Directory                                               */
4960:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
4961:DRIVER/FatFs/source/ff.c **** 
4962:DRIVER/FatFs/source/ff.c **** FRESULT f_unlink (
4963:DRIVER/FatFs/source/ff.c **** 	const TCHAR* path		/* Pointer to the file or directory path */
4964:DRIVER/FatFs/source/ff.c **** )
4965:DRIVER/FatFs/source/ff.c **** {
4966:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
4967:DRIVER/FatFs/source/ff.c **** 	FATFS *fs;
4968:DRIVER/FatFs/source/ff.c **** 	DIR dj, sdj;
4969:DRIVER/FatFs/source/ff.c **** 	DWORD dclst = 0;
4970:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
4971:DRIVER/FatFs/source/ff.c **** 	FFOBJID obj;
4972:DRIVER/FatFs/source/ff.c **** #endif
4973:DRIVER/FatFs/source/ff.c **** 	DEF_NAMBUF
4974:DRIVER/FatFs/source/ff.c **** 
4975:DRIVER/FatFs/source/ff.c **** 
4976:DRIVER/FatFs/source/ff.c **** 	/* Get logical drive */
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 193


4977:DRIVER/FatFs/source/ff.c **** 	res = mount_volume(&path, &fs, FA_WRITE);
4978:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
4979:DRIVER/FatFs/source/ff.c **** 		dj.obj.fs = fs;
4980:DRIVER/FatFs/source/ff.c **** 		INIT_NAMBUF(fs);
4981:DRIVER/FatFs/source/ff.c **** 		res = follow_path(&dj, path);		/* Follow the file path */
4982:DRIVER/FatFs/source/ff.c **** 		if (FF_FS_RPATH && res == FR_OK && (dj.fn[NSFLAG] & NS_DOT)) {
4983:DRIVER/FatFs/source/ff.c **** 			res = FR_INVALID_NAME;			/* Cannot remove dot entry */
4984:DRIVER/FatFs/source/ff.c **** 		}
4985:DRIVER/FatFs/source/ff.c **** #if FF_FS_LOCK
4986:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK) res = chk_share(&dj, 2);	/* Check if it is an open object */
4987:DRIVER/FatFs/source/ff.c **** #endif
4988:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK) {					/* The object is accessible */
4989:DRIVER/FatFs/source/ff.c **** 			if (dj.fn[NSFLAG] & NS_NONAME) {
4990:DRIVER/FatFs/source/ff.c **** 				res = FR_INVALID_NAME;		/* Cannot remove the origin directory */
4991:DRIVER/FatFs/source/ff.c **** 			} else {
4992:DRIVER/FatFs/source/ff.c **** 				if (dj.obj.attr & AM_RDO) {
4993:DRIVER/FatFs/source/ff.c **** 					res = FR_DENIED;		/* Cannot remove R/O object */
4994:DRIVER/FatFs/source/ff.c **** 				}
4995:DRIVER/FatFs/source/ff.c **** 			}
4996:DRIVER/FatFs/source/ff.c **** 			if (res == FR_OK) {
4997:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
4998:DRIVER/FatFs/source/ff.c **** 				obj.fs = fs;
4999:DRIVER/FatFs/source/ff.c **** 				if (fs->fs_type == FS_EXFAT) {
5000:DRIVER/FatFs/source/ff.c **** 					init_alloc_info(fs, &obj);
5001:DRIVER/FatFs/source/ff.c **** 					dclst = obj.sclust;
5002:DRIVER/FatFs/source/ff.c **** 				} else
5003:DRIVER/FatFs/source/ff.c **** #endif
5004:DRIVER/FatFs/source/ff.c **** 				{
5005:DRIVER/FatFs/source/ff.c **** 					dclst = ld_clust(fs, dj.dir);
5006:DRIVER/FatFs/source/ff.c **** 				}
5007:DRIVER/FatFs/source/ff.c **** 				if (dj.obj.attr & AM_DIR) {			/* Is it a sub-directory? */
5008:DRIVER/FatFs/source/ff.c **** #if FF_FS_RPATH != 0
5009:DRIVER/FatFs/source/ff.c **** 					if (dclst == fs->cdir) {	 	/* Is it the current directory? */
5010:DRIVER/FatFs/source/ff.c **** 						res = FR_DENIED;
5011:DRIVER/FatFs/source/ff.c **** 					} else
5012:DRIVER/FatFs/source/ff.c **** #endif
5013:DRIVER/FatFs/source/ff.c **** 					{
5014:DRIVER/FatFs/source/ff.c **** 						sdj.obj.fs = fs;			/* Open the sub-directory */
5015:DRIVER/FatFs/source/ff.c **** 						sdj.obj.sclust = dclst;
5016:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
5017:DRIVER/FatFs/source/ff.c **** 						if (fs->fs_type == FS_EXFAT) {
5018:DRIVER/FatFs/source/ff.c **** 							sdj.obj.objsize = obj.objsize;
5019:DRIVER/FatFs/source/ff.c **** 							sdj.obj.stat = obj.stat;
5020:DRIVER/FatFs/source/ff.c **** 						}
5021:DRIVER/FatFs/source/ff.c **** #endif
5022:DRIVER/FatFs/source/ff.c **** 						res = dir_sdi(&sdj, 0);
5023:DRIVER/FatFs/source/ff.c **** 						if (res == FR_OK) {
5024:DRIVER/FatFs/source/ff.c **** 							res = DIR_READ_FILE(&sdj);			/* Test if the directory is empty */
5025:DRIVER/FatFs/source/ff.c **** 							if (res == FR_OK) res = FR_DENIED;	/* Not empty? */
5026:DRIVER/FatFs/source/ff.c **** 							if (res == FR_NO_FILE) res = FR_OK;	/* Empty? */
5027:DRIVER/FatFs/source/ff.c **** 						}
5028:DRIVER/FatFs/source/ff.c **** 					}
5029:DRIVER/FatFs/source/ff.c **** 				}
5030:DRIVER/FatFs/source/ff.c **** 			}
5031:DRIVER/FatFs/source/ff.c **** 			if (res == FR_OK) {
5032:DRIVER/FatFs/source/ff.c **** 				res = dir_remove(&dj);			/* Remove the directory entry */
5033:DRIVER/FatFs/source/ff.c **** 				if (res == FR_OK && dclst != 0) {	/* Remove the cluster chain if exist */
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 194


5034:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
5035:DRIVER/FatFs/source/ff.c **** 					res = remove_chain(&obj, dclst, 0);
5036:DRIVER/FatFs/source/ff.c **** #else
5037:DRIVER/FatFs/source/ff.c **** 					res = remove_chain(&dj.obj, dclst, 0);
5038:DRIVER/FatFs/source/ff.c **** #endif
5039:DRIVER/FatFs/source/ff.c **** 				}
5040:DRIVER/FatFs/source/ff.c **** 				if (res == FR_OK) res = sync_fs(fs);
5041:DRIVER/FatFs/source/ff.c **** 			}
5042:DRIVER/FatFs/source/ff.c **** 		}
5043:DRIVER/FatFs/source/ff.c **** 		FREE_NAMBUF();
5044:DRIVER/FatFs/source/ff.c **** 	}
5045:DRIVER/FatFs/source/ff.c **** 
5046:DRIVER/FatFs/source/ff.c **** 	LEAVE_FF(fs, res);
5047:DRIVER/FatFs/source/ff.c **** }
5048:DRIVER/FatFs/source/ff.c **** 
5049:DRIVER/FatFs/source/ff.c **** 
5050:DRIVER/FatFs/source/ff.c **** 
5051:DRIVER/FatFs/source/ff.c **** 
5052:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
5053:DRIVER/FatFs/source/ff.c **** /* Create a Directory                                                    */
5054:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
5055:DRIVER/FatFs/source/ff.c **** 
5056:DRIVER/FatFs/source/ff.c **** FRESULT f_mkdir (
5057:DRIVER/FatFs/source/ff.c **** 	const TCHAR* path		/* Pointer to the directory path */
5058:DRIVER/FatFs/source/ff.c **** )
5059:DRIVER/FatFs/source/ff.c **** {
5060:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
5061:DRIVER/FatFs/source/ff.c **** 	FATFS *fs;
5062:DRIVER/FatFs/source/ff.c **** 	DIR dj;
5063:DRIVER/FatFs/source/ff.c **** 	FFOBJID sobj;
5064:DRIVER/FatFs/source/ff.c **** 	DWORD dcl, pcl, tm;
5065:DRIVER/FatFs/source/ff.c **** 	DEF_NAMBUF
5066:DRIVER/FatFs/source/ff.c **** 
5067:DRIVER/FatFs/source/ff.c **** 
5068:DRIVER/FatFs/source/ff.c **** 	res = mount_volume(&path, &fs, FA_WRITE);	/* Get logical drive */
5069:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
5070:DRIVER/FatFs/source/ff.c **** 		dj.obj.fs = fs;
5071:DRIVER/FatFs/source/ff.c **** 		INIT_NAMBUF(fs);
5072:DRIVER/FatFs/source/ff.c **** 		res = follow_path(&dj, path);			/* Follow the file path */
5073:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK) res = FR_EXIST;		/* Name collision? */
5074:DRIVER/FatFs/source/ff.c **** 		if (FF_FS_RPATH && res == FR_NO_FILE && (dj.fn[NSFLAG] & NS_DOT)) {	/* Invalid name? */
5075:DRIVER/FatFs/source/ff.c **** 			res = FR_INVALID_NAME;
5076:DRIVER/FatFs/source/ff.c **** 		}
5077:DRIVER/FatFs/source/ff.c **** 		if (res == FR_NO_FILE) {				/* It is clear to create a new directory */
5078:DRIVER/FatFs/source/ff.c **** 			sobj.fs = fs;						/* New object id to create a new chain */
5079:DRIVER/FatFs/source/ff.c **** 			dcl = create_chain(&sobj, 0);		/* Allocate a cluster for the new directory */
5080:DRIVER/FatFs/source/ff.c **** 			res = FR_OK;
5081:DRIVER/FatFs/source/ff.c **** 			if (dcl == 0) res = FR_DENIED;		/* No space to allocate a new cluster? */
5082:DRIVER/FatFs/source/ff.c **** 			if (dcl == 1) res = FR_INT_ERR;		/* Any insanity? */
5083:DRIVER/FatFs/source/ff.c **** 			if (dcl == 0xFFFFFFFF) res = FR_DISK_ERR;	/* Disk error? */
5084:DRIVER/FatFs/source/ff.c **** 			tm = GET_FATTIME();
5085:DRIVER/FatFs/source/ff.c **** 			if (res == FR_OK) {
5086:DRIVER/FatFs/source/ff.c **** 				res = dir_clear(fs, dcl);		/* Clean up the new table */
5087:DRIVER/FatFs/source/ff.c **** 				if (res == FR_OK) {
5088:DRIVER/FatFs/source/ff.c **** 					if (!FF_FS_EXFAT || fs->fs_type != FS_EXFAT) {	/* Create dot entries (FAT only) */
5089:DRIVER/FatFs/source/ff.c **** 						memset(fs->win + DIR_Name, ' ', 11);	/* Create "." entry */
5090:DRIVER/FatFs/source/ff.c **** 						fs->win[DIR_Name] = '.';
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 195


5091:DRIVER/FatFs/source/ff.c **** 						fs->win[DIR_Attr] = AM_DIR;
5092:DRIVER/FatFs/source/ff.c **** 						st_dword(fs->win + DIR_ModTime, tm);
5093:DRIVER/FatFs/source/ff.c **** 						st_clust(fs, fs->win, dcl);
5094:DRIVER/FatFs/source/ff.c **** 						memcpy(fs->win + SZDIRE, fs->win, SZDIRE);	/* Create ".." entry */
5095:DRIVER/FatFs/source/ff.c **** 						fs->win[SZDIRE + 1] = '.'; pcl = dj.obj.sclust;
5096:DRIVER/FatFs/source/ff.c **** 						st_clust(fs, fs->win + SZDIRE, pcl);
5097:DRIVER/FatFs/source/ff.c **** 						fs->wflag = 1;
5098:DRIVER/FatFs/source/ff.c **** 					}
5099:DRIVER/FatFs/source/ff.c **** 					res = dir_register(&dj);	/* Register the object to the parent directoy */
5100:DRIVER/FatFs/source/ff.c **** 				}
5101:DRIVER/FatFs/source/ff.c **** 			}
5102:DRIVER/FatFs/source/ff.c **** 			if (res == FR_OK) {
5103:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
5104:DRIVER/FatFs/source/ff.c **** 				if (fs->fs_type == FS_EXFAT) {	/* Initialize directory entry block */
5105:DRIVER/FatFs/source/ff.c **** 					st_dword(fs->dirbuf + XDIR_ModTime, tm);	/* Created time */
5106:DRIVER/FatFs/source/ff.c **** 					st_dword(fs->dirbuf + XDIR_FstClus, dcl);	/* Table start cluster */
5107:DRIVER/FatFs/source/ff.c **** 					st_dword(fs->dirbuf + XDIR_FileSize, (DWORD)fs->csize * SS(fs));	/* Directory size needs to be
5108:DRIVER/FatFs/source/ff.c **** 					st_dword(fs->dirbuf + XDIR_ValidFileSize, (DWORD)fs->csize * SS(fs));
5109:DRIVER/FatFs/source/ff.c **** 					fs->dirbuf[XDIR_GenFlags] = 3;				/* Initialize the object flag */
5110:DRIVER/FatFs/source/ff.c **** 					fs->dirbuf[XDIR_Attr] = AM_DIR;				/* Attribute */
5111:DRIVER/FatFs/source/ff.c **** 					res = store_xdir(&dj);
5112:DRIVER/FatFs/source/ff.c **** 				} else
5113:DRIVER/FatFs/source/ff.c **** #endif
5114:DRIVER/FatFs/source/ff.c **** 				{
5115:DRIVER/FatFs/source/ff.c **** 					st_dword(dj.dir + DIR_ModTime, tm);	/* Created time */
5116:DRIVER/FatFs/source/ff.c **** 					st_clust(fs, dj.dir, dcl);			/* Table start cluster */
5117:DRIVER/FatFs/source/ff.c **** 					dj.dir[DIR_Attr] = AM_DIR;			/* Attribute */
5118:DRIVER/FatFs/source/ff.c **** 					fs->wflag = 1;
5119:DRIVER/FatFs/source/ff.c **** 				}
5120:DRIVER/FatFs/source/ff.c **** 				if (res == FR_OK) {
5121:DRIVER/FatFs/source/ff.c **** 					res = sync_fs(fs);
5122:DRIVER/FatFs/source/ff.c **** 				}
5123:DRIVER/FatFs/source/ff.c **** 			} else {
5124:DRIVER/FatFs/source/ff.c **** 				remove_chain(&sobj, dcl, 0);		/* Could not register, remove the allocated cluster */
5125:DRIVER/FatFs/source/ff.c **** 			}
5126:DRIVER/FatFs/source/ff.c **** 		}
5127:DRIVER/FatFs/source/ff.c **** 		FREE_NAMBUF();
5128:DRIVER/FatFs/source/ff.c **** 	}
5129:DRIVER/FatFs/source/ff.c **** 
5130:DRIVER/FatFs/source/ff.c **** 	LEAVE_FF(fs, res);
5131:DRIVER/FatFs/source/ff.c **** }
5132:DRIVER/FatFs/source/ff.c **** 
5133:DRIVER/FatFs/source/ff.c **** 
5134:DRIVER/FatFs/source/ff.c **** 
5135:DRIVER/FatFs/source/ff.c **** 
5136:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
5137:DRIVER/FatFs/source/ff.c **** /* Rename a File/Directory                                               */
5138:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
5139:DRIVER/FatFs/source/ff.c **** 
5140:DRIVER/FatFs/source/ff.c **** FRESULT f_rename (
5141:DRIVER/FatFs/source/ff.c **** 	const TCHAR* path_old,	/* Pointer to the object name to be renamed */
5142:DRIVER/FatFs/source/ff.c **** 	const TCHAR* path_new	/* Pointer to the new name */
5143:DRIVER/FatFs/source/ff.c **** )
5144:DRIVER/FatFs/source/ff.c **** {
5145:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
5146:DRIVER/FatFs/source/ff.c **** 	FATFS *fs;
5147:DRIVER/FatFs/source/ff.c **** 	DIR djo, djn;
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 196


5148:DRIVER/FatFs/source/ff.c **** 	BYTE buf[FF_FS_EXFAT ? SZDIRE * 2 : SZDIRE], *dir;
5149:DRIVER/FatFs/source/ff.c **** 	LBA_t sect;
5150:DRIVER/FatFs/source/ff.c **** 	DEF_NAMBUF
5151:DRIVER/FatFs/source/ff.c **** 
5152:DRIVER/FatFs/source/ff.c **** 
5153:DRIVER/FatFs/source/ff.c **** 	get_ldnumber(&path_new);						/* Snip the drive number of new name off */
5154:DRIVER/FatFs/source/ff.c **** 	res = mount_volume(&path_old, &fs, FA_WRITE);	/* Get logical drive of the old object */
5155:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
5156:DRIVER/FatFs/source/ff.c **** 		djo.obj.fs = fs;
5157:DRIVER/FatFs/source/ff.c **** 		INIT_NAMBUF(fs);
5158:DRIVER/FatFs/source/ff.c **** 		res = follow_path(&djo, path_old);			/* Check old object */
5159:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK && (djo.fn[NSFLAG] & (NS_DOT | NS_NONAME))) res = FR_INVALID_NAME;	/* Check vali
5160:DRIVER/FatFs/source/ff.c **** #if FF_FS_LOCK
5161:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK) {
5162:DRIVER/FatFs/source/ff.c **** 			res = chk_share(&djo, 2);
5163:DRIVER/FatFs/source/ff.c **** 		}
5164:DRIVER/FatFs/source/ff.c **** #endif
5165:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK) {					/* Object to be renamed is found */
5166:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
5167:DRIVER/FatFs/source/ff.c **** 			if (fs->fs_type == FS_EXFAT) {	/* At exFAT volume */
5168:DRIVER/FatFs/source/ff.c **** 				BYTE nf, nn;
5169:DRIVER/FatFs/source/ff.c **** 				WORD nh;
5170:DRIVER/FatFs/source/ff.c **** 
5171:DRIVER/FatFs/source/ff.c **** 				memcpy(buf, fs->dirbuf, SZDIRE * 2);	/* Save 85+C0 entry of old object */
5172:DRIVER/FatFs/source/ff.c **** 				memcpy(&djn, &djo, sizeof djo);
5173:DRIVER/FatFs/source/ff.c **** 				res = follow_path(&djn, path_new);		/* Make sure if new object name is not in use */
5174:DRIVER/FatFs/source/ff.c **** 				if (res == FR_OK) {						/* Is new name already in use by any other object? */
5175:DRIVER/FatFs/source/ff.c **** 					res = (djn.obj.sclust == djo.obj.sclust && djn.dptr == djo.dptr) ? FR_NO_FILE : FR_EXIST;
5176:DRIVER/FatFs/source/ff.c **** 				}
5177:DRIVER/FatFs/source/ff.c **** 				if (res == FR_NO_FILE) { 				/* It is a valid path and no name collision */
5178:DRIVER/FatFs/source/ff.c **** 					res = dir_register(&djn);			/* Register the new entry */
5179:DRIVER/FatFs/source/ff.c **** 					if (res == FR_OK) {
5180:DRIVER/FatFs/source/ff.c **** 						nf = fs->dirbuf[XDIR_NumSec]; nn = fs->dirbuf[XDIR_NumName];
5181:DRIVER/FatFs/source/ff.c **** 						nh = ld_word(fs->dirbuf + XDIR_NameHash);
5182:DRIVER/FatFs/source/ff.c **** 						memcpy(fs->dirbuf, buf, SZDIRE * 2);	/* Restore 85+C0 entry */
5183:DRIVER/FatFs/source/ff.c **** 						fs->dirbuf[XDIR_NumSec] = nf; fs->dirbuf[XDIR_NumName] = nn;
5184:DRIVER/FatFs/source/ff.c **** 						st_word(fs->dirbuf + XDIR_NameHash, nh);
5185:DRIVER/FatFs/source/ff.c **** 						if (!(fs->dirbuf[XDIR_Attr] & AM_DIR)) fs->dirbuf[XDIR_Attr] |= AM_ARC;	/* Set archive attrib
5186:DRIVER/FatFs/source/ff.c **** /* Start of critical section where an interruption can cause a cross-link */
5187:DRIVER/FatFs/source/ff.c **** 						res = store_xdir(&djn);
5188:DRIVER/FatFs/source/ff.c **** 					}
5189:DRIVER/FatFs/source/ff.c **** 				}
5190:DRIVER/FatFs/source/ff.c **** 			} else
5191:DRIVER/FatFs/source/ff.c **** #endif
5192:DRIVER/FatFs/source/ff.c **** 			{	/* At FAT/FAT32 volume */
5193:DRIVER/FatFs/source/ff.c **** 				memcpy(buf, djo.dir, SZDIRE);			/* Save directory entry of the object */
5194:DRIVER/FatFs/source/ff.c **** 				memcpy(&djn, &djo, sizeof (DIR));		/* Duplicate the directory object */
5195:DRIVER/FatFs/source/ff.c **** 				res = follow_path(&djn, path_new);		/* Make sure if new object name is not in use */
5196:DRIVER/FatFs/source/ff.c **** 				if (res == FR_OK) {						/* Is new name already in use by any other object? */
5197:DRIVER/FatFs/source/ff.c **** 					res = (djn.obj.sclust == djo.obj.sclust && djn.dptr == djo.dptr) ? FR_NO_FILE : FR_EXIST;
5198:DRIVER/FatFs/source/ff.c **** 				}
5199:DRIVER/FatFs/source/ff.c **** 				if (res == FR_NO_FILE) { 				/* It is a valid path and no name collision */
5200:DRIVER/FatFs/source/ff.c **** 					res = dir_register(&djn);			/* Register the new entry */
5201:DRIVER/FatFs/source/ff.c **** 					if (res == FR_OK) {
5202:DRIVER/FatFs/source/ff.c **** 						dir = djn.dir;					/* Copy directory entry of the object except name */
5203:DRIVER/FatFs/source/ff.c **** 						memcpy(dir + 13, buf + 13, SZDIRE - 13);
5204:DRIVER/FatFs/source/ff.c **** 						dir[DIR_Attr] = buf[DIR_Attr];
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 197


5205:DRIVER/FatFs/source/ff.c **** 						if (!(dir[DIR_Attr] & AM_DIR)) dir[DIR_Attr] |= AM_ARC;	/* Set archive attribute if it is a f
5206:DRIVER/FatFs/source/ff.c **** 						fs->wflag = 1;
5207:DRIVER/FatFs/source/ff.c **** 						if ((dir[DIR_Attr] & AM_DIR) && djo.obj.sclust != djn.obj.sclust) {	/* Update .. entry in the
5208:DRIVER/FatFs/source/ff.c **** 							sect = clst2sect(fs, ld_clust(fs, dir));
5209:DRIVER/FatFs/source/ff.c **** 							if (sect == 0) {
5210:DRIVER/FatFs/source/ff.c **** 								res = FR_INT_ERR;
5211:DRIVER/FatFs/source/ff.c **** 							} else {
5212:DRIVER/FatFs/source/ff.c **** /* Start of critical section where an interruption can cause a cross-link */
5213:DRIVER/FatFs/source/ff.c **** 								res = move_window(fs, sect);
5214:DRIVER/FatFs/source/ff.c **** 								dir = fs->win + SZDIRE * 1;	/* Ptr to .. entry */
5215:DRIVER/FatFs/source/ff.c **** 								if (res == FR_OK && dir[1] == '.') {
5216:DRIVER/FatFs/source/ff.c **** 									st_clust(fs, dir, djn.obj.sclust);
5217:DRIVER/FatFs/source/ff.c **** 									fs->wflag = 1;
5218:DRIVER/FatFs/source/ff.c **** 								}
5219:DRIVER/FatFs/source/ff.c **** 							}
5220:DRIVER/FatFs/source/ff.c **** 						}
5221:DRIVER/FatFs/source/ff.c **** 					}
5222:DRIVER/FatFs/source/ff.c **** 				}
5223:DRIVER/FatFs/source/ff.c **** 			}
5224:DRIVER/FatFs/source/ff.c **** 			if (res == FR_OK) {
5225:DRIVER/FatFs/source/ff.c **** 				res = dir_remove(&djo);		/* Remove old entry */
5226:DRIVER/FatFs/source/ff.c **** 				if (res == FR_OK) {
5227:DRIVER/FatFs/source/ff.c **** 					res = sync_fs(fs);
5228:DRIVER/FatFs/source/ff.c **** 				}
5229:DRIVER/FatFs/source/ff.c **** 			}
5230:DRIVER/FatFs/source/ff.c **** /* End of the critical section */
5231:DRIVER/FatFs/source/ff.c **** 		}
5232:DRIVER/FatFs/source/ff.c **** 		FREE_NAMBUF();
5233:DRIVER/FatFs/source/ff.c **** 	}
5234:DRIVER/FatFs/source/ff.c **** 
5235:DRIVER/FatFs/source/ff.c **** 	LEAVE_FF(fs, res);
5236:DRIVER/FatFs/source/ff.c **** }
5237:DRIVER/FatFs/source/ff.c **** 
5238:DRIVER/FatFs/source/ff.c **** #endif /* !FF_FS_READONLY */
5239:DRIVER/FatFs/source/ff.c **** #endif /* FF_FS_MINIMIZE == 0 */
5240:DRIVER/FatFs/source/ff.c **** #endif /* FF_FS_MINIMIZE <= 1 */
5241:DRIVER/FatFs/source/ff.c **** #endif /* FF_FS_MINIMIZE <= 2 */
5242:DRIVER/FatFs/source/ff.c **** 
5243:DRIVER/FatFs/source/ff.c **** 
5244:DRIVER/FatFs/source/ff.c **** 
5245:DRIVER/FatFs/source/ff.c **** #if FF_USE_CHMOD && !FF_FS_READONLY
5246:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
5247:DRIVER/FatFs/source/ff.c **** /* Change Attribute                                                      */
5248:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
5249:DRIVER/FatFs/source/ff.c **** 
5250:DRIVER/FatFs/source/ff.c **** FRESULT f_chmod (
5251:DRIVER/FatFs/source/ff.c **** 	const TCHAR* path,	/* Pointer to the file path */
5252:DRIVER/FatFs/source/ff.c **** 	BYTE attr,			/* Attribute bits */
5253:DRIVER/FatFs/source/ff.c **** 	BYTE mask			/* Attribute mask to change */
5254:DRIVER/FatFs/source/ff.c **** )
5255:DRIVER/FatFs/source/ff.c **** {
5256:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
5257:DRIVER/FatFs/source/ff.c **** 	FATFS *fs;
5258:DRIVER/FatFs/source/ff.c **** 	DIR dj;
5259:DRIVER/FatFs/source/ff.c **** 	DEF_NAMBUF
5260:DRIVER/FatFs/source/ff.c **** 
5261:DRIVER/FatFs/source/ff.c **** 
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 198


5262:DRIVER/FatFs/source/ff.c **** 	res = mount_volume(&path, &fs, FA_WRITE);	/* Get logical drive */
5263:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
5264:DRIVER/FatFs/source/ff.c **** 		dj.obj.fs = fs;
5265:DRIVER/FatFs/source/ff.c **** 		INIT_NAMBUF(fs);
5266:DRIVER/FatFs/source/ff.c **** 		res = follow_path(&dj, path);	/* Follow the file path */
5267:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK && (dj.fn[NSFLAG] & (NS_DOT | NS_NONAME))) res = FR_INVALID_NAME;	/* Check objec
5268:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK) {
5269:DRIVER/FatFs/source/ff.c **** 			mask &= AM_RDO|AM_HID|AM_SYS|AM_ARC;	/* Valid attribute mask */
5270:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
5271:DRIVER/FatFs/source/ff.c **** 			if (fs->fs_type == FS_EXFAT) {
5272:DRIVER/FatFs/source/ff.c **** 				fs->dirbuf[XDIR_Attr] = (attr & mask) | (fs->dirbuf[XDIR_Attr] & (BYTE)~mask);	/* Apply attribu
5273:DRIVER/FatFs/source/ff.c **** 				res = store_xdir(&dj);
5274:DRIVER/FatFs/source/ff.c **** 			} else
5275:DRIVER/FatFs/source/ff.c **** #endif
5276:DRIVER/FatFs/source/ff.c **** 			{
5277:DRIVER/FatFs/source/ff.c **** 				dj.dir[DIR_Attr] = (attr & mask) | (dj.dir[DIR_Attr] & (BYTE)~mask);	/* Apply attribute change 
5278:DRIVER/FatFs/source/ff.c **** 				fs->wflag = 1;
5279:DRIVER/FatFs/source/ff.c **** 			}
5280:DRIVER/FatFs/source/ff.c **** 			if (res == FR_OK) {
5281:DRIVER/FatFs/source/ff.c **** 				res = sync_fs(fs);
5282:DRIVER/FatFs/source/ff.c **** 			}
5283:DRIVER/FatFs/source/ff.c **** 		}
5284:DRIVER/FatFs/source/ff.c **** 		FREE_NAMBUF();
5285:DRIVER/FatFs/source/ff.c **** 	}
5286:DRIVER/FatFs/source/ff.c **** 
5287:DRIVER/FatFs/source/ff.c **** 	LEAVE_FF(fs, res);
5288:DRIVER/FatFs/source/ff.c **** }
5289:DRIVER/FatFs/source/ff.c **** 
5290:DRIVER/FatFs/source/ff.c **** 
5291:DRIVER/FatFs/source/ff.c **** 
5292:DRIVER/FatFs/source/ff.c **** 
5293:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
5294:DRIVER/FatFs/source/ff.c **** /* Change Timestamp                                                      */
5295:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
5296:DRIVER/FatFs/source/ff.c **** 
5297:DRIVER/FatFs/source/ff.c **** FRESULT f_utime (
5298:DRIVER/FatFs/source/ff.c **** 	const TCHAR* path,	/* Pointer to the file/directory name */
5299:DRIVER/FatFs/source/ff.c **** 	const FILINFO* fno	/* Pointer to the timestamp to be set */
5300:DRIVER/FatFs/source/ff.c **** )
5301:DRIVER/FatFs/source/ff.c **** {
5302:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
5303:DRIVER/FatFs/source/ff.c **** 	FATFS *fs;
5304:DRIVER/FatFs/source/ff.c **** 	DIR dj;
5305:DRIVER/FatFs/source/ff.c **** 	DEF_NAMBUF
5306:DRIVER/FatFs/source/ff.c **** 
5307:DRIVER/FatFs/source/ff.c **** 
5308:DRIVER/FatFs/source/ff.c **** 	res = mount_volume(&path, &fs, FA_WRITE);	/* Get logical drive */
5309:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
5310:DRIVER/FatFs/source/ff.c **** 		dj.obj.fs = fs;
5311:DRIVER/FatFs/source/ff.c **** 		INIT_NAMBUF(fs);
5312:DRIVER/FatFs/source/ff.c **** 		res = follow_path(&dj, path);	/* Follow the file path */
5313:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK && (dj.fn[NSFLAG] & (NS_DOT | NS_NONAME))) res = FR_INVALID_NAME;	/* Check objec
5314:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK) {
5315:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
5316:DRIVER/FatFs/source/ff.c **** 			if (fs->fs_type == FS_EXFAT) {
5317:DRIVER/FatFs/source/ff.c **** 				st_dword(fs->dirbuf + XDIR_ModTime, (DWORD)fno->fdate << 16 | fno->ftime);
5318:DRIVER/FatFs/source/ff.c **** 				res = store_xdir(&dj);
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 199


5319:DRIVER/FatFs/source/ff.c **** 			} else
5320:DRIVER/FatFs/source/ff.c **** #endif
5321:DRIVER/FatFs/source/ff.c **** 			{
5322:DRIVER/FatFs/source/ff.c **** 				st_dword(dj.dir + DIR_ModTime, (DWORD)fno->fdate << 16 | fno->ftime);
5323:DRIVER/FatFs/source/ff.c **** 				fs->wflag = 1;
5324:DRIVER/FatFs/source/ff.c **** 			}
5325:DRIVER/FatFs/source/ff.c **** 			if (res == FR_OK) {
5326:DRIVER/FatFs/source/ff.c **** 				res = sync_fs(fs);
5327:DRIVER/FatFs/source/ff.c **** 			}
5328:DRIVER/FatFs/source/ff.c **** 		}
5329:DRIVER/FatFs/source/ff.c **** 		FREE_NAMBUF();
5330:DRIVER/FatFs/source/ff.c **** 	}
5331:DRIVER/FatFs/source/ff.c **** 
5332:DRIVER/FatFs/source/ff.c **** 	LEAVE_FF(fs, res);
5333:DRIVER/FatFs/source/ff.c **** }
5334:DRIVER/FatFs/source/ff.c **** 
5335:DRIVER/FatFs/source/ff.c **** #endif	/* FF_USE_CHMOD && !FF_FS_READONLY */
5336:DRIVER/FatFs/source/ff.c **** 
5337:DRIVER/FatFs/source/ff.c **** 
5338:DRIVER/FatFs/source/ff.c **** 
5339:DRIVER/FatFs/source/ff.c **** #if FF_USE_LABEL
5340:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
5341:DRIVER/FatFs/source/ff.c **** /* Get Volume Label                                                      */
5342:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
5343:DRIVER/FatFs/source/ff.c **** 
5344:DRIVER/FatFs/source/ff.c **** FRESULT f_getlabel (
5345:DRIVER/FatFs/source/ff.c **** 	const TCHAR* path,	/* Logical drive number */
5346:DRIVER/FatFs/source/ff.c **** 	TCHAR* label,		/* Buffer to store the volume label */
5347:DRIVER/FatFs/source/ff.c **** 	DWORD* vsn			/* Variable to store the volume serial number */
5348:DRIVER/FatFs/source/ff.c **** )
5349:DRIVER/FatFs/source/ff.c **** {
5350:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
5351:DRIVER/FatFs/source/ff.c **** 	FATFS *fs;
5352:DRIVER/FatFs/source/ff.c **** 	DIR dj;
5353:DRIVER/FatFs/source/ff.c **** 	UINT si, di;
5354:DRIVER/FatFs/source/ff.c **** 	WCHAR wc;
5355:DRIVER/FatFs/source/ff.c **** 
5356:DRIVER/FatFs/source/ff.c **** 	/* Get logical drive */
5357:DRIVER/FatFs/source/ff.c **** 	res = mount_volume(&path, &fs, 0);
5358:DRIVER/FatFs/source/ff.c **** 
5359:DRIVER/FatFs/source/ff.c **** 	/* Get volume label */
5360:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK && label) {
5361:DRIVER/FatFs/source/ff.c **** 		dj.obj.fs = fs; dj.obj.sclust = 0;	/* Open root directory */
5362:DRIVER/FatFs/source/ff.c **** 		res = dir_sdi(&dj, 0);
5363:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK) {
5364:DRIVER/FatFs/source/ff.c **** 		 	res = DIR_READ_LABEL(&dj);		/* Find a volume label entry */
5365:DRIVER/FatFs/source/ff.c **** 		 	if (res == FR_OK) {
5366:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
5367:DRIVER/FatFs/source/ff.c **** 				if (fs->fs_type == FS_EXFAT) {
5368:DRIVER/FatFs/source/ff.c **** 					WCHAR hs;
5369:DRIVER/FatFs/source/ff.c **** 					UINT nw;
5370:DRIVER/FatFs/source/ff.c **** 
5371:DRIVER/FatFs/source/ff.c **** 					for (si = di = hs = 0; si < dj.dir[XDIR_NumLabel]; si++) {	/* Extract volume label from 83 ent
5372:DRIVER/FatFs/source/ff.c **** 						wc = ld_word(dj.dir + XDIR_Label + si * 2);
5373:DRIVER/FatFs/source/ff.c **** 						if (hs == 0 && IsSurrogate(wc)) {	/* Is the code a surrogate? */
5374:DRIVER/FatFs/source/ff.c **** 							hs = wc; continue;
5375:DRIVER/FatFs/source/ff.c **** 						}
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 200


5376:DRIVER/FatFs/source/ff.c **** 						nw = put_utf((DWORD)hs << 16 | wc, &label[di], 4);	/* Store it in API encoding */
5377:DRIVER/FatFs/source/ff.c **** 						if (nw == 0) {		/* Encode error? */
5378:DRIVER/FatFs/source/ff.c **** 							di = 0; break;
5379:DRIVER/FatFs/source/ff.c **** 						}
5380:DRIVER/FatFs/source/ff.c **** 						di += nw;
5381:DRIVER/FatFs/source/ff.c **** 						hs = 0;
5382:DRIVER/FatFs/source/ff.c **** 					}
5383:DRIVER/FatFs/source/ff.c **** 					if (hs != 0) di = 0;	/* Broken surrogate pair? */
5384:DRIVER/FatFs/source/ff.c **** 					label[di] = 0;
5385:DRIVER/FatFs/source/ff.c **** 				} else
5386:DRIVER/FatFs/source/ff.c **** #endif
5387:DRIVER/FatFs/source/ff.c **** 				{
5388:DRIVER/FatFs/source/ff.c **** 					si = di = 0;		/* Extract volume label from AM_VOL entry */
5389:DRIVER/FatFs/source/ff.c **** 					while (si < 11) {
5390:DRIVER/FatFs/source/ff.c **** 						wc = dj.dir[si++];
5391:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN && FF_LFN_UNICODE >= 1 	/* Unicode output */
5392:DRIVER/FatFs/source/ff.c **** 						if (dbc_1st((BYTE)wc) && si < 11) wc = wc << 8 | dj.dir[si++];	/* Is it a DBC? */
5393:DRIVER/FatFs/source/ff.c **** 						wc = ff_oem2uni(wc, CODEPAGE);		/* Convert it into Unicode */
5394:DRIVER/FatFs/source/ff.c **** 						if (wc == 0) {		/* Invalid char in current code page? */
5395:DRIVER/FatFs/source/ff.c **** 							di = 0; break;
5396:DRIVER/FatFs/source/ff.c **** 						}
5397:DRIVER/FatFs/source/ff.c **** 						di += put_utf(wc, &label[di], 4);	/* Store it in Unicode */
5398:DRIVER/FatFs/source/ff.c **** #else									/* ANSI/OEM output */
5399:DRIVER/FatFs/source/ff.c **** 						label[di++] = (TCHAR)wc;
5400:DRIVER/FatFs/source/ff.c **** #endif
5401:DRIVER/FatFs/source/ff.c **** 					}
5402:DRIVER/FatFs/source/ff.c **** 					do {				/* Truncate trailing spaces */
5403:DRIVER/FatFs/source/ff.c **** 						label[di] = 0;
5404:DRIVER/FatFs/source/ff.c **** 						if (di == 0) break;
5405:DRIVER/FatFs/source/ff.c **** 					} while (label[--di] == ' ');
5406:DRIVER/FatFs/source/ff.c **** 				}
5407:DRIVER/FatFs/source/ff.c **** 			}
5408:DRIVER/FatFs/source/ff.c **** 		}
5409:DRIVER/FatFs/source/ff.c **** 		if (res == FR_NO_FILE) {	/* No label entry and return nul string */
5410:DRIVER/FatFs/source/ff.c **** 			label[0] = 0;
5411:DRIVER/FatFs/source/ff.c **** 			res = FR_OK;
5412:DRIVER/FatFs/source/ff.c **** 		}
5413:DRIVER/FatFs/source/ff.c **** 	}
5414:DRIVER/FatFs/source/ff.c **** 
5415:DRIVER/FatFs/source/ff.c **** 	/* Get volume serial number */
5416:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK && vsn) {
5417:DRIVER/FatFs/source/ff.c **** 		res = move_window(fs, fs->volbase);
5418:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK) {
5419:DRIVER/FatFs/source/ff.c **** 			switch (fs->fs_type) {
5420:DRIVER/FatFs/source/ff.c **** 			case FS_EXFAT:
5421:DRIVER/FatFs/source/ff.c **** 				di = BPB_VolIDEx;
5422:DRIVER/FatFs/source/ff.c **** 				break;
5423:DRIVER/FatFs/source/ff.c **** 
5424:DRIVER/FatFs/source/ff.c **** 			case FS_FAT32:
5425:DRIVER/FatFs/source/ff.c **** 				di = BS_VolID32;
5426:DRIVER/FatFs/source/ff.c **** 				break;
5427:DRIVER/FatFs/source/ff.c **** 
5428:DRIVER/FatFs/source/ff.c **** 			default:
5429:DRIVER/FatFs/source/ff.c **** 				di = BS_VolID;
5430:DRIVER/FatFs/source/ff.c **** 			}
5431:DRIVER/FatFs/source/ff.c **** 			*vsn = ld_dword(fs->win + di);
5432:DRIVER/FatFs/source/ff.c **** 		}
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 201


5433:DRIVER/FatFs/source/ff.c **** 	}
5434:DRIVER/FatFs/source/ff.c **** 
5435:DRIVER/FatFs/source/ff.c **** 	LEAVE_FF(fs, res);
5436:DRIVER/FatFs/source/ff.c **** }
5437:DRIVER/FatFs/source/ff.c **** 
5438:DRIVER/FatFs/source/ff.c **** 
5439:DRIVER/FatFs/source/ff.c **** 
5440:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY
5441:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
5442:DRIVER/FatFs/source/ff.c **** /* Set Volume Label                                                      */
5443:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
5444:DRIVER/FatFs/source/ff.c **** 
5445:DRIVER/FatFs/source/ff.c **** FRESULT f_setlabel (
5446:DRIVER/FatFs/source/ff.c **** 	const TCHAR* label	/* Volume label to set with heading logical drive number */
5447:DRIVER/FatFs/source/ff.c **** )
5448:DRIVER/FatFs/source/ff.c **** {
5449:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
5450:DRIVER/FatFs/source/ff.c **** 	FATFS *fs;
5451:DRIVER/FatFs/source/ff.c **** 	DIR dj;
5452:DRIVER/FatFs/source/ff.c **** 	BYTE dirvn[22];
5453:DRIVER/FatFs/source/ff.c **** 	UINT di;
5454:DRIVER/FatFs/source/ff.c **** 	WCHAR wc;
5455:DRIVER/FatFs/source/ff.c **** 	static const char badchr[18] = "+.,;=[]" "/*:<>|\\\"\?\x7F";	/* [0..16] for FAT, [7..16] for exFAT
5456:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN
5457:DRIVER/FatFs/source/ff.c **** 	DWORD dc;
5458:DRIVER/FatFs/source/ff.c **** #endif
5459:DRIVER/FatFs/source/ff.c **** 
5460:DRIVER/FatFs/source/ff.c **** 	/* Get logical drive */
5461:DRIVER/FatFs/source/ff.c **** 	res = mount_volume(&label, &fs, FA_WRITE);
5462:DRIVER/FatFs/source/ff.c **** 	if (res != FR_OK) LEAVE_FF(fs, res);
5463:DRIVER/FatFs/source/ff.c **** 
5464:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
5465:DRIVER/FatFs/source/ff.c **** 	if (fs->fs_type == FS_EXFAT) {	/* On the exFAT volume */
5466:DRIVER/FatFs/source/ff.c **** 		memset(dirvn, 0, 22);
5467:DRIVER/FatFs/source/ff.c **** 		di = 0;
5468:DRIVER/FatFs/source/ff.c **** 		while ((UINT)*label >= ' ') {	/* Create volume label */
5469:DRIVER/FatFs/source/ff.c **** 			dc = tchar2uni(&label);	/* Get a Unicode character */
5470:DRIVER/FatFs/source/ff.c **** 			if (dc >= 0x10000) {
5471:DRIVER/FatFs/source/ff.c **** 				if (dc == 0xFFFFFFFF || di >= 10) {	/* Wrong surrogate or buffer overflow */
5472:DRIVER/FatFs/source/ff.c **** 					dc = 0;
5473:DRIVER/FatFs/source/ff.c **** 				} else {
5474:DRIVER/FatFs/source/ff.c **** 					st_word(dirvn + di * 2, (WCHAR)(dc >> 16)); di++;
5475:DRIVER/FatFs/source/ff.c **** 				}
5476:DRIVER/FatFs/source/ff.c **** 			}
5477:DRIVER/FatFs/source/ff.c **** 			if (dc == 0 || strchr(&badchr[7], (int)dc) || di >= 11) {	/* Check validity of the volume label 
5478:DRIVER/FatFs/source/ff.c **** 				LEAVE_FF(fs, FR_INVALID_NAME);
5479:DRIVER/FatFs/source/ff.c **** 			}
5480:DRIVER/FatFs/source/ff.c **** 			st_word(dirvn + di * 2, (WCHAR)dc); di++;
5481:DRIVER/FatFs/source/ff.c **** 		}
5482:DRIVER/FatFs/source/ff.c **** 	} else
5483:DRIVER/FatFs/source/ff.c **** #endif
5484:DRIVER/FatFs/source/ff.c **** 	{	/* On the FAT/FAT32 volume */
5485:DRIVER/FatFs/source/ff.c **** 		memset(dirvn, ' ', 11);
5486:DRIVER/FatFs/source/ff.c **** 		di = 0;
5487:DRIVER/FatFs/source/ff.c **** 		while ((UINT)*label >= ' ') {	/* Create volume label */
5488:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN
5489:DRIVER/FatFs/source/ff.c **** 			dc = tchar2uni(&label);
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 202


5490:DRIVER/FatFs/source/ff.c **** 			wc = (dc < 0x10000) ? ff_uni2oem(ff_wtoupper(dc), CODEPAGE) : 0;
5491:DRIVER/FatFs/source/ff.c **** #else									/* ANSI/OEM input */
5492:DRIVER/FatFs/source/ff.c **** 			wc = (BYTE)*label++;
5493:DRIVER/FatFs/source/ff.c **** 			if (dbc_1st((BYTE)wc)) wc = dbc_2nd((BYTE)*label) ? wc << 8 | (BYTE)*label++ : 0;
5494:DRIVER/FatFs/source/ff.c **** 			if (IsLower(wc)) wc -= 0x20;		/* To upper ASCII characters */
5495:DRIVER/FatFs/source/ff.c **** #if FF_CODE_PAGE == 0
5496:DRIVER/FatFs/source/ff.c **** 			if (ExCvt && wc >= 0x80) wc = ExCvt[wc - 0x80];	/* To upper extended characters (SBCS cfg) */
5497:DRIVER/FatFs/source/ff.c **** #elif FF_CODE_PAGE < 900
5498:DRIVER/FatFs/source/ff.c **** 			if (wc >= 0x80) wc = ExCvt[wc - 0x80];	/* To upper extended characters (SBCS cfg) */
5499:DRIVER/FatFs/source/ff.c **** #endif
5500:DRIVER/FatFs/source/ff.c **** #endif
5501:DRIVER/FatFs/source/ff.c **** 			if (wc == 0 || strchr(&badchr[0], (int)wc) || di >= (UINT)((wc >= 0x100) ? 10 : 11)) {	/* Reject
5502:DRIVER/FatFs/source/ff.c **** 				LEAVE_FF(fs, FR_INVALID_NAME);
5503:DRIVER/FatFs/source/ff.c **** 			}
5504:DRIVER/FatFs/source/ff.c **** 			if (wc >= 0x100) dirvn[di++] = (BYTE)(wc >> 8);
5505:DRIVER/FatFs/source/ff.c **** 			dirvn[di++] = (BYTE)wc;
5506:DRIVER/FatFs/source/ff.c **** 		}
5507:DRIVER/FatFs/source/ff.c **** 		if (dirvn[0] == DDEM) LEAVE_FF(fs, FR_INVALID_NAME);	/* Reject illegal name (heading DDEM) */
5508:DRIVER/FatFs/source/ff.c **** 		while (di && dirvn[di - 1] == ' ') di--;				/* Snip trailing spaces */
5509:DRIVER/FatFs/source/ff.c **** 	}
5510:DRIVER/FatFs/source/ff.c **** 
5511:DRIVER/FatFs/source/ff.c **** 	/* Set volume label */
5512:DRIVER/FatFs/source/ff.c **** 	dj.obj.fs = fs; dj.obj.sclust = 0;	/* Open root directory */
5513:DRIVER/FatFs/source/ff.c **** 	res = dir_sdi(&dj, 0);
5514:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
5515:DRIVER/FatFs/source/ff.c **** 		res = DIR_READ_LABEL(&dj);	/* Get volume label entry */
5516:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK) {
5517:DRIVER/FatFs/source/ff.c **** 			if (FF_FS_EXFAT && fs->fs_type == FS_EXFAT) {
5518:DRIVER/FatFs/source/ff.c **** 				dj.dir[XDIR_NumLabel] = (BYTE)di;	/* Change the volume label */
5519:DRIVER/FatFs/source/ff.c **** 				memcpy(dj.dir + XDIR_Label, dirvn, 22);
5520:DRIVER/FatFs/source/ff.c **** 			} else {
5521:DRIVER/FatFs/source/ff.c **** 				if (di != 0) {
5522:DRIVER/FatFs/source/ff.c **** 					memcpy(dj.dir, dirvn, 11);	/* Change the volume label */
5523:DRIVER/FatFs/source/ff.c **** 				} else {
5524:DRIVER/FatFs/source/ff.c **** 					dj.dir[DIR_Name] = DDEM;	/* Remove the volume label */
5525:DRIVER/FatFs/source/ff.c **** 				}
5526:DRIVER/FatFs/source/ff.c **** 			}
5527:DRIVER/FatFs/source/ff.c **** 			fs->wflag = 1;
5528:DRIVER/FatFs/source/ff.c **** 			res = sync_fs(fs);
5529:DRIVER/FatFs/source/ff.c **** 		} else {			/* No volume label entry or an error */
5530:DRIVER/FatFs/source/ff.c **** 			if (res == FR_NO_FILE) {
5531:DRIVER/FatFs/source/ff.c **** 				res = FR_OK;
5532:DRIVER/FatFs/source/ff.c **** 				if (di != 0) {	/* Create a volume label entry */
5533:DRIVER/FatFs/source/ff.c **** 					res = dir_alloc(&dj, 1);	/* Allocate an entry */
5534:DRIVER/FatFs/source/ff.c **** 					if (res == FR_OK) {
5535:DRIVER/FatFs/source/ff.c **** 						memset(dj.dir, 0, SZDIRE);	/* Clean the entry */
5536:DRIVER/FatFs/source/ff.c **** 						if (FF_FS_EXFAT && fs->fs_type == FS_EXFAT) {
5537:DRIVER/FatFs/source/ff.c **** 							dj.dir[XDIR_Type] = ET_VLABEL;	/* Create volume label entry */
5538:DRIVER/FatFs/source/ff.c **** 							dj.dir[XDIR_NumLabel] = (BYTE)di;
5539:DRIVER/FatFs/source/ff.c **** 							memcpy(dj.dir + XDIR_Label, dirvn, 22);
5540:DRIVER/FatFs/source/ff.c **** 						} else {
5541:DRIVER/FatFs/source/ff.c **** 							dj.dir[DIR_Attr] = AM_VOL;		/* Create volume label entry */
5542:DRIVER/FatFs/source/ff.c **** 							memcpy(dj.dir, dirvn, 11);
5543:DRIVER/FatFs/source/ff.c **** 						}
5544:DRIVER/FatFs/source/ff.c **** 						fs->wflag = 1;
5545:DRIVER/FatFs/source/ff.c **** 						res = sync_fs(fs);
5546:DRIVER/FatFs/source/ff.c **** 					}
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 203


5547:DRIVER/FatFs/source/ff.c **** 				}
5548:DRIVER/FatFs/source/ff.c **** 			}
5549:DRIVER/FatFs/source/ff.c **** 		}
5550:DRIVER/FatFs/source/ff.c **** 	}
5551:DRIVER/FatFs/source/ff.c **** 
5552:DRIVER/FatFs/source/ff.c **** 	LEAVE_FF(fs, res);
5553:DRIVER/FatFs/source/ff.c **** }
5554:DRIVER/FatFs/source/ff.c **** 
5555:DRIVER/FatFs/source/ff.c **** #endif /* !FF_FS_READONLY */
5556:DRIVER/FatFs/source/ff.c **** #endif /* FF_USE_LABEL */
5557:DRIVER/FatFs/source/ff.c **** 
5558:DRIVER/FatFs/source/ff.c **** 
5559:DRIVER/FatFs/source/ff.c **** 
5560:DRIVER/FatFs/source/ff.c **** #if FF_USE_EXPAND && !FF_FS_READONLY
5561:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
5562:DRIVER/FatFs/source/ff.c **** /* Allocate a Contiguous Blocks to the File                              */
5563:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
5564:DRIVER/FatFs/source/ff.c **** 
5565:DRIVER/FatFs/source/ff.c **** FRESULT f_expand (
5566:DRIVER/FatFs/source/ff.c **** 	FIL* fp,		/* Pointer to the file object */
5567:DRIVER/FatFs/source/ff.c **** 	FSIZE_t fsz,	/* File size to be expanded to */
5568:DRIVER/FatFs/source/ff.c **** 	BYTE opt		/* Operation mode 0:Find and prepare or 1:Find and allocate */
5569:DRIVER/FatFs/source/ff.c **** )
5570:DRIVER/FatFs/source/ff.c **** {
5571:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
5572:DRIVER/FatFs/source/ff.c **** 	FATFS *fs;
5573:DRIVER/FatFs/source/ff.c **** 	DWORD n, clst, stcl, scl, ncl, tcl, lclst;
5574:DRIVER/FatFs/source/ff.c **** 
5575:DRIVER/FatFs/source/ff.c **** 
5576:DRIVER/FatFs/source/ff.c **** 	res = validate(&fp->obj, &fs);		/* Check validity of the file object */
5577:DRIVER/FatFs/source/ff.c **** 	if (res != FR_OK || (res = (FRESULT)fp->err) != FR_OK) LEAVE_FF(fs, res);
5578:DRIVER/FatFs/source/ff.c **** 	if (fsz == 0 || fp->obj.objsize != 0 || !(fp->flag & FA_WRITE)) LEAVE_FF(fs, FR_DENIED);
5579:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
5580:DRIVER/FatFs/source/ff.c **** 	if (fs->fs_type != FS_EXFAT && fsz >= 0x100000000) LEAVE_FF(fs, FR_DENIED);	/* Check if in size li
5581:DRIVER/FatFs/source/ff.c **** #endif
5582:DRIVER/FatFs/source/ff.c **** 	n = (DWORD)fs->csize * SS(fs);	/* Cluster size */
5583:DRIVER/FatFs/source/ff.c **** 	tcl = (DWORD)(fsz / n) + ((fsz & (n - 1)) ? 1 : 0);	/* Number of clusters required */
5584:DRIVER/FatFs/source/ff.c **** 	stcl = fs->last_clst; lclst = 0;
5585:DRIVER/FatFs/source/ff.c **** 	if (stcl < 2 || stcl >= fs->n_fatent) stcl = 2;
5586:DRIVER/FatFs/source/ff.c **** 
5587:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
5588:DRIVER/FatFs/source/ff.c **** 	if (fs->fs_type == FS_EXFAT) {
5589:DRIVER/FatFs/source/ff.c **** 		scl = find_bitmap(fs, stcl, tcl);			/* Find a contiguous cluster block */
5590:DRIVER/FatFs/source/ff.c **** 		if (scl == 0) res = FR_DENIED;				/* No contiguous cluster block was found */
5591:DRIVER/FatFs/source/ff.c **** 		if (scl == 0xFFFFFFFF) res = FR_DISK_ERR;
5592:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK) {	/* A contiguous free area is found */
5593:DRIVER/FatFs/source/ff.c **** 			if (opt) {		/* Allocate it now */
5594:DRIVER/FatFs/source/ff.c **** 				res = change_bitmap(fs, scl, tcl, 1);	/* Mark the cluster block 'in use' */
5595:DRIVER/FatFs/source/ff.c **** 				lclst = scl + tcl - 1;
5596:DRIVER/FatFs/source/ff.c **** 			} else {		/* Set it as suggested point for next allocation */
5597:DRIVER/FatFs/source/ff.c **** 				lclst = scl - 1;
5598:DRIVER/FatFs/source/ff.c **** 			}
5599:DRIVER/FatFs/source/ff.c **** 		}
5600:DRIVER/FatFs/source/ff.c **** 	} else
5601:DRIVER/FatFs/source/ff.c **** #endif
5602:DRIVER/FatFs/source/ff.c **** 	{
5603:DRIVER/FatFs/source/ff.c **** 		scl = clst = stcl; ncl = 0;
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 204


5604:DRIVER/FatFs/source/ff.c **** 		for (;;) {	/* Find a contiguous cluster block */
5605:DRIVER/FatFs/source/ff.c **** 			n = get_fat(&fp->obj, clst);
5606:DRIVER/FatFs/source/ff.c **** 			if (++clst >= fs->n_fatent) clst = 2;
5607:DRIVER/FatFs/source/ff.c **** 			if (n == 1) {
5608:DRIVER/FatFs/source/ff.c **** 				res = FR_INT_ERR; break;
5609:DRIVER/FatFs/source/ff.c **** 			}
5610:DRIVER/FatFs/source/ff.c **** 			if (n == 0xFFFFFFFF) {
5611:DRIVER/FatFs/source/ff.c **** 				res = FR_DISK_ERR; break;
5612:DRIVER/FatFs/source/ff.c **** 			}
5613:DRIVER/FatFs/source/ff.c **** 			if (n == 0) {	/* Is it a free cluster? */
5614:DRIVER/FatFs/source/ff.c **** 				if (++ncl == tcl) break;	/* Break if a contiguous cluster block is found */
5615:DRIVER/FatFs/source/ff.c **** 			} else {
5616:DRIVER/FatFs/source/ff.c **** 				scl = clst; ncl = 0;		/* Not a free cluster */
5617:DRIVER/FatFs/source/ff.c **** 			}
5618:DRIVER/FatFs/source/ff.c **** 			if (clst == stcl) {		/* No contiguous cluster? */
5619:DRIVER/FatFs/source/ff.c **** 				res = FR_DENIED; break;
5620:DRIVER/FatFs/source/ff.c **** 			}
5621:DRIVER/FatFs/source/ff.c **** 		}
5622:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK) {	/* A contiguous free area is found */
5623:DRIVER/FatFs/source/ff.c **** 			if (opt) {		/* Allocate it now */
5624:DRIVER/FatFs/source/ff.c **** 				for (clst = scl, n = tcl; n; clst++, n--) {	/* Create a cluster chain on the FAT */
5625:DRIVER/FatFs/source/ff.c **** 					res = put_fat(fs, clst, (n == 1) ? 0xFFFFFFFF : clst + 1);
5626:DRIVER/FatFs/source/ff.c **** 					if (res != FR_OK) break;
5627:DRIVER/FatFs/source/ff.c **** 					lclst = clst;
5628:DRIVER/FatFs/source/ff.c **** 				}
5629:DRIVER/FatFs/source/ff.c **** 			} else {		/* Set it as suggested point for next allocation */
5630:DRIVER/FatFs/source/ff.c **** 				lclst = scl - 1;
5631:DRIVER/FatFs/source/ff.c **** 			}
5632:DRIVER/FatFs/source/ff.c **** 		}
5633:DRIVER/FatFs/source/ff.c **** 	}
5634:DRIVER/FatFs/source/ff.c **** 
5635:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
5636:DRIVER/FatFs/source/ff.c **** 		fs->last_clst = lclst;		/* Set suggested start cluster to start next */
5637:DRIVER/FatFs/source/ff.c **** 		if (opt) {	/* Is it allocated now? */
5638:DRIVER/FatFs/source/ff.c **** 			fp->obj.sclust = scl;		/* Update object allocation information */
5639:DRIVER/FatFs/source/ff.c **** 			fp->obj.objsize = fsz;
5640:DRIVER/FatFs/source/ff.c **** 			if (FF_FS_EXFAT) fp->obj.stat = 2;	/* Set status 'contiguous chain' */
5641:DRIVER/FatFs/source/ff.c **** 			fp->flag |= FA_MODIFIED;
5642:DRIVER/FatFs/source/ff.c **** 			if (fs->free_clst <= fs->n_fatent - 2) {	/* Update FSINFO */
5643:DRIVER/FatFs/source/ff.c **** 				fs->free_clst -= tcl;
5644:DRIVER/FatFs/source/ff.c **** 				fs->fsi_flag |= 1;
5645:DRIVER/FatFs/source/ff.c **** 			}
5646:DRIVER/FatFs/source/ff.c **** 		}
5647:DRIVER/FatFs/source/ff.c **** 	}
5648:DRIVER/FatFs/source/ff.c **** 
5649:DRIVER/FatFs/source/ff.c **** 	LEAVE_FF(fs, res);
5650:DRIVER/FatFs/source/ff.c **** }
5651:DRIVER/FatFs/source/ff.c **** 
5652:DRIVER/FatFs/source/ff.c **** #endif /* FF_USE_EXPAND && !FF_FS_READONLY */
5653:DRIVER/FatFs/source/ff.c **** 
5654:DRIVER/FatFs/source/ff.c **** 
5655:DRIVER/FatFs/source/ff.c **** 
5656:DRIVER/FatFs/source/ff.c **** #if FF_USE_FORWARD
5657:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
5658:DRIVER/FatFs/source/ff.c **** /* Forward Data to the Stream Directly                                   */
5659:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
5660:DRIVER/FatFs/source/ff.c **** 
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 205


5661:DRIVER/FatFs/source/ff.c **** FRESULT f_forward (
5662:DRIVER/FatFs/source/ff.c **** 	FIL* fp, 						/* Pointer to the file object */
5663:DRIVER/FatFs/source/ff.c **** 	UINT (*func)(const BYTE*,UINT),	/* Pointer to the streaming function */
5664:DRIVER/FatFs/source/ff.c **** 	UINT btf,						/* Number of bytes to forward */
5665:DRIVER/FatFs/source/ff.c **** 	UINT* bf						/* Pointer to number of bytes forwarded */
5666:DRIVER/FatFs/source/ff.c **** )
5667:DRIVER/FatFs/source/ff.c **** {
5668:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
5669:DRIVER/FatFs/source/ff.c **** 	FATFS *fs;
5670:DRIVER/FatFs/source/ff.c **** 	DWORD clst;
5671:DRIVER/FatFs/source/ff.c **** 	LBA_t sect;
5672:DRIVER/FatFs/source/ff.c **** 	FSIZE_t remain;
5673:DRIVER/FatFs/source/ff.c **** 	UINT rcnt, csect;
5674:DRIVER/FatFs/source/ff.c **** 	BYTE *dbuf;
5675:DRIVER/FatFs/source/ff.c **** 
5676:DRIVER/FatFs/source/ff.c **** 
5677:DRIVER/FatFs/source/ff.c **** 	*bf = 0;	/* Clear transfer byte counter */
5678:DRIVER/FatFs/source/ff.c **** 	res = validate(&fp->obj, &fs);		/* Check validity of the file object */
5679:DRIVER/FatFs/source/ff.c **** 	if (res != FR_OK || (res = (FRESULT)fp->err) != FR_OK) LEAVE_FF(fs, res);
5680:DRIVER/FatFs/source/ff.c **** 	if (!(fp->flag & FA_READ)) LEAVE_FF(fs, FR_DENIED);	/* Check access mode */
5681:DRIVER/FatFs/source/ff.c **** 
5682:DRIVER/FatFs/source/ff.c **** 	remain = fp->obj.objsize - fp->fptr;
5683:DRIVER/FatFs/source/ff.c **** 	if (btf > remain) btf = (UINT)remain;			/* Truncate btf by remaining bytes */
5684:DRIVER/FatFs/source/ff.c **** 
5685:DRIVER/FatFs/source/ff.c **** 	for ( ; btf > 0 && (*func)(0, 0); fp->fptr += rcnt, *bf += rcnt, btf -= rcnt) {	/* Repeat until al
5686:DRIVER/FatFs/source/ff.c **** 		csect = (UINT)(fp->fptr / SS(fs) & (fs->csize - 1));	/* Sector offset in the cluster */
5687:DRIVER/FatFs/source/ff.c **** 		if (fp->fptr % SS(fs) == 0) {				/* On the sector boundary? */
5688:DRIVER/FatFs/source/ff.c **** 			if (csect == 0) {						/* On the cluster boundary? */
5689:DRIVER/FatFs/source/ff.c **** 				clst = (fp->fptr == 0) ?			/* On the top of the file? */
5690:DRIVER/FatFs/source/ff.c **** 					fp->obj.sclust : get_fat(&fp->obj, fp->clust);
5691:DRIVER/FatFs/source/ff.c **** 				if (clst <= 1) ABORT(fs, FR_INT_ERR);
5692:DRIVER/FatFs/source/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
5693:DRIVER/FatFs/source/ff.c **** 				fp->clust = clst;					/* Update current cluster */
5694:DRIVER/FatFs/source/ff.c **** 			}
5695:DRIVER/FatFs/source/ff.c **** 		}
5696:DRIVER/FatFs/source/ff.c **** 		sect = clst2sect(fs, fp->clust);			/* Get current data sector */
5697:DRIVER/FatFs/source/ff.c **** 		if (sect == 0) ABORT(fs, FR_INT_ERR);
5698:DRIVER/FatFs/source/ff.c **** 		sect += csect;
5699:DRIVER/FatFs/source/ff.c **** #if FF_FS_TINY
5700:DRIVER/FatFs/source/ff.c **** 		if (move_window(fs, sect) != FR_OK) ABORT(fs, FR_DISK_ERR);	/* Move sector window to the file dat
5701:DRIVER/FatFs/source/ff.c **** 		dbuf = fs->win;
5702:DRIVER/FatFs/source/ff.c **** #else
5703:DRIVER/FatFs/source/ff.c **** 		if (fp->sect != sect) {		/* Fill sector cache with file data */
5704:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY
5705:DRIVER/FatFs/source/ff.c **** 			if (fp->flag & FA_DIRTY) {		/* Write-back dirty sector cache */
5706:DRIVER/FatFs/source/ff.c **** 				if (disk_write(fs->pdrv, fp->buf, fp->sect, 1) != RES_OK) ABORT(fs, FR_DISK_ERR);
5707:DRIVER/FatFs/source/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
5708:DRIVER/FatFs/source/ff.c **** 			}
5709:DRIVER/FatFs/source/ff.c **** #endif
5710:DRIVER/FatFs/source/ff.c **** 			if (disk_read(fs->pdrv, fp->buf, sect, 1) != RES_OK) ABORT(fs, FR_DISK_ERR);
5711:DRIVER/FatFs/source/ff.c **** 		}
5712:DRIVER/FatFs/source/ff.c **** 		dbuf = fp->buf;
5713:DRIVER/FatFs/source/ff.c **** #endif
5714:DRIVER/FatFs/source/ff.c **** 		fp->sect = sect;
5715:DRIVER/FatFs/source/ff.c **** 		rcnt = SS(fs) - (UINT)fp->fptr % SS(fs);	/* Number of bytes remains in the sector */
5716:DRIVER/FatFs/source/ff.c **** 		if (rcnt > btf) rcnt = btf;					/* Clip it by btr if needed */
5717:DRIVER/FatFs/source/ff.c **** 		rcnt = (*func)(dbuf + ((UINT)fp->fptr % SS(fs)), rcnt);	/* Forward the file data */
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 206


5718:DRIVER/FatFs/source/ff.c **** 		if (rcnt == 0) ABORT(fs, FR_INT_ERR);
5719:DRIVER/FatFs/source/ff.c **** 	}
5720:DRIVER/FatFs/source/ff.c **** 
5721:DRIVER/FatFs/source/ff.c **** 	LEAVE_FF(fs, FR_OK);
5722:DRIVER/FatFs/source/ff.c **** }
5723:DRIVER/FatFs/source/ff.c **** #endif /* FF_USE_FORWARD */
5724:DRIVER/FatFs/source/ff.c **** 
5725:DRIVER/FatFs/source/ff.c **** 
5726:DRIVER/FatFs/source/ff.c **** 
5727:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY && FF_USE_MKFS
5728:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
5729:DRIVER/FatFs/source/ff.c **** /* Create FAT/exFAT volume (with sub-functions)                          */
5730:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
5731:DRIVER/FatFs/source/ff.c **** 
5732:DRIVER/FatFs/source/ff.c **** #define N_SEC_TRACK 63			/* Sectors per track for determination of drive CHS */
5733:DRIVER/FatFs/source/ff.c **** #define	GPT_ALIGN	0x100000	/* Alignment of partitions in GPT [byte] (>=128KB) */
5734:DRIVER/FatFs/source/ff.c **** #define GPT_ITEMS	128			/* Number of GPT table size (>=128, sector aligned) */
5735:DRIVER/FatFs/source/ff.c **** 
5736:DRIVER/FatFs/source/ff.c **** 
5737:DRIVER/FatFs/source/ff.c **** /* Create partitions on the physical drive in format of MBR or GPT */
5738:DRIVER/FatFs/source/ff.c **** 
5739:DRIVER/FatFs/source/ff.c **** static FRESULT create_partition (
5740:DRIVER/FatFs/source/ff.c **** 	BYTE drv,			/* Physical drive number */
5741:DRIVER/FatFs/source/ff.c **** 	const LBA_t plst[],	/* Partition list */
5742:DRIVER/FatFs/source/ff.c **** 	BYTE sys,			/* System ID for each partition (for only MBR) */
5743:DRIVER/FatFs/source/ff.c **** 	BYTE *buf			/* Working buffer for a sector */
5744:DRIVER/FatFs/source/ff.c **** )
5745:DRIVER/FatFs/source/ff.c **** {
 4741              		.loc 1 5745 1 is_stmt 1 view -0
 4742              		.cfi_startproc
 4743              		@ args = 0, pretend = 0, frame = 16
 4744              		@ frame_needed = 0, uses_anonymous_args = 0
 4745              		.loc 1 5745 1 is_stmt 0 view .LVU1595
 4746 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 4747              	.LCFI27:
 4748              		.cfi_def_cfa_offset 36
 4749              		.cfi_offset 4, -36
 4750              		.cfi_offset 5, -32
 4751              		.cfi_offset 6, -28
 4752              		.cfi_offset 7, -24
 4753              		.cfi_offset 8, -20
 4754              		.cfi_offset 9, -16
 4755              		.cfi_offset 10, -12
 4756              		.cfi_offset 11, -8
 4757              		.cfi_offset 14, -4
 4758 0004 85B0     		sub	sp, sp, #20
 4759              	.LCFI28:
 4760              		.cfi_def_cfa_offset 56
 4761 0006 0190     		str	r0, [sp, #4]
 4762 0008 8B46     		mov	fp, r1
 4763 000a 0092     		str	r2, [sp]
 4764 000c 9A46     		mov	r10, r3
5746:DRIVER/FatFs/source/ff.c **** 	UINT i, cy;
 4765              		.loc 1 5746 2 is_stmt 1 view .LVU1596
5747:DRIVER/FatFs/source/ff.c **** 	LBA_t sz_drv;
 4766              		.loc 1 5747 2 view .LVU1597
5748:DRIVER/FatFs/source/ff.c **** 	DWORD sz_drv32, nxt_alloc32, sz_part32;
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 207


 4767              		.loc 1 5748 2 view .LVU1598
5749:DRIVER/FatFs/source/ff.c **** 	BYTE *pte;
 4768              		.loc 1 5749 2 view .LVU1599
5750:DRIVER/FatFs/source/ff.c **** 	BYTE hd, n_hd, sc, n_sc;
 4769              		.loc 1 5750 2 view .LVU1600
5751:DRIVER/FatFs/source/ff.c **** 
5752:DRIVER/FatFs/source/ff.c **** 	/* Get physical drive size */
5753:DRIVER/FatFs/source/ff.c **** 	if (disk_ioctl(drv, GET_SECTOR_COUNT, &sz_drv) != RES_OK) return FR_DISK_ERR;
 4770              		.loc 1 5753 2 view .LVU1601
 4771              		.loc 1 5753 6 is_stmt 0 view .LVU1602
 4772 000e 03AA     		add	r2, sp, #12
 4773              	.LVL588:
 4774              		.loc 1 5753 6 view .LVU1603
 4775 0010 0121     		movs	r1, #1
 4776              	.LVL589:
 4777              		.loc 1 5753 6 view .LVU1604
 4778 0012 FFF7FEFF 		bl	disk_ioctl
 4779              	.LVL590:
 4780              		.loc 1 5753 5 view .LVU1605
 4781 0016 0028     		cmp	r0, #0
 4782 0018 40F08880 		bne	.L357
5754:DRIVER/FatFs/source/ff.c **** 
5755:DRIVER/FatFs/source/ff.c **** #if FF_LBA64
5756:DRIVER/FatFs/source/ff.c **** 	if (sz_drv >= FF_MIN_GPT) {	/* Create partitions in GPT format */
5757:DRIVER/FatFs/source/ff.c **** 		WORD ss;
5758:DRIVER/FatFs/source/ff.c **** 		UINT sz_ptbl, pi, si, ofs;
5759:DRIVER/FatFs/source/ff.c **** 		DWORD bcc, rnd, align;
5760:DRIVER/FatFs/source/ff.c **** 		QWORD nxt_alloc, sz_part, sz_pool, top_bpt;
5761:DRIVER/FatFs/source/ff.c **** 		static const BYTE gpt_mbr[16] = {0x00, 0x00, 0x02, 0x00, 0xEE, 0xFE, 0xFF, 0x00, 0x01, 0x00, 0x00
5762:DRIVER/FatFs/source/ff.c **** 
5763:DRIVER/FatFs/source/ff.c **** #if FF_MAX_SS != FF_MIN_SS
5764:DRIVER/FatFs/source/ff.c **** 		if (disk_ioctl(drv, GET_SECTOR_SIZE, &ss) != RES_OK) return FR_DISK_ERR;	/* Get sector size */
5765:DRIVER/FatFs/source/ff.c **** 		if (ss > FF_MAX_SS || ss < FF_MIN_SS || (ss & (ss - 1))) return FR_DISK_ERR;
5766:DRIVER/FatFs/source/ff.c **** #else
5767:DRIVER/FatFs/source/ff.c **** 		ss = FF_MAX_SS;
5768:DRIVER/FatFs/source/ff.c **** #endif
5769:DRIVER/FatFs/source/ff.c **** 		rnd = (DWORD)sz_drv + GET_FATTIME();	/* Random seed */
5770:DRIVER/FatFs/source/ff.c **** 		align = GPT_ALIGN / ss;				/* Partition alignment for GPT [sector] */
5771:DRIVER/FatFs/source/ff.c **** 		sz_ptbl = GPT_ITEMS * SZ_GPTE / ss;	/* Size of partition table [sector] */
5772:DRIVER/FatFs/source/ff.c **** 		top_bpt = sz_drv - sz_ptbl - 1;		/* Backup partition table start sector */
5773:DRIVER/FatFs/source/ff.c **** 		nxt_alloc = 2 + sz_ptbl;			/* First allocatable sector */
5774:DRIVER/FatFs/source/ff.c **** 		sz_pool = top_bpt - nxt_alloc;		/* Size of allocatable area */
5775:DRIVER/FatFs/source/ff.c **** 		bcc = 0xFFFFFFFF; sz_part = 1;
5776:DRIVER/FatFs/source/ff.c **** 		pi = si = 0;	/* partition table index, size table index */
5777:DRIVER/FatFs/source/ff.c **** 		do {
5778:DRIVER/FatFs/source/ff.c **** 			if (pi * SZ_GPTE % ss == 0) memset(buf, 0, ss);	/* Clean the buffer if needed */
5779:DRIVER/FatFs/source/ff.c **** 			if (sz_part != 0) {				/* Is the size table not termintated? */
5780:DRIVER/FatFs/source/ff.c **** 				nxt_alloc = (nxt_alloc + align - 1) & ((QWORD)0 - align);	/* Align partition start */
5781:DRIVER/FatFs/source/ff.c **** 				sz_part = plst[si++];		/* Get a partition size */
5782:DRIVER/FatFs/source/ff.c **** 				if (sz_part <= 100) {		/* Is the size in percentage? */
5783:DRIVER/FatFs/source/ff.c **** 					sz_part = sz_pool * sz_part / 100;
5784:DRIVER/FatFs/source/ff.c **** 					sz_part = (sz_part + align - 1) & ((QWORD)0 - align);	/* Align partition end (only if in perce
5785:DRIVER/FatFs/source/ff.c **** 				}
5786:DRIVER/FatFs/source/ff.c **** 				if (nxt_alloc + sz_part > top_bpt) {	/* Clip the size at end of the pool */
5787:DRIVER/FatFs/source/ff.c **** 					sz_part = (nxt_alloc < top_bpt) ? top_bpt - nxt_alloc : 0;
5788:DRIVER/FatFs/source/ff.c **** 				}
5789:DRIVER/FatFs/source/ff.c **** 			}
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 208


5790:DRIVER/FatFs/source/ff.c **** 			if (sz_part != 0) {				/* Add a partition? */
5791:DRIVER/FatFs/source/ff.c **** 				ofs = pi * SZ_GPTE % ss;
5792:DRIVER/FatFs/source/ff.c **** 				memcpy(buf + ofs + GPTE_PtGuid, GUID_MS_Basic, 16);	/* Set partition GUID (Microsoft Basic Data
5793:DRIVER/FatFs/source/ff.c **** 				rnd = make_rand(rnd, buf + ofs + GPTE_UpGuid, 16);	/* Set unique partition GUID */
5794:DRIVER/FatFs/source/ff.c **** 				st_qword(buf + ofs + GPTE_FstLba, nxt_alloc);		/* Set partition start sector */
5795:DRIVER/FatFs/source/ff.c **** 				st_qword(buf + ofs + GPTE_LstLba, nxt_alloc + sz_part - 1);	/* Set partition end sector */
5796:DRIVER/FatFs/source/ff.c **** 				nxt_alloc += sz_part;								/* Next allocatable sector */
5797:DRIVER/FatFs/source/ff.c **** 			}
5798:DRIVER/FatFs/source/ff.c **** 			if ((pi + 1) * SZ_GPTE % ss == 0) {		/* Write the buffer if it is filled up */
5799:DRIVER/FatFs/source/ff.c **** 				for (i = 0; i < ss; bcc = crc32(bcc, buf[i++])) ;	/* Calculate table check sum */
5800:DRIVER/FatFs/source/ff.c **** 				if (disk_write(drv, buf, 2 + pi * SZ_GPTE / ss, 1) != RES_OK) return FR_DISK_ERR;		/* Write to 
5801:DRIVER/FatFs/source/ff.c **** 				if (disk_write(drv, buf, top_bpt + pi * SZ_GPTE / ss, 1) != RES_OK) return FR_DISK_ERR;	/* Writ
5802:DRIVER/FatFs/source/ff.c **** 			}
5803:DRIVER/FatFs/source/ff.c **** 		} while (++pi < GPT_ITEMS);
5804:DRIVER/FatFs/source/ff.c **** 
5805:DRIVER/FatFs/source/ff.c **** 		/* Create primary GPT header */
5806:DRIVER/FatFs/source/ff.c **** 		memset(buf, 0, ss);
5807:DRIVER/FatFs/source/ff.c **** 		memcpy(buf + GPTH_Sign, "EFI PART" "\0\0\1\0" "\x5C\0\0", 16);	/* Signature, version (1.0) and si
5808:DRIVER/FatFs/source/ff.c **** 		st_dword(buf + GPTH_PtBcc, ~bcc);			/* Table check sum */
5809:DRIVER/FatFs/source/ff.c **** 		st_qword(buf + GPTH_CurLba, 1);				/* LBA of this header */
5810:DRIVER/FatFs/source/ff.c **** 		st_qword(buf + GPTH_BakLba, sz_drv - 1);	/* LBA of secondary header */
5811:DRIVER/FatFs/source/ff.c **** 		st_qword(buf + GPTH_FstLba, 2 + sz_ptbl);	/* LBA of first allocatable sector */
5812:DRIVER/FatFs/source/ff.c **** 		st_qword(buf + GPTH_LstLba, top_bpt - 1);	/* LBA of last allocatable sector */
5813:DRIVER/FatFs/source/ff.c **** 		st_dword(buf + GPTH_PteSize, SZ_GPTE);		/* Size of a table entry */
5814:DRIVER/FatFs/source/ff.c **** 		st_dword(buf + GPTH_PtNum, GPT_ITEMS);		/* Number of table entries */
5815:DRIVER/FatFs/source/ff.c **** 		st_dword(buf + GPTH_PtOfs, 2);				/* LBA of this table */
5816:DRIVER/FatFs/source/ff.c **** 		rnd = make_rand(rnd, buf + GPTH_DskGuid, 16);	/* Disk GUID */
5817:DRIVER/FatFs/source/ff.c **** 		for (i = 0, bcc= 0xFFFFFFFF; i < 92; bcc = crc32(bcc, buf[i++])) ;	/* Calculate header check sum 
5818:DRIVER/FatFs/source/ff.c **** 		st_dword(buf + GPTH_Bcc, ~bcc);				/* Header check sum */
5819:DRIVER/FatFs/source/ff.c **** 		if (disk_write(drv, buf, 1, 1) != RES_OK) return FR_DISK_ERR;
5820:DRIVER/FatFs/source/ff.c **** 
5821:DRIVER/FatFs/source/ff.c **** 		/* Create secondary GPT header */
5822:DRIVER/FatFs/source/ff.c **** 		st_qword(buf + GPTH_CurLba, sz_drv - 1);	/* LBA of this header */
5823:DRIVER/FatFs/source/ff.c **** 		st_qword(buf + GPTH_BakLba, 1);				/* LBA of primary header */
5824:DRIVER/FatFs/source/ff.c **** 		st_qword(buf + GPTH_PtOfs, top_bpt);		/* LBA of this table */
5825:DRIVER/FatFs/source/ff.c **** 		st_dword(buf + GPTH_Bcc, 0);
5826:DRIVER/FatFs/source/ff.c **** 		for (i = 0, bcc= 0xFFFFFFFF; i < 92; bcc = crc32(bcc, buf[i++])) ;	/* Calculate header check sum 
5827:DRIVER/FatFs/source/ff.c **** 		st_dword(buf + GPTH_Bcc, ~bcc);				/* Header check sum */
5828:DRIVER/FatFs/source/ff.c **** 		if (disk_write(drv, buf, sz_drv - 1, 1) != RES_OK) return FR_DISK_ERR;
5829:DRIVER/FatFs/source/ff.c **** 
5830:DRIVER/FatFs/source/ff.c **** 		/* Create protective MBR */
5831:DRIVER/FatFs/source/ff.c **** 		memset(buf, 0, ss);
5832:DRIVER/FatFs/source/ff.c **** 		memcpy(buf + MBR_Table, gpt_mbr, 16);		/* Create a GPT partition */
5833:DRIVER/FatFs/source/ff.c **** 		st_word(buf + BS_55AA, 0xAA55);
5834:DRIVER/FatFs/source/ff.c **** 		if (disk_write(drv, buf, 0, 1) != RES_OK) return FR_DISK_ERR;
5835:DRIVER/FatFs/source/ff.c **** 
5836:DRIVER/FatFs/source/ff.c **** 	} else
5837:DRIVER/FatFs/source/ff.c **** #endif
5838:DRIVER/FatFs/source/ff.c **** 	{	/* Create partitions in MBR format */
5839:DRIVER/FatFs/source/ff.c **** 		sz_drv32 = (DWORD)sz_drv;
 4783              		.loc 1 5839 3 is_stmt 1 view .LVU1606
 4784              		.loc 1 5839 12 is_stmt 0 view .LVU1607
 4785 001c DDF80C80 		ldr	r8, [sp, #12]
 4786              	.LVL591:
5840:DRIVER/FatFs/source/ff.c **** 		n_sc = N_SEC_TRACK;				/* Determine drive CHS without any consideration of the drive geometry */
 4787              		.loc 1 5840 3 is_stmt 1 view .LVU1608
5841:DRIVER/FatFs/source/ff.c **** 		for (n_hd = 8; n_hd != 0 && sz_drv32 / n_hd / n_sc > 1024; n_hd *= 2) ;
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 209


 4788              		.loc 1 5841 3 view .LVU1609
 4789              		.loc 1 5841 13 is_stmt 0 view .LVU1610
 4790 0020 0824     		movs	r4, #8
 4791              	.LVL592:
 4792              	.L347:
 4793              		.loc 1 5841 28 is_stmt 1 discriminator 1 view .LVU1611
 4794 0022 44B1     		cbz	r4, .L348
 4795              		.loc 1 5841 40 is_stmt 0 discriminator 3 view .LVU1612
 4796 0024 B8FBF4F2 		udiv	r2, r8, r4
 4797              		.loc 1 5841 28 discriminator 3 view .LVU1613
 4798 0028 4FF63E43 		movw	r3, #64574
 4799 002c 9A42     		cmp	r2, r3
 4800 002e 02D9     		bls	.L348
 4801              		.loc 1 5841 67 is_stmt 1 discriminator 4 view .LVU1614
 4802 0030 6400     		lsls	r4, r4, #1
 4803              	.LVL593:
 4804              		.loc 1 5841 67 is_stmt 0 discriminator 4 view .LVU1615
 4805 0032 E4B2     		uxtb	r4, r4
 4806              	.LVL594:
 4807              		.loc 1 5841 67 discriminator 4 view .LVU1616
 4808 0034 F5E7     		b	.L347
 4809              	.L348:
5842:DRIVER/FatFs/source/ff.c **** 		if (n_hd == 0) n_hd = 255;		/* Number of heads needs to be <256 */
 4810              		.loc 1 5842 3 is_stmt 1 view .LVU1617
 4811              		.loc 1 5842 6 is_stmt 0 view .LVU1618
 4812 0036 04B9     		cbnz	r4, .L350
 4813              		.loc 1 5842 23 view .LVU1619
 4814 0038 FF24     		movs	r4, #255
 4815              	.LVL595:
 4816              	.L350:
5843:DRIVER/FatFs/source/ff.c **** 
5844:DRIVER/FatFs/source/ff.c **** 		memset(buf, 0, FF_MAX_SS);		/* Clear MBR */
 4817              		.loc 1 5844 3 is_stmt 1 view .LVU1620
 4818 003a 4FF48052 		mov	r2, #4096
 4819 003e 0021     		movs	r1, #0
 4820 0040 5046     		mov	r0, r10
 4821 0042 FFF7FEFF 		bl	memset
 4822              	.LVL596:
5845:DRIVER/FatFs/source/ff.c **** 		pte = buf + MBR_Table;	/* Partition table in the MBR */
 4823              		.loc 1 5845 3 view .LVU1621
 4824              		.loc 1 5845 7 is_stmt 0 view .LVU1622
 4825 0046 0AF5DF76 		add	r6, r10, #446
 4826              	.LVL597:
5846:DRIVER/FatFs/source/ff.c **** 		for (i = 0, nxt_alloc32 = n_sc; i < 4 && nxt_alloc32 != 0 && nxt_alloc32 < sz_drv32; i++, nxt_all
 4827              		.loc 1 5846 3 is_stmt 1 view .LVU1623
 4828              		.loc 1 5846 27 is_stmt 0 view .LVU1624
 4829 004a 3F25     		movs	r5, #63
 4830              		.loc 1 5846 10 view .LVU1625
 4831 004c 4FF00009 		mov	r9, #0
 4832              		.loc 1 5846 3 view .LVU1626
 4833 0050 45E0     		b	.L351
 4834              	.LVL598:
 4835              	.L359:
5847:DRIVER/FatFs/source/ff.c **** 			sz_part32 = (DWORD)plst[i];	/* Get partition size */
5848:DRIVER/FatFs/source/ff.c **** 			if (sz_part32 <= 100) sz_part32 = (sz_part32 == 100) ? sz_drv32 : sz_drv32 / 100 * sz_part32;	/*
 4836              		.loc 1 5848 68 view .LVU1627
 4837 0052 4746     		mov	r7, r8
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 210


 4838              	.LVL599:
 4839              		.loc 1 5848 68 view .LVU1628
 4840 0054 54E0     		b	.L352
 4841              	.LVL600:
 4842              	.L353:
5849:DRIVER/FatFs/source/ff.c **** 			if (nxt_alloc32 + sz_part32 > sz_drv32 || nxt_alloc32 + sz_part32 < nxt_alloc32) sz_part32 = sz_
 4843              		.loc 1 5849 85 is_stmt 1 discriminator 3 view .LVU1629
 4844              		.loc 1 5849 95 is_stmt 0 discriminator 3 view .LVU1630
 4845 0056 A8EB0507 		sub	r7, r8, r5
 4846              	.LVL601:
 4847              	.L354:
5850:DRIVER/FatFs/source/ff.c **** 			if (sz_part32 == 0) break;	/* End of table or no sector to allocate? */
 4848              		.loc 1 5850 4 is_stmt 1 view .LVU1631
 4849              		.loc 1 5850 7 is_stmt 0 view .LVU1632
 4850 005a 002F     		cmp	r7, #0
 4851 005c 56D0     		beq	.L355
5851:DRIVER/FatFs/source/ff.c **** 
5852:DRIVER/FatFs/source/ff.c **** 			st_dword(pte + PTE_StLba, nxt_alloc32);	/* Start LBA */
 4852              		.loc 1 5852 4 is_stmt 1 discriminator 2 view .LVU1633
 4853 005e 2946     		mov	r1, r5
 4854 0060 06F10800 		add	r0, r6, #8
 4855 0064 FFF7FEFF 		bl	st_dword
 4856              	.LVL602:
5853:DRIVER/FatFs/source/ff.c **** 			st_dword(pte + PTE_SizLba, sz_part32);	/* Number of sectors */
 4857              		.loc 1 5853 4 discriminator 2 view .LVU1634
 4858 0068 3946     		mov	r1, r7
 4859 006a 06F10C00 		add	r0, r6, #12
 4860 006e FFF7FEFF 		bl	st_dword
 4861              	.LVL603:
5854:DRIVER/FatFs/source/ff.c **** 			pte[PTE_System] = sys;					/* System type */
 4862              		.loc 1 5854 4 discriminator 2 view .LVU1635
 4863              		.loc 1 5854 20 is_stmt 0 discriminator 2 view .LVU1636
 4864 0072 009B     		ldr	r3, [sp]
 4865 0074 3371     		strb	r3, [r6, #4]
5855:DRIVER/FatFs/source/ff.c **** 
5856:DRIVER/FatFs/source/ff.c **** 			cy = (UINT)(nxt_alloc32 / n_sc / n_hd);	/* Start cylinder */
 4866              		.loc 1 5856 4 is_stmt 1 discriminator 2 view .LVU1637
 4867              		.loc 1 5856 28 is_stmt 0 discriminator 2 view .LVU1638
 4868 0076 2F4A     		ldr	r2, .L363
 4869 0078 A2FB0513 		umull	r1, r3, r2, r5
 4870 007c E91A     		subs	r1, r5, r3
 4871 007e 03EB5103 		add	r3, r3, r1, lsr #1
 4872 0082 5B09     		lsrs	r3, r3, #5
 4873              		.loc 1 5856 7 discriminator 2 view .LVU1639
 4874 0084 B3FBF4F1 		udiv	r1, r3, r4
 4875              	.LVL604:
5857:DRIVER/FatFs/source/ff.c **** 			hd = (BYTE)(nxt_alloc32 / n_sc % n_hd);	/* Start head */
 4876              		.loc 1 5857 4 is_stmt 1 discriminator 2 view .LVU1640
 4877              		.loc 1 5857 35 is_stmt 0 discriminator 2 view .LVU1641
 4878 0088 04FB1130 		mls	r0, r4, r1, r3
 4879              	.LVL605:
5858:DRIVER/FatFs/source/ff.c **** 			sc = (BYTE)(nxt_alloc32 % n_sc + 1);	/* Start sector */
 4880              		.loc 1 5858 4 is_stmt 1 discriminator 2 view .LVU1642
 4881              		.loc 1 5858 28 is_stmt 0 discriminator 2 view .LVU1643
 4882 008c C3EB8313 		rsb	r3, r3, r3, lsl #6
 4883 0090 EB1A     		subs	r3, r5, r3
 4884              		.loc 1 5858 9 discriminator 2 view .LVU1644
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 211


 4885 0092 DBB2     		uxtb	r3, r3
 4886              		.loc 1 5858 7 discriminator 2 view .LVU1645
 4887 0094 0133     		adds	r3, r3, #1
 4888 0096 DBB2     		uxtb	r3, r3
 4889              	.LVL606:
5859:DRIVER/FatFs/source/ff.c **** 			pte[PTE_StHead] = hd;
 4890              		.loc 1 5859 4 is_stmt 1 discriminator 2 view .LVU1646
 4891              		.loc 1 5859 20 is_stmt 0 discriminator 2 view .LVU1647
 4892 0098 7070     		strb	r0, [r6, #1]
5860:DRIVER/FatFs/source/ff.c **** 			pte[PTE_StSec] = (BYTE)((cy >> 2 & 0xC0) | sc);
 4893              		.loc 1 5860 4 is_stmt 1 discriminator 2 view .LVU1648
 4894              		.loc 1 5860 32 is_stmt 0 discriminator 2 view .LVU1649
 4895 009a 8808     		lsrs	r0, r1, #2
 4896              	.LVL607:
 4897              		.loc 1 5860 37 discriminator 2 view .LVU1650
 4898 009c 00F0C000 		and	r0, r0, #192
 4899              		.loc 1 5860 21 discriminator 2 view .LVU1651
 4900 00a0 0343     		orrs	r3, r3, r0
 4901              	.LVL608:
 4902              		.loc 1 5860 19 discriminator 2 view .LVU1652
 4903 00a2 B370     		strb	r3, [r6, #2]
5861:DRIVER/FatFs/source/ff.c **** 			pte[PTE_StCyl] = (BYTE)cy;
 4904              		.loc 1 5861 4 is_stmt 1 discriminator 2 view .LVU1653
 4905              		.loc 1 5861 19 is_stmt 0 discriminator 2 view .LVU1654
 4906 00a4 F170     		strb	r1, [r6, #3]
5862:DRIVER/FatFs/source/ff.c **** 
5863:DRIVER/FatFs/source/ff.c **** 			cy = (UINT)((nxt_alloc32 + sz_part32 - 1) / n_sc / n_hd);	/* End cylinder */
 4907              		.loc 1 5863 4 is_stmt 1 discriminator 2 view .LVU1655
 4908              		.loc 1 5863 29 is_stmt 0 discriminator 2 view .LVU1656
 4909 00a6 3D44     		add	r5, r5, r7
 4910              	.LVL609:
 4911              		.loc 1 5863 41 discriminator 2 view .LVU1657
 4912 00a8 6B1E     		subs	r3, r5, #1
 4913              		.loc 1 5863 46 discriminator 2 view .LVU1658
 4914 00aa A2FB0312 		umull	r1, r2, r2, r3
 4915              	.LVL610:
 4916              		.loc 1 5863 46 discriminator 2 view .LVU1659
 4917 00ae 991A     		subs	r1, r3, r2
 4918 00b0 02EB5102 		add	r2, r2, r1, lsr #1
 4919 00b4 5209     		lsrs	r2, r2, #5
 4920              		.loc 1 5863 7 discriminator 2 view .LVU1660
 4921 00b6 B2FBF4F1 		udiv	r1, r2, r4
 4922              	.LVL611:
5864:DRIVER/FatFs/source/ff.c **** 			hd = (BYTE)((nxt_alloc32 + sz_part32 - 1) / n_sc % n_hd);	/* End head */
 4923              		.loc 1 5864 4 is_stmt 1 discriminator 2 view .LVU1661
 4924              		.loc 1 5864 53 is_stmt 0 discriminator 2 view .LVU1662
 4925 00ba 04FB1120 		mls	r0, r4, r1, r2
 4926              	.LVL612:
5865:DRIVER/FatFs/source/ff.c **** 			sc = (BYTE)((nxt_alloc32 + sz_part32 - 1) % n_sc + 1);		/* End sector */
 4927              		.loc 1 5865 4 is_stmt 1 discriminator 2 view .LVU1663
 4928              		.loc 1 5865 46 is_stmt 0 discriminator 2 view .LVU1664
 4929 00be C2EB8212 		rsb	r2, r2, r2, lsl #6
 4930 00c2 9B1A     		subs	r3, r3, r2
 4931              		.loc 1 5865 9 discriminator 2 view .LVU1665
 4932 00c4 DBB2     		uxtb	r3, r3
 4933              		.loc 1 5865 7 discriminator 2 view .LVU1666
 4934 00c6 0133     		adds	r3, r3, #1
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 212


 4935 00c8 DBB2     		uxtb	r3, r3
 4936              	.LVL613:
5866:DRIVER/FatFs/source/ff.c **** 			pte[PTE_EdHead] = hd;
 4937              		.loc 1 5866 4 is_stmt 1 discriminator 2 view .LVU1667
 4938              		.loc 1 5866 20 is_stmt 0 discriminator 2 view .LVU1668
 4939 00ca 7071     		strb	r0, [r6, #5]
5867:DRIVER/FatFs/source/ff.c **** 			pte[PTE_EdSec] = (BYTE)((cy >> 2 & 0xC0) | sc);
 4940              		.loc 1 5867 4 is_stmt 1 discriminator 2 view .LVU1669
 4941              		.loc 1 5867 32 is_stmt 0 discriminator 2 view .LVU1670
 4942 00cc 8A08     		lsrs	r2, r1, #2
 4943              		.loc 1 5867 37 discriminator 2 view .LVU1671
 4944 00ce 02F0C002 		and	r2, r2, #192
 4945              		.loc 1 5867 21 discriminator 2 view .LVU1672
 4946 00d2 1343     		orrs	r3, r3, r2
 4947              	.LVL614:
 4948              		.loc 1 5867 19 discriminator 2 view .LVU1673
 4949 00d4 B371     		strb	r3, [r6, #6]
5868:DRIVER/FatFs/source/ff.c **** 			pte[PTE_EdCyl] = (BYTE)cy;
 4950              		.loc 1 5868 4 is_stmt 1 discriminator 2 view .LVU1674
 4951              		.loc 1 5868 19 is_stmt 0 discriminator 2 view .LVU1675
 4952 00d6 F171     		strb	r1, [r6, #7]
5869:DRIVER/FatFs/source/ff.c **** 
5870:DRIVER/FatFs/source/ff.c **** 			pte += SZ_PTE;		/* Next entry */
 4953              		.loc 1 5870 4 is_stmt 1 discriminator 2 view .LVU1676
 4954              		.loc 1 5870 8 is_stmt 0 discriminator 2 view .LVU1677
 4955 00d8 1036     		adds	r6, r6, #16
 4956              	.LVL615:
5846:DRIVER/FatFs/source/ff.c **** 			sz_part32 = (DWORD)plst[i];	/* Get partition size */
 4957              		.loc 1 5846 91 is_stmt 1 discriminator 2 view .LVU1678
5846:DRIVER/FatFs/source/ff.c **** 			sz_part32 = (DWORD)plst[i];	/* Get partition size */
 4958              		.loc 1 5846 89 is_stmt 0 discriminator 2 view .LVU1679
 4959 00da 09F10109 		add	r9, r9, #1
 4960              	.LVL616:
 4961              	.L351:
5846:DRIVER/FatFs/source/ff.c **** 			sz_part32 = (DWORD)plst[i];	/* Get partition size */
 4962              		.loc 1 5846 61 is_stmt 1 discriminator 1 view .LVU1680
 4963 00de B9F1030F 		cmp	r9, #3
 4964 00e2 13D8     		bhi	.L355
5846:DRIVER/FatFs/source/ff.c **** 			sz_part32 = (DWORD)plst[i];	/* Get partition size */
 4965              		.loc 1 5846 41 is_stmt 0 discriminator 3 view .LVU1681
 4966 00e4 95B1     		cbz	r5, .L355
5846:DRIVER/FatFs/source/ff.c **** 			sz_part32 = (DWORD)plst[i];	/* Get partition size */
 4967              		.loc 1 5846 61 discriminator 4 view .LVU1682
 4968 00e6 4545     		cmp	r5, r8
 4969 00e8 10D2     		bcs	.L355
5847:DRIVER/FatFs/source/ff.c **** 			if (sz_part32 <= 100) sz_part32 = (sz_part32 == 100) ? sz_drv32 : sz_drv32 / 100 * sz_part32;	/*
 4970              		.loc 1 5847 4 is_stmt 1 view .LVU1683
5847:DRIVER/FatFs/source/ff.c **** 			if (sz_part32 <= 100) sz_part32 = (sz_part32 == 100) ? sz_drv32 : sz_drv32 / 100 * sz_part32;	/*
 4971              		.loc 1 5847 14 is_stmt 0 view .LVU1684
 4972 00ea 5BF82970 		ldr	r7, [fp, r9, lsl #2]
 4973              	.LVL617:
5848:DRIVER/FatFs/source/ff.c **** 			if (nxt_alloc32 + sz_part32 > sz_drv32 || nxt_alloc32 + sz_part32 < nxt_alloc32) sz_part32 = sz_
 4974              		.loc 1 5848 4 is_stmt 1 view .LVU1685
5848:DRIVER/FatFs/source/ff.c **** 			if (nxt_alloc32 + sz_part32 > sz_drv32 || nxt_alloc32 + sz_part32 < nxt_alloc32) sz_part32 = sz_
 4975              		.loc 1 5848 7 is_stmt 0 view .LVU1686
 4976 00ee 642F     		cmp	r7, #100
 4977 00f0 06D8     		bhi	.L352
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 213


5848:DRIVER/FatFs/source/ff.c **** 			if (nxt_alloc32 + sz_part32 > sz_drv32 || nxt_alloc32 + sz_part32 < nxt_alloc32) sz_part32 = sz_
 4978              		.loc 1 5848 26 is_stmt 1 discriminator 1 view .LVU1687
5848:DRIVER/FatFs/source/ff.c **** 			if (nxt_alloc32 + sz_part32 > sz_drv32 || nxt_alloc32 + sz_part32 < nxt_alloc32) sz_part32 = sz_
 4979              		.loc 1 5848 68 is_stmt 0 discriminator 1 view .LVU1688
 4980 00f2 AED0     		beq	.L359
5848:DRIVER/FatFs/source/ff.c **** 			if (nxt_alloc32 + sz_part32 > sz_drv32 || nxt_alloc32 + sz_part32 < nxt_alloc32) sz_part32 = sz_
 4981              		.loc 1 5848 79 discriminator 2 view .LVU1689
 4982 00f4 104B     		ldr	r3, .L363+4
 4983 00f6 A3FB0823 		umull	r2, r3, r3, r8
 4984 00fa 5B09     		lsrs	r3, r3, #5
5848:DRIVER/FatFs/source/ff.c **** 			if (nxt_alloc32 + sz_part32 > sz_drv32 || nxt_alloc32 + sz_part32 < nxt_alloc32) sz_part32 = sz_
 4985              		.loc 1 5848 68 discriminator 2 view .LVU1690
 4986 00fc 03FB07F7 		mul	r7, r3, r7
 4987              	.LVL618:
 4988              	.L352:
5849:DRIVER/FatFs/source/ff.c **** 			if (sz_part32 == 0) break;	/* End of table or no sector to allocate? */
 4989              		.loc 1 5849 4 is_stmt 1 view .LVU1691
5849:DRIVER/FatFs/source/ff.c **** 			if (sz_part32 == 0) break;	/* End of table or no sector to allocate? */
 4990              		.loc 1 5849 20 is_stmt 0 view .LVU1692
 4991 0100 EB19     		adds	r3, r5, r7
5849:DRIVER/FatFs/source/ff.c **** 			if (sz_part32 == 0) break;	/* End of table or no sector to allocate? */
 4992              		.loc 1 5849 7 view .LVU1693
 4993 0102 4345     		cmp	r3, r8
 4994 0104 A7D8     		bhi	.L353
5849:DRIVER/FatFs/source/ff.c **** 			if (sz_part32 == 0) break;	/* End of table or no sector to allocate? */
 4995              		.loc 1 5849 43 discriminator 2 view .LVU1694
 4996 0106 AB42     		cmp	r3, r5
 4997 0108 A7D2     		bcs	.L354
 4998 010a A4E7     		b	.L353
 4999              	.LVL619:
 5000              	.L355:
5871:DRIVER/FatFs/source/ff.c **** 		}
5872:DRIVER/FatFs/source/ff.c **** 
5873:DRIVER/FatFs/source/ff.c **** 		st_word(buf + BS_55AA, 0xAA55);		/* MBR signature */
 5001              		.loc 1 5873 3 is_stmt 1 view .LVU1695
 5002 010c 4AF65521 		movw	r1, #43605
 5003 0110 0AF5FF70 		add	r0, r10, #510
 5004 0114 FFF7FEFF 		bl	st_word
 5005              	.LVL620:
5874:DRIVER/FatFs/source/ff.c **** 		if (disk_write(drv, buf, 0, 1) != RES_OK) return FR_DISK_ERR;	/* Write it to the MBR */
 5006              		.loc 1 5874 3 view .LVU1696
 5007              		.loc 1 5874 7 is_stmt 0 view .LVU1697
 5008 0118 0123     		movs	r3, #1
 5009 011a 0022     		movs	r2, #0
 5010 011c 5146     		mov	r1, r10
 5011 011e 0198     		ldr	r0, [sp, #4]
 5012 0120 FFF7FEFF 		bl	disk_write
 5013              	.LVL621:
 5014              		.loc 1 5874 6 view .LVU1698
 5015 0124 20B9     		cbnz	r0, .L362
 5016              	.LVL622:
 5017              	.L346:
5875:DRIVER/FatFs/source/ff.c **** 	}
5876:DRIVER/FatFs/source/ff.c **** 
5877:DRIVER/FatFs/source/ff.c **** 	return FR_OK;
5878:DRIVER/FatFs/source/ff.c **** }
 5018              		.loc 1 5878 1 view .LVU1699
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 214


 5019 0126 05B0     		add	sp, sp, #20
 5020              	.LCFI29:
 5021              		.cfi_remember_state
 5022              		.cfi_def_cfa_offset 36
 5023              		@ sp needed
 5024 0128 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 5025              	.LVL623:
 5026              	.L357:
 5027              	.LCFI30:
 5028              		.cfi_restore_state
5753:DRIVER/FatFs/source/ff.c **** 
 5029              		.loc 1 5753 67 view .LVU1700
 5030 012c 0120     		movs	r0, #1
 5031 012e FAE7     		b	.L346
 5032              	.LVL624:
 5033              	.L362:
5874:DRIVER/FatFs/source/ff.c **** 		if (disk_write(drv, buf, 0, 1) != RES_OK) return FR_DISK_ERR;	/* Write it to the MBR */
 5034              		.loc 1 5874 52 view .LVU1701
 5035 0130 0120     		movs	r0, #1
 5036 0132 F8E7     		b	.L346
 5037              	.L364:
 5038              		.align	2
 5039              	.L363:
 5040 0134 05411004 		.word	68174085
 5041 0138 1F85EB51 		.word	1374389535
 5042              		.cfi_endproc
 5043              	.LFE55:
 5045              		.section	.rodata.create_name.str1.4,"aMS",%progbits,1
 5046              		.align	2
 5047              	.LC1:
 5048 0000 2A3A3C3E 		.ascii	"*:<>|\"?\177\000"
 5048      7C223F7F 
 5048      00
 5049 0009 000000   		.align	2
 5050              	.LC2:
 5051 000c 2B2C3B3D 		.ascii	"+,;=[]\000"
 5051      5B5D00
 5052              		.section	.text.create_name,"ax",%progbits
 5053              		.align	1
 5054              		.syntax unified
 5055              		.thumb
 5056              		.thumb_func
 5058              	create_name:
 5059              	.LVL625:
 5060              	.LFB32:
2851:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN		/* LFN configuration */
 5061              		.loc 1 2851 1 is_stmt 1 view -0
 5062              		.cfi_startproc
 5063              		@ args = 0, pretend = 0, frame = 16
 5064              		@ frame_needed = 0, uses_anonymous_args = 0
2851:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN		/* LFN configuration */
 5065              		.loc 1 2851 1 is_stmt 0 view .LVU1703
 5066 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 5067              	.LCFI31:
 5068              		.cfi_def_cfa_offset 36
 5069              		.cfi_offset 4, -36
 5070              		.cfi_offset 5, -32
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 215


 5071              		.cfi_offset 6, -28
 5072              		.cfi_offset 7, -24
 5073              		.cfi_offset 8, -20
 5074              		.cfi_offset 9, -16
 5075              		.cfi_offset 10, -12
 5076              		.cfi_offset 11, -8
 5077              		.cfi_offset 14, -4
 5078 0004 85B0     		sub	sp, sp, #20
 5079              	.LCFI32:
 5080              		.cfi_def_cfa_offset 56
 5081 0006 0746     		mov	r7, r0
 5082 0008 8946     		mov	r9, r1
2853:DRIVER/FatFs/source/ff.c **** 	WCHAR wc;
 5083              		.loc 1 2853 2 is_stmt 1 view .LVU1704
2854:DRIVER/FatFs/source/ff.c **** 	WCHAR *lfn;
 5084              		.loc 1 2854 2 view .LVU1705
2855:DRIVER/FatFs/source/ff.c **** 	const TCHAR* p;
 5085              		.loc 1 2855 2 view .LVU1706
2856:DRIVER/FatFs/source/ff.c **** 	DWORD uc;
 5086              		.loc 1 2856 2 view .LVU1707
2857:DRIVER/FatFs/source/ff.c **** 	UINT i, ni, si, di;
 5087              		.loc 1 2857 2 view .LVU1708
2858:DRIVER/FatFs/source/ff.c **** 
 5088              		.loc 1 2858 2 view .LVU1709
2862:DRIVER/FatFs/source/ff.c **** 	for (;;) {
 5089              		.loc 1 2862 2 view .LVU1710
2862:DRIVER/FatFs/source/ff.c **** 	for (;;) {
 5090              		.loc 1 2862 6 is_stmt 0 view .LVU1711
 5091 000a 0B68     		ldr	r3, [r1]
2862:DRIVER/FatFs/source/ff.c **** 	for (;;) {
 5092              		.loc 1 2862 4 view .LVU1712
 5093 000c 0393     		str	r3, [sp, #12]
2862:DRIVER/FatFs/source/ff.c **** 	for (;;) {
 5094              		.loc 1 2862 13 is_stmt 1 view .LVU1713
2862:DRIVER/FatFs/source/ff.c **** 	for (;;) {
 5095              		.loc 1 2862 26 is_stmt 0 view .LVU1714
 5096 000e 0368     		ldr	r3, [r0]
2862:DRIVER/FatFs/source/ff.c **** 	for (;;) {
 5097              		.loc 1 2862 17 view .LVU1715
 5098 0010 1D69     		ldr	r5, [r3, #16]
 5099              	.LVL626:
2862:DRIVER/FatFs/source/ff.c **** 	for (;;) {
 5100              		.loc 1 2862 39 is_stmt 1 view .LVU1716
2862:DRIVER/FatFs/source/ff.c **** 	for (;;) {
 5101              		.loc 1 2862 42 is_stmt 0 view .LVU1717
 5102 0012 0024     		movs	r4, #0
 5103 0014 05E0     		b	.L370
 5104              	.LVL627:
 5105              	.L369:
2870:DRIVER/FatFs/source/ff.c **** 		lfn[di++] = wc;				/* Store the Unicode character */
 5106              		.loc 1 2870 3 is_stmt 1 view .LVU1718
2870:DRIVER/FatFs/source/ff.c **** 		lfn[di++] = wc;				/* Store the Unicode character */
 5107              		.loc 1 2870 6 is_stmt 0 view .LVU1719
 5108 0016 FE2C     		cmp	r4, #254
 5109 0018 00F21C81 		bhi	.L409
2871:DRIVER/FatFs/source/ff.c **** 	}
 5110              		.loc 1 2871 3 is_stmt 1 view .LVU1720
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 216


 5111              	.LVL628:
2871:DRIVER/FatFs/source/ff.c **** 	}
 5112              		.loc 1 2871 13 is_stmt 0 view .LVU1721
 5113 001c 25F81460 		strh	r6, [r5, r4, lsl #1]	@ movhi
2863:DRIVER/FatFs/source/ff.c **** 		uc = tchar2uni(&p);			/* Get a character */
 5114              		.loc 1 2863 2 is_stmt 1 view .LVU1722
2871:DRIVER/FatFs/source/ff.c **** 	}
 5115              		.loc 1 2871 9 is_stmt 0 view .LVU1723
 5116 0020 0134     		adds	r4, r4, #1
 5117              	.LVL629:
 5118              	.L370:
2863:DRIVER/FatFs/source/ff.c **** 		uc = tchar2uni(&p);			/* Get a character */
 5119              		.loc 1 2863 2 is_stmt 1 view .LVU1724
2864:DRIVER/FatFs/source/ff.c **** 		if (uc == 0xFFFFFFFF) return FR_INVALID_NAME;		/* Invalid code or UTF decode error */
 5120              		.loc 1 2864 3 view .LVU1725
2864:DRIVER/FatFs/source/ff.c **** 		if (uc == 0xFFFFFFFF) return FR_INVALID_NAME;		/* Invalid code or UTF decode error */
 5121              		.loc 1 2864 8 is_stmt 0 view .LVU1726
 5122 0022 03A8     		add	r0, sp, #12
 5123 0024 FFF7FEFF 		bl	tchar2uni
 5124              	.LVL630:
2865:DRIVER/FatFs/source/ff.c **** 		if (uc >= 0x10000) lfn[di++] = (WCHAR)(uc >> 16);	/* Store high surrogate if needed */
 5125              		.loc 1 2865 3 is_stmt 1 view .LVU1727
2865:DRIVER/FatFs/source/ff.c **** 		if (uc >= 0x10000) lfn[di++] = (WCHAR)(uc >> 16);	/* Store high surrogate if needed */
 5126              		.loc 1 2865 6 is_stmt 0 view .LVU1728
 5127 0028 B0F1FF3F 		cmp	r0, #-1
 5128 002c 00F01081 		beq	.L407
2866:DRIVER/FatFs/source/ff.c **** 		wc = (WCHAR)uc;
 5129              		.loc 1 2866 3 is_stmt 1 view .LVU1729
2866:DRIVER/FatFs/source/ff.c **** 		wc = (WCHAR)uc;
 5130              		.loc 1 2866 6 is_stmt 0 view .LVU1730
 5131 0030 B0F5803F 		cmp	r0, #65536
 5132 0034 03D3     		bcc	.L367
2866:DRIVER/FatFs/source/ff.c **** 		wc = (WCHAR)uc;
 5133              		.loc 1 2866 22 is_stmt 1 discriminator 1 view .LVU1731
 5134              	.LVL631:
2866:DRIVER/FatFs/source/ff.c **** 		wc = (WCHAR)uc;
 5135              		.loc 1 2866 34 is_stmt 0 discriminator 1 view .LVU1732
 5136 0036 030C     		lsrs	r3, r0, #16
2866:DRIVER/FatFs/source/ff.c **** 		wc = (WCHAR)uc;
 5137              		.loc 1 2866 32 discriminator 1 view .LVU1733
 5138 0038 25F81430 		strh	r3, [r5, r4, lsl #1]	@ movhi
2866:DRIVER/FatFs/source/ff.c **** 		wc = (WCHAR)uc;
 5139              		.loc 1 2866 28 discriminator 1 view .LVU1734
 5140 003c 0134     		adds	r4, r4, #1
 5141              	.LVL632:
 5142              	.L367:
2867:DRIVER/FatFs/source/ff.c **** 		if (wc < ' ' || IsSeparator(wc)) break;	/* Break if end of the path or a separator is found */
 5143              		.loc 1 2867 3 is_stmt 1 view .LVU1735
2867:DRIVER/FatFs/source/ff.c **** 		if (wc < ' ' || IsSeparator(wc)) break;	/* Break if end of the path or a separator is found */
 5144              		.loc 1 2867 6 is_stmt 0 view .LVU1736
 5145 003e 86B2     		uxth	r6, r0
 5146              	.LVL633:
2868:DRIVER/FatFs/source/ff.c **** 		if (wc < 0x80 && strchr("*:<>|\"\?\x7F", (int)wc)) return FR_INVALID_NAME;	/* Reject illegal char
 5147              		.loc 1 2868 3 is_stmt 1 view .LVU1737
2868:DRIVER/FatFs/source/ff.c **** 		if (wc < 0x80 && strchr("*:<>|\"\?\x7F", (int)wc)) return FR_INVALID_NAME;	/* Reject illegal char
 5148              		.loc 1 2868 6 is_stmt 0 view .LVU1738
 5149 0040 1F2E     		cmp	r6, #31
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 217


 5150 0042 0DD9     		bls	.L368
2868:DRIVER/FatFs/source/ff.c **** 		if (wc < 0x80 && strchr("*:<>|\"\?\x7F", (int)wc)) return FR_INVALID_NAME;	/* Reject illegal char
 5151              		.loc 1 2868 16 discriminator 1 view .LVU1739
 5152 0044 2F2E     		cmp	r6, #47
 5153 0046 0BD0     		beq	.L368
2868:DRIVER/FatFs/source/ff.c **** 		if (wc < 0x80 && strchr("*:<>|\"\?\x7F", (int)wc)) return FR_INVALID_NAME;	/* Reject illegal char
 5154              		.loc 1 2868 19 discriminator 2 view .LVU1740
 5155 0048 5C2E     		cmp	r6, #92
 5156 004a 09D0     		beq	.L368
2869:DRIVER/FatFs/source/ff.c **** 		if (di >= FF_MAX_LFN) return FR_INVALID_NAME;	/* Reject too long name */
 5157              		.loc 1 2869 3 is_stmt 1 view .LVU1741
2869:DRIVER/FatFs/source/ff.c **** 		if (di >= FF_MAX_LFN) return FR_INVALID_NAME;	/* Reject too long name */
 5158              		.loc 1 2869 6 is_stmt 0 view .LVU1742
 5159 004c 7F2E     		cmp	r6, #127
 5160 004e E2D8     		bhi	.L369
2869:DRIVER/FatFs/source/ff.c **** 		if (di >= FF_MAX_LFN) return FR_INVALID_NAME;	/* Reject too long name */
 5161              		.loc 1 2869 20 discriminator 1 view .LVU1743
 5162 0050 3146     		mov	r1, r6
 5163 0052 8148     		ldr	r0, .L422
 5164              	.LVL634:
2869:DRIVER/FatFs/source/ff.c **** 		if (di >= FF_MAX_LFN) return FR_INVALID_NAME;	/* Reject too long name */
 5165              		.loc 1 2869 20 discriminator 1 view .LVU1744
 5166 0054 FFF7FEFF 		bl	strchr
 5167              	.LVL635:
2869:DRIVER/FatFs/source/ff.c **** 		if (di >= FF_MAX_LFN) return FR_INVALID_NAME;	/* Reject too long name */
 5168              		.loc 1 2869 17 discriminator 1 view .LVU1745
 5169 0058 0028     		cmp	r0, #0
 5170 005a DCD0     		beq	.L369
2869:DRIVER/FatFs/source/ff.c **** 		if (di >= FF_MAX_LFN) return FR_INVALID_NAME;	/* Reject too long name */
 5171              		.loc 1 2869 61 view .LVU1746
 5172 005c 0620     		movs	r0, #6
 5173 005e 9CE0     		b	.L366
 5174              	.LVL636:
 5175              	.L368:
2873:DRIVER/FatFs/source/ff.c **** 		cf = NS_LAST;			/* Last segment */
 5176              		.loc 1 2873 2 is_stmt 1 view .LVU1747
2873:DRIVER/FatFs/source/ff.c **** 		cf = NS_LAST;			/* Last segment */
 5177              		.loc 1 2873 5 is_stmt 0 view .LVU1748
 5178 0060 1F2E     		cmp	r6, #31
 5179 0062 07D8     		bhi	.L372
2874:DRIVER/FatFs/source/ff.c **** 	} else {					/* Stopped at a separator */
 5180              		.loc 1 2874 6 view .LVU1749
 5181 0064 4FF00408 		mov	r8, #4
 5182              	.L371:
 5183              	.LVL637:
2880:DRIVER/FatFs/source/ff.c **** 
 5184              		.loc 1 2880 2 is_stmt 1 view .LVU1750
2880:DRIVER/FatFs/source/ff.c **** 
 5185              		.loc 1 2880 8 is_stmt 0 view .LVU1751
 5186 0068 039B     		ldr	r3, [sp, #12]
 5187 006a C9F80030 		str	r3, [r9]
2893:DRIVER/FatFs/source/ff.c **** 		wc = lfn[di - 1];
 5188              		.loc 1 2893 2 is_stmt 1 view .LVU1752
2893:DRIVER/FatFs/source/ff.c **** 		wc = lfn[di - 1];
 5189              		.loc 1 2893 8 is_stmt 0 view .LVU1753
 5190 006e 10E0     		b	.L374
 5191              	.LVL638:
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 218


 5192              	.L373:
2876:DRIVER/FatFs/source/ff.c **** 		cf = 0;					/* Next segment may follow */
 5193              		.loc 1 2876 27 is_stmt 1 discriminator 4 view .LVU1754
2876:DRIVER/FatFs/source/ff.c **** 		cf = 0;					/* Next segment may follow */
 5194              		.loc 1 2876 28 is_stmt 0 discriminator 4 view .LVU1755
 5195 0070 0133     		adds	r3, r3, #1
 5196 0072 0393     		str	r3, [sp, #12]
 5197              	.L372:
2876:DRIVER/FatFs/source/ff.c **** 		cf = 0;					/* Next segment may follow */
 5198              		.loc 1 2876 10 is_stmt 1 discriminator 1 view .LVU1756
 5199 0074 039B     		ldr	r3, [sp, #12]
 5200 0076 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 5201 0078 2F2A     		cmp	r2, #47
 5202 007a F9D0     		beq	.L373
2876:DRIVER/FatFs/source/ff.c **** 		cf = 0;					/* Next segment may follow */
 5203              		.loc 1 2876 10 is_stmt 0 discriminator 3 view .LVU1757
 5204 007c 5C2A     		cmp	r2, #92
 5205 007e F7D0     		beq	.L373
2877:DRIVER/FatFs/source/ff.c **** 		if (IsTerminator(*p)) cf = NS_LAST;	/* Ignore terminating separator */
 5206              		.loc 1 2877 3 is_stmt 1 view .LVU1758
 5207              	.LVL639:
2878:DRIVER/FatFs/source/ff.c **** 	}
 5208              		.loc 1 2878 3 view .LVU1759
2878:DRIVER/FatFs/source/ff.c **** 	}
 5209              		.loc 1 2878 6 is_stmt 0 view .LVU1760
 5210 0080 1F2A     		cmp	r2, #31
 5211 0082 02D9     		bls	.L411
2877:DRIVER/FatFs/source/ff.c **** 		if (IsTerminator(*p)) cf = NS_LAST;	/* Ignore terminating separator */
 5212              		.loc 1 2877 6 view .LVU1761
 5213 0084 4FF00008 		mov	r8, #0
 5214 0088 EEE7     		b	.L371
 5215              	.L411:
2878:DRIVER/FatFs/source/ff.c **** 	}
 5216              		.loc 1 2878 28 view .LVU1762
 5217 008a 4FF00408 		mov	r8, #4
 5218 008e EBE7     		b	.L371
 5219              	.LVL640:
 5220              	.L375:
2896:DRIVER/FatFs/source/ff.c **** 	}
 5221              		.loc 1 2896 3 is_stmt 1 view .LVU1763
2896:DRIVER/FatFs/source/ff.c **** 	}
 5222              		.loc 1 2896 5 is_stmt 0 view .LVU1764
 5223 0090 013C     		subs	r4, r4, #1
 5224              	.LVL641:
 5225              	.L374:
2893:DRIVER/FatFs/source/ff.c **** 		wc = lfn[di - 1];
 5226              		.loc 1 2893 9 is_stmt 1 view .LVU1765
 5227 0092 44B1     		cbz	r4, .L376
2894:DRIVER/FatFs/source/ff.c **** 		if (wc != ' ' && wc != '.') break;
 5228              		.loc 1 2894 3 view .LVU1766
2894:DRIVER/FatFs/source/ff.c **** 		if (wc != ' ' && wc != '.') break;
 5229              		.loc 1 2894 11 is_stmt 0 view .LVU1767
 5230 0094 04F10043 		add	r3, r4, #-2147483648
 5231 0098 013B     		subs	r3, r3, #1
2894:DRIVER/FatFs/source/ff.c **** 		if (wc != ' ' && wc != '.') break;
 5232              		.loc 1 2894 6 view .LVU1768
 5233 009a 35F81330 		ldrh	r3, [r5, r3, lsl #1]
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 219


 5234              	.LVL642:
2895:DRIVER/FatFs/source/ff.c **** 		di--;
 5235              		.loc 1 2895 3 is_stmt 1 view .LVU1769
2895:DRIVER/FatFs/source/ff.c **** 		di--;
 5236              		.loc 1 2895 6 is_stmt 0 view .LVU1770
 5237 009e 202B     		cmp	r3, #32
 5238 00a0 F6D0     		beq	.L375
2895:DRIVER/FatFs/source/ff.c **** 		di--;
 5239              		.loc 1 2895 17 discriminator 1 view .LVU1771
 5240 00a2 2E2B     		cmp	r3, #46
 5241 00a4 F4D0     		beq	.L375
 5242              	.LVL643:
 5243              	.L376:
2898:DRIVER/FatFs/source/ff.c **** 	if (di == 0) return FR_INVALID_NAME;	/* Reject null name */
 5244              		.loc 1 2898 2 is_stmt 1 view .LVU1772
2898:DRIVER/FatFs/source/ff.c **** 	if (di == 0) return FR_INVALID_NAME;	/* Reject null name */
 5245              		.loc 1 2898 10 is_stmt 0 view .LVU1773
 5246 00a6 0023     		movs	r3, #0
 5247 00a8 25F81430 		strh	r3, [r5, r4, lsl #1]	@ movhi
2899:DRIVER/FatFs/source/ff.c **** 
 5248              		.loc 1 2899 2 is_stmt 1 view .LVU1774
2899:DRIVER/FatFs/source/ff.c **** 
 5249              		.loc 1 2899 5 is_stmt 0 view .LVU1775
 5250 00ac 14B9     		cbnz	r4, .L378
2899:DRIVER/FatFs/source/ff.c **** 
 5251              		.loc 1 2899 22 view .LVU1776
 5252 00ae 0620     		movs	r0, #6
 5253              	.LVL644:
2899:DRIVER/FatFs/source/ff.c **** 
 5254              		.loc 1 2899 22 view .LVU1777
 5255 00b0 73E0     		b	.L366
 5256              	.LVL645:
 5257              	.L379:
2902:DRIVER/FatFs/source/ff.c **** 	if (si > 0 || lfn[si] == '.') cf |= NS_LOSS | NS_LFN;	/* Is there any leading space or dot? */
 5258              		.loc 1 2902 33 is_stmt 1 discriminator 3 view .LVU1778
 5259 00b2 0133     		adds	r3, r3, #1
 5260              	.LVL646:
 5261              	.L378:
2902:DRIVER/FatFs/source/ff.c **** 	if (si > 0 || lfn[si] == '.') cf |= NS_LOSS | NS_LFN;	/* Is there any leading space or dot? */
 5262              		.loc 1 2902 23 discriminator 1 view .LVU1779
2902:DRIVER/FatFs/source/ff.c **** 	if (si > 0 || lfn[si] == '.') cf |= NS_LOSS | NS_LFN;	/* Is there any leading space or dot? */
 5263              		.loc 1 2902 18 is_stmt 0 discriminator 1 view .LVU1780
 5264 00b4 35F81320 		ldrh	r2, [r5, r3, lsl #1]
2902:DRIVER/FatFs/source/ff.c **** 	if (si > 0 || lfn[si] == '.') cf |= NS_LOSS | NS_LFN;	/* Is there any leading space or dot? */
 5265              		.loc 1 2902 23 discriminator 1 view .LVU1781
 5266 00b8 202A     		cmp	r2, #32
 5267 00ba FAD0     		beq	.L379
2903:DRIVER/FatFs/source/ff.c **** 	while (di > 0 && lfn[di - 1] != '.') di--;	/* Find last dot (di<=si: no extension) */
 5268              		.loc 1 2903 2 is_stmt 1 view .LVU1782
2903:DRIVER/FatFs/source/ff.c **** 	while (di > 0 && lfn[di - 1] != '.') di--;	/* Find last dot (di<=si: no extension) */
 5269              		.loc 1 2903 5 is_stmt 0 view .LVU1783
 5270 00bc 0BB9     		cbnz	r3, .L380
2903:DRIVER/FatFs/source/ff.c **** 	while (di > 0 && lfn[di - 1] != '.') di--;	/* Find last dot (di<=si: no extension) */
 5271              		.loc 1 2903 13 discriminator 2 view .LVU1784
 5272 00be 2E2A     		cmp	r2, #46
 5273 00c0 01D1     		bne	.L382
 5274              	.L380:
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 220


2903:DRIVER/FatFs/source/ff.c **** 	while (di > 0 && lfn[di - 1] != '.') di--;	/* Find last dot (di<=si: no extension) */
 5275              		.loc 1 2903 32 is_stmt 1 discriminator 3 view .LVU1785
2903:DRIVER/FatFs/source/ff.c **** 	while (di > 0 && lfn[di - 1] != '.') di--;	/* Find last dot (di<=si: no extension) */
 5276              		.loc 1 2903 35 is_stmt 0 discriminator 3 view .LVU1786
 5277 00c2 48F00308 		orr	r8, r8, #3
 5278              	.LVL647:
 5279              	.L382:
2904:DRIVER/FatFs/source/ff.c **** 
 5280              		.loc 1 2904 16 is_stmt 1 discriminator 1 view .LVU1787
 5281 00c6 44B1     		cbz	r4, .L383
2904:DRIVER/FatFs/source/ff.c **** 
 5282              		.loc 1 2904 22 is_stmt 0 discriminator 2 view .LVU1788
 5283 00c8 04F10042 		add	r2, r4, #-2147483648
 5284 00cc 013A     		subs	r2, r2, #1
 5285 00ce 35F81220 		ldrh	r2, [r5, r2, lsl #1]
2904:DRIVER/FatFs/source/ff.c **** 
 5286              		.loc 1 2904 16 discriminator 2 view .LVU1789
 5287 00d2 2E2A     		cmp	r2, #46
 5288 00d4 01D0     		beq	.L383
2904:DRIVER/FatFs/source/ff.c **** 
 5289              		.loc 1 2904 39 is_stmt 1 discriminator 3 view .LVU1790
2904:DRIVER/FatFs/source/ff.c **** 
 5290              		.loc 1 2904 41 is_stmt 0 discriminator 3 view .LVU1791
 5291 00d6 013C     		subs	r4, r4, #1
 5292              	.LVL648:
2904:DRIVER/FatFs/source/ff.c **** 
 5293              		.loc 1 2904 41 discriminator 3 view .LVU1792
 5294 00d8 F5E7     		b	.L382
 5295              	.L383:
2906:DRIVER/FatFs/source/ff.c **** 	i = b = 0; ni = 8;
 5296              		.loc 1 2906 2 is_stmt 1 view .LVU1793
 5297 00da 4FF02032 		mov	r2, #538976288
 5298 00de 3A62     		str	r2, [r7, #32]	@ unaligned
 5299 00e0 7A62     		str	r2, [r7, #36]	@ unaligned
 5300 00e2 C7F82720 		str	r2, [r7, #39]	@ unaligned
2907:DRIVER/FatFs/source/ff.c **** 	for (;;) {
 5301              		.loc 1 2907 2 view .LVU1794
 5302              	.LVL649:
2907:DRIVER/FatFs/source/ff.c **** 	for (;;) {
 5303              		.loc 1 2907 13 view .LVU1795
2907:DRIVER/FatFs/source/ff.c **** 	for (;;) {
 5304              		.loc 1 2907 16 is_stmt 0 view .LVU1796
 5305 00e6 4FF0080B 		mov	fp, #8
2907:DRIVER/FatFs/source/ff.c **** 	for (;;) {
 5306              		.loc 1 2907 4 view .LVU1797
 5307 00ea 4FF0000A 		mov	r10, #0
2907:DRIVER/FatFs/source/ff.c **** 	for (;;) {
 5308              		.loc 1 2907 8 view .LVU1798
 5309 00ee CDF800A0 		str	r10, [sp]
 5310              	.LVL650:
 5311              	.L385:
2908:DRIVER/FatFs/source/ff.c **** 		wc = lfn[si++];					/* Get an LFN character */
 5312              		.loc 1 2908 2 is_stmt 1 view .LVU1799
2909:DRIVER/FatFs/source/ff.c **** 		if (wc == 0) break;				/* Break on end of the LFN */
 5313              		.loc 1 2909 3 view .LVU1800
2909:DRIVER/FatFs/source/ff.c **** 		if (wc == 0) break;				/* Break on end of the LFN */
 5314              		.loc 1 2909 14 is_stmt 0 view .LVU1801
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 221


 5315 00f2 03F10109 		add	r9, r3, #1
 5316              	.LVL651:
2909:DRIVER/FatFs/source/ff.c **** 		if (wc == 0) break;				/* Break on end of the LFN */
 5317              		.loc 1 2909 6 view .LVU1802
 5318 00f6 35F81360 		ldrh	r6, [r5, r3, lsl #1]
 5319              	.LVL652:
2910:DRIVER/FatFs/source/ff.c **** 		if (wc == ' ' || (wc == '.' && si != di)) {	/* Remove embedded spaces and dots */
 5320              		.loc 1 2910 3 is_stmt 1 view .LVU1803
2910:DRIVER/FatFs/source/ff.c **** 		if (wc == ' ' || (wc == '.' && si != di)) {	/* Remove embedded spaces and dots */
 5321              		.loc 1 2910 6 is_stmt 0 view .LVU1804
 5322 00fa 56B3     		cbz	r6, .L386
2911:DRIVER/FatFs/source/ff.c **** 			cf |= NS_LOSS | NS_LFN;
 5323              		.loc 1 2911 3 is_stmt 1 view .LVU1805
2911:DRIVER/FatFs/source/ff.c **** 			cf |= NS_LOSS | NS_LFN;
 5324              		.loc 1 2911 6 is_stmt 0 view .LVU1806
 5325 00fc 202E     		cmp	r6, #32
 5326 00fe 1BD0     		beq	.L387
2911:DRIVER/FatFs/source/ff.c **** 			cf |= NS_LOSS | NS_LFN;
 5327              		.loc 1 2911 17 discriminator 2 view .LVU1807
 5328 0100 2E2E     		cmp	r6, #46
 5329 0102 17D0     		beq	.L415
 5330              	.L388:
2916:DRIVER/FatFs/source/ff.c **** 			if (ni == 11) {				/* Name extension overflow? */
 5331              		.loc 1 2916 3 is_stmt 1 view .LVU1808
2916:DRIVER/FatFs/source/ff.c **** 			if (ni == 11) {				/* Name extension overflow? */
 5332              		.loc 1 2916 6 is_stmt 0 view .LVU1809
 5333 0104 DA45     		cmp	r10, fp
 5334 0106 1BD2     		bcs	.L390
2916:DRIVER/FatFs/source/ff.c **** 			if (ni == 11) {				/* Name extension overflow? */
 5335              		.loc 1 2916 15 discriminator 1 view .LVU1810
 5336 0108 4C45     		cmp	r4, r9
 5337 010a 19D0     		beq	.L390
2927:DRIVER/FatFs/source/ff.c **** 			cf |= NS_LFN;	/* LFN entry needs to be created */
 5338              		.loc 1 2927 3 is_stmt 1 view .LVU1811
2927:DRIVER/FatFs/source/ff.c **** 			cf |= NS_LFN;	/* LFN entry needs to be created */
 5339              		.loc 1 2927 6 is_stmt 0 view .LVU1812
 5340 010c 7F2E     		cmp	r6, #127
 5341 010e 54D8     		bhi	.L416
 5342              	.LVL653:
 5343              	.L394:
2951:DRIVER/FatFs/source/ff.c **** 				wc = '_'; cf |= NS_LOSS | NS_LFN;/* Lossy conversion */
 5344              		.loc 1 2951 4 is_stmt 1 view .LVU1813
2951:DRIVER/FatFs/source/ff.c **** 				wc = '_'; cf |= NS_LOSS | NS_LFN;/* Lossy conversion */
 5345              		.loc 1 2951 7 is_stmt 0 view .LVU1814
 5346 0110 2EB1     		cbz	r6, .L398
2951:DRIVER/FatFs/source/ff.c **** 				wc = '_'; cf |= NS_LOSS | NS_LFN;/* Lossy conversion */
 5347              		.loc 1 2951 19 discriminator 1 view .LVU1815
 5348 0112 3146     		mov	r1, r6
 5349 0114 5148     		ldr	r0, .L422+4
 5350 0116 FFF7FEFF 		bl	strchr
 5351              	.LVL654:
2951:DRIVER/FatFs/source/ff.c **** 				wc = '_'; cf |= NS_LOSS | NS_LFN;/* Lossy conversion */
 5352              		.loc 1 2951 16 discriminator 1 view .LVU1816
 5353 011a 0028     		cmp	r0, #0
 5354 011c 79D0     		beq	.L399
 5355              	.L398:
2952:DRIVER/FatFs/source/ff.c **** 			} else {
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 222


 5356              		.loc 1 2952 5 is_stmt 1 view .LVU1817
 5357              	.LVL655:
2952:DRIVER/FatFs/source/ff.c **** 			} else {
 5358              		.loc 1 2952 15 view .LVU1818
2952:DRIVER/FatFs/source/ff.c **** 			} else {
 5359              		.loc 1 2952 18 is_stmt 0 view .LVU1819
 5360 011e 48F00308 		orr	r8, r8, #3
 5361              	.LVL656:
2952:DRIVER/FatFs/source/ff.c **** 			} else {
 5362              		.loc 1 2952 8 view .LVU1820
 5363 0122 5F26     		movs	r6, #95
 5364              	.LVL657:
 5365              	.L397:
2962:DRIVER/FatFs/source/ff.c **** 	}
 5366              		.loc 1 2962 3 is_stmt 1 view .LVU1821
2962:DRIVER/FatFs/source/ff.c **** 	}
 5367              		.loc 1 2962 15 is_stmt 0 view .LVU1822
 5368 0124 07EB0A03 		add	r3, r7, r10
 5369 0128 83F82060 		strb	r6, [r3, #32]
2909:DRIVER/FatFs/source/ff.c **** 		if (wc == 0) break;				/* Break on end of the LFN */
 5370              		.loc 1 2909 14 view .LVU1823
 5371 012c 4B46     		mov	r3, r9
2962:DRIVER/FatFs/source/ff.c **** 	}
 5372              		.loc 1 2962 11 view .LVU1824
 5373 012e 0AF1010A 		add	r10, r10, #1
 5374              	.LVL658:
2962:DRIVER/FatFs/source/ff.c **** 	}
 5375              		.loc 1 2962 11 view .LVU1825
 5376 0132 DEE7     		b	.L385
 5377              	.L415:
2911:DRIVER/FatFs/source/ff.c **** 			cf |= NS_LOSS | NS_LFN;
 5378              		.loc 1 2911 31 discriminator 3 view .LVU1826
 5379 0134 4C45     		cmp	r4, r9
 5380 0136 E5D0     		beq	.L388
 5381              	.L387:
2912:DRIVER/FatFs/source/ff.c **** 			continue;
 5382              		.loc 1 2912 4 is_stmt 1 discriminator 4 view .LVU1827
2912:DRIVER/FatFs/source/ff.c **** 			continue;
 5383              		.loc 1 2912 7 is_stmt 0 discriminator 4 view .LVU1828
 5384 0138 48F00308 		orr	r8, r8, #3
 5385              	.LVL659:
2913:DRIVER/FatFs/source/ff.c **** 		}
 5386              		.loc 1 2913 4 is_stmt 1 discriminator 4 view .LVU1829
2909:DRIVER/FatFs/source/ff.c **** 		if (wc == 0) break;				/* Break on end of the LFN */
 5387              		.loc 1 2909 14 is_stmt 0 discriminator 4 view .LVU1830
 5388 013c 4B46     		mov	r3, r9
2913:DRIVER/FatFs/source/ff.c **** 		}
 5389              		.loc 1 2913 4 discriminator 4 view .LVU1831
 5390 013e D8E7     		b	.L385
 5391              	.L390:
2917:DRIVER/FatFs/source/ff.c **** 				cf |= NS_LOSS | NS_LFN;
 5392              		.loc 1 2917 4 is_stmt 1 view .LVU1832
2917:DRIVER/FatFs/source/ff.c **** 				cf |= NS_LOSS | NS_LFN;
 5393              		.loc 1 2917 7 is_stmt 0 view .LVU1833
 5394 0140 BBF10B0F 		cmp	fp, #11
 5395 0144 2CD0     		beq	.L417
2921:DRIVER/FatFs/source/ff.c **** 			if (si > di) break;						/* No name extension? */
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 223


 5396              		.loc 1 2921 4 is_stmt 1 view .LVU1834
2921:DRIVER/FatFs/source/ff.c **** 			if (si > di) break;						/* No name extension? */
 5397              		.loc 1 2921 7 is_stmt 0 view .LVU1835
 5398 0146 4C45     		cmp	r4, r9
 5399 0148 01D0     		beq	.L393
2921:DRIVER/FatFs/source/ff.c **** 			if (si > di) break;						/* No name extension? */
 5400              		.loc 1 2921 18 is_stmt 1 discriminator 1 view .LVU1836
2921:DRIVER/FatFs/source/ff.c **** 			if (si > di) break;						/* No name extension? */
 5401              		.loc 1 2921 21 is_stmt 0 discriminator 1 view .LVU1837
 5402 014a 48F00308 		orr	r8, r8, #3
 5403              	.LVL660:
 5404              	.L393:
2922:DRIVER/FatFs/source/ff.c **** 			si = di; i = 8; ni = 11; b <<= 2;		/* Enter name extension */
 5405              		.loc 1 2922 4 is_stmt 1 view .LVU1838
2922:DRIVER/FatFs/source/ff.c **** 			si = di; i = 8; ni = 11; b <<= 2;		/* Enter name extension */
 5406              		.loc 1 2922 7 is_stmt 0 view .LVU1839
 5407 014e 4C45     		cmp	r4, r9
 5408 0150 29D2     		bcs	.L418
 5409              	.L386:
2965:DRIVER/FatFs/source/ff.c **** 
 5410              		.loc 1 2965 2 is_stmt 1 view .LVU1840
2965:DRIVER/FatFs/source/ff.c **** 
 5411              		.loc 1 2965 12 is_stmt 0 view .LVU1841
 5412 0152 97F82030 		ldrb	r3, [r7, #32]	@ zero_extendqisi2
2965:DRIVER/FatFs/source/ff.c **** 
 5413              		.loc 1 2965 5 view .LVU1842
 5414 0156 E52B     		cmp	r3, #229
 5415 0158 71D0     		beq	.L419
 5416              	.L401:
2967:DRIVER/FatFs/source/ff.c **** 	if ((b & 0x0C) == 0x0C || (b & 0x03) == 0x03) cf |= NS_LFN;	/* LFN entry needs to be created if co
 5417              		.loc 1 2967 2 is_stmt 1 view .LVU1843
2967:DRIVER/FatFs/source/ff.c **** 	if ((b & 0x0C) == 0x0C || (b & 0x03) == 0x03) cf |= NS_LFN;	/* LFN entry needs to be created if co
 5418              		.loc 1 2967 5 is_stmt 0 view .LVU1844
 5419 015a BBF1080F 		cmp	fp, #8
 5420 015e 72D0     		beq	.L420
 5421              	.L402:
2968:DRIVER/FatFs/source/ff.c **** 	if (!(cf & NS_LFN)) {				/* When LFN is in 8.3 format without extended character, NT flags are cre
 5422              		.loc 1 2968 2 is_stmt 1 view .LVU1845
2968:DRIVER/FatFs/source/ff.c **** 	if (!(cf & NS_LFN)) {				/* When LFN is in 8.3 format without extended character, NT flags are cre
 5423              		.loc 1 2968 5 is_stmt 0 view .LVU1846
 5424 0160 009A     		ldr	r2, [sp]
 5425 0162 02F00C03 		and	r3, r2, #12
 5426 0166 0C2B     		cmp	r3, #12
 5427 0168 03D0     		beq	.L403
2968:DRIVER/FatFs/source/ff.c **** 	if (!(cf & NS_LFN)) {				/* When LFN is in 8.3 format without extended character, NT flags are cre
 5428              		.loc 1 2968 25 discriminator 2 view .LVU1847
 5429 016a 02F00303 		and	r3, r2, #3
 5430 016e 032B     		cmp	r3, #3
 5431 0170 01D1     		bne	.L404
 5432              	.L403:
2968:DRIVER/FatFs/source/ff.c **** 	if (!(cf & NS_LFN)) {				/* When LFN is in 8.3 format without extended character, NT flags are cre
 5433              		.loc 1 2968 48 is_stmt 1 discriminator 3 view .LVU1848
2968:DRIVER/FatFs/source/ff.c **** 	if (!(cf & NS_LFN)) {				/* When LFN is in 8.3 format without extended character, NT flags are cre
 5434              		.loc 1 2968 51 is_stmt 0 discriminator 3 view .LVU1849
 5435 0172 48F00208 		orr	r8, r8, #2
 5436              	.LVL661:
 5437              	.L404:
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 224


2969:DRIVER/FatFs/source/ff.c **** 		if (b & 0x01) cf |= NS_EXT;		/* NT flag (Extension has small capital letters only) */
 5438              		.loc 1 2969 2 is_stmt 1 view .LVU1850
2969:DRIVER/FatFs/source/ff.c **** 		if (b & 0x01) cf |= NS_EXT;		/* NT flag (Extension has small capital letters only) */
 5439              		.loc 1 2969 5 is_stmt 0 view .LVU1851
 5440 0176 18F0020F 		tst	r8, #2
 5441 017a 0BD1     		bne	.L405
2970:DRIVER/FatFs/source/ff.c **** 		if (b & 0x04) cf |= NS_BODY;	/* NT flag (Body has small capital letters only) */
 5442              		.loc 1 2970 3 is_stmt 1 view .LVU1852
2970:DRIVER/FatFs/source/ff.c **** 		if (b & 0x04) cf |= NS_BODY;	/* NT flag (Body has small capital letters only) */
 5443              		.loc 1 2970 6 is_stmt 0 view .LVU1853
 5444 017c 009B     		ldr	r3, [sp]
 5445 017e 13F0010F 		tst	r3, #1
 5446 0182 01D0     		beq	.L406
2970:DRIVER/FatFs/source/ff.c **** 		if (b & 0x04) cf |= NS_BODY;	/* NT flag (Body has small capital letters only) */
 5447              		.loc 1 2970 17 is_stmt 1 discriminator 1 view .LVU1854
2970:DRIVER/FatFs/source/ff.c **** 		if (b & 0x04) cf |= NS_BODY;	/* NT flag (Body has small capital letters only) */
 5448              		.loc 1 2970 20 is_stmt 0 discriminator 1 view .LVU1855
 5449 0184 48F01008 		orr	r8, r8, #16
 5450              	.LVL662:
 5451              	.L406:
2971:DRIVER/FatFs/source/ff.c **** 	}
 5452              		.loc 1 2971 3 is_stmt 1 view .LVU1856
2971:DRIVER/FatFs/source/ff.c **** 	}
 5453              		.loc 1 2971 6 is_stmt 0 view .LVU1857
 5454 0188 009B     		ldr	r3, [sp]
 5455 018a 13F0040F 		tst	r3, #4
 5456 018e 01D0     		beq	.L405
2971:DRIVER/FatFs/source/ff.c **** 	}
 5457              		.loc 1 2971 17 is_stmt 1 discriminator 1 view .LVU1858
2971:DRIVER/FatFs/source/ff.c **** 	}
 5458              		.loc 1 2971 20 is_stmt 0 discriminator 1 view .LVU1859
 5459 0190 48F00808 		orr	r8, r8, #8
 5460              	.LVL663:
 5461              	.L405:
2974:DRIVER/FatFs/source/ff.c **** 
 5462              		.loc 1 2974 2 is_stmt 1 view .LVU1860
2974:DRIVER/FatFs/source/ff.c **** 
 5463              		.loc 1 2974 17 is_stmt 0 view .LVU1861
 5464 0194 87F82B80 		strb	r8, [r7, #43]
2976:DRIVER/FatFs/source/ff.c **** 
 5465              		.loc 1 2976 2 is_stmt 1 view .LVU1862
2976:DRIVER/FatFs/source/ff.c **** 
 5466              		.loc 1 2976 9 is_stmt 0 view .LVU1863
 5467 0198 0020     		movs	r0, #0
 5468              	.LVL664:
 5469              	.L366:
3042:DRIVER/FatFs/source/ff.c **** 
 5470              		.loc 1 3042 1 view .LVU1864
 5471 019a 05B0     		add	sp, sp, #20
 5472              	.LCFI33:
 5473              		.cfi_remember_state
 5474              		.cfi_def_cfa_offset 36
 5475              		@ sp needed
 5476 019c BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 5477              	.LVL665:
 5478              	.L417:
 5479              	.LCFI34:
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 225


 5480              		.cfi_restore_state
2918:DRIVER/FatFs/source/ff.c **** 				break;
 5481              		.loc 1 2918 5 is_stmt 1 view .LVU1865
2918:DRIVER/FatFs/source/ff.c **** 				break;
 5482              		.loc 1 2918 8 is_stmt 0 view .LVU1866
 5483 01a0 48F00308 		orr	r8, r8, #3
 5484              	.LVL666:
2919:DRIVER/FatFs/source/ff.c **** 			}
 5485              		.loc 1 2919 5 is_stmt 1 view .LVU1867
 5486 01a4 D5E7     		b	.L386
 5487              	.L418:
2923:DRIVER/FatFs/source/ff.c **** 			continue;
 5488              		.loc 1 2923 4 view .LVU1868
 5489              	.LVL667:
2923:DRIVER/FatFs/source/ff.c **** 			continue;
 5490              		.loc 1 2923 13 view .LVU1869
2923:DRIVER/FatFs/source/ff.c **** 			continue;
 5491              		.loc 1 2923 20 view .LVU1870
2923:DRIVER/FatFs/source/ff.c **** 			continue;
 5492              		.loc 1 2923 29 view .LVU1871
2923:DRIVER/FatFs/source/ff.c **** 			continue;
 5493              		.loc 1 2923 31 is_stmt 0 view .LVU1872
 5494 01a6 009B     		ldr	r3, [sp]
 5495 01a8 9B00     		lsls	r3, r3, #2
 5496 01aa DBB2     		uxtb	r3, r3
 5497 01ac 0093     		str	r3, [sp]
 5498              	.LVL668:
2924:DRIVER/FatFs/source/ff.c **** 		}
 5499              		.loc 1 2924 4 is_stmt 1 view .LVU1873
2923:DRIVER/FatFs/source/ff.c **** 			continue;
 5500              		.loc 1 2923 7 is_stmt 0 view .LVU1874
 5501 01ae 2346     		mov	r3, r4
2923:DRIVER/FatFs/source/ff.c **** 			continue;
 5502              		.loc 1 2923 23 view .LVU1875
 5503 01b0 4FF00B0B 		mov	fp, #11
2923:DRIVER/FatFs/source/ff.c **** 			continue;
 5504              		.loc 1 2923 15 view .LVU1876
 5505 01b4 4FF0080A 		mov	r10, #8
2924:DRIVER/FatFs/source/ff.c **** 		}
 5506              		.loc 1 2924 4 view .LVU1877
 5507 01b8 9BE7     		b	.L385
 5508              	.LVL669:
 5509              	.L416:
2928:DRIVER/FatFs/source/ff.c **** #if FF_CODE_PAGE == 0
 5510              		.loc 1 2928 4 is_stmt 1 view .LVU1878
2928:DRIVER/FatFs/source/ff.c **** #if FF_CODE_PAGE == 0
 5511              		.loc 1 2928 7 is_stmt 0 view .LVU1879
 5512 01ba 48F00203 		orr	r3, r8, #2
 5513 01be 0193     		str	r3, [sp, #4]
 5514              	.LVL670:
2937:DRIVER/FatFs/source/ff.c **** 			if (wc & 0x80) wc = ExCvt[wc & 0x7F];	/* Convert extended character to upper (SBCS) */
 5515              		.loc 1 2937 4 is_stmt 1 view .LVU1880
2937:DRIVER/FatFs/source/ff.c **** 			if (wc & 0x80) wc = ExCvt[wc & 0x7F];	/* Convert extended character to upper (SBCS) */
 5516              		.loc 1 2937 9 is_stmt 0 view .LVU1881
 5517 01c0 40F2B511 		movw	r1, #437
 5518 01c4 3046     		mov	r0, r6
 5519 01c6 FFF7FEFF 		bl	ff_uni2oem
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 226


 5520              	.LVL671:
 5521 01ca 0646     		mov	r6, r0
 5522              	.LVL672:
2938:DRIVER/FatFs/source/ff.c **** #else						/* In DBCS cfg */
 5523              		.loc 1 2938 4 is_stmt 1 view .LVU1882
2938:DRIVER/FatFs/source/ff.c **** #else						/* In DBCS cfg */
 5524              		.loc 1 2938 7 is_stmt 0 view .LVU1883
 5525 01cc 10F0800F 		tst	r0, #128
 5526 01d0 06D0     		beq	.L395
2938:DRIVER/FatFs/source/ff.c **** #else						/* In DBCS cfg */
 5527              		.loc 1 2938 19 is_stmt 1 discriminator 1 view .LVU1884
2938:DRIVER/FatFs/source/ff.c **** #else						/* In DBCS cfg */
 5528              		.loc 1 2938 33 is_stmt 0 discriminator 1 view .LVU1885
 5529 01d2 00F07F06 		and	r6, r0, #127
2938:DRIVER/FatFs/source/ff.c **** #else						/* In DBCS cfg */
 5530              		.loc 1 2938 29 discriminator 1 view .LVU1886
 5531 01d6 224B     		ldr	r3, .L422+8
 5532 01d8 9E5D     		ldrb	r6, [r3, r6]	@ zero_extendqisi2
 5533              	.LVL673:
2944:DRIVER/FatFs/source/ff.c **** 			if (i >= ni - 1) {			/* Field overflow? */
 5534              		.loc 1 2944 3 is_stmt 1 discriminator 1 view .LVU1887
2928:DRIVER/FatFs/source/ff.c **** #if FF_CODE_PAGE == 0
 5535              		.loc 1 2928 7 is_stmt 0 discriminator 1 view .LVU1888
 5536 01da DDF80480 		ldr	r8, [sp, #4]
 5537 01de 97E7     		b	.L394
 5538              	.LVL674:
 5539              	.L395:
2944:DRIVER/FatFs/source/ff.c **** 			if (i >= ni - 1) {			/* Field overflow? */
 5540              		.loc 1 2944 3 is_stmt 1 view .LVU1889
2944:DRIVER/FatFs/source/ff.c **** 			if (i >= ni - 1) {			/* Field overflow? */
 5541              		.loc 1 2944 6 is_stmt 0 view .LVU1890
 5542 01e0 FF28     		cmp	r0, #255
 5543 01e2 13D9     		bls	.L413
2945:DRIVER/FatFs/source/ff.c **** 				cf |= NS_LOSS | NS_LFN;
 5544              		.loc 1 2945 4 is_stmt 1 view .LVU1891
2945:DRIVER/FatFs/source/ff.c **** 				cf |= NS_LOSS | NS_LFN;
 5545              		.loc 1 2945 16 is_stmt 0 view .LVU1892
 5546 01e4 0BF1FF33 		add	r3, fp, #-1
2945:DRIVER/FatFs/source/ff.c **** 				cf |= NS_LOSS | NS_LFN;
 5547              		.loc 1 2945 7 view .LVU1893
 5548 01e8 5345     		cmp	r3, r10
 5549 01ea 0AD9     		bls	.L421
2949:DRIVER/FatFs/source/ff.c **** 		} else {						/* SBC */
 5550              		.loc 1 2949 4 is_stmt 1 view .LVU1894
 5551              	.LVL675:
2949:DRIVER/FatFs/source/ff.c **** 		} else {						/* SBC */
 5552              		.loc 1 2949 18 is_stmt 0 view .LVU1895
 5553 01ec C0F30723 		ubfx	r3, r0, #8, #8
2949:DRIVER/FatFs/source/ff.c **** 		} else {						/* SBC */
 5554              		.loc 1 2949 16 view .LVU1896
 5555 01f0 07EB0A02 		add	r2, r7, r10
 5556 01f4 82F82030 		strb	r3, [r2, #32]
2949:DRIVER/FatFs/source/ff.c **** 		} else {						/* SBC */
 5557              		.loc 1 2949 12 view .LVU1897
 5558 01f8 0AF1010A 		add	r10, r10, #1
 5559              	.LVL676:
2928:DRIVER/FatFs/source/ff.c **** #if FF_CODE_PAGE == 0
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 227


 5560              		.loc 1 2928 7 view .LVU1898
 5561 01fc DDF80480 		ldr	r8, [sp, #4]
 5562 0200 90E7     		b	.L397
 5563              	.L421:
2946:DRIVER/FatFs/source/ff.c **** 				i = ni; continue;		/* Next field */
 5564              		.loc 1 2946 5 is_stmt 1 discriminator 1 view .LVU1899
2946:DRIVER/FatFs/source/ff.c **** 				i = ni; continue;		/* Next field */
 5565              		.loc 1 2946 8 is_stmt 0 discriminator 1 view .LVU1900
 5566 0202 48F00308 		orr	r8, r8, #3
 5567              	.LVL677:
2947:DRIVER/FatFs/source/ff.c **** 			}
 5568              		.loc 1 2947 5 is_stmt 1 discriminator 1 view .LVU1901
2947:DRIVER/FatFs/source/ff.c **** 			}
 5569              		.loc 1 2947 13 discriminator 1 view .LVU1902
2909:DRIVER/FatFs/source/ff.c **** 		if (wc == 0) break;				/* Break on end of the LFN */
 5570              		.loc 1 2909 14 is_stmt 0 discriminator 1 view .LVU1903
 5571 0206 4B46     		mov	r3, r9
2947:DRIVER/FatFs/source/ff.c **** 			}
 5572              		.loc 1 2947 7 discriminator 1 view .LVU1904
 5573 0208 DA46     		mov	r10, fp
2947:DRIVER/FatFs/source/ff.c **** 			}
 5574              		.loc 1 2947 13 discriminator 1 view .LVU1905
 5575 020a 72E7     		b	.L385
 5576              	.LVL678:
 5577              	.L413:
2928:DRIVER/FatFs/source/ff.c **** #if FF_CODE_PAGE == 0
 5578              		.loc 1 2928 7 view .LVU1906
 5579 020c DDF80480 		ldr	r8, [sp, #4]
 5580 0210 7EE7     		b	.L394
 5581              	.LVL679:
 5582              	.L399:
2954:DRIVER/FatFs/source/ff.c **** 					b |= 2;
 5583              		.loc 1 2954 5 is_stmt 1 view .LVU1907
2954:DRIVER/FatFs/source/ff.c **** 					b |= 2;
 5584              		.loc 1 2954 9 is_stmt 0 view .LVU1908
 5585 0212 A6F14103 		sub	r3, r6, #65
 5586 0216 9BB2     		uxth	r3, r3
2954:DRIVER/FatFs/source/ff.c **** 					b |= 2;
 5587              		.loc 1 2954 8 view .LVU1909
 5588 0218 192B     		cmp	r3, #25
 5589 021a 03D8     		bhi	.L400
2955:DRIVER/FatFs/source/ff.c **** 				}
 5590              		.loc 1 2955 6 is_stmt 1 view .LVU1910
2955:DRIVER/FatFs/source/ff.c **** 				}
 5591              		.loc 1 2955 8 is_stmt 0 view .LVU1911
 5592 021c 009B     		ldr	r3, [sp]
 5593 021e 43F00203 		orr	r3, r3, #2
 5594 0222 0093     		str	r3, [sp]
 5595              	.LVL680:
 5596              	.L400:
2957:DRIVER/FatFs/source/ff.c **** 					b |= 1; wc -= 0x20;
 5597              		.loc 1 2957 5 is_stmt 1 view .LVU1912
2957:DRIVER/FatFs/source/ff.c **** 					b |= 1; wc -= 0x20;
 5598              		.loc 1 2957 9 is_stmt 0 view .LVU1913
 5599 0224 A6F16103 		sub	r3, r6, #97
 5600 0228 9BB2     		uxth	r3, r3
2957:DRIVER/FatFs/source/ff.c **** 					b |= 1; wc -= 0x20;
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 228


 5601              		.loc 1 2957 8 view .LVU1914
 5602 022a 192B     		cmp	r3, #25
 5603 022c 3FF67AAF 		bhi	.L397
2958:DRIVER/FatFs/source/ff.c **** 				}
 5604              		.loc 1 2958 6 is_stmt 1 view .LVU1915
2958:DRIVER/FatFs/source/ff.c **** 				}
 5605              		.loc 1 2958 8 is_stmt 0 view .LVU1916
 5606 0230 009B     		ldr	r3, [sp]
 5607 0232 43F00103 		orr	r3, r3, #1
 5608 0236 0093     		str	r3, [sp]
 5609              	.LVL681:
2958:DRIVER/FatFs/source/ff.c **** 				}
 5610              		.loc 1 2958 14 is_stmt 1 view .LVU1917
2958:DRIVER/FatFs/source/ff.c **** 				}
 5611              		.loc 1 2958 17 is_stmt 0 view .LVU1918
 5612 0238 203E     		subs	r6, r6, #32
 5613 023a B6B2     		uxth	r6, r6
 5614              	.LVL682:
2958:DRIVER/FatFs/source/ff.c **** 				}
 5615              		.loc 1 2958 17 view .LVU1919
 5616 023c 72E7     		b	.L397
 5617              	.LVL683:
 5618              	.L419:
2965:DRIVER/FatFs/source/ff.c **** 
 5619              		.loc 1 2965 25 is_stmt 1 discriminator 1 view .LVU1920
2965:DRIVER/FatFs/source/ff.c **** 
 5620              		.loc 1 2965 35 is_stmt 0 discriminator 1 view .LVU1921
 5621 023e 0523     		movs	r3, #5
 5622 0240 87F82030 		strb	r3, [r7, #32]
 5623 0244 89E7     		b	.L401
 5624              	.L420:
2967:DRIVER/FatFs/source/ff.c **** 	if ((b & 0x0C) == 0x0C || (b & 0x03) == 0x03) cf |= NS_LFN;	/* LFN entry needs to be created if co
 5625              		.loc 1 2967 15 is_stmt 1 discriminator 1 view .LVU1922
2967:DRIVER/FatFs/source/ff.c **** 	if ((b & 0x0C) == 0x0C || (b & 0x03) == 0x03) cf |= NS_LFN;	/* LFN entry needs to be created if co
 5626              		.loc 1 2967 17 is_stmt 0 discriminator 1 view .LVU1923
 5627 0246 009B     		ldr	r3, [sp]
 5628 0248 9B00     		lsls	r3, r3, #2
 5629 024a DBB2     		uxtb	r3, r3
 5630 024c 0093     		str	r3, [sp]
 5631              	.LVL684:
2967:DRIVER/FatFs/source/ff.c **** 	if ((b & 0x0C) == 0x0C || (b & 0x03) == 0x03) cf |= NS_LFN;	/* LFN entry needs to be created if co
 5632              		.loc 1 2967 17 discriminator 1 view .LVU1924
 5633 024e 87E7     		b	.L402
 5634              	.LVL685:
 5635              	.L407:
2865:DRIVER/FatFs/source/ff.c **** 		if (uc >= 0x10000) lfn[di++] = (WCHAR)(uc >> 16);	/* Store high surrogate if needed */
 5636              		.loc 1 2865 32 view .LVU1925
 5637 0250 0620     		movs	r0, #6
 5638              	.LVL686:
2865:DRIVER/FatFs/source/ff.c **** 		if (uc >= 0x10000) lfn[di++] = (WCHAR)(uc >> 16);	/* Store high surrogate if needed */
 5639              		.loc 1 2865 32 view .LVU1926
 5640 0252 A2E7     		b	.L366
 5641              	.LVL687:
 5642              	.L409:
2870:DRIVER/FatFs/source/ff.c **** 		lfn[di++] = wc;				/* Store the Unicode character */
 5643              		.loc 1 2870 32 view .LVU1927
 5644 0254 0620     		movs	r0, #6
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 229


 5645 0256 A0E7     		b	.L366
 5646              	.L423:
 5647              		.align	2
 5648              	.L422:
 5649 0258 00000000 		.word	.LC1
 5650 025c 0C000000 		.word	.LC2
 5651 0260 00000000 		.word	ExCvt
 5652              		.cfi_endproc
 5653              	.LFE32:
 5655              		.section	.text.cmp_lfn,"ax",%progbits
 5656              		.align	1
 5657              		.syntax unified
 5658              		.thumb
 5659              		.thumb_func
 5661              	cmp_lfn:
 5662              	.LVL688:
 5663              	.LFB22:
1889:DRIVER/FatFs/source/ff.c **** 	UINT i, s;
 5664              		.loc 1 1889 1 is_stmt 1 view -0
 5665              		.cfi_startproc
 5666              		@ args = 0, pretend = 0, frame = 0
 5667              		@ frame_needed = 0, uses_anonymous_args = 0
1889:DRIVER/FatFs/source/ff.c **** 	UINT i, s;
 5668              		.loc 1 1889 1 is_stmt 0 view .LVU1929
 5669 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 5670              	.LCFI35:
 5671              		.cfi_def_cfa_offset 32
 5672              		.cfi_offset 4, -32
 5673              		.cfi_offset 5, -28
 5674              		.cfi_offset 6, -24
 5675              		.cfi_offset 7, -20
 5676              		.cfi_offset 8, -16
 5677              		.cfi_offset 9, -12
 5678              		.cfi_offset 10, -8
 5679              		.cfi_offset 14, -4
 5680 0004 8146     		mov	r9, r0
 5681 0006 0F46     		mov	r7, r1
1890:DRIVER/FatFs/source/ff.c **** 	WCHAR wc, uc;
 5682              		.loc 1 1890 2 is_stmt 1 view .LVU1930
1891:DRIVER/FatFs/source/ff.c **** 
 5683              		.loc 1 1891 2 view .LVU1931
1894:DRIVER/FatFs/source/ff.c **** 
 5684              		.loc 1 1894 2 view .LVU1932
1894:DRIVER/FatFs/source/ff.c **** 
 5685              		.loc 1 1894 6 is_stmt 0 view .LVU1933
 5686 0008 01F11A00 		add	r0, r1, #26
 5687              	.LVL689:
1894:DRIVER/FatFs/source/ff.c **** 
 5688              		.loc 1 1894 6 view .LVU1934
 5689 000c FFF7FEFF 		bl	ld_word
 5690              	.LVL690:
1894:DRIVER/FatFs/source/ff.c **** 
 5691              		.loc 1 1894 5 view .LVU1935
 5692 0010 C8BB     		cbnz	r0, .L431
1896:DRIVER/FatFs/source/ff.c **** 
 5693              		.loc 1 1896 2 is_stmt 1 view .LVU1936
1896:DRIVER/FatFs/source/ff.c **** 
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 230


 5694              		.loc 1 1896 11 is_stmt 0 view .LVU1937
 5695 0012 3E78     		ldrb	r6, [r7]	@ zero_extendqisi2
1896:DRIVER/FatFs/source/ff.c **** 
 5696              		.loc 1 1896 22 view .LVU1938
 5697 0014 06F03F06 		and	r6, r6, #63
1896:DRIVER/FatFs/source/ff.c **** 
 5698              		.loc 1 1896 30 view .LVU1939
 5699 0018 013E     		subs	r6, r6, #1
1896:DRIVER/FatFs/source/ff.c **** 
 5700              		.loc 1 1896 35 view .LVU1940
 5701 001a 06EB4603 		add	r3, r6, r6, lsl #1
1896:DRIVER/FatFs/source/ff.c **** 
 5702              		.loc 1 1896 4 view .LVU1941
 5703 001e 06EB8306 		add	r6, r6, r3, lsl #2
 5704              	.LVL691:
1898:DRIVER/FatFs/source/ff.c **** 		uc = ld_word(dir + LfnOfs[s]);		/* Pick an LFN character */
 5705              		.loc 1 1898 2 is_stmt 1 view .LVU1942
1898:DRIVER/FatFs/source/ff.c **** 		uc = ld_word(dir + LfnOfs[s]);		/* Pick an LFN character */
 5706              		.loc 1 1898 10 is_stmt 0 view .LVU1943
 5707 0022 4FF00108 		mov	r8, #1
1898:DRIVER/FatFs/source/ff.c **** 		uc = ld_word(dir + LfnOfs[s]);		/* Pick an LFN character */
 5708              		.loc 1 1898 17 view .LVU1944
 5709 0026 0025     		movs	r5, #0
1898:DRIVER/FatFs/source/ff.c **** 		uc = ld_word(dir + LfnOfs[s]);		/* Pick an LFN character */
 5710              		.loc 1 1898 2 view .LVU1945
 5711 0028 06E0     		b	.L426
 5712              	.LVL692:
 5713              	.L428:
1902:DRIVER/FatFs/source/ff.c **** 			}
 5714              		.loc 1 1902 5 is_stmt 1 view .LVU1946
1902:DRIVER/FatFs/source/ff.c **** 			}
 5715              		.loc 1 1902 12 is_stmt 0 view .LVU1947
 5716 002a 0020     		movs	r0, #0
 5717 002c 2CE0     		b	.L424
 5718              	.LVL693:
 5719              	.L427:
1906:DRIVER/FatFs/source/ff.c **** 		}
 5720              		.loc 1 1906 4 is_stmt 1 view .LVU1948
1906:DRIVER/FatFs/source/ff.c **** 		}
 5721              		.loc 1 1906 7 is_stmt 0 view .LVU1949
 5722 002e 4FF6FF73 		movw	r3, #65535
 5723 0032 9842     		cmp	r0, r3
 5724 0034 2AD1     		bne	.L438
 5725              	.LVL694:
 5726              	.L429:
1898:DRIVER/FatFs/source/ff.c **** 		uc = ld_word(dir + LfnOfs[s]);		/* Pick an LFN character */
 5727              		.loc 1 1898 31 is_stmt 1 discriminator 2 view .LVU1950
 5728 0036 0135     		adds	r5, r5, #1
 5729              	.LVL695:
 5730              	.L426:
1898:DRIVER/FatFs/source/ff.c **** 		uc = ld_word(dir + LfnOfs[s]);		/* Pick an LFN character */
 5731              		.loc 1 1898 24 discriminator 1 view .LVU1951
 5732 0038 0C2D     		cmp	r5, #12
 5733 003a 18D8     		bhi	.L439
1899:DRIVER/FatFs/source/ff.c **** 		if (wc != 0) {
 5734              		.loc 1 1899 3 view .LVU1952
1899:DRIVER/FatFs/source/ff.c **** 		if (wc != 0) {
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 231


 5735              		.loc 1 1899 28 is_stmt 0 view .LVU1953
 5736 003c 174B     		ldr	r3, .L440
 5737 003e 585D     		ldrb	r0, [r3, r5]	@ zero_extendqisi2
1899:DRIVER/FatFs/source/ff.c **** 		if (wc != 0) {
 5738              		.loc 1 1899 8 view .LVU1954
 5739 0040 3844     		add	r0, r0, r7
 5740 0042 FFF7FEFF 		bl	ld_word
 5741              	.LVL696:
 5742 0046 0446     		mov	r4, r0
 5743              	.LVL697:
1900:DRIVER/FatFs/source/ff.c **** 			if (i >= FF_MAX_LFN + 1 || ff_wtoupper(uc) != ff_wtoupper(lfnbuf[i++])) {	/* Compare it */
 5744              		.loc 1 1900 3 is_stmt 1 view .LVU1955
1900:DRIVER/FatFs/source/ff.c **** 			if (i >= FF_MAX_LFN + 1 || ff_wtoupper(uc) != ff_wtoupper(lfnbuf[i++])) {	/* Compare it */
 5745              		.loc 1 1900 6 is_stmt 0 view .LVU1956
 5746 0048 B8F1000F 		cmp	r8, #0
 5747 004c EFD0     		beq	.L427
1901:DRIVER/FatFs/source/ff.c **** 				return 0;					/* Not matched */
 5748              		.loc 1 1901 4 is_stmt 1 view .LVU1957
1901:DRIVER/FatFs/source/ff.c **** 				return 0;					/* Not matched */
 5749              		.loc 1 1901 7 is_stmt 0 view .LVU1958
 5750 004e FF2E     		cmp	r6, #255
 5751 0050 EBD8     		bhi	.L428
1901:DRIVER/FatFs/source/ff.c **** 				return 0;					/* Not matched */
 5752              		.loc 1 1901 31 discriminator 1 view .LVU1959
 5753 0052 FFF7FEFF 		bl	ff_wtoupper
 5754              	.LVL698:
1901:DRIVER/FatFs/source/ff.c **** 				return 0;					/* Not matched */
 5755              		.loc 1 1901 31 discriminator 1 view .LVU1960
 5756 0056 8046     		mov	r8, r0
 5757              	.LVL699:
1901:DRIVER/FatFs/source/ff.c **** 				return 0;					/* Not matched */
 5758              		.loc 1 1901 70 discriminator 1 view .LVU1961
 5759 0058 06F1010A 		add	r10, r6, #1
 5760              	.LVL700:
1901:DRIVER/FatFs/source/ff.c **** 				return 0;					/* Not matched */
 5761              		.loc 1 1901 50 discriminator 1 view .LVU1962
 5762 005c 39F81600 		ldrh	r0, [r9, r6, lsl #1]
 5763 0060 FFF7FEFF 		bl	ff_wtoupper
 5764              	.LVL701:
1901:DRIVER/FatFs/source/ff.c **** 				return 0;					/* Not matched */
 5765              		.loc 1 1901 28 discriminator 1 view .LVU1963
 5766 0064 8045     		cmp	r8, r0
 5767 0066 E0D1     		bne	.L428
1904:DRIVER/FatFs/source/ff.c **** 		} else {
 5768              		.loc 1 1904 7 view .LVU1964
 5769 0068 A046     		mov	r8, r4
1901:DRIVER/FatFs/source/ff.c **** 				return 0;					/* Not matched */
 5770              		.loc 1 1901 70 view .LVU1965
 5771 006a 5646     		mov	r6, r10
 5772 006c E3E7     		b	.L429
 5773              	.LVL702:
 5774              	.L439:
1910:DRIVER/FatFs/source/ff.c **** 
 5775              		.loc 1 1910 2 is_stmt 1 view .LVU1966
1910:DRIVER/FatFs/source/ff.c **** 
 5776              		.loc 1 1910 10 is_stmt 0 view .LVU1967
 5777 006e 3B78     		ldrb	r3, [r7]	@ zero_extendqisi2
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 232


1910:DRIVER/FatFs/source/ff.c **** 
 5778              		.loc 1 1910 5 view .LVU1968
 5779 0070 13F0400F 		tst	r3, #64
 5780 0074 0CD0     		beq	.L434
1910:DRIVER/FatFs/source/ff.c **** 
 5781              		.loc 1 1910 29 discriminator 1 view .LVU1969
 5782 0076 B8F1000F 		cmp	r8, #0
 5783 007a 0BD0     		beq	.L435
1910:DRIVER/FatFs/source/ff.c **** 
 5784              		.loc 1 1910 44 discriminator 2 view .LVU1970
 5785 007c 39F81630 		ldrh	r3, [r9, r6, lsl #1]
1910:DRIVER/FatFs/source/ff.c **** 
 5786              		.loc 1 1910 35 discriminator 2 view .LVU1971
 5787 0080 53B9     		cbnz	r3, .L436
1912:DRIVER/FatFs/source/ff.c **** }
 5788              		.loc 1 1912 9 view .LVU1972
 5789 0082 0120     		movs	r0, #1
 5790 0084 00E0     		b	.L424
 5791              	.LVL703:
 5792              	.L431:
1894:DRIVER/FatFs/source/ff.c **** 
 5793              		.loc 1 1894 49 view .LVU1973
 5794 0086 0020     		movs	r0, #0
 5795              	.L424:
1913:DRIVER/FatFs/source/ff.c **** 
 5796              		.loc 1 1913 1 view .LVU1974
 5797 0088 BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 5798              	.LVL704:
 5799              	.L438:
1906:DRIVER/FatFs/source/ff.c **** 		}
 5800              		.loc 1 1906 29 view .LVU1975
 5801 008c 0020     		movs	r0, #0
 5802              	.LVL705:
1906:DRIVER/FatFs/source/ff.c **** 		}
 5803              		.loc 1 1906 29 view .LVU1976
 5804 008e FBE7     		b	.L424
 5805              	.LVL706:
 5806              	.L434:
1912:DRIVER/FatFs/source/ff.c **** }
 5807              		.loc 1 1912 9 view .LVU1977
 5808 0090 0120     		movs	r0, #1
 5809 0092 F9E7     		b	.L424
 5810              	.L435:
 5811 0094 0120     		movs	r0, #1
 5812 0096 F7E7     		b	.L424
 5813              	.L436:
1910:DRIVER/FatFs/source/ff.c **** 
 5814              		.loc 1 1910 56 view .LVU1978
 5815 0098 0020     		movs	r0, #0
 5816 009a F5E7     		b	.L424
 5817              	.L441:
 5818              		.align	2
 5819              	.L440:
 5820 009c 00000000 		.word	LfnOfs
 5821              		.cfi_endproc
 5822              	.LFE22:
 5824              		.section	.text.dir_find,"ax",%progbits
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 233


 5825              		.align	1
 5826              		.syntax unified
 5827              		.thumb
 5828              		.thumb_func
 5830              	dir_find:
 5831              	.LVL707:
 5832              	.LFB28:
2387:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
 5833              		.loc 1 2387 1 is_stmt 1 view -0
 5834              		.cfi_startproc
 5835              		@ args = 0, pretend = 0, frame = 0
 5836              		@ frame_needed = 0, uses_anonymous_args = 0
2387:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
 5837              		.loc 1 2387 1 is_stmt 0 view .LVU1980
 5838 0000 2DE9F843 		push	{r3, r4, r5, r6, r7, r8, r9, lr}
 5839              	.LCFI36:
 5840              		.cfi_def_cfa_offset 32
 5841              		.cfi_offset 3, -32
 5842              		.cfi_offset 4, -28
 5843              		.cfi_offset 5, -24
 5844              		.cfi_offset 6, -20
 5845              		.cfi_offset 7, -16
 5846              		.cfi_offset 8, -12
 5847              		.cfi_offset 9, -8
 5848              		.cfi_offset 14, -4
 5849 0004 0446     		mov	r4, r0
2388:DRIVER/FatFs/source/ff.c **** 	FATFS *fs = dp->obj.fs;
 5850              		.loc 1 2388 2 is_stmt 1 view .LVU1981
2389:DRIVER/FatFs/source/ff.c **** 	BYTE c;
 5851              		.loc 1 2389 2 view .LVU1982
2389:DRIVER/FatFs/source/ff.c **** 	BYTE c;
 5852              		.loc 1 2389 9 is_stmt 0 view .LVU1983
 5853 0006 D0F80080 		ldr	r8, [r0]
 5854              	.LVL708:
2390:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN
 5855              		.loc 1 2390 2 is_stmt 1 view .LVU1984
2392:DRIVER/FatFs/source/ff.c **** #endif
 5856              		.loc 1 2392 2 view .LVU1985
2395:DRIVER/FatFs/source/ff.c **** 	if (res != FR_OK) return res;
 5857              		.loc 1 2395 2 view .LVU1986
2395:DRIVER/FatFs/source/ff.c **** 	if (res != FR_OK) return res;
 5858              		.loc 1 2395 8 is_stmt 0 view .LVU1987
 5859 000a 0021     		movs	r1, #0
 5860 000c FFF7FEFF 		bl	dir_sdi
 5861              	.LVL709:
2396:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
 5862              		.loc 1 2396 2 is_stmt 1 view .LVU1988
2396:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
 5863              		.loc 1 2396 5 is_stmt 0 view .LVU1989
 5864 0010 0646     		mov	r6, r0
 5865 0012 0028     		cmp	r0, #0
 5866 0014 64D1     		bne	.L443
2419:DRIVER/FatFs/source/ff.c **** #endif
 5867              		.loc 1 2419 2 is_stmt 1 view .LVU1990
 5868              	.LVL710:
2419:DRIVER/FatFs/source/ff.c **** #endif
 5869              		.loc 1 2419 20 view .LVU1991
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 234


2419:DRIVER/FatFs/source/ff.c **** #endif
 5870              		.loc 1 2419 32 is_stmt 0 view .LVU1992
 5871 0016 4FF0FF33 		mov	r3, #-1
 5872 001a E362     		str	r3, [r4, #44]
2419:DRIVER/FatFs/source/ff.c **** #endif
 5873              		.loc 1 2419 12 view .LVU1993
 5874 001c 4FF0FF09 		mov	r9, #255
2419:DRIVER/FatFs/source/ff.c **** #endif
 5875              		.loc 1 2419 6 view .LVU1994
 5876 0020 4F46     		mov	r7, r9
 5877 0022 0AE0     		b	.L452
 5878              	.LVL711:
 5879              	.L444:
2429:DRIVER/FatFs/source/ff.c **** 		} else {
 5880              		.loc 1 2429 4 is_stmt 1 view .LVU1995
2429:DRIVER/FatFs/source/ff.c **** 		} else {
 5881              		.loc 1 2429 16 view .LVU1996
2429:DRIVER/FatFs/source/ff.c **** 		} else {
 5882              		.loc 1 2429 28 is_stmt 0 view .LVU1997
 5883 0024 4FF0FF33 		mov	r3, #-1
 5884              	.LVL712:
2429:DRIVER/FatFs/source/ff.c **** 		} else {
 5885              		.loc 1 2429 28 view .LVU1998
 5886 0028 E362     		str	r3, [r4, #44]
2429:DRIVER/FatFs/source/ff.c **** 		} else {
 5887              		.loc 1 2429 8 view .LVU1999
 5888 002a FF27     		movs	r7, #255
 5889              	.LVL713:
 5890              	.L447:
2451:DRIVER/FatFs/source/ff.c **** 	} while (res == FR_OK);
 5891              		.loc 1 2451 3 is_stmt 1 view .LVU2000
2451:DRIVER/FatFs/source/ff.c **** 	} while (res == FR_OK);
 5892              		.loc 1 2451 9 is_stmt 0 view .LVU2001
 5893 002c 0021     		movs	r1, #0
 5894 002e 2046     		mov	r0, r4
 5895 0030 FFF7FEFF 		bl	dir_next
 5896              	.LVL714:
2452:DRIVER/FatFs/source/ff.c **** 
 5897              		.loc 1 2452 15 is_stmt 1 view .LVU2002
 5898 0034 0646     		mov	r6, r0
 5899 0036 0028     		cmp	r0, #0
 5900 0038 52D1     		bne	.L443
 5901              	.LVL715:
 5902              	.L452:
2421:DRIVER/FatFs/source/ff.c **** 		res = move_window(fs, dp->sect);
 5903              		.loc 1 2421 2 view .LVU2003
2422:DRIVER/FatFs/source/ff.c **** 		if (res != FR_OK) break;
 5904              		.loc 1 2422 3 view .LVU2004
2422:DRIVER/FatFs/source/ff.c **** 		if (res != FR_OK) break;
 5905              		.loc 1 2422 9 is_stmt 0 view .LVU2005
 5906 003a A169     		ldr	r1, [r4, #24]
 5907 003c 4046     		mov	r0, r8
 5908              	.LVL716:
2422:DRIVER/FatFs/source/ff.c **** 		if (res != FR_OK) break;
 5909              		.loc 1 2422 9 view .LVU2006
 5910 003e FFF7FEFF 		bl	move_window
 5911              	.LVL717:
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 235


2423:DRIVER/FatFs/source/ff.c **** 		c = dp->dir[DIR_Name];
 5912              		.loc 1 2423 3 is_stmt 1 view .LVU2007
2423:DRIVER/FatFs/source/ff.c **** 		c = dp->dir[DIR_Name];
 5913              		.loc 1 2423 6 is_stmt 0 view .LVU2008
 5914 0042 0646     		mov	r6, r0
 5915 0044 0028     		cmp	r0, #0
 5916 0046 4BD1     		bne	.L443
2424:DRIVER/FatFs/source/ff.c **** 		if (c == 0) { res = FR_NO_FILE; break; }	/* Reached to end of table */
 5917              		.loc 1 2424 3 is_stmt 1 view .LVU2009
2424:DRIVER/FatFs/source/ff.c **** 		if (c == 0) { res = FR_NO_FILE; break; }	/* Reached to end of table */
 5918              		.loc 1 2424 9 is_stmt 0 view .LVU2010
 5919 0048 E569     		ldr	r5, [r4, #28]
2424:DRIVER/FatFs/source/ff.c **** 		if (c == 0) { res = FR_NO_FILE; break; }	/* Reached to end of table */
 5920              		.loc 1 2424 5 view .LVU2011
 5921 004a 2B78     		ldrb	r3, [r5]	@ zero_extendqisi2
 5922              	.LVL718:
2425:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN		/* LFN configuration */
 5923              		.loc 1 2425 3 is_stmt 1 view .LVU2012
2425:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN		/* LFN configuration */
 5924              		.loc 1 2425 6 is_stmt 0 view .LVU2013
 5925 004c 002B     		cmp	r3, #0
 5926 004e 46D0     		beq	.L453
2427:DRIVER/FatFs/source/ff.c **** 		if (c == DDEM || ((a & AM_VOL) && a != AM_LFN)) {	/* An entry without valid data */
 5927              		.loc 1 2427 3 is_stmt 1 view .LVU2014
2427:DRIVER/FatFs/source/ff.c **** 		if (c == DDEM || ((a & AM_VOL) && a != AM_LFN)) {	/* An entry without valid data */
 5928              		.loc 1 2427 29 is_stmt 0 view .LVU2015
 5929 0050 EA7A     		ldrb	r2, [r5, #11]	@ zero_extendqisi2
2427:DRIVER/FatFs/source/ff.c **** 		if (c == DDEM || ((a & AM_VOL) && a != AM_LFN)) {	/* An entry without valid data */
 5930              		.loc 1 2427 20 view .LVU2016
 5931 0052 02F03F01 		and	r1, r2, #63
 5932              	.LVL719:
2427:DRIVER/FatFs/source/ff.c **** 		if (c == DDEM || ((a & AM_VOL) && a != AM_LFN)) {	/* An entry without valid data */
 5933              		.loc 1 2427 16 view .LVU2017
 5934 0056 A171     		strb	r1, [r4, #6]
2428:DRIVER/FatFs/source/ff.c **** 			ord = 0xFF; dp->blk_ofs = 0xFFFFFFFF;	/* Reset LFN sequence */
 5935              		.loc 1 2428 3 is_stmt 1 view .LVU2018
2428:DRIVER/FatFs/source/ff.c **** 			ord = 0xFF; dp->blk_ofs = 0xFFFFFFFF;	/* Reset LFN sequence */
 5936              		.loc 1 2428 6 is_stmt 0 view .LVU2019
 5937 0058 E52B     		cmp	r3, #229
 5938 005a E3D0     		beq	.L444
2428:DRIVER/FatFs/source/ff.c **** 			ord = 0xFF; dp->blk_ofs = 0xFFFFFFFF;	/* Reset LFN sequence */
 5939              		.loc 1 2428 17 discriminator 1 view .LVU2020
 5940 005c 12F0080F 		tst	r2, #8
 5941 0060 14D0     		beq	.L445
2428:DRIVER/FatFs/source/ff.c **** 			ord = 0xFF; dp->blk_ofs = 0xFFFFFFFF;	/* Reset LFN sequence */
 5942              		.loc 1 2428 34 discriminator 2 view .LVU2021
 5943 0062 0F29     		cmp	r1, #15
 5944 0064 DED1     		bne	.L444
 5945              	.L446:
2432:DRIVER/FatFs/source/ff.c **** 					if (c & LLEF) {		/* Is it start of LFN sequence? */
 5946              		.loc 1 2432 5 is_stmt 1 view .LVU2022
2432:DRIVER/FatFs/source/ff.c **** 					if (c & LLEF) {		/* Is it start of LFN sequence? */
 5947              		.loc 1 2432 17 is_stmt 0 view .LVU2023
 5948 0066 94F82B20 		ldrb	r2, [r4, #43]	@ zero_extendqisi2
2432:DRIVER/FatFs/source/ff.c **** 					if (c & LLEF) {		/* Is it start of LFN sequence? */
 5949              		.loc 1 2432 8 view .LVU2024
 5950 006a 12F0400F 		tst	r2, #64
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 236


 5951 006e DDD1     		bne	.L447
2433:DRIVER/FatFs/source/ff.c **** 						sum = dp->dir[LDIR_Chksum];
 5952              		.loc 1 2433 6 is_stmt 1 view .LVU2025
2433:DRIVER/FatFs/source/ff.c **** 						sum = dp->dir[LDIR_Chksum];
 5953              		.loc 1 2433 9 is_stmt 0 view .LVU2026
 5954 0070 13F0400F 		tst	r3, #64
 5955 0074 06D0     		beq	.L449
2434:DRIVER/FatFs/source/ff.c **** 						c &= (BYTE)~LLEF; ord = c;	/* LFN start order */
 5956              		.loc 1 2434 7 is_stmt 1 view .LVU2027
2434:DRIVER/FatFs/source/ff.c **** 						c &= (BYTE)~LLEF; ord = c;	/* LFN start order */
 5957              		.loc 1 2434 11 is_stmt 0 view .LVU2028
 5958 0076 95F80D90 		ldrb	r9, [r5, #13]	@ zero_extendqisi2
 5959              	.LVL720:
2435:DRIVER/FatFs/source/ff.c **** 						dp->blk_ofs = dp->dptr;	/* Start offset of LFN */
 5960              		.loc 1 2435 7 is_stmt 1 view .LVU2029
2435:DRIVER/FatFs/source/ff.c **** 						dp->blk_ofs = dp->dptr;	/* Start offset of LFN */
 5961              		.loc 1 2435 9 is_stmt 0 view .LVU2030
 5962 007a 03F0BF03 		and	r3, r3, #191
 5963              	.LVL721:
2435:DRIVER/FatFs/source/ff.c **** 						dp->blk_ofs = dp->dptr;	/* Start offset of LFN */
 5964              		.loc 1 2435 25 is_stmt 1 view .LVU2031
2436:DRIVER/FatFs/source/ff.c **** 					}
 5965              		.loc 1 2436 7 view .LVU2032
2436:DRIVER/FatFs/source/ff.c **** 					}
 5966              		.loc 1 2436 23 is_stmt 0 view .LVU2033
 5967 007e 2269     		ldr	r2, [r4, #16]
2436:DRIVER/FatFs/source/ff.c **** 					}
 5968              		.loc 1 2436 19 view .LVU2034
 5969 0080 E262     		str	r2, [r4, #44]
2435:DRIVER/FatFs/source/ff.c **** 						dp->blk_ofs = dp->dptr;	/* Start offset of LFN */
 5970              		.loc 1 2435 29 view .LVU2035
 5971 0082 1F46     		mov	r7, r3
 5972              	.LVL722:
 5973              	.L449:
2439:DRIVER/FatFs/source/ff.c **** 				}
 5974              		.loc 1 2439 6 is_stmt 1 view .LVU2036
2439:DRIVER/FatFs/source/ff.c **** 				}
 5975              		.loc 1 2439 10 is_stmt 0 view .LVU2037
 5976 0084 BB42     		cmp	r3, r7
 5977 0086 1AD0     		beq	.L458
2439:DRIVER/FatFs/source/ff.c **** 				}
 5978              		.loc 1 2439 10 view .LVU2038
 5979 0088 FF27     		movs	r7, #255
 5980              	.LVL723:
2439:DRIVER/FatFs/source/ff.c **** 				}
 5981              		.loc 1 2439 10 view .LVU2039
 5982 008a CFE7     		b	.L447
 5983              	.LVL724:
 5984              	.L445:
2431:DRIVER/FatFs/source/ff.c **** 				if (!(dp->fn[NSFLAG] & NS_NOLFN)) {
 5985              		.loc 1 2431 4 is_stmt 1 view .LVU2040
2431:DRIVER/FatFs/source/ff.c **** 				if (!(dp->fn[NSFLAG] & NS_NOLFN)) {
 5986              		.loc 1 2431 7 is_stmt 0 view .LVU2041
 5987 008c 0F29     		cmp	r1, #15
 5988 008e EAD0     		beq	.L446
2442:DRIVER/FatFs/source/ff.c **** 				if (!(dp->fn[NSFLAG] & NS_LOSS) && !memcmp(dp->dir, dp->fn, 11)) break;	/* SFN matched? */
 5989              		.loc 1 2442 5 is_stmt 1 view .LVU2042
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 237


2442:DRIVER/FatFs/source/ff.c **** 				if (!(dp->fn[NSFLAG] & NS_LOSS) && !memcmp(dp->dir, dp->fn, 11)) break;	/* SFN matched? */
 5990              		.loc 1 2442 8 is_stmt 0 view .LVU2043
 5991 0090 27B9     		cbnz	r7, .L450
2442:DRIVER/FatFs/source/ff.c **** 				if (!(dp->fn[NSFLAG] & NS_LOSS) && !memcmp(dp->dir, dp->fn, 11)) break;	/* SFN matched? */
 5992              		.loc 1 2442 28 discriminator 1 view .LVU2044
 5993 0092 2846     		mov	r0, r5
 5994              	.LVL725:
2442:DRIVER/FatFs/source/ff.c **** 				if (!(dp->fn[NSFLAG] & NS_LOSS) && !memcmp(dp->dir, dp->fn, 11)) break;	/* SFN matched? */
 5995              		.loc 1 2442 28 discriminator 1 view .LVU2045
 5996 0094 FFF7FEFF 		bl	sum_sfn
 5997              	.LVL726:
2442:DRIVER/FatFs/source/ff.c **** 				if (!(dp->fn[NSFLAG] & NS_LOSS) && !memcmp(dp->dir, dp->fn, 11)) break;	/* SFN matched? */
 5998              		.loc 1 2442 18 discriminator 1 view .LVU2046
 5999 0098 4845     		cmp	r0, r9
 6000 009a 21D0     		beq	.L443
 6001              	.L450:
2443:DRIVER/FatFs/source/ff.c **** 				ord = 0xFF; dp->blk_ofs = 0xFFFFFFFF;	/* Reset LFN sequence */
 6002              		.loc 1 2443 5 is_stmt 1 view .LVU2047
2443:DRIVER/FatFs/source/ff.c **** 				ord = 0xFF; dp->blk_ofs = 0xFFFFFFFF;	/* Reset LFN sequence */
 6003              		.loc 1 2443 17 is_stmt 0 view .LVU2048
 6004 009c 94F82B30 		ldrb	r3, [r4, #43]	@ zero_extendqisi2
2443:DRIVER/FatFs/source/ff.c **** 				ord = 0xFF; dp->blk_ofs = 0xFFFFFFFF;	/* Reset LFN sequence */
 6005              		.loc 1 2443 8 view .LVU2049
 6006 00a0 13F0010F 		tst	r3, #1
 6007 00a4 06D1     		bne	.L451
2443:DRIVER/FatFs/source/ff.c **** 				ord = 0xFF; dp->blk_ofs = 0xFFFFFFFF;	/* Reset LFN sequence */
 6008              		.loc 1 2443 41 discriminator 1 view .LVU2050
 6009 00a6 0B22     		movs	r2, #11
 6010 00a8 04F12001 		add	r1, r4, #32
 6011 00ac 2846     		mov	r0, r5
 6012 00ae FFF7FEFF 		bl	memcmp
 6013              	.LVL727:
2443:DRIVER/FatFs/source/ff.c **** 				ord = 0xFF; dp->blk_ofs = 0xFFFFFFFF;	/* Reset LFN sequence */
 6014              		.loc 1 2443 37 discriminator 1 view .LVU2051
 6015 00b2 A8B1     		cbz	r0, .L443
 6016              	.L451:
2444:DRIVER/FatFs/source/ff.c **** 			}
 6017              		.loc 1 2444 5 is_stmt 1 view .LVU2052
 6018              	.LVL728:
2444:DRIVER/FatFs/source/ff.c **** 			}
 6019              		.loc 1 2444 17 view .LVU2053
2444:DRIVER/FatFs/source/ff.c **** 			}
 6020              		.loc 1 2444 29 is_stmt 0 view .LVU2054
 6021 00b4 4FF0FF33 		mov	r3, #-1
 6022 00b8 E362     		str	r3, [r4, #44]
2444:DRIVER/FatFs/source/ff.c **** 			}
 6023              		.loc 1 2444 9 view .LVU2055
 6024 00ba FF27     		movs	r7, #255
 6025 00bc B6E7     		b	.L447
 6026              	.LVL729:
 6027              	.L458:
2439:DRIVER/FatFs/source/ff.c **** 				}
 6028              		.loc 1 2439 39 discriminator 1 view .LVU2056
 6029 00be 6B7B     		ldrb	r3, [r5, #13]	@ zero_extendqisi2
 6030              	.LVL730:
2439:DRIVER/FatFs/source/ff.c **** 				}
 6031              		.loc 1 2439 22 discriminator 1 view .LVU2057
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 238


 6032 00c0 4B45     		cmp	r3, r9
 6033 00c2 01D0     		beq	.L459
2439:DRIVER/FatFs/source/ff.c **** 				}
 6034              		.loc 1 2439 10 view .LVU2058
 6035 00c4 FF27     		movs	r7, #255
 6036              	.LVL731:
2439:DRIVER/FatFs/source/ff.c **** 				}
 6037              		.loc 1 2439 10 view .LVU2059
 6038 00c6 B1E7     		b	.L447
 6039              	.LVL732:
 6040              	.L459:
2439:DRIVER/FatFs/source/ff.c **** 				}
 6041              		.loc 1 2439 56 discriminator 3 view .LVU2060
 6042 00c8 2946     		mov	r1, r5
 6043              	.LVL733:
2439:DRIVER/FatFs/source/ff.c **** 				}
 6044              		.loc 1 2439 56 discriminator 3 view .LVU2061
 6045 00ca D8F81000 		ldr	r0, [r8, #16]
 6046              	.LVL734:
2439:DRIVER/FatFs/source/ff.c **** 				}
 6047              		.loc 1 2439 56 discriminator 3 view .LVU2062
 6048 00ce FFF7FEFF 		bl	cmp_lfn
 6049              	.LVL735:
2439:DRIVER/FatFs/source/ff.c **** 				}
 6050              		.loc 1 2439 53 discriminator 3 view .LVU2063
 6051 00d2 10B1     		cbz	r0, .L456
2439:DRIVER/FatFs/source/ff.c **** 				}
 6052              		.loc 1 2439 10 discriminator 5 view .LVU2064
 6053 00d4 013F     		subs	r7, r7, #1
 6054              	.LVL736:
2439:DRIVER/FatFs/source/ff.c **** 				}
 6055              		.loc 1 2439 10 discriminator 5 view .LVU2065
 6056 00d6 FFB2     		uxtb	r7, r7
 6057 00d8 A8E7     		b	.L447
 6058              	.LVL737:
 6059              	.L456:
2439:DRIVER/FatFs/source/ff.c **** 				}
 6060              		.loc 1 2439 10 view .LVU2066
 6061 00da FF27     		movs	r7, #255
 6062              	.LVL738:
2439:DRIVER/FatFs/source/ff.c **** 				}
 6063              		.loc 1 2439 10 view .LVU2067
 6064 00dc A6E7     		b	.L447
 6065              	.LVL739:
 6066              	.L453:
2425:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN		/* LFN configuration */
 6067              		.loc 1 2425 21 view .LVU2068
 6068 00de 0426     		movs	r6, #4
 6069              	.LVL740:
 6070              	.L443:
2455:DRIVER/FatFs/source/ff.c **** 
 6071              		.loc 1 2455 1 view .LVU2069
 6072 00e0 3046     		mov	r0, r6
 6073 00e2 BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
2455:DRIVER/FatFs/source/ff.c **** 
 6074              		.loc 1 2455 1 view .LVU2070
 6075              		.cfi_endproc
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 239


 6076              	.LFE28:
 6078              		.section	.text.follow_path,"ax",%progbits
 6079              		.align	1
 6080              		.syntax unified
 6081              		.thumb
 6082              		.thumb_func
 6084              	follow_path:
 6085              	.LVL741:
 6086              	.LFB33:
3055:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
 6087              		.loc 1 3055 1 is_stmt 1 view -0
 6088              		.cfi_startproc
 6089              		@ args = 0, pretend = 0, frame = 8
 6090              		@ frame_needed = 0, uses_anonymous_args = 0
3055:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
 6091              		.loc 1 3055 1 is_stmt 0 view .LVU2072
 6092 0000 30B5     		push	{r4, r5, lr}
 6093              	.LCFI37:
 6094              		.cfi_def_cfa_offset 12
 6095              		.cfi_offset 4, -12
 6096              		.cfi_offset 5, -8
 6097              		.cfi_offset 14, -4
 6098 0002 83B0     		sub	sp, sp, #12
 6099              	.LCFI38:
 6100              		.cfi_def_cfa_offset 24
 6101 0004 0446     		mov	r4, r0
 6102 0006 0191     		str	r1, [sp, #4]
3056:DRIVER/FatFs/source/ff.c **** 	BYTE ns;
 6103              		.loc 1 3056 2 is_stmt 1 view .LVU2073
3057:DRIVER/FatFs/source/ff.c **** 	FATFS *fs = dp->obj.fs;
 6104              		.loc 1 3057 2 view .LVU2074
3058:DRIVER/FatFs/source/ff.c **** 
 6105              		.loc 1 3058 2 view .LVU2075
3058:DRIVER/FatFs/source/ff.c **** 
 6106              		.loc 1 3058 9 is_stmt 0 view .LVU2076
 6107 0008 0568     		ldr	r5, [r0]
 6108              	.LVL742:
3067:DRIVER/FatFs/source/ff.c **** 		dp->obj.sclust = 0;					/* Start from the root directory */
 6109              		.loc 1 3067 3 is_stmt 1 view .LVU2077
3067:DRIVER/FatFs/source/ff.c **** 		dp->obj.sclust = 0;					/* Start from the root directory */
 6110              		.loc 1 3067 9 is_stmt 0 view .LVU2078
 6111 000a 01E0     		b	.L461
 6112              	.L462:
3067:DRIVER/FatFs/source/ff.c **** 		dp->obj.sclust = 0;					/* Start from the root directory */
 6113              		.loc 1 3067 30 is_stmt 1 discriminator 4 view .LVU2079
3067:DRIVER/FatFs/source/ff.c **** 		dp->obj.sclust = 0;					/* Start from the root directory */
 6114              		.loc 1 3067 34 is_stmt 0 discriminator 4 view .LVU2080
 6115 000c 0133     		adds	r3, r3, #1
 6116 000e 0193     		str	r3, [sp, #4]
 6117              	.L461:
3067:DRIVER/FatFs/source/ff.c **** 		dp->obj.sclust = 0;					/* Start from the root directory */
 6118              		.loc 1 3067 10 is_stmt 1 discriminator 1 view .LVU2081
 6119 0010 019B     		ldr	r3, [sp, #4]
 6120 0012 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 6121 0014 2F2A     		cmp	r2, #47
 6122 0016 F9D0     		beq	.L462
3067:DRIVER/FatFs/source/ff.c **** 		dp->obj.sclust = 0;					/* Start from the root directory */
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 240


 6123              		.loc 1 3067 10 is_stmt 0 discriminator 3 view .LVU2082
 6124 0018 5C2A     		cmp	r2, #92
 6125 001a F7D0     		beq	.L462
3068:DRIVER/FatFs/source/ff.c **** 	}
 6126              		.loc 1 3068 3 is_stmt 1 view .LVU2083
3068:DRIVER/FatFs/source/ff.c **** 	}
 6127              		.loc 1 3068 18 is_stmt 0 view .LVU2084
 6128 001c 0022     		movs	r2, #0
 6129 001e A260     		str	r2, [r4, #8]
3087:DRIVER/FatFs/source/ff.c **** 		dp->fn[NSFLAG] = NS_NONAME;
 6130              		.loc 1 3087 2 is_stmt 1 view .LVU2085
3087:DRIVER/FatFs/source/ff.c **** 		dp->fn[NSFLAG] = NS_NONAME;
 6131              		.loc 1 3087 12 is_stmt 0 view .LVU2086
 6132 0020 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
3087:DRIVER/FatFs/source/ff.c **** 		dp->fn[NSFLAG] = NS_NONAME;
 6133              		.loc 1 3087 5 view .LVU2087
 6134 0022 1F2B     		cmp	r3, #31
 6135 0024 21D9     		bls	.L469
 6136              	.LVL743:
 6137              	.L463:
3092:DRIVER/FatFs/source/ff.c **** 			res = create_name(dp, &path);	/* Get a segment name of the path */
 6138              		.loc 1 3092 3 is_stmt 1 view .LVU2088
3093:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) break;
 6139              		.loc 1 3093 4 view .LVU2089
3093:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) break;
 6140              		.loc 1 3093 10 is_stmt 0 view .LVU2090
 6141 0026 01A9     		add	r1, sp, #4
 6142 0028 2046     		mov	r0, r4
 6143 002a FFF7FEFF 		bl	create_name
 6144              	.LVL744:
3094:DRIVER/FatFs/source/ff.c **** 			res = dir_find(dp);				/* Find an object with the segment name */
 6145              		.loc 1 3094 4 is_stmt 1 view .LVU2091
3094:DRIVER/FatFs/source/ff.c **** 			res = dir_find(dp);				/* Find an object with the segment name */
 6146              		.loc 1 3094 7 is_stmt 0 view .LVU2092
 6147 002e 0346     		mov	r3, r0
 6148 0030 18BB     		cbnz	r0, .L464
3095:DRIVER/FatFs/source/ff.c **** 			ns = dp->fn[NSFLAG];
 6149              		.loc 1 3095 4 is_stmt 1 view .LVU2093
3095:DRIVER/FatFs/source/ff.c **** 			ns = dp->fn[NSFLAG];
 6150              		.loc 1 3095 10 is_stmt 0 view .LVU2094
 6151 0032 2046     		mov	r0, r4
 6152              	.LVL745:
3095:DRIVER/FatFs/source/ff.c **** 			ns = dp->fn[NSFLAG];
 6153              		.loc 1 3095 10 view .LVU2095
 6154 0034 FFF7FEFF 		bl	dir_find
 6155              	.LVL746:
3096:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) {				/* Failed to find the object */
 6156              		.loc 1 3096 4 is_stmt 1 view .LVU2096
3096:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) {				/* Failed to find the object */
 6157              		.loc 1 3096 7 is_stmt 0 view .LVU2097
 6158 0038 94F82B20 		ldrb	r2, [r4, #43]	@ zero_extendqisi2
 6159              	.LVL747:
3097:DRIVER/FatFs/source/ff.c **** 				if (res == FR_NO_FILE) {	/* Object is not found */
 6160              		.loc 1 3097 4 is_stmt 1 view .LVU2098
3097:DRIVER/FatFs/source/ff.c **** 				if (res == FR_NO_FILE) {	/* Object is not found */
 6161              		.loc 1 3097 7 is_stmt 0 view .LVU2099
 6162 003c 0346     		mov	r3, r0
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 241


 6163 003e F8B9     		cbnz	r0, .L470
3109:DRIVER/FatFs/source/ff.c **** 			/* Get into the sub-directory */
 6164              		.loc 1 3109 4 is_stmt 1 view .LVU2100
3109:DRIVER/FatFs/source/ff.c **** 			/* Get into the sub-directory */
 6165              		.loc 1 3109 7 is_stmt 0 view .LVU2101
 6166 0040 12F0040F 		tst	r2, #4
 6167 0044 19D1     		bne	.L464
3111:DRIVER/FatFs/source/ff.c **** 				res = FR_NO_PATH; break;
 6168              		.loc 1 3111 4 is_stmt 1 view .LVU2102
3111:DRIVER/FatFs/source/ff.c **** 				res = FR_NO_PATH; break;
 6169              		.loc 1 3111 17 is_stmt 0 view .LVU2103
 6170 0046 A379     		ldrb	r3, [r4, #6]	@ zero_extendqisi2
3111:DRIVER/FatFs/source/ff.c **** 				res = FR_NO_PATH; break;
 6171              		.loc 1 3111 7 view .LVU2104
 6172 0048 13F0100F 		tst	r3, #16
 6173 004c 1FD0     		beq	.L467
3123:DRIVER/FatFs/source/ff.c **** 			}
 6174              		.loc 1 3123 5 is_stmt 1 view .LVU2105
3123:DRIVER/FatFs/source/ff.c **** 			}
 6175              		.loc 1 3123 35 is_stmt 0 view .LVU2106
 6176 004e 05F13801 		add	r1, r5, #56
3123:DRIVER/FatFs/source/ff.c **** 			}
 6177              		.loc 1 3123 47 view .LVU2107
 6178 0052 2369     		ldr	r3, [r4, #16]
3123:DRIVER/FatFs/source/ff.c **** 			}
 6179              		.loc 1 3123 56 view .LVU2108
 6180 0054 AA89     		ldrh	r2, [r5, #12]
 6181              	.LVL748:
3123:DRIVER/FatFs/source/ff.c **** 			}
 6182              		.loc 1 3123 54 view .LVU2109
 6183 0056 B3FBF2F0 		udiv	r0, r3, r2
 6184              	.LVL749:
3123:DRIVER/FatFs/source/ff.c **** 			}
 6185              		.loc 1 3123 54 view .LVU2110
 6186 005a 02FB1033 		mls	r3, r2, r0, r3
3123:DRIVER/FatFs/source/ff.c **** 			}
 6187              		.loc 1 3123 22 view .LVU2111
 6188 005e 1944     		add	r1, r1, r3
 6189 0060 2846     		mov	r0, r5
 6190 0062 FFF7FEFF 		bl	ld_clust
 6191              	.LVL750:
3123:DRIVER/FatFs/source/ff.c **** 			}
 6192              		.loc 1 3123 20 view .LVU2112
 6193 0066 A060     		str	r0, [r4, #8]
3092:DRIVER/FatFs/source/ff.c **** 			res = create_name(dp, &path);	/* Get a segment name of the path */
 6194              		.loc 1 3092 3 is_stmt 1 view .LVU2113
3093:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) break;
 6195              		.loc 1 3093 8 is_stmt 0 view .LVU2114
 6196 0068 DDE7     		b	.L463
 6197              	.LVL751:
 6198              	.L469:
3088:DRIVER/FatFs/source/ff.c **** 		res = dir_sdi(dp, 0);
 6199              		.loc 1 3088 3 is_stmt 1 view .LVU2115
3088:DRIVER/FatFs/source/ff.c **** 		res = dir_sdi(dp, 0);
 6200              		.loc 1 3088 18 is_stmt 0 view .LVU2116
 6201 006a 8023     		movs	r3, #128
 6202 006c 84F82B30 		strb	r3, [r4, #43]
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 242


3089:DRIVER/FatFs/source/ff.c **** 
 6203              		.loc 1 3089 3 is_stmt 1 view .LVU2117
3089:DRIVER/FatFs/source/ff.c **** 
 6204              		.loc 1 3089 9 is_stmt 0 view .LVU2118
 6205 0070 1146     		mov	r1, r2
 6206              	.LVL752:
3089:DRIVER/FatFs/source/ff.c **** 
 6207              		.loc 1 3089 9 view .LVU2119
 6208 0072 2046     		mov	r0, r4
 6209              	.LVL753:
3089:DRIVER/FatFs/source/ff.c **** 
 6210              		.loc 1 3089 9 view .LVU2120
 6211 0074 FFF7FEFF 		bl	dir_sdi
 6212              	.LVL754:
 6213 0078 0346     		mov	r3, r0
 6214              	.LVL755:
 6215              	.L464:
3128:DRIVER/FatFs/source/ff.c **** }
 6216              		.loc 1 3128 2 is_stmt 1 view .LVU2121
3129:DRIVER/FatFs/source/ff.c **** 
 6217              		.loc 1 3129 1 is_stmt 0 view .LVU2122
 6218 007a 1846     		mov	r0, r3
 6219 007c 03B0     		add	sp, sp, #12
 6220              	.LCFI39:
 6221              		.cfi_remember_state
 6222              		.cfi_def_cfa_offset 12
 6223              		@ sp needed
 6224 007e 30BD     		pop	{r4, r5, pc}
 6225              	.LVL756:
 6226              	.L470:
 6227              	.LCFI40:
 6228              		.cfi_restore_state
3098:DRIVER/FatFs/source/ff.c **** 					if (FF_FS_RPATH && (ns & NS_DOT)) {	/* If dot entry is not exist, stay there */
 6229              		.loc 1 3098 5 is_stmt 1 view .LVU2123
3098:DRIVER/FatFs/source/ff.c **** 					if (FF_FS_RPATH && (ns & NS_DOT)) {	/* If dot entry is not exist, stay there */
 6230              		.loc 1 3098 8 is_stmt 0 view .LVU2124
 6231 0080 0428     		cmp	r0, #4
 6232 0082 FAD1     		bne	.L464
3099:DRIVER/FatFs/source/ff.c **** 						if (!(ns & NS_LAST)) continue;	/* Continue to follow if not last segment */
 6233              		.loc 1 3099 6 is_stmt 1 view .LVU2125
3104:DRIVER/FatFs/source/ff.c **** 					}
 6234              		.loc 1 3104 7 view .LVU2126
3104:DRIVER/FatFs/source/ff.c **** 					}
 6235              		.loc 1 3104 10 is_stmt 0 view .LVU2127
 6236 0084 12F0040F 		tst	r2, #4
 6237 0088 F7D1     		bne	.L464
3104:DRIVER/FatFs/source/ff.c **** 					}
 6238              		.loc 1 3104 32 view .LVU2128
 6239 008a 0523     		movs	r3, #5
 6240 008c F5E7     		b	.L464
 6241              	.L467:
3112:DRIVER/FatFs/source/ff.c **** 			}
 6242              		.loc 1 3112 9 view .LVU2129
 6243 008e 0523     		movs	r3, #5
 6244 0090 F3E7     		b	.L464
 6245              		.cfi_endproc
 6246              	.LFE33:
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 243


 6248              		.section	.text.gen_numname,"ax",%progbits
 6249              		.align	1
 6250              		.syntax unified
 6251              		.thumb
 6252              		.thumb_func
 6254              	gen_numname:
 6255              	.LVL757:
 6256              	.LFB25:
2002:DRIVER/FatFs/source/ff.c **** 	BYTE ns[8], c;
 6257              		.loc 1 2002 1 is_stmt 1 view -0
 6258              		.cfi_startproc
 6259              		@ args = 0, pretend = 0, frame = 8
 6260              		@ frame_needed = 0, uses_anonymous_args = 0
2002:DRIVER/FatFs/source/ff.c **** 	BYTE ns[8], c;
 6261              		.loc 1 2002 1 is_stmt 0 view .LVU2131
 6262 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 6263              	.LCFI41:
 6264              		.cfi_def_cfa_offset 20
 6265              		.cfi_offset 4, -20
 6266              		.cfi_offset 5, -16
 6267              		.cfi_offset 6, -12
 6268              		.cfi_offset 7, -8
 6269              		.cfi_offset 14, -4
 6270 0002 83B0     		sub	sp, sp, #12
 6271              	.LCFI42:
 6272              		.cfi_def_cfa_offset 32
 6273 0004 0646     		mov	r6, r0
2003:DRIVER/FatFs/source/ff.c **** 	UINT i, j;
 6274              		.loc 1 2003 2 is_stmt 1 view .LVU2132
2004:DRIVER/FatFs/source/ff.c **** 	WCHAR wc;
 6275              		.loc 1 2004 2 view .LVU2133
2005:DRIVER/FatFs/source/ff.c **** 	DWORD sreg;
 6276              		.loc 1 2005 2 view .LVU2134
2006:DRIVER/FatFs/source/ff.c **** 
 6277              		.loc 1 2006 2 view .LVU2135
2009:DRIVER/FatFs/source/ff.c **** 
 6278              		.loc 1 2009 2 view .LVU2136
 6279 0006 0C68     		ldr	r4, [r1]	@ unaligned
 6280 0008 4868     		ldr	r0, [r1, #4]	@ unaligned
 6281              	.LVL758:
2009:DRIVER/FatFs/source/ff.c **** 
 6282              		.loc 1 2009 2 is_stmt 0 view .LVU2137
 6283 000a 3460     		str	r4, [r6]	@ unaligned
 6284 000c 7060     		str	r0, [r6, #4]	@ unaligned
 6285 000e 0889     		ldrh	r0, [r1, #8]	@ unaligned
 6286 0010 897A     		ldrb	r1, [r1, #10]	@ zero_extendqisi2
 6287              	.LVL759:
2009:DRIVER/FatFs/source/ff.c **** 
 6288              		.loc 1 2009 2 view .LVU2138
 6289 0012 3081     		strh	r0, [r6, #8]	@ unaligned
 6290 0014 B172     		strb	r1, [r6, #10]
2011:DRIVER/FatFs/source/ff.c **** 		sreg = seq;
 6291              		.loc 1 2011 2 is_stmt 1 view .LVU2139
2011:DRIVER/FatFs/source/ff.c **** 		sreg = seq;
 6292              		.loc 1 2011 5 is_stmt 0 view .LVU2140
 6293 0016 052B     		cmp	r3, #5
 6294 0018 13D8     		bhi	.L472
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 244


 6295              	.LVL760:
 6296              	.L473:
2015:DRIVER/FatFs/source/ff.c **** 				sreg = (sreg << 1) + (wc & 1);
 6297              		.loc 1 2015 11 view .LVU2141
 6298 001a 0727     		movs	r7, #7
 6299 001c 22E0     		b	.L480
 6300              	.LVL761:
 6301              	.L475:
2015:DRIVER/FatFs/source/ff.c **** 				sreg = (sreg << 1) + (wc & 1);
 6302              		.loc 1 2015 25 is_stmt 1 discriminator 2 view .LVU2142
 6303 001e 0CF1010C 		add	ip, ip, #1
 6304              	.LVL762:
 6305              	.L474:
2015:DRIVER/FatFs/source/ff.c **** 				sreg = (sreg << 1) + (wc & 1);
 6306              		.loc 1 2015 18 discriminator 1 view .LVU2143
 6307 0022 BCF10F0F 		cmp	ip, #15
 6308 0026 0CD8     		bhi	.L472
2016:DRIVER/FatFs/source/ff.c **** 				wc >>= 1;
 6309              		.loc 1 2016 5 view .LVU2144
2016:DRIVER/FatFs/source/ff.c **** 				wc >>= 1;
 6310              		.loc 1 2016 30 is_stmt 0 view .LVU2145
 6311 0028 01F0010E 		and	lr, r1, #1
2016:DRIVER/FatFs/source/ff.c **** 				wc >>= 1;
 6312              		.loc 1 2016 10 view .LVU2146
 6313 002c 0EEB4303 		add	r3, lr, r3, lsl #1
 6314              	.LVL763:
2017:DRIVER/FatFs/source/ff.c **** 				if (sreg & 0x10000) sreg ^= 0x11021;
 6315              		.loc 1 2017 5 is_stmt 1 view .LVU2147
2017:DRIVER/FatFs/source/ff.c **** 				if (sreg & 0x10000) sreg ^= 0x11021;
 6316              		.loc 1 2017 8 is_stmt 0 view .LVU2148
 6317 0030 4908     		lsrs	r1, r1, #1
 6318              	.LVL764:
2018:DRIVER/FatFs/source/ff.c **** 			}
 6319              		.loc 1 2018 5 is_stmt 1 view .LVU2149
2018:DRIVER/FatFs/source/ff.c **** 			}
 6320              		.loc 1 2018 8 is_stmt 0 view .LVU2150
 6321 0032 13F4803F 		tst	r3, #65536
 6322 0036 F2D0     		beq	.L475
2018:DRIVER/FatFs/source/ff.c **** 			}
 6323              		.loc 1 2018 25 is_stmt 1 discriminator 1 view .LVU2151
2018:DRIVER/FatFs/source/ff.c **** 			}
 6324              		.loc 1 2018 30 is_stmt 0 discriminator 1 view .LVU2152
 6325 0038 83F48833 		eor	r3, r3, #69632
 6326              	.LVL765:
2018:DRIVER/FatFs/source/ff.c **** 			}
 6327              		.loc 1 2018 30 discriminator 1 view .LVU2153
 6328 003c 83F02103 		eor	r3, r3, #33
 6329              	.LVL766:
2018:DRIVER/FatFs/source/ff.c **** 			}
 6330              		.loc 1 2018 30 discriminator 1 view .LVU2154
 6331 0040 EDE7     		b	.L475
 6332              	.LVL767:
 6333              	.L472:
2013:DRIVER/FatFs/source/ff.c **** 			wc = *lfn++;
 6334              		.loc 1 2013 10 is_stmt 1 view .LVU2155
 6335 0042 1188     		ldrh	r1, [r2]
 6336 0044 0029     		cmp	r1, #0
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 245


 6337 0046 E8D0     		beq	.L473
2014:DRIVER/FatFs/source/ff.c **** 			for (i = 0; i < 16; i++) {
 6338              		.loc 1 2014 4 view .LVU2156
2014:DRIVER/FatFs/source/ff.c **** 			for (i = 0; i < 16; i++) {
 6339              		.loc 1 2014 13 is_stmt 0 view .LVU2157
 6340 0048 0232     		adds	r2, r2, #2
 6341              	.LVL768:
2015:DRIVER/FatFs/source/ff.c **** 				sreg = (sreg << 1) + (wc & 1);
 6342              		.loc 1 2015 4 is_stmt 1 view .LVU2158
2015:DRIVER/FatFs/source/ff.c **** 				sreg = (sreg << 1) + (wc & 1);
 6343              		.loc 1 2015 11 is_stmt 0 view .LVU2159
 6344 004a 4FF0000C 		mov	ip, #0
2015:DRIVER/FatFs/source/ff.c **** 				sreg = (sreg << 1) + (wc & 1);
 6345              		.loc 1 2015 4 view .LVU2160
 6346 004e E8E7     		b	.L474
 6347              	.LVL769:
 6348              	.L478:
2029:DRIVER/FatFs/source/ff.c **** 	} while (i && seq);
 6349              		.loc 1 2029 3 is_stmt 1 view .LVU2161
2029:DRIVER/FatFs/source/ff.c **** 	} while (i && seq);
 6350              		.loc 1 2029 11 is_stmt 0 view .LVU2162
 6351 0050 07F10801 		add	r1, r7, #8
 6352 0054 6944     		add	r1, sp, r1
 6353 0056 01F8082C 		strb	r2, [r1, #-8]
2030:DRIVER/FatFs/source/ff.c **** 	ns[i] = '~';
 6354              		.loc 1 2030 13 is_stmt 1 view .LVU2163
 6355 005a 7D1E     		subs	r5, r7, #1
 6356              	.LVL770:
2030:DRIVER/FatFs/source/ff.c **** 	ns[i] = '~';
 6357              		.loc 1 2030 13 is_stmt 0 view .LVU2164
 6358 005c 0DD0     		beq	.L479
2030:DRIVER/FatFs/source/ff.c **** 	ns[i] = '~';
 6359              		.loc 1 2030 13 discriminator 1 view .LVU2165
 6360 005e 0F28     		cmp	r0, #15
 6361 0060 0BD9     		bls	.L479
2029:DRIVER/FatFs/source/ff.c **** 	} while (i && seq);
 6362              		.loc 1 2029 7 view .LVU2166
 6363 0062 2F46     		mov	r7, r5
 6364              	.LVL771:
 6365              	.L480:
2026:DRIVER/FatFs/source/ff.c **** 		c = (BYTE)((seq % 16) + '0'); seq /= 16;
 6366              		.loc 1 2026 2 is_stmt 1 view .LVU2167
2027:DRIVER/FatFs/source/ff.c **** 		if (c > '9') c += 7;
 6367              		.loc 1 2027 3 view .LVU2168
2027:DRIVER/FatFs/source/ff.c **** 		if (c > '9') c += 7;
 6368              		.loc 1 2027 7 is_stmt 0 view .LVU2169
 6369 0064 03F00F01 		and	r1, r3, #15
2027:DRIVER/FatFs/source/ff.c **** 		if (c > '9') c += 7;
 6370              		.loc 1 2027 5 view .LVU2170
 6371 0068 01F13002 		add	r2, r1, #48
 6372              	.LVL772:
2027:DRIVER/FatFs/source/ff.c **** 		if (c > '9') c += 7;
 6373              		.loc 1 2027 33 is_stmt 1 view .LVU2171
 6374 006c 1846     		mov	r0, r3
2027:DRIVER/FatFs/source/ff.c **** 		if (c > '9') c += 7;
 6375              		.loc 1 2027 37 is_stmt 0 view .LVU2172
 6376 006e 1B09     		lsrs	r3, r3, #4
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 246


 6377              	.LVL773:
2028:DRIVER/FatFs/source/ff.c **** 		ns[i--] = c;
 6378              		.loc 1 2028 3 is_stmt 1 view .LVU2173
2028:DRIVER/FatFs/source/ff.c **** 		ns[i--] = c;
 6379              		.loc 1 2028 6 is_stmt 0 view .LVU2174
 6380 0070 392A     		cmp	r2, #57
 6381 0072 EDD9     		bls	.L478
2028:DRIVER/FatFs/source/ff.c **** 		ns[i--] = c;
 6382              		.loc 1 2028 16 is_stmt 1 discriminator 1 view .LVU2175
2028:DRIVER/FatFs/source/ff.c **** 		ns[i--] = c;
 6383              		.loc 1 2028 18 is_stmt 0 discriminator 1 view .LVU2176
 6384 0074 01F13702 		add	r2, r1, #55
 6385              	.LVL774:
2028:DRIVER/FatFs/source/ff.c **** 		ns[i--] = c;
 6386              		.loc 1 2028 18 discriminator 1 view .LVU2177
 6387 0078 EAE7     		b	.L478
 6388              	.LVL775:
 6389              	.L479:
2031:DRIVER/FatFs/source/ff.c **** 
 6390              		.loc 1 2031 2 is_stmt 1 view .LVU2178
2031:DRIVER/FatFs/source/ff.c **** 
 6391              		.loc 1 2031 8 is_stmt 0 view .LVU2179
 6392 007a 7E22     		movs	r2, #126
 6393              	.LVL776:
2031:DRIVER/FatFs/source/ff.c **** 
 6394              		.loc 1 2031 8 view .LVU2180
 6395 007c 05F10803 		add	r3, r5, #8
 6396              	.LVL777:
2031:DRIVER/FatFs/source/ff.c **** 
 6397              		.loc 1 2031 8 view .LVU2181
 6398 0080 6B44     		add	r3, sp, r3
 6399 0082 03F8082C 		strb	r2, [r3, #-8]
 6400              	.LVL778:
2034:DRIVER/FatFs/source/ff.c **** 		if (dbc_1st(dst[j])) {	/* To avoid DBC break up */
 6401              		.loc 1 2034 2 is_stmt 1 view .LVU2182
2034:DRIVER/FatFs/source/ff.c **** 		if (dbc_1st(dst[j])) {	/* To avoid DBC break up */
 6402              		.loc 1 2034 9 is_stmt 0 view .LVU2183
 6403 0086 0024     		movs	r4, #0
2034:DRIVER/FatFs/source/ff.c **** 		if (dbc_1st(dst[j])) {	/* To avoid DBC break up */
 6404              		.loc 1 2034 2 view .LVU2184
 6405 0088 00E0     		b	.L481
 6406              	.LVL779:
 6407              	.L482:
2034:DRIVER/FatFs/source/ff.c **** 		if (dbc_1st(dst[j])) {	/* To avoid DBC break up */
 6408              		.loc 1 2034 39 is_stmt 1 discriminator 2 view .LVU2185
 6409 008a 0134     		adds	r4, r4, #1
 6410              	.LVL780:
 6411              	.L481:
2034:DRIVER/FatFs/source/ff.c **** 		if (dbc_1st(dst[j])) {	/* To avoid DBC break up */
 6412              		.loc 1 2034 20 discriminator 1 view .LVU2186
 6413 008c AC42     		cmp	r4, r5
 6414 008e 11D2     		bcs	.L486
2034:DRIVER/FatFs/source/ff.c **** 		if (dbc_1st(dst[j])) {	/* To avoid DBC break up */
 6415              		.loc 1 2034 26 is_stmt 0 discriminator 3 view .LVU2187
 6416 0090 305D     		ldrb	r0, [r6, r4]	@ zero_extendqisi2
2034:DRIVER/FatFs/source/ff.c **** 		if (dbc_1st(dst[j])) {	/* To avoid DBC break up */
 6417              		.loc 1 2034 20 discriminator 3 view .LVU2188
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 247


 6418 0092 2028     		cmp	r0, #32
 6419 0094 0ED0     		beq	.L486
2035:DRIVER/FatFs/source/ff.c **** 			if (j == i - 1) break;
 6420              		.loc 1 2035 3 is_stmt 1 view .LVU2189
2035:DRIVER/FatFs/source/ff.c **** 			if (j == i - 1) break;
 6421              		.loc 1 2035 7 is_stmt 0 view .LVU2190
 6422 0096 FFF7FEFF 		bl	dbc_1st
 6423              	.LVL781:
2035:DRIVER/FatFs/source/ff.c **** 			if (j == i - 1) break;
 6424              		.loc 1 2035 6 view .LVU2191
 6425 009a 0028     		cmp	r0, #0
 6426 009c F5D0     		beq	.L482
2036:DRIVER/FatFs/source/ff.c **** 			j++;
 6427              		.loc 1 2036 4 is_stmt 1 view .LVU2192
2036:DRIVER/FatFs/source/ff.c **** 			j++;
 6428              		.loc 1 2036 15 is_stmt 0 view .LVU2193
 6429 009e BB1E     		subs	r3, r7, #2
2036:DRIVER/FatFs/source/ff.c **** 			j++;
 6430              		.loc 1 2036 7 view .LVU2194
 6431 00a0 A342     		cmp	r3, r4
 6432 00a2 07D0     		beq	.L486
2037:DRIVER/FatFs/source/ff.c **** 		}
 6433              		.loc 1 2037 4 is_stmt 1 view .LVU2195
2037:DRIVER/FatFs/source/ff.c **** 		}
 6434              		.loc 1 2037 5 is_stmt 0 view .LVU2196
 6435 00a4 0134     		adds	r4, r4, #1
 6436              	.LVL782:
2037:DRIVER/FatFs/source/ff.c **** 		}
 6437              		.loc 1 2037 5 view .LVU2197
 6438 00a6 F0E7     		b	.L482
 6439              	.L488:
2041:DRIVER/FatFs/source/ff.c **** 	} while (j < 8);
 6440              		.loc 1 2041 12 view .LVU2198
 6441 00a8 2022     		movs	r2, #32
 6442              	.L485:
2041:DRIVER/FatFs/source/ff.c **** 	} while (j < 8);
 6443              		.loc 1 2041 8 discriminator 4 view .LVU2199
 6444 00aa 631C     		adds	r3, r4, #1
 6445              	.LVL783:
2041:DRIVER/FatFs/source/ff.c **** 	} while (j < 8);
 6446              		.loc 1 2041 12 discriminator 4 view .LVU2200
 6447 00ac 3255     		strb	r2, [r6, r4]
2042:DRIVER/FatFs/source/ff.c **** }
 6448              		.loc 1 2042 13 is_stmt 1 discriminator 4 view .LVU2201
 6449 00ae 072B     		cmp	r3, #7
 6450 00b0 09D8     		bhi	.L491
2041:DRIVER/FatFs/source/ff.c **** 	} while (j < 8);
 6451              		.loc 1 2041 8 is_stmt 0 view .LVU2202
 6452 00b2 1C46     		mov	r4, r3
 6453              	.LVL784:
 6454              	.L486:
2040:DRIVER/FatFs/source/ff.c **** 		dst[j++] = (i < 8) ? ns[i++] : ' ';
 6455              		.loc 1 2040 2 is_stmt 1 view .LVU2203
2041:DRIVER/FatFs/source/ff.c **** 	} while (j < 8);
 6456              		.loc 1 2041 3 view .LVU2204
2041:DRIVER/FatFs/source/ff.c **** 	} while (j < 8);
 6457              		.loc 1 2041 12 is_stmt 0 view .LVU2205
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 248


 6458 00b4 072D     		cmp	r5, #7
 6459 00b6 F7D8     		bhi	.L488
 6460              	.LVL785:
2041:DRIVER/FatFs/source/ff.c **** 	} while (j < 8);
 6461              		.loc 1 2041 12 discriminator 1 view .LVU2206
 6462 00b8 05F10803 		add	r3, r5, #8
 6463 00bc 6B44     		add	r3, sp, r3
 6464 00be 13F8082C 		ldrb	r2, [r3, #-8]	@ zero_extendqisi2
2041:DRIVER/FatFs/source/ff.c **** 	} while (j < 8);
 6465              		.loc 1 2041 28 discriminator 1 view .LVU2207
 6466 00c2 0135     		adds	r5, r5, #1
 6467              	.LVL786:
2041:DRIVER/FatFs/source/ff.c **** 	} while (j < 8);
 6468              		.loc 1 2041 28 discriminator 1 view .LVU2208
 6469 00c4 F1E7     		b	.L485
 6470              	.LVL787:
 6471              	.L491:
2043:DRIVER/FatFs/source/ff.c **** #endif	/* FF_USE_LFN && !FF_FS_READONLY */
 6472              		.loc 1 2043 1 view .LVU2209
 6473 00c6 03B0     		add	sp, sp, #12
 6474              	.LCFI43:
 6475              		.cfi_def_cfa_offset 20
 6476              		@ sp needed
 6477 00c8 F0BD     		pop	{r4, r5, r6, r7, pc}
2043:DRIVER/FatFs/source/ff.c **** #endif	/* FF_USE_LFN && !FF_FS_READONLY */
 6478              		.loc 1 2043 1 view .LVU2210
 6479              		.cfi_endproc
 6480              	.LFE25:
 6482              		.section	.text.dir_register,"ax",%progbits
 6483              		.align	1
 6484              		.syntax unified
 6485              		.thumb
 6486              		.thumb_func
 6488              	dir_register:
 6489              	.LVL788:
 6490              	.LFB29:
2468:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
 6491              		.loc 1 2468 1 is_stmt 1 view -0
 6492              		.cfi_startproc
 6493              		@ args = 0, pretend = 0, frame = 16
 6494              		@ frame_needed = 0, uses_anonymous_args = 0
2468:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
 6495              		.loc 1 2468 1 is_stmt 0 view .LVU2212
 6496 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 6497              	.LCFI44:
 6498              		.cfi_def_cfa_offset 24
 6499              		.cfi_offset 4, -24
 6500              		.cfi_offset 5, -20
 6501              		.cfi_offset 6, -16
 6502              		.cfi_offset 7, -12
 6503              		.cfi_offset 8, -8
 6504              		.cfi_offset 14, -4
 6505 0004 84B0     		sub	sp, sp, #16
 6506              	.LCFI45:
 6507              		.cfi_def_cfa_offset 40
2469:DRIVER/FatFs/source/ff.c **** 	FATFS *fs = dp->obj.fs;
 6508              		.loc 1 2469 2 is_stmt 1 view .LVU2213
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 249


2470:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN		/* LFN configuration */
 6509              		.loc 1 2470 2 view .LVU2214
2470:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN		/* LFN configuration */
 6510              		.loc 1 2470 9 is_stmt 0 view .LVU2215
 6511 0006 0768     		ldr	r7, [r0]
 6512              	.LVL789:
2472:DRIVER/FatFs/source/ff.c **** 	BYTE sn[12], sum;
 6513              		.loc 1 2472 2 is_stmt 1 view .LVU2216
2473:DRIVER/FatFs/source/ff.c **** 
 6514              		.loc 1 2473 2 view .LVU2217
2476:DRIVER/FatFs/source/ff.c **** 	for (len = 0; fs->lfnbuf[len]; len++) ;	/* Get lfn length */
 6515              		.loc 1 2476 2 view .LVU2218
2476:DRIVER/FatFs/source/ff.c **** 	for (len = 0; fs->lfnbuf[len]; len++) ;	/* Get lfn length */
 6516              		.loc 1 2476 12 is_stmt 0 view .LVU2219
 6517 0008 90F82B50 		ldrb	r5, [r0, #43]	@ zero_extendqisi2
2476:DRIVER/FatFs/source/ff.c **** 	for (len = 0; fs->lfnbuf[len]; len++) ;	/* Get lfn length */
 6518              		.loc 1 2476 5 view .LVU2220
 6519 000c 15F0A00F 		tst	r5, #160
 6520 0010 40F08D80 		bne	.L503
 6521 0014 0646     		mov	r6, r0
2477:DRIVER/FatFs/source/ff.c **** 
 6522              		.loc 1 2477 11 view .LVU2221
 6523 0016 0024     		movs	r4, #0
 6524 0018 00E0     		b	.L494
 6525              	.LVL790:
 6526              	.L495:
2477:DRIVER/FatFs/source/ff.c **** 
 6527              		.loc 1 2477 36 is_stmt 1 discriminator 3 view .LVU2222
 6528 001a 0134     		adds	r4, r4, #1
 6529              	.LVL791:
 6530              	.L494:
2477:DRIVER/FatFs/source/ff.c **** 
 6531              		.loc 1 2477 16 discriminator 1 view .LVU2223
2477:DRIVER/FatFs/source/ff.c **** 
 6532              		.loc 1 2477 18 is_stmt 0 discriminator 1 view .LVU2224
 6533 001c 3B69     		ldr	r3, [r7, #16]
2477:DRIVER/FatFs/source/ff.c **** 
 6534              		.loc 1 2477 26 discriminator 1 view .LVU2225
 6535 001e 33F81430 		ldrh	r3, [r3, r4, lsl #1]
2477:DRIVER/FatFs/source/ff.c **** 
 6536              		.loc 1 2477 16 discriminator 1 view .LVU2226
 6537 0022 002B     		cmp	r3, #0
 6538 0024 F9D1     		bne	.L495
2511:DRIVER/FatFs/source/ff.c **** 	if (sn[NSFLAG] & NS_LOSS) {			/* When LFN is out of 8.3 format, generate a numbered name */
 6539              		.loc 1 2511 2 is_stmt 1 view .LVU2227
 6540 0026 01AB     		add	r3, sp, #4
 6541 0028 306A     		ldr	r0, [r6, #32]	@ unaligned
 6542              	.LVL792:
2511:DRIVER/FatFs/source/ff.c **** 	if (sn[NSFLAG] & NS_LOSS) {			/* When LFN is out of 8.3 format, generate a numbered name */
 6543              		.loc 1 2511 2 is_stmt 0 view .LVU2228
 6544 002a 716A     		ldr	r1, [r6, #36]	@ unaligned
 6545 002c B26A     		ldr	r2, [r6, #40]	@ unaligned
 6546 002e 07C3     		stmia	r3!, {r0, r1, r2}
2512:DRIVER/FatFs/source/ff.c **** 		dp->fn[NSFLAG] = NS_NOLFN;		/* Find only SFN */
 6547              		.loc 1 2512 2 is_stmt 1 view .LVU2229
2512:DRIVER/FatFs/source/ff.c **** 		dp->fn[NSFLAG] = NS_NOLFN;		/* Find only SFN */
 6548              		.loc 1 2512 5 is_stmt 0 view .LVU2230
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 250


 6549 0030 15F0010F 		tst	r5, #1
 6550 0034 1DD0     		beq	.L496
2513:DRIVER/FatFs/source/ff.c **** 		for (n = 1; n < 100; n++) {
 6551              		.loc 1 2513 3 is_stmt 1 view .LVU2231
2513:DRIVER/FatFs/source/ff.c **** 		for (n = 1; n < 100; n++) {
 6552              		.loc 1 2513 18 is_stmt 0 view .LVU2232
 6553 0036 4023     		movs	r3, #64
 6554 0038 86F82B30 		strb	r3, [r6, #43]
2514:DRIVER/FatFs/source/ff.c **** 			gen_numname(dp->fn, sn, fs->lfnbuf, n);	/* Generate a numbered name */
 6555              		.loc 1 2514 3 is_stmt 1 view .LVU2233
 6556              	.LVL793:
2514:DRIVER/FatFs/source/ff.c **** 			gen_numname(dp->fn, sn, fs->lfnbuf, n);	/* Generate a numbered name */
 6557              		.loc 1 2514 10 is_stmt 0 view .LVU2234
 6558 003c 0125     		movs	r5, #1
2514:DRIVER/FatFs/source/ff.c **** 			gen_numname(dp->fn, sn, fs->lfnbuf, n);	/* Generate a numbered name */
 6559              		.loc 1 2514 3 view .LVU2235
 6560 003e 00E0     		b	.L497
 6561              	.LVL794:
 6562              	.L507:
2514:DRIVER/FatFs/source/ff.c **** 			gen_numname(dp->fn, sn, fs->lfnbuf, n);	/* Generate a numbered name */
 6563              		.loc 1 2514 25 is_stmt 1 discriminator 2 view .LVU2236
 6564 0040 0135     		adds	r5, r5, #1
 6565              	.LVL795:
 6566              	.L497:
2514:DRIVER/FatFs/source/ff.c **** 			gen_numname(dp->fn, sn, fs->lfnbuf, n);	/* Generate a numbered name */
 6567              		.loc 1 2514 17 discriminator 1 view .LVU2237
 6568 0042 632D     		cmp	r5, #99
 6569 0044 0CD8     		bhi	.L498
2515:DRIVER/FatFs/source/ff.c **** 			res = dir_find(dp);				/* Check if the name collides with existing SFN */
 6570              		.loc 1 2515 4 view .LVU2238
 6571 0046 2B46     		mov	r3, r5
 6572 0048 3A69     		ldr	r2, [r7, #16]
 6573 004a 01A9     		add	r1, sp, #4
 6574 004c 06F12000 		add	r0, r6, #32
 6575 0050 FFF7FEFF 		bl	gen_numname
 6576              	.LVL796:
2516:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) break;
 6577              		.loc 1 2516 4 view .LVU2239
2516:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) break;
 6578              		.loc 1 2516 10 is_stmt 0 view .LVU2240
 6579 0054 3046     		mov	r0, r6
 6580 0056 FFF7FEFF 		bl	dir_find
 6581              	.LVL797:
2517:DRIVER/FatFs/source/ff.c **** 		}
 6582              		.loc 1 2517 4 is_stmt 1 view .LVU2241
2517:DRIVER/FatFs/source/ff.c **** 		}
 6583              		.loc 1 2517 7 is_stmt 0 view .LVU2242
 6584 005a 8046     		mov	r8, r0
 6585 005c 0028     		cmp	r0, #0
 6586 005e EFD0     		beq	.L507
 6587              	.LVL798:
 6588              	.L498:
2519:DRIVER/FatFs/source/ff.c **** 		if (res != FR_NO_FILE) return res;	/* Abort if the result is other than 'not collided' */
 6589              		.loc 1 2519 3 is_stmt 1 view .LVU2243
2519:DRIVER/FatFs/source/ff.c **** 		if (res != FR_NO_FILE) return res;	/* Abort if the result is other than 'not collided' */
 6590              		.loc 1 2519 6 is_stmt 0 view .LVU2244
 6591 0060 642D     		cmp	r5, #100
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 251


 6592 0062 6AD0     		beq	.L504
2520:DRIVER/FatFs/source/ff.c **** 		dp->fn[NSFLAG] = sn[NSFLAG];
 6593              		.loc 1 2520 3 is_stmt 1 view .LVU2245
2520:DRIVER/FatFs/source/ff.c **** 		dp->fn[NSFLAG] = sn[NSFLAG];
 6594              		.loc 1 2520 6 is_stmt 0 view .LVU2246
 6595 0064 B8F1040F 		cmp	r8, #4
 6596 0068 63D1     		bne	.L493
2521:DRIVER/FatFs/source/ff.c **** 	}
 6597              		.loc 1 2521 3 is_stmt 1 view .LVU2247
2521:DRIVER/FatFs/source/ff.c **** 	}
 6598              		.loc 1 2521 22 is_stmt 0 view .LVU2248
 6599 006a 9DF80F30 		ldrb	r3, [sp, #15]	@ zero_extendqisi2
2521:DRIVER/FatFs/source/ff.c **** 	}
 6600              		.loc 1 2521 18 view .LVU2249
 6601 006e 86F82B30 		strb	r3, [r6, #43]
 6602              	.LVL799:
 6603              	.L496:
2525:DRIVER/FatFs/source/ff.c **** 	res = dir_alloc(dp, n_ent);		/* Allocate entries */
 6604              		.loc 1 2525 2 is_stmt 1 view .LVU2250
2525:DRIVER/FatFs/source/ff.c **** 	res = dir_alloc(dp, n_ent);		/* Allocate entries */
 6605              		.loc 1 2525 13 is_stmt 0 view .LVU2251
 6606 0072 9DF80F30 		ldrb	r3, [sp, #15]	@ zero_extendqisi2
2525:DRIVER/FatFs/source/ff.c **** 	res = dir_alloc(dp, n_ent);		/* Allocate entries */
 6607              		.loc 1 2525 54 view .LVU2252
 6608 0076 13F0020F 		tst	r3, #2
 6609 007a 06D0     		beq	.L505
2525:DRIVER/FatFs/source/ff.c **** 	res = dir_alloc(dp, n_ent);		/* Allocate entries */
 6610              		.loc 1 2525 39 discriminator 1 view .LVU2253
 6611 007c 0C34     		adds	r4, r4, #12
 6612              	.LVL800:
2525:DRIVER/FatFs/source/ff.c **** 	res = dir_alloc(dp, n_ent);		/* Allocate entries */
 6613              		.loc 1 2525 45 discriminator 1 view .LVU2254
 6614 007e 304B     		ldr	r3, .L509
 6615 0080 A3FB0434 		umull	r3, r4, r3, r4
 6616              	.LVL801:
2525:DRIVER/FatFs/source/ff.c **** 	res = dir_alloc(dp, n_ent);		/* Allocate entries */
 6617              		.loc 1 2525 45 discriminator 1 view .LVU2255
 6618 0084 A408     		lsrs	r4, r4, #2
2525:DRIVER/FatFs/source/ff.c **** 	res = dir_alloc(dp, n_ent);		/* Allocate entries */
 6619              		.loc 1 2525 54 discriminator 1 view .LVU2256
 6620 0086 0134     		adds	r4, r4, #1
 6621 0088 00E0     		b	.L500
 6622              	.LVL802:
 6623              	.L505:
2525:DRIVER/FatFs/source/ff.c **** 	res = dir_alloc(dp, n_ent);		/* Allocate entries */
 6624              		.loc 1 2525 54 view .LVU2257
 6625 008a 0124     		movs	r4, #1
 6626              	.LVL803:
 6627              	.L500:
2526:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK && --n_ent) {	/* Set LFN entry if needed */
 6628              		.loc 1 2526 2 is_stmt 1 discriminator 4 view .LVU2258
2526:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK && --n_ent) {	/* Set LFN entry if needed */
 6629              		.loc 1 2526 8 is_stmt 0 discriminator 4 view .LVU2259
 6630 008c 2146     		mov	r1, r4
 6631 008e 3046     		mov	r0, r6
 6632 0090 FFF7FEFF 		bl	dir_alloc
 6633              	.LVL804:
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 252


2527:DRIVER/FatFs/source/ff.c **** 		res = dir_sdi(dp, dp->dptr - n_ent * SZDIRE);
 6634              		.loc 1 2527 2 is_stmt 1 discriminator 4 view .LVU2260
2527:DRIVER/FatFs/source/ff.c **** 		res = dir_sdi(dp, dp->dptr - n_ent * SZDIRE);
 6635              		.loc 1 2527 5 is_stmt 0 discriminator 4 view .LVU2261
 6636 0094 8046     		mov	r8, r0
 6637 0096 0028     		cmp	r0, #0
 6638 0098 4BD1     		bne	.L493
 6639              	.LVL805:
2527:DRIVER/FatFs/source/ff.c **** 		res = dir_sdi(dp, dp->dptr - n_ent * SZDIRE);
 6640              		.loc 1 2527 19 discriminator 1 view .LVU2262
 6641 009a 013C     		subs	r4, r4, #1
 6642              	.LVL806:
2527:DRIVER/FatFs/source/ff.c **** 		res = dir_sdi(dp, dp->dptr - n_ent * SZDIRE);
 6643              		.loc 1 2527 19 discriminator 1 view .LVU2263
 6644 009c 21D1     		bne	.L508
 6645              	.L501:
 6646              	.LVL807:
2547:DRIVER/FatFs/source/ff.c **** 		res = move_window(fs, dp->sect);
 6647              		.loc 1 2547 2 is_stmt 1 view .LVU2264
2547:DRIVER/FatFs/source/ff.c **** 		res = move_window(fs, dp->sect);
 6648              		.loc 1 2547 5 is_stmt 0 view .LVU2265
 6649 009e B8F1000F 		cmp	r8, #0
 6650 00a2 46D1     		bne	.L493
2548:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK) {
 6651              		.loc 1 2548 3 is_stmt 1 view .LVU2266
2548:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK) {
 6652              		.loc 1 2548 9 is_stmt 0 view .LVU2267
 6653 00a4 B169     		ldr	r1, [r6, #24]
 6654 00a6 3846     		mov	r0, r7
 6655 00a8 FFF7FEFF 		bl	move_window
 6656              	.LVL808:
2549:DRIVER/FatFs/source/ff.c **** 			memset(dp->dir, 0, SZDIRE);	/* Clean the entry */
 6657              		.loc 1 2549 3 is_stmt 1 view .LVU2268
2549:DRIVER/FatFs/source/ff.c **** 			memset(dp->dir, 0, SZDIRE);	/* Clean the entry */
 6658              		.loc 1 2549 6 is_stmt 0 view .LVU2269
 6659 00ac 8046     		mov	r8, r0
 6660 00ae 0028     		cmp	r0, #0
 6661 00b0 3FD1     		bne	.L493
2550:DRIVER/FatFs/source/ff.c **** 			memcpy(dp->dir + DIR_Name, dp->fn, 11);	/* Put SFN */
 6662              		.loc 1 2550 4 is_stmt 1 view .LVU2270
 6663 00b2 2022     		movs	r2, #32
 6664 00b4 0021     		movs	r1, #0
 6665 00b6 F069     		ldr	r0, [r6, #28]
 6666              	.LVL809:
2550:DRIVER/FatFs/source/ff.c **** 			memcpy(dp->dir + DIR_Name, dp->fn, 11);	/* Put SFN */
 6667              		.loc 1 2550 4 is_stmt 0 view .LVU2271
 6668 00b8 FFF7FEFF 		bl	memset
 6669              	.LVL810:
2551:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN
 6670              		.loc 1 2551 4 is_stmt 1 view .LVU2272
2551:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN
 6671              		.loc 1 2551 19 is_stmt 0 view .LVU2273
 6672 00bc F369     		ldr	r3, [r6, #28]
2551:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN
 6673              		.loc 1 2551 4 view .LVU2274
 6674 00be 316A     		ldr	r1, [r6, #32]	@ unaligned
 6675 00c0 726A     		ldr	r2, [r6, #36]	@ unaligned
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 253


 6676 00c2 1960     		str	r1, [r3]	@ unaligned
 6677 00c4 5A60     		str	r2, [r3, #4]	@ unaligned
 6678 00c6 318D     		ldrh	r1, [r6, #40]	@ unaligned
 6679 00c8 96F82A20 		ldrb	r2, [r6, #42]	@ zero_extendqisi2
 6680 00cc 1981     		strh	r1, [r3, #8]	@ unaligned
 6681 00ce 9A72     		strb	r2, [r3, #10]
2553:DRIVER/FatFs/source/ff.c **** #endif
 6682              		.loc 1 2553 4 is_stmt 1 view .LVU2275
2553:DRIVER/FatFs/source/ff.c **** #endif
 6683              		.loc 1 2553 31 is_stmt 0 view .LVU2276
 6684 00d0 96F82B30 		ldrb	r3, [r6, #43]	@ zero_extendqisi2
2553:DRIVER/FatFs/source/ff.c **** #endif
 6685              		.loc 1 2553 6 view .LVU2277
 6686 00d4 F269     		ldr	r2, [r6, #28]
2553:DRIVER/FatFs/source/ff.c **** #endif
 6687              		.loc 1 2553 40 view .LVU2278
 6688 00d6 03F01803 		and	r3, r3, #24
2553:DRIVER/FatFs/source/ff.c **** #endif
 6689              		.loc 1 2553 23 view .LVU2279
 6690 00da 1373     		strb	r3, [r2, #12]
2555:DRIVER/FatFs/source/ff.c **** 		}
 6691              		.loc 1 2555 4 is_stmt 1 view .LVU2280
2555:DRIVER/FatFs/source/ff.c **** 		}
 6692              		.loc 1 2555 14 is_stmt 0 view .LVU2281
 6693 00dc 0123     		movs	r3, #1
 6694 00de 3B71     		strb	r3, [r7, #4]
 6695 00e0 27E0     		b	.L493
 6696              	.LVL811:
 6697              	.L508:
2528:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK) {
 6698              		.loc 1 2528 3 is_stmt 1 view .LVU2282
2528:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK) {
 6699              		.loc 1 2528 23 is_stmt 0 view .LVU2283
 6700 00e2 3169     		ldr	r1, [r6, #16]
2528:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK) {
 6701              		.loc 1 2528 9 view .LVU2284
 6702 00e4 A1EB4411 		sub	r1, r1, r4, lsl #5
 6703 00e8 3046     		mov	r0, r6
 6704              	.LVL812:
2528:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK) {
 6705              		.loc 1 2528 9 view .LVU2285
 6706 00ea FFF7FEFF 		bl	dir_sdi
 6707              	.LVL813:
2529:DRIVER/FatFs/source/ff.c **** 			sum = sum_sfn(dp->fn);	/* Checksum value of the SFN tied to the LFN */
 6708              		.loc 1 2529 3 is_stmt 1 view .LVU2286
2529:DRIVER/FatFs/source/ff.c **** 			sum = sum_sfn(dp->fn);	/* Checksum value of the SFN tied to the LFN */
 6709              		.loc 1 2529 6 is_stmt 0 view .LVU2287
 6710 00ee 8046     		mov	r8, r0
 6711 00f0 F8B9     		cbnz	r0, .L493
2530:DRIVER/FatFs/source/ff.c **** 			do {					/* Store LFN entries in bottom first */
 6712              		.loc 1 2530 4 is_stmt 1 view .LVU2288
2530:DRIVER/FatFs/source/ff.c **** 			do {					/* Store LFN entries in bottom first */
 6713              		.loc 1 2530 10 is_stmt 0 view .LVU2289
 6714 00f2 06F12000 		add	r0, r6, #32
 6715              	.LVL814:
2530:DRIVER/FatFs/source/ff.c **** 			do {					/* Store LFN entries in bottom first */
 6716              		.loc 1 2530 10 view .LVU2290
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 254


 6717 00f6 FFF7FEFF 		bl	sum_sfn
 6718              	.LVL815:
 6719 00fa 0546     		mov	r5, r0
 6720              	.LVL816:
 6721              	.L502:
2531:DRIVER/FatFs/source/ff.c **** 				res = move_window(fs, dp->sect);
 6722              		.loc 1 2531 4 is_stmt 1 view .LVU2291
2532:DRIVER/FatFs/source/ff.c **** 				if (res != FR_OK) break;
 6723              		.loc 1 2532 5 view .LVU2292
2532:DRIVER/FatFs/source/ff.c **** 				if (res != FR_OK) break;
 6724              		.loc 1 2532 11 is_stmt 0 view .LVU2293
 6725 00fc B169     		ldr	r1, [r6, #24]
 6726 00fe 3846     		mov	r0, r7
 6727 0100 FFF7FEFF 		bl	move_window
 6728              	.LVL817:
2533:DRIVER/FatFs/source/ff.c **** 				put_lfn(fs->lfnbuf, dp->dir, (BYTE)n_ent, sum);
 6729              		.loc 1 2533 5 is_stmt 1 view .LVU2294
2533:DRIVER/FatFs/source/ff.c **** 				put_lfn(fs->lfnbuf, dp->dir, (BYTE)n_ent, sum);
 6730              		.loc 1 2533 8 is_stmt 0 view .LVU2295
 6731 0104 8046     		mov	r8, r0
 6732 0106 0028     		cmp	r0, #0
 6733 0108 C9D1     		bne	.L501
2534:DRIVER/FatFs/source/ff.c **** 				fs->wflag = 1;
 6734              		.loc 1 2534 5 is_stmt 1 view .LVU2296
 6735 010a 2B46     		mov	r3, r5
 6736 010c E2B2     		uxtb	r2, r4
 6737 010e F169     		ldr	r1, [r6, #28]
 6738 0110 3869     		ldr	r0, [r7, #16]
 6739              	.LVL818:
2534:DRIVER/FatFs/source/ff.c **** 				fs->wflag = 1;
 6740              		.loc 1 2534 5 is_stmt 0 view .LVU2297
 6741 0112 FFF7FEFF 		bl	put_lfn
 6742              	.LVL819:
2535:DRIVER/FatFs/source/ff.c **** 				res = dir_next(dp, 0);	/* Next entry */
 6743              		.loc 1 2535 5 is_stmt 1 view .LVU2298
2535:DRIVER/FatFs/source/ff.c **** 				res = dir_next(dp, 0);	/* Next entry */
 6744              		.loc 1 2535 15 is_stmt 0 view .LVU2299
 6745 0116 0123     		movs	r3, #1
 6746 0118 3B71     		strb	r3, [r7, #4]
2536:DRIVER/FatFs/source/ff.c **** 			} while (res == FR_OK && --n_ent);
 6747              		.loc 1 2536 5 is_stmt 1 view .LVU2300
2536:DRIVER/FatFs/source/ff.c **** 			} while (res == FR_OK && --n_ent);
 6748              		.loc 1 2536 11 is_stmt 0 view .LVU2301
 6749 011a 0021     		movs	r1, #0
 6750 011c 3046     		mov	r0, r6
 6751 011e FFF7FEFF 		bl	dir_next
 6752              	.LVL820:
2537:DRIVER/FatFs/source/ff.c **** 		}
 6753              		.loc 1 2537 26 is_stmt 1 view .LVU2302
 6754 0122 8046     		mov	r8, r0
 6755 0124 0028     		cmp	r0, #0
 6756 0126 BAD1     		bne	.L501
 6757              	.LVL821:
2537:DRIVER/FatFs/source/ff.c **** 		}
 6758              		.loc 1 2537 26 is_stmt 0 discriminator 1 view .LVU2303
 6759 0128 013C     		subs	r4, r4, #1
 6760              	.LVL822:
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 255


2537:DRIVER/FatFs/source/ff.c **** 		}
 6761              		.loc 1 2537 26 discriminator 1 view .LVU2304
 6762 012a E7D1     		bne	.L502
 6763 012c B7E7     		b	.L501
 6764              	.LVL823:
 6765              	.L503:
2476:DRIVER/FatFs/source/ff.c **** 	for (len = 0; fs->lfnbuf[len]; len++) ;	/* Get lfn length */
 6766              		.loc 1 2476 52 view .LVU2305
 6767 012e 4FF00608 		mov	r8, #6
 6768              	.LVL824:
 6769              	.L493:
2560:DRIVER/FatFs/source/ff.c **** 
 6770              		.loc 1 2560 1 view .LVU2306
 6771 0132 4046     		mov	r0, r8
 6772 0134 04B0     		add	sp, sp, #16
 6773              	.LCFI46:
 6774              		.cfi_remember_state
 6775              		.cfi_def_cfa_offset 24
 6776              		@ sp needed
 6777 0136 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 6778              	.LVL825:
 6779              	.L504:
 6780              	.LCFI47:
 6781              		.cfi_restore_state
2519:DRIVER/FatFs/source/ff.c **** 		if (res != FR_NO_FILE) return res;	/* Abort if the result is other than 'not collided' */
 6782              		.loc 1 2519 24 view .LVU2307
 6783 013a 4FF00708 		mov	r8, #7
 6784              	.LVL826:
2519:DRIVER/FatFs/source/ff.c **** 		if (res != FR_NO_FILE) return res;	/* Abort if the result is other than 'not collided' */
 6785              		.loc 1 2519 24 view .LVU2308
 6786 013e F8E7     		b	.L493
 6787              	.L510:
 6788              		.align	2
 6789              	.L509:
 6790 0140 4FECC44E 		.word	1321528399
 6791              		.cfi_endproc
 6792              	.LFE29:
 6794              		.section	.text.get_fileinfo,"ax",%progbits
 6795              		.align	1
 6796              		.syntax unified
 6797              		.thumb
 6798              		.thumb_func
 6800              	get_fileinfo:
 6801              	.LVL827:
 6802              	.LFB31:
2621:DRIVER/FatFs/source/ff.c **** 	UINT si, di;
 6803              		.loc 1 2621 1 is_stmt 1 view -0
 6804              		.cfi_startproc
 6805              		@ args = 0, pretend = 0, frame = 0
 6806              		@ frame_needed = 0, uses_anonymous_args = 0
2621:DRIVER/FatFs/source/ff.c **** 	UINT si, di;
 6807              		.loc 1 2621 1 is_stmt 0 view .LVU2310
 6808 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 6809              	.LCFI48:
 6810              		.cfi_def_cfa_offset 32
 6811              		.cfi_offset 4, -32
 6812              		.cfi_offset 5, -28
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 256


 6813              		.cfi_offset 6, -24
 6814              		.cfi_offset 7, -20
 6815              		.cfi_offset 8, -16
 6816              		.cfi_offset 9, -12
 6817              		.cfi_offset 10, -8
 6818              		.cfi_offset 14, -4
2622:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN
 6819              		.loc 1 2622 2 is_stmt 1 view .LVU2311
2624:DRIVER/FatFs/source/ff.c **** 	WCHAR wc, hs;
 6820              		.loc 1 2624 2 view .LVU2312
2625:DRIVER/FatFs/source/ff.c **** 	FATFS *fs = dp->obj.fs;
 6821              		.loc 1 2625 2 view .LVU2313
2626:DRIVER/FatFs/source/ff.c **** 	UINT nw;
 6822              		.loc 1 2626 2 view .LVU2314
2626:DRIVER/FatFs/source/ff.c **** 	UINT nw;
 6823              		.loc 1 2626 9 is_stmt 0 view .LVU2315
 6824 0004 0768     		ldr	r7, [r0]
 6825              	.LVL828:
2627:DRIVER/FatFs/source/ff.c **** #else
 6826              		.loc 1 2627 2 is_stmt 1 view .LVU2316
2633:DRIVER/FatFs/source/ff.c **** 	if (dp->sect == 0) return;	/* Exit if read pointer has reached end of directory */
 6827              		.loc 1 2633 2 view .LVU2317
2633:DRIVER/FatFs/source/ff.c **** 	if (dp->sect == 0) return;	/* Exit if read pointer has reached end of directory */
 6828              		.loc 1 2633 16 is_stmt 0 view .LVU2318
 6829 0006 0023     		movs	r3, #0
 6830 0008 8B75     		strb	r3, [r1, #22]
2634:DRIVER/FatFs/source/ff.c **** 
 6831              		.loc 1 2634 2 is_stmt 1 view .LVU2319
2634:DRIVER/FatFs/source/ff.c **** 
 6832              		.loc 1 2634 8 is_stmt 0 view .LVU2320
 6833 000a 8369     		ldr	r3, [r0, #24]
2634:DRIVER/FatFs/source/ff.c **** 
 6834              		.loc 1 2634 5 view .LVU2321
 6835 000c 002B     		cmp	r3, #0
 6836 000e 00F0A480 		beq	.L511
 6837 0012 8146     		mov	r9, r0
 6838 0014 8846     		mov	r8, r1
2672:DRIVER/FatFs/source/ff.c **** 			si = di = 0;
 6839              		.loc 1 2672 3 is_stmt 1 view .LVU2322
2672:DRIVER/FatFs/source/ff.c **** 			si = di = 0;
 6840              		.loc 1 2672 9 is_stmt 0 view .LVU2323
 6841 0016 C36A     		ldr	r3, [r0, #44]
2672:DRIVER/FatFs/source/ff.c **** 			si = di = 0;
 6842              		.loc 1 2672 6 view .LVU2324
 6843 0018 B3F1FF3F 		cmp	r3, #-1
 6844 001c 25D0     		beq	.L514
2674:DRIVER/FatFs/source/ff.c **** 			while (fs->lfnbuf[si] != 0) {
 6845              		.loc 1 2674 7 view .LVU2325
 6846 001e 0026     		movs	r6, #0
2673:DRIVER/FatFs/source/ff.c **** 			hs = 0;
 6847              		.loc 1 2673 12 view .LVU2326
 6848 0020 3446     		mov	r4, r6
2673:DRIVER/FatFs/source/ff.c **** 			hs = 0;
 6849              		.loc 1 2673 7 view .LVU2327
 6850 0022 3546     		mov	r5, r6
 6851 0024 0CE0     		b	.L513
 6852              	.LVL829:
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 257


 6853              	.L515:
2680:DRIVER/FatFs/source/ff.c **** 				if (nw == 0) {				/* Buffer overflow or wrong char? */
 6854              		.loc 1 2680 5 is_stmt 1 view .LVU2328
2680:DRIVER/FatFs/source/ff.c **** 				if (nw == 0) {				/* Buffer overflow or wrong char? */
 6855              		.loc 1 2680 10 is_stmt 0 view .LVU2329
 6856 0026 04F11001 		add	r1, r4, #16
 6857 002a 4144     		add	r1, r1, r8
 6858 002c C4F1FF02 		rsb	r2, r4, #255
 6859 0030 0631     		adds	r1, r1, #6
 6860 0032 40EA0640 		orr	r0, r0, r6, lsl #16
 6861              	.LVL830:
2680:DRIVER/FatFs/source/ff.c **** 				if (nw == 0) {				/* Buffer overflow or wrong char? */
 6862              		.loc 1 2680 10 view .LVU2330
 6863 0036 FFF7FEFF 		bl	put_utf
 6864              	.LVL831:
2681:DRIVER/FatFs/source/ff.c **** 					di = 0; break;
 6865              		.loc 1 2681 5 is_stmt 1 view .LVU2331
2681:DRIVER/FatFs/source/ff.c **** 					di = 0; break;
 6866              		.loc 1 2681 8 is_stmt 0 view .LVU2332
 6867 003a 80B1     		cbz	r0, .L535
2684:DRIVER/FatFs/source/ff.c **** 				hs = 0;
 6868              		.loc 1 2684 5 is_stmt 1 view .LVU2333
2684:DRIVER/FatFs/source/ff.c **** 				hs = 0;
 6869              		.loc 1 2684 8 is_stmt 0 view .LVU2334
 6870 003c 0444     		add	r4, r4, r0
 6871              	.LVL832:
2685:DRIVER/FatFs/source/ff.c **** 			}
 6872              		.loc 1 2685 5 is_stmt 1 view .LVU2335
2685:DRIVER/FatFs/source/ff.c **** 			}
 6873              		.loc 1 2685 8 is_stmt 0 view .LVU2336
 6874 003e 0026     		movs	r6, #0
 6875              	.LVL833:
 6876              	.L513:
2675:DRIVER/FatFs/source/ff.c **** 				wc = fs->lfnbuf[si++];		/* Get an LFN character (UTF-16) */
 6877              		.loc 1 2675 26 is_stmt 1 view .LVU2337
2675:DRIVER/FatFs/source/ff.c **** 				wc = fs->lfnbuf[si++];		/* Get an LFN character (UTF-16) */
 6878              		.loc 1 2675 13 is_stmt 0 view .LVU2338
 6879 0040 3B69     		ldr	r3, [r7, #16]
2675:DRIVER/FatFs/source/ff.c **** 				wc = fs->lfnbuf[si++];		/* Get an LFN character (UTF-16) */
 6880              		.loc 1 2675 21 view .LVU2339
 6881 0042 33F81500 		ldrh	r0, [r3, r5, lsl #1]
2675:DRIVER/FatFs/source/ff.c **** 				wc = fs->lfnbuf[si++];		/* Get an LFN character (UTF-16) */
 6882              		.loc 1 2675 26 view .LVU2340
 6883 0046 58B1     		cbz	r0, .L517
2676:DRIVER/FatFs/source/ff.c **** 				if (hs == 0 && IsSurrogate(wc)) {	/* Is it a surrogate? */
 6884              		.loc 1 2676 5 is_stmt 1 view .LVU2341
2676:DRIVER/FatFs/source/ff.c **** 				if (hs == 0 && IsSurrogate(wc)) {	/* Is it a surrogate? */
 6885              		.loc 1 2676 23 is_stmt 0 view .LVU2342
 6886 0048 0135     		adds	r5, r5, #1
 6887              	.LVL834:
2677:DRIVER/FatFs/source/ff.c **** 					hs = wc; continue;		/* Get low surrogate */
 6888              		.loc 1 2677 5 is_stmt 1 view .LVU2343
2677:DRIVER/FatFs/source/ff.c **** 					hs = wc; continue;		/* Get low surrogate */
 6889              		.loc 1 2677 8 is_stmt 0 view .LVU2344
 6890 004a 002E     		cmp	r6, #0
 6891 004c EBD1     		bne	.L515
2677:DRIVER/FatFs/source/ff.c **** 					hs = wc; continue;		/* Get low surrogate */
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 258


 6892              		.loc 1 2677 20 discriminator 1 view .LVU2345
 6893 004e 00F52053 		add	r3, r0, #10240
 6894 0052 9BB2     		uxth	r3, r3
2677:DRIVER/FatFs/source/ff.c **** 					hs = wc; continue;		/* Get low surrogate */
 6895              		.loc 1 2677 17 discriminator 1 view .LVU2346
 6896 0054 B3F5006F 		cmp	r3, #2048
 6897 0058 E5D2     		bcs	.L515
2678:DRIVER/FatFs/source/ff.c **** 				}
 6898              		.loc 1 2678 9 view .LVU2347
 6899 005a 0646     		mov	r6, r0
 6900              	.LVL835:
2678:DRIVER/FatFs/source/ff.c **** 				}
 6901              		.loc 1 2678 9 view .LVU2348
 6902 005c F0E7     		b	.L513
 6903              	.LVL836:
 6904              	.L535:
2682:DRIVER/FatFs/source/ff.c **** 				}
 6905              		.loc 1 2682 9 view .LVU2349
 6906 005e 0446     		mov	r4, r0
 6907              	.LVL837:
 6908              	.L517:
2687:DRIVER/FatFs/source/ff.c **** 			fno->fname[di] = 0;		/* Terminate the LFN (null string means LFN is invalid) */
 6909              		.loc 1 2687 4 is_stmt 1 view .LVU2350
2687:DRIVER/FatFs/source/ff.c **** 			fno->fname[di] = 0;		/* Terminate the LFN (null string means LFN is invalid) */
 6910              		.loc 1 2687 7 is_stmt 0 view .LVU2351
 6911 0060 06B1     		cbz	r6, .L519
2687:DRIVER/FatFs/source/ff.c **** 			fno->fname[di] = 0;		/* Terminate the LFN (null string means LFN is invalid) */
 6912              		.loc 1 2687 20 view .LVU2352
 6913 0062 0024     		movs	r4, #0
 6914              	.LVL838:
 6915              	.L519:
2688:DRIVER/FatFs/source/ff.c **** 		}
 6916              		.loc 1 2688 4 is_stmt 1 view .LVU2353
2688:DRIVER/FatFs/source/ff.c **** 		}
 6917              		.loc 1 2688 19 is_stmt 0 view .LVU2354
 6918 0064 4444     		add	r4, r4, r8
 6919              	.LVL839:
2688:DRIVER/FatFs/source/ff.c **** 		}
 6920              		.loc 1 2688 19 view .LVU2355
 6921 0066 0023     		movs	r3, #0
 6922 0068 A375     		strb	r3, [r4, #22]
 6923              	.LVL840:
 6924              	.L514:
2694:DRIVER/FatFs/source/ff.c **** 		if (wc == ' ') continue;	/* Skip padding spaces */
 6925              		.loc 1 2694 18 view .LVU2356
 6926 006a 0025     		movs	r5, #0
 6927 006c 2E46     		mov	r6, r5
 6928 006e 1BE0     		b	.L525
 6929              	.LVL841:
 6930              	.L544:
2696:DRIVER/FatFs/source/ff.c **** 		if (si == 9 && di < FF_SFN_BUF) fno->altname[di++] = '.';	/* Insert a . if extension is exist */
 6931              		.loc 1 2696 23 view .LVU2357
 6932 0070 E524     		movs	r4, #229
 6933              	.LVL842:
2696:DRIVER/FatFs/source/ff.c **** 		if (si == 9 && di < FF_SFN_BUF) fno->altname[di++] = '.';	/* Insert a . if extension is exist */
 6934              		.loc 1 2696 23 view .LVU2358
 6935 0072 23E0     		b	.L521
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 259


 6936              	.LVL843:
 6937              	.L545:
2697:DRIVER/FatFs/source/ff.c **** #if FF_LFN_UNICODE >= 1	/* Unicode output */
 6938              		.loc 1 2697 15 discriminator 1 view .LVU2359
 6939 0074 0B2D     		cmp	r5, #11
 6940 0076 23D8     		bhi	.L522
2697:DRIVER/FatFs/source/ff.c **** #if FF_LFN_UNICODE >= 1	/* Unicode output */
 6941              		.loc 1 2697 35 is_stmt 1 discriminator 2 view .LVU2360
 6942              	.LVL844:
2697:DRIVER/FatFs/source/ff.c **** #if FF_LFN_UNICODE >= 1	/* Unicode output */
 6943              		.loc 1 2697 54 is_stmt 0 discriminator 2 view .LVU2361
 6944 0078 08EB0503 		add	r3, r8, r5
 6945 007c 2E22     		movs	r2, #46
 6946 007e 5A72     		strb	r2, [r3, #9]
2697:DRIVER/FatFs/source/ff.c **** #if FF_LFN_UNICODE >= 1	/* Unicode output */
 6947              		.loc 1 2697 50 discriminator 2 view .LVU2362
 6948 0080 0135     		adds	r5, r5, #1
 6949              	.LVL845:
2697:DRIVER/FatFs/source/ff.c **** #if FF_LFN_UNICODE >= 1	/* Unicode output */
 6950              		.loc 1 2697 50 discriminator 2 view .LVU2363
 6951 0082 1DE0     		b	.L522
 6952              	.L523:
2702:DRIVER/FatFs/source/ff.c **** 		if (wc == 0) {				/* Wrong char in the current code page? */
 6953              		.loc 1 2702 3 is_stmt 1 view .LVU2364
2702:DRIVER/FatFs/source/ff.c **** 		if (wc == 0) {				/* Wrong char in the current code page? */
 6954              		.loc 1 2702 8 is_stmt 0 view .LVU2365
 6955 0084 40F2B511 		movw	r1, #437
 6956 0088 2046     		mov	r0, r4
 6957 008a FFF7FEFF 		bl	ff_oem2uni
 6958              	.LVL846:
2703:DRIVER/FatFs/source/ff.c **** 			di = 0; break;
 6959              		.loc 1 2703 3 is_stmt 1 view .LVU2366
2703:DRIVER/FatFs/source/ff.c **** 			di = 0; break;
 6960              		.loc 1 2703 6 is_stmt 0 view .LVU2367
 6961 008e 88B3     		cbz	r0, .L539
2706:DRIVER/FatFs/source/ff.c **** 		if (nw == 0) {				/* Buffer overflow? */
 6962              		.loc 1 2706 3 is_stmt 1 view .LVU2368
2706:DRIVER/FatFs/source/ff.c **** 		if (nw == 0) {				/* Buffer overflow? */
 6963              		.loc 1 2706 8 is_stmt 0 view .LVU2369
 6964 0090 05F10801 		add	r1, r5, #8
 6965 0094 4144     		add	r1, r1, r8
 6966 0096 C5F10C02 		rsb	r2, r5, #12
 6967 009a 0131     		adds	r1, r1, #1
 6968 009c FFF7FEFF 		bl	put_utf
 6969              	.LVL847:
2707:DRIVER/FatFs/source/ff.c **** 			di = 0; break;
 6970              		.loc 1 2707 3 is_stmt 1 view .LVU2370
2707:DRIVER/FatFs/source/ff.c **** 			di = 0; break;
 6971              		.loc 1 2707 6 is_stmt 0 view .LVU2371
 6972 00a0 0028     		cmp	r0, #0
 6973 00a2 5CD0     		beq	.L540
2710:DRIVER/FatFs/source/ff.c **** #else					/* ANSI/OEM output */
 6974              		.loc 1 2710 3 is_stmt 1 view .LVU2372
2710:DRIVER/FatFs/source/ff.c **** #else					/* ANSI/OEM output */
 6975              		.loc 1 2710 6 is_stmt 0 view .LVU2373
 6976 00a4 0544     		add	r5, r5, r0
 6977              	.LVL848:
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 260


2710:DRIVER/FatFs/source/ff.c **** #else					/* ANSI/OEM output */
 6978              		.loc 1 2710 6 view .LVU2374
 6979 00a6 3E46     		mov	r6, r7
 6980              	.LVL849:
 6981              	.L525:
2693:DRIVER/FatFs/source/ff.c **** 		wc = dp->dir[si++];			/* Get a char */
 6982              		.loc 1 2693 12 is_stmt 1 view .LVU2375
 6983 00a8 0A2E     		cmp	r6, #10
 6984 00aa 24D8     		bhi	.L524
2694:DRIVER/FatFs/source/ff.c **** 		if (wc == ' ') continue;	/* Skip padding spaces */
 6985              		.loc 1 2694 3 view .LVU2376
2694:DRIVER/FatFs/source/ff.c **** 		if (wc == ' ') continue;	/* Skip padding spaces */
 6986              		.loc 1 2694 10 is_stmt 0 view .LVU2377
 6987 00ac D9F81C30 		ldr	r3, [r9, #28]
2694:DRIVER/FatFs/source/ff.c **** 		if (wc == ' ') continue;	/* Skip padding spaces */
 6988              		.loc 1 2694 18 view .LVU2378
 6989 00b0 771C     		adds	r7, r6, #1
 6990              	.LVL850:
2694:DRIVER/FatFs/source/ff.c **** 		if (wc == ' ') continue;	/* Skip padding spaces */
 6991              		.loc 1 2694 15 view .LVU2379
 6992 00b2 9C5D     		ldrb	r4, [r3, r6]	@ zero_extendqisi2
 6993              	.LVL851:
2695:DRIVER/FatFs/source/ff.c **** 		if (wc == RDDEM) wc = DDEM;	/* Restore replaced DDEM character */
 6994              		.loc 1 2695 3 is_stmt 1 view .LVU2380
2695:DRIVER/FatFs/source/ff.c **** 		if (wc == RDDEM) wc = DDEM;	/* Restore replaced DDEM character */
 6995              		.loc 1 2695 6 is_stmt 0 view .LVU2381
 6996 00b4 202C     		cmp	r4, #32
 6997 00b6 1BD0     		beq	.L537
2696:DRIVER/FatFs/source/ff.c **** 		if (si == 9 && di < FF_SFN_BUF) fno->altname[di++] = '.';	/* Insert a . if extension is exist */
 6998              		.loc 1 2696 3 is_stmt 1 view .LVU2382
2696:DRIVER/FatFs/source/ff.c **** 		if (si == 9 && di < FF_SFN_BUF) fno->altname[di++] = '.';	/* Insert a . if extension is exist */
 6999              		.loc 1 2696 6 is_stmt 0 view .LVU2383
 7000 00b8 052C     		cmp	r4, #5
 7001 00ba D9D0     		beq	.L544
 7002              	.LVL852:
 7003              	.L521:
2697:DRIVER/FatFs/source/ff.c **** #if FF_LFN_UNICODE >= 1	/* Unicode output */
 7004              		.loc 1 2697 3 is_stmt 1 view .LVU2384
2697:DRIVER/FatFs/source/ff.c **** #if FF_LFN_UNICODE >= 1	/* Unicode output */
 7005              		.loc 1 2697 6 is_stmt 0 view .LVU2385
 7006 00bc 092F     		cmp	r7, #9
 7007 00be D9D0     		beq	.L545
 7008              	.L522:
2699:DRIVER/FatFs/source/ff.c **** 			wc = wc << 8 | dp->dir[si++];
 7009              		.loc 1 2699 3 is_stmt 1 view .LVU2386
2699:DRIVER/FatFs/source/ff.c **** 			wc = wc << 8 | dp->dir[si++];
 7010              		.loc 1 2699 7 is_stmt 0 view .LVU2387
 7011 00c0 E0B2     		uxtb	r0, r4
 7012 00c2 FFF7FEFF 		bl	dbc_1st
 7013              	.LVL853:
2699:DRIVER/FatFs/source/ff.c **** 			wc = wc << 8 | dp->dir[si++];
 7014              		.loc 1 2699 6 view .LVU2388
 7015 00c6 0028     		cmp	r0, #0
 7016 00c8 DCD0     		beq	.L523
2699:DRIVER/FatFs/source/ff.c **** 			wc = wc << 8 | dp->dir[si++];
 7017              		.loc 1 2699 25 discriminator 1 view .LVU2389
 7018 00ca 082F     		cmp	r7, #8
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 261


 7019 00cc DAD0     		beq	.L523
2699:DRIVER/FatFs/source/ff.c **** 			wc = wc << 8 | dp->dir[si++];
 7020              		.loc 1 2699 36 discriminator 2 view .LVU2390
 7021 00ce 0B2F     		cmp	r7, #11
 7022 00d0 D8D0     		beq	.L523
2699:DRIVER/FatFs/source/ff.c **** 			wc = wc << 8 | dp->dir[si++];
 7023              		.loc 1 2699 61 discriminator 3 view .LVU2391
 7024 00d2 D9F81C30 		ldr	r3, [r9, #28]
2699:DRIVER/FatFs/source/ff.c **** 			wc = wc << 8 | dp->dir[si++];
 7025              		.loc 1 2699 51 discriminator 3 view .LVU2392
 7026 00d6 13F807A0 		ldrb	r10, [r3, r7]	@ zero_extendqisi2
 7027 00da 5046     		mov	r0, r10
 7028 00dc FFF7FEFF 		bl	dbc_2nd
 7029              	.LVL854:
2699:DRIVER/FatFs/source/ff.c **** 			wc = wc << 8 | dp->dir[si++];
 7030              		.loc 1 2699 48 discriminator 3 view .LVU2393
 7031 00e0 0028     		cmp	r0, #0
 7032 00e2 CFD0     		beq	.L523
2700:DRIVER/FatFs/source/ff.c **** 		}
 7033              		.loc 1 2700 4 is_stmt 1 view .LVU2394
2700:DRIVER/FatFs/source/ff.c **** 		}
 7034              		.loc 1 2700 29 is_stmt 0 view .LVU2395
 7035 00e4 B71C     		adds	r7, r6, #2
 7036              	.LVL855:
2700:DRIVER/FatFs/source/ff.c **** 		}
 7037              		.loc 1 2700 17 view .LVU2396
 7038 00e6 4AEA042A 		orr	r10, r10, r4, lsl #8
2700:DRIVER/FatFs/source/ff.c **** 		}
 7039              		.loc 1 2700 7 view .LVU2397
 7040 00ea 1FFA8AF4 		uxth	r4, r10
 7041              	.LVL856:
2700:DRIVER/FatFs/source/ff.c **** 		}
 7042              		.loc 1 2700 7 view .LVU2398
 7043 00ee C9E7     		b	.L523
 7044              	.L537:
2694:DRIVER/FatFs/source/ff.c **** 		if (wc == ' ') continue;	/* Skip padding spaces */
 7045              		.loc 1 2694 18 view .LVU2399
 7046 00f0 3E46     		mov	r6, r7
 7047 00f2 D9E7     		b	.L525
 7048              	.LVL857:
 7049              	.L539:
2704:DRIVER/FatFs/source/ff.c **** 		}
 7050              		.loc 1 2704 7 view .LVU2400
 7051 00f4 0025     		movs	r5, #0
 7052              	.LVL858:
 7053              	.L524:
2715:DRIVER/FatFs/source/ff.c **** 
 7054              		.loc 1 2715 2 is_stmt 1 view .LVU2401
2715:DRIVER/FatFs/source/ff.c **** 
 7055              		.loc 1 2715 19 is_stmt 0 view .LVU2402
 7056 00f6 08EB0503 		add	r3, r8, r5
 7057 00fa 0022     		movs	r2, #0
 7058 00fc 5A72     		strb	r2, [r3, #9]
2717:DRIVER/FatFs/source/ff.c **** 		if (di == 0) {	/* If LFN and SFN both are invalid, this object is inaccessible */
 7059              		.loc 1 2717 2 is_stmt 1 view .LVU2403
2717:DRIVER/FatFs/source/ff.c **** 		if (di == 0) {	/* If LFN and SFN both are invalid, this object is inaccessible */
 7060              		.loc 1 2717 16 is_stmt 0 view .LVU2404
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 262


 7061 00fe 98F81630 		ldrb	r3, [r8, #22]	@ zero_extendqisi2
2717:DRIVER/FatFs/source/ff.c **** 		if (di == 0) {	/* If LFN and SFN both are invalid, this object is inaccessible */
 7062              		.loc 1 2717 5 view .LVU2405
 7063 0102 73B9     		cbnz	r3, .L527
2718:DRIVER/FatFs/source/ff.c **** 			fno->fname[di++] = '\?';
 7064              		.loc 1 2718 3 is_stmt 1 view .LVU2406
2718:DRIVER/FatFs/source/ff.c **** 			fno->fname[di++] = '\?';
 7065              		.loc 1 2718 6 is_stmt 0 view .LVU2407
 7066 0104 002D     		cmp	r5, #0
 7067 0106 48D1     		bne	.L541
2719:DRIVER/FatFs/source/ff.c **** 		} else {
 7068              		.loc 1 2719 4 is_stmt 1 view .LVU2408
2719:DRIVER/FatFs/source/ff.c **** 		} else {
 7069              		.loc 1 2719 17 is_stmt 0 view .LVU2409
 7070 0108 6A1C     		adds	r2, r5, #1
 7071              	.LVL859:
2719:DRIVER/FatFs/source/ff.c **** 		} else {
 7072              		.loc 1 2719 21 view .LVU2410
 7073 010a 4544     		add	r5, r5, r8
 7074 010c 3F23     		movs	r3, #63
 7075 010e AB75     		strb	r3, [r5, #22]
 7076              	.L529:
2728:DRIVER/FatFs/source/ff.c **** 		if (!dp->dir[DIR_NTres]) fno->altname[0] = 0;	/* Altname is not needed if neither LFN nor case in
 7077              		.loc 1 2728 3 is_stmt 1 view .LVU2411
2728:DRIVER/FatFs/source/ff.c **** 		if (!dp->dir[DIR_NTres]) fno->altname[0] = 0;	/* Altname is not needed if neither LFN nor case in
 7078              		.loc 1 2728 18 is_stmt 0 view .LVU2412
 7079 0110 4244     		add	r2, r2, r8
 7080              	.LVL860:
2728:DRIVER/FatFs/source/ff.c **** 		if (!dp->dir[DIR_NTres]) fno->altname[0] = 0;	/* Altname is not needed if neither LFN nor case in
 7081              		.loc 1 2728 18 view .LVU2413
 7082 0112 0023     		movs	r3, #0
 7083 0114 9375     		strb	r3, [r2, #22]
2729:DRIVER/FatFs/source/ff.c **** 	}
 7084              		.loc 1 2729 3 is_stmt 1 view .LVU2414
2729:DRIVER/FatFs/source/ff.c **** 	}
 7085              		.loc 1 2729 10 is_stmt 0 view .LVU2415
 7086 0116 D9F81C30 		ldr	r3, [r9, #28]
2729:DRIVER/FatFs/source/ff.c **** 	}
 7087              		.loc 1 2729 15 view .LVU2416
 7088 011a 1B7B     		ldrb	r3, [r3, #12]	@ zero_extendqisi2
2729:DRIVER/FatFs/source/ff.c **** 	}
 7089              		.loc 1 2729 6 view .LVU2417
 7090 011c 0BB9     		cbnz	r3, .L527
2729:DRIVER/FatFs/source/ff.c **** 	}
 7091              		.loc 1 2729 28 is_stmt 1 discriminator 1 view .LVU2418
2729:DRIVER/FatFs/source/ff.c **** 	}
 7092              		.loc 1 2729 44 is_stmt 0 discriminator 1 view .LVU2419
 7093 011e 88F80930 		strb	r3, [r8, #9]
 7094              	.LVL861:
 7095              	.L527:
2744:DRIVER/FatFs/source/ff.c **** 	fno->fsize = ld_dword(dp->dir + DIR_FileSize);		/* Size */
 7096              		.loc 1 2744 2 is_stmt 1 view .LVU2420
2744:DRIVER/FatFs/source/ff.c **** 	fno->fsize = ld_dword(dp->dir + DIR_FileSize);		/* Size */
 7097              		.loc 1 2744 19 is_stmt 0 view .LVU2421
 7098 0122 D9F81C30 		ldr	r3, [r9, #28]
2744:DRIVER/FatFs/source/ff.c **** 	fno->fsize = ld_dword(dp->dir + DIR_FileSize);		/* Size */
 7099              		.loc 1 2744 24 view .LVU2422
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 263


 7100 0126 DB7A     		ldrb	r3, [r3, #11]	@ zero_extendqisi2
2744:DRIVER/FatFs/source/ff.c **** 	fno->fsize = ld_dword(dp->dir + DIR_FileSize);		/* Size */
 7101              		.loc 1 2744 35 view .LVU2423
 7102 0128 03F03F03 		and	r3, r3, #63
2744:DRIVER/FatFs/source/ff.c **** 	fno->fsize = ld_dword(dp->dir + DIR_FileSize);		/* Size */
 7103              		.loc 1 2744 15 view .LVU2424
 7104 012c 88F80830 		strb	r3, [r8, #8]
2745:DRIVER/FatFs/source/ff.c **** 	fno->ftime = ld_word(dp->dir + DIR_ModTime + 0);	/* Time */
 7105              		.loc 1 2745 2 is_stmt 1 view .LVU2425
2745:DRIVER/FatFs/source/ff.c **** 	fno->ftime = ld_word(dp->dir + DIR_ModTime + 0);	/* Time */
 7106              		.loc 1 2745 26 is_stmt 0 view .LVU2426
 7107 0130 D9F81C00 		ldr	r0, [r9, #28]
2745:DRIVER/FatFs/source/ff.c **** 	fno->ftime = ld_word(dp->dir + DIR_ModTime + 0);	/* Time */
 7108              		.loc 1 2745 15 view .LVU2427
 7109 0134 1C30     		adds	r0, r0, #28
 7110 0136 FFF7FEFF 		bl	ld_dword
 7111              	.LVL862:
2745:DRIVER/FatFs/source/ff.c **** 	fno->ftime = ld_word(dp->dir + DIR_ModTime + 0);	/* Time */
 7112              		.loc 1 2745 13 view .LVU2428
 7113 013a C8F80000 		str	r0, [r8]
2746:DRIVER/FatFs/source/ff.c **** 	fno->fdate = ld_word(dp->dir + DIR_ModTime + 2);	/* Date */
 7114              		.loc 1 2746 2 is_stmt 1 view .LVU2429
2746:DRIVER/FatFs/source/ff.c **** 	fno->fdate = ld_word(dp->dir + DIR_ModTime + 2);	/* Date */
 7115              		.loc 1 2746 25 is_stmt 0 view .LVU2430
 7116 013e D9F81C00 		ldr	r0, [r9, #28]
2746:DRIVER/FatFs/source/ff.c **** 	fno->fdate = ld_word(dp->dir + DIR_ModTime + 2);	/* Date */
 7117              		.loc 1 2746 15 view .LVU2431
 7118 0142 1630     		adds	r0, r0, #22
 7119 0144 FFF7FEFF 		bl	ld_word
 7120              	.LVL863:
2746:DRIVER/FatFs/source/ff.c **** 	fno->fdate = ld_word(dp->dir + DIR_ModTime + 2);	/* Date */
 7121              		.loc 1 2746 13 view .LVU2432
 7122 0148 A8F80600 		strh	r0, [r8, #6]	@ movhi
2747:DRIVER/FatFs/source/ff.c **** }
 7123              		.loc 1 2747 2 is_stmt 1 view .LVU2433
2747:DRIVER/FatFs/source/ff.c **** }
 7124              		.loc 1 2747 25 is_stmt 0 view .LVU2434
 7125 014c D9F81C00 		ldr	r0, [r9, #28]
2747:DRIVER/FatFs/source/ff.c **** }
 7126              		.loc 1 2747 15 view .LVU2435
 7127 0150 1830     		adds	r0, r0, #24
 7128 0152 FFF7FEFF 		bl	ld_word
 7129              	.LVL864:
2747:DRIVER/FatFs/source/ff.c **** }
 7130              		.loc 1 2747 13 view .LVU2436
 7131 0156 A8F80400 		strh	r0, [r8, #4]	@ movhi
 7132              	.LVL865:
 7133              	.L511:
2748:DRIVER/FatFs/source/ff.c **** 
 7134              		.loc 1 2748 1 view .LVU2437
 7135 015a BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 7136              	.LVL866:
 7137              	.L540:
2708:DRIVER/FatFs/source/ff.c **** 		}
 7138              		.loc 1 2708 7 view .LVU2438
 7139 015e 0546     		mov	r5, r0
 7140              	.LVL867:
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 264


2708:DRIVER/FatFs/source/ff.c **** 		}
 7141              		.loc 1 2708 7 view .LVU2439
 7142 0160 C9E7     		b	.L524
 7143              	.LVL868:
 7144              	.L546:
2723:DRIVER/FatFs/source/ff.c **** 				if (IsUpper(wc) && (dp->dir[DIR_NTres] & lcf)) wc += 0x20;
 7145              		.loc 1 2723 24 view .LVU2440
 7146 0162 1025     		movs	r5, #16
 7147              	.LVL869:
2723:DRIVER/FatFs/source/ff.c **** 				if (IsUpper(wc) && (dp->dir[DIR_NTres] & lcf)) wc += 0x20;
 7148              		.loc 1 2723 24 view .LVU2441
 7149 0164 0CE0     		b	.L530
 7150              	.LVL870:
 7151              	.L531:
2725:DRIVER/FatFs/source/ff.c **** 			}
 7152              		.loc 1 2725 5 is_stmt 1 discriminator 2 view .LVU2442
2725:DRIVER/FatFs/source/ff.c **** 			}
 7153              		.loc 1 2725 20 is_stmt 0 discriminator 2 view .LVU2443
 7154 0166 08EB0203 		add	r3, r8, r2
 7155 016a 9C75     		strb	r4, [r3, #22]
2721:DRIVER/FatFs/source/ff.c **** 				wc = (WCHAR)fno->altname[si];
 7156              		.loc 1 2721 59 is_stmt 1 discriminator 2 view .LVU2444
2721:DRIVER/FatFs/source/ff.c **** 				wc = (WCHAR)fno->altname[si];
 7157              		.loc 1 2721 57 is_stmt 0 discriminator 2 view .LVU2445
 7158 016c 0130     		adds	r0, r0, #1
 7159              	.LVL871:
2721:DRIVER/FatFs/source/ff.c **** 				wc = (WCHAR)fno->altname[si];
 7160              		.loc 1 2721 63 discriminator 2 view .LVU2446
 7161 016e 0132     		adds	r2, r2, #1
 7162              	.LVL872:
 7163              	.L528:
2721:DRIVER/FatFs/source/ff.c **** 				wc = (WCHAR)fno->altname[si];
 7164              		.loc 1 2721 37 is_stmt 1 discriminator 1 view .LVU2447
2721:DRIVER/FatFs/source/ff.c **** 				wc = (WCHAR)fno->altname[si];
 7165              		.loc 1 2721 49 is_stmt 0 discriminator 1 view .LVU2448
 7166 0170 08EB0003 		add	r3, r8, r0
 7167 0174 5B7A     		ldrb	r3, [r3, #9]	@ zero_extendqisi2
2721:DRIVER/FatFs/source/ff.c **** 				wc = (WCHAR)fno->altname[si];
 7168              		.loc 1 2721 37 discriminator 1 view .LVU2449
 7169 0176 002B     		cmp	r3, #0
 7170 0178 CAD0     		beq	.L529
2722:DRIVER/FatFs/source/ff.c **** 				if (wc == '.') lcf = NS_EXT;
 7171              		.loc 1 2722 5 is_stmt 1 view .LVU2450
2722:DRIVER/FatFs/source/ff.c **** 				if (wc == '.') lcf = NS_EXT;
 7172              		.loc 1 2722 8 is_stmt 0 view .LVU2451
 7173 017a 1C46     		mov	r4, r3
 7174              	.LVL873:
2723:DRIVER/FatFs/source/ff.c **** 				if (IsUpper(wc) && (dp->dir[DIR_NTres] & lcf)) wc += 0x20;
 7175              		.loc 1 2723 5 is_stmt 1 view .LVU2452
2723:DRIVER/FatFs/source/ff.c **** 				if (IsUpper(wc) && (dp->dir[DIR_NTres] & lcf)) wc += 0x20;
 7176              		.loc 1 2723 8 is_stmt 0 view .LVU2453
 7177 017c 2E2B     		cmp	r3, #46
 7178 017e F0D0     		beq	.L546
 7179              	.LVL874:
 7180              	.L530:
2724:DRIVER/FatFs/source/ff.c **** 				fno->fname[di] = (TCHAR)wc;
 7181              		.loc 1 2724 5 is_stmt 1 view .LVU2454
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 265


2724:DRIVER/FatFs/source/ff.c **** 				fno->fname[di] = (TCHAR)wc;
 7182              		.loc 1 2724 9 is_stmt 0 view .LVU2455
 7183 0180 A3F14101 		sub	r1, r3, #65
 7184 0184 89B2     		uxth	r1, r1
2724:DRIVER/FatFs/source/ff.c **** 				fno->fname[di] = (TCHAR)wc;
 7185              		.loc 1 2724 8 view .LVU2456
 7186 0186 1929     		cmp	r1, #25
 7187 0188 EDD8     		bhi	.L531
2724:DRIVER/FatFs/source/ff.c **** 				fno->fname[di] = (TCHAR)wc;
 7188              		.loc 1 2724 27 discriminator 1 view .LVU2457
 7189 018a D9F81C10 		ldr	r1, [r9, #28]
2724:DRIVER/FatFs/source/ff.c **** 				fno->fname[di] = (TCHAR)wc;
 7190              		.loc 1 2724 32 discriminator 1 view .LVU2458
 7191 018e 097B     		ldrb	r1, [r1, #12]	@ zero_extendqisi2
2724:DRIVER/FatFs/source/ff.c **** 				fno->fname[di] = (TCHAR)wc;
 7192              		.loc 1 2724 21 discriminator 1 view .LVU2459
 7193 0190 2942     		tst	r1, r5
 7194 0192 E8D0     		beq	.L531
2724:DRIVER/FatFs/source/ff.c **** 				fno->fname[di] = (TCHAR)wc;
 7195              		.loc 1 2724 52 is_stmt 1 discriminator 2 view .LVU2460
2724:DRIVER/FatFs/source/ff.c **** 				fno->fname[di] = (TCHAR)wc;
 7196              		.loc 1 2724 55 is_stmt 0 discriminator 2 view .LVU2461
 7197 0194 03F12004 		add	r4, r3, #32
 7198              	.LVL875:
2724:DRIVER/FatFs/source/ff.c **** 				fno->fname[di] = (TCHAR)wc;
 7199              		.loc 1 2724 55 discriminator 2 view .LVU2462
 7200 0198 E5E7     		b	.L531
 7201              	.LVL876:
 7202              	.L541:
2721:DRIVER/FatFs/source/ff.c **** 				wc = (WCHAR)fno->altname[si];
 7203              		.loc 1 2721 26 view .LVU2463
 7204 019a 0825     		movs	r5, #8
 7205              	.LVL877:
2721:DRIVER/FatFs/source/ff.c **** 				wc = (WCHAR)fno->altname[si];
 7206              		.loc 1 2721 17 view .LVU2464
 7207 019c 0022     		movs	r2, #0
2721:DRIVER/FatFs/source/ff.c **** 				wc = (WCHAR)fno->altname[si];
 7208              		.loc 1 2721 12 view .LVU2465
 7209 019e 1046     		mov	r0, r2
 7210 01a0 E6E7     		b	.L528
 7211              		.cfi_endproc
 7212              	.LFE31:
 7214              		.section	.text.f_mount,"ax",%progbits
 7215              		.align	1
 7216              		.global	f_mount
 7217              		.syntax unified
 7218              		.thumb
 7219              		.thumb_func
 7221              	f_mount:
 7222              	.LVL878:
 7223              	.LFB39:
3662:DRIVER/FatFs/source/ff.c **** 	FATFS *cfs;
 7224              		.loc 1 3662 1 is_stmt 1 view -0
 7225              		.cfi_startproc
 7226              		@ args = 0, pretend = 0, frame = 16
 7227              		@ frame_needed = 0, uses_anonymous_args = 0
3662:DRIVER/FatFs/source/ff.c **** 	FATFS *cfs;
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 266


 7228              		.loc 1 3662 1 is_stmt 0 view .LVU2467
 7229 0000 10B5     		push	{r4, lr}
 7230              	.LCFI49:
 7231              		.cfi_def_cfa_offset 8
 7232              		.cfi_offset 4, -8
 7233              		.cfi_offset 14, -4
 7234 0002 84B0     		sub	sp, sp, #16
 7235              	.LCFI50:
 7236              		.cfi_def_cfa_offset 24
 7237 0004 0190     		str	r0, [sp, #4]
 7238 0006 0091     		str	r1, [sp]
 7239 0008 1446     		mov	r4, r2
3663:DRIVER/FatFs/source/ff.c **** 	int vol;
 7240              		.loc 1 3663 2 is_stmt 1 view .LVU2468
3664:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
 7241              		.loc 1 3664 2 view .LVU2469
3665:DRIVER/FatFs/source/ff.c **** 	const TCHAR *rp = path;
 7242              		.loc 1 3665 2 view .LVU2470
3666:DRIVER/FatFs/source/ff.c **** 
 7243              		.loc 1 3666 2 view .LVU2471
3666:DRIVER/FatFs/source/ff.c **** 
 7244              		.loc 1 3666 15 is_stmt 0 view .LVU2472
 7245 000a 0391     		str	r1, [sp, #12]
3670:DRIVER/FatFs/source/ff.c **** 	if (vol < 0) return FR_INVALID_DRIVE;
 7246              		.loc 1 3670 2 is_stmt 1 view .LVU2473
3670:DRIVER/FatFs/source/ff.c **** 	if (vol < 0) return FR_INVALID_DRIVE;
 7247              		.loc 1 3670 8 is_stmt 0 view .LVU2474
 7248 000c 03A8     		add	r0, sp, #12
 7249              	.LVL879:
3670:DRIVER/FatFs/source/ff.c **** 	if (vol < 0) return FR_INVALID_DRIVE;
 7250              		.loc 1 3670 8 view .LVU2475
 7251 000e FFF7FEFF 		bl	get_ldnumber
 7252              	.LVL880:
3671:DRIVER/FatFs/source/ff.c **** 	cfs = FatFs[vol];			/* Pointer to the filesystem object of the volume */
 7253              		.loc 1 3671 2 is_stmt 1 view .LVU2476
3671:DRIVER/FatFs/source/ff.c **** 	cfs = FatFs[vol];			/* Pointer to the filesystem object of the volume */
 7254              		.loc 1 3671 5 is_stmt 0 view .LVU2477
 7255 0012 0028     		cmp	r0, #0
3671:DRIVER/FatFs/source/ff.c **** 	cfs = FatFs[vol];			/* Pointer to the filesystem object of the volume */
 7256              		.loc 1 3671 5 view .LVU2478
 7257 0014 1CDB     		blt	.L551
3672:DRIVER/FatFs/source/ff.c **** 
 7258              		.loc 1 3672 2 is_stmt 1 view .LVU2479
3672:DRIVER/FatFs/source/ff.c **** 
 7259              		.loc 1 3672 6 is_stmt 0 view .LVU2480
 7260 0016 0F4B     		ldr	r3, .L555
 7261 0018 53F82030 		ldr	r3, [r3, r0, lsl #2]
 7262              	.LVL881:
3674:DRIVER/FatFs/source/ff.c **** 		FatFs[vol] = 0;
 7263              		.loc 1 3674 2 is_stmt 1 view .LVU2481
3674:DRIVER/FatFs/source/ff.c **** 		FatFs[vol] = 0;
 7264              		.loc 1 3674 5 is_stmt 0 view .LVU2482
 7265 001c 23B1     		cbz	r3, .L549
3675:DRIVER/FatFs/source/ff.c **** #if FF_FS_LOCK
 7266              		.loc 1 3675 3 is_stmt 1 view .LVU2483
3675:DRIVER/FatFs/source/ff.c **** #if FF_FS_LOCK
 7267              		.loc 1 3675 14 is_stmt 0 view .LVU2484
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 267


 7268 001e 0022     		movs	r2, #0
 7269 0020 0C49     		ldr	r1, .L555
 7270 0022 41F82020 		str	r2, [r1, r0, lsl #2]
3682:DRIVER/FatFs/source/ff.c **** 	}
 7271              		.loc 1 3682 3 is_stmt 1 view .LVU2485
3682:DRIVER/FatFs/source/ff.c **** 	}
 7272              		.loc 1 3682 16 is_stmt 0 view .LVU2486
 7273 0026 1A70     		strb	r2, [r3]
 7274              	.L549:
3685:DRIVER/FatFs/source/ff.c **** 		fs->pdrv = LD2PD(vol);	/* Volume hosting physical drive */
 7275              		.loc 1 3685 2 is_stmt 1 view .LVU2487
3685:DRIVER/FatFs/source/ff.c **** 		fs->pdrv = LD2PD(vol);	/* Volume hosting physical drive */
 7276              		.loc 1 3685 6 is_stmt 0 view .LVU2488
 7277 0028 019B     		ldr	r3, [sp, #4]
 7278              	.LVL882:
3685:DRIVER/FatFs/source/ff.c **** 		fs->pdrv = LD2PD(vol);	/* Volume hosting physical drive */
 7279              		.loc 1 3685 5 view .LVU2489
 7280 002a 3BB1     		cbz	r3, .L550
3686:DRIVER/FatFs/source/ff.c **** #if FF_FS_REENTRANT				/* Create a volume mutex */
 7281              		.loc 1 3686 3 is_stmt 1 view .LVU2490
3686:DRIVER/FatFs/source/ff.c **** #if FF_FS_REENTRANT				/* Create a volume mutex */
 7282              		.loc 1 3686 12 is_stmt 0 view .LVU2491
 7283 002c 5870     		strb	r0, [r3, #1]
3700:DRIVER/FatFs/source/ff.c **** 		FatFs[vol] = fs;		/* Register new fs object */
 7284              		.loc 1 3700 3 is_stmt 1 view .LVU2492
3700:DRIVER/FatFs/source/ff.c **** 		FatFs[vol] = fs;		/* Register new fs object */
 7285              		.loc 1 3700 15 is_stmt 0 view .LVU2493
 7286 002e 019B     		ldr	r3, [sp, #4]
 7287 0030 0022     		movs	r2, #0
 7288 0032 1A70     		strb	r2, [r3]
3701:DRIVER/FatFs/source/ff.c **** 	}
 7289              		.loc 1 3701 3 is_stmt 1 view .LVU2494
3701:DRIVER/FatFs/source/ff.c **** 	}
 7290              		.loc 1 3701 14 is_stmt 0 view .LVU2495
 7291 0034 074B     		ldr	r3, .L555
 7292 0036 019A     		ldr	r2, [sp, #4]
 7293 0038 43F82020 		str	r2, [r3, r0, lsl #2]
 7294              	.L550:
3704:DRIVER/FatFs/source/ff.c **** 
 7295              		.loc 1 3704 2 is_stmt 1 view .LVU2496
3704:DRIVER/FatFs/source/ff.c **** 
 7296              		.loc 1 3704 5 is_stmt 0 view .LVU2497
 7297 003c 14B9     		cbnz	r4, .L554
3704:DRIVER/FatFs/source/ff.c **** 
 7298              		.loc 1 3704 23 view .LVU2498
 7299 003e 2046     		mov	r0, r4
 7300              	.LVL883:
 7301              	.L548:
3708:DRIVER/FatFs/source/ff.c **** 
 7302              		.loc 1 3708 1 view .LVU2499
 7303 0040 04B0     		add	sp, sp, #16
 7304              	.LCFI51:
 7305              		.cfi_remember_state
 7306              		.cfi_def_cfa_offset 8
 7307              		@ sp needed
 7308 0042 10BD     		pop	{r4, pc}
 7309              	.LVL884:
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 268


 7310              	.L554:
 7311              	.LCFI52:
 7312              		.cfi_restore_state
3706:DRIVER/FatFs/source/ff.c **** 	LEAVE_FF(fs, res);
 7313              		.loc 1 3706 2 is_stmt 1 view .LVU2500
3706:DRIVER/FatFs/source/ff.c **** 	LEAVE_FF(fs, res);
 7314              		.loc 1 3706 8 is_stmt 0 view .LVU2501
 7315 0044 0022     		movs	r2, #0
 7316 0046 01A9     		add	r1, sp, #4
 7317 0048 6846     		mov	r0, sp
 7318              	.LVL885:
3706:DRIVER/FatFs/source/ff.c **** 	LEAVE_FF(fs, res);
 7319              		.loc 1 3706 8 view .LVU2502
 7320 004a FFF7FEFF 		bl	mount_volume
 7321              	.LVL886:
3707:DRIVER/FatFs/source/ff.c **** }
 7322              		.loc 1 3707 2 is_stmt 1 view .LVU2503
 7323 004e F7E7     		b	.L548
 7324              	.LVL887:
 7325              	.L551:
3671:DRIVER/FatFs/source/ff.c **** 	cfs = FatFs[vol];			/* Pointer to the filesystem object of the volume */
 7326              		.loc 1 3671 22 is_stmt 0 view .LVU2504
 7327 0050 0B20     		movs	r0, #11
 7328              	.LVL888:
3671:DRIVER/FatFs/source/ff.c **** 	cfs = FatFs[vol];			/* Pointer to the filesystem object of the volume */
 7329              		.loc 1 3671 22 view .LVU2505
 7330 0052 F5E7     		b	.L548
 7331              	.L556:
 7332              		.align	2
 7333              	.L555:
 7334 0054 00000000 		.word	FatFs
 7335              		.cfi_endproc
 7336              	.LFE39:
 7338              		.section	.text.f_open,"ax",%progbits
 7339              		.align	1
 7340              		.global	f_open
 7341              		.syntax unified
 7342              		.thumb
 7343              		.thumb_func
 7345              	f_open:
 7346              	.LVL889:
 7347              	.LFB40:
3722:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
 7348              		.loc 1 3722 1 is_stmt 1 view -0
 7349              		.cfi_startproc
 7350              		@ args = 0, pretend = 0, frame = 64
 7351              		@ frame_needed = 0, uses_anonymous_args = 0
3722:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
 7352              		.loc 1 3722 1 is_stmt 0 view .LVU2507
 7353 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 7354              	.LCFI53:
 7355              		.cfi_def_cfa_offset 32
 7356              		.cfi_offset 4, -32
 7357              		.cfi_offset 5, -28
 7358              		.cfi_offset 6, -24
 7359              		.cfi_offset 7, -20
 7360              		.cfi_offset 8, -16
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 269


 7361              		.cfi_offset 9, -12
 7362              		.cfi_offset 10, -8
 7363              		.cfi_offset 14, -4
 7364 0004 90B0     		sub	sp, sp, #64
 7365              	.LCFI54:
 7366              		.cfi_def_cfa_offset 96
 7367 0006 0191     		str	r1, [sp, #4]
3723:DRIVER/FatFs/source/ff.c **** 	DIR dj;
 7368              		.loc 1 3723 2 is_stmt 1 view .LVU2508
3724:DRIVER/FatFs/source/ff.c **** 	FATFS *fs;
 7369              		.loc 1 3724 2 view .LVU2509
3725:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY
 7370              		.loc 1 3725 2 view .LVU2510
3727:DRIVER/FatFs/source/ff.c **** 	LBA_t sc;
 7371              		.loc 1 3727 2 view .LVU2511
3728:DRIVER/FatFs/source/ff.c **** 	FSIZE_t ofs;
 7372              		.loc 1 3728 2 view .LVU2512
3729:DRIVER/FatFs/source/ff.c **** #endif
 7373              		.loc 1 3729 2 view .LVU2513
3734:DRIVER/FatFs/source/ff.c **** 
 7374              		.loc 1 3734 2 view .LVU2514
3734:DRIVER/FatFs/source/ff.c **** 
 7375              		.loc 1 3734 5 is_stmt 0 view .LVU2515
 7376 0008 0028     		cmp	r0, #0
 7377 000a 00F0F980 		beq	.L572
 7378 000e 1446     		mov	r4, r2
 7379 0010 0646     		mov	r6, r0
3737:DRIVER/FatFs/source/ff.c **** 	res = mount_volume(&path, &fs, mode);
 7380              		.loc 1 3737 2 is_stmt 1 view .LVU2516
3737:DRIVER/FatFs/source/ff.c **** 	res = mount_volume(&path, &fs, mode);
 7381              		.loc 1 3737 7 is_stmt 0 view .LVU2517
 7382 0012 02F03F07 		and	r7, r2, #63
 7383              	.LVL890:
3738:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
 7384              		.loc 1 3738 2 is_stmt 1 view .LVU2518
3738:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
 7385              		.loc 1 3738 8 is_stmt 0 view .LVU2519
 7386 0016 3A46     		mov	r2, r7
 7387 0018 03A9     		add	r1, sp, #12
 7388              	.LVL891:
3738:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
 7389              		.loc 1 3738 8 view .LVU2520
 7390 001a 01A8     		add	r0, sp, #4
 7391              	.LVL892:
3738:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
 7392              		.loc 1 3738 8 view .LVU2521
 7393 001c FFF7FEFF 		bl	mount_volume
 7394              	.LVL893:
3739:DRIVER/FatFs/source/ff.c **** 		dj.obj.fs = fs;
 7395              		.loc 1 3739 2 is_stmt 1 view .LVU2522
3739:DRIVER/FatFs/source/ff.c **** 		dj.obj.fs = fs;
 7396              		.loc 1 3739 5 is_stmt 0 view .LVU2523
 7397 0020 0546     		mov	r5, r0
 7398 0022 28B1     		cbz	r0, .L583
 7399              	.LVL894:
 7400              	.L559:
3902:DRIVER/FatFs/source/ff.c **** 
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 270


 7401              		.loc 1 3902 20 is_stmt 1 discriminator 1 view .LVU2524
3902:DRIVER/FatFs/source/ff.c **** 
 7402              		.loc 1 3902 31 is_stmt 0 discriminator 1 view .LVU2525
 7403 0024 0023     		movs	r3, #0
 7404 0026 3360     		str	r3, [r6]
 7405              	.LVL895:
 7406              	.L558:
3905:DRIVER/FatFs/source/ff.c **** 
 7407              		.loc 1 3905 1 view .LVU2526
 7408 0028 2846     		mov	r0, r5
 7409 002a 10B0     		add	sp, sp, #64
 7410              	.LCFI55:
 7411              		.cfi_remember_state
 7412              		.cfi_def_cfa_offset 32
 7413              		@ sp needed
 7414 002c BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 7415              	.LVL896:
 7416              	.L583:
 7417              	.LCFI56:
 7418              		.cfi_restore_state
3740:DRIVER/FatFs/source/ff.c **** 		INIT_NAMBUF(fs);
 7419              		.loc 1 3740 3 is_stmt 1 view .LVU2527
3740:DRIVER/FatFs/source/ff.c **** 		INIT_NAMBUF(fs);
 7420              		.loc 1 3740 13 is_stmt 0 view .LVU2528
 7421 0030 039B     		ldr	r3, [sp, #12]
 7422 0032 0493     		str	r3, [sp, #16]
3741:DRIVER/FatFs/source/ff.c **** 		res = follow_path(&dj, path);	/* Follow the file path */
 7423              		.loc 1 3741 18 is_stmt 1 view .LVU2529
3742:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY	/* Read/Write configuration */
 7424              		.loc 1 3742 3 view .LVU2530
3742:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY	/* Read/Write configuration */
 7425              		.loc 1 3742 9 is_stmt 0 view .LVU2531
 7426 0034 0199     		ldr	r1, [sp, #4]
 7427 0036 04A8     		add	r0, sp, #16
 7428              	.LVL897:
3742:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY	/* Read/Write configuration */
 7429              		.loc 1 3742 9 view .LVU2532
 7430 0038 FFF7FEFF 		bl	follow_path
 7431              	.LVL898:
3744:DRIVER/FatFs/source/ff.c **** 			if (dj.fn[NSFLAG] & NS_NONAME) {	/* Origin directory itself? */
 7432              		.loc 1 3744 3 is_stmt 1 view .LVU2533
3744:DRIVER/FatFs/source/ff.c **** 			if (dj.fn[NSFLAG] & NS_NONAME) {	/* Origin directory itself? */
 7433              		.loc 1 3744 6 is_stmt 0 view .LVU2534
 7434 003c 0546     		mov	r5, r0
 7435 003e 18B9     		cbnz	r0, .L560
3745:DRIVER/FatFs/source/ff.c **** 				res = FR_INVALID_NAME;
 7436              		.loc 1 3745 4 is_stmt 1 view .LVU2535
3745:DRIVER/FatFs/source/ff.c **** 				res = FR_INVALID_NAME;
 7437              		.loc 1 3745 8 is_stmt 0 view .LVU2536
 7438 0040 9DF93B30 		ldrsb	r3, [sp, #59]
3745:DRIVER/FatFs/source/ff.c **** 				res = FR_INVALID_NAME;
 7439              		.loc 1 3745 7 view .LVU2537
 7440 0044 002B     		cmp	r3, #0
 7441 0046 47DB     		blt	.L584
 7442              	.L560:
 7443              	.LVL899:
3755:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) {					/* No file, create new */
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 271


 7444              		.loc 1 3755 3 is_stmt 1 view .LVU2538
3755:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) {					/* No file, create new */
 7445              		.loc 1 3755 6 is_stmt 0 view .LVU2539
 7446 0048 14F01C0F 		tst	r4, #28
 7447 004c 55D0     		beq	.L561
3756:DRIVER/FatFs/source/ff.c **** 				if (res == FR_NO_FILE) {		/* There is no file to open, create a new entry */
 7448              		.loc 1 3756 4 is_stmt 1 view .LVU2540
3756:DRIVER/FatFs/source/ff.c **** 				if (res == FR_NO_FILE) {		/* There is no file to open, create a new entry */
 7449              		.loc 1 3756 7 is_stmt 0 view .LVU2541
 7450 004e 002D     		cmp	r5, #0
 7451 0050 49D0     		beq	.L562
3757:DRIVER/FatFs/source/ff.c **** #if FF_FS_LOCK
 7452              		.loc 1 3757 5 is_stmt 1 view .LVU2542
3757:DRIVER/FatFs/source/ff.c **** #if FF_FS_LOCK
 7453              		.loc 1 3757 8 is_stmt 0 view .LVU2543
 7454 0052 042D     		cmp	r5, #4
 7455 0054 42D0     		beq	.L585
 7456              	.L563:
3764:DRIVER/FatFs/source/ff.c **** 			}
 7457              		.loc 1 3764 5 is_stmt 1 view .LVU2544
3764:DRIVER/FatFs/source/ff.c **** 			}
 7458              		.loc 1 3764 10 is_stmt 0 view .LVU2545
 7459 0056 47F00807 		orr	r7, r7, #8
 7460              	.LVL900:
 7461              	.L564:
3773:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
 7462              		.loc 1 3773 4 is_stmt 1 view .LVU2546
3773:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
 7463              		.loc 1 3773 7 is_stmt 0 view .LVU2547
 7464 005a 002D     		cmp	r5, #0
 7465 005c E2D1     		bne	.L559
3773:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
 7466              		.loc 1 3773 21 discriminator 1 view .LVU2548
 7467 005e 17F0080F 		tst	r7, #8
 7468 0062 5AD0     		beq	.L565
3794:DRIVER/FatFs/source/ff.c **** 					st_dword(dj.dir + DIR_CrtTime, tm);
 7469              		.loc 1 3794 6 is_stmt 1 view .LVU2549
3794:DRIVER/FatFs/source/ff.c **** 					st_dword(dj.dir + DIR_CrtTime, tm);
 7470              		.loc 1 3794 11 is_stmt 0 view .LVU2550
 7471 0064 FFF7FEFF 		bl	get_fattime
 7472              	.LVL901:
 7473 0068 0446     		mov	r4, r0
 7474              	.LVL902:
3795:DRIVER/FatFs/source/ff.c **** 					st_dword(dj.dir + DIR_ModTime, tm);
 7475              		.loc 1 3795 6 is_stmt 1 view .LVU2551
 7476 006a 0146     		mov	r1, r0
 7477 006c 0B98     		ldr	r0, [sp, #44]
 7478              	.LVL903:
3795:DRIVER/FatFs/source/ff.c **** 					st_dword(dj.dir + DIR_ModTime, tm);
 7479              		.loc 1 3795 6 is_stmt 0 view .LVU2552
 7480 006e 0E30     		adds	r0, r0, #14
 7481 0070 FFF7FEFF 		bl	st_dword
 7482              	.LVL904:
3796:DRIVER/FatFs/source/ff.c **** 					cl = ld_clust(fs, dj.dir);			/* Get current cluster chain */
 7483              		.loc 1 3796 6 is_stmt 1 view .LVU2553
 7484 0074 2146     		mov	r1, r4
 7485 0076 0B98     		ldr	r0, [sp, #44]
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 272


 7486 0078 1630     		adds	r0, r0, #22
 7487 007a FFF7FEFF 		bl	st_dword
 7488              	.LVL905:
3797:DRIVER/FatFs/source/ff.c **** 					dj.dir[DIR_Attr] = AM_ARC;			/* Reset attribute */
 7489              		.loc 1 3797 6 view .LVU2554
3797:DRIVER/FatFs/source/ff.c **** 					dj.dir[DIR_Attr] = AM_ARC;			/* Reset attribute */
 7490              		.loc 1 3797 11 is_stmt 0 view .LVU2555
 7491 007e DDF80C80 		ldr	r8, [sp, #12]
3797:DRIVER/FatFs/source/ff.c **** 					dj.dir[DIR_Attr] = AM_ARC;			/* Reset attribute */
 7492              		.loc 1 3797 26 view .LVU2556
 7493 0082 DDF82C90 		ldr	r9, [sp, #44]
3797:DRIVER/FatFs/source/ff.c **** 					dj.dir[DIR_Attr] = AM_ARC;			/* Reset attribute */
 7494              		.loc 1 3797 11 view .LVU2557
 7495 0086 4946     		mov	r1, r9
 7496 0088 4046     		mov	r0, r8
 7497 008a FFF7FEFF 		bl	ld_clust
 7498              	.LVL906:
 7499 008e 0446     		mov	r4, r0
 7500              	.LVL907:
3798:DRIVER/FatFs/source/ff.c **** 					st_clust(fs, dj.dir, 0);			/* Reset file allocation info */
 7501              		.loc 1 3798 6 is_stmt 1 view .LVU2558
3798:DRIVER/FatFs/source/ff.c **** 					st_clust(fs, dj.dir, 0);			/* Reset file allocation info */
 7502              		.loc 1 3798 23 is_stmt 0 view .LVU2559
 7503 0090 2023     		movs	r3, #32
 7504 0092 89F80B30 		strb	r3, [r9, #11]
3799:DRIVER/FatFs/source/ff.c **** 					st_dword(dj.dir + DIR_FileSize, 0);
 7505              		.loc 1 3799 6 is_stmt 1 view .LVU2560
 7506 0096 0022     		movs	r2, #0
 7507 0098 0B99     		ldr	r1, [sp, #44]
 7508 009a 4046     		mov	r0, r8
 7509              	.LVL908:
3799:DRIVER/FatFs/source/ff.c **** 					st_dword(dj.dir + DIR_FileSize, 0);
 7510              		.loc 1 3799 6 is_stmt 0 view .LVU2561
 7511 009c FFF7FEFF 		bl	st_clust
 7512              	.LVL909:
3800:DRIVER/FatFs/source/ff.c **** 					fs->wflag = 1;
 7513              		.loc 1 3800 6 is_stmt 1 view .LVU2562
 7514 00a0 0021     		movs	r1, #0
 7515 00a2 0B98     		ldr	r0, [sp, #44]
 7516 00a4 1C30     		adds	r0, r0, #28
 7517 00a6 FFF7FEFF 		bl	st_dword
 7518              	.LVL910:
3801:DRIVER/FatFs/source/ff.c **** 					if (cl != 0) {						/* Remove the cluster chain if exist */
 7519              		.loc 1 3801 6 view .LVU2563
3801:DRIVER/FatFs/source/ff.c **** 					if (cl != 0) {						/* Remove the cluster chain if exist */
 7520              		.loc 1 3801 8 is_stmt 0 view .LVU2564
 7521 00aa 039B     		ldr	r3, [sp, #12]
3801:DRIVER/FatFs/source/ff.c **** 					if (cl != 0) {						/* Remove the cluster chain if exist */
 7522              		.loc 1 3801 16 view .LVU2565
 7523 00ac 0122     		movs	r2, #1
 7524 00ae 1A71     		strb	r2, [r3, #4]
3802:DRIVER/FatFs/source/ff.c **** 						sc = fs->winsect;
 7525              		.loc 1 3802 6 is_stmt 1 view .LVU2566
3802:DRIVER/FatFs/source/ff.c **** 						sc = fs->winsect;
 7526              		.loc 1 3802 9 is_stmt 0 view .LVU2567
 7527 00b0 9CB3     		cbz	r4, .L565
3803:DRIVER/FatFs/source/ff.c **** 						res = remove_chain(&dj.obj, cl, 0);
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 273


 7528              		.loc 1 3803 7 is_stmt 1 view .LVU2568
3803:DRIVER/FatFs/source/ff.c **** 						res = remove_chain(&dj.obj, cl, 0);
 7529              		.loc 1 3803 10 is_stmt 0 view .LVU2569
 7530 00b2 D3F83480 		ldr	r8, [r3, #52]
 7531              	.LVL911:
3804:DRIVER/FatFs/source/ff.c **** 						if (res == FR_OK) {
 7532              		.loc 1 3804 7 is_stmt 1 view .LVU2570
3804:DRIVER/FatFs/source/ff.c **** 						if (res == FR_OK) {
 7533              		.loc 1 3804 13 is_stmt 0 view .LVU2571
 7534 00b6 0022     		movs	r2, #0
 7535 00b8 2146     		mov	r1, r4
 7536 00ba 04A8     		add	r0, sp, #16
 7537 00bc FFF7FEFF 		bl	remove_chain
 7538              	.LVL912:
3805:DRIVER/FatFs/source/ff.c **** 							res = move_window(fs, sc);
 7539              		.loc 1 3805 7 is_stmt 1 view .LVU2572
3805:DRIVER/FatFs/source/ff.c **** 							res = move_window(fs, sc);
 7540              		.loc 1 3805 10 is_stmt 0 view .LVU2573
 7541 00c0 0546     		mov	r5, r0
 7542 00c2 0028     		cmp	r0, #0
 7543 00c4 AED1     		bne	.L559
3806:DRIVER/FatFs/source/ff.c **** 							fs->last_clst = cl - 1;		/* Reuse the cluster hole */
 7544              		.loc 1 3806 8 is_stmt 1 view .LVU2574
3806:DRIVER/FatFs/source/ff.c **** 							fs->last_clst = cl - 1;		/* Reuse the cluster hole */
 7545              		.loc 1 3806 14 is_stmt 0 view .LVU2575
 7546 00c6 4146     		mov	r1, r8
 7547 00c8 0398     		ldr	r0, [sp, #12]
 7548              	.LVL913:
3806:DRIVER/FatFs/source/ff.c **** 							fs->last_clst = cl - 1;		/* Reuse the cluster hole */
 7549              		.loc 1 3806 14 view .LVU2576
 7550 00ca FFF7FEFF 		bl	move_window
 7551              	.LVL914:
 7552 00ce 0546     		mov	r5, r0
 7553              	.LVL915:
3807:DRIVER/FatFs/source/ff.c **** 						}
 7554              		.loc 1 3807 8 is_stmt 1 view .LVU2577
3807:DRIVER/FatFs/source/ff.c **** 						}
 7555              		.loc 1 3807 27 is_stmt 0 view .LVU2578
 7556 00d0 013C     		subs	r4, r4, #1
 7557              	.LVL916:
3807:DRIVER/FatFs/source/ff.c **** 						}
 7558              		.loc 1 3807 22 view .LVU2579
 7559 00d2 039B     		ldr	r3, [sp, #12]
 7560 00d4 5C61     		str	r4, [r3, #20]
 7561 00d6 20E0     		b	.L565
 7562              	.LVL917:
 7563              	.L584:
3746:DRIVER/FatFs/source/ff.c **** 			}
 7564              		.loc 1 3746 9 view .LVU2580
 7565 00d8 0625     		movs	r5, #6
 7566 00da B5E7     		b	.L560
 7567              	.LVL918:
 7568              	.L585:
3761:DRIVER/FatFs/source/ff.c **** #endif
 7569              		.loc 1 3761 6 is_stmt 1 view .LVU2581
3761:DRIVER/FatFs/source/ff.c **** #endif
 7570              		.loc 1 3761 12 is_stmt 0 view .LVU2582
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 274


 7571 00dc 04A8     		add	r0, sp, #16
 7572 00de FFF7FEFF 		bl	dir_register
 7573              	.LVL919:
 7574 00e2 0546     		mov	r5, r0
 7575              	.LVL920:
3761:DRIVER/FatFs/source/ff.c **** #endif
 7576              		.loc 1 3761 12 view .LVU2583
 7577 00e4 B7E7     		b	.L563
 7578              	.L562:
3767:DRIVER/FatFs/source/ff.c **** 					res = FR_DENIED;
 7579              		.loc 1 3767 5 is_stmt 1 view .LVU2584
3767:DRIVER/FatFs/source/ff.c **** 					res = FR_DENIED;
 7580              		.loc 1 3767 15 is_stmt 0 view .LVU2585
 7581 00e6 9DF81630 		ldrb	r3, [sp, #22]	@ zero_extendqisi2
3767:DRIVER/FatFs/source/ff.c **** 					res = FR_DENIED;
 7582              		.loc 1 3767 8 view .LVU2586
 7583 00ea 13F0110F 		tst	r3, #17
 7584 00ee 13D1     		bne	.L574
3770:DRIVER/FatFs/source/ff.c **** 				}
 7585              		.loc 1 3770 6 is_stmt 1 view .LVU2587
3770:DRIVER/FatFs/source/ff.c **** 				}
 7586              		.loc 1 3770 9 is_stmt 0 view .LVU2588
 7587 00f0 14F0040F 		tst	r4, #4
 7588 00f4 B1D0     		beq	.L564
3770:DRIVER/FatFs/source/ff.c **** 				}
 7589              		.loc 1 3770 36 view .LVU2589
 7590 00f6 0825     		movs	r5, #8
 7591              	.LVL921:
3770:DRIVER/FatFs/source/ff.c **** 				}
 7592              		.loc 1 3770 36 view .LVU2590
 7593 00f8 94E7     		b	.L559
 7594              	.LVL922:
 7595              	.L561:
3814:DRIVER/FatFs/source/ff.c **** 				if (dj.obj.attr & AM_DIR) {		/* File open against a directory */
 7596              		.loc 1 3814 4 is_stmt 1 view .LVU2591
3814:DRIVER/FatFs/source/ff.c **** 				if (dj.obj.attr & AM_DIR) {		/* File open against a directory */
 7597              		.loc 1 3814 7 is_stmt 0 view .LVU2592
 7598 00fa 002D     		cmp	r5, #0
 7599 00fc 92D1     		bne	.L559
3815:DRIVER/FatFs/source/ff.c **** 					res = FR_NO_FILE;
 7600              		.loc 1 3815 5 is_stmt 1 view .LVU2593
3815:DRIVER/FatFs/source/ff.c **** 					res = FR_NO_FILE;
 7601              		.loc 1 3815 15 is_stmt 0 view .LVU2594
 7602 00fe 9DF81630 		ldrb	r3, [sp, #22]	@ zero_extendqisi2
3815:DRIVER/FatFs/source/ff.c **** 					res = FR_NO_FILE;
 7603              		.loc 1 3815 8 view .LVU2595
 7604 0102 13F0100F 		tst	r3, #16
 7605 0106 77D1     		bne	.L576
3818:DRIVER/FatFs/source/ff.c **** 						res = FR_DENIED;
 7606              		.loc 1 3818 6 is_stmt 1 view .LVU2596
3818:DRIVER/FatFs/source/ff.c **** 						res = FR_DENIED;
 7607              		.loc 1 3818 9 is_stmt 0 view .LVU2597
 7608 0108 14F0020F 		tst	r4, #2
 7609 010c 05D0     		beq	.L565
3818:DRIVER/FatFs/source/ff.c **** 						res = FR_DENIED;
 7610              		.loc 1 3818 28 discriminator 1 view .LVU2598
 7611 010e 13F0010F 		tst	r3, #1
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 275


 7612 0112 02D0     		beq	.L565
3819:DRIVER/FatFs/source/ff.c **** 					}
 7613              		.loc 1 3819 11 view .LVU2599
 7614 0114 0725     		movs	r5, #7
 7615              	.LVL923:
3819:DRIVER/FatFs/source/ff.c **** 					}
 7616              		.loc 1 3819 11 view .LVU2600
 7617 0116 85E7     		b	.L559
 7618              	.LVL924:
 7619              	.L574:
3768:DRIVER/FatFs/source/ff.c **** 				} else {
 7620              		.loc 1 3768 10 view .LVU2601
 7621 0118 0725     		movs	r5, #7
 7622              	.LVL925:
 7623              	.L565:
3824:DRIVER/FatFs/source/ff.c **** 			if (mode & FA_CREATE_ALWAYS) mode |= FA_MODIFIED;	/* Set file change flag if created or overwrit
 7624              		.loc 1 3824 3 is_stmt 1 view .LVU2602
3824:DRIVER/FatFs/source/ff.c **** 			if (mode & FA_CREATE_ALWAYS) mode |= FA_MODIFIED;	/* Set file change flag if created or overwrit
 7625              		.loc 1 3824 6 is_stmt 0 view .LVU2603
 7626 011a 002D     		cmp	r5, #0
 7627 011c 82D1     		bne	.L559
3825:DRIVER/FatFs/source/ff.c **** 			fp->dir_sect = fs->winsect;			/* Pointer to the directory entry */
 7628              		.loc 1 3825 4 is_stmt 1 view .LVU2604
3825:DRIVER/FatFs/source/ff.c **** 			fp->dir_sect = fs->winsect;			/* Pointer to the directory entry */
 7629              		.loc 1 3825 7 is_stmt 0 view .LVU2605
 7630 011e 17F0080F 		tst	r7, #8
 7631 0122 01D0     		beq	.L566
3825:DRIVER/FatFs/source/ff.c **** 			fp->dir_sect = fs->winsect;			/* Pointer to the directory entry */
 7632              		.loc 1 3825 33 is_stmt 1 discriminator 1 view .LVU2606
3825:DRIVER/FatFs/source/ff.c **** 			fp->dir_sect = fs->winsect;			/* Pointer to the directory entry */
 7633              		.loc 1 3825 38 is_stmt 0 discriminator 1 view .LVU2607
 7634 0124 47F04007 		orr	r7, r7, #64
 7635              	.LVL926:
 7636              	.L566:
3826:DRIVER/FatFs/source/ff.c **** 			fp->dir_ptr = dj.dir;
 7637              		.loc 1 3826 4 is_stmt 1 view .LVU2608
3826:DRIVER/FatFs/source/ff.c **** 			fp->dir_ptr = dj.dir;
 7638              		.loc 1 3826 21 is_stmt 0 view .LVU2609
 7639 0128 DDF80CA0 		ldr	r10, [sp, #12]
 7640 012c DAF83430 		ldr	r3, [r10, #52]
3826:DRIVER/FatFs/source/ff.c **** 			fp->dir_ptr = dj.dir;
 7641              		.loc 1 3826 17 view .LVU2610
 7642 0130 3362     		str	r3, [r6, #32]
3827:DRIVER/FatFs/source/ff.c **** #if FF_FS_LOCK
 7643              		.loc 1 3827 4 is_stmt 1 view .LVU2611
3827:DRIVER/FatFs/source/ff.c **** #if FF_FS_LOCK
 7644              		.loc 1 3827 20 is_stmt 0 view .LVU2612
 7645 0132 DDF82C80 		ldr	r8, [sp, #44]
3827:DRIVER/FatFs/source/ff.c **** #if FF_FS_LOCK
 7646              		.loc 1 3827 16 view .LVU2613
 7647 0136 C6F82480 		str	r8, [r6, #36]
3845:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
 7648              		.loc 1 3845 3 is_stmt 1 view .LVU2614
3855:DRIVER/FatFs/source/ff.c **** 				fp->obj.objsize = ld_dword(dj.dir + DIR_FileSize);
 7649              		.loc 1 3855 5 view .LVU2615
3855:DRIVER/FatFs/source/ff.c **** 				fp->obj.objsize = ld_dword(dj.dir + DIR_FileSize);
 7650              		.loc 1 3855 22 is_stmt 0 view .LVU2616
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 276


 7651 013a 4146     		mov	r1, r8
 7652 013c 5046     		mov	r0, r10
 7653 013e FFF7FEFF 		bl	ld_clust
 7654              	.LVL927:
 7655 0142 0446     		mov	r4, r0
3855:DRIVER/FatFs/source/ff.c **** 				fp->obj.objsize = ld_dword(dj.dir + DIR_FileSize);
 7656              		.loc 1 3855 20 view .LVU2617
 7657 0144 B060     		str	r0, [r6, #8]
3856:DRIVER/FatFs/source/ff.c **** 			}
 7658              		.loc 1 3856 5 is_stmt 1 view .LVU2618
3856:DRIVER/FatFs/source/ff.c **** 			}
 7659              		.loc 1 3856 23 is_stmt 0 view .LVU2619
 7660 0146 08F11C00 		add	r0, r8, #28
 7661 014a FFF7FEFF 		bl	ld_dword
 7662              	.LVL928:
 7663 014e 8046     		mov	r8, r0
3856:DRIVER/FatFs/source/ff.c **** 			}
 7664              		.loc 1 3856 21 view .LVU2620
 7665 0150 F060     		str	r0, [r6, #12]
3861:DRIVER/FatFs/source/ff.c **** 			fp->obj.id = fs->id;
 7666              		.loc 1 3861 4 is_stmt 1 view .LVU2621
3861:DRIVER/FatFs/source/ff.c **** 			fp->obj.id = fs->id;
 7667              		.loc 1 3861 15 is_stmt 0 view .LVU2622
 7668 0152 C6F800A0 		str	r10, [r6]
3862:DRIVER/FatFs/source/ff.c **** 			fp->flag = mode;	/* Set file access mode */
 7669              		.loc 1 3862 4 is_stmt 1 view .LVU2623
3862:DRIVER/FatFs/source/ff.c **** 			fp->flag = mode;	/* Set file access mode */
 7670              		.loc 1 3862 19 is_stmt 0 view .LVU2624
 7671 0156 BAF80630 		ldrh	r3, [r10, #6]
3862:DRIVER/FatFs/source/ff.c **** 			fp->flag = mode;	/* Set file access mode */
 7672              		.loc 1 3862 15 view .LVU2625
 7673 015a B380     		strh	r3, [r6, #4]	@ movhi
3863:DRIVER/FatFs/source/ff.c **** 			fp->err = 0;		/* Clear error flag */
 7674              		.loc 1 3863 4 is_stmt 1 view .LVU2626
3863:DRIVER/FatFs/source/ff.c **** 			fp->err = 0;		/* Clear error flag */
 7675              		.loc 1 3863 13 is_stmt 0 view .LVU2627
 7676 015c 3774     		strb	r7, [r6, #16]
3864:DRIVER/FatFs/source/ff.c **** 			fp->sect = 0;		/* Invalidate current data sector */
 7677              		.loc 1 3864 4 is_stmt 1 view .LVU2628
3864:DRIVER/FatFs/source/ff.c **** 			fp->sect = 0;		/* Invalidate current data sector */
 7678              		.loc 1 3864 12 is_stmt 0 view .LVU2629
 7679 015e 0021     		movs	r1, #0
 7680 0160 7174     		strb	r1, [r6, #17]
3865:DRIVER/FatFs/source/ff.c **** 			fp->fptr = 0;		/* Set file pointer top of the file */
 7681              		.loc 1 3865 4 is_stmt 1 view .LVU2630
3865:DRIVER/FatFs/source/ff.c **** 			fp->fptr = 0;		/* Set file pointer top of the file */
 7682              		.loc 1 3865 13 is_stmt 0 view .LVU2631
 7683 0162 F161     		str	r1, [r6, #28]
3866:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY
 7684              		.loc 1 3866 4 is_stmt 1 view .LVU2632
3866:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY
 7685              		.loc 1 3866 13 is_stmt 0 view .LVU2633
 7686 0164 7161     		str	r1, [r6, #20]
3869:DRIVER/FatFs/source/ff.c **** #endif
 7687              		.loc 1 3869 4 is_stmt 1 view .LVU2634
3869:DRIVER/FatFs/source/ff.c **** #endif
 7688              		.loc 1 3869 13 is_stmt 0 view .LVU2635
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 277


 7689 0166 06F12809 		add	r9, r6, #40
3869:DRIVER/FatFs/source/ff.c **** #endif
 7690              		.loc 1 3869 4 view .LVU2636
 7691 016a 4FF48052 		mov	r2, #4096
 7692 016e 4846     		mov	r0, r9
 7693 0170 FFF7FEFF 		bl	memset
 7694              	.LVL929:
3871:DRIVER/FatFs/source/ff.c **** 				fp->fptr = fp->obj.objsize;			/* Offset to seek */
 7695              		.loc 1 3871 4 is_stmt 1 view .LVU2637
3871:DRIVER/FatFs/source/ff.c **** 				fp->fptr = fp->obj.objsize;			/* Offset to seek */
 7696              		.loc 1 3871 7 is_stmt 0 view .LVU2638
 7697 0174 17F0200F 		tst	r7, #32
 7698 0178 3AD0     		beq	.L567
3871:DRIVER/FatFs/source/ff.c **** 				fp->fptr = fp->obj.objsize;			/* Offset to seek */
 7699              		.loc 1 3871 28 discriminator 1 view .LVU2639
 7700 017a B8F1000F 		cmp	r8, #0
 7701 017e 37D0     		beq	.L567
3872:DRIVER/FatFs/source/ff.c **** 				bcs = (DWORD)fs->csize * SS(fs);	/* Cluster size in byte */
 7702              		.loc 1 3872 5 is_stmt 1 view .LVU2640
3872:DRIVER/FatFs/source/ff.c **** 				bcs = (DWORD)fs->csize * SS(fs);	/* Cluster size in byte */
 7703              		.loc 1 3872 14 is_stmt 0 view .LVU2641
 7704 0180 C6F81480 		str	r8, [r6, #20]
3873:DRIVER/FatFs/source/ff.c **** 				clst = fp->obj.sclust;				/* Follow the cluster chain */
 7705              		.loc 1 3873 5 is_stmt 1 view .LVU2642
3873:DRIVER/FatFs/source/ff.c **** 				clst = fp->obj.sclust;				/* Follow the cluster chain */
 7706              		.loc 1 3873 20 is_stmt 0 view .LVU2643
 7707 0184 BAF80A70 		ldrh	r7, [r10, #10]
 7708              	.LVL930:
3873:DRIVER/FatFs/source/ff.c **** 				clst = fp->obj.sclust;				/* Follow the cluster chain */
 7709              		.loc 1 3873 30 view .LVU2644
 7710 0188 BAF80C30 		ldrh	r3, [r10, #12]
3873:DRIVER/FatFs/source/ff.c **** 				clst = fp->obj.sclust;				/* Follow the cluster chain */
 7711              		.loc 1 3873 9 view .LVU2645
 7712 018c 03FB07F7 		mul	r7, r3, r7
 7713              	.LVL931:
3874:DRIVER/FatFs/source/ff.c **** 				for (ofs = fp->obj.objsize; res == FR_OK && ofs > bcs; ofs -= bcs) {
 7714              		.loc 1 3874 5 is_stmt 1 view .LVU2646
3875:DRIVER/FatFs/source/ff.c **** 					clst = get_fat(&fp->obj, clst);
 7715              		.loc 1 3875 5 view .LVU2647
3875:DRIVER/FatFs/source/ff.c **** 					clst = get_fat(&fp->obj, clst);
 7716              		.loc 1 3875 5 is_stmt 0 view .LVU2648
 7717 0190 02E0     		b	.L568
 7718              	.LVL932:
 7719              	.L578:
3877:DRIVER/FatFs/source/ff.c **** 					if (clst == 0xFFFFFFFF) res = FR_DISK_ERR;
 7720              		.loc 1 3877 25 view .LVU2649
 7721 0192 0225     		movs	r5, #2
 7722              	.LVL933:
 7723              	.L569:
3875:DRIVER/FatFs/source/ff.c **** 					clst = get_fat(&fp->obj, clst);
 7724              		.loc 1 3875 64 is_stmt 1 discriminator 2 view .LVU2650
 7725 0194 A8EB0708 		sub	r8, r8, r7
 7726              	.LVL934:
 7727              	.L568:
3875:DRIVER/FatFs/source/ff.c **** 					clst = get_fat(&fp->obj, clst);
 7728              		.loc 1 3875 46 discriminator 1 view .LVU2651
 7729 0198 6DB9     		cbnz	r5, .L570
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 278


3875:DRIVER/FatFs/source/ff.c **** 					clst = get_fat(&fp->obj, clst);
 7730              		.loc 1 3875 46 is_stmt 0 discriminator 3 view .LVU2652
 7731 019a B845     		cmp	r8, r7
 7732 019c 0BD9     		bls	.L570
3876:DRIVER/FatFs/source/ff.c **** 					if (clst <= 1) res = FR_INT_ERR;
 7733              		.loc 1 3876 6 is_stmt 1 view .LVU2653
3876:DRIVER/FatFs/source/ff.c **** 					if (clst <= 1) res = FR_INT_ERR;
 7734              		.loc 1 3876 13 is_stmt 0 view .LVU2654
 7735 019e 2146     		mov	r1, r4
 7736 01a0 3046     		mov	r0, r6
 7737 01a2 FFF7FEFF 		bl	get_fat
 7738              	.LVL935:
 7739 01a6 0446     		mov	r4, r0
 7740              	.LVL936:
3877:DRIVER/FatFs/source/ff.c **** 					if (clst == 0xFFFFFFFF) res = FR_DISK_ERR;
 7741              		.loc 1 3877 6 is_stmt 1 view .LVU2655
3877:DRIVER/FatFs/source/ff.c **** 					if (clst == 0xFFFFFFFF) res = FR_DISK_ERR;
 7742              		.loc 1 3877 9 is_stmt 0 view .LVU2656
 7743 01a8 0128     		cmp	r0, #1
 7744 01aa F2D9     		bls	.L578
3878:DRIVER/FatFs/source/ff.c **** 				}
 7745              		.loc 1 3878 6 is_stmt 1 view .LVU2657
3878:DRIVER/FatFs/source/ff.c **** 				}
 7746              		.loc 1 3878 9 is_stmt 0 view .LVU2658
 7747 01ac B0F1FF3F 		cmp	r0, #-1
 7748 01b0 F0D1     		bne	.L569
3878:DRIVER/FatFs/source/ff.c **** 				}
 7749              		.loc 1 3878 34 view .LVU2659
 7750 01b2 0125     		movs	r5, #1
 7751              	.LVL937:
3878:DRIVER/FatFs/source/ff.c **** 				}
 7752              		.loc 1 3878 34 view .LVU2660
 7753 01b4 EEE7     		b	.L569
 7754              	.LVL938:
 7755              	.L570:
3880:DRIVER/FatFs/source/ff.c **** 				if (res == FR_OK && ofs % SS(fs)) {	/* Fill sector buffer if not on the sector boundary */
 7756              		.loc 1 3880 5 is_stmt 1 view .LVU2661
3880:DRIVER/FatFs/source/ff.c **** 				if (res == FR_OK && ofs % SS(fs)) {	/* Fill sector buffer if not on the sector boundary */
 7757              		.loc 1 3880 15 is_stmt 0 view .LVU2662
 7758 01b6 B461     		str	r4, [r6, #24]
3881:DRIVER/FatFs/source/ff.c **** 					sc = clst2sect(fs, clst);
 7759              		.loc 1 3881 5 is_stmt 1 view .LVU2663
3881:DRIVER/FatFs/source/ff.c **** 					sc = clst2sect(fs, clst);
 7760              		.loc 1 3881 8 is_stmt 0 view .LVU2664
 7761 01b8 002D     		cmp	r5, #0
 7762 01ba 7FF433AF 		bne	.L559
3881:DRIVER/FatFs/source/ff.c **** 					sc = clst2sect(fs, clst);
 7763              		.loc 1 3881 31 discriminator 1 view .LVU2665
 7764 01be 039F     		ldr	r7, [sp, #12]
 7765              	.LVL939:
3881:DRIVER/FatFs/source/ff.c **** 					sc = clst2sect(fs, clst);
 7766              		.loc 1 3881 31 discriminator 1 view .LVU2666
 7767 01c0 B7F80CA0 		ldrh	r10, [r7, #12]
3881:DRIVER/FatFs/source/ff.c **** 					sc = clst2sect(fs, clst);
 7768              		.loc 1 3881 29 discriminator 1 view .LVU2667
 7769 01c4 B8FBFAF3 		udiv	r3, r8, r10
 7770 01c8 0AFB1383 		mls	r3, r10, r3, r8
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 279


3881:DRIVER/FatFs/source/ff.c **** 					sc = clst2sect(fs, clst);
 7771              		.loc 1 3881 22 discriminator 1 view .LVU2668
 7772 01cc 83B1     		cbz	r3, .L567
3882:DRIVER/FatFs/source/ff.c **** 					if (sc == 0) {
 7773              		.loc 1 3882 6 is_stmt 1 view .LVU2669
3882:DRIVER/FatFs/source/ff.c **** 					if (sc == 0) {
 7774              		.loc 1 3882 11 is_stmt 0 view .LVU2670
 7775 01ce 2146     		mov	r1, r4
 7776 01d0 3846     		mov	r0, r7
 7777 01d2 FFF7FEFF 		bl	clst2sect
 7778              	.LVL940:
3883:DRIVER/FatFs/source/ff.c **** 						res = FR_INT_ERR;
 7779              		.loc 1 3883 6 is_stmt 1 view .LVU2671
3883:DRIVER/FatFs/source/ff.c **** 						res = FR_INT_ERR;
 7780              		.loc 1 3883 9 is_stmt 0 view .LVU2672
 7781 01d6 08B9     		cbnz	r0, .L586
3884:DRIVER/FatFs/source/ff.c **** 					} else {
 7782              		.loc 1 3884 11 view .LVU2673
 7783 01d8 0225     		movs	r5, #2
 7784              	.LVL941:
3884:DRIVER/FatFs/source/ff.c **** 					} else {
 7785              		.loc 1 3884 11 view .LVU2674
 7786 01da 23E7     		b	.L559
 7787              	.LVL942:
 7788              	.L586:
3886:DRIVER/FatFs/source/ff.c **** #if !FF_FS_TINY
 7789              		.loc 1 3886 7 is_stmt 1 view .LVU2675
3886:DRIVER/FatFs/source/ff.c **** #if !FF_FS_TINY
 7790              		.loc 1 3886 23 is_stmt 0 view .LVU2676
 7791 01dc B8FBFAF2 		udiv	r2, r8, r10
3886:DRIVER/FatFs/source/ff.c **** #if !FF_FS_TINY
 7792              		.loc 1 3886 21 view .LVU2677
 7793 01e0 0244     		add	r2, r2, r0
3886:DRIVER/FatFs/source/ff.c **** #if !FF_FS_TINY
 7794              		.loc 1 3886 16 view .LVU2678
 7795 01e2 F261     		str	r2, [r6, #28]
3888:DRIVER/FatFs/source/ff.c **** #endif
 7796              		.loc 1 3888 7 is_stmt 1 view .LVU2679
3888:DRIVER/FatFs/source/ff.c **** #endif
 7797              		.loc 1 3888 11 is_stmt 0 view .LVU2680
 7798 01e4 0123     		movs	r3, #1
 7799 01e6 4946     		mov	r1, r9
 7800 01e8 7878     		ldrb	r0, [r7, #1]	@ zero_extendqisi2
 7801              	.LVL943:
3888:DRIVER/FatFs/source/ff.c **** #endif
 7802              		.loc 1 3888 11 view .LVU2681
 7803 01ea FFF7FEFF 		bl	disk_read
 7804              	.LVL944:
3888:DRIVER/FatFs/source/ff.c **** #endif
 7805              		.loc 1 3888 10 view .LVU2682
 7806 01ee 28B9     		cbnz	r0, .L581
 7807              	.LVL945:
 7808              	.L567:
3899:DRIVER/FatFs/source/ff.c **** 	}
 7809              		.loc 1 3899 16 is_stmt 1 view .LVU2683
3902:DRIVER/FatFs/source/ff.c **** 
 7810              		.loc 1 3902 2 view .LVU2684
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 280


3902:DRIVER/FatFs/source/ff.c **** 
 7811              		.loc 1 3902 5 is_stmt 0 view .LVU2685
 7812 01f0 002D     		cmp	r5, #0
 7813 01f2 3FF419AF 		beq	.L558
3902:DRIVER/FatFs/source/ff.c **** 
 7814              		.loc 1 3902 5 view .LVU2686
 7815 01f6 15E7     		b	.L559
 7816              	.LVL946:
 7817              	.L576:
3816:DRIVER/FatFs/source/ff.c **** 				} else {
 7818              		.loc 1 3816 10 view .LVU2687
 7819 01f8 0425     		movs	r5, #4
 7820              	.LVL947:
3816:DRIVER/FatFs/source/ff.c **** 				} else {
 7821              		.loc 1 3816 10 view .LVU2688
 7822 01fa 13E7     		b	.L559
 7823              	.LVL948:
 7824              	.L581:
3888:DRIVER/FatFs/source/ff.c **** #endif
 7825              		.loc 1 3888 68 view .LVU2689
 7826 01fc 0125     		movs	r5, #1
 7827              	.LVL949:
3888:DRIVER/FatFs/source/ff.c **** #endif
 7828              		.loc 1 3888 68 view .LVU2690
 7829 01fe 11E7     		b	.L559
 7830              	.LVL950:
 7831              	.L572:
3734:DRIVER/FatFs/source/ff.c **** 
 7832              		.loc 1 3734 18 view .LVU2691
 7833 0200 0925     		movs	r5, #9
 7834 0202 11E7     		b	.L558
 7835              		.cfi_endproc
 7836              	.LFE40:
 7838              		.section	.text.f_read,"ax",%progbits
 7839              		.align	1
 7840              		.global	f_read
 7841              		.syntax unified
 7842              		.thumb
 7843              		.thumb_func
 7845              	f_read:
 7846              	.LVL951:
 7847              	.LFB41:
3920:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
 7848              		.loc 1 3920 1 is_stmt 1 view -0
 7849              		.cfi_startproc
 7850              		@ args = 0, pretend = 0, frame = 16
 7851              		@ frame_needed = 0, uses_anonymous_args = 0
3920:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
 7852              		.loc 1 3920 1 is_stmt 0 view .LVU2693
 7853 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 7854              	.LCFI57:
 7855              		.cfi_def_cfa_offset 36
 7856              		.cfi_offset 4, -36
 7857              		.cfi_offset 5, -32
 7858              		.cfi_offset 6, -28
 7859              		.cfi_offset 7, -24
 7860              		.cfi_offset 8, -20
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 281


 7861              		.cfi_offset 9, -16
 7862              		.cfi_offset 10, -12
 7863              		.cfi_offset 11, -8
 7864              		.cfi_offset 14, -4
 7865 0004 85B0     		sub	sp, sp, #20
 7866              	.LCFI58:
 7867              		.cfi_def_cfa_offset 56
 7868 0006 0446     		mov	r4, r0
 7869 0008 0F46     		mov	r7, r1
 7870 000a 1546     		mov	r5, r2
 7871 000c 9846     		mov	r8, r3
3921:DRIVER/FatFs/source/ff.c **** 	FATFS *fs;
 7872              		.loc 1 3921 2 is_stmt 1 view .LVU2694
3922:DRIVER/FatFs/source/ff.c **** 	DWORD clst;
 7873              		.loc 1 3922 2 view .LVU2695
3923:DRIVER/FatFs/source/ff.c **** 	LBA_t sect;
 7874              		.loc 1 3923 2 view .LVU2696
3924:DRIVER/FatFs/source/ff.c **** 	FSIZE_t remain;
 7875              		.loc 1 3924 2 view .LVU2697
3925:DRIVER/FatFs/source/ff.c **** 	UINT rcnt, cc, csect;
 7876              		.loc 1 3925 2 view .LVU2698
3926:DRIVER/FatFs/source/ff.c **** 	BYTE *rbuff = (BYTE*)buff;
 7877              		.loc 1 3926 2 view .LVU2699
3927:DRIVER/FatFs/source/ff.c **** 
 7878              		.loc 1 3927 2 view .LVU2700
 7879              	.LVL952:
3930:DRIVER/FatFs/source/ff.c **** 	res = validate(&fp->obj, &fs);				/* Check validity of the file object */
 7880              		.loc 1 3930 2 view .LVU2701
3930:DRIVER/FatFs/source/ff.c **** 	res = validate(&fp->obj, &fs);				/* Check validity of the file object */
 7881              		.loc 1 3930 6 is_stmt 0 view .LVU2702
 7882 000e 0023     		movs	r3, #0
 7883              	.LVL953:
3930:DRIVER/FatFs/source/ff.c **** 	res = validate(&fp->obj, &fs);				/* Check validity of the file object */
 7884              		.loc 1 3930 6 view .LVU2703
 7885 0010 C8F80030 		str	r3, [r8]
3931:DRIVER/FatFs/source/ff.c **** 	if (res != FR_OK || (res = (FRESULT)fp->err) != FR_OK) LEAVE_FF(fs, res);	/* Check validity */
 7886              		.loc 1 3931 2 is_stmt 1 view .LVU2704
3931:DRIVER/FatFs/source/ff.c **** 	if (res != FR_OK || (res = (FRESULT)fp->err) != FR_OK) LEAVE_FF(fs, res);	/* Check validity */
 7887              		.loc 1 3931 8 is_stmt 0 view .LVU2705
 7888 0014 03A9     		add	r1, sp, #12
 7889              	.LVL954:
3931:DRIVER/FatFs/source/ff.c **** 	if (res != FR_OK || (res = (FRESULT)fp->err) != FR_OK) LEAVE_FF(fs, res);	/* Check validity */
 7890              		.loc 1 3931 8 view .LVU2706
 7891 0016 FFF7FEFF 		bl	validate
 7892              	.LVL955:
3932:DRIVER/FatFs/source/ff.c **** 	if (!(fp->flag & FA_READ)) LEAVE_FF(fs, FR_DENIED); /* Check access mode */
 7893              		.loc 1 3932 2 is_stmt 1 view .LVU2707
3932:DRIVER/FatFs/source/ff.c **** 	if (!(fp->flag & FA_READ)) LEAVE_FF(fs, FR_DENIED); /* Check access mode */
 7894              		.loc 1 3932 5 is_stmt 0 view .LVU2708
 7895 001a 0190     		str	r0, [sp, #4]
 7896 001c 0028     		cmp	r0, #0
 7897 001e 40F0B380 		bne	.L590
3932:DRIVER/FatFs/source/ff.c **** 	if (!(fp->flag & FA_READ)) LEAVE_FF(fs, FR_DENIED); /* Check access mode */
 7898              		.loc 1 3932 27 discriminator 2 view .LVU2709
 7899 0022 637C     		ldrb	r3, [r4, #17]	@ zero_extendqisi2
 7900 0024 0193     		str	r3, [sp, #4]
 7901              	.LVL956:
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 282


3932:DRIVER/FatFs/source/ff.c **** 	if (!(fp->flag & FA_READ)) LEAVE_FF(fs, FR_DENIED); /* Check access mode */
 7902              		.loc 1 3932 19 discriminator 2 view .LVU2710
 7903 0026 002B     		cmp	r3, #0
 7904 0028 40F0AE80 		bne	.L590
3933:DRIVER/FatFs/source/ff.c **** 	remain = fp->obj.objsize - fp->fptr;
 7905              		.loc 1 3933 2 is_stmt 1 view .LVU2711
3933:DRIVER/FatFs/source/ff.c **** 	remain = fp->obj.objsize - fp->fptr;
 7906              		.loc 1 3933 10 is_stmt 0 view .LVU2712
 7907 002c 237C     		ldrb	r3, [r4, #16]	@ zero_extendqisi2
 7908              	.LVL957:
3933:DRIVER/FatFs/source/ff.c **** 	remain = fp->obj.objsize - fp->fptr;
 7909              		.loc 1 3933 5 view .LVU2713
 7910 002e 13F0010F 		tst	r3, #1
 7911 0032 00F0C880 		beq	.L611
3934:DRIVER/FatFs/source/ff.c **** 	if (btr > remain) btr = (UINT)remain;		/* Truncate btr by remaining bytes */
 7912              		.loc 1 3934 2 is_stmt 1 view .LVU2714
3934:DRIVER/FatFs/source/ff.c **** 	if (btr > remain) btr = (UINT)remain;		/* Truncate btr by remaining bytes */
 7913              		.loc 1 3934 18 is_stmt 0 view .LVU2715
 7914 0036 E668     		ldr	r6, [r4, #12]
3934:DRIVER/FatFs/source/ff.c **** 	if (btr > remain) btr = (UINT)remain;		/* Truncate btr by remaining bytes */
 7915              		.loc 1 3934 31 view .LVU2716
 7916 0038 6369     		ldr	r3, [r4, #20]
3934:DRIVER/FatFs/source/ff.c **** 	if (btr > remain) btr = (UINT)remain;		/* Truncate btr by remaining bytes */
 7917              		.loc 1 3934 9 view .LVU2717
 7918 003a F61A     		subs	r6, r6, r3
 7919              	.LVL958:
3935:DRIVER/FatFs/source/ff.c **** 
 7920              		.loc 1 3935 2 is_stmt 1 view .LVU2718
3935:DRIVER/FatFs/source/ff.c **** 
 7921              		.loc 1 3935 5 is_stmt 0 view .LVU2719
 7922 003c AE42     		cmp	r6, r5
 7923 003e 61D3     		bcc	.L609
 7924 0040 2E46     		mov	r6, r5
 7925              	.LVL959:
3935:DRIVER/FatFs/source/ff.c **** 
 7926              		.loc 1 3935 5 view .LVU2720
 7927 0042 5FE0     		b	.L609
 7928              	.LVL960:
 7929              	.L595:
3950:DRIVER/FatFs/source/ff.c **** 					}
 7930              		.loc 1 3950 7 is_stmt 1 view .LVU2721
3950:DRIVER/FatFs/source/ff.c **** 					}
 7931              		.loc 1 3950 14 is_stmt 0 view .LVU2722
 7932 0044 A169     		ldr	r1, [r4, #24]
 7933 0046 2046     		mov	r0, r4
 7934 0048 FFF7FEFF 		bl	get_fat
 7935              	.LVL961:
3950:DRIVER/FatFs/source/ff.c **** 					}
 7936              		.loc 1 3950 14 view .LVU2723
 7937 004c 6EE0     		b	.L596
 7938              	.L618:
3953:DRIVER/FatFs/source/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 7939              		.loc 1 3953 19 is_stmt 1 discriminator 1 view .LVU2724
 7940 004e 4FF0020A 		mov	r10, #2
 7941 0052 84F811A0 		strb	r10, [r4, #17]
3953:DRIVER/FatFs/source/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 7942              		.loc 1 3953 19 discriminator 1 view .LVU2725
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 283


 7943 0056 CDF804A0 		str	r10, [sp, #4]
 7944              	.LVL962:
3953:DRIVER/FatFs/source/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 7945              		.loc 1 3953 19 is_stmt 0 discriminator 1 view .LVU2726
 7946 005a 95E0     		b	.L590
 7947              	.LVL963:
 7948              	.L619:
3954:DRIVER/FatFs/source/ff.c **** 				fp->clust = clst;				/* Update current cluster */
 7949              		.loc 1 3954 29 is_stmt 1 discriminator 1 view .LVU2727
 7950 005c 4FF0010A 		mov	r10, #1
 7951 0060 84F811A0 		strb	r10, [r4, #17]
3954:DRIVER/FatFs/source/ff.c **** 				fp->clust = clst;				/* Update current cluster */
 7952              		.loc 1 3954 29 discriminator 1 view .LVU2728
 7953 0064 CDF804A0 		str	r10, [sp, #4]
 7954              	.LVL964:
3954:DRIVER/FatFs/source/ff.c **** 				fp->clust = clst;				/* Update current cluster */
 7955              		.loc 1 3954 29 is_stmt 0 discriminator 1 view .LVU2729
 7956 0068 8EE0     		b	.L590
 7957              	.LVL965:
 7958              	.L620:
3958:DRIVER/FatFs/source/ff.c **** 			sect += csect;
 7959              		.loc 1 3958 19 is_stmt 1 discriminator 1 view .LVU2730
 7960 006a 4FF0020A 		mov	r10, #2
 7961 006e 84F811A0 		strb	r10, [r4, #17]
3958:DRIVER/FatFs/source/ff.c **** 			sect += csect;
 7962              		.loc 1 3958 19 discriminator 1 view .LVU2731
 7963 0072 CDF804A0 		str	r10, [sp, #4]
 7964              	.LVL966:
3958:DRIVER/FatFs/source/ff.c **** 			sect += csect;
 7965              		.loc 1 3958 19 is_stmt 0 discriminator 1 view .LVU2732
 7966 0076 87E0     		b	.L590
 7967              	.LVL967:
 7968              	.L602:
3965:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY && FF_FS_MINIMIZE <= 2		/* Replace one of the read sectors with cached data if 
 7969              		.loc 1 3965 79 is_stmt 1 discriminator 2 view .LVU2733
3972:DRIVER/FatFs/source/ff.c **** 					memcpy(rbuff + ((fp->sect - sect) * SS(fs)), fp->buf, SS(fs));
 7970              		.loc 1 3972 5 discriminator 2 view .LVU2734
3972:DRIVER/FatFs/source/ff.c **** 					memcpy(rbuff + ((fp->sect - sect) * SS(fs)), fp->buf, SS(fs));
 7971              		.loc 1 3972 9 is_stmt 0 discriminator 2 view .LVU2735
 7972 0078 94F91030 		ldrsb	r3, [r4, #16]
3972:DRIVER/FatFs/source/ff.c **** 					memcpy(rbuff + ((fp->sect - sect) * SS(fs)), fp->buf, SS(fs));
 7973              		.loc 1 3972 8 discriminator 2 view .LVU2736
 7974 007c 002B     		cmp	r3, #0
 7975 007e 04DB     		blt	.L615
 7976              	.L603:
3977:DRIVER/FatFs/source/ff.c **** 				continue;
 7977              		.loc 1 3977 5 is_stmt 1 view .LVU2737
3977:DRIVER/FatFs/source/ff.c **** 				continue;
 7978              		.loc 1 3977 12 is_stmt 0 view .LVU2738
 7979 0080 039B     		ldr	r3, [sp, #12]
 7980 0082 9D89     		ldrh	r5, [r3, #12]
 7981              	.LVL968:
3977:DRIVER/FatFs/source/ff.c **** 				continue;
 7982              		.loc 1 3977 10 view .LVU2739
 7983 0084 0AFB05F5 		mul	r5, r10, r5
 7984              	.LVL969:
3978:DRIVER/FatFs/source/ff.c **** 			}
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 284


 7985              		.loc 1 3978 5 is_stmt 1 view .LVU2740
 7986 0088 32E0     		b	.L604
 7987              	.LVL970:
 7988              	.L615:
3972:DRIVER/FatFs/source/ff.c **** 					memcpy(rbuff + ((fp->sect - sect) * SS(fs)), fp->buf, SS(fs));
 7989              		.loc 1 3972 36 is_stmt 0 discriminator 1 view .LVU2741
 7990 008a E369     		ldr	r3, [r4, #28]
3972:DRIVER/FatFs/source/ff.c **** 					memcpy(rbuff + ((fp->sect - sect) * SS(fs)), fp->buf, SS(fs));
 7991              		.loc 1 3972 43 discriminator 1 view .LVU2742
 7992 008c A3EB0903 		sub	r3, r3, r9
3972:DRIVER/FatFs/source/ff.c **** 					memcpy(rbuff + ((fp->sect - sect) * SS(fs)), fp->buf, SS(fs));
 7993              		.loc 1 3972 31 discriminator 1 view .LVU2743
 7994 0090 5345     		cmp	r3, r10
 7995 0092 F5D2     		bcs	.L603
3973:DRIVER/FatFs/source/ff.c **** 				}
 7996              		.loc 1 3973 6 is_stmt 1 view .LVU2744
3973:DRIVER/FatFs/source/ff.c **** 				}
 7997              		.loc 1 3973 42 is_stmt 0 view .LVU2745
 7998 0094 039A     		ldr	r2, [sp, #12]
 7999 0096 9289     		ldrh	r2, [r2, #12]
3973:DRIVER/FatFs/source/ff.c **** 				}
 8000              		.loc 1 3973 6 view .LVU2746
 8001 0098 04F12801 		add	r1, r4, #40
 8002 009c 02FB0370 		mla	r0, r2, r3, r7
 8003 00a0 FFF7FEFF 		bl	memcpy
 8004              	.LVL971:
 8005 00a4 ECE7     		b	.L603
 8006              	.L600:
3981:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY
 8007              		.loc 1 3981 4 is_stmt 1 view .LVU2747
3981:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY
 8008              		.loc 1 3981 10 is_stmt 0 view .LVU2748
 8009 00a6 E269     		ldr	r2, [r4, #28]
3981:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY
 8010              		.loc 1 3981 7 view .LVU2749
 8011 00a8 4A45     		cmp	r2, r9
 8012 00aa 0DD0     		beq	.L605
3983:DRIVER/FatFs/source/ff.c **** 					if (disk_write(fs->pdrv, fp->buf, fp->sect, 1) != RES_OK) ABORT(fs, FR_DISK_ERR);
 8013              		.loc 1 3983 5 is_stmt 1 view .LVU2750
3983:DRIVER/FatFs/source/ff.c **** 					if (disk_write(fs->pdrv, fp->buf, fp->sect, 1) != RES_OK) ABORT(fs, FR_DISK_ERR);
 8014              		.loc 1 3983 9 is_stmt 0 view .LVU2751
 8015 00ac 94F91030 		ldrsb	r3, [r4, #16]
3983:DRIVER/FatFs/source/ff.c **** 					if (disk_write(fs->pdrv, fp->buf, fp->sect, 1) != RES_OK) ABORT(fs, FR_DISK_ERR);
 8016              		.loc 1 3983 8 view .LVU2752
 8017 00b0 002B     		cmp	r3, #0
 8018 00b2 6DDB     		blt	.L616
 8019              	.L606:
3988:DRIVER/FatFs/source/ff.c **** 			}
 8020              		.loc 1 3988 5 is_stmt 1 view .LVU2753
3988:DRIVER/FatFs/source/ff.c **** 			}
 8021              		.loc 1 3988 9 is_stmt 0 view .LVU2754
 8022 00b4 0123     		movs	r3, #1
 8023 00b6 4A46     		mov	r2, r9
 8024 00b8 04F12801 		add	r1, r4, #40
 8025 00bc 0398     		ldr	r0, [sp, #12]
 8026 00be 4078     		ldrb	r0, [r0, #1]	@ zero_extendqisi2
 8027 00c0 FFF7FEFF 		bl	disk_read
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 285


 8028              	.LVL972:
3988:DRIVER/FatFs/source/ff.c **** 			}
 8029              		.loc 1 3988 8 view .LVU2755
 8030 00c4 0028     		cmp	r0, #0
 8031 00c6 77D1     		bne	.L617
 8032              	.L605:
3988:DRIVER/FatFs/source/ff.c **** 			}
 8033              		.loc 1 3988 80 is_stmt 1 discriminator 2 view .LVU2756
3991:DRIVER/FatFs/source/ff.c **** 		}
 8034              		.loc 1 3991 4 discriminator 2 view .LVU2757
3991:DRIVER/FatFs/source/ff.c **** 		}
 8035              		.loc 1 3991 13 is_stmt 0 discriminator 2 view .LVU2758
 8036 00c8 C4F81C90 		str	r9, [r4, #28]
 8037              	.LVL973:
 8038              	.L593:
3993:DRIVER/FatFs/source/ff.c **** 		if (rcnt > btr) rcnt = btr;					/* Clip it by btr if needed */
 8039              		.loc 1 3993 3 is_stmt 1 view .LVU2759
3993:DRIVER/FatFs/source/ff.c **** 		if (rcnt > btr) rcnt = btr;					/* Clip it by btr if needed */
 8040              		.loc 1 3993 10 is_stmt 0 view .LVU2760
 8041 00cc 039B     		ldr	r3, [sp, #12]
 8042 00ce 9D89     		ldrh	r5, [r3, #12]
3993:DRIVER/FatFs/source/ff.c **** 		if (rcnt > btr) rcnt = btr;					/* Clip it by btr if needed */
 8043              		.loc 1 3993 27 view .LVU2761
 8044 00d0 6369     		ldr	r3, [r4, #20]
3993:DRIVER/FatFs/source/ff.c **** 		if (rcnt > btr) rcnt = btr;					/* Clip it by btr if needed */
 8045              		.loc 1 3993 34 view .LVU2762
 8046 00d2 B3FBF5F2 		udiv	r2, r3, r5
 8047 00d6 05FB1233 		mls	r3, r5, r2, r3
3993:DRIVER/FatFs/source/ff.c **** 		if (rcnt > btr) rcnt = btr;					/* Clip it by btr if needed */
 8048              		.loc 1 3993 8 view .LVU2763
 8049 00da ED1A     		subs	r5, r5, r3
 8050              	.LVL974:
3994:DRIVER/FatFs/source/ff.c **** #if FF_FS_TINY
 8051              		.loc 1 3994 3 is_stmt 1 view .LVU2764
3994:DRIVER/FatFs/source/ff.c **** #if FF_FS_TINY
 8052              		.loc 1 3994 6 is_stmt 0 view .LVU2765
 8053 00dc AE42     		cmp	r6, r5
 8054 00de 00D2     		bcs	.L608
3994:DRIVER/FatFs/source/ff.c **** #if FF_FS_TINY
 8055              		.loc 1 3994 24 view .LVU2766
 8056 00e0 3546     		mov	r5, r6
 8057              	.LVL975:
 8058              	.L608:
3999:DRIVER/FatFs/source/ff.c **** #endif
 8059              		.loc 1 3999 3 is_stmt 1 view .LVU2767
3999:DRIVER/FatFs/source/ff.c **** #endif
 8060              		.loc 1 3999 17 is_stmt 0 view .LVU2768
 8061 00e2 04F12801 		add	r1, r4, #40
3999:DRIVER/FatFs/source/ff.c **** #endif
 8062              		.loc 1 3999 3 view .LVU2769
 8063 00e6 2A46     		mov	r2, r5
 8064 00e8 1944     		add	r1, r1, r3
 8065 00ea 3846     		mov	r0, r7
 8066 00ec FFF7FEFF 		bl	memcpy
 8067              	.LVL976:
 8068              	.L604:
3937:DRIVER/FatFs/source/ff.c **** 		if (fp->fptr % SS(fs) == 0) {			/* On the sector boundary? */
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 286


 8069              		.loc 1 3937 58 is_stmt 1 view .LVU2770
3937:DRIVER/FatFs/source/ff.c **** 		if (fp->fptr % SS(fs) == 0) {			/* On the sector boundary? */
 8070              		.loc 1 3937 23 is_stmt 0 view .LVU2771
 8071 00f0 761B     		subs	r6, r6, r5
 8072              	.LVL977:
3937:DRIVER/FatFs/source/ff.c **** 		if (fp->fptr % SS(fs) == 0) {			/* On the sector boundary? */
 8073              		.loc 1 3937 32 view .LVU2772
 8074 00f2 D8F80030 		ldr	r3, [r8]
3937:DRIVER/FatFs/source/ff.c **** 		if (fp->fptr % SS(fs) == 0) {			/* On the sector boundary? */
 8075              		.loc 1 3937 36 view .LVU2773
 8076 00f6 2B44     		add	r3, r3, r5
 8077 00f8 C8F80030 		str	r3, [r8]
3937:DRIVER/FatFs/source/ff.c **** 		if (fp->fptr % SS(fs) == 0) {			/* On the sector boundary? */
 8078              		.loc 1 3937 51 view .LVU2774
 8079 00fc 2F44     		add	r7, r7, r5
 8080              	.LVL978:
3937:DRIVER/FatFs/source/ff.c **** 		if (fp->fptr % SS(fs) == 0) {			/* On the sector boundary? */
 8081              		.loc 1 3937 62 view .LVU2775
 8082 00fe 6369     		ldr	r3, [r4, #20]
3937:DRIVER/FatFs/source/ff.c **** 		if (fp->fptr % SS(fs) == 0) {			/* On the sector boundary? */
 8083              		.loc 1 3937 69 view .LVU2776
 8084 0100 2B44     		add	r3, r3, r5
 8085 0102 6361     		str	r3, [r4, #20]
 8086              	.LVL979:
 8087              	.L609:
3937:DRIVER/FatFs/source/ff.c **** 		if (fp->fptr % SS(fs) == 0) {			/* On the sector boundary? */
 8088              		.loc 1 3937 14 is_stmt 1 discriminator 1 view .LVU2777
 8089 0104 002E     		cmp	r6, #0
 8090 0106 3FD0     		beq	.L590
3938:DRIVER/FatFs/source/ff.c **** 			csect = (UINT)(fp->fptr / SS(fs) & (fs->csize - 1));	/* Sector offset in the cluster */
 8091              		.loc 1 3938 3 view .LVU2778
3938:DRIVER/FatFs/source/ff.c **** 			csect = (UINT)(fp->fptr / SS(fs) & (fs->csize - 1));	/* Sector offset in the cluster */
 8092              		.loc 1 3938 9 is_stmt 0 view .LVU2779
 8093 0108 6269     		ldr	r2, [r4, #20]
3938:DRIVER/FatFs/source/ff.c **** 			csect = (UINT)(fp->fptr / SS(fs) & (fs->csize - 1));	/* Sector offset in the cluster */
 8094              		.loc 1 3938 18 view .LVU2780
 8095 010a 0399     		ldr	r1, [sp, #12]
 8096 010c 8D89     		ldrh	r5, [r1, #12]
3938:DRIVER/FatFs/source/ff.c **** 			csect = (UINT)(fp->fptr / SS(fs) & (fs->csize - 1));	/* Sector offset in the cluster */
 8097              		.loc 1 3938 16 view .LVU2781
 8098 010e B2FBF5F3 		udiv	r3, r2, r5
 8099 0112 05FB1323 		mls	r3, r5, r3, r2
3938:DRIVER/FatFs/source/ff.c **** 			csect = (UINT)(fp->fptr / SS(fs) & (fs->csize - 1));	/* Sector offset in the cluster */
 8100              		.loc 1 3938 6 view .LVU2782
 8101 0116 002B     		cmp	r3, #0
 8102 0118 D8D1     		bne	.L593
3939:DRIVER/FatFs/source/ff.c **** 			if (csect == 0) {					/* On the cluster boundary? */
 8103              		.loc 1 3939 4 is_stmt 1 view .LVU2783
3939:DRIVER/FatFs/source/ff.c **** 			if (csect == 0) {					/* On the cluster boundary? */
 8104              		.loc 1 3939 28 is_stmt 0 view .LVU2784
 8105 011a B2FBF5F5 		udiv	r5, r2, r5
3939:DRIVER/FatFs/source/ff.c **** 			if (csect == 0) {					/* On the cluster boundary? */
 8106              		.loc 1 3939 42 view .LVU2785
 8107 011e 4B89     		ldrh	r3, [r1, #10]
3939:DRIVER/FatFs/source/ff.c **** 			if (csect == 0) {					/* On the cluster boundary? */
 8108              		.loc 1 3939 50 view .LVU2786
 8109 0120 013B     		subs	r3, r3, #1
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 287


 8110              	.LVL980:
3940:DRIVER/FatFs/source/ff.c **** 				if (fp->fptr == 0) {			/* On the top of the file? */
 8111              		.loc 1 3940 4 is_stmt 1 view .LVU2787
3940:DRIVER/FatFs/source/ff.c **** 				if (fp->fptr == 0) {			/* On the top of the file? */
 8112              		.loc 1 3940 7 is_stmt 0 view .LVU2788
 8113 0122 1D40     		ands	r5, r5, r3
 8114              	.LVL981:
3940:DRIVER/FatFs/source/ff.c **** 				if (fp->fptr == 0) {			/* On the top of the file? */
 8115              		.loc 1 3940 7 view .LVU2789
 8116 0124 08D1     		bne	.L594
3941:DRIVER/FatFs/source/ff.c **** 					clst = fp->obj.sclust;		/* Follow cluster chain from the origin */
 8117              		.loc 1 3941 5 is_stmt 1 view .LVU2790
3941:DRIVER/FatFs/source/ff.c **** 					clst = fp->obj.sclust;		/* Follow cluster chain from the origin */
 8118              		.loc 1 3941 8 is_stmt 0 view .LVU2791
 8119 0126 002A     		cmp	r2, #0
 8120 0128 8CD1     		bne	.L595
3942:DRIVER/FatFs/source/ff.c **** 				} else {						/* Middle or end of the file */
 8121              		.loc 1 3942 6 is_stmt 1 view .LVU2792
3942:DRIVER/FatFs/source/ff.c **** 				} else {						/* Middle or end of the file */
 8122              		.loc 1 3942 11 is_stmt 0 view .LVU2793
 8123 012a A068     		ldr	r0, [r4, #8]
 8124              	.LVL982:
 8125              	.L596:
3953:DRIVER/FatFs/source/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 8126              		.loc 1 3953 5 is_stmt 1 view .LVU2794
3953:DRIVER/FatFs/source/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 8127              		.loc 1 3953 8 is_stmt 0 view .LVU2795
 8128 012c 0128     		cmp	r0, #1
 8129 012e 8ED9     		bls	.L618
3953:DRIVER/FatFs/source/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 8130              		.loc 1 3953 40 is_stmt 1 discriminator 2 view .LVU2796
3954:DRIVER/FatFs/source/ff.c **** 				fp->clust = clst;				/* Update current cluster */
 8131              		.loc 1 3954 5 discriminator 2 view .LVU2797
3954:DRIVER/FatFs/source/ff.c **** 				fp->clust = clst;				/* Update current cluster */
 8132              		.loc 1 3954 8 is_stmt 0 discriminator 2 view .LVU2798
 8133 0130 B0F1FF3F 		cmp	r0, #-1
 8134 0134 92D0     		beq	.L619
3954:DRIVER/FatFs/source/ff.c **** 				fp->clust = clst;				/* Update current cluster */
 8135              		.loc 1 3954 51 is_stmt 1 discriminator 2 view .LVU2799
3955:DRIVER/FatFs/source/ff.c **** 			}
 8136              		.loc 1 3955 5 discriminator 2 view .LVU2800
3955:DRIVER/FatFs/source/ff.c **** 			}
 8137              		.loc 1 3955 15 is_stmt 0 discriminator 2 view .LVU2801
 8138 0136 A061     		str	r0, [r4, #24]
 8139              	.LVL983:
 8140              	.L594:
3957:DRIVER/FatFs/source/ff.c **** 			if (sect == 0) ABORT(fs, FR_INT_ERR);
 8141              		.loc 1 3957 4 is_stmt 1 view .LVU2802
3957:DRIVER/FatFs/source/ff.c **** 			if (sect == 0) ABORT(fs, FR_INT_ERR);
 8142              		.loc 1 3957 11 is_stmt 0 view .LVU2803
 8143 0138 DDF80CB0 		ldr	fp, [sp, #12]
 8144 013c A169     		ldr	r1, [r4, #24]
 8145 013e 5846     		mov	r0, fp
 8146 0140 FFF7FEFF 		bl	clst2sect
 8147              	.LVL984:
3958:DRIVER/FatFs/source/ff.c **** 			sect += csect;
 8148              		.loc 1 3958 4 is_stmt 1 view .LVU2804
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 288


3958:DRIVER/FatFs/source/ff.c **** 			sect += csect;
 8149              		.loc 1 3958 7 is_stmt 0 view .LVU2805
 8150 0144 8146     		mov	r9, r0
 8151 0146 0028     		cmp	r0, #0
 8152 0148 8FD0     		beq	.L620
3958:DRIVER/FatFs/source/ff.c **** 			sect += csect;
 8153              		.loc 1 3958 40 is_stmt 1 discriminator 2 view .LVU2806
3959:DRIVER/FatFs/source/ff.c **** 			cc = btr / SS(fs);					/* When remaining bytes >= sector size, */
 8154              		.loc 1 3959 4 discriminator 2 view .LVU2807
3959:DRIVER/FatFs/source/ff.c **** 			cc = btr / SS(fs);					/* When remaining bytes >= sector size, */
 8155              		.loc 1 3959 9 is_stmt 0 discriminator 2 view .LVU2808
 8156 014a A944     		add	r9, r9, r5
 8157              	.LVL985:
3960:DRIVER/FatFs/source/ff.c **** 			if (cc > 0) {						/* Read maximum contiguous sectors directly */
 8158              		.loc 1 3960 4 is_stmt 1 discriminator 2 view .LVU2809
3960:DRIVER/FatFs/source/ff.c **** 			if (cc > 0) {						/* Read maximum contiguous sectors directly */
 8159              		.loc 1 3960 15 is_stmt 0 discriminator 2 view .LVU2810
 8160 014c BBF80C30 		ldrh	r3, [fp, #12]
3960:DRIVER/FatFs/source/ff.c **** 			if (cc > 0) {						/* Read maximum contiguous sectors directly */
 8161              		.loc 1 3960 7 discriminator 2 view .LVU2811
 8162 0150 B6FBF3FA 		udiv	r10, r6, r3
 8163              	.LVL986:
3961:DRIVER/FatFs/source/ff.c **** 				if (csect + cc > fs->csize) {	/* Clip at cluster boundary */
 8164              		.loc 1 3961 4 is_stmt 1 discriminator 2 view .LVU2812
3961:DRIVER/FatFs/source/ff.c **** 				if (csect + cc > fs->csize) {	/* Clip at cluster boundary */
 8165              		.loc 1 3961 7 is_stmt 0 discriminator 2 view .LVU2813
 8166 0154 B342     		cmp	r3, r6
 8167 0156 A6D8     		bhi	.L600
3962:DRIVER/FatFs/source/ff.c **** 					cc = fs->csize - csect;
 8168              		.loc 1 3962 5 is_stmt 1 view .LVU2814
3962:DRIVER/FatFs/source/ff.c **** 					cc = fs->csize - csect;
 8169              		.loc 1 3962 15 is_stmt 0 view .LVU2815
 8170 0158 05EB0A03 		add	r3, r5, r10
3962:DRIVER/FatFs/source/ff.c **** 					cc = fs->csize - csect;
 8171              		.loc 1 3962 24 view .LVU2816
 8172 015c BBF80A20 		ldrh	r2, [fp, #10]
3962:DRIVER/FatFs/source/ff.c **** 					cc = fs->csize - csect;
 8173              		.loc 1 3962 8 view .LVU2817
 8174 0160 9342     		cmp	r3, r2
 8175 0162 01D9     		bls	.L601
3963:DRIVER/FatFs/source/ff.c **** 				}
 8176              		.loc 1 3963 6 is_stmt 1 view .LVU2818
3963:DRIVER/FatFs/source/ff.c **** 				}
 8177              		.loc 1 3963 9 is_stmt 0 view .LVU2819
 8178 0164 A2EB050A 		sub	r10, r2, r5
 8179              	.LVL987:
 8180              	.L601:
3965:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY && FF_FS_MINIMIZE <= 2		/* Replace one of the read sectors with cached data if 
 8181              		.loc 1 3965 5 is_stmt 1 view .LVU2820
3965:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY && FF_FS_MINIMIZE <= 2		/* Replace one of the read sectors with cached data if 
 8182              		.loc 1 3965 9 is_stmt 0 view .LVU2821
 8183 0168 5346     		mov	r3, r10
 8184 016a 4A46     		mov	r2, r9
 8185 016c 3946     		mov	r1, r7
 8186 016e 9BF80100 		ldrb	r0, [fp, #1]	@ zero_extendqisi2
 8187 0172 FFF7FEFF 		bl	disk_read
 8188              	.LVL988:
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 289


3965:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY && FF_FS_MINIMIZE <= 2		/* Replace one of the read sectors with cached data if 
 8189              		.loc 1 3965 8 view .LVU2822
 8190 0176 0028     		cmp	r0, #0
 8191 0178 3FF47EAF 		beq	.L602
3965:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY && FF_FS_MINIMIZE <= 2		/* Replace one of the read sectors with cached data if 
 8192              		.loc 1 3965 57 is_stmt 1 discriminator 1 view .LVU2823
 8193 017c 4FF0010A 		mov	r10, #1
 8194              	.LVL989:
3965:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY && FF_FS_MINIMIZE <= 2		/* Replace one of the read sectors with cached data if 
 8195              		.loc 1 3965 57 is_stmt 0 discriminator 1 view .LVU2824
 8196 0180 84F811A0 		strb	r10, [r4, #17]
3965:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY && FF_FS_MINIMIZE <= 2		/* Replace one of the read sectors with cached data if 
 8197              		.loc 1 3965 57 is_stmt 1 discriminator 1 view .LVU2825
 8198 0184 CDF804A0 		str	r10, [sp, #4]
 8199              	.LVL990:
 8200              	.L590:
4004:DRIVER/FatFs/source/ff.c **** 
 8201              		.loc 1 4004 1 is_stmt 0 view .LVU2826
 8202 0188 0198     		ldr	r0, [sp, #4]
 8203 018a 05B0     		add	sp, sp, #20
 8204              	.LCFI59:
 8205              		.cfi_remember_state
 8206              		.cfi_def_cfa_offset 36
 8207              		@ sp needed
 8208 018c BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 8209              	.LVL991:
 8210              	.L616:
 8211              	.LCFI60:
 8212              		.cfi_restore_state
3984:DRIVER/FatFs/source/ff.c **** 					fp->flag &= (BYTE)~FA_DIRTY;
 8213              		.loc 1 3984 6 is_stmt 1 view .LVU2827
3984:DRIVER/FatFs/source/ff.c **** 					fp->flag &= (BYTE)~FA_DIRTY;
 8214              		.loc 1 3984 10 is_stmt 0 view .LVU2828
 8215 0190 0123     		movs	r3, #1
 8216 0192 04F12801 		add	r1, r4, #40
 8217 0196 9BF80100 		ldrb	r0, [fp, #1]	@ zero_extendqisi2
 8218 019a FFF7FEFF 		bl	disk_write
 8219              	.LVL992:
3984:DRIVER/FatFs/source/ff.c **** 					fp->flag &= (BYTE)~FA_DIRTY;
 8220              		.loc 1 3984 9 view .LVU2829
 8221 019e 20B9     		cbnz	r0, .L621
3984:DRIVER/FatFs/source/ff.c **** 					fp->flag &= (BYTE)~FA_DIRTY;
 8222              		.loc 1 3984 86 is_stmt 1 discriminator 2 view .LVU2830
3985:DRIVER/FatFs/source/ff.c **** 				}
 8223              		.loc 1 3985 6 discriminator 2 view .LVU2831
3985:DRIVER/FatFs/source/ff.c **** 				}
 8224              		.loc 1 3985 8 is_stmt 0 discriminator 2 view .LVU2832
 8225 01a0 237C     		ldrb	r3, [r4, #16]	@ zero_extendqisi2
3985:DRIVER/FatFs/source/ff.c **** 				}
 8226              		.loc 1 3985 15 discriminator 2 view .LVU2833
 8227 01a2 03F07F03 		and	r3, r3, #127
 8228 01a6 2374     		strb	r3, [r4, #16]
 8229 01a8 84E7     		b	.L606
 8230              	.L621:
3984:DRIVER/FatFs/source/ff.c **** 					fp->flag &= (BYTE)~FA_DIRTY;
 8231              		.loc 1 3984 64 is_stmt 1 discriminator 1 view .LVU2834
 8232 01aa 4FF0010A 		mov	r10, #1
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 290


 8233              	.LVL993:
3984:DRIVER/FatFs/source/ff.c **** 					fp->flag &= (BYTE)~FA_DIRTY;
 8234              		.loc 1 3984 64 is_stmt 0 discriminator 1 view .LVU2835
 8235 01ae 84F811A0 		strb	r10, [r4, #17]
3984:DRIVER/FatFs/source/ff.c **** 					fp->flag &= (BYTE)~FA_DIRTY;
 8236              		.loc 1 3984 64 is_stmt 1 discriminator 1 view .LVU2836
 8237 01b2 CDF804A0 		str	r10, [sp, #4]
 8238              	.LVL994:
3984:DRIVER/FatFs/source/ff.c **** 					fp->flag &= (BYTE)~FA_DIRTY;
 8239              		.loc 1 3984 64 is_stmt 0 discriminator 1 view .LVU2837
 8240 01b6 E7E7     		b	.L590
 8241              	.LVL995:
 8242              	.L617:
3988:DRIVER/FatFs/source/ff.c **** 			}
 8243              		.loc 1 3988 58 is_stmt 1 discriminator 1 view .LVU2838
 8244 01b8 4FF0010A 		mov	r10, #1
 8245              	.LVL996:
3988:DRIVER/FatFs/source/ff.c **** 			}
 8246              		.loc 1 3988 58 is_stmt 0 discriminator 1 view .LVU2839
 8247 01bc 84F811A0 		strb	r10, [r4, #17]
3988:DRIVER/FatFs/source/ff.c **** 			}
 8248              		.loc 1 3988 58 is_stmt 1 discriminator 1 view .LVU2840
 8249 01c0 CDF804A0 		str	r10, [sp, #4]
 8250              	.LVL997:
3988:DRIVER/FatFs/source/ff.c **** 			}
 8251              		.loc 1 3988 58 is_stmt 0 discriminator 1 view .LVU2841
 8252 01c4 E0E7     		b	.L590
 8253              	.LVL998:
 8254              	.L611:
3933:DRIVER/FatFs/source/ff.c **** 	remain = fp->obj.objsize - fp->fptr;
 8255              		.loc 1 3933 29 view .LVU2842
 8256 01c6 0723     		movs	r3, #7
 8257 01c8 0193     		str	r3, [sp, #4]
 8258              	.LVL999:
3933:DRIVER/FatFs/source/ff.c **** 	remain = fp->obj.objsize - fp->fptr;
 8259              		.loc 1 3933 29 view .LVU2843
 8260 01ca DDE7     		b	.L590
 8261              		.cfi_endproc
 8262              	.LFE41:
 8264              		.section	.text.f_write,"ax",%progbits
 8265              		.align	1
 8266              		.global	f_write
 8267              		.syntax unified
 8268              		.thumb
 8269              		.thumb_func
 8271              	f_write:
 8272              	.LVL1000:
 8273              	.LFB42:
4020:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
 8274              		.loc 1 4020 1 is_stmt 1 view -0
 8275              		.cfi_startproc
 8276              		@ args = 0, pretend = 0, frame = 16
 8277              		@ frame_needed = 0, uses_anonymous_args = 0
4020:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
 8278              		.loc 1 4020 1 is_stmt 0 view .LVU2845
 8279 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 8280              	.LCFI61:
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 291


 8281              		.cfi_def_cfa_offset 36
 8282              		.cfi_offset 4, -36
 8283              		.cfi_offset 5, -32
 8284              		.cfi_offset 6, -28
 8285              		.cfi_offset 7, -24
 8286              		.cfi_offset 8, -20
 8287              		.cfi_offset 9, -16
 8288              		.cfi_offset 10, -12
 8289              		.cfi_offset 11, -8
 8290              		.cfi_offset 14, -4
 8291 0004 85B0     		sub	sp, sp, #20
 8292              	.LCFI62:
 8293              		.cfi_def_cfa_offset 56
 8294 0006 0446     		mov	r4, r0
 8295 0008 0F46     		mov	r7, r1
 8296 000a 1546     		mov	r5, r2
 8297 000c 9846     		mov	r8, r3
4021:DRIVER/FatFs/source/ff.c **** 	FATFS *fs;
 8298              		.loc 1 4021 2 is_stmt 1 view .LVU2846
4022:DRIVER/FatFs/source/ff.c **** 	DWORD clst;
 8299              		.loc 1 4022 2 view .LVU2847
4023:DRIVER/FatFs/source/ff.c **** 	LBA_t sect;
 8300              		.loc 1 4023 2 view .LVU2848
4024:DRIVER/FatFs/source/ff.c **** 	UINT wcnt, cc, csect;
 8301              		.loc 1 4024 2 view .LVU2849
4025:DRIVER/FatFs/source/ff.c **** 	const BYTE *wbuff = (const BYTE*)buff;
 8302              		.loc 1 4025 2 view .LVU2850
4026:DRIVER/FatFs/source/ff.c **** 
 8303              		.loc 1 4026 2 view .LVU2851
 8304              	.LVL1001:
4029:DRIVER/FatFs/source/ff.c **** 	res = validate(&fp->obj, &fs);			/* Check validity of the file object */
 8305              		.loc 1 4029 2 view .LVU2852
4029:DRIVER/FatFs/source/ff.c **** 	res = validate(&fp->obj, &fs);			/* Check validity of the file object */
 8306              		.loc 1 4029 6 is_stmt 0 view .LVU2853
 8307 000e 0023     		movs	r3, #0
 8308              	.LVL1002:
4029:DRIVER/FatFs/source/ff.c **** 	res = validate(&fp->obj, &fs);			/* Check validity of the file object */
 8309              		.loc 1 4029 6 view .LVU2854
 8310 0010 C8F80030 		str	r3, [r8]
4030:DRIVER/FatFs/source/ff.c **** 	if (res != FR_OK || (res = (FRESULT)fp->err) != FR_OK) LEAVE_FF(fs, res);	/* Check validity */
 8311              		.loc 1 4030 2 is_stmt 1 view .LVU2855
4030:DRIVER/FatFs/source/ff.c **** 	if (res != FR_OK || (res = (FRESULT)fp->err) != FR_OK) LEAVE_FF(fs, res);	/* Check validity */
 8312              		.loc 1 4030 8 is_stmt 0 view .LVU2856
 8313 0014 03A9     		add	r1, sp, #12
 8314              	.LVL1003:
4030:DRIVER/FatFs/source/ff.c **** 	if (res != FR_OK || (res = (FRESULT)fp->err) != FR_OK) LEAVE_FF(fs, res);	/* Check validity */
 8315              		.loc 1 4030 8 view .LVU2857
 8316 0016 FFF7FEFF 		bl	validate
 8317              	.LVL1004:
4031:DRIVER/FatFs/source/ff.c **** 	if (!(fp->flag & FA_WRITE)) LEAVE_FF(fs, FR_DENIED);	/* Check access mode */
 8318              		.loc 1 4031 2 is_stmt 1 view .LVU2858
4031:DRIVER/FatFs/source/ff.c **** 	if (!(fp->flag & FA_WRITE)) LEAVE_FF(fs, FR_DENIED);	/* Check access mode */
 8319              		.loc 1 4031 5 is_stmt 0 view .LVU2859
 8320 001a 0190     		str	r0, [sp, #4]
 8321 001c 0028     		cmp	r0, #0
 8322 001e 48D1     		bne	.L625
4031:DRIVER/FatFs/source/ff.c **** 	if (!(fp->flag & FA_WRITE)) LEAVE_FF(fs, FR_DENIED);	/* Check access mode */
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 292


 8323              		.loc 1 4031 27 discriminator 2 view .LVU2860
 8324 0020 637C     		ldrb	r3, [r4, #17]	@ zero_extendqisi2
 8325 0022 0193     		str	r3, [sp, #4]
 8326              	.LVL1005:
4031:DRIVER/FatFs/source/ff.c **** 	if (!(fp->flag & FA_WRITE)) LEAVE_FF(fs, FR_DENIED);	/* Check access mode */
 8327              		.loc 1 4031 19 discriminator 2 view .LVU2861
 8328 0024 002B     		cmp	r3, #0
 8329 0026 44D1     		bne	.L625
4032:DRIVER/FatFs/source/ff.c **** 
 8330              		.loc 1 4032 2 is_stmt 1 view .LVU2862
4032:DRIVER/FatFs/source/ff.c **** 
 8331              		.loc 1 4032 10 is_stmt 0 view .LVU2863
 8332 0028 237C     		ldrb	r3, [r4, #16]	@ zero_extendqisi2
 8333              	.LVL1006:
4032:DRIVER/FatFs/source/ff.c **** 
 8334              		.loc 1 4032 5 view .LVU2864
 8335 002a 13F0020F 		tst	r3, #2
 8336 002e 00F0E680 		beq	.L647
4035:DRIVER/FatFs/source/ff.c **** 		btw = (UINT)(0xFFFFFFFF - (DWORD)fp->fptr);
 8337              		.loc 1 4035 2 is_stmt 1 view .LVU2865
4035:DRIVER/FatFs/source/ff.c **** 		btw = (UINT)(0xFFFFFFFF - (DWORD)fp->fptr);
 8338              		.loc 1 4035 61 is_stmt 0 view .LVU2866
 8339 0032 6369     		ldr	r3, [r4, #20]
4035:DRIVER/FatFs/source/ff.c **** 		btw = (UINT)(0xFFFFFFFF - (DWORD)fp->fptr);
 8340              		.loc 1 4035 5 view .LVU2867
 8341 0034 EB42     		cmn	r3, r5
 8342 0036 C0F0AF80 		bcc	.L645
4036:DRIVER/FatFs/source/ff.c **** 	}
 8343              		.loc 1 4036 3 is_stmt 1 view .LVU2868
4036:DRIVER/FatFs/source/ff.c **** 	}
 8344              		.loc 1 4036 7 is_stmt 0 view .LVU2869
 8345 003a DD43     		mvns	r5, r3
 8346              	.LVL1007:
4036:DRIVER/FatFs/source/ff.c **** 	}
 8347              		.loc 1 4036 7 view .LVU2870
 8348 003c ACE0     		b	.L645
 8349              	.LVL1008:
 8350              	.L629:
4055:DRIVER/FatFs/source/ff.c **** 					}
 8351              		.loc 1 4055 7 is_stmt 1 view .LVU2871
4055:DRIVER/FatFs/source/ff.c **** 					}
 8352              		.loc 1 4055 14 is_stmt 0 view .LVU2872
 8353 003e A169     		ldr	r1, [r4, #24]
 8354 0040 2046     		mov	r0, r4
 8355 0042 FFF7FEFF 		bl	create_chain
 8356              	.LVL1009:
 8357              	.L631:
4058:DRIVER/FatFs/source/ff.c **** 				if (clst == 1) ABORT(fs, FR_INT_ERR);
 8358              		.loc 1 4058 5 is_stmt 1 view .LVU2873
4058:DRIVER/FatFs/source/ff.c **** 				if (clst == 1) ABORT(fs, FR_INT_ERR);
 8359              		.loc 1 4058 8 is_stmt 0 view .LVU2874
 8360 0046 0028     		cmp	r0, #0
 8361 0048 00F0D480 		beq	.L632
 8362              	.L630:
 8363              	.LVL1010:
4059:DRIVER/FatFs/source/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 8364              		.loc 1 4059 5 is_stmt 1 view .LVU2875
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 293


4059:DRIVER/FatFs/source/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 8365              		.loc 1 4059 8 is_stmt 0 view .LVU2876
 8366 004c 0128     		cmp	r0, #1
 8367 004e 34D0     		beq	.L650
4059:DRIVER/FatFs/source/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 8368              		.loc 1 4059 41 is_stmt 1 discriminator 2 view .LVU2877
4060:DRIVER/FatFs/source/ff.c **** 				fp->clust = clst;			/* Update current cluster */
 8369              		.loc 1 4060 5 discriminator 2 view .LVU2878
4060:DRIVER/FatFs/source/ff.c **** 				fp->clust = clst;			/* Update current cluster */
 8370              		.loc 1 4060 8 is_stmt 0 discriminator 2 view .LVU2879
 8371 0050 B0F1FF3F 		cmp	r0, #-1
 8372 0054 38D0     		beq	.L651
4060:DRIVER/FatFs/source/ff.c **** 				fp->clust = clst;			/* Update current cluster */
 8373              		.loc 1 4060 51 is_stmt 1 discriminator 2 view .LVU2880
4061:DRIVER/FatFs/source/ff.c **** 				if (fp->obj.sclust == 0) fp->obj.sclust = clst;	/* Set start cluster if the first write */
 8374              		.loc 1 4061 5 discriminator 2 view .LVU2881
4061:DRIVER/FatFs/source/ff.c **** 				if (fp->obj.sclust == 0) fp->obj.sclust = clst;	/* Set start cluster if the first write */
 8375              		.loc 1 4061 15 is_stmt 0 discriminator 2 view .LVU2882
 8376 0056 A061     		str	r0, [r4, #24]
4062:DRIVER/FatFs/source/ff.c **** 			}
 8377              		.loc 1 4062 5 is_stmt 1 discriminator 2 view .LVU2883
4062:DRIVER/FatFs/source/ff.c **** 			}
 8378              		.loc 1 4062 16 is_stmt 0 discriminator 2 view .LVU2884
 8379 0058 A368     		ldr	r3, [r4, #8]
4062:DRIVER/FatFs/source/ff.c **** 			}
 8380              		.loc 1 4062 8 discriminator 2 view .LVU2885
 8381 005a 03B9     		cbnz	r3, .L628
4062:DRIVER/FatFs/source/ff.c **** 			}
 8382              		.loc 1 4062 30 is_stmt 1 discriminator 1 view .LVU2886
4062:DRIVER/FatFs/source/ff.c **** 			}
 8383              		.loc 1 4062 45 is_stmt 0 discriminator 1 view .LVU2887
 8384 005c A060     		str	r0, [r4, #8]
 8385              	.L628:
4067:DRIVER/FatFs/source/ff.c **** 				if (disk_write(fs->pdrv, fp->buf, fp->sect, 1) != RES_OK) ABORT(fs, FR_DISK_ERR);
 8386              		.loc 1 4067 4 is_stmt 1 view .LVU2888
4067:DRIVER/FatFs/source/ff.c **** 				if (disk_write(fs->pdrv, fp->buf, fp->sect, 1) != RES_OK) ABORT(fs, FR_DISK_ERR);
 8387              		.loc 1 4067 8 is_stmt 0 view .LVU2889
 8388 005e 94F91030 		ldrsb	r3, [r4, #16]
4067:DRIVER/FatFs/source/ff.c **** 				if (disk_write(fs->pdrv, fp->buf, fp->sect, 1) != RES_OK) ABORT(fs, FR_DISK_ERR);
 8389              		.loc 1 4067 7 view .LVU2890
 8390 0062 002B     		cmp	r3, #0
 8391 0064 37DB     		blt	.L652
 8392              	.L635:
4072:DRIVER/FatFs/source/ff.c **** 			if (sect == 0) ABORT(fs, FR_INT_ERR);
 8393              		.loc 1 4072 4 is_stmt 1 view .LVU2891
4072:DRIVER/FatFs/source/ff.c **** 			if (sect == 0) ABORT(fs, FR_INT_ERR);
 8394              		.loc 1 4072 11 is_stmt 0 view .LVU2892
 8395 0066 DDF80CB0 		ldr	fp, [sp, #12]
 8396 006a A169     		ldr	r1, [r4, #24]
 8397 006c 5846     		mov	r0, fp
 8398 006e FFF7FEFF 		bl	clst2sect
 8399              	.LVL1011:
4073:DRIVER/FatFs/source/ff.c **** 			sect += csect;
 8400              		.loc 1 4073 4 is_stmt 1 view .LVU2893
4073:DRIVER/FatFs/source/ff.c **** 			sect += csect;
 8401              		.loc 1 4073 7 is_stmt 0 view .LVU2894
 8402 0072 8146     		mov	r9, r0
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 294


 8403 0074 0028     		cmp	r0, #0
 8404 0076 43D0     		beq	.L653
4073:DRIVER/FatFs/source/ff.c **** 			sect += csect;
 8405              		.loc 1 4073 40 is_stmt 1 discriminator 2 view .LVU2895
4074:DRIVER/FatFs/source/ff.c **** 			cc = btw / SS(fs);				/* When remaining bytes >= sector size, */
 8406              		.loc 1 4074 4 discriminator 2 view .LVU2896
4074:DRIVER/FatFs/source/ff.c **** 			cc = btw / SS(fs);				/* When remaining bytes >= sector size, */
 8407              		.loc 1 4074 9 is_stmt 0 discriminator 2 view .LVU2897
 8408 0078 B144     		add	r9, r9, r6
 8409              	.LVL1012:
4075:DRIVER/FatFs/source/ff.c **** 			if (cc > 0) {					/* Write maximum contiguous sectors directly */
 8410              		.loc 1 4075 4 is_stmt 1 discriminator 2 view .LVU2898
4075:DRIVER/FatFs/source/ff.c **** 			if (cc > 0) {					/* Write maximum contiguous sectors directly */
 8411              		.loc 1 4075 15 is_stmt 0 discriminator 2 view .LVU2899
 8412 007a BBF80C30 		ldrh	r3, [fp, #12]
4075:DRIVER/FatFs/source/ff.c **** 			if (cc > 0) {					/* Write maximum contiguous sectors directly */
 8413              		.loc 1 4075 7 discriminator 2 view .LVU2900
 8414 007e B5FBF3FA 		udiv	r10, r5, r3
 8415              	.LVL1013:
4076:DRIVER/FatFs/source/ff.c **** 				if (csect + cc > fs->csize) {	/* Clip at cluster boundary */
 8416              		.loc 1 4076 4 is_stmt 1 discriminator 2 view .LVU2901
4076:DRIVER/FatFs/source/ff.c **** 				if (csect + cc > fs->csize) {	/* Clip at cluster boundary */
 8417              		.loc 1 4076 7 is_stmt 0 discriminator 2 view .LVU2902
 8418 0082 AB42     		cmp	r3, r5
 8419 0084 5AD8     		bhi	.L638
4077:DRIVER/FatFs/source/ff.c **** 					cc = fs->csize - csect;
 8420              		.loc 1 4077 5 is_stmt 1 view .LVU2903
4077:DRIVER/FatFs/source/ff.c **** 					cc = fs->csize - csect;
 8421              		.loc 1 4077 15 is_stmt 0 view .LVU2904
 8422 0086 06EB0A03 		add	r3, r6, r10
4077:DRIVER/FatFs/source/ff.c **** 					cc = fs->csize - csect;
 8423              		.loc 1 4077 24 view .LVU2905
 8424 008a BBF80A20 		ldrh	r2, [fp, #10]
4077:DRIVER/FatFs/source/ff.c **** 					cc = fs->csize - csect;
 8425              		.loc 1 4077 8 view .LVU2906
 8426 008e 9342     		cmp	r3, r2
 8427 0090 01D9     		bls	.L639
4078:DRIVER/FatFs/source/ff.c **** 				}
 8428              		.loc 1 4078 6 is_stmt 1 view .LVU2907
4078:DRIVER/FatFs/source/ff.c **** 				}
 8429              		.loc 1 4078 9 is_stmt 0 view .LVU2908
 8430 0092 A2EB060A 		sub	r10, r2, r6
 8431              	.LVL1014:
 8432              	.L639:
4080:DRIVER/FatFs/source/ff.c **** #if FF_FS_MINIMIZE <= 2
 8433              		.loc 1 4080 5 is_stmt 1 view .LVU2909
4080:DRIVER/FatFs/source/ff.c **** #if FF_FS_MINIMIZE <= 2
 8434              		.loc 1 4080 9 is_stmt 0 view .LVU2910
 8435 0096 5346     		mov	r3, r10
 8436 0098 4A46     		mov	r2, r9
 8437 009a 3946     		mov	r1, r7
 8438 009c 9BF80100 		ldrb	r0, [fp, #1]	@ zero_extendqisi2
 8439 00a0 FFF7FEFF 		bl	disk_write
 8440              	.LVL1015:
4080:DRIVER/FatFs/source/ff.c **** #if FF_FS_MINIMIZE <= 2
 8441              		.loc 1 4080 8 view .LVU2911
 8442 00a4 98B3     		cbz	r0, .L640
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 295


4080:DRIVER/FatFs/source/ff.c **** #if FF_FS_MINIMIZE <= 2
 8443              		.loc 1 4080 58 is_stmt 1 discriminator 1 view .LVU2912
 8444 00a6 4FF0010A 		mov	r10, #1
 8445              	.LVL1016:
4080:DRIVER/FatFs/source/ff.c **** #if FF_FS_MINIMIZE <= 2
 8446              		.loc 1 4080 58 is_stmt 0 discriminator 1 view .LVU2913
 8447 00aa 84F811A0 		strb	r10, [r4, #17]
4080:DRIVER/FatFs/source/ff.c **** #if FF_FS_MINIMIZE <= 2
 8448              		.loc 1 4080 58 is_stmt 1 discriminator 1 view .LVU2914
 8449 00ae CDF804A0 		str	r10, [sp, #4]
 8450              	.LVL1017:
 8451              	.L625:
4126:DRIVER/FatFs/source/ff.c **** 
 8452              		.loc 1 4126 1 is_stmt 0 view .LVU2915
 8453 00b2 0198     		ldr	r0, [sp, #4]
 8454 00b4 05B0     		add	sp, sp, #20
 8455              	.LCFI63:
 8456              		.cfi_remember_state
 8457              		.cfi_def_cfa_offset 36
 8458              		@ sp needed
 8459 00b6 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 8460              	.LVL1018:
 8461              	.L650:
 8462              	.LCFI64:
 8463              		.cfi_restore_state
4059:DRIVER/FatFs/source/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 8464              		.loc 1 4059 20 is_stmt 1 discriminator 1 view .LVU2916
 8465 00ba 4FF0020A 		mov	r10, #2
 8466 00be 84F811A0 		strb	r10, [r4, #17]
4059:DRIVER/FatFs/source/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 8467              		.loc 1 4059 20 discriminator 1 view .LVU2917
 8468 00c2 CDF804A0 		str	r10, [sp, #4]
 8469              	.LVL1019:
4059:DRIVER/FatFs/source/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 8470              		.loc 1 4059 20 is_stmt 0 discriminator 1 view .LVU2918
 8471 00c6 F4E7     		b	.L625
 8472              	.LVL1020:
 8473              	.L651:
4060:DRIVER/FatFs/source/ff.c **** 				fp->clust = clst;			/* Update current cluster */
 8474              		.loc 1 4060 29 is_stmt 1 discriminator 1 view .LVU2919
 8475 00c8 4FF0010A 		mov	r10, #1
 8476 00cc 84F811A0 		strb	r10, [r4, #17]
4060:DRIVER/FatFs/source/ff.c **** 				fp->clust = clst;			/* Update current cluster */
 8477              		.loc 1 4060 29 discriminator 1 view .LVU2920
 8478 00d0 CDF804A0 		str	r10, [sp, #4]
 8479              	.LVL1021:
4060:DRIVER/FatFs/source/ff.c **** 				fp->clust = clst;			/* Update current cluster */
 8480              		.loc 1 4060 29 is_stmt 0 discriminator 1 view .LVU2921
 8481 00d4 EDE7     		b	.L625
 8482              	.LVL1022:
 8483              	.L652:
4068:DRIVER/FatFs/source/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
 8484              		.loc 1 4068 5 is_stmt 1 view .LVU2922
4068:DRIVER/FatFs/source/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
 8485              		.loc 1 4068 9 is_stmt 0 view .LVU2923
 8486 00d6 0123     		movs	r3, #1
 8487 00d8 E269     		ldr	r2, [r4, #28]
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 296


 8488 00da 04F12801 		add	r1, r4, #40
 8489 00de 0398     		ldr	r0, [sp, #12]
 8490 00e0 4078     		ldrb	r0, [r0, #1]	@ zero_extendqisi2
 8491 00e2 FFF7FEFF 		bl	disk_write
 8492              	.LVL1023:
4068:DRIVER/FatFs/source/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
 8493              		.loc 1 4068 8 view .LVU2924
 8494 00e6 20B9     		cbnz	r0, .L654
4068:DRIVER/FatFs/source/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
 8495              		.loc 1 4068 85 is_stmt 1 discriminator 2 view .LVU2925
4069:DRIVER/FatFs/source/ff.c **** 			}
 8496              		.loc 1 4069 5 discriminator 2 view .LVU2926
4069:DRIVER/FatFs/source/ff.c **** 			}
 8497              		.loc 1 4069 7 is_stmt 0 discriminator 2 view .LVU2927
 8498 00e8 237C     		ldrb	r3, [r4, #16]	@ zero_extendqisi2
4069:DRIVER/FatFs/source/ff.c **** 			}
 8499              		.loc 1 4069 14 discriminator 2 view .LVU2928
 8500 00ea 03F07F03 		and	r3, r3, #127
 8501 00ee 2374     		strb	r3, [r4, #16]
 8502 00f0 B9E7     		b	.L635
 8503              	.L654:
4068:DRIVER/FatFs/source/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
 8504              		.loc 1 4068 63 is_stmt 1 discriminator 1 view .LVU2929
 8505 00f2 4FF0010A 		mov	r10, #1
 8506 00f6 84F811A0 		strb	r10, [r4, #17]
4068:DRIVER/FatFs/source/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
 8507              		.loc 1 4068 63 discriminator 1 view .LVU2930
 8508 00fa CDF804A0 		str	r10, [sp, #4]
 8509              	.LVL1024:
4068:DRIVER/FatFs/source/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
 8510              		.loc 1 4068 63 is_stmt 0 discriminator 1 view .LVU2931
 8511 00fe D8E7     		b	.L625
 8512              	.LVL1025:
 8513              	.L653:
4073:DRIVER/FatFs/source/ff.c **** 			sect += csect;
 8514              		.loc 1 4073 19 is_stmt 1 discriminator 1 view .LVU2932
 8515 0100 4FF0020A 		mov	r10, #2
 8516 0104 84F811A0 		strb	r10, [r4, #17]
4073:DRIVER/FatFs/source/ff.c **** 			sect += csect;
 8517              		.loc 1 4073 19 discriminator 1 view .LVU2933
 8518 0108 CDF804A0 		str	r10, [sp, #4]
 8519              	.LVL1026:
4073:DRIVER/FatFs/source/ff.c **** 			sect += csect;
 8520              		.loc 1 4073 19 is_stmt 0 discriminator 1 view .LVU2934
 8521 010c D1E7     		b	.L625
 8522              	.LVL1027:
 8523              	.L640:
4080:DRIVER/FatFs/source/ff.c **** #if FF_FS_MINIMIZE <= 2
 8524              		.loc 1 4080 80 is_stmt 1 discriminator 2 view .LVU2935
4088:DRIVER/FatFs/source/ff.c **** 					memcpy(fp->buf, wbuff + ((fp->sect - sect) * SS(fs)), SS(fs));
 8525              		.loc 1 4088 5 discriminator 2 view .LVU2936
4088:DRIVER/FatFs/source/ff.c **** 					memcpy(fp->buf, wbuff + ((fp->sect - sect) * SS(fs)), SS(fs));
 8526              		.loc 1 4088 11 is_stmt 0 discriminator 2 view .LVU2937
 8527 010e E369     		ldr	r3, [r4, #28]
4088:DRIVER/FatFs/source/ff.c **** 					memcpy(fp->buf, wbuff + ((fp->sect - sect) * SS(fs)), SS(fs));
 8528              		.loc 1 4088 18 discriminator 2 view .LVU2938
 8529 0110 A3EB0903 		sub	r3, r3, r9
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 297


4088:DRIVER/FatFs/source/ff.c **** 					memcpy(fp->buf, wbuff + ((fp->sect - sect) * SS(fs)), SS(fs));
 8530              		.loc 1 4088 8 discriminator 2 view .LVU2939
 8531 0114 5345     		cmp	r3, r10
 8532 0116 04D3     		bcc	.L655
 8533              	.L641:
4094:DRIVER/FatFs/source/ff.c **** 				continue;
 8534              		.loc 1 4094 5 is_stmt 1 view .LVU2940
4094:DRIVER/FatFs/source/ff.c **** 				continue;
 8535              		.loc 1 4094 12 is_stmt 0 view .LVU2941
 8536 0118 039B     		ldr	r3, [sp, #12]
 8537 011a 9E89     		ldrh	r6, [r3, #12]
 8538              	.LVL1028:
4094:DRIVER/FatFs/source/ff.c **** 				continue;
 8539              		.loc 1 4094 10 view .LVU2942
 8540 011c 0AFB06F6 		mul	r6, r10, r6
 8541              	.LVL1029:
4095:DRIVER/FatFs/source/ff.c **** 			}
 8542              		.loc 1 4095 5 is_stmt 1 view .LVU2943
 8543 0120 2BE0     		b	.L642
 8544              	.LVL1030:
 8545              	.L655:
4089:DRIVER/FatFs/source/ff.c **** 					fp->flag &= (BYTE)~FA_DIRTY;
 8546              		.loc 1 4089 6 view .LVU2944
4089:DRIVER/FatFs/source/ff.c **** 					fp->flag &= (BYTE)~FA_DIRTY;
 8547              		.loc 1 4089 51 is_stmt 0 view .LVU2945
 8548 0122 039A     		ldr	r2, [sp, #12]
 8549 0124 9289     		ldrh	r2, [r2, #12]
4089:DRIVER/FatFs/source/ff.c **** 					fp->flag &= (BYTE)~FA_DIRTY;
 8550              		.loc 1 4089 6 view .LVU2946
 8551 0126 02FB0371 		mla	r1, r2, r3, r7
 8552 012a 04F12800 		add	r0, r4, #40
 8553 012e FFF7FEFF 		bl	memcpy
 8554              	.LVL1031:
4090:DRIVER/FatFs/source/ff.c **** 				}
 8555              		.loc 1 4090 6 is_stmt 1 view .LVU2947
4090:DRIVER/FatFs/source/ff.c **** 				}
 8556              		.loc 1 4090 8 is_stmt 0 view .LVU2948
 8557 0132 237C     		ldrb	r3, [r4, #16]	@ zero_extendqisi2
4090:DRIVER/FatFs/source/ff.c **** 				}
 8558              		.loc 1 4090 15 view .LVU2949
 8559 0134 03F07F03 		and	r3, r3, #127
 8560 0138 2374     		strb	r3, [r4, #16]
 8561 013a EDE7     		b	.L641
 8562              	.L638:
4103:DRIVER/FatFs/source/ff.c **** 				fp->fptr < fp->obj.objsize &&
 8563              		.loc 1 4103 4 is_stmt 1 view .LVU2950
4103:DRIVER/FatFs/source/ff.c **** 				fp->fptr < fp->obj.objsize &&
 8564              		.loc 1 4103 10 is_stmt 0 view .LVU2951
 8565 013c E369     		ldr	r3, [r4, #28]
4103:DRIVER/FatFs/source/ff.c **** 				fp->fptr < fp->obj.objsize &&
 8566              		.loc 1 4103 7 view .LVU2952
 8567 013e 4B45     		cmp	r3, r9
 8568 0140 03D0     		beq	.L643
4104:DRIVER/FatFs/source/ff.c **** 				disk_read(fs->pdrv, fp->buf, sect, 1) != RES_OK) {
 8569              		.loc 1 4104 7 discriminator 1 view .LVU2953
 8570 0142 6269     		ldr	r2, [r4, #20]
4104:DRIVER/FatFs/source/ff.c **** 				disk_read(fs->pdrv, fp->buf, sect, 1) != RES_OK) {
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 298


 8571              		.loc 1 4104 23 discriminator 1 view .LVU2954
 8572 0144 E368     		ldr	r3, [r4, #12]
4103:DRIVER/FatFs/source/ff.c **** 				fp->fptr < fp->obj.objsize &&
 8573              		.loc 1 4103 25 discriminator 1 view .LVU2955
 8574 0146 9A42     		cmp	r2, r3
 8575 0148 43D3     		bcc	.L656
 8576              	.L643:
4106:DRIVER/FatFs/source/ff.c **** 			}
 8577              		.loc 1 4106 28 is_stmt 1 view .LVU2956
4109:DRIVER/FatFs/source/ff.c **** 		}
 8578              		.loc 1 4109 4 view .LVU2957
4109:DRIVER/FatFs/source/ff.c **** 		}
 8579              		.loc 1 4109 13 is_stmt 0 view .LVU2958
 8580 014a C4F81C90 		str	r9, [r4, #28]
 8581              	.LVL1032:
 8582              	.L627:
4111:DRIVER/FatFs/source/ff.c **** 		if (wcnt > btw) wcnt = btw;					/* Clip it by btw if needed */
 8583              		.loc 1 4111 3 is_stmt 1 view .LVU2959
4111:DRIVER/FatFs/source/ff.c **** 		if (wcnt > btw) wcnt = btw;					/* Clip it by btw if needed */
 8584              		.loc 1 4111 10 is_stmt 0 view .LVU2960
 8585 014e 039B     		ldr	r3, [sp, #12]
 8586 0150 9E89     		ldrh	r6, [r3, #12]
4111:DRIVER/FatFs/source/ff.c **** 		if (wcnt > btw) wcnt = btw;					/* Clip it by btw if needed */
 8587              		.loc 1 4111 27 view .LVU2961
 8588 0152 6369     		ldr	r3, [r4, #20]
4111:DRIVER/FatFs/source/ff.c **** 		if (wcnt > btw) wcnt = btw;					/* Clip it by btw if needed */
 8589              		.loc 1 4111 34 view .LVU2962
 8590 0154 B3FBF6F2 		udiv	r2, r3, r6
 8591 0158 06FB1233 		mls	r3, r6, r2, r3
4111:DRIVER/FatFs/source/ff.c **** 		if (wcnt > btw) wcnt = btw;					/* Clip it by btw if needed */
 8592              		.loc 1 4111 8 view .LVU2963
 8593 015c F61A     		subs	r6, r6, r3
 8594              	.LVL1033:
4112:DRIVER/FatFs/source/ff.c **** #if FF_FS_TINY
 8595              		.loc 1 4112 3 is_stmt 1 view .LVU2964
4112:DRIVER/FatFs/source/ff.c **** #if FF_FS_TINY
 8596              		.loc 1 4112 6 is_stmt 0 view .LVU2965
 8597 015e B542     		cmp	r5, r6
 8598 0160 00D2     		bcs	.L644
4112:DRIVER/FatFs/source/ff.c **** #if FF_FS_TINY
 8599              		.loc 1 4112 24 view .LVU2966
 8600 0162 2E46     		mov	r6, r5
 8601              	.LVL1034:
 8602              	.L644:
4118:DRIVER/FatFs/source/ff.c **** 		fp->flag |= FA_DIRTY;
 8603              		.loc 1 4118 3 is_stmt 1 view .LVU2967
4118:DRIVER/FatFs/source/ff.c **** 		fp->flag |= FA_DIRTY;
 8604              		.loc 1 4118 10 is_stmt 0 view .LVU2968
 8605 0164 04F12800 		add	r0, r4, #40
4118:DRIVER/FatFs/source/ff.c **** 		fp->flag |= FA_DIRTY;
 8606              		.loc 1 4118 3 view .LVU2969
 8607 0168 3246     		mov	r2, r6
 8608 016a 3946     		mov	r1, r7
 8609 016c 1844     		add	r0, r0, r3
 8610 016e FFF7FEFF 		bl	memcpy
 8611              	.LVL1035:
4119:DRIVER/FatFs/source/ff.c **** #endif
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 299


 8612              		.loc 1 4119 3 is_stmt 1 view .LVU2970
4119:DRIVER/FatFs/source/ff.c **** #endif
 8613              		.loc 1 4119 5 is_stmt 0 view .LVU2971
 8614 0172 237C     		ldrb	r3, [r4, #16]	@ zero_extendqisi2
4119:DRIVER/FatFs/source/ff.c **** #endif
 8615              		.loc 1 4119 12 view .LVU2972
 8616 0174 63F07F03 		orn	r3, r3, #127
 8617 0178 2374     		strb	r3, [r4, #16]
 8618              	.L642:
4039:DRIVER/FatFs/source/ff.c **** 		if (fp->fptr % SS(fs) == 0) {		/* On the sector boundary? */
 8619              		.loc 1 4039 76 is_stmt 1 view .LVU2973
4039:DRIVER/FatFs/source/ff.c **** 		if (fp->fptr % SS(fs) == 0) {		/* On the sector boundary? */
 8620              		.loc 1 4039 23 is_stmt 0 view .LVU2974
 8621 017a AD1B     		subs	r5, r5, r6
 8622              	.LVL1036:
4039:DRIVER/FatFs/source/ff.c **** 		if (fp->fptr % SS(fs) == 0) {		/* On the sector boundary? */
 8623              		.loc 1 4039 32 view .LVU2975
 8624 017c D8F80030 		ldr	r3, [r8]
4039:DRIVER/FatFs/source/ff.c **** 		if (fp->fptr % SS(fs) == 0) {		/* On the sector boundary? */
 8625              		.loc 1 4039 36 view .LVU2976
 8626 0180 3344     		add	r3, r3, r6
 8627 0182 C8F80030 		str	r3, [r8]
4039:DRIVER/FatFs/source/ff.c **** 		if (fp->fptr % SS(fs) == 0) {		/* On the sector boundary? */
 8628              		.loc 1 4039 51 view .LVU2977
 8629 0186 3744     		add	r7, r7, r6
 8630              	.LVL1037:
4039:DRIVER/FatFs/source/ff.c **** 		if (fp->fptr % SS(fs) == 0) {		/* On the sector boundary? */
 8631              		.loc 1 4039 62 view .LVU2978
 8632 0188 6369     		ldr	r3, [r4, #20]
4039:DRIVER/FatFs/source/ff.c **** 		if (fp->fptr % SS(fs) == 0) {		/* On the sector boundary? */
 8633              		.loc 1 4039 69 view .LVU2979
 8634 018a 3344     		add	r3, r3, r6
 8635 018c 6361     		str	r3, [r4, #20]
4039:DRIVER/FatFs/source/ff.c **** 		if (fp->fptr % SS(fs) == 0) {		/* On the sector boundary? */
 8636              		.loc 1 4039 115 view .LVU2980
 8637 018e E268     		ldr	r2, [r4, #12]
4039:DRIVER/FatFs/source/ff.c **** 		if (fp->fptr % SS(fs) == 0) {		/* On the sector boundary? */
 8638              		.loc 1 4039 136 view .LVU2981
 8639 0190 9342     		cmp	r3, r2
 8640 0192 38BF     		it	cc
 8641 0194 1346     		movcc	r3, r2
4039:DRIVER/FatFs/source/ff.c **** 		if (fp->fptr % SS(fs) == 0) {		/* On the sector boundary? */
 8642              		.loc 1 4039 94 view .LVU2982
 8643 0196 E360     		str	r3, [r4, #12]
 8644              	.LVL1038:
 8645              	.L645:
4039:DRIVER/FatFs/source/ff.c **** 		if (fp->fptr % SS(fs) == 0) {		/* On the sector boundary? */
 8646              		.loc 1 4039 14 is_stmt 1 discriminator 1 view .LVU2983
 8647 0198 65B3     		cbz	r5, .L632
4040:DRIVER/FatFs/source/ff.c **** 			csect = (UINT)(fp->fptr / SS(fs)) & (fs->csize - 1);	/* Sector offset in the cluster */
 8648              		.loc 1 4040 3 view .LVU2984
4040:DRIVER/FatFs/source/ff.c **** 			csect = (UINT)(fp->fptr / SS(fs)) & (fs->csize - 1);	/* Sector offset in the cluster */
 8649              		.loc 1 4040 9 is_stmt 0 view .LVU2985
 8650 019a 6269     		ldr	r2, [r4, #20]
4040:DRIVER/FatFs/source/ff.c **** 			csect = (UINT)(fp->fptr / SS(fs)) & (fs->csize - 1);	/* Sector offset in the cluster */
 8651              		.loc 1 4040 18 view .LVU2986
 8652 019c 0399     		ldr	r1, [sp, #12]
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 300


 8653 019e 8E89     		ldrh	r6, [r1, #12]
4040:DRIVER/FatFs/source/ff.c **** 			csect = (UINT)(fp->fptr / SS(fs)) & (fs->csize - 1);	/* Sector offset in the cluster */
 8654              		.loc 1 4040 16 view .LVU2987
 8655 01a0 B2FBF6F3 		udiv	r3, r2, r6
 8656 01a4 06FB1323 		mls	r3, r6, r3, r2
4040:DRIVER/FatFs/source/ff.c **** 			csect = (UINT)(fp->fptr / SS(fs)) & (fs->csize - 1);	/* Sector offset in the cluster */
 8657              		.loc 1 4040 6 view .LVU2988
 8658 01a8 002B     		cmp	r3, #0
 8659 01aa D0D1     		bne	.L627
4041:DRIVER/FatFs/source/ff.c **** 			if (csect == 0) {				/* On the cluster boundary? */
 8660              		.loc 1 4041 4 is_stmt 1 view .LVU2989
4041:DRIVER/FatFs/source/ff.c **** 			if (csect == 0) {				/* On the cluster boundary? */
 8661              		.loc 1 4041 28 is_stmt 0 view .LVU2990
 8662 01ac B2FBF6F6 		udiv	r6, r2, r6
4041:DRIVER/FatFs/source/ff.c **** 			if (csect == 0) {				/* On the cluster boundary? */
 8663              		.loc 1 4041 43 view .LVU2991
 8664 01b0 4B89     		ldrh	r3, [r1, #10]
4041:DRIVER/FatFs/source/ff.c **** 			if (csect == 0) {				/* On the cluster boundary? */
 8665              		.loc 1 4041 51 view .LVU2992
 8666 01b2 013B     		subs	r3, r3, #1
 8667              	.LVL1039:
4042:DRIVER/FatFs/source/ff.c **** 				if (fp->fptr == 0) {		/* On the top of the file? */
 8668              		.loc 1 4042 4 is_stmt 1 view .LVU2993
4042:DRIVER/FatFs/source/ff.c **** 				if (fp->fptr == 0) {		/* On the top of the file? */
 8669              		.loc 1 4042 7 is_stmt 0 view .LVU2994
 8670 01b4 1E40     		ands	r6, r6, r3
 8671              	.LVL1040:
4042:DRIVER/FatFs/source/ff.c **** 				if (fp->fptr == 0) {		/* On the top of the file? */
 8672              		.loc 1 4042 7 view .LVU2995
 8673 01b6 7FF452AF 		bne	.L628
4043:DRIVER/FatFs/source/ff.c **** 					clst = fp->obj.sclust;	/* Follow from the origin */
 8674              		.loc 1 4043 5 is_stmt 1 view .LVU2996
4043:DRIVER/FatFs/source/ff.c **** 					clst = fp->obj.sclust;	/* Follow from the origin */
 8675              		.loc 1 4043 8 is_stmt 0 view .LVU2997
 8676 01ba 002A     		cmp	r2, #0
 8677 01bc 7FF43FAF 		bne	.L629
4044:DRIVER/FatFs/source/ff.c **** 					if (clst == 0) {		/* If no cluster is allocated, */
 8678              		.loc 1 4044 6 is_stmt 1 view .LVU2998
4044:DRIVER/FatFs/source/ff.c **** 					if (clst == 0) {		/* If no cluster is allocated, */
 8679              		.loc 1 4044 11 is_stmt 0 view .LVU2999
 8680 01c0 A068     		ldr	r0, [r4, #8]
 8681              	.LVL1041:
4045:DRIVER/FatFs/source/ff.c **** 						clst = create_chain(&fp->obj, 0);	/* create a new cluster chain */
 8682              		.loc 1 4045 6 is_stmt 1 view .LVU3000
4045:DRIVER/FatFs/source/ff.c **** 						clst = create_chain(&fp->obj, 0);	/* create a new cluster chain */
 8683              		.loc 1 4045 9 is_stmt 0 view .LVU3001
 8684 01c2 0028     		cmp	r0, #0
 8685 01c4 7FF442AF 		bne	.L630
4046:DRIVER/FatFs/source/ff.c **** 					}
 8686              		.loc 1 4046 7 is_stmt 1 view .LVU3002
4046:DRIVER/FatFs/source/ff.c **** 					}
 8687              		.loc 1 4046 14 is_stmt 0 view .LVU3003
 8688 01c8 0021     		movs	r1, #0
 8689 01ca 2046     		mov	r0, r4
 8690              	.LVL1042:
4046:DRIVER/FatFs/source/ff.c **** 					}
 8691              		.loc 1 4046 14 view .LVU3004
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 301


 8692 01cc FFF7FEFF 		bl	create_chain
 8693              	.LVL1043:
4046:DRIVER/FatFs/source/ff.c **** 					}
 8694              		.loc 1 4046 14 view .LVU3005
 8695 01d0 39E7     		b	.L631
 8696              	.LVL1044:
 8697              	.L656:
4105:DRIVER/FatFs/source/ff.c **** 					ABORT(fs, FR_DISK_ERR);
 8698              		.loc 1 4105 5 view .LVU3006
 8699 01d2 0123     		movs	r3, #1
 8700 01d4 4A46     		mov	r2, r9
 8701 01d6 04F12801 		add	r1, r4, #40
 8702 01da 9BF80100 		ldrb	r0, [fp, #1]	@ zero_extendqisi2
 8703 01de FFF7FEFF 		bl	disk_read
 8704              	.LVL1045:
4104:DRIVER/FatFs/source/ff.c **** 				disk_read(fs->pdrv, fp->buf, sect, 1) != RES_OK) {
 8705              		.loc 1 4104 32 view .LVU3007
 8706 01e2 0028     		cmp	r0, #0
 8707 01e4 B1D0     		beq	.L643
4106:DRIVER/FatFs/source/ff.c **** 			}
 8708              		.loc 1 4106 6 is_stmt 1 view .LVU3008
 8709 01e6 4FF0010A 		mov	r10, #1
 8710              	.LVL1046:
4106:DRIVER/FatFs/source/ff.c **** 			}
 8711              		.loc 1 4106 6 is_stmt 0 view .LVU3009
 8712 01ea 84F811A0 		strb	r10, [r4, #17]
4106:DRIVER/FatFs/source/ff.c **** 			}
 8713              		.loc 1 4106 6 is_stmt 1 view .LVU3010
 8714 01ee CDF804A0 		str	r10, [sp, #4]
 8715              	.LVL1047:
4106:DRIVER/FatFs/source/ff.c **** 			}
 8716              		.loc 1 4106 6 is_stmt 0 view .LVU3011
 8717 01f2 5EE7     		b	.L625
 8718              	.LVL1048:
 8719              	.L632:
4123:DRIVER/FatFs/source/ff.c **** 
 8720              		.loc 1 4123 2 is_stmt 1 view .LVU3012
4123:DRIVER/FatFs/source/ff.c **** 
 8721              		.loc 1 4123 4 is_stmt 0 view .LVU3013
 8722 01f4 237C     		ldrb	r3, [r4, #16]	@ zero_extendqisi2
4123:DRIVER/FatFs/source/ff.c **** 
 8723              		.loc 1 4123 11 view .LVU3014
 8724 01f6 43F04003 		orr	r3, r3, #64
 8725 01fa 2374     		strb	r3, [r4, #16]
4125:DRIVER/FatFs/source/ff.c **** }
 8726              		.loc 1 4125 2 is_stmt 1 view .LVU3015
 8727 01fc 59E7     		b	.L625
 8728              	.LVL1049:
 8729              	.L647:
4032:DRIVER/FatFs/source/ff.c **** 
 8730              		.loc 1 4032 30 is_stmt 0 view .LVU3016
 8731 01fe 0723     		movs	r3, #7
 8732 0200 0193     		str	r3, [sp, #4]
 8733              	.LVL1050:
4032:DRIVER/FatFs/source/ff.c **** 
 8734              		.loc 1 4032 30 view .LVU3017
 8735 0202 56E7     		b	.L625
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 302


 8736              		.cfi_endproc
 8737              	.LFE42:
 8739              		.section	.text.f_sync,"ax",%progbits
 8740              		.align	1
 8741              		.global	f_sync
 8742              		.syntax unified
 8743              		.thumb
 8744              		.thumb_func
 8746              	f_sync:
 8747              	.LVL1051:
 8748              	.LFB43:
4138:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
 8749              		.loc 1 4138 1 is_stmt 1 view -0
 8750              		.cfi_startproc
 8751              		@ args = 0, pretend = 0, frame = 8
 8752              		@ frame_needed = 0, uses_anonymous_args = 0
4138:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
 8753              		.loc 1 4138 1 is_stmt 0 view .LVU3019
 8754 0000 70B5     		push	{r4, r5, r6, lr}
 8755              	.LCFI65:
 8756              		.cfi_def_cfa_offset 16
 8757              		.cfi_offset 4, -16
 8758              		.cfi_offset 5, -12
 8759              		.cfi_offset 6, -8
 8760              		.cfi_offset 14, -4
 8761 0002 82B0     		sub	sp, sp, #8
 8762              	.LCFI66:
 8763              		.cfi_def_cfa_offset 24
 8764 0004 0446     		mov	r4, r0
4139:DRIVER/FatFs/source/ff.c **** 	FATFS *fs;
 8765              		.loc 1 4139 2 is_stmt 1 view .LVU3020
4140:DRIVER/FatFs/source/ff.c **** 	DWORD tm;
 8766              		.loc 1 4140 2 view .LVU3021
4141:DRIVER/FatFs/source/ff.c **** 	BYTE *dir;
 8767              		.loc 1 4141 2 view .LVU3022
4142:DRIVER/FatFs/source/ff.c **** 
 8768              		.loc 1 4142 2 view .LVU3023
4145:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
 8769              		.loc 1 4145 2 view .LVU3024
4145:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
 8770              		.loc 1 4145 8 is_stmt 0 view .LVU3025
 8771 0006 01A9     		add	r1, sp, #4
 8772 0008 FFF7FEFF 		bl	validate
 8773              	.LVL1052:
4146:DRIVER/FatFs/source/ff.c **** 		if (fp->flag & FA_MODIFIED) {	/* Is there any change to the file? */
 8774              		.loc 1 4146 2 is_stmt 1 view .LVU3026
4146:DRIVER/FatFs/source/ff.c **** 		if (fp->flag & FA_MODIFIED) {	/* Is there any change to the file? */
 8775              		.loc 1 4146 5 is_stmt 0 view .LVU3027
 8776 000c 70B9     		cbnz	r0, .L658
4147:DRIVER/FatFs/source/ff.c **** #if !FF_FS_TINY
 8777              		.loc 1 4147 3 is_stmt 1 view .LVU3028
4147:DRIVER/FatFs/source/ff.c **** #if !FF_FS_TINY
 8778              		.loc 1 4147 9 is_stmt 0 view .LVU3029
 8779 000e 237C     		ldrb	r3, [r4, #16]	@ zero_extendqisi2
4147:DRIVER/FatFs/source/ff.c **** #if !FF_FS_TINY
 8780              		.loc 1 4147 6 view .LVU3030
 8781 0010 13F0400F 		tst	r3, #64
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 303


 8782 0014 0AD0     		beq	.L658
4149:DRIVER/FatFs/source/ff.c **** 				if (disk_write(fs->pdrv, fp->buf, fp->sect, 1) != RES_OK) LEAVE_FF(fs, FR_DISK_ERR);
 8783              		.loc 1 4149 4 is_stmt 1 view .LVU3031
4149:DRIVER/FatFs/source/ff.c **** 				if (disk_write(fs->pdrv, fp->buf, fp->sect, 1) != RES_OK) LEAVE_FF(fs, FR_DISK_ERR);
 8784              		.loc 1 4149 7 is_stmt 0 view .LVU3032
 8785 0016 13F0800F 		tst	r3, #128
 8786 001a 09D1     		bne	.L662
 8787              	.L659:
4155:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
 8788              		.loc 1 4155 4 is_stmt 1 view .LVU3033
4155:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
 8789              		.loc 1 4155 9 is_stmt 0 view .LVU3034
 8790 001c FFF7FEFF 		bl	get_fattime
 8791              	.LVL1053:
 8792 0020 0546     		mov	r5, r0
 8793              	.LVL1054:
4188:DRIVER/FatFs/source/ff.c **** 				if (res == FR_OK) {
 8794              		.loc 1 4188 5 is_stmt 1 view .LVU3035
4188:DRIVER/FatFs/source/ff.c **** 				if (res == FR_OK) {
 8795              		.loc 1 4188 11 is_stmt 0 view .LVU3036
 8796 0022 216A     		ldr	r1, [r4, #32]
 8797 0024 0198     		ldr	r0, [sp, #4]
 8798              	.LVL1055:
4188:DRIVER/FatFs/source/ff.c **** 				if (res == FR_OK) {
 8799              		.loc 1 4188 11 view .LVU3037
 8800 0026 FFF7FEFF 		bl	move_window
 8801              	.LVL1056:
4189:DRIVER/FatFs/source/ff.c **** 					dir = fp->dir_ptr;
 8802              		.loc 1 4189 5 is_stmt 1 view .LVU3038
4189:DRIVER/FatFs/source/ff.c **** 					dir = fp->dir_ptr;
 8803              		.loc 1 4189 8 is_stmt 0 view .LVU3039
 8804 002a 78B1     		cbz	r0, .L663
 8805              	.LVL1057:
 8806              	.L658:
4205:DRIVER/FatFs/source/ff.c **** 
 8807              		.loc 1 4205 1 view .LVU3040
 8808 002c 02B0     		add	sp, sp, #8
 8809              	.LCFI67:
 8810              		.cfi_remember_state
 8811              		.cfi_def_cfa_offset 16
 8812              		@ sp needed
 8813 002e 70BD     		pop	{r4, r5, r6, pc}
 8814              	.LVL1058:
 8815              	.L662:
 8816              	.LCFI68:
 8817              		.cfi_restore_state
4150:DRIVER/FatFs/source/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
 8818              		.loc 1 4150 5 is_stmt 1 view .LVU3041
4150:DRIVER/FatFs/source/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
 8819              		.loc 1 4150 9 is_stmt 0 view .LVU3042
 8820 0030 0123     		movs	r3, #1
 8821 0032 E269     		ldr	r2, [r4, #28]
 8822 0034 04F12801 		add	r1, r4, #40
 8823 0038 0198     		ldr	r0, [sp, #4]
 8824 003a 4078     		ldrb	r0, [r0, #1]	@ zero_extendqisi2
 8825 003c FFF7FEFF 		bl	disk_write
 8826              	.LVL1059:
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 304


4150:DRIVER/FatFs/source/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
 8827              		.loc 1 4150 8 view .LVU3043
 8828 0040 38BB     		cbnz	r0, .L660
4151:DRIVER/FatFs/source/ff.c **** 			}
 8829              		.loc 1 4151 5 is_stmt 1 view .LVU3044
4151:DRIVER/FatFs/source/ff.c **** 			}
 8830              		.loc 1 4151 7 is_stmt 0 view .LVU3045
 8831 0042 237C     		ldrb	r3, [r4, #16]	@ zero_extendqisi2
4151:DRIVER/FatFs/source/ff.c **** 			}
 8832              		.loc 1 4151 14 view .LVU3046
 8833 0044 03F07F03 		and	r3, r3, #127
 8834 0048 2374     		strb	r3, [r4, #16]
 8835 004a E7E7     		b	.L659
 8836              	.LVL1060:
 8837              	.L663:
4190:DRIVER/FatFs/source/ff.c **** 					dir[DIR_Attr] |= AM_ARC;						/* Set archive attribute to indicate that the file has been chan
 8838              		.loc 1 4190 6 is_stmt 1 view .LVU3047
4190:DRIVER/FatFs/source/ff.c **** 					dir[DIR_Attr] |= AM_ARC;						/* Set archive attribute to indicate that the file has been chan
 8839              		.loc 1 4190 10 is_stmt 0 view .LVU3048
 8840 004c 666A     		ldr	r6, [r4, #36]
 8841              	.LVL1061:
4191:DRIVER/FatFs/source/ff.c **** 					st_clust(fp->obj.fs, dir, fp->obj.sclust);		/* Update file allocation information  */
 8842              		.loc 1 4191 6 is_stmt 1 view .LVU3049
4191:DRIVER/FatFs/source/ff.c **** 					st_clust(fp->obj.fs, dir, fp->obj.sclust);		/* Update file allocation information  */
 8843              		.loc 1 4191 9 is_stmt 0 view .LVU3050
 8844 004e F37A     		ldrb	r3, [r6, #11]	@ zero_extendqisi2
4191:DRIVER/FatFs/source/ff.c **** 					st_clust(fp->obj.fs, dir, fp->obj.sclust);		/* Update file allocation information  */
 8845              		.loc 1 4191 20 view .LVU3051
 8846 0050 43F02003 		orr	r3, r3, #32
 8847 0054 F372     		strb	r3, [r6, #11]
4192:DRIVER/FatFs/source/ff.c **** 					st_dword(dir + DIR_FileSize, (DWORD)fp->obj.objsize);	/* Update file size */
 8848              		.loc 1 4192 6 is_stmt 1 view .LVU3052
 8849 0056 A268     		ldr	r2, [r4, #8]
 8850 0058 3146     		mov	r1, r6
 8851 005a 2068     		ldr	r0, [r4]
 8852              	.LVL1062:
4192:DRIVER/FatFs/source/ff.c **** 					st_dword(dir + DIR_FileSize, (DWORD)fp->obj.objsize);	/* Update file size */
 8853              		.loc 1 4192 6 is_stmt 0 view .LVU3053
 8854 005c FFF7FEFF 		bl	st_clust
 8855              	.LVL1063:
4193:DRIVER/FatFs/source/ff.c **** 					st_dword(dir + DIR_ModTime, tm);				/* Update modified time */
 8856              		.loc 1 4193 6 is_stmt 1 view .LVU3054
 8857 0060 E168     		ldr	r1, [r4, #12]
 8858 0062 06F11C00 		add	r0, r6, #28
 8859 0066 FFF7FEFF 		bl	st_dword
 8860              	.LVL1064:
4194:DRIVER/FatFs/source/ff.c **** 					st_word(dir + DIR_LstAccDate, 0);
 8861              		.loc 1 4194 6 view .LVU3055
 8862 006a 2946     		mov	r1, r5
 8863 006c 06F11600 		add	r0, r6, #22
 8864 0070 FFF7FEFF 		bl	st_dword
 8865              	.LVL1065:
4195:DRIVER/FatFs/source/ff.c **** 					fs->wflag = 1;
 8866              		.loc 1 4195 6 view .LVU3056
 8867 0074 0021     		movs	r1, #0
 8868 0076 06F11200 		add	r0, r6, #18
 8869 007a FFF7FEFF 		bl	st_word
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 305


 8870              	.LVL1066:
4196:DRIVER/FatFs/source/ff.c **** 					res = sync_fs(fs);					/* Restore it to the directory */
 8871              		.loc 1 4196 6 view .LVU3057
4196:DRIVER/FatFs/source/ff.c **** 					res = sync_fs(fs);					/* Restore it to the directory */
 8872              		.loc 1 4196 8 is_stmt 0 view .LVU3058
 8873 007e 0198     		ldr	r0, [sp, #4]
4196:DRIVER/FatFs/source/ff.c **** 					res = sync_fs(fs);					/* Restore it to the directory */
 8874              		.loc 1 4196 16 view .LVU3059
 8875 0080 0123     		movs	r3, #1
 8876 0082 0371     		strb	r3, [r0, #4]
4197:DRIVER/FatFs/source/ff.c **** 					fp->flag &= (BYTE)~FA_MODIFIED;
 8877              		.loc 1 4197 6 is_stmt 1 view .LVU3060
4197:DRIVER/FatFs/source/ff.c **** 					fp->flag &= (BYTE)~FA_MODIFIED;
 8878              		.loc 1 4197 12 is_stmt 0 view .LVU3061
 8879 0084 FFF7FEFF 		bl	sync_fs
 8880              	.LVL1067:
4198:DRIVER/FatFs/source/ff.c **** 				}
 8881              		.loc 1 4198 6 is_stmt 1 view .LVU3062
4198:DRIVER/FatFs/source/ff.c **** 				}
 8882              		.loc 1 4198 8 is_stmt 0 view .LVU3063
 8883 0088 237C     		ldrb	r3, [r4, #16]	@ zero_extendqisi2
4198:DRIVER/FatFs/source/ff.c **** 				}
 8884              		.loc 1 4198 15 view .LVU3064
 8885 008a 23F04003 		bic	r3, r3, #64
 8886 008e 2374     		strb	r3, [r4, #16]
 8887 0090 CCE7     		b	.L658
 8888              	.LVL1068:
 8889              	.L660:
4150:DRIVER/FatFs/source/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
 8890              		.loc 1 4150 63 view .LVU3065
 8891 0092 0120     		movs	r0, #1
 8892 0094 CAE7     		b	.L658
 8893              		.cfi_endproc
 8894              	.LFE43:
 8896              		.section	.text.f_close,"ax",%progbits
 8897              		.align	1
 8898              		.global	f_close
 8899              		.syntax unified
 8900              		.thumb
 8901              		.thumb_func
 8903              	f_close:
 8904              	.LVL1069:
 8905              	.LFB44:
4219:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
 8906              		.loc 1 4219 1 is_stmt 1 view -0
 8907              		.cfi_startproc
 8908              		@ args = 0, pretend = 0, frame = 8
 8909              		@ frame_needed = 0, uses_anonymous_args = 0
4219:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
 8910              		.loc 1 4219 1 is_stmt 0 view .LVU3067
 8911 0000 10B5     		push	{r4, lr}
 8912              	.LCFI69:
 8913              		.cfi_def_cfa_offset 8
 8914              		.cfi_offset 4, -8
 8915              		.cfi_offset 14, -4
 8916 0002 82B0     		sub	sp, sp, #8
 8917              	.LCFI70:
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 306


 8918              		.cfi_def_cfa_offset 16
 8919 0004 0446     		mov	r4, r0
4220:DRIVER/FatFs/source/ff.c **** 	FATFS *fs;
 8920              		.loc 1 4220 2 is_stmt 1 view .LVU3068
4221:DRIVER/FatFs/source/ff.c **** 
 8921              		.loc 1 4221 2 view .LVU3069
4224:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK)
 8922              		.loc 1 4224 2 view .LVU3070
4224:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK)
 8923              		.loc 1 4224 8 is_stmt 0 view .LVU3071
 8924 0006 FFF7FEFF 		bl	f_sync
 8925              	.LVL1070:
4225:DRIVER/FatFs/source/ff.c **** #endif
 8926              		.loc 1 4225 2 is_stmt 1 view .LVU3072
4225:DRIVER/FatFs/source/ff.c **** #endif
 8927              		.loc 1 4225 5 is_stmt 0 view .LVU3073
 8928 000a 08B1     		cbz	r0, .L667
 8929              	.L665:
 8930              	.LVL1071:
4241:DRIVER/FatFs/source/ff.c **** }
 8931              		.loc 1 4241 2 is_stmt 1 view .LVU3074
4242:DRIVER/FatFs/source/ff.c **** 
 8932              		.loc 1 4242 1 is_stmt 0 view .LVU3075
 8933 000c 02B0     		add	sp, sp, #8
 8934              	.LCFI71:
 8935              		.cfi_remember_state
 8936              		.cfi_def_cfa_offset 8
 8937              		@ sp needed
 8938 000e 10BD     		pop	{r4, pc}
 8939              	.LVL1072:
 8940              	.L667:
 8941              	.LCFI72:
 8942              		.cfi_restore_state
4228:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK) {
 8943              		.loc 1 4228 3 is_stmt 1 view .LVU3076
4228:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK) {
 8944              		.loc 1 4228 9 is_stmt 0 view .LVU3077
 8945 0010 01A9     		add	r1, sp, #4
 8946 0012 2046     		mov	r0, r4
 8947 0014 FFF7FEFF 		bl	validate
 8948              	.LVL1073:
4229:DRIVER/FatFs/source/ff.c **** #if FF_FS_LOCK
 8949              		.loc 1 4229 3 is_stmt 1 view .LVU3078
4229:DRIVER/FatFs/source/ff.c **** #if FF_FS_LOCK
 8950              		.loc 1 4229 6 is_stmt 0 view .LVU3079
 8951 0018 0028     		cmp	r0, #0
 8952 001a F7D1     		bne	.L665
4234:DRIVER/FatFs/source/ff.c **** #endif
 8953              		.loc 1 4234 4 is_stmt 1 view .LVU3080
4234:DRIVER/FatFs/source/ff.c **** #endif
 8954              		.loc 1 4234 15 is_stmt 0 view .LVU3081
 8955 001c 2060     		str	r0, [r4]
 8956 001e F5E7     		b	.L665
 8957              		.cfi_endproc
 8958              	.LFE44:
 8960              		.section	.text.f_lseek,"ax",%progbits
 8961              		.align	1
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 307


 8962              		.global	f_lseek
 8963              		.syntax unified
 8964              		.thumb
 8965              		.thumb_func
 8967              	f_lseek:
 8968              	.LVL1074:
 8969              	.LFB45:
4437:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
 8970              		.loc 1 4437 1 is_stmt 1 view -0
 8971              		.cfi_startproc
 8972              		@ args = 0, pretend = 0, frame = 8
 8973              		@ frame_needed = 0, uses_anonymous_args = 0
4437:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
 8974              		.loc 1 4437 1 is_stmt 0 view .LVU3083
 8975 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 8976              	.LCFI73:
 8977              		.cfi_def_cfa_offset 24
 8978              		.cfi_offset 4, -24
 8979              		.cfi_offset 5, -20
 8980              		.cfi_offset 6, -16
 8981              		.cfi_offset 7, -12
 8982              		.cfi_offset 8, -8
 8983              		.cfi_offset 14, -4
 8984 0004 82B0     		sub	sp, sp, #8
 8985              	.LCFI74:
 8986              		.cfi_def_cfa_offset 32
 8987 0006 0446     		mov	r4, r0
 8988 0008 0D46     		mov	r5, r1
4438:DRIVER/FatFs/source/ff.c **** 	FATFS *fs;
 8989              		.loc 1 4438 2 is_stmt 1 view .LVU3084
4439:DRIVER/FatFs/source/ff.c **** 	DWORD clst, bcs;
 8990              		.loc 1 4439 2 view .LVU3085
4440:DRIVER/FatFs/source/ff.c **** 	LBA_t nsect;
 8991              		.loc 1 4440 2 view .LVU3086
4441:DRIVER/FatFs/source/ff.c **** 	FSIZE_t ifptr;
 8992              		.loc 1 4441 2 view .LVU3087
4442:DRIVER/FatFs/source/ff.c **** #if FF_USE_FASTSEEK
 8993              		.loc 1 4442 2 view .LVU3088
4449:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) res = (FRESULT)fp->err;
 8994              		.loc 1 4449 2 view .LVU3089
4449:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) res = (FRESULT)fp->err;
 8995              		.loc 1 4449 8 is_stmt 0 view .LVU3090
 8996 000a 01A9     		add	r1, sp, #4
 8997              	.LVL1075:
4449:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) res = (FRESULT)fp->err;
 8998              		.loc 1 4449 8 view .LVU3091
 8999 000c FFF7FEFF 		bl	validate
 9000              	.LVL1076:
4450:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT && !FF_FS_READONLY
 9001              		.loc 1 4450 2 is_stmt 1 view .LVU3092
4450:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT && !FF_FS_READONLY
 9002              		.loc 1 4450 5 is_stmt 0 view .LVU3093
 9003 0010 8046     		mov	r8, r0
 9004 0012 0028     		cmp	r0, #0
 9005 0014 4DD1     		bne	.L671
4450:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT && !FF_FS_READONLY
 9006              		.loc 1 4450 20 is_stmt 1 discriminator 1 view .LVU3094
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 308


4450:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT && !FF_FS_READONLY
 9007              		.loc 1 4450 24 is_stmt 0 discriminator 1 view .LVU3095
 9008 0016 94F81180 		ldrb	r8, [r4, #17]	@ zero_extendqisi2
 9009              	.LVL1077:
4456:DRIVER/FatFs/source/ff.c **** 
 9010              		.loc 1 4456 2 is_stmt 1 discriminator 1 view .LVU3096
4456:DRIVER/FatFs/source/ff.c **** 
 9011              		.loc 1 4456 5 is_stmt 0 discriminator 1 view .LVU3097
 9012 001a B8F1000F 		cmp	r8, #0
 9013 001e 48D1     		bne	.L671
4515:DRIVER/FatFs/source/ff.c **** 			ofs = fp->obj.objsize;
 9014              		.loc 1 4515 3 is_stmt 1 view .LVU3098
4515:DRIVER/FatFs/source/ff.c **** 			ofs = fp->obj.objsize;
 9015              		.loc 1 4515 20 is_stmt 0 view .LVU3099
 9016 0020 E368     		ldr	r3, [r4, #12]
4515:DRIVER/FatFs/source/ff.c **** 			ofs = fp->obj.objsize;
 9017              		.loc 1 4515 6 view .LVU3100
 9018 0022 AB42     		cmp	r3, r5
 9019 0024 04D2     		bcs	.L672
4515:DRIVER/FatFs/source/ff.c **** 			ofs = fp->obj.objsize;
 9020              		.loc 1 4515 55 discriminator 1 view .LVU3101
 9021 0026 227C     		ldrb	r2, [r4, #16]	@ zero_extendqisi2
4515:DRIVER/FatFs/source/ff.c **** 			ofs = fp->obj.objsize;
 9022              		.loc 1 4515 29 discriminator 1 view .LVU3102
 9023 0028 12F0020F 		tst	r2, #2
 9024 002c 00D1     		bne	.L672
4516:DRIVER/FatFs/source/ff.c **** 		}
 9025              		.loc 1 4516 8 view .LVU3103
 9026 002e 1D46     		mov	r5, r3
 9027              	.LVL1078:
 9028              	.L672:
4518:DRIVER/FatFs/source/ff.c **** 		fp->fptr = nsect = 0;
 9029              		.loc 1 4518 3 is_stmt 1 view .LVU3104
4518:DRIVER/FatFs/source/ff.c **** 		fp->fptr = nsect = 0;
 9030              		.loc 1 4518 9 is_stmt 0 view .LVU3105
 9031 0030 6669     		ldr	r6, [r4, #20]
 9032              	.LVL1079:
4519:DRIVER/FatFs/source/ff.c **** 		if (ofs > 0) {
 9033              		.loc 1 4519 3 is_stmt 1 view .LVU3106
4519:DRIVER/FatFs/source/ff.c **** 		if (ofs > 0) {
 9034              		.loc 1 4519 12 is_stmt 0 view .LVU3107
 9035 0032 0023     		movs	r3, #0
 9036 0034 6361     		str	r3, [r4, #20]
4520:DRIVER/FatFs/source/ff.c **** 			bcs = (DWORD)fs->csize * SS(fs);	/* Cluster size (byte) */
 9037              		.loc 1 4520 3 is_stmt 1 view .LVU3108
4520:DRIVER/FatFs/source/ff.c **** 			bcs = (DWORD)fs->csize * SS(fs);	/* Cluster size (byte) */
 9038              		.loc 1 4520 6 is_stmt 0 view .LVU3109
 9039 0036 D5B1     		cbz	r5, .L673
4521:DRIVER/FatFs/source/ff.c **** 			if (ifptr > 0 &&
 9040              		.loc 1 4521 4 is_stmt 1 view .LVU3110
4521:DRIVER/FatFs/source/ff.c **** 			if (ifptr > 0 &&
 9041              		.loc 1 4521 19 is_stmt 0 view .LVU3111
 9042 0038 019B     		ldr	r3, [sp, #4]
 9043 003a 5F89     		ldrh	r7, [r3, #10]
4521:DRIVER/FatFs/source/ff.c **** 			if (ifptr > 0 &&
 9044              		.loc 1 4521 29 view .LVU3112
 9045 003c 9B89     		ldrh	r3, [r3, #12]
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 309


4521:DRIVER/FatFs/source/ff.c **** 			if (ifptr > 0 &&
 9046              		.loc 1 4521 8 view .LVU3113
 9047 003e 03FB07F7 		mul	r7, r3, r7
 9048              	.LVL1080:
4522:DRIVER/FatFs/source/ff.c **** 				(ofs - 1) / bcs >= (ifptr - 1) / bcs) {	/* When seek to same or following cluster, */
 9049              		.loc 1 4522 4 is_stmt 1 view .LVU3114
4522:DRIVER/FatFs/source/ff.c **** 				(ofs - 1) / bcs >= (ifptr - 1) / bcs) {	/* When seek to same or following cluster, */
 9050              		.loc 1 4522 7 is_stmt 0 view .LVU3115
 9051 0042 6EB1     		cbz	r6, .L674
4523:DRIVER/FatFs/source/ff.c **** 				fp->fptr = (ifptr - 1) & ~(FSIZE_t)(bcs - 1);	/* start from the current cluster */
 9052              		.loc 1 4523 10 discriminator 1 view .LVU3116
 9053 0044 6B1E     		subs	r3, r5, #1
4523:DRIVER/FatFs/source/ff.c **** 				fp->fptr = (ifptr - 1) & ~(FSIZE_t)(bcs - 1);	/* start from the current cluster */
 9054              		.loc 1 4523 15 discriminator 1 view .LVU3117
 9055 0046 B3FBF7F3 		udiv	r3, r3, r7
4523:DRIVER/FatFs/source/ff.c **** 				fp->fptr = (ifptr - 1) & ~(FSIZE_t)(bcs - 1);	/* start from the current cluster */
 9056              		.loc 1 4523 31 discriminator 1 view .LVU3118
 9057 004a 013E     		subs	r6, r6, #1
 9058              	.LVL1081:
4523:DRIVER/FatFs/source/ff.c **** 				fp->fptr = (ifptr - 1) & ~(FSIZE_t)(bcs - 1);	/* start from the current cluster */
 9059              		.loc 1 4523 36 discriminator 1 view .LVU3119
 9060 004c B6FBF7F2 		udiv	r2, r6, r7
4522:DRIVER/FatFs/source/ff.c **** 				(ofs - 1) / bcs >= (ifptr - 1) / bcs) {	/* When seek to same or following cluster, */
 9061              		.loc 1 4522 18 discriminator 1 view .LVU3120
 9062 0050 9342     		cmp	r3, r2
 9063 0052 05D3     		bcc	.L674
4524:DRIVER/FatFs/source/ff.c **** 				ofs -= fp->fptr;
 9064              		.loc 1 4524 5 is_stmt 1 view .LVU3121
4524:DRIVER/FatFs/source/ff.c **** 				ofs -= fp->fptr;
 9065              		.loc 1 4524 30 is_stmt 0 view .LVU3122
 9066 0054 7B42     		rsbs	r3, r7, #0
4524:DRIVER/FatFs/source/ff.c **** 				ofs -= fp->fptr;
 9067              		.loc 1 4524 28 view .LVU3123
 9068 0056 1E40     		ands	r6, r6, r3
 9069              	.LVL1082:
4524:DRIVER/FatFs/source/ff.c **** 				ofs -= fp->fptr;
 9070              		.loc 1 4524 14 view .LVU3124
 9071 0058 6661     		str	r6, [r4, #20]
4525:DRIVER/FatFs/source/ff.c **** 				clst = fp->clust;
 9072              		.loc 1 4525 5 is_stmt 1 view .LVU3125
4525:DRIVER/FatFs/source/ff.c **** 				clst = fp->clust;
 9073              		.loc 1 4525 9 is_stmt 0 view .LVU3126
 9074 005a AE1B     		subs	r6, r5, r6
 9075              	.LVL1083:
4526:DRIVER/FatFs/source/ff.c **** 			} else {									/* When seek to back cluster, */
 9076              		.loc 1 4526 5 is_stmt 1 view .LVU3127
4526:DRIVER/FatFs/source/ff.c **** 			} else {									/* When seek to back cluster, */
 9077              		.loc 1 4526 10 is_stmt 0 view .LVU3128
 9078 005c A569     		ldr	r5, [r4, #24]
 9079              	.LVL1084:
4526:DRIVER/FatFs/source/ff.c **** 			} else {									/* When seek to back cluster, */
 9080              		.loc 1 4526 10 view .LVU3129
 9081 005e 04E0     		b	.L675
 9082              	.LVL1085:
 9083              	.L674:
4528:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY
 9084              		.loc 1 4528 5 is_stmt 1 view .LVU3130
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 310


4528:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY
 9085              		.loc 1 4528 10 is_stmt 0 view .LVU3131
 9086 0060 A068     		ldr	r0, [r4, #8]
 9087              	.LVL1086:
4530:DRIVER/FatFs/source/ff.c **** 					clst = create_chain(&fp->obj, 0);
 9088              		.loc 1 4530 5 is_stmt 1 view .LVU3132
4530:DRIVER/FatFs/source/ff.c **** 					clst = create_chain(&fp->obj, 0);
 9089              		.loc 1 4530 8 is_stmt 0 view .LVU3133
 9090 0062 50B3     		cbz	r0, .L696
 9091              	.L676:
4537:DRIVER/FatFs/source/ff.c **** 			}
 9092              		.loc 1 4537 5 is_stmt 1 view .LVU3134
4537:DRIVER/FatFs/source/ff.c **** 			}
 9093              		.loc 1 4537 15 is_stmt 0 view .LVU3135
 9094 0064 A061     		str	r0, [r4, #24]
 9095 0066 2E46     		mov	r6, r5
 9096 0068 0546     		mov	r5, r0
 9097              	.LVL1087:
 9098              	.L675:
4539:DRIVER/FatFs/source/ff.c **** 				while (ofs > bcs) {						/* Cluster following loop */
 9099              		.loc 1 4539 4 is_stmt 1 view .LVU3136
4539:DRIVER/FatFs/source/ff.c **** 				while (ofs > bcs) {						/* Cluster following loop */
 9100              		.loc 1 4539 7 is_stmt 0 view .LVU3137
 9101 006a 002D     		cmp	r5, #0
 9102 006c 49D1     		bne	.L679
 9103              	.LVL1088:
 9104              	.L673:
4569:DRIVER/FatFs/source/ff.c **** 			fp->obj.objsize = fp->fptr;
 9105              		.loc 1 4569 3 is_stmt 1 view .LVU3138
4569:DRIVER/FatFs/source/ff.c **** 			fp->obj.objsize = fp->fptr;
 9106              		.loc 1 4569 28 is_stmt 0 view .LVU3139
 9107 006e 6369     		ldr	r3, [r4, #20]
4569:DRIVER/FatFs/source/ff.c **** 			fp->obj.objsize = fp->fptr;
 9108              		.loc 1 4569 44 view .LVU3140
 9109 0070 E268     		ldr	r2, [r4, #12]
4569:DRIVER/FatFs/source/ff.c **** 			fp->obj.objsize = fp->fptr;
 9110              		.loc 1 4569 6 view .LVU3141
 9111 0072 9342     		cmp	r3, r2
 9112 0074 04D9     		bls	.L688
4570:DRIVER/FatFs/source/ff.c **** 			fp->flag |= FA_MODIFIED;
 9113              		.loc 1 4570 4 is_stmt 1 view .LVU3142
4570:DRIVER/FatFs/source/ff.c **** 			fp->flag |= FA_MODIFIED;
 9114              		.loc 1 4570 20 is_stmt 0 view .LVU3143
 9115 0076 E360     		str	r3, [r4, #12]
4571:DRIVER/FatFs/source/ff.c **** 		}
 9116              		.loc 1 4571 4 is_stmt 1 view .LVU3144
4571:DRIVER/FatFs/source/ff.c **** 		}
 9117              		.loc 1 4571 6 is_stmt 0 view .LVU3145
 9118 0078 227C     		ldrb	r2, [r4, #16]	@ zero_extendqisi2
4571:DRIVER/FatFs/source/ff.c **** 		}
 9119              		.loc 1 4571 13 view .LVU3146
 9120 007a 42F04002 		orr	r2, r2, #64
 9121 007e 2274     		strb	r2, [r4, #16]
 9122              	.L688:
4573:DRIVER/FatFs/source/ff.c **** #if !FF_FS_TINY
 9123              		.loc 1 4573 3 is_stmt 1 view .LVU3147
4573:DRIVER/FatFs/source/ff.c **** #if !FF_FS_TINY
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 311


 9124              		.loc 1 4573 18 is_stmt 0 view .LVU3148
 9125 0080 0198     		ldr	r0, [sp, #4]
 9126 0082 8289     		ldrh	r2, [r0, #12]
4573:DRIVER/FatFs/source/ff.c **** #if !FF_FS_TINY
 9127              		.loc 1 4573 16 view .LVU3149
 9128 0084 B3FBF2F1 		udiv	r1, r3, r2
 9129 0088 02FB1133 		mls	r3, r2, r1, r3
4573:DRIVER/FatFs/source/ff.c **** #if !FF_FS_TINY
 9130              		.loc 1 4573 6 view .LVU3150
 9131 008c 8BB1     		cbz	r3, .L671
4573:DRIVER/FatFs/source/ff.c **** #if !FF_FS_TINY
 9132              		.loc 1 4573 39 discriminator 1 view .LVU3151
 9133 008e E269     		ldr	r2, [r4, #28]
4573:DRIVER/FatFs/source/ff.c **** #if !FF_FS_TINY
 9134              		.loc 1 4573 25 discriminator 1 view .LVU3152
 9135 0090 AA42     		cmp	r2, r5
 9136 0092 0ED0     		beq	.L671
4576:DRIVER/FatFs/source/ff.c **** 				if (disk_write(fs->pdrv, fp->buf, fp->sect, 1) != RES_OK) ABORT(fs, FR_DISK_ERR);
 9137              		.loc 1 4576 4 is_stmt 1 view .LVU3153
4576:DRIVER/FatFs/source/ff.c **** 				if (disk_write(fs->pdrv, fp->buf, fp->sect, 1) != RES_OK) ABORT(fs, FR_DISK_ERR);
 9138              		.loc 1 4576 8 is_stmt 0 view .LVU3154
 9139 0094 94F91030 		ldrsb	r3, [r4, #16]
4576:DRIVER/FatFs/source/ff.c **** 				if (disk_write(fs->pdrv, fp->buf, fp->sect, 1) != RES_OK) ABORT(fs, FR_DISK_ERR);
 9140              		.loc 1 4576 7 view .LVU3155
 9141 0098 002B     		cmp	r3, #0
 9142 009a 68DB     		blt	.L697
 9143              	.L689:
4581:DRIVER/FatFs/source/ff.c **** #endif
 9144              		.loc 1 4581 4 is_stmt 1 view .LVU3156
4581:DRIVER/FatFs/source/ff.c **** #endif
 9145              		.loc 1 4581 8 is_stmt 0 view .LVU3157
 9146 009c 0123     		movs	r3, #1
 9147 009e 2A46     		mov	r2, r5
 9148 00a0 04F12801 		add	r1, r4, #40
 9149 00a4 0198     		ldr	r0, [sp, #4]
 9150 00a6 4078     		ldrb	r0, [r0, #1]	@ zero_extendqisi2
 9151 00a8 FFF7FEFF 		bl	disk_read
 9152              	.LVL1089:
4581:DRIVER/FatFs/source/ff.c **** #endif
 9153              		.loc 1 4581 7 view .LVU3158
 9154 00ac 0028     		cmp	r0, #0
 9155 00ae 6FD1     		bne	.L698
4581:DRIVER/FatFs/source/ff.c **** #endif
 9156              		.loc 1 4581 80 is_stmt 1 discriminator 2 view .LVU3159
4583:DRIVER/FatFs/source/ff.c **** 		}
 9157              		.loc 1 4583 4 discriminator 2 view .LVU3160
4583:DRIVER/FatFs/source/ff.c **** 		}
 9158              		.loc 1 4583 13 is_stmt 0 discriminator 2 view .LVU3161
 9159 00b0 E561     		str	r5, [r4, #28]
 9160              	.LVL1090:
 9161              	.L671:
4588:DRIVER/FatFs/source/ff.c **** 
 9162              		.loc 1 4588 1 view .LVU3162
 9163 00b2 4046     		mov	r0, r8
 9164 00b4 02B0     		add	sp, sp, #8
 9165              	.LCFI75:
 9166              		.cfi_remember_state
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 312


 9167              		.cfi_def_cfa_offset 24
 9168              		@ sp needed
 9169 00b6 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 9170              	.LVL1091:
 9171              	.L696:
 9172              	.LCFI76:
 9173              		.cfi_restore_state
4531:DRIVER/FatFs/source/ff.c **** 					if (clst == 1) ABORT(fs, FR_INT_ERR);
 9174              		.loc 1 4531 6 is_stmt 1 view .LVU3163
4531:DRIVER/FatFs/source/ff.c **** 					if (clst == 1) ABORT(fs, FR_INT_ERR);
 9175              		.loc 1 4531 13 is_stmt 0 view .LVU3164
 9176 00ba 0021     		movs	r1, #0
 9177 00bc 2046     		mov	r0, r4
 9178              	.LVL1092:
4531:DRIVER/FatFs/source/ff.c **** 					if (clst == 1) ABORT(fs, FR_INT_ERR);
 9179              		.loc 1 4531 13 view .LVU3165
 9180 00be FFF7FEFF 		bl	create_chain
 9181              	.LVL1093:
4532:DRIVER/FatFs/source/ff.c **** 					if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 9182              		.loc 1 4532 6 is_stmt 1 view .LVU3166
4532:DRIVER/FatFs/source/ff.c **** 					if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 9183              		.loc 1 4532 9 is_stmt 0 view .LVU3167
 9184 00c2 0128     		cmp	r0, #1
 9185 00c4 04D0     		beq	.L699
4532:DRIVER/FatFs/source/ff.c **** 					if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 9186              		.loc 1 4532 42 is_stmt 1 discriminator 2 view .LVU3168
4533:DRIVER/FatFs/source/ff.c **** 					fp->obj.sclust = clst;
 9187              		.loc 1 4533 6 discriminator 2 view .LVU3169
4533:DRIVER/FatFs/source/ff.c **** 					fp->obj.sclust = clst;
 9188              		.loc 1 4533 9 is_stmt 0 discriminator 2 view .LVU3170
 9189 00c6 B0F1FF3F 		cmp	r0, #-1
 9190 00ca 06D0     		beq	.L700
4533:DRIVER/FatFs/source/ff.c **** 					fp->obj.sclust = clst;
 9191              		.loc 1 4533 52 is_stmt 1 discriminator 2 view .LVU3171
4534:DRIVER/FatFs/source/ff.c **** 				}
 9192              		.loc 1 4534 6 discriminator 2 view .LVU3172
4534:DRIVER/FatFs/source/ff.c **** 				}
 9193              		.loc 1 4534 21 is_stmt 0 discriminator 2 view .LVU3173
 9194 00cc A060     		str	r0, [r4, #8]
 9195 00ce C9E7     		b	.L676
 9196              	.L699:
4532:DRIVER/FatFs/source/ff.c **** 					if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 9197              		.loc 1 4532 21 is_stmt 1 discriminator 1 view .LVU3174
 9198 00d0 4FF00208 		mov	r8, #2
 9199              	.LVL1094:
4532:DRIVER/FatFs/source/ff.c **** 					if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 9200              		.loc 1 4532 21 is_stmt 0 discriminator 1 view .LVU3175
 9201 00d4 84F81180 		strb	r8, [r4, #17]
4532:DRIVER/FatFs/source/ff.c **** 					if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 9202              		.loc 1 4532 21 is_stmt 1 discriminator 1 view .LVU3176
 9203 00d8 EBE7     		b	.L671
 9204              	.LVL1095:
 9205              	.L700:
4533:DRIVER/FatFs/source/ff.c **** 					fp->obj.sclust = clst;
 9206              		.loc 1 4533 30 discriminator 1 view .LVU3177
 9207 00da 4FF00108 		mov	r8, #1
 9208              	.LVL1096:
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 313


4533:DRIVER/FatFs/source/ff.c **** 					fp->obj.sclust = clst;
 9209              		.loc 1 4533 30 is_stmt 0 discriminator 1 view .LVU3178
 9210 00de 84F81180 		strb	r8, [r4, #17]
4533:DRIVER/FatFs/source/ff.c **** 					fp->obj.sclust = clst;
 9211              		.loc 1 4533 30 is_stmt 1 discriminator 1 view .LVU3179
 9212 00e2 E6E7     		b	.L671
 9213              	.LVL1097:
 9214              	.L680:
4555:DRIVER/FatFs/source/ff.c **** 					}
 9215              		.loc 1 4555 7 view .LVU3180
4555:DRIVER/FatFs/source/ff.c **** 					}
 9216              		.loc 1 4555 14 is_stmt 0 view .LVU3181
 9217 00e4 2946     		mov	r1, r5
 9218 00e6 2046     		mov	r0, r4
 9219 00e8 FFF7FEFF 		bl	get_fat
 9220              	.LVL1098:
 9221 00ec 0546     		mov	r5, r0
 9222              	.LVL1099:
 9223              	.L682:
4557:DRIVER/FatFs/source/ff.c **** 					if (clst <= 1 || clst >= fs->n_fatent) ABORT(fs, FR_INT_ERR);
 9224              		.loc 1 4557 6 is_stmt 1 view .LVU3182
4557:DRIVER/FatFs/source/ff.c **** 					if (clst <= 1 || clst >= fs->n_fatent) ABORT(fs, FR_INT_ERR);
 9225              		.loc 1 4557 9 is_stmt 0 view .LVU3183
 9226 00ee B5F1FF3F 		cmp	r5, #-1
 9227 00f2 2BD0     		beq	.L701
4557:DRIVER/FatFs/source/ff.c **** 					if (clst <= 1 || clst >= fs->n_fatent) ABORT(fs, FR_INT_ERR);
 9228              		.loc 1 4557 52 is_stmt 1 discriminator 2 view .LVU3184
4558:DRIVER/FatFs/source/ff.c **** 					fp->clust = clst;
 9229              		.loc 1 4558 6 discriminator 2 view .LVU3185
4558:DRIVER/FatFs/source/ff.c **** 					fp->clust = clst;
 9230              		.loc 1 4558 9 is_stmt 0 discriminator 2 view .LVU3186
 9231 00f4 012D     		cmp	r5, #1
 9232 00f6 2ED9     		bls	.L684
4558:DRIVER/FatFs/source/ff.c **** 					fp->clust = clst;
 9233              		.loc 1 4558 33 discriminator 2 view .LVU3187
 9234 00f8 019B     		ldr	r3, [sp, #4]
 9235 00fa DB69     		ldr	r3, [r3, #28]
4558:DRIVER/FatFs/source/ff.c **** 					fp->clust = clst;
 9236              		.loc 1 4558 20 discriminator 2 view .LVU3188
 9237 00fc AB42     		cmp	r3, r5
 9238 00fe 2AD9     		bls	.L684
4558:DRIVER/FatFs/source/ff.c **** 					fp->clust = clst;
 9239              		.loc 1 4558 66 is_stmt 1 discriminator 4 view .LVU3189
4559:DRIVER/FatFs/source/ff.c **** 				}
 9240              		.loc 1 4559 6 discriminator 4 view .LVU3190
4559:DRIVER/FatFs/source/ff.c **** 				}
 9241              		.loc 1 4559 16 is_stmt 0 discriminator 4 view .LVU3191
 9242 0100 A561     		str	r5, [r4, #24]
 9243              	.LVL1100:
 9244              	.L679:
4540:DRIVER/FatFs/source/ff.c **** 					ofs -= bcs; fp->fptr += bcs;
 9245              		.loc 1 4540 16 is_stmt 1 view .LVU3192
 9246 0102 BE42     		cmp	r6, r7
 9247 0104 0FD9     		bls	.L681
4541:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY
 9248              		.loc 1 4541 6 view .LVU3193
4541:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 314


 9249              		.loc 1 4541 10 is_stmt 0 view .LVU3194
 9250 0106 F61B     		subs	r6, r6, r7
 9251              	.LVL1101:
4541:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY
 9252              		.loc 1 4541 18 is_stmt 1 view .LVU3195
4541:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY
 9253              		.loc 1 4541 20 is_stmt 0 view .LVU3196
 9254 0108 6369     		ldr	r3, [r4, #20]
4541:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY
 9255              		.loc 1 4541 27 view .LVU3197
 9256 010a 3B44     		add	r3, r3, r7
 9257 010c 6361     		str	r3, [r4, #20]
4543:DRIVER/FatFs/source/ff.c **** 						if (FF_FS_EXFAT && fp->fptr > fp->obj.objsize) {	/* No FAT chain object needs correct objsize
 9258              		.loc 1 4543 6 is_stmt 1 view .LVU3198
4543:DRIVER/FatFs/source/ff.c **** 						if (FF_FS_EXFAT && fp->fptr > fp->obj.objsize) {	/* No FAT chain object needs correct objsize
 9259              		.loc 1 4543 12 is_stmt 0 view .LVU3199
 9260 010e 237C     		ldrb	r3, [r4, #16]	@ zero_extendqisi2
4543:DRIVER/FatFs/source/ff.c **** 						if (FF_FS_EXFAT && fp->fptr > fp->obj.objsize) {	/* No FAT chain object needs correct objsize
 9261              		.loc 1 4543 9 view .LVU3200
 9262 0110 13F0020F 		tst	r3, #2
 9263 0114 E6D0     		beq	.L680
4544:DRIVER/FatFs/source/ff.c **** 							fp->obj.objsize = fp->fptr;
 9264              		.loc 1 4544 7 is_stmt 1 view .LVU3201
4548:DRIVER/FatFs/source/ff.c **** 						if (clst == 0) {				/* Clip file size in case of disk full */
 9265              		.loc 1 4548 7 view .LVU3202
4548:DRIVER/FatFs/source/ff.c **** 						if (clst == 0) {				/* Clip file size in case of disk full */
 9266              		.loc 1 4548 14 is_stmt 0 view .LVU3203
 9267 0116 2946     		mov	r1, r5
 9268 0118 2046     		mov	r0, r4
 9269 011a FFF7FEFF 		bl	create_chain
 9270              	.LVL1102:
4549:DRIVER/FatFs/source/ff.c **** 							ofs = 0; break;
 9271              		.loc 1 4549 7 is_stmt 1 view .LVU3204
4549:DRIVER/FatFs/source/ff.c **** 							ofs = 0; break;
 9272              		.loc 1 4549 10 is_stmt 0 view .LVU3205
 9273 011e 0546     		mov	r5, r0
 9274 0120 0028     		cmp	r0, #0
 9275 0122 E4D1     		bne	.L682
4550:DRIVER/FatFs/source/ff.c **** 						}
 9276              		.loc 1 4550 12 view .LVU3206
 9277 0124 0646     		mov	r6, r0
 9278              	.LVL1103:
 9279              	.L681:
4561:DRIVER/FatFs/source/ff.c **** 				if (ofs % SS(fs)) {
 9280              		.loc 1 4561 5 is_stmt 1 view .LVU3207
4561:DRIVER/FatFs/source/ff.c **** 				if (ofs % SS(fs)) {
 9281              		.loc 1 4561 7 is_stmt 0 view .LVU3208
 9282 0126 6369     		ldr	r3, [r4, #20]
4561:DRIVER/FatFs/source/ff.c **** 				if (ofs % SS(fs)) {
 9283              		.loc 1 4561 14 view .LVU3209
 9284 0128 3344     		add	r3, r3, r6
 9285 012a 6361     		str	r3, [r4, #20]
4562:DRIVER/FatFs/source/ff.c **** 					nsect = clst2sect(fs, clst);	/* Current sector */
 9286              		.loc 1 4562 5 is_stmt 1 view .LVU3210
4562:DRIVER/FatFs/source/ff.c **** 					nsect = clst2sect(fs, clst);	/* Current sector */
 9287              		.loc 1 4562 15 is_stmt 0 view .LVU3211
 9288 012c 0198     		ldr	r0, [sp, #4]
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 315


 9289 012e 8789     		ldrh	r7, [r0, #12]
 9290              	.LVL1104:
4562:DRIVER/FatFs/source/ff.c **** 					nsect = clst2sect(fs, clst);	/* Current sector */
 9291              		.loc 1 4562 13 view .LVU3212
 9292 0130 B6FBF7F3 		udiv	r3, r6, r7
 9293 0134 07FB1363 		mls	r3, r7, r3, r6
4562:DRIVER/FatFs/source/ff.c **** 					nsect = clst2sect(fs, clst);	/* Current sector */
 9294              		.loc 1 4562 8 view .LVU3213
 9295 0138 BBB1     		cbz	r3, .L694
4563:DRIVER/FatFs/source/ff.c **** 					if (nsect == 0) ABORT(fs, FR_INT_ERR);
 9296              		.loc 1 4563 6 is_stmt 1 view .LVU3214
4563:DRIVER/FatFs/source/ff.c **** 					if (nsect == 0) ABORT(fs, FR_INT_ERR);
 9297              		.loc 1 4563 14 is_stmt 0 view .LVU3215
 9298 013a 2946     		mov	r1, r5
 9299 013c FFF7FEFF 		bl	clst2sect
 9300              	.LVL1105:
4564:DRIVER/FatFs/source/ff.c **** 					nsect += (DWORD)(ofs / SS(fs));
 9301              		.loc 1 4564 6 is_stmt 1 view .LVU3216
4564:DRIVER/FatFs/source/ff.c **** 					nsect += (DWORD)(ofs / SS(fs));
 9302              		.loc 1 4564 9 is_stmt 0 view .LVU3217
 9303 0140 0546     		mov	r5, r0
 9304              	.LVL1106:
4564:DRIVER/FatFs/source/ff.c **** 					nsect += (DWORD)(ofs / SS(fs));
 9305              		.loc 1 4564 9 view .LVU3218
 9306 0142 68B1     		cbz	r0, .L702
4564:DRIVER/FatFs/source/ff.c **** 					nsect += (DWORD)(ofs / SS(fs));
 9307              		.loc 1 4564 43 is_stmt 1 discriminator 2 view .LVU3219
4565:DRIVER/FatFs/source/ff.c **** 				}
 9308              		.loc 1 4565 6 discriminator 2 view .LVU3220
4565:DRIVER/FatFs/source/ff.c **** 				}
 9309              		.loc 1 4565 15 is_stmt 0 discriminator 2 view .LVU3221
 9310 0144 B6FBF7F6 		udiv	r6, r6, r7
 9311              	.LVL1107:
4565:DRIVER/FatFs/source/ff.c **** 				}
 9312              		.loc 1 4565 12 discriminator 2 view .LVU3222
 9313 0148 3544     		add	r5, r5, r6
 9314              	.LVL1108:
4565:DRIVER/FatFs/source/ff.c **** 				}
 9315              		.loc 1 4565 12 discriminator 2 view .LVU3223
 9316 014a 90E7     		b	.L673
 9317              	.LVL1109:
 9318              	.L701:
4557:DRIVER/FatFs/source/ff.c **** 					if (clst <= 1 || clst >= fs->n_fatent) ABORT(fs, FR_INT_ERR);
 9319              		.loc 1 4557 30 is_stmt 1 discriminator 1 view .LVU3224
 9320 014c 4FF00108 		mov	r8, #1
 9321              	.LVL1110:
4557:DRIVER/FatFs/source/ff.c **** 					if (clst <= 1 || clst >= fs->n_fatent) ABORT(fs, FR_INT_ERR);
 9322              		.loc 1 4557 30 is_stmt 0 discriminator 1 view .LVU3225
 9323 0150 84F81180 		strb	r8, [r4, #17]
4557:DRIVER/FatFs/source/ff.c **** 					if (clst <= 1 || clst >= fs->n_fatent) ABORT(fs, FR_INT_ERR);
 9324              		.loc 1 4557 30 is_stmt 1 discriminator 1 view .LVU3226
 9325 0154 ADE7     		b	.L671
 9326              	.LVL1111:
 9327              	.L684:
4558:DRIVER/FatFs/source/ff.c **** 					fp->clust = clst;
 9328              		.loc 1 4558 45 discriminator 3 view .LVU3227
 9329 0156 4FF00208 		mov	r8, #2
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 316


 9330              	.LVL1112:
4558:DRIVER/FatFs/source/ff.c **** 					fp->clust = clst;
 9331              		.loc 1 4558 45 is_stmt 0 discriminator 3 view .LVU3228
 9332 015a 84F81180 		strb	r8, [r4, #17]
4558:DRIVER/FatFs/source/ff.c **** 					fp->clust = clst;
 9333              		.loc 1 4558 45 is_stmt 1 discriminator 3 view .LVU3229
 9334 015e A8E7     		b	.L671
 9335              	.LVL1113:
 9336              	.L702:
4564:DRIVER/FatFs/source/ff.c **** 					nsect += (DWORD)(ofs / SS(fs));
 9337              		.loc 1 4564 22 discriminator 1 view .LVU3230
 9338 0160 4FF00208 		mov	r8, #2
 9339              	.LVL1114:
4564:DRIVER/FatFs/source/ff.c **** 					nsect += (DWORD)(ofs / SS(fs));
 9340              		.loc 1 4564 22 is_stmt 0 discriminator 1 view .LVU3231
 9341 0164 84F81180 		strb	r8, [r4, #17]
4564:DRIVER/FatFs/source/ff.c **** 					nsect += (DWORD)(ofs / SS(fs));
 9342              		.loc 1 4564 22 is_stmt 1 discriminator 1 view .LVU3232
 9343 0168 A3E7     		b	.L671
 9344              	.LVL1115:
 9345              	.L694:
4519:DRIVER/FatFs/source/ff.c **** 		if (ofs > 0) {
 9346              		.loc 1 4519 20 is_stmt 0 view .LVU3233
 9347 016a 1D46     		mov	r5, r3
 9348              	.LVL1116:
4519:DRIVER/FatFs/source/ff.c **** 		if (ofs > 0) {
 9349              		.loc 1 4519 20 view .LVU3234
 9350 016c 7FE7     		b	.L673
 9351              	.LVL1117:
 9352              	.L697:
4577:DRIVER/FatFs/source/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
 9353              		.loc 1 4577 5 is_stmt 1 view .LVU3235
4577:DRIVER/FatFs/source/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
 9354              		.loc 1 4577 9 is_stmt 0 view .LVU3236
 9355 016e 0123     		movs	r3, #1
 9356 0170 04F12801 		add	r1, r4, #40
 9357 0174 4078     		ldrb	r0, [r0, #1]	@ zero_extendqisi2
 9358 0176 FFF7FEFF 		bl	disk_write
 9359              	.LVL1118:
4577:DRIVER/FatFs/source/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
 9360              		.loc 1 4577 8 view .LVU3237
 9361 017a 20B9     		cbnz	r0, .L703
4577:DRIVER/FatFs/source/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
 9362              		.loc 1 4577 85 is_stmt 1 discriminator 2 view .LVU3238
4578:DRIVER/FatFs/source/ff.c **** 			}
 9363              		.loc 1 4578 5 discriminator 2 view .LVU3239
4578:DRIVER/FatFs/source/ff.c **** 			}
 9364              		.loc 1 4578 7 is_stmt 0 discriminator 2 view .LVU3240
 9365 017c 237C     		ldrb	r3, [r4, #16]	@ zero_extendqisi2
4578:DRIVER/FatFs/source/ff.c **** 			}
 9366              		.loc 1 4578 14 discriminator 2 view .LVU3241
 9367 017e 03F07F03 		and	r3, r3, #127
 9368 0182 2374     		strb	r3, [r4, #16]
 9369 0184 8AE7     		b	.L689
 9370              	.L703:
4577:DRIVER/FatFs/source/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
 9371              		.loc 1 4577 63 is_stmt 1 discriminator 1 view .LVU3242
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 317


 9372 0186 4FF00108 		mov	r8, #1
 9373              	.LVL1119:
4577:DRIVER/FatFs/source/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
 9374              		.loc 1 4577 63 is_stmt 0 discriminator 1 view .LVU3243
 9375 018a 84F81180 		strb	r8, [r4, #17]
4577:DRIVER/FatFs/source/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
 9376              		.loc 1 4577 63 is_stmt 1 discriminator 1 view .LVU3244
 9377 018e 90E7     		b	.L671
 9378              	.LVL1120:
 9379              	.L698:
4581:DRIVER/FatFs/source/ff.c **** #endif
 9380              		.loc 1 4581 58 discriminator 1 view .LVU3245
 9381 0190 4FF00108 		mov	r8, #1
 9382              	.LVL1121:
4581:DRIVER/FatFs/source/ff.c **** #endif
 9383              		.loc 1 4581 58 is_stmt 0 discriminator 1 view .LVU3246
 9384 0194 84F81180 		strb	r8, [r4, #17]
4581:DRIVER/FatFs/source/ff.c **** #endif
 9385              		.loc 1 4581 58 is_stmt 1 discriminator 1 view .LVU3247
 9386 0198 8BE7     		b	.L671
 9387              		.cfi_endproc
 9388              	.LFE45:
 9390              		.section	.text.f_opendir,"ax",%progbits
 9391              		.align	1
 9392              		.global	f_opendir
 9393              		.syntax unified
 9394              		.thumb
 9395              		.thumb_func
 9397              	f_opendir:
 9398              	.LVL1122:
 9399              	.LFB46:
4601:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
 9400              		.loc 1 4601 1 view -0
 9401              		.cfi_startproc
 9402              		@ args = 0, pretend = 0, frame = 16
 9403              		@ frame_needed = 0, uses_anonymous_args = 0
4601:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
 9404              		.loc 1 4601 1 is_stmt 0 view .LVU3249
 9405 0000 10B5     		push	{r4, lr}
 9406              	.LCFI77:
 9407              		.cfi_def_cfa_offset 8
 9408              		.cfi_offset 4, -8
 9409              		.cfi_offset 14, -4
 9410 0002 84B0     		sub	sp, sp, #16
 9411              	.LCFI78:
 9412              		.cfi_def_cfa_offset 24
 9413 0004 0191     		str	r1, [sp, #4]
4602:DRIVER/FatFs/source/ff.c **** 	FATFS *fs;
 9414              		.loc 1 4602 2 is_stmt 1 view .LVU3250
4603:DRIVER/FatFs/source/ff.c **** 	DEF_NAMBUF
 9415              		.loc 1 4603 2 view .LVU3251
4607:DRIVER/FatFs/source/ff.c **** 
 9416              		.loc 1 4607 2 view .LVU3252
4607:DRIVER/FatFs/source/ff.c **** 
 9417              		.loc 1 4607 5 is_stmt 0 view .LVU3253
 9418 0006 0028     		cmp	r0, #0
 9419 0008 32D0     		beq	.L709
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 318


 9420 000a 0446     		mov	r4, r0
4610:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
 9421              		.loc 1 4610 2 is_stmt 1 view .LVU3254
4610:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
 9422              		.loc 1 4610 8 is_stmt 0 view .LVU3255
 9423 000c 0022     		movs	r2, #0
 9424 000e 03A9     		add	r1, sp, #12
 9425              	.LVL1123:
4610:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
 9426              		.loc 1 4610 8 view .LVU3256
 9427 0010 01A8     		add	r0, sp, #4
 9428              	.LVL1124:
4610:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
 9429              		.loc 1 4610 8 view .LVU3257
 9430 0012 FFF7FEFF 		bl	mount_volume
 9431              	.LVL1125:
4611:DRIVER/FatFs/source/ff.c **** 		dp->obj.fs = fs;
 9432              		.loc 1 4611 2 is_stmt 1 view .LVU3258
4611:DRIVER/FatFs/source/ff.c **** 		dp->obj.fs = fs;
 9433              		.loc 1 4611 5 is_stmt 0 view .LVU3259
 9434 0016 0346     		mov	r3, r0
 9435 0018 20B1     		cbz	r0, .L713
 9436              	.LVL1126:
 9437              	.L706:
4651:DRIVER/FatFs/source/ff.c **** 
 9438              		.loc 1 4651 20 is_stmt 1 discriminator 1 view .LVU3260
4651:DRIVER/FatFs/source/ff.c **** 
 9439              		.loc 1 4651 31 is_stmt 0 discriminator 1 view .LVU3261
 9440 001a 0022     		movs	r2, #0
 9441 001c 2260     		str	r2, [r4]
 9442              	.LVL1127:
 9443              	.L705:
4654:DRIVER/FatFs/source/ff.c **** 
 9444              		.loc 1 4654 1 view .LVU3262
 9445 001e 1846     		mov	r0, r3
 9446 0020 04B0     		add	sp, sp, #16
 9447              	.LCFI79:
 9448              		.cfi_remember_state
 9449              		.cfi_def_cfa_offset 8
 9450              		@ sp needed
 9451 0022 10BD     		pop	{r4, pc}
 9452              	.LVL1128:
 9453              	.L713:
 9454              	.LCFI80:
 9455              		.cfi_restore_state
4612:DRIVER/FatFs/source/ff.c **** 		INIT_NAMBUF(fs);
 9456              		.loc 1 4612 3 is_stmt 1 view .LVU3263
4612:DRIVER/FatFs/source/ff.c **** 		INIT_NAMBUF(fs);
 9457              		.loc 1 4612 14 is_stmt 0 view .LVU3264
 9458 0024 039B     		ldr	r3, [sp, #12]
 9459 0026 2360     		str	r3, [r4]
4613:DRIVER/FatFs/source/ff.c **** 		res = follow_path(dp, path);			/* Follow the path to the directory */
 9460              		.loc 1 4613 18 is_stmt 1 view .LVU3265
4614:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK) {						/* Follow completed */
 9461              		.loc 1 4614 3 view .LVU3266
4614:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK) {						/* Follow completed */
 9462              		.loc 1 4614 9 is_stmt 0 view .LVU3267
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 319


 9463 0028 0199     		ldr	r1, [sp, #4]
 9464 002a 2046     		mov	r0, r4
 9465              	.LVL1129:
4614:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK) {						/* Follow completed */
 9466              		.loc 1 4614 9 view .LVU3268
 9467 002c FFF7FEFF 		bl	follow_path
 9468              	.LVL1130:
4615:DRIVER/FatFs/source/ff.c **** 			if (!(dp->fn[NSFLAG] & NS_NONAME)) {	/* It is not the origin directory itself */
 9469              		.loc 1 4615 3 is_stmt 1 view .LVU3269
4615:DRIVER/FatFs/source/ff.c **** 			if (!(dp->fn[NSFLAG] & NS_NONAME)) {	/* It is not the origin directory itself */
 9470              		.loc 1 4615 6 is_stmt 0 view .LVU3270
 9471 0030 0346     		mov	r3, r0
 9472 0032 A0B9     		cbnz	r0, .L707
4616:DRIVER/FatFs/source/ff.c **** 				if (dp->obj.attr & AM_DIR) {		/* This object is a sub-directory */
 9473              		.loc 1 4616 4 is_stmt 1 view .LVU3271
4616:DRIVER/FatFs/source/ff.c **** 				if (dp->obj.attr & AM_DIR) {		/* This object is a sub-directory */
 9474              		.loc 1 4616 8 is_stmt 0 view .LVU3272
 9475 0034 94F92B30 		ldrsb	r3, [r4, #43]
4616:DRIVER/FatFs/source/ff.c **** 				if (dp->obj.attr & AM_DIR) {		/* This object is a sub-directory */
 9476              		.loc 1 4616 7 view .LVU3273
 9477 0038 002B     		cmp	r3, #0
 9478 003a 08DB     		blt	.L708
4617:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
 9479              		.loc 1 4617 5 is_stmt 1 view .LVU3274
4617:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
 9480              		.loc 1 4617 16 is_stmt 0 view .LVU3275
 9481 003c A379     		ldrb	r3, [r4, #6]	@ zero_extendqisi2
4617:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
 9482              		.loc 1 4617 8 view .LVU3276
 9483 003e 13F0100F 		tst	r3, #16
 9484 0042 11D0     		beq	.L710
4627:DRIVER/FatFs/source/ff.c **** 					}
 9485              		.loc 1 4627 7 is_stmt 1 view .LVU3277
4627:DRIVER/FatFs/source/ff.c **** 					}
 9486              		.loc 1 4627 24 is_stmt 0 view .LVU3278
 9487 0044 E169     		ldr	r1, [r4, #28]
 9488 0046 0398     		ldr	r0, [sp, #12]
 9489              	.LVL1131:
4627:DRIVER/FatFs/source/ff.c **** 					}
 9490              		.loc 1 4627 24 view .LVU3279
 9491 0048 FFF7FEFF 		bl	ld_clust
 9492              	.LVL1132:
4627:DRIVER/FatFs/source/ff.c **** 					}
 9493              		.loc 1 4627 22 view .LVU3280
 9494 004c A060     		str	r0, [r4, #8]
 9495              	.L708:
4633:DRIVER/FatFs/source/ff.c **** 				dp->obj.id = fs->id;
 9496              		.loc 1 4633 4 is_stmt 1 view .LVU3281
4634:DRIVER/FatFs/source/ff.c **** 				res = dir_sdi(dp, 0);			/* Rewind directory */
 9497              		.loc 1 4634 5 view .LVU3282
4634:DRIVER/FatFs/source/ff.c **** 				res = dir_sdi(dp, 0);			/* Rewind directory */
 9498              		.loc 1 4634 20 is_stmt 0 view .LVU3283
 9499 004e 039B     		ldr	r3, [sp, #12]
 9500 0050 DB88     		ldrh	r3, [r3, #6]
4634:DRIVER/FatFs/source/ff.c **** 				res = dir_sdi(dp, 0);			/* Rewind directory */
 9501              		.loc 1 4634 16 view .LVU3284
 9502 0052 A380     		strh	r3, [r4, #4]	@ movhi
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 320


4635:DRIVER/FatFs/source/ff.c **** #if FF_FS_LOCK
 9503              		.loc 1 4635 5 is_stmt 1 view .LVU3285
4635:DRIVER/FatFs/source/ff.c **** #if FF_FS_LOCK
 9504              		.loc 1 4635 11 is_stmt 0 view .LVU3286
 9505 0054 0021     		movs	r1, #0
 9506 0056 2046     		mov	r0, r4
 9507 0058 FFF7FEFF 		bl	dir_sdi
 9508              	.LVL1133:
 9509 005c 0346     		mov	r3, r0
 9510              	.LVL1134:
 9511              	.L707:
4648:DRIVER/FatFs/source/ff.c **** 		if (res == FR_NO_FILE) res = FR_NO_PATH;
 9512              		.loc 1 4648 16 is_stmt 1 view .LVU3287
4649:DRIVER/FatFs/source/ff.c **** 	}
 9513              		.loc 1 4649 3 view .LVU3288
4649:DRIVER/FatFs/source/ff.c **** 	}
 9514              		.loc 1 4649 6 is_stmt 0 view .LVU3289
 9515 005e 042B     		cmp	r3, #4
 9516 0060 04D0     		beq	.L711
4651:DRIVER/FatFs/source/ff.c **** 
 9517              		.loc 1 4651 2 is_stmt 1 view .LVU3290
4651:DRIVER/FatFs/source/ff.c **** 
 9518              		.loc 1 4651 5 is_stmt 0 view .LVU3291
 9519 0062 002B     		cmp	r3, #0
 9520 0064 DBD0     		beq	.L705
 9521 0066 D8E7     		b	.L706
 9522              	.LVL1135:
 9523              	.L710:
4630:DRIVER/FatFs/source/ff.c **** 				}
 9524              		.loc 1 4630 10 view .LVU3292
 9525 0068 0523     		movs	r3, #5
 9526 006a F8E7     		b	.L707
 9527              	.LVL1136:
 9528              	.L711:
4649:DRIVER/FatFs/source/ff.c **** 	}
 9529              		.loc 1 4649 30 view .LVU3293
 9530 006c 0523     		movs	r3, #5
 9531 006e D4E7     		b	.L706
 9532              	.LVL1137:
 9533              	.L709:
4607:DRIVER/FatFs/source/ff.c **** 
 9534              		.loc 1 4607 18 view .LVU3294
 9535 0070 0923     		movs	r3, #9
 9536 0072 D4E7     		b	.L705
 9537              		.cfi_endproc
 9538              	.LFE46:
 9540              		.section	.text.f_closedir,"ax",%progbits
 9541              		.align	1
 9542              		.global	f_closedir
 9543              		.syntax unified
 9544              		.thumb
 9545              		.thumb_func
 9547              	f_closedir:
 9548              	.LVL1138:
 9549              	.LFB47:
4666:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
 9550              		.loc 1 4666 1 is_stmt 1 view -0
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 321


 9551              		.cfi_startproc
 9552              		@ args = 0, pretend = 0, frame = 8
 9553              		@ frame_needed = 0, uses_anonymous_args = 0
4666:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
 9554              		.loc 1 4666 1 is_stmt 0 view .LVU3296
 9555 0000 10B5     		push	{r4, lr}
 9556              	.LCFI81:
 9557              		.cfi_def_cfa_offset 8
 9558              		.cfi_offset 4, -8
 9559              		.cfi_offset 14, -4
 9560 0002 82B0     		sub	sp, sp, #8
 9561              	.LCFI82:
 9562              		.cfi_def_cfa_offset 16
 9563 0004 0446     		mov	r4, r0
4667:DRIVER/FatFs/source/ff.c **** 	FATFS *fs;
 9564              		.loc 1 4667 2 is_stmt 1 view .LVU3297
4668:DRIVER/FatFs/source/ff.c **** 
 9565              		.loc 1 4668 2 view .LVU3298
4671:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
 9566              		.loc 1 4671 2 view .LVU3299
4671:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
 9567              		.loc 1 4671 8 is_stmt 0 view .LVU3300
 9568 0006 01A9     		add	r1, sp, #4
 9569 0008 FFF7FEFF 		bl	validate
 9570              	.LVL1139:
4672:DRIVER/FatFs/source/ff.c **** #if FF_FS_LOCK
 9571              		.loc 1 4672 2 is_stmt 1 view .LVU3301
4672:DRIVER/FatFs/source/ff.c **** #if FF_FS_LOCK
 9572              		.loc 1 4672 5 is_stmt 0 view .LVU3302
 9573 000c 00B9     		cbnz	r0, .L715
4677:DRIVER/FatFs/source/ff.c **** #endif
 9574              		.loc 1 4677 3 is_stmt 1 view .LVU3303
4677:DRIVER/FatFs/source/ff.c **** #endif
 9575              		.loc 1 4677 14 is_stmt 0 view .LVU3304
 9576 000e 2060     		str	r0, [r4]
 9577              	.L715:
4683:DRIVER/FatFs/source/ff.c **** }
 9578              		.loc 1 4683 2 is_stmt 1 view .LVU3305
4684:DRIVER/FatFs/source/ff.c **** 
 9579              		.loc 1 4684 1 is_stmt 0 view .LVU3306
 9580 0010 02B0     		add	sp, sp, #8
 9581              	.LCFI83:
 9582              		.cfi_def_cfa_offset 8
 9583              		@ sp needed
 9584 0012 10BD     		pop	{r4, pc}
4684:DRIVER/FatFs/source/ff.c **** 
 9585              		.loc 1 4684 1 view .LVU3307
 9586              		.cfi_endproc
 9587              	.LFE47:
 9589              		.section	.text.f_readdir,"ax",%progbits
 9590              		.align	1
 9591              		.global	f_readdir
 9592              		.syntax unified
 9593              		.thumb
 9594              		.thumb_func
 9596              	f_readdir:
 9597              	.LVL1140:
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 322


 9598              	.LFB48:
4697:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
 9599              		.loc 1 4697 1 is_stmt 1 view -0
 9600              		.cfi_startproc
 9601              		@ args = 0, pretend = 0, frame = 8
 9602              		@ frame_needed = 0, uses_anonymous_args = 0
4697:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
 9603              		.loc 1 4697 1 is_stmt 0 view .LVU3309
 9604 0000 70B5     		push	{r4, r5, r6, lr}
 9605              	.LCFI84:
 9606              		.cfi_def_cfa_offset 16
 9607              		.cfi_offset 4, -16
 9608              		.cfi_offset 5, -12
 9609              		.cfi_offset 6, -8
 9610              		.cfi_offset 14, -4
 9611 0002 82B0     		sub	sp, sp, #8
 9612              	.LCFI85:
 9613              		.cfi_def_cfa_offset 24
 9614 0004 0446     		mov	r4, r0
 9615 0006 0D46     		mov	r5, r1
4698:DRIVER/FatFs/source/ff.c **** 	FATFS *fs;
 9616              		.loc 1 4698 2 is_stmt 1 view .LVU3310
4699:DRIVER/FatFs/source/ff.c **** 	DEF_NAMBUF
 9617              		.loc 1 4699 2 view .LVU3311
4703:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
 9618              		.loc 1 4703 2 view .LVU3312
4703:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
 9619              		.loc 1 4703 8 is_stmt 0 view .LVU3313
 9620 0008 01A9     		add	r1, sp, #4
 9621              	.LVL1141:
4703:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
 9622              		.loc 1 4703 8 view .LVU3314
 9623 000a FFF7FEFF 		bl	validate
 9624              	.LVL1142:
4704:DRIVER/FatFs/source/ff.c **** 		if (!fno) {
 9625              		.loc 1 4704 2 is_stmt 1 view .LVU3315
4704:DRIVER/FatFs/source/ff.c **** 		if (!fno) {
 9626              		.loc 1 4704 5 is_stmt 0 view .LVU3316
 9627 000e 0646     		mov	r6, r0
 9628 0010 C0B9     		cbnz	r0, .L718
4705:DRIVER/FatFs/source/ff.c **** 			res = dir_sdi(dp, 0);		/* Rewind the directory object */
 9629              		.loc 1 4705 3 is_stmt 1 view .LVU3317
4705:DRIVER/FatFs/source/ff.c **** 			res = dir_sdi(dp, 0);		/* Rewind the directory object */
 9630              		.loc 1 4705 6 is_stmt 0 view .LVU3318
 9631 0012 95B1     		cbz	r5, .L723
4708:DRIVER/FatFs/source/ff.c **** 			res = DIR_READ_FILE(dp);		/* Read an item */
 9632              		.loc 1 4708 19 is_stmt 1 view .LVU3319
4709:DRIVER/FatFs/source/ff.c **** 			if (res == FR_NO_FILE) res = FR_OK;	/* Ignore end of directory */
 9633              		.loc 1 4709 4 view .LVU3320
4709:DRIVER/FatFs/source/ff.c **** 			if (res == FR_NO_FILE) res = FR_OK;	/* Ignore end of directory */
 9634              		.loc 1 4709 10 is_stmt 0 view .LVU3321
 9635 0014 0021     		movs	r1, #0
 9636 0016 2046     		mov	r0, r4
 9637              	.LVL1143:
4709:DRIVER/FatFs/source/ff.c **** 			if (res == FR_NO_FILE) res = FR_OK;	/* Ignore end of directory */
 9638              		.loc 1 4709 10 view .LVU3322
 9639 0018 FFF7FEFF 		bl	dir_read
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 323


 9640              	.LVL1144:
4710:DRIVER/FatFs/source/ff.c **** 			if (res == FR_OK) {				/* A valid entry is found */
 9641              		.loc 1 4710 4 is_stmt 1 view .LVU3323
4710:DRIVER/FatFs/source/ff.c **** 			if (res == FR_OK) {				/* A valid entry is found */
 9642              		.loc 1 4710 7 is_stmt 0 view .LVU3324
 9643 001c 0428     		cmp	r0, #4
 9644 001e 00D0     		beq	.L720
4711:DRIVER/FatFs/source/ff.c **** 				get_fileinfo(dp, fno);		/* Get the object information */
 9645              		.loc 1 4711 4 is_stmt 1 view .LVU3325
4711:DRIVER/FatFs/source/ff.c **** 				get_fileinfo(dp, fno);		/* Get the object information */
 9646              		.loc 1 4711 7 is_stmt 0 view .LVU3326
 9647 0020 98B9     		cbnz	r0, .L721
 9648              	.L720:
 9649              	.LVL1145:
4712:DRIVER/FatFs/source/ff.c **** 				res = dir_next(dp, 0);		/* Increment index for next */
 9650              		.loc 1 4712 5 is_stmt 1 view .LVU3327
 9651 0022 2946     		mov	r1, r5
 9652 0024 2046     		mov	r0, r4
 9653 0026 FFF7FEFF 		bl	get_fileinfo
 9654              	.LVL1146:
4713:DRIVER/FatFs/source/ff.c **** 				if (res == FR_NO_FILE) res = FR_OK;	/* Ignore end of directory now */
 9655              		.loc 1 4713 5 view .LVU3328
4713:DRIVER/FatFs/source/ff.c **** 				if (res == FR_NO_FILE) res = FR_OK;	/* Ignore end of directory now */
 9656              		.loc 1 4713 11 is_stmt 0 view .LVU3329
 9657 002a 0021     		movs	r1, #0
 9658 002c 2046     		mov	r0, r4
 9659 002e FFF7FEFF 		bl	dir_next
 9660              	.LVL1147:
4714:DRIVER/FatFs/source/ff.c **** 			}
 9661              		.loc 1 4714 5 is_stmt 1 view .LVU3330
4714:DRIVER/FatFs/source/ff.c **** 			}
 9662              		.loc 1 4714 8 is_stmt 0 view .LVU3331
 9663 0032 0428     		cmp	r0, #4
 9664 0034 06D0     		beq	.L718
4713:DRIVER/FatFs/source/ff.c **** 				if (res == FR_NO_FILE) res = FR_OK;	/* Ignore end of directory now */
 9665              		.loc 1 4713 11 view .LVU3332
 9666 0036 0646     		mov	r6, r0
 9667 0038 04E0     		b	.L718
 9668              	.L723:
4706:DRIVER/FatFs/source/ff.c **** 		} else {
 9669              		.loc 1 4706 4 is_stmt 1 view .LVU3333
4706:DRIVER/FatFs/source/ff.c **** 		} else {
 9670              		.loc 1 4706 10 is_stmt 0 view .LVU3334
 9671 003a 0021     		movs	r1, #0
 9672 003c 2046     		mov	r0, r4
 9673              	.LVL1148:
4706:DRIVER/FatFs/source/ff.c **** 		} else {
 9674              		.loc 1 4706 10 view .LVU3335
 9675 003e FFF7FEFF 		bl	dir_sdi
 9676              	.LVL1149:
 9677 0042 0646     		mov	r6, r0
 9678              	.LVL1150:
 9679              	.L718:
4716:DRIVER/FatFs/source/ff.c **** 		}
 9680              		.loc 1 4716 17 is_stmt 1 view .LVU3336
4719:DRIVER/FatFs/source/ff.c **** }
 9681              		.loc 1 4719 2 view .LVU3337
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 324


4720:DRIVER/FatFs/source/ff.c **** 
 9682              		.loc 1 4720 1 is_stmt 0 view .LVU3338
 9683 0044 3046     		mov	r0, r6
 9684 0046 02B0     		add	sp, sp, #8
 9685              	.LCFI86:
 9686              		.cfi_remember_state
 9687              		.cfi_def_cfa_offset 16
 9688              		@ sp needed
 9689 0048 70BD     		pop	{r4, r5, r6, pc}
 9690              	.LVL1151:
 9691              	.L721:
 9692              	.LCFI87:
 9693              		.cfi_restore_state
4709:DRIVER/FatFs/source/ff.c **** 			if (res == FR_NO_FILE) res = FR_OK;	/* Ignore end of directory */
 9694              		.loc 1 4709 10 view .LVU3339
 9695 004a 0646     		mov	r6, r0
 9696 004c FAE7     		b	.L718
 9697              		.cfi_endproc
 9698              	.LFE48:
 9700              		.section	.text.f_stat,"ax",%progbits
 9701              		.align	1
 9702              		.global	f_stat
 9703              		.syntax unified
 9704              		.thumb
 9705              		.thumb_func
 9707              	f_stat:
 9708              	.LVL1152:
 9709              	.LFB49:
4785:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
 9710              		.loc 1 4785 1 is_stmt 1 view -0
 9711              		.cfi_startproc
 9712              		@ args = 0, pretend = 0, frame = 56
 9713              		@ frame_needed = 0, uses_anonymous_args = 0
4785:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
 9714              		.loc 1 4785 1 is_stmt 0 view .LVU3341
 9715 0000 30B5     		push	{r4, r5, lr}
 9716              	.LCFI88:
 9717              		.cfi_def_cfa_offset 12
 9718              		.cfi_offset 4, -12
 9719              		.cfi_offset 5, -8
 9720              		.cfi_offset 14, -4
 9721 0002 8FB0     		sub	sp, sp, #60
 9722              	.LCFI89:
 9723              		.cfi_def_cfa_offset 72
 9724 0004 0190     		str	r0, [sp, #4]
 9725 0006 0C46     		mov	r4, r1
4786:DRIVER/FatFs/source/ff.c **** 	DIR dj;
 9726              		.loc 1 4786 2 is_stmt 1 view .LVU3342
4787:DRIVER/FatFs/source/ff.c **** 	DEF_NAMBUF
 9727              		.loc 1 4787 2 view .LVU3343
4792:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
 9728              		.loc 1 4792 2 view .LVU3344
4792:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
 9729              		.loc 1 4792 8 is_stmt 0 view .LVU3345
 9730 0008 0022     		movs	r2, #0
 9731 000a 02A9     		add	r1, sp, #8
 9732              	.LVL1153:
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 325


4792:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
 9733              		.loc 1 4792 8 view .LVU3346
 9734 000c 01A8     		add	r0, sp, #4
 9735              	.LVL1154:
4792:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
 9736              		.loc 1 4792 8 view .LVU3347
 9737 000e FFF7FEFF 		bl	mount_volume
 9738              	.LVL1155:
4793:DRIVER/FatFs/source/ff.c **** 		INIT_NAMBUF(dj.obj.fs);
 9739              		.loc 1 4793 2 is_stmt 1 view .LVU3348
4793:DRIVER/FatFs/source/ff.c **** 		INIT_NAMBUF(dj.obj.fs);
 9740              		.loc 1 4793 5 is_stmt 0 view .LVU3349
 9741 0012 0546     		mov	r5, r0
 9742 0014 10B1     		cbz	r0, .L728
 9743              	.LVL1156:
 9744              	.L725:
4803:DRIVER/FatFs/source/ff.c **** 	}
 9745              		.loc 1 4803 16 is_stmt 1 view .LVU3350
4806:DRIVER/FatFs/source/ff.c **** }
 9746              		.loc 1 4806 2 view .LVU3351
4807:DRIVER/FatFs/source/ff.c **** 
 9747              		.loc 1 4807 1 is_stmt 0 view .LVU3352
 9748 0016 2846     		mov	r0, r5
 9749 0018 0FB0     		add	sp, sp, #60
 9750              	.LCFI90:
 9751              		.cfi_remember_state
 9752              		.cfi_def_cfa_offset 12
 9753              		@ sp needed
 9754 001a 30BD     		pop	{r4, r5, pc}
 9755              	.LVL1157:
 9756              	.L728:
 9757              	.LCFI91:
 9758              		.cfi_restore_state
4794:DRIVER/FatFs/source/ff.c **** 		res = follow_path(&dj, path);	/* Follow the file path */
 9759              		.loc 1 4794 25 is_stmt 1 view .LVU3353
4795:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK) {				/* Follow completed */
 9760              		.loc 1 4795 3 view .LVU3354
4795:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK) {				/* Follow completed */
 9761              		.loc 1 4795 9 is_stmt 0 view .LVU3355
 9762 001c 0199     		ldr	r1, [sp, #4]
 9763 001e 02A8     		add	r0, sp, #8
 9764              	.LVL1158:
4795:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK) {				/* Follow completed */
 9765              		.loc 1 4795 9 view .LVU3356
 9766 0020 FFF7FEFF 		bl	follow_path
 9767              	.LVL1159:
4796:DRIVER/FatFs/source/ff.c **** 			if (dj.fn[NSFLAG] & NS_NONAME) {	/* It is origin directory */
 9768              		.loc 1 4796 3 is_stmt 1 view .LVU3357
4796:DRIVER/FatFs/source/ff.c **** 			if (dj.fn[NSFLAG] & NS_NONAME) {	/* It is origin directory */
 9769              		.loc 1 4796 6 is_stmt 0 view .LVU3358
 9770 0024 0546     		mov	r5, r0
 9771 0026 0028     		cmp	r0, #0
 9772 0028 F5D1     		bne	.L725
4797:DRIVER/FatFs/source/ff.c **** 				res = FR_INVALID_NAME;
 9773              		.loc 1 4797 4 is_stmt 1 view .LVU3359
4797:DRIVER/FatFs/source/ff.c **** 				res = FR_INVALID_NAME;
 9774              		.loc 1 4797 8 is_stmt 0 view .LVU3360
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 326


 9775 002a 9DF93330 		ldrsb	r3, [sp, #51]
4797:DRIVER/FatFs/source/ff.c **** 				res = FR_INVALID_NAME;
 9776              		.loc 1 4797 7 view .LVU3361
 9777 002e 002B     		cmp	r3, #0
 9778 0030 06DB     		blt	.L726
4800:DRIVER/FatFs/source/ff.c **** 			}
 9779              		.loc 1 4800 5 is_stmt 1 view .LVU3362
4800:DRIVER/FatFs/source/ff.c **** 			}
 9780              		.loc 1 4800 8 is_stmt 0 view .LVU3363
 9781 0032 002C     		cmp	r4, #0
 9782 0034 EFD0     		beq	.L725
4800:DRIVER/FatFs/source/ff.c **** 			}
 9783              		.loc 1 4800 14 is_stmt 1 discriminator 1 view .LVU3364
 9784 0036 2146     		mov	r1, r4
 9785 0038 02A8     		add	r0, sp, #8
 9786              	.LVL1160:
4800:DRIVER/FatFs/source/ff.c **** 			}
 9787              		.loc 1 4800 14 is_stmt 0 discriminator 1 view .LVU3365
 9788 003a FFF7FEFF 		bl	get_fileinfo
 9789              	.LVL1161:
 9790 003e EAE7     		b	.L725
 9791              	.LVL1162:
 9792              	.L726:
4798:DRIVER/FatFs/source/ff.c **** 			} else {							/* Found an object */
 9793              		.loc 1 4798 9 view .LVU3366
 9794 0040 0625     		movs	r5, #6
 9795 0042 E8E7     		b	.L725
 9796              		.cfi_endproc
 9797              	.LFE49:
 9799              		.section	.text.f_getfree,"ax",%progbits
 9800              		.align	1
 9801              		.global	f_getfree
 9802              		.syntax unified
 9803              		.thumb
 9804              		.thumb_func
 9806              	f_getfree:
 9807              	.LVL1163:
 9808              	.LFB50:
4821:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
 9809              		.loc 1 4821 1 is_stmt 1 view -0
 9810              		.cfi_startproc
 9811              		@ args = 0, pretend = 0, frame = 32
 9812              		@ frame_needed = 0, uses_anonymous_args = 0
4821:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
 9813              		.loc 1 4821 1 is_stmt 0 view .LVU3368
 9814 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 9815              	.LCFI92:
 9816              		.cfi_def_cfa_offset 32
 9817              		.cfi_offset 4, -32
 9818              		.cfi_offset 5, -28
 9819              		.cfi_offset 6, -24
 9820              		.cfi_offset 7, -20
 9821              		.cfi_offset 8, -16
 9822              		.cfi_offset 9, -12
 9823              		.cfi_offset 10, -8
 9824              		.cfi_offset 14, -4
 9825 0004 88B0     		sub	sp, sp, #32
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 327


 9826              	.LCFI93:
 9827              		.cfi_def_cfa_offset 64
 9828 0006 0190     		str	r0, [sp, #4]
 9829 0008 0F46     		mov	r7, r1
 9830 000a 1446     		mov	r4, r2
4822:DRIVER/FatFs/source/ff.c **** 	FATFS *fs;
 9831              		.loc 1 4822 2 is_stmt 1 view .LVU3369
4823:DRIVER/FatFs/source/ff.c **** 	DWORD nfree, clst, stat;
 9832              		.loc 1 4823 2 view .LVU3370
4824:DRIVER/FatFs/source/ff.c **** 	LBA_t sect;
 9833              		.loc 1 4824 2 view .LVU3371
4825:DRIVER/FatFs/source/ff.c **** 	UINT i;
 9834              		.loc 1 4825 2 view .LVU3372
4826:DRIVER/FatFs/source/ff.c **** 	FFOBJID obj;
 9835              		.loc 1 4826 2 view .LVU3373
4827:DRIVER/FatFs/source/ff.c **** 
 9836              		.loc 1 4827 2 view .LVU3374
4831:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
 9837              		.loc 1 4831 2 view .LVU3375
4831:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
 9838              		.loc 1 4831 8 is_stmt 0 view .LVU3376
 9839 000c 0022     		movs	r2, #0
 9840              	.LVL1164:
4831:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
 9841              		.loc 1 4831 8 view .LVU3377
 9842 000e 07A9     		add	r1, sp, #28
 9843              	.LVL1165:
4831:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
 9844              		.loc 1 4831 8 view .LVU3378
 9845 0010 01A8     		add	r0, sp, #4
 9846              	.LVL1166:
4831:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
 9847              		.loc 1 4831 8 view .LVU3379
 9848 0012 FFF7FEFF 		bl	mount_volume
 9849              	.LVL1167:
4832:DRIVER/FatFs/source/ff.c **** 		*fatfs = fs;				/* Return ptr to the fs object */
 9850              		.loc 1 4832 2 is_stmt 1 view .LVU3380
4832:DRIVER/FatFs/source/ff.c **** 		*fatfs = fs;				/* Return ptr to the fs object */
 9851              		.loc 1 4832 5 is_stmt 0 view .LVU3381
 9852 0016 8046     		mov	r8, r0
 9853 0018 38B9     		cbnz	r0, .L730
4833:DRIVER/FatFs/source/ff.c **** 		/* If free_clst is valid, return it without full FAT scan */
 9854              		.loc 1 4833 3 is_stmt 1 view .LVU3382
4833:DRIVER/FatFs/source/ff.c **** 		/* If free_clst is valid, return it without full FAT scan */
 9855              		.loc 1 4833 10 is_stmt 0 view .LVU3383
 9856 001a 079B     		ldr	r3, [sp, #28]
 9857 001c 2360     		str	r3, [r4]
4835:DRIVER/FatFs/source/ff.c **** 			*nclst = fs->free_clst;
 9858              		.loc 1 4835 3 is_stmt 1 view .LVU3384
4835:DRIVER/FatFs/source/ff.c **** 			*nclst = fs->free_clst;
 9859              		.loc 1 4835 9 is_stmt 0 view .LVU3385
 9860 001e 9A69     		ldr	r2, [r3, #24]
4835:DRIVER/FatFs/source/ff.c **** 			*nclst = fs->free_clst;
 9861              		.loc 1 4835 26 view .LVU3386
 9862 0020 DD69     		ldr	r5, [r3, #28]
4835:DRIVER/FatFs/source/ff.c **** 			*nclst = fs->free_clst;
 9863              		.loc 1 4835 37 view .LVU3387
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 328


 9864 0022 A91E     		subs	r1, r5, #2
4835:DRIVER/FatFs/source/ff.c **** 			*nclst = fs->free_clst;
 9865              		.loc 1 4835 6 view .LVU3388
 9866 0024 8A42     		cmp	r2, r1
 9867 0026 04D8     		bhi	.L731
4836:DRIVER/FatFs/source/ff.c **** 		} else {
 9868              		.loc 1 4836 4 is_stmt 1 view .LVU3389
4836:DRIVER/FatFs/source/ff.c **** 		} else {
 9869              		.loc 1 4836 11 is_stmt 0 view .LVU3390
 9870 0028 3A60     		str	r2, [r7]
 9871              	.LVL1168:
 9872              	.L730:
4902:DRIVER/FatFs/source/ff.c **** }
 9873              		.loc 1 4902 2 is_stmt 1 view .LVU3391
4903:DRIVER/FatFs/source/ff.c **** 
 9874              		.loc 1 4903 1 is_stmt 0 view .LVU3392
 9875 002a 4046     		mov	r0, r8
 9876 002c 08B0     		add	sp, sp, #32
 9877              	.LCFI94:
 9878              		.cfi_remember_state
 9879              		.cfi_def_cfa_offset 32
 9880              		@ sp needed
 9881 002e BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 9882              	.LVL1169:
 9883              	.L731:
 9884              	.LCFI95:
 9885              		.cfi_restore_state
4839:DRIVER/FatFs/source/ff.c **** 			if (fs->fs_type == FS_FAT12) {	/* FAT12: Scan bit field FAT entries */
 9886              		.loc 1 4839 4 is_stmt 1 view .LVU3393
4840:DRIVER/FatFs/source/ff.c **** 				clst = 2; obj.fs = fs;
 9887              		.loc 1 4840 4 view .LVU3394
4840:DRIVER/FatFs/source/ff.c **** 				clst = 2; obj.fs = fs;
 9888              		.loc 1 4840 10 is_stmt 0 view .LVU3395
 9889 0032 93F80090 		ldrb	r9, [r3]	@ zero_extendqisi2
4840:DRIVER/FatFs/source/ff.c **** 				clst = 2; obj.fs = fs;
 9890              		.loc 1 4840 7 view .LVU3396
 9891 0036 B9F1010F 		cmp	r9, #1
 9892 003a 04D0     		beq	.L745
4875:DRIVER/FatFs/source/ff.c **** 					sect = fs->fatbase;		/* Top of the FAT */
 9893              		.loc 1 4875 6 is_stmt 1 view .LVU3397
 9894              	.LVL1170:
4876:DRIVER/FatFs/source/ff.c **** 					i = 0;					/* Offset in the sector */
 9895              		.loc 1 4876 6 view .LVU3398
4876:DRIVER/FatFs/source/ff.c **** 					i = 0;					/* Offset in the sector */
 9896              		.loc 1 4876 11 is_stmt 0 view .LVU3399
 9897 003c D3F82890 		ldr	r9, [r3, #40]
 9898              	.LVL1171:
4877:DRIVER/FatFs/source/ff.c **** 					do {	/* Counts numbuer of entries with zero in the FAT */
 9899              		.loc 1 4877 6 is_stmt 1 view .LVU3400
4877:DRIVER/FatFs/source/ff.c **** 					do {	/* Counts numbuer of entries with zero in the FAT */
 9900              		.loc 1 4877 8 is_stmt 0 view .LVU3401
 9901 0040 0024     		movs	r4, #0
 9902              	.LVL1172:
4839:DRIVER/FatFs/source/ff.c **** 			if (fs->fs_type == FS_FAT12) {	/* FAT12: Scan bit field FAT entries */
 9903              		.loc 1 4839 10 view .LVU3402
 9904 0042 2646     		mov	r6, r4
 9905 0044 31E0     		b	.L741
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 329


 9906              	.LVL1173:
 9907              	.L745:
4841:DRIVER/FatFs/source/ff.c **** 				do {
 9908              		.loc 1 4841 5 is_stmt 1 view .LVU3403
4841:DRIVER/FatFs/source/ff.c **** 				do {
 9909              		.loc 1 4841 15 view .LVU3404
4841:DRIVER/FatFs/source/ff.c **** 				do {
 9910              		.loc 1 4841 22 is_stmt 0 view .LVU3405
 9911 0046 0393     		str	r3, [sp, #12]
4841:DRIVER/FatFs/source/ff.c **** 				do {
 9912              		.loc 1 4841 10 view .LVU3406
 9913 0048 0224     		movs	r4, #2
 9914              	.LVL1174:
4839:DRIVER/FatFs/source/ff.c **** 			if (fs->fs_type == FS_FAT12) {	/* FAT12: Scan bit field FAT entries */
 9915              		.loc 1 4839 10 view .LVU3407
 9916 004a 0026     		movs	r6, #0
 9917 004c 04E0     		b	.L735
 9918              	.LVL1175:
 9919              	.L734:
4851:DRIVER/FatFs/source/ff.c **** 			} else {
 9920              		.loc 1 4851 21 is_stmt 1 view .LVU3408
 9921 004e 0134     		adds	r4, r4, #1
 9922              	.LVL1176:
4851:DRIVER/FatFs/source/ff.c **** 			} else {
 9923              		.loc 1 4851 25 is_stmt 0 view .LVU3409
 9924 0050 079B     		ldr	r3, [sp, #28]
 9925 0052 DB69     		ldr	r3, [r3, #28]
4851:DRIVER/FatFs/source/ff.c **** 			} else {
 9926              		.loc 1 4851 21 view .LVU3410
 9927 0054 A342     		cmp	r3, r4
 9928 0056 3BD9     		bls	.L733
 9929              	.LVL1177:
 9930              	.L735:
4842:DRIVER/FatFs/source/ff.c **** 					stat = get_fat(&obj, clst);
 9931              		.loc 1 4842 5 is_stmt 1 view .LVU3411
4843:DRIVER/FatFs/source/ff.c **** 					if (stat == 0xFFFFFFFF) {
 9932              		.loc 1 4843 6 view .LVU3412
4843:DRIVER/FatFs/source/ff.c **** 					if (stat == 0xFFFFFFFF) {
 9933              		.loc 1 4843 13 is_stmt 0 view .LVU3413
 9934 0058 2146     		mov	r1, r4
 9935 005a 03A8     		add	r0, sp, #12
 9936 005c FFF7FEFF 		bl	get_fat
 9937              	.LVL1178:
4844:DRIVER/FatFs/source/ff.c **** 						res = FR_DISK_ERR; break;
 9938              		.loc 1 4844 6 is_stmt 1 view .LVU3414
4844:DRIVER/FatFs/source/ff.c **** 						res = FR_DISK_ERR; break;
 9939              		.loc 1 4844 9 is_stmt 0 view .LVU3415
 9940 0060 B0F1FF3F 		cmp	r0, #-1
 9941 0064 33D0     		beq	.L742
4847:DRIVER/FatFs/source/ff.c **** 						res = FR_INT_ERR; break;
 9942              		.loc 1 4847 6 is_stmt 1 view .LVU3416
4847:DRIVER/FatFs/source/ff.c **** 						res = FR_INT_ERR; break;
 9943              		.loc 1 4847 9 is_stmt 0 view .LVU3417
 9944 0066 0128     		cmp	r0, #1
 9945 0068 3DD0     		beq	.L743
4850:DRIVER/FatFs/source/ff.c **** 				} while (++clst < fs->n_fatent);
 9946              		.loc 1 4850 6 is_stmt 1 view .LVU3418
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 330


4850:DRIVER/FatFs/source/ff.c **** 				} while (++clst < fs->n_fatent);
 9947              		.loc 1 4850 9 is_stmt 0 view .LVU3419
 9948 006a 0028     		cmp	r0, #0
 9949 006c EFD1     		bne	.L734
4850:DRIVER/FatFs/source/ff.c **** 				} while (++clst < fs->n_fatent);
 9950              		.loc 1 4850 21 is_stmt 1 discriminator 1 view .LVU3420
4850:DRIVER/FatFs/source/ff.c **** 				} while (++clst < fs->n_fatent);
 9951              		.loc 1 4850 26 is_stmt 0 discriminator 1 view .LVU3421
 9952 006e 0136     		adds	r6, r6, #1
 9953              	.LVL1179:
4850:DRIVER/FatFs/source/ff.c **** 				} while (++clst < fs->n_fatent);
 9954              		.loc 1 4850 26 discriminator 1 view .LVU3422
 9955 0070 EDE7     		b	.L734
 9956              	.LVL1180:
 9957              	.L746:
4880:DRIVER/FatFs/source/ff.c **** 							if (res != FR_OK) break;
 9958              		.loc 1 4880 8 is_stmt 1 view .LVU3423
4880:DRIVER/FatFs/source/ff.c **** 							if (res != FR_OK) break;
 9959              		.loc 1 4880 14 is_stmt 0 view .LVU3424
 9960 0072 09F1010A 		add	r10, r9, #1
 9961              	.LVL1181:
4880:DRIVER/FatFs/source/ff.c **** 							if (res != FR_OK) break;
 9962              		.loc 1 4880 14 view .LVU3425
 9963 0076 4946     		mov	r1, r9
 9964 0078 0798     		ldr	r0, [sp, #28]
 9965 007a FFF7FEFF 		bl	move_window
 9966              	.LVL1182:
4881:DRIVER/FatFs/source/ff.c **** 						}
 9967              		.loc 1 4881 8 is_stmt 1 view .LVU3426
4881:DRIVER/FatFs/source/ff.c **** 						}
 9968              		.loc 1 4881 11 is_stmt 0 view .LVU3427
 9969 007e 8046     		mov	r8, r0
 9970 0080 30BB     		cbnz	r0, .L733
4880:DRIVER/FatFs/source/ff.c **** 							if (res != FR_OK) break;
 9971              		.loc 1 4880 14 view .LVU3428
 9972 0082 D146     		mov	r9, r10
 9973 0084 13E0     		b	.L736
 9974              	.LVL1183:
 9975              	.L747:
4884:DRIVER/FatFs/source/ff.c **** 							i += 2;
 9976              		.loc 1 4884 8 is_stmt 1 view .LVU3429
4884:DRIVER/FatFs/source/ff.c **** 							i += 2;
 9977              		.loc 1 4884 20 is_stmt 0 view .LVU3430
 9978 0086 0AF13800 		add	r0, r10, #56
4884:DRIVER/FatFs/source/ff.c **** 							i += 2;
 9979              		.loc 1 4884 12 view .LVU3431
 9980 008a 2044     		add	r0, r0, r4
 9981 008c FFF7FEFF 		bl	ld_word
 9982              	.LVL1184:
4884:DRIVER/FatFs/source/ff.c **** 							i += 2;
 9983              		.loc 1 4884 11 view .LVU3432
 9984 0090 00B9     		cbnz	r0, .L738
4884:DRIVER/FatFs/source/ff.c **** 							i += 2;
 9985              		.loc 1 4884 39 is_stmt 1 discriminator 1 view .LVU3433
4884:DRIVER/FatFs/source/ff.c **** 							i += 2;
 9986              		.loc 1 4884 44 is_stmt 0 discriminator 1 view .LVU3434
 9987 0092 0136     		adds	r6, r6, #1
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 331


 9988              	.LVL1185:
 9989              	.L738:
4885:DRIVER/FatFs/source/ff.c **** 						} else {
 9990              		.loc 1 4885 8 is_stmt 1 view .LVU3435
4885:DRIVER/FatFs/source/ff.c **** 						} else {
 9991              		.loc 1 4885 10 is_stmt 0 view .LVU3436
 9992 0094 0234     		adds	r4, r4, #2
 9993              	.LVL1186:
4885:DRIVER/FatFs/source/ff.c **** 						} else {
 9994              		.loc 1 4885 10 view .LVU3437
 9995 0096 00E0     		b	.L739
 9996              	.L740:
4888:DRIVER/FatFs/source/ff.c **** 						}
 9997              		.loc 1 4888 8 is_stmt 1 view .LVU3438
4888:DRIVER/FatFs/source/ff.c **** 						}
 9998              		.loc 1 4888 10 is_stmt 0 view .LVU3439
 9999 0098 0434     		adds	r4, r4, #4
 10000              	.LVL1187:
 10001              	.L739:
4890:DRIVER/FatFs/source/ff.c **** 					} while (--clst);
 10002              		.loc 1 4890 7 is_stmt 1 view .LVU3440
4890:DRIVER/FatFs/source/ff.c **** 					} while (--clst);
 10003              		.loc 1 4890 12 is_stmt 0 view .LVU3441
 10004 009a BAF80C30 		ldrh	r3, [r10, #12]
4890:DRIVER/FatFs/source/ff.c **** 					} while (--clst);
 10005              		.loc 1 4890 9 view .LVU3442
 10006 009e B4FBF3F2 		udiv	r2, r4, r3
 10007 00a2 03FB1244 		mls	r4, r3, r2, r4
 10008              	.LVL1188:
4891:DRIVER/FatFs/source/ff.c **** 				}
 10009              		.loc 1 4891 15 is_stmt 1 view .LVU3443
4891:DRIVER/FatFs/source/ff.c **** 				}
 10010              		.loc 1 4891 15 is_stmt 0 view .LVU3444
 10011 00a6 013D     		subs	r5, r5, #1
 10012              	.LVL1189:
4891:DRIVER/FatFs/source/ff.c **** 				}
 10013              		.loc 1 4891 15 view .LVU3445
 10014 00a8 12D0     		beq	.L733
 10015              	.LVL1190:
 10016              	.L741:
4878:DRIVER/FatFs/source/ff.c **** 						if (i == 0) {	/* New sector? */
 10017              		.loc 1 4878 6 is_stmt 1 view .LVU3446
4879:DRIVER/FatFs/source/ff.c **** 							res = move_window(fs, sect++);
 10018              		.loc 1 4879 7 view .LVU3447
4879:DRIVER/FatFs/source/ff.c **** 							res = move_window(fs, sect++);
 10019              		.loc 1 4879 10 is_stmt 0 view .LVU3448
 10020 00aa 002C     		cmp	r4, #0
 10021 00ac E1D0     		beq	.L746
 10022              	.LVL1191:
 10023              	.L736:
4883:DRIVER/FatFs/source/ff.c **** 							if (ld_word(fs->win + i) == 0) nfree++;
 10024              		.loc 1 4883 7 is_stmt 1 view .LVU3449
4883:DRIVER/FatFs/source/ff.c **** 							if (ld_word(fs->win + i) == 0) nfree++;
 10025              		.loc 1 4883 13 is_stmt 0 view .LVU3450
 10026 00ae DDF81CA0 		ldr	r10, [sp, #28]
 10027 00b2 9AF80030 		ldrb	r3, [r10]	@ zero_extendqisi2
4883:DRIVER/FatFs/source/ff.c **** 							if (ld_word(fs->win + i) == 0) nfree++;
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 332


 10028              		.loc 1 4883 10 view .LVU3451
 10029 00b6 022B     		cmp	r3, #2
 10030 00b8 E5D0     		beq	.L747
4887:DRIVER/FatFs/source/ff.c **** 							i += 4;
 10031              		.loc 1 4887 8 is_stmt 1 view .LVU3452
4887:DRIVER/FatFs/source/ff.c **** 							i += 4;
 10032              		.loc 1 4887 22 is_stmt 0 view .LVU3453
 10033 00ba 0AF13800 		add	r0, r10, #56
4887:DRIVER/FatFs/source/ff.c **** 							i += 4;
 10034              		.loc 1 4887 13 view .LVU3454
 10035 00be 2044     		add	r0, r0, r4
 10036 00c0 FFF7FEFF 		bl	ld_dword
 10037              	.LVL1192:
4887:DRIVER/FatFs/source/ff.c **** 							i += 4;
 10038              		.loc 1 4887 11 view .LVU3455
 10039 00c4 30F07043 		bics	r3, r0, #-268435456
 10040 00c8 E6D1     		bne	.L740
4887:DRIVER/FatFs/source/ff.c **** 							i += 4;
 10041              		.loc 1 4887 55 is_stmt 1 discriminator 1 view .LVU3456
4887:DRIVER/FatFs/source/ff.c **** 							i += 4;
 10042              		.loc 1 4887 60 is_stmt 0 discriminator 1 view .LVU3457
 10043 00ca 0136     		adds	r6, r6, #1
 10044              	.LVL1193:
4887:DRIVER/FatFs/source/ff.c **** 							i += 4;
 10045              		.loc 1 4887 60 discriminator 1 view .LVU3458
 10046 00cc E4E7     		b	.L740
 10047              	.LVL1194:
 10048              	.L742:
4845:DRIVER/FatFs/source/ff.c **** 					}
 10049              		.loc 1 4845 11 view .LVU3459
 10050 00ce C846     		mov	r8, r9
 10051              	.LVL1195:
 10052              	.L733:
4894:DRIVER/FatFs/source/ff.c **** 				*nclst = nfree;			/* Return the free clusters */
 10053              		.loc 1 4894 4 is_stmt 1 view .LVU3460
4894:DRIVER/FatFs/source/ff.c **** 				*nclst = nfree;			/* Return the free clusters */
 10054              		.loc 1 4894 7 is_stmt 0 view .LVU3461
 10055 00d0 B8F1000F 		cmp	r8, #0
 10056 00d4 A9D1     		bne	.L730
4895:DRIVER/FatFs/source/ff.c **** 				fs->free_clst = nfree;	/* Now free_clst is valid */
 10057              		.loc 1 4895 5 is_stmt 1 view .LVU3462
4895:DRIVER/FatFs/source/ff.c **** 				fs->free_clst = nfree;	/* Now free_clst is valid */
 10058              		.loc 1 4895 12 is_stmt 0 view .LVU3463
 10059 00d6 3E60     		str	r6, [r7]
4896:DRIVER/FatFs/source/ff.c **** 				fs->fsi_flag |= 1;		/* FAT32: FSInfo is to be updated */
 10060              		.loc 1 4896 5 is_stmt 1 view .LVU3464
4896:DRIVER/FatFs/source/ff.c **** 				fs->fsi_flag |= 1;		/* FAT32: FSInfo is to be updated */
 10061              		.loc 1 4896 7 is_stmt 0 view .LVU3465
 10062 00d8 079B     		ldr	r3, [sp, #28]
4896:DRIVER/FatFs/source/ff.c **** 				fs->fsi_flag |= 1;		/* FAT32: FSInfo is to be updated */
 10063              		.loc 1 4896 19 view .LVU3466
 10064 00da 9E61     		str	r6, [r3, #24]
4897:DRIVER/FatFs/source/ff.c **** 			}
 10065              		.loc 1 4897 5 is_stmt 1 view .LVU3467
4897:DRIVER/FatFs/source/ff.c **** 			}
 10066              		.loc 1 4897 7 is_stmt 0 view .LVU3468
 10067 00dc 5A79     		ldrb	r2, [r3, #5]	@ zero_extendqisi2
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 333


4897:DRIVER/FatFs/source/ff.c **** 			}
 10068              		.loc 1 4897 18 view .LVU3469
 10069 00de 42F00102 		orr	r2, r2, #1
 10070 00e2 5A71     		strb	r2, [r3, #5]
 10071 00e4 A1E7     		b	.L730
 10072              	.LVL1196:
 10073              	.L743:
4848:DRIVER/FatFs/source/ff.c **** 					}
 10074              		.loc 1 4848 11 view .LVU3470
 10075 00e6 4FF00208 		mov	r8, #2
 10076 00ea F1E7     		b	.L733
 10077              		.cfi_endproc
 10078              	.LFE50:
 10080              		.section	.text.f_truncate,"ax",%progbits
 10081              		.align	1
 10082              		.global	f_truncate
 10083              		.syntax unified
 10084              		.thumb
 10085              		.thumb_func
 10087              	f_truncate:
 10088              	.LVL1197:
 10089              	.LFB51:
4915:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
 10090              		.loc 1 4915 1 is_stmt 1 view -0
 10091              		.cfi_startproc
 10092              		@ args = 0, pretend = 0, frame = 8
 10093              		@ frame_needed = 0, uses_anonymous_args = 0
4915:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
 10094              		.loc 1 4915 1 is_stmt 0 view .LVU3472
 10095 0000 30B5     		push	{r4, r5, lr}
 10096              	.LCFI96:
 10097              		.cfi_def_cfa_offset 12
 10098              		.cfi_offset 4, -12
 10099              		.cfi_offset 5, -8
 10100              		.cfi_offset 14, -4
 10101 0002 83B0     		sub	sp, sp, #12
 10102              	.LCFI97:
 10103              		.cfi_def_cfa_offset 24
 10104 0004 0446     		mov	r4, r0
4916:DRIVER/FatFs/source/ff.c **** 	FATFS *fs;
 10105              		.loc 1 4916 2 is_stmt 1 view .LVU3473
4917:DRIVER/FatFs/source/ff.c **** 	DWORD ncl;
 10106              		.loc 1 4917 2 view .LVU3474
4918:DRIVER/FatFs/source/ff.c **** 
 10107              		.loc 1 4918 2 view .LVU3475
4921:DRIVER/FatFs/source/ff.c **** 	if (res != FR_OK || (res = (FRESULT)fp->err) != FR_OK) LEAVE_FF(fs, res);
 10108              		.loc 1 4921 2 view .LVU3476
4921:DRIVER/FatFs/source/ff.c **** 	if (res != FR_OK || (res = (FRESULT)fp->err) != FR_OK) LEAVE_FF(fs, res);
 10109              		.loc 1 4921 8 is_stmt 0 view .LVU3477
 10110 0006 01A9     		add	r1, sp, #4
 10111 0008 FFF7FEFF 		bl	validate
 10112              	.LVL1198:
4922:DRIVER/FatFs/source/ff.c **** 	if (!(fp->flag & FA_WRITE)) LEAVE_FF(fs, FR_DENIED);	/* Check access mode */
 10113              		.loc 1 4922 2 is_stmt 1 view .LVU3478
4922:DRIVER/FatFs/source/ff.c **** 	if (!(fp->flag & FA_WRITE)) LEAVE_FF(fs, FR_DENIED);	/* Check access mode */
 10114              		.loc 1 4922 5 is_stmt 0 view .LVU3479
 10115 000c 0546     		mov	r5, r0
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 334


 10116 000e 0028     		cmp	r0, #0
 10117 0010 49D1     		bne	.L751
4922:DRIVER/FatFs/source/ff.c **** 	if (!(fp->flag & FA_WRITE)) LEAVE_FF(fs, FR_DENIED);	/* Check access mode */
 10118              		.loc 1 4922 27 discriminator 2 view .LVU3480
 10119 0012 657C     		ldrb	r5, [r4, #17]	@ zero_extendqisi2
 10120              	.LVL1199:
4922:DRIVER/FatFs/source/ff.c **** 	if (!(fp->flag & FA_WRITE)) LEAVE_FF(fs, FR_DENIED);	/* Check access mode */
 10121              		.loc 1 4922 19 discriminator 2 view .LVU3481
 10122 0014 002D     		cmp	r5, #0
 10123 0016 46D1     		bne	.L751
4923:DRIVER/FatFs/source/ff.c **** 
 10124              		.loc 1 4923 2 is_stmt 1 view .LVU3482
4923:DRIVER/FatFs/source/ff.c **** 
 10125              		.loc 1 4923 10 is_stmt 0 view .LVU3483
 10126 0018 237C     		ldrb	r3, [r4, #16]	@ zero_extendqisi2
4923:DRIVER/FatFs/source/ff.c **** 
 10127              		.loc 1 4923 5 view .LVU3484
 10128 001a 13F0020F 		tst	r3, #2
 10129 001e 41D0     		beq	.L756
4925:DRIVER/FatFs/source/ff.c **** 		if (fp->fptr == 0) {	/* When set file size to zero, remove entire cluster chain */
 10130              		.loc 1 4925 2 is_stmt 1 view .LVU3485
4925:DRIVER/FatFs/source/ff.c **** 		if (fp->fptr == 0) {	/* When set file size to zero, remove entire cluster chain */
 10131              		.loc 1 4925 8 is_stmt 0 view .LVU3486
 10132 0020 6369     		ldr	r3, [r4, #20]
4925:DRIVER/FatFs/source/ff.c **** 		if (fp->fptr == 0) {	/* When set file size to zero, remove entire cluster chain */
 10133              		.loc 1 4925 24 view .LVU3487
 10134 0022 E268     		ldr	r2, [r4, #12]
4925:DRIVER/FatFs/source/ff.c **** 		if (fp->fptr == 0) {	/* When set file size to zero, remove entire cluster chain */
 10135              		.loc 1 4925 5 view .LVU3488
 10136 0024 9342     		cmp	r3, r2
 10137 0026 3ED2     		bcs	.L751
4926:DRIVER/FatFs/source/ff.c **** 			res = remove_chain(&fp->obj, fp->obj.sclust, 0);
 10138              		.loc 1 4926 3 is_stmt 1 view .LVU3489
4926:DRIVER/FatFs/source/ff.c **** 			res = remove_chain(&fp->obj, fp->obj.sclust, 0);
 10139              		.loc 1 4926 6 is_stmt 0 view .LVU3490
 10140 0028 FBB9     		cbnz	r3, .L752
4927:DRIVER/FatFs/source/ff.c **** 			fp->obj.sclust = 0;
 10141              		.loc 1 4927 4 is_stmt 1 view .LVU3491
4927:DRIVER/FatFs/source/ff.c **** 			fp->obj.sclust = 0;
 10142              		.loc 1 4927 10 is_stmt 0 view .LVU3492
 10143 002a 0022     		movs	r2, #0
 10144 002c A168     		ldr	r1, [r4, #8]
 10145 002e 2046     		mov	r0, r4
 10146 0030 FFF7FEFF 		bl	remove_chain
 10147              	.LVL1200:
 10148 0034 0546     		mov	r5, r0
 10149              	.LVL1201:
4928:DRIVER/FatFs/source/ff.c **** 		} else {				/* When truncate a part of the file, remove remaining clusters */
 10150              		.loc 1 4928 4 is_stmt 1 view .LVU3493
4928:DRIVER/FatFs/source/ff.c **** 		} else {				/* When truncate a part of the file, remove remaining clusters */
 10151              		.loc 1 4928 19 is_stmt 0 view .LVU3494
 10152 0036 0023     		movs	r3, #0
 10153 0038 A360     		str	r3, [r4, #8]
 10154              	.LVL1202:
 10155              	.L753:
4938:DRIVER/FatFs/source/ff.c **** 		fp->flag |= FA_MODIFIED;
 10156              		.loc 1 4938 3 is_stmt 1 view .LVU3495
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 335


4938:DRIVER/FatFs/source/ff.c **** 		fp->flag |= FA_MODIFIED;
 10157              		.loc 1 4938 23 is_stmt 0 view .LVU3496
 10158 003a 6369     		ldr	r3, [r4, #20]
4938:DRIVER/FatFs/source/ff.c **** 		fp->flag |= FA_MODIFIED;
 10159              		.loc 1 4938 19 view .LVU3497
 10160 003c E360     		str	r3, [r4, #12]
4939:DRIVER/FatFs/source/ff.c **** #if !FF_FS_TINY
 10161              		.loc 1 4939 3 is_stmt 1 view .LVU3498
4939:DRIVER/FatFs/source/ff.c **** #if !FF_FS_TINY
 10162              		.loc 1 4939 5 is_stmt 0 view .LVU3499
 10163 003e 237C     		ldrb	r3, [r4, #16]	@ zero_extendqisi2
4939:DRIVER/FatFs/source/ff.c **** #if !FF_FS_TINY
 10164              		.loc 1 4939 12 view .LVU3500
 10165 0040 43F04003 		orr	r3, r3, #64
 10166 0044 2374     		strb	r3, [r4, #16]
4941:DRIVER/FatFs/source/ff.c **** 			if (disk_write(fs->pdrv, fp->buf, fp->sect, 1) != RES_OK) {
 10167              		.loc 1 4941 3 is_stmt 1 view .LVU3501
4941:DRIVER/FatFs/source/ff.c **** 			if (disk_write(fs->pdrv, fp->buf, fp->sect, 1) != RES_OK) {
 10168              		.loc 1 4941 6 is_stmt 0 view .LVU3502
 10169 0046 5DBB     		cbnz	r5, .L755
4941:DRIVER/FatFs/source/ff.c **** 			if (disk_write(fs->pdrv, fp->buf, fp->sect, 1) != RES_OK) {
 10170              		.loc 1 4941 20 discriminator 1 view .LVU3503
 10171 0048 13F0800F 		tst	r3, #128
 10172 004c 2BD0     		beq	.L751
4942:DRIVER/FatFs/source/ff.c **** 				res = FR_DISK_ERR;
 10173              		.loc 1 4942 4 is_stmt 1 view .LVU3504
4942:DRIVER/FatFs/source/ff.c **** 				res = FR_DISK_ERR;
 10174              		.loc 1 4942 8 is_stmt 0 view .LVU3505
 10175 004e 0123     		movs	r3, #1
 10176 0050 E269     		ldr	r2, [r4, #28]
 10177 0052 04F12801 		add	r1, r4, #40
 10178 0056 0198     		ldr	r0, [sp, #4]
 10179 0058 4078     		ldrb	r0, [r0, #1]	@ zero_extendqisi2
 10180 005a FFF7FEFF 		bl	disk_write
 10181              	.LVL1203:
4942:DRIVER/FatFs/source/ff.c **** 				res = FR_DISK_ERR;
 10182              		.loc 1 4942 7 view .LVU3506
 10183 005e F0B9     		cbnz	r0, .L759
4945:DRIVER/FatFs/source/ff.c **** 			}
 10184              		.loc 1 4945 5 is_stmt 1 view .LVU3507
4945:DRIVER/FatFs/source/ff.c **** 			}
 10185              		.loc 1 4945 7 is_stmt 0 view .LVU3508
 10186 0060 237C     		ldrb	r3, [r4, #16]	@ zero_extendqisi2
4945:DRIVER/FatFs/source/ff.c **** 			}
 10187              		.loc 1 4945 14 view .LVU3509
 10188 0062 03F07F03 		and	r3, r3, #127
 10189 0066 2374     		strb	r3, [r4, #16]
 10190 0068 1DE0     		b	.L751
 10191              	.L752:
4930:DRIVER/FatFs/source/ff.c **** 			res = FR_OK;
 10192              		.loc 1 4930 4 is_stmt 1 view .LVU3510
4930:DRIVER/FatFs/source/ff.c **** 			res = FR_OK;
 10193              		.loc 1 4930 10 is_stmt 0 view .LVU3511
 10194 006a A169     		ldr	r1, [r4, #24]
 10195 006c 2046     		mov	r0, r4
 10196 006e FFF7FEFF 		bl	get_fat
 10197              	.LVL1204:
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 336


4931:DRIVER/FatFs/source/ff.c **** 			if (ncl == 0xFFFFFFFF) res = FR_DISK_ERR;
 10198              		.loc 1 4931 4 is_stmt 1 view .LVU3512
4932:DRIVER/FatFs/source/ff.c **** 			if (ncl == 1) res = FR_INT_ERR;
 10199              		.loc 1 4932 4 view .LVU3513
4932:DRIVER/FatFs/source/ff.c **** 			if (ncl == 1) res = FR_INT_ERR;
 10200              		.loc 1 4932 7 is_stmt 0 view .LVU3514
 10201 0072 B0F1FF3F 		cmp	r0, #-1
 10202 0076 0ED0     		beq	.L757
4933:DRIVER/FatFs/source/ff.c **** 			if (res == FR_OK && ncl < fs->n_fatent) {
 10203              		.loc 1 4933 4 is_stmt 1 view .LVU3515
4933:DRIVER/FatFs/source/ff.c **** 			if (res == FR_OK && ncl < fs->n_fatent) {
 10204              		.loc 1 4933 7 is_stmt 0 view .LVU3516
 10205 0078 0128     		cmp	r0, #1
 10206 007a 0ED0     		beq	.L761
 10207              	.L754:
 10208              	.LVL1205:
4934:DRIVER/FatFs/source/ff.c **** 				res = remove_chain(&fp->obj, ncl, fp->clust);
 10209              		.loc 1 4934 4 is_stmt 1 view .LVU3517
4934:DRIVER/FatFs/source/ff.c **** 				res = remove_chain(&fp->obj, ncl, fp->clust);
 10210              		.loc 1 4934 7 is_stmt 0 view .LVU3518
 10211 007c 002D     		cmp	r5, #0
 10212 007e DCD1     		bne	.L753
4934:DRIVER/FatFs/source/ff.c **** 				res = remove_chain(&fp->obj, ncl, fp->clust);
 10213              		.loc 1 4934 32 discriminator 1 view .LVU3519
 10214 0080 019B     		ldr	r3, [sp, #4]
 10215 0082 DB69     		ldr	r3, [r3, #28]
4934:DRIVER/FatFs/source/ff.c **** 				res = remove_chain(&fp->obj, ncl, fp->clust);
 10216              		.loc 1 4934 21 discriminator 1 view .LVU3520
 10217 0084 8342     		cmp	r3, r0
 10218 0086 D8D9     		bls	.L753
4935:DRIVER/FatFs/source/ff.c **** 			}
 10219              		.loc 1 4935 5 is_stmt 1 view .LVU3521
4935:DRIVER/FatFs/source/ff.c **** 			}
 10220              		.loc 1 4935 11 is_stmt 0 view .LVU3522
 10221 0088 A269     		ldr	r2, [r4, #24]
 10222 008a 0146     		mov	r1, r0
 10223 008c 2046     		mov	r0, r4
 10224              	.LVL1206:
4935:DRIVER/FatFs/source/ff.c **** 			}
 10225              		.loc 1 4935 11 view .LVU3523
 10226 008e FFF7FEFF 		bl	remove_chain
 10227              	.LVL1207:
4935:DRIVER/FatFs/source/ff.c **** 			}
 10228              		.loc 1 4935 11 view .LVU3524
 10229 0092 0546     		mov	r5, r0
 10230              	.LVL1208:
4935:DRIVER/FatFs/source/ff.c **** 			}
 10231              		.loc 1 4935 11 view .LVU3525
 10232 0094 D1E7     		b	.L753
 10233              	.LVL1209:
 10234              	.L757:
4932:DRIVER/FatFs/source/ff.c **** 			if (ncl == 1) res = FR_INT_ERR;
 10235              		.loc 1 4932 31 view .LVU3526
 10236 0096 0125     		movs	r5, #1
 10237 0098 F0E7     		b	.L754
 10238              	.L761:
4933:DRIVER/FatFs/source/ff.c **** 			if (res == FR_OK && ncl < fs->n_fatent) {
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 337


 10239              		.loc 1 4933 22 view .LVU3527
 10240 009a 0225     		movs	r5, #2
 10241 009c CDE7     		b	.L753
 10242              	.LVL1210:
 10243              	.L759:
4943:DRIVER/FatFs/source/ff.c **** 			} else {
 10244              		.loc 1 4943 9 view .LVU3528
 10245 009e 0125     		movs	r5, #1
 10246              	.LVL1211:
 10247              	.L755:
4949:DRIVER/FatFs/source/ff.c **** 	}
 10248              		.loc 1 4949 21 is_stmt 1 discriminator 1 view .LVU3529
 10249 00a0 6574     		strb	r5, [r4, #17]
4949:DRIVER/FatFs/source/ff.c **** 	}
 10250              		.loc 1 4949 21 discriminator 1 view .LVU3530
 10251 00a2 00E0     		b	.L751
 10252              	.LVL1212:
 10253              	.L756:
4923:DRIVER/FatFs/source/ff.c **** 
 10254              		.loc 1 4923 30 is_stmt 0 view .LVU3531
 10255 00a4 0725     		movs	r5, #7
 10256              	.LVL1213:
 10257              	.L751:
4953:DRIVER/FatFs/source/ff.c **** 
 10258              		.loc 1 4953 1 view .LVU3532
 10259 00a6 2846     		mov	r0, r5
 10260 00a8 03B0     		add	sp, sp, #12
 10261              	.LCFI98:
 10262              		.cfi_def_cfa_offset 12
 10263              		@ sp needed
 10264 00aa 30BD     		pop	{r4, r5, pc}
4953:DRIVER/FatFs/source/ff.c **** 
 10265              		.loc 1 4953 1 view .LVU3533
 10266              		.cfi_endproc
 10267              	.LFE51:
 10269              		.section	.text.f_unlink,"ax",%progbits
 10270              		.align	1
 10271              		.global	f_unlink
 10272              		.syntax unified
 10273              		.thumb
 10274              		.thumb_func
 10276              	f_unlink:
 10277              	.LVL1214:
 10278              	.LFB52:
4965:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
 10279              		.loc 1 4965 1 is_stmt 1 view -0
 10280              		.cfi_startproc
 10281              		@ args = 0, pretend = 0, frame = 112
 10282              		@ frame_needed = 0, uses_anonymous_args = 0
4965:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
 10283              		.loc 1 4965 1 is_stmt 0 view .LVU3535
 10284 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 10285              	.LCFI99:
 10286              		.cfi_def_cfa_offset 20
 10287              		.cfi_offset 4, -20
 10288              		.cfi_offset 5, -16
 10289              		.cfi_offset 6, -12
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 338


 10290              		.cfi_offset 7, -8
 10291              		.cfi_offset 14, -4
 10292 0002 9DB0     		sub	sp, sp, #116
 10293              	.LCFI100:
 10294              		.cfi_def_cfa_offset 136
 10295 0004 0190     		str	r0, [sp, #4]
4966:DRIVER/FatFs/source/ff.c **** 	FATFS *fs;
 10296              		.loc 1 4966 2 is_stmt 1 view .LVU3536
4967:DRIVER/FatFs/source/ff.c **** 	DIR dj, sdj;
 10297              		.loc 1 4967 2 view .LVU3537
4968:DRIVER/FatFs/source/ff.c **** 	DWORD dclst = 0;
 10298              		.loc 1 4968 2 view .LVU3538
4969:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
 10299              		.loc 1 4969 2 view .LVU3539
 10300              	.LVL1215:
4977:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
 10301              		.loc 1 4977 2 view .LVU3540
4977:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
 10302              		.loc 1 4977 8 is_stmt 0 view .LVU3541
 10303 0006 0222     		movs	r2, #2
 10304 0008 1BA9     		add	r1, sp, #108
 10305 000a 01A8     		add	r0, sp, #4
 10306              	.LVL1216:
4977:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
 10307              		.loc 1 4977 8 view .LVU3542
 10308 000c FFF7FEFF 		bl	mount_volume
 10309              	.LVL1217:
4978:DRIVER/FatFs/source/ff.c **** 		dj.obj.fs = fs;
 10310              		.loc 1 4978 2 is_stmt 1 view .LVU3543
4978:DRIVER/FatFs/source/ff.c **** 		dj.obj.fs = fs;
 10311              		.loc 1 4978 5 is_stmt 0 view .LVU3544
 10312 0010 0446     		mov	r4, r0
 10313 0012 10B1     		cbz	r0, .L771
 10314              	.LVL1218:
 10315              	.L763:
5043:DRIVER/FatFs/source/ff.c **** 	}
 10316              		.loc 1 5043 16 is_stmt 1 view .LVU3545
5046:DRIVER/FatFs/source/ff.c **** }
 10317              		.loc 1 5046 2 view .LVU3546
5047:DRIVER/FatFs/source/ff.c **** 
 10318              		.loc 1 5047 1 is_stmt 0 view .LVU3547
 10319 0014 2046     		mov	r0, r4
 10320 0016 1DB0     		add	sp, sp, #116
 10321              	.LCFI101:
 10322              		.cfi_remember_state
 10323              		.cfi_def_cfa_offset 20
 10324              		@ sp needed
 10325 0018 F0BD     		pop	{r4, r5, r6, r7, pc}
 10326              	.LVL1219:
 10327              	.L771:
 10328              	.LCFI102:
 10329              		.cfi_restore_state
4979:DRIVER/FatFs/source/ff.c **** 		INIT_NAMBUF(fs);
 10330              		.loc 1 4979 3 is_stmt 1 view .LVU3548
4979:DRIVER/FatFs/source/ff.c **** 		INIT_NAMBUF(fs);
 10331              		.loc 1 4979 13 is_stmt 0 view .LVU3549
 10332 001a 1B9B     		ldr	r3, [sp, #108]
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 339


 10333 001c 0F93     		str	r3, [sp, #60]
4980:DRIVER/FatFs/source/ff.c **** 		res = follow_path(&dj, path);		/* Follow the file path */
 10334              		.loc 1 4980 18 is_stmt 1 view .LVU3550
4981:DRIVER/FatFs/source/ff.c **** 		if (FF_FS_RPATH && res == FR_OK && (dj.fn[NSFLAG] & NS_DOT)) {
 10335              		.loc 1 4981 3 view .LVU3551
4981:DRIVER/FatFs/source/ff.c **** 		if (FF_FS_RPATH && res == FR_OK && (dj.fn[NSFLAG] & NS_DOT)) {
 10336              		.loc 1 4981 9 is_stmt 0 view .LVU3552
 10337 001e 0199     		ldr	r1, [sp, #4]
 10338 0020 0FA8     		add	r0, sp, #60
 10339              	.LVL1220:
4981:DRIVER/FatFs/source/ff.c **** 		if (FF_FS_RPATH && res == FR_OK && (dj.fn[NSFLAG] & NS_DOT)) {
 10340              		.loc 1 4981 9 view .LVU3553
 10341 0022 FFF7FEFF 		bl	follow_path
 10342              	.LVL1221:
4982:DRIVER/FatFs/source/ff.c **** 			res = FR_INVALID_NAME;			/* Cannot remove dot entry */
 10343              		.loc 1 4982 3 is_stmt 1 view .LVU3554
4988:DRIVER/FatFs/source/ff.c **** 			if (dj.fn[NSFLAG] & NS_NONAME) {
 10344              		.loc 1 4988 3 view .LVU3555
4988:DRIVER/FatFs/source/ff.c **** 			if (dj.fn[NSFLAG] & NS_NONAME) {
 10345              		.loc 1 4988 6 is_stmt 0 view .LVU3556
 10346 0026 0446     		mov	r4, r0
 10347 0028 0028     		cmp	r0, #0
 10348 002a F3D1     		bne	.L763
4989:DRIVER/FatFs/source/ff.c **** 				res = FR_INVALID_NAME;		/* Cannot remove the origin directory */
 10349              		.loc 1 4989 4 is_stmt 1 view .LVU3557
4989:DRIVER/FatFs/source/ff.c **** 				res = FR_INVALID_NAME;		/* Cannot remove the origin directory */
 10350              		.loc 1 4989 8 is_stmt 0 view .LVU3558
 10351 002c 9DF96730 		ldrsb	r3, [sp, #103]
4989:DRIVER/FatFs/source/ff.c **** 				res = FR_INVALID_NAME;		/* Cannot remove the origin directory */
 10352              		.loc 1 4989 7 view .LVU3559
 10353 0030 002B     		cmp	r3, #0
 10354 0032 1FDB     		blt	.L767
4992:DRIVER/FatFs/source/ff.c **** 					res = FR_DENIED;		/* Cannot remove R/O object */
 10355              		.loc 1 4992 5 is_stmt 1 view .LVU3560
4992:DRIVER/FatFs/source/ff.c **** 					res = FR_DENIED;		/* Cannot remove R/O object */
 10356              		.loc 1 4992 15 is_stmt 0 view .LVU3561
 10357 0034 9DF84260 		ldrb	r6, [sp, #66]	@ zero_extendqisi2
4992:DRIVER/FatFs/source/ff.c **** 					res = FR_DENIED;		/* Cannot remove R/O object */
 10358              		.loc 1 4992 8 view .LVU3562
 10359 0038 16F0010F 		tst	r6, #1
 10360 003c 35D1     		bne	.L768
 10361              	.LVL1222:
4996:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
 10362              		.loc 1 4996 4 is_stmt 1 view .LVU3563
5005:DRIVER/FatFs/source/ff.c **** 				}
 10363              		.loc 1 5005 6 view .LVU3564
5005:DRIVER/FatFs/source/ff.c **** 				}
 10364              		.loc 1 5005 14 is_stmt 0 view .LVU3565
 10365 003e 1B9F     		ldr	r7, [sp, #108]
 10366 0040 1699     		ldr	r1, [sp, #88]
 10367 0042 3846     		mov	r0, r7
 10368 0044 FFF7FEFF 		bl	ld_clust
 10369              	.LVL1223:
 10370 0048 0546     		mov	r5, r0
 10371              	.LVL1224:
5007:DRIVER/FatFs/source/ff.c **** #if FF_FS_RPATH != 0
 10372              		.loc 1 5007 5 is_stmt 1 view .LVU3566
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 340


5007:DRIVER/FatFs/source/ff.c **** #if FF_FS_RPATH != 0
 10373              		.loc 1 5007 8 is_stmt 0 view .LVU3567
 10374 004a 16F0100F 		tst	r6, #16
 10375 004e 13D0     		beq	.L764
5014:DRIVER/FatFs/source/ff.c **** 						sdj.obj.sclust = dclst;
 10376              		.loc 1 5014 7 is_stmt 1 view .LVU3568
5014:DRIVER/FatFs/source/ff.c **** 						sdj.obj.sclust = dclst;
 10377              		.loc 1 5014 18 is_stmt 0 view .LVU3569
 10378 0050 0397     		str	r7, [sp, #12]
5015:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
 10379              		.loc 1 5015 7 is_stmt 1 view .LVU3570
5015:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
 10380              		.loc 1 5015 22 is_stmt 0 view .LVU3571
 10381 0052 0590     		str	r0, [sp, #20]
5022:DRIVER/FatFs/source/ff.c **** 						if (res == FR_OK) {
 10382              		.loc 1 5022 7 is_stmt 1 view .LVU3572
5022:DRIVER/FatFs/source/ff.c **** 						if (res == FR_OK) {
 10383              		.loc 1 5022 13 is_stmt 0 view .LVU3573
 10384 0054 0021     		movs	r1, #0
 10385 0056 03A8     		add	r0, sp, #12
 10386              	.LVL1225:
5022:DRIVER/FatFs/source/ff.c **** 						if (res == FR_OK) {
 10387              		.loc 1 5022 13 view .LVU3574
 10388 0058 FFF7FEFF 		bl	dir_sdi
 10389              	.LVL1226:
5023:DRIVER/FatFs/source/ff.c **** 							res = DIR_READ_FILE(&sdj);			/* Test if the directory is empty */
 10390              		.loc 1 5023 7 is_stmt 1 view .LVU3575
5023:DRIVER/FatFs/source/ff.c **** 							res = DIR_READ_FILE(&sdj);			/* Test if the directory is empty */
 10391              		.loc 1 5023 10 is_stmt 0 view .LVU3576
 10392 005c 0446     		mov	r4, r0
 10393 005e 0028     		cmp	r0, #0
 10394 0060 D8D1     		bne	.L763
5024:DRIVER/FatFs/source/ff.c **** 							if (res == FR_OK) res = FR_DENIED;	/* Not empty? */
 10395              		.loc 1 5024 8 is_stmt 1 view .LVU3577
5024:DRIVER/FatFs/source/ff.c **** 							if (res == FR_OK) res = FR_DENIED;	/* Not empty? */
 10396              		.loc 1 5024 14 is_stmt 0 view .LVU3578
 10397 0062 0021     		movs	r1, #0
 10398 0064 03A8     		add	r0, sp, #12
 10399              	.LVL1227:
5024:DRIVER/FatFs/source/ff.c **** 							if (res == FR_OK) res = FR_DENIED;	/* Not empty? */
 10400              		.loc 1 5024 14 view .LVU3579
 10401 0066 FFF7FEFF 		bl	dir_read
 10402              	.LVL1228:
5025:DRIVER/FatFs/source/ff.c **** 							if (res == FR_NO_FILE) res = FR_OK;	/* Empty? */
 10403              		.loc 1 5025 8 is_stmt 1 view .LVU3580
5025:DRIVER/FatFs/source/ff.c **** 							if (res == FR_NO_FILE) res = FR_OK;	/* Empty? */
 10404              		.loc 1 5025 11 is_stmt 0 view .LVU3581
 10405 006a 0446     		mov	r4, r0
 10406 006c A0B1     		cbz	r0, .L769
5026:DRIVER/FatFs/source/ff.c **** 						}
 10407              		.loc 1 5026 8 is_stmt 1 view .LVU3582
5026:DRIVER/FatFs/source/ff.c **** 						}
 10408              		.loc 1 5026 11 is_stmt 0 view .LVU3583
 10409 006e 0428     		cmp	r0, #4
 10410 0070 02D1     		bne	.L764
 10411 0072 03E0     		b	.L765
 10412              	.LVL1229:
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 341


 10413              	.L767:
4969:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
 10414              		.loc 1 4969 8 view .LVU3584
 10415 0074 0025     		movs	r5, #0
4990:DRIVER/FatFs/source/ff.c **** 			} else {
 10416              		.loc 1 4990 9 view .LVU3585
 10417 0076 0624     		movs	r4, #6
 10418              	.LVL1230:
 10419              	.L764:
5031:DRIVER/FatFs/source/ff.c **** 				res = dir_remove(&dj);			/* Remove the directory entry */
 10420              		.loc 1 5031 4 is_stmt 1 view .LVU3586
5031:DRIVER/FatFs/source/ff.c **** 				res = dir_remove(&dj);			/* Remove the directory entry */
 10421              		.loc 1 5031 7 is_stmt 0 view .LVU3587
 10422 0078 002C     		cmp	r4, #0
 10423 007a CBD1     		bne	.L763
 10424              	.LVL1231:
 10425              	.L765:
5032:DRIVER/FatFs/source/ff.c **** 				if (res == FR_OK && dclst != 0) {	/* Remove the cluster chain if exist */
 10426              		.loc 1 5032 5 is_stmt 1 view .LVU3588
5032:DRIVER/FatFs/source/ff.c **** 				if (res == FR_OK && dclst != 0) {	/* Remove the cluster chain if exist */
 10427              		.loc 1 5032 11 is_stmt 0 view .LVU3589
 10428 007c 0FA8     		add	r0, sp, #60
 10429 007e FFF7FEFF 		bl	dir_remove
 10430              	.LVL1232:
5033:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
 10431              		.loc 1 5033 5 is_stmt 1 view .LVU3590
5033:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
 10432              		.loc 1 5033 8 is_stmt 0 view .LVU3591
 10433 0082 0446     		mov	r4, r0
 10434 0084 0028     		cmp	r0, #0
 10435 0086 C5D1     		bne	.L763
5033:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
 10436              		.loc 1 5033 22 discriminator 1 view .LVU3592
 10437 0088 45B9     		cbnz	r5, .L772
 10438              	.LVL1233:
 10439              	.L766:
5040:DRIVER/FatFs/source/ff.c **** 			}
 10440              		.loc 1 5040 5 is_stmt 1 view .LVU3593
5040:DRIVER/FatFs/source/ff.c **** 			}
 10441              		.loc 1 5040 8 is_stmt 0 view .LVU3594
 10442 008a 002C     		cmp	r4, #0
 10443 008c C2D1     		bne	.L763
5040:DRIVER/FatFs/source/ff.c **** 			}
 10444              		.loc 1 5040 23 is_stmt 1 discriminator 1 view .LVU3595
5040:DRIVER/FatFs/source/ff.c **** 			}
 10445              		.loc 1 5040 29 is_stmt 0 discriminator 1 view .LVU3596
 10446 008e 1B98     		ldr	r0, [sp, #108]
 10447 0090 FFF7FEFF 		bl	sync_fs
 10448              	.LVL1234:
 10449 0094 0446     		mov	r4, r0
 10450              	.LVL1235:
5040:DRIVER/FatFs/source/ff.c **** 			}
 10451              		.loc 1 5040 29 discriminator 1 view .LVU3597
 10452 0096 BDE7     		b	.L763
 10453              	.LVL1236:
 10454              	.L769:
5025:DRIVER/FatFs/source/ff.c **** 							if (res == FR_NO_FILE) res = FR_OK;	/* Empty? */
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 342


 10455              		.loc 1 5025 30 view .LVU3598
 10456 0098 0724     		movs	r4, #7
 10457 009a EDE7     		b	.L764
 10458              	.LVL1237:
 10459              	.L772:
5037:DRIVER/FatFs/source/ff.c **** #endif
 10460              		.loc 1 5037 6 is_stmt 1 view .LVU3599
5037:DRIVER/FatFs/source/ff.c **** #endif
 10461              		.loc 1 5037 12 is_stmt 0 view .LVU3600
 10462 009c 0022     		movs	r2, #0
 10463 009e 2946     		mov	r1, r5
 10464 00a0 0FA8     		add	r0, sp, #60
 10465              	.LVL1238:
5037:DRIVER/FatFs/source/ff.c **** #endif
 10466              		.loc 1 5037 12 view .LVU3601
 10467 00a2 FFF7FEFF 		bl	remove_chain
 10468              	.LVL1239:
 10469 00a6 0446     		mov	r4, r0
 10470              	.LVL1240:
5037:DRIVER/FatFs/source/ff.c **** #endif
 10471              		.loc 1 5037 12 view .LVU3602
 10472 00a8 EFE7     		b	.L766
 10473              	.LVL1241:
 10474              	.L768:
5037:DRIVER/FatFs/source/ff.c **** #endif
 10475              		.loc 1 5037 12 view .LVU3603
 10476 00aa 0724     		movs	r4, #7
 10477 00ac B2E7     		b	.L763
 10478              		.cfi_endproc
 10479              	.LFE52:
 10481              		.section	.text.f_mkdir,"ax",%progbits
 10482              		.align	1
 10483              		.global	f_mkdir
 10484              		.syntax unified
 10485              		.thumb
 10486              		.thumb_func
 10488              	f_mkdir:
 10489              	.LVL1242:
 10490              	.LFB53:
5059:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
 10491              		.loc 1 5059 1 is_stmt 1 view -0
 10492              		.cfi_startproc
 10493              		@ args = 0, pretend = 0, frame = 80
 10494              		@ frame_needed = 0, uses_anonymous_args = 0
5059:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
 10495              		.loc 1 5059 1 is_stmt 0 view .LVU3605
 10496 0000 70B5     		push	{r4, r5, r6, lr}
 10497              	.LCFI103:
 10498              		.cfi_def_cfa_offset 16
 10499              		.cfi_offset 4, -16
 10500              		.cfi_offset 5, -12
 10501              		.cfi_offset 6, -8
 10502              		.cfi_offset 14, -4
 10503 0002 94B0     		sub	sp, sp, #80
 10504              	.LCFI104:
 10505              		.cfi_def_cfa_offset 96
 10506 0004 0190     		str	r0, [sp, #4]
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 343


5060:DRIVER/FatFs/source/ff.c **** 	FATFS *fs;
 10507              		.loc 1 5060 2 is_stmt 1 view .LVU3606
5061:DRIVER/FatFs/source/ff.c **** 	DIR dj;
 10508              		.loc 1 5061 2 view .LVU3607
5062:DRIVER/FatFs/source/ff.c **** 	FFOBJID sobj;
 10509              		.loc 1 5062 2 view .LVU3608
5063:DRIVER/FatFs/source/ff.c **** 	DWORD dcl, pcl, tm;
 10510              		.loc 1 5063 2 view .LVU3609
5064:DRIVER/FatFs/source/ff.c **** 	DEF_NAMBUF
 10511              		.loc 1 5064 2 view .LVU3610
5068:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
 10512              		.loc 1 5068 2 view .LVU3611
5068:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
 10513              		.loc 1 5068 8 is_stmt 0 view .LVU3612
 10514 0006 0222     		movs	r2, #2
 10515 0008 13A9     		add	r1, sp, #76
 10516 000a 01A8     		add	r0, sp, #4
 10517              	.LVL1243:
5068:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
 10518              		.loc 1 5068 8 view .LVU3613
 10519 000c FFF7FEFF 		bl	mount_volume
 10520              	.LVL1244:
5069:DRIVER/FatFs/source/ff.c **** 		dj.obj.fs = fs;
 10521              		.loc 1 5069 2 is_stmt 1 view .LVU3614
5069:DRIVER/FatFs/source/ff.c **** 		dj.obj.fs = fs;
 10522              		.loc 1 5069 5 is_stmt 0 view .LVU3615
 10523 0010 0446     		mov	r4, r0
 10524 0012 10B1     		cbz	r0, .L784
 10525              	.LVL1245:
 10526              	.L774:
5127:DRIVER/FatFs/source/ff.c **** 	}
 10527              		.loc 1 5127 16 is_stmt 1 view .LVU3616
5130:DRIVER/FatFs/source/ff.c **** }
 10528              		.loc 1 5130 2 view .LVU3617
5131:DRIVER/FatFs/source/ff.c **** 
 10529              		.loc 1 5131 1 is_stmt 0 view .LVU3618
 10530 0014 2046     		mov	r0, r4
 10531 0016 14B0     		add	sp, sp, #80
 10532              	.LCFI105:
 10533              		.cfi_remember_state
 10534              		.cfi_def_cfa_offset 16
 10535              		@ sp needed
 10536 0018 70BD     		pop	{r4, r5, r6, pc}
 10537              	.LVL1246:
 10538              	.L784:
 10539              	.LCFI106:
 10540              		.cfi_restore_state
5070:DRIVER/FatFs/source/ff.c **** 		INIT_NAMBUF(fs);
 10541              		.loc 1 5070 3 is_stmt 1 view .LVU3619
5070:DRIVER/FatFs/source/ff.c **** 		INIT_NAMBUF(fs);
 10542              		.loc 1 5070 13 is_stmt 0 view .LVU3620
 10543 001a 139B     		ldr	r3, [sp, #76]
 10544 001c 0793     		str	r3, [sp, #28]
5071:DRIVER/FatFs/source/ff.c **** 		res = follow_path(&dj, path);			/* Follow the file path */
 10545              		.loc 1 5071 18 is_stmt 1 view .LVU3621
5072:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK) res = FR_EXIST;		/* Name collision? */
 10546              		.loc 1 5072 3 view .LVU3622
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 344


5072:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK) res = FR_EXIST;		/* Name collision? */
 10547              		.loc 1 5072 9 is_stmt 0 view .LVU3623
 10548 001e 0199     		ldr	r1, [sp, #4]
 10549 0020 07A8     		add	r0, sp, #28
 10550              	.LVL1247:
5072:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK) res = FR_EXIST;		/* Name collision? */
 10551              		.loc 1 5072 9 view .LVU3624
 10552 0022 FFF7FEFF 		bl	follow_path
 10553              	.LVL1248:
5073:DRIVER/FatFs/source/ff.c **** 		if (FF_FS_RPATH && res == FR_NO_FILE && (dj.fn[NSFLAG] & NS_DOT)) {	/* Invalid name? */
 10554              		.loc 1 5073 3 is_stmt 1 view .LVU3625
5073:DRIVER/FatFs/source/ff.c **** 		if (FF_FS_RPATH && res == FR_NO_FILE && (dj.fn[NSFLAG] & NS_DOT)) {	/* Invalid name? */
 10555              		.loc 1 5073 6 is_stmt 0 view .LVU3626
 10556 0026 0028     		cmp	r0, #0
 10557 0028 75D0     		beq	.L778
5074:DRIVER/FatFs/source/ff.c **** 			res = FR_INVALID_NAME;
 10558              		.loc 1 5074 3 is_stmt 1 view .LVU3627
5077:DRIVER/FatFs/source/ff.c **** 			sobj.fs = fs;						/* New object id to create a new chain */
 10559              		.loc 1 5077 3 view .LVU3628
5077:DRIVER/FatFs/source/ff.c **** 			sobj.fs = fs;						/* New object id to create a new chain */
 10560              		.loc 1 5077 6 is_stmt 0 view .LVU3629
 10561 002a 0428     		cmp	r0, #4
 10562 002c 01D0     		beq	.L785
5072:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK) res = FR_EXIST;		/* Name collision? */
 10563              		.loc 1 5072 9 view .LVU3630
 10564 002e 0446     		mov	r4, r0
 10565 0030 F0E7     		b	.L774
 10566              	.L785:
5078:DRIVER/FatFs/source/ff.c **** 			dcl = create_chain(&sobj, 0);		/* Allocate a cluster for the new directory */
 10567              		.loc 1 5078 4 is_stmt 1 view .LVU3631
5078:DRIVER/FatFs/source/ff.c **** 			dcl = create_chain(&sobj, 0);		/* Allocate a cluster for the new directory */
 10568              		.loc 1 5078 12 is_stmt 0 view .LVU3632
 10569 0032 139B     		ldr	r3, [sp, #76]
 10570 0034 0393     		str	r3, [sp, #12]
5079:DRIVER/FatFs/source/ff.c **** 			res = FR_OK;
 10571              		.loc 1 5079 4 is_stmt 1 view .LVU3633
5079:DRIVER/FatFs/source/ff.c **** 			res = FR_OK;
 10572              		.loc 1 5079 10 is_stmt 0 view .LVU3634
 10573 0036 0021     		movs	r1, #0
 10574 0038 03A8     		add	r0, sp, #12
 10575              	.LVL1249:
5079:DRIVER/FatFs/source/ff.c **** 			res = FR_OK;
 10576              		.loc 1 5079 10 view .LVU3635
 10577 003a FFF7FEFF 		bl	create_chain
 10578              	.LVL1250:
5080:DRIVER/FatFs/source/ff.c **** 			if (dcl == 0) res = FR_DENIED;		/* No space to allocate a new cluster? */
 10579              		.loc 1 5080 4 is_stmt 1 view .LVU3636
5081:DRIVER/FatFs/source/ff.c **** 			if (dcl == 1) res = FR_INT_ERR;		/* Any insanity? */
 10580              		.loc 1 5081 4 view .LVU3637
5081:DRIVER/FatFs/source/ff.c **** 			if (dcl == 1) res = FR_INT_ERR;		/* Any insanity? */
 10581              		.loc 1 5081 7 is_stmt 0 view .LVU3638
 10582 003e 0546     		mov	r5, r0
 10583 0040 18B1     		cbz	r0, .L780
5082:DRIVER/FatFs/source/ff.c **** 			if (dcl == 0xFFFFFFFF) res = FR_DISK_ERR;	/* Disk error? */
 10584              		.loc 1 5082 4 is_stmt 1 view .LVU3639
5082:DRIVER/FatFs/source/ff.c **** 			if (dcl == 0xFFFFFFFF) res = FR_DISK_ERR;	/* Disk error? */
 10585              		.loc 1 5082 7 is_stmt 0 view .LVU3640
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 345


 10586 0042 0128     		cmp	r0, #1
 10587 0044 02D1     		bne	.L775
5082:DRIVER/FatFs/source/ff.c **** 			if (dcl == 0xFFFFFFFF) res = FR_DISK_ERR;	/* Disk error? */
 10588              		.loc 1 5082 22 view .LVU3641
 10589 0046 0224     		movs	r4, #2
 10590 0048 03E0     		b	.L776
 10591              	.L780:
5081:DRIVER/FatFs/source/ff.c **** 			if (dcl == 1) res = FR_INT_ERR;		/* Any insanity? */
 10592              		.loc 1 5081 22 view .LVU3642
 10593 004a 0724     		movs	r4, #7
 10594              	.L775:
 10595              	.LVL1251:
5083:DRIVER/FatFs/source/ff.c **** 			tm = GET_FATTIME();
 10596              		.loc 1 5083 4 is_stmt 1 view .LVU3643
5083:DRIVER/FatFs/source/ff.c **** 			tm = GET_FATTIME();
 10597              		.loc 1 5083 7 is_stmt 0 view .LVU3644
 10598 004c B5F1FF3F 		cmp	r5, #-1
 10599 0050 0FD0     		beq	.L786
 10600              	.LVL1252:
 10601              	.L776:
5084:DRIVER/FatFs/source/ff.c **** 			if (res == FR_OK) {
 10602              		.loc 1 5084 4 is_stmt 1 view .LVU3645
5084:DRIVER/FatFs/source/ff.c **** 			if (res == FR_OK) {
 10603              		.loc 1 5084 9 is_stmt 0 view .LVU3646
 10604 0052 FFF7FEFF 		bl	get_fattime
 10605              	.LVL1253:
5084:DRIVER/FatFs/source/ff.c **** 			if (res == FR_OK) {
 10606              		.loc 1 5084 9 view .LVU3647
 10607 0056 0646     		mov	r6, r0
 10608              	.LVL1254:
5085:DRIVER/FatFs/source/ff.c **** 				res = dir_clear(fs, dcl);		/* Clean up the new table */
 10609              		.loc 1 5085 4 is_stmt 1 view .LVU3648
5085:DRIVER/FatFs/source/ff.c **** 				res = dir_clear(fs, dcl);		/* Clean up the new table */
 10610              		.loc 1 5085 7 is_stmt 0 view .LVU3649
 10611 0058 2CB9     		cbnz	r4, .L777
5086:DRIVER/FatFs/source/ff.c **** 				if (res == FR_OK) {
 10612              		.loc 1 5086 5 is_stmt 1 view .LVU3650
5086:DRIVER/FatFs/source/ff.c **** 				if (res == FR_OK) {
 10613              		.loc 1 5086 11 is_stmt 0 view .LVU3651
 10614 005a 2946     		mov	r1, r5
 10615 005c 1398     		ldr	r0, [sp, #76]
 10616              	.LVL1255:
5086:DRIVER/FatFs/source/ff.c **** 				if (res == FR_OK) {
 10617              		.loc 1 5086 11 view .LVU3652
 10618 005e FFF7FEFF 		bl	dir_clear
 10619              	.LVL1256:
5087:DRIVER/FatFs/source/ff.c **** 					if (!FF_FS_EXFAT || fs->fs_type != FS_EXFAT) {	/* Create dot entries (FAT only) */
 10620              		.loc 1 5087 5 is_stmt 1 view .LVU3653
5087:DRIVER/FatFs/source/ff.c **** 					if (!FF_FS_EXFAT || fs->fs_type != FS_EXFAT) {	/* Create dot entries (FAT only) */
 10621              		.loc 1 5087 8 is_stmt 0 view .LVU3654
 10622 0062 0446     		mov	r4, r0
 10623 0064 38B1     		cbz	r0, .L787
 10624              	.LVL1257:
 10625              	.L777:
5124:DRIVER/FatFs/source/ff.c **** 			}
 10626              		.loc 1 5124 5 is_stmt 1 view .LVU3655
 10627 0066 0022     		movs	r2, #0
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 346


 10628 0068 2946     		mov	r1, r5
 10629 006a 03A8     		add	r0, sp, #12
 10630 006c FFF7FEFF 		bl	remove_chain
 10631              	.LVL1258:
 10632 0070 D0E7     		b	.L774
 10633              	.LVL1259:
 10634              	.L786:
5083:DRIVER/FatFs/source/ff.c **** 			tm = GET_FATTIME();
 10635              		.loc 1 5083 31 is_stmt 0 view .LVU3656
 10636 0072 0124     		movs	r4, #1
 10637              	.LVL1260:
5083:DRIVER/FatFs/source/ff.c **** 			tm = GET_FATTIME();
 10638              		.loc 1 5083 31 view .LVU3657
 10639 0074 EDE7     		b	.L776
 10640              	.LVL1261:
 10641              	.L787:
5088:DRIVER/FatFs/source/ff.c **** 						memset(fs->win + DIR_Name, ' ', 11);	/* Create "." entry */
 10642              		.loc 1 5088 6 is_stmt 1 view .LVU3658
5089:DRIVER/FatFs/source/ff.c **** 						fs->win[DIR_Name] = '.';
 10643              		.loc 1 5089 7 view .LVU3659
5089:DRIVER/FatFs/source/ff.c **** 						fs->win[DIR_Name] = '.';
 10644              		.loc 1 5089 16 is_stmt 0 view .LVU3660
 10645 0076 1398     		ldr	r0, [sp, #76]
 10646              	.LVL1262:
5089:DRIVER/FatFs/source/ff.c **** 						fs->win[DIR_Name] = '.';
 10647              		.loc 1 5089 7 view .LVU3661
 10648 0078 4FF02033 		mov	r3, #538976288
 10649 007c 8363     		str	r3, [r0, #56]	@ unaligned
 10650 007e C363     		str	r3, [r0, #60]	@ unaligned
 10651 0080 C0F83F30 		str	r3, [r0, #63]	@ unaligned
5090:DRIVER/FatFs/source/ff.c **** 						fs->win[DIR_Attr] = AM_DIR;
 10652              		.loc 1 5090 7 is_stmt 1 view .LVU3662
5090:DRIVER/FatFs/source/ff.c **** 						fs->win[DIR_Attr] = AM_DIR;
 10653              		.loc 1 5090 25 is_stmt 0 view .LVU3663
 10654 0084 2E24     		movs	r4, #46
 10655 0086 80F83840 		strb	r4, [r0, #56]
5091:DRIVER/FatFs/source/ff.c **** 						st_dword(fs->win + DIR_ModTime, tm);
 10656              		.loc 1 5091 7 is_stmt 1 view .LVU3664
5091:DRIVER/FatFs/source/ff.c **** 						st_dword(fs->win + DIR_ModTime, tm);
 10657              		.loc 1 5091 25 is_stmt 0 view .LVU3665
 10658 008a 1023     		movs	r3, #16
 10659 008c 80F84330 		strb	r3, [r0, #67]
5092:DRIVER/FatFs/source/ff.c **** 						st_clust(fs, fs->win, dcl);
 10660              		.loc 1 5092 7 is_stmt 1 view .LVU3666
 10661 0090 3146     		mov	r1, r6
 10662 0092 4E30     		adds	r0, r0, #78
 10663 0094 FFF7FEFF 		bl	st_dword
 10664              	.LVL1263:
5093:DRIVER/FatFs/source/ff.c **** 						memcpy(fs->win + SZDIRE, fs->win, SZDIRE);	/* Create ".." entry */
 10665              		.loc 1 5093 7 view .LVU3667
 10666 0098 1398     		ldr	r0, [sp, #76]
 10667 009a 2A46     		mov	r2, r5
 10668 009c 00F13801 		add	r1, r0, #56
 10669 00a0 FFF7FEFF 		bl	st_clust
 10670              	.LVL1264:
5094:DRIVER/FatFs/source/ff.c **** 						fs->win[SZDIRE + 1] = '.'; pcl = dj.obj.sclust;
 10671              		.loc 1 5094 7 view .LVU3668
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 347


5094:DRIVER/FatFs/source/ff.c **** 						fs->win[SZDIRE + 1] = '.'; pcl = dj.obj.sclust;
 10672              		.loc 1 5094 16 is_stmt 0 view .LVU3669
 10673 00a4 1398     		ldr	r0, [sp, #76]
5094:DRIVER/FatFs/source/ff.c **** 						fs->win[SZDIRE + 1] = '.'; pcl = dj.obj.sclust;
 10674              		.loc 1 5094 7 view .LVU3670
 10675 00a6 D0F838C0 		ldr	ip, [r0, #56]	@ unaligned
 10676 00aa C16B     		ldr	r1, [r0, #60]	@ unaligned
 10677 00ac 026C     		ldr	r2, [r0, #64]	@ unaligned
 10678 00ae 436C     		ldr	r3, [r0, #68]	@ unaligned
 10679 00b0 C0F858C0 		str	ip, [r0, #88]	@ unaligned
 10680 00b4 C165     		str	r1, [r0, #92]	@ unaligned
 10681 00b6 0266     		str	r2, [r0, #96]	@ unaligned
 10682 00b8 4366     		str	r3, [r0, #100]	@ unaligned
 10683 00ba D0F848C0 		ldr	ip, [r0, #72]	@ unaligned
 10684 00be C16C     		ldr	r1, [r0, #76]	@ unaligned
 10685 00c0 026D     		ldr	r2, [r0, #80]	@ unaligned
 10686 00c2 436D     		ldr	r3, [r0, #84]	@ unaligned
 10687 00c4 C0F868C0 		str	ip, [r0, #104]	@ unaligned
 10688 00c8 C166     		str	r1, [r0, #108]	@ unaligned
 10689 00ca 0267     		str	r2, [r0, #112]	@ unaligned
 10690 00cc 4367     		str	r3, [r0, #116]	@ unaligned
5095:DRIVER/FatFs/source/ff.c **** 						st_clust(fs, fs->win + SZDIRE, pcl);
 10691              		.loc 1 5095 7 is_stmt 1 view .LVU3671
5095:DRIVER/FatFs/source/ff.c **** 						st_clust(fs, fs->win + SZDIRE, pcl);
 10692              		.loc 1 5095 27 is_stmt 0 view .LVU3672
 10693 00ce 80F85940 		strb	r4, [r0, #89]
5095:DRIVER/FatFs/source/ff.c **** 						st_clust(fs, fs->win + SZDIRE, pcl);
 10694              		.loc 1 5095 34 is_stmt 1 view .LVU3673
 10695              	.LVL1265:
5096:DRIVER/FatFs/source/ff.c **** 						fs->wflag = 1;
 10696              		.loc 1 5096 7 view .LVU3674
 10697 00d2 099A     		ldr	r2, [sp, #36]
 10698 00d4 00F15801 		add	r1, r0, #88
 10699 00d8 FFF7FEFF 		bl	st_clust
 10700              	.LVL1266:
5097:DRIVER/FatFs/source/ff.c **** 					}
 10701              		.loc 1 5097 7 view .LVU3675
5097:DRIVER/FatFs/source/ff.c **** 					}
 10702              		.loc 1 5097 17 is_stmt 0 view .LVU3676
 10703 00dc 139B     		ldr	r3, [sp, #76]
 10704 00de 0122     		movs	r2, #1
 10705 00e0 1A71     		strb	r2, [r3, #4]
5099:DRIVER/FatFs/source/ff.c **** 				}
 10706              		.loc 1 5099 6 is_stmt 1 view .LVU3677
5099:DRIVER/FatFs/source/ff.c **** 				}
 10707              		.loc 1 5099 12 is_stmt 0 view .LVU3678
 10708 00e2 07A8     		add	r0, sp, #28
 10709 00e4 FFF7FEFF 		bl	dir_register
 10710              	.LVL1267:
5102:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
 10711              		.loc 1 5102 4 is_stmt 1 view .LVU3679
5102:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
 10712              		.loc 1 5102 7 is_stmt 0 view .LVU3680
 10713 00e8 0446     		mov	r4, r0
 10714 00ea 0028     		cmp	r0, #0
 10715 00ec BBD1     		bne	.L777
5115:DRIVER/FatFs/source/ff.c **** 					st_clust(fs, dj.dir, dcl);			/* Table start cluster */
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 348


 10716              		.loc 1 5115 6 is_stmt 1 view .LVU3681
 10717 00ee 3146     		mov	r1, r6
 10718 00f0 0E98     		ldr	r0, [sp, #56]
 10719              	.LVL1268:
5115:DRIVER/FatFs/source/ff.c **** 					st_clust(fs, dj.dir, dcl);			/* Table start cluster */
 10720              		.loc 1 5115 6 is_stmt 0 view .LVU3682
 10721 00f2 1630     		adds	r0, r0, #22
 10722 00f4 FFF7FEFF 		bl	st_dword
 10723              	.LVL1269:
5116:DRIVER/FatFs/source/ff.c **** 					dj.dir[DIR_Attr] = AM_DIR;			/* Attribute */
 10724              		.loc 1 5116 6 is_stmt 1 view .LVU3683
 10725 00f8 2A46     		mov	r2, r5
 10726 00fa 0E99     		ldr	r1, [sp, #56]
 10727 00fc 1398     		ldr	r0, [sp, #76]
 10728 00fe FFF7FEFF 		bl	st_clust
 10729              	.LVL1270:
5117:DRIVER/FatFs/source/ff.c **** 					fs->wflag = 1;
 10730              		.loc 1 5117 6 view .LVU3684
5117:DRIVER/FatFs/source/ff.c **** 					fs->wflag = 1;
 10731              		.loc 1 5117 23 is_stmt 0 view .LVU3685
 10732 0102 0E9B     		ldr	r3, [sp, #56]
 10733 0104 1022     		movs	r2, #16
 10734 0106 DA72     		strb	r2, [r3, #11]
5118:DRIVER/FatFs/source/ff.c **** 				}
 10735              		.loc 1 5118 6 is_stmt 1 view .LVU3686
5118:DRIVER/FatFs/source/ff.c **** 				}
 10736              		.loc 1 5118 8 is_stmt 0 view .LVU3687
 10737 0108 1398     		ldr	r0, [sp, #76]
5118:DRIVER/FatFs/source/ff.c **** 				}
 10738              		.loc 1 5118 16 view .LVU3688
 10739 010a 0123     		movs	r3, #1
 10740 010c 0371     		strb	r3, [r0, #4]
5120:DRIVER/FatFs/source/ff.c **** 					res = sync_fs(fs);
 10741              		.loc 1 5120 5 is_stmt 1 view .LVU3689
5121:DRIVER/FatFs/source/ff.c **** 				}
 10742              		.loc 1 5121 6 view .LVU3690
5121:DRIVER/FatFs/source/ff.c **** 				}
 10743              		.loc 1 5121 12 is_stmt 0 view .LVU3691
 10744 010e FFF7FEFF 		bl	sync_fs
 10745              	.LVL1271:
 10746 0112 0446     		mov	r4, r0
 10747              	.LVL1272:
5121:DRIVER/FatFs/source/ff.c **** 				}
 10748              		.loc 1 5121 12 view .LVU3692
 10749 0114 7EE7     		b	.L774
 10750              	.LVL1273:
 10751              	.L778:
5073:DRIVER/FatFs/source/ff.c **** 		if (FF_FS_RPATH && res == FR_NO_FILE && (dj.fn[NSFLAG] & NS_DOT)) {	/* Invalid name? */
 10752              		.loc 1 5073 25 view .LVU3693
 10753 0116 0824     		movs	r4, #8
 10754 0118 7CE7     		b	.L774
 10755              		.cfi_endproc
 10756              	.LFE53:
 10758              		.section	.text.f_rename,"ax",%progbits
 10759              		.align	1
 10760              		.global	f_rename
 10761              		.syntax unified
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 349


 10762              		.thumb
 10763              		.thumb_func
 10765              	f_rename:
 10766              	.LVL1274:
 10767              	.LFB54:
5144:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
 10768              		.loc 1 5144 1 is_stmt 1 view -0
 10769              		.cfi_startproc
 10770              		@ args = 0, pretend = 0, frame = 144
 10771              		@ frame_needed = 0, uses_anonymous_args = 0
5144:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
 10772              		.loc 1 5144 1 is_stmt 0 view .LVU3695
 10773 0000 30B5     		push	{r4, r5, lr}
 10774              	.LCFI107:
 10775              		.cfi_def_cfa_offset 12
 10776              		.cfi_offset 4, -12
 10777              		.cfi_offset 5, -8
 10778              		.cfi_offset 14, -4
 10779 0002 A5B0     		sub	sp, sp, #148
 10780              	.LCFI108:
 10781              		.cfi_def_cfa_offset 160
 10782 0004 0190     		str	r0, [sp, #4]
 10783 0006 0091     		str	r1, [sp]
5145:DRIVER/FatFs/source/ff.c **** 	FATFS *fs;
 10784              		.loc 1 5145 2 is_stmt 1 view .LVU3696
5146:DRIVER/FatFs/source/ff.c **** 	DIR djo, djn;
 10785              		.loc 1 5146 2 view .LVU3697
5147:DRIVER/FatFs/source/ff.c **** 	BYTE buf[FF_FS_EXFAT ? SZDIRE * 2 : SZDIRE], *dir;
 10786              		.loc 1 5147 2 view .LVU3698
5148:DRIVER/FatFs/source/ff.c **** 	LBA_t sect;
 10787              		.loc 1 5148 2 view .LVU3699
5149:DRIVER/FatFs/source/ff.c **** 	DEF_NAMBUF
 10788              		.loc 1 5149 2 view .LVU3700
5153:DRIVER/FatFs/source/ff.c **** 	res = mount_volume(&path_old, &fs, FA_WRITE);	/* Get logical drive of the old object */
 10789              		.loc 1 5153 2 view .LVU3701
 10790 0008 6846     		mov	r0, sp
 10791              	.LVL1275:
5153:DRIVER/FatFs/source/ff.c **** 	res = mount_volume(&path_old, &fs, FA_WRITE);	/* Get logical drive of the old object */
 10792              		.loc 1 5153 2 is_stmt 0 view .LVU3702
 10793 000a FFF7FEFF 		bl	get_ldnumber
 10794              	.LVL1276:
5154:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
 10795              		.loc 1 5154 2 is_stmt 1 view .LVU3703
5154:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
 10796              		.loc 1 5154 8 is_stmt 0 view .LVU3704
 10797 000e 0222     		movs	r2, #2
 10798 0010 23A9     		add	r1, sp, #140
 10799 0012 01A8     		add	r0, sp, #4
 10800 0014 FFF7FEFF 		bl	mount_volume
 10801              	.LVL1277:
5155:DRIVER/FatFs/source/ff.c **** 		djo.obj.fs = fs;
 10802              		.loc 1 5155 2 is_stmt 1 view .LVU3705
5155:DRIVER/FatFs/source/ff.c **** 		djo.obj.fs = fs;
 10803              		.loc 1 5155 5 is_stmt 0 view .LVU3706
 10804 0018 0446     		mov	r4, r0
 10805 001a 10B1     		cbz	r0, .L798
 10806              	.LVL1278:
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 350


 10807              	.L789:
5232:DRIVER/FatFs/source/ff.c **** 	}
 10808              		.loc 1 5232 16 is_stmt 1 view .LVU3707
5235:DRIVER/FatFs/source/ff.c **** }
 10809              		.loc 1 5235 2 view .LVU3708
5236:DRIVER/FatFs/source/ff.c **** 
 10810              		.loc 1 5236 1 is_stmt 0 view .LVU3709
 10811 001c 2046     		mov	r0, r4
 10812 001e 25B0     		add	sp, sp, #148
 10813              	.LCFI109:
 10814              		.cfi_remember_state
 10815              		.cfi_def_cfa_offset 12
 10816              		@ sp needed
 10817 0020 30BD     		pop	{r4, r5, pc}
 10818              	.LVL1279:
 10819              	.L798:
 10820              	.LCFI110:
 10821              		.cfi_restore_state
5156:DRIVER/FatFs/source/ff.c **** 		INIT_NAMBUF(fs);
 10822              		.loc 1 5156 3 is_stmt 1 view .LVU3710
5156:DRIVER/FatFs/source/ff.c **** 		INIT_NAMBUF(fs);
 10823              		.loc 1 5156 14 is_stmt 0 view .LVU3711
 10824 0022 239B     		ldr	r3, [sp, #140]
 10825 0024 1793     		str	r3, [sp, #92]
5157:DRIVER/FatFs/source/ff.c **** 		res = follow_path(&djo, path_old);			/* Check old object */
 10826              		.loc 1 5157 18 is_stmt 1 view .LVU3712
5158:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK && (djo.fn[NSFLAG] & (NS_DOT | NS_NONAME))) res = FR_INVALID_NAME;	/* Check vali
 10827              		.loc 1 5158 3 view .LVU3713
5158:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK && (djo.fn[NSFLAG] & (NS_DOT | NS_NONAME))) res = FR_INVALID_NAME;	/* Check vali
 10828              		.loc 1 5158 9 is_stmt 0 view .LVU3714
 10829 0026 0199     		ldr	r1, [sp, #4]
 10830 0028 17A8     		add	r0, sp, #92
 10831              	.LVL1280:
5158:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK && (djo.fn[NSFLAG] & (NS_DOT | NS_NONAME))) res = FR_INVALID_NAME;	/* Check vali
 10832              		.loc 1 5158 9 view .LVU3715
 10833 002a FFF7FEFF 		bl	follow_path
 10834              	.LVL1281:
5159:DRIVER/FatFs/source/ff.c **** #if FF_FS_LOCK
 10835              		.loc 1 5159 3 is_stmt 1 view .LVU3716
5159:DRIVER/FatFs/source/ff.c **** #if FF_FS_LOCK
 10836              		.loc 1 5159 6 is_stmt 0 view .LVU3717
 10837 002e 0446     		mov	r4, r0
 10838 0030 0028     		cmp	r0, #0
 10839 0032 F3D1     		bne	.L789
5159:DRIVER/FatFs/source/ff.c **** #if FF_FS_LOCK
 10840              		.loc 1 5159 30 discriminator 1 view .LVU3718
 10841 0034 9DF88730 		ldrb	r3, [sp, #135]	@ zero_extendqisi2
5159:DRIVER/FatFs/source/ff.c **** #if FF_FS_LOCK
 10842              		.loc 1 5159 20 discriminator 1 view .LVU3719
 10843 0038 13F0A00F 		tst	r3, #160
 10844 003c 01D0     		beq	.L799
 10845              	.LVL1282:
5159:DRIVER/FatFs/source/ff.c **** #if FF_FS_LOCK
 10846              		.loc 1 5159 68 view .LVU3720
 10847 003e 0624     		movs	r4, #6
 10848 0040 ECE7     		b	.L789
 10849              	.LVL1283:
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 351


 10850              	.L799:
5165:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
 10851              		.loc 1 5165 3 is_stmt 1 view .LVU3721
5193:DRIVER/FatFs/source/ff.c **** 				memcpy(&djn, &djo, sizeof (DIR));		/* Duplicate the directory object */
 10852              		.loc 1 5193 5 view .LVU3722
5193:DRIVER/FatFs/source/ff.c **** 				memcpy(&djn, &djo, sizeof (DIR));		/* Duplicate the directory object */
 10853              		.loc 1 5193 20 is_stmt 0 view .LVU3723
 10854 0042 1E9D     		ldr	r5, [sp, #120]
5193:DRIVER/FatFs/source/ff.c **** 				memcpy(&djn, &djo, sizeof (DIR));		/* Duplicate the directory object */
 10855              		.loc 1 5193 5 view .LVU3724
 10856 0044 03AC     		add	r4, sp, #12
 10857 0046 2868     		ldr	r0, [r5]	@ unaligned
 10858              	.LVL1284:
5193:DRIVER/FatFs/source/ff.c **** 				memcpy(&djn, &djo, sizeof (DIR));		/* Duplicate the directory object */
 10859              		.loc 1 5193 5 view .LVU3725
 10860 0048 6968     		ldr	r1, [r5, #4]	@ unaligned
 10861 004a AA68     		ldr	r2, [r5, #8]	@ unaligned
 10862 004c EB68     		ldr	r3, [r5, #12]	@ unaligned
 10863 004e 0FC4     		stmia	r4!, {r0, r1, r2, r3}
 10864 0050 2869     		ldr	r0, [r5, #16]	@ unaligned
 10865 0052 6969     		ldr	r1, [r5, #20]	@ unaligned
 10866 0054 AA69     		ldr	r2, [r5, #24]	@ unaligned
 10867 0056 EB69     		ldr	r3, [r5, #28]	@ unaligned
 10868 0058 0FC4     		stmia	r4!, {r0, r1, r2, r3}
5194:DRIVER/FatFs/source/ff.c **** 				res = follow_path(&djn, path_new);		/* Make sure if new object name is not in use */
 10869              		.loc 1 5194 5 is_stmt 1 view .LVU3726
 10870 005a 0DF15C0C 		add	ip, sp, #92
 10871 005e BCE80F00 		ldmia	ip!, {r0, r1, r2, r3}
 10872 0062 0FC4     		stmia	r4!, {r0, r1, r2, r3}
 10873 0064 BCE80F00 		ldmia	ip!, {r0, r1, r2, r3}
 10874 0068 0FC4     		stmia	r4!, {r0, r1, r2, r3}
 10875 006a 9CE80F00 		ldm	ip, {r0, r1, r2, r3}
 10876 006e 84E80F00 		stm	r4, {r0, r1, r2, r3}
5195:DRIVER/FatFs/source/ff.c **** 				if (res == FR_OK) {						/* Is new name already in use by any other object? */
 10877              		.loc 1 5195 5 view .LVU3727
5195:DRIVER/FatFs/source/ff.c **** 				if (res == FR_OK) {						/* Is new name already in use by any other object? */
 10878              		.loc 1 5195 11 is_stmt 0 view .LVU3728
 10879 0072 0099     		ldr	r1, [sp]
 10880 0074 0BA8     		add	r0, sp, #44
 10881 0076 FFF7FEFF 		bl	follow_path
 10882              	.LVL1285:
5196:DRIVER/FatFs/source/ff.c **** 					res = (djn.obj.sclust == djo.obj.sclust && djn.dptr == djo.dptr) ? FR_NO_FILE : FR_EXIST;
 10883              		.loc 1 5196 5 is_stmt 1 view .LVU3729
5196:DRIVER/FatFs/source/ff.c **** 					res = (djn.obj.sclust == djo.obj.sclust && djn.dptr == djo.dptr) ? FR_NO_FILE : FR_EXIST;
 10884              		.loc 1 5196 8 is_stmt 0 view .LVU3730
 10885 007a 0446     		mov	r4, r0
 10886 007c 58B9     		cbnz	r0, .L790
5197:DRIVER/FatFs/source/ff.c **** 				}
 10887              		.loc 1 5197 6 is_stmt 1 view .LVU3731
5197:DRIVER/FatFs/source/ff.c **** 				}
 10888              		.loc 1 5197 84 is_stmt 0 view .LVU3732
 10889 007e 0D9A     		ldr	r2, [sp, #52]
 10890 0080 199B     		ldr	r3, [sp, #100]
 10891 0082 9A42     		cmp	r2, r3
 10892 0084 01D0     		beq	.L800
 10893              	.LVL1286:
5197:DRIVER/FatFs/source/ff.c **** 				}
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 352


 10894              		.loc 1 5197 84 view .LVU3733
 10895 0086 0824     		movs	r4, #8
 10896 0088 07E0     		b	.L791
 10897              	.LVL1287:
 10898              	.L800:
5197:DRIVER/FatFs/source/ff.c **** 				}
 10899              		.loc 1 5197 46 discriminator 1 view .LVU3734
 10900 008a 0F9A     		ldr	r2, [sp, #60]
 10901 008c 1B9B     		ldr	r3, [sp, #108]
 10902 008e 9A42     		cmp	r2, r3
 10903 0090 10D0     		beq	.L792
 10904              	.LVL1288:
5197:DRIVER/FatFs/source/ff.c **** 				}
 10905              		.loc 1 5197 84 view .LVU3735
 10906 0092 0824     		movs	r4, #8
 10907 0094 01E0     		b	.L791
 10908              	.LVL1289:
 10909              	.L790:
5199:DRIVER/FatFs/source/ff.c **** 					res = dir_register(&djn);			/* Register the new entry */
 10910              		.loc 1 5199 5 is_stmt 1 view .LVU3736
5199:DRIVER/FatFs/source/ff.c **** 					res = dir_register(&djn);			/* Register the new entry */
 10911              		.loc 1 5199 8 is_stmt 0 view .LVU3737
 10912 0096 0428     		cmp	r0, #4
 10913 0098 0CD0     		beq	.L792
 10914              	.LVL1290:
 10915              	.L791:
5224:DRIVER/FatFs/source/ff.c **** 				res = dir_remove(&djo);		/* Remove old entry */
 10916              		.loc 1 5224 4 is_stmt 1 view .LVU3738
5224:DRIVER/FatFs/source/ff.c **** 				res = dir_remove(&djo);		/* Remove old entry */
 10917              		.loc 1 5224 7 is_stmt 0 view .LVU3739
 10918 009a 002C     		cmp	r4, #0
 10919 009c BED1     		bne	.L789
5225:DRIVER/FatFs/source/ff.c **** 				if (res == FR_OK) {
 10920              		.loc 1 5225 5 is_stmt 1 view .LVU3740
5225:DRIVER/FatFs/source/ff.c **** 				if (res == FR_OK) {
 10921              		.loc 1 5225 11 is_stmt 0 view .LVU3741
 10922 009e 17A8     		add	r0, sp, #92
 10923 00a0 FFF7FEFF 		bl	dir_remove
 10924              	.LVL1291:
5226:DRIVER/FatFs/source/ff.c **** 					res = sync_fs(fs);
 10925              		.loc 1 5226 5 is_stmt 1 view .LVU3742
5226:DRIVER/FatFs/source/ff.c **** 					res = sync_fs(fs);
 10926              		.loc 1 5226 8 is_stmt 0 view .LVU3743
 10927 00a4 0446     		mov	r4, r0
 10928 00a6 0028     		cmp	r0, #0
 10929 00a8 B8D1     		bne	.L789
5227:DRIVER/FatFs/source/ff.c **** 				}
 10930              		.loc 1 5227 6 is_stmt 1 view .LVU3744
5227:DRIVER/FatFs/source/ff.c **** 				}
 10931              		.loc 1 5227 12 is_stmt 0 view .LVU3745
 10932 00aa 2398     		ldr	r0, [sp, #140]
 10933              	.LVL1292:
5227:DRIVER/FatFs/source/ff.c **** 				}
 10934              		.loc 1 5227 12 view .LVU3746
 10935 00ac FFF7FEFF 		bl	sync_fs
 10936              	.LVL1293:
 10937 00b0 0446     		mov	r4, r0
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 353


 10938              	.LVL1294:
5227:DRIVER/FatFs/source/ff.c **** 				}
 10939              		.loc 1 5227 12 view .LVU3747
 10940 00b2 B3E7     		b	.L789
 10941              	.LVL1295:
 10942              	.L792:
5200:DRIVER/FatFs/source/ff.c **** 					if (res == FR_OK) {
 10943              		.loc 1 5200 6 is_stmt 1 view .LVU3748
5200:DRIVER/FatFs/source/ff.c **** 					if (res == FR_OK) {
 10944              		.loc 1 5200 12 is_stmt 0 view .LVU3749
 10945 00b4 0BA8     		add	r0, sp, #44
 10946 00b6 FFF7FEFF 		bl	dir_register
 10947              	.LVL1296:
5201:DRIVER/FatFs/source/ff.c **** 						dir = djn.dir;					/* Copy directory entry of the object except name */
 10948              		.loc 1 5201 6 is_stmt 1 view .LVU3750
5201:DRIVER/FatFs/source/ff.c **** 						dir = djn.dir;					/* Copy directory entry of the object except name */
 10949              		.loc 1 5201 9 is_stmt 0 view .LVU3751
 10950 00ba 0446     		mov	r4, r0
 10951 00bc 0028     		cmp	r0, #0
 10952 00be ADD1     		bne	.L789
5202:DRIVER/FatFs/source/ff.c **** 						memcpy(dir + 13, buf + 13, SZDIRE - 13);
 10953              		.loc 1 5202 7 is_stmt 1 view .LVU3752
5202:DRIVER/FatFs/source/ff.c **** 						memcpy(dir + 13, buf + 13, SZDIRE - 13);
 10954              		.loc 1 5202 11 is_stmt 0 view .LVU3753
 10955 00c0 1299     		ldr	r1, [sp, #72]
 10956              	.LVL1297:
5203:DRIVER/FatFs/source/ff.c **** 						dir[DIR_Attr] = buf[DIR_Attr];
 10957              		.loc 1 5203 7 is_stmt 1 view .LVU3754
 10958 00c2 DDF81950 		ldr	r5, [sp, #25]	@ unaligned
 10959 00c6 DDF81D00 		ldr	r0, [sp, #29]	@ unaligned
 10960              	.LVL1298:
5203:DRIVER/FatFs/source/ff.c **** 						dir[DIR_Attr] = buf[DIR_Attr];
 10961              		.loc 1 5203 7 is_stmt 0 view .LVU3755
 10962 00ca DDF82120 		ldr	r2, [sp, #33]	@ unaligned
 10963 00ce DDF82530 		ldr	r3, [sp, #37]	@ unaligned
 10964 00d2 C1F80D50 		str	r5, [r1, #13]	@ unaligned
 10965 00d6 C1F81100 		str	r0, [r1, #17]	@ unaligned
 10966 00da C1F81520 		str	r2, [r1, #21]	@ unaligned
 10967 00de C1F81930 		str	r3, [r1, #25]	@ unaligned
 10968 00e2 BDF82920 		ldrh	r2, [sp, #41]	@ unaligned
 10969 00e6 9DF82B30 		ldrb	r3, [sp, #43]	@ zero_extendqisi2
 10970 00ea A1F81D20 		strh	r2, [r1, #29]	@ unaligned
 10971 00ee CB77     		strb	r3, [r1, #31]
5204:DRIVER/FatFs/source/ff.c **** 						if (!(dir[DIR_Attr] & AM_DIR)) dir[DIR_Attr] |= AM_ARC;	/* Set archive attribute if it is a f
 10972              		.loc 1 5204 7 is_stmt 1 view .LVU3756
5204:DRIVER/FatFs/source/ff.c **** 						if (!(dir[DIR_Attr] & AM_DIR)) dir[DIR_Attr] |= AM_ARC;	/* Set archive attribute if it is a f
 10973              		.loc 1 5204 26 is_stmt 0 view .LVU3757
 10974 00f0 9DF81730 		ldrb	r3, [sp, #23]	@ zero_extendqisi2
5204:DRIVER/FatFs/source/ff.c **** 						if (!(dir[DIR_Attr] & AM_DIR)) dir[DIR_Attr] |= AM_ARC;	/* Set archive attribute if it is a f
 10975              		.loc 1 5204 21 view .LVU3758
 10976 00f4 CB72     		strb	r3, [r1, #11]
5205:DRIVER/FatFs/source/ff.c **** 						fs->wflag = 1;
 10977              		.loc 1 5205 7 is_stmt 1 view .LVU3759
5205:DRIVER/FatFs/source/ff.c **** 						fs->wflag = 1;
 10978              		.loc 1 5205 10 is_stmt 0 view .LVU3760
 10979 00f6 13F0100F 		tst	r3, #16
 10980 00fa 02D1     		bne	.L793
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 354


5205:DRIVER/FatFs/source/ff.c **** 						fs->wflag = 1;
 10981              		.loc 1 5205 38 is_stmt 1 discriminator 1 view .LVU3761
5205:DRIVER/FatFs/source/ff.c **** 						fs->wflag = 1;
 10982              		.loc 1 5205 52 is_stmt 0 discriminator 1 view .LVU3762
 10983 00fc 43F02003 		orr	r3, r3, #32
 10984 0100 CB72     		strb	r3, [r1, #11]
 10985              	.L793:
5206:DRIVER/FatFs/source/ff.c **** 						if ((dir[DIR_Attr] & AM_DIR) && djo.obj.sclust != djn.obj.sclust) {	/* Update .. entry in the
 10986              		.loc 1 5206 7 is_stmt 1 view .LVU3763
5206:DRIVER/FatFs/source/ff.c **** 						if ((dir[DIR_Attr] & AM_DIR) && djo.obj.sclust != djn.obj.sclust) {	/* Update .. entry in the
 10987              		.loc 1 5206 9 is_stmt 0 view .LVU3764
 10988 0102 239D     		ldr	r5, [sp, #140]
5206:DRIVER/FatFs/source/ff.c **** 						if ((dir[DIR_Attr] & AM_DIR) && djo.obj.sclust != djn.obj.sclust) {	/* Update .. entry in the
 10989              		.loc 1 5206 17 view .LVU3765
 10990 0104 0123     		movs	r3, #1
 10991 0106 2B71     		strb	r3, [r5, #4]
5207:DRIVER/FatFs/source/ff.c **** 							sect = clst2sect(fs, ld_clust(fs, dir));
 10992              		.loc 1 5207 7 is_stmt 1 view .LVU3766
5207:DRIVER/FatFs/source/ff.c **** 							sect = clst2sect(fs, ld_clust(fs, dir));
 10993              		.loc 1 5207 15 is_stmt 0 view .LVU3767
 10994 0108 CB7A     		ldrb	r3, [r1, #11]	@ zero_extendqisi2
5207:DRIVER/FatFs/source/ff.c **** 							sect = clst2sect(fs, ld_clust(fs, dir));
 10995              		.loc 1 5207 10 view .LVU3768
 10996 010a 13F0100F 		tst	r3, #16
 10997 010e C4D0     		beq	.L791
5207:DRIVER/FatFs/source/ff.c **** 							sect = clst2sect(fs, ld_clust(fs, dir));
 10998              		.loc 1 5207 36 discriminator 1 view .LVU3769
 10999 0110 199A     		ldr	r2, [sp, #100]
 11000 0112 0D9B     		ldr	r3, [sp, #52]
 11001 0114 9A42     		cmp	r2, r3
 11002 0116 C0D0     		beq	.L791
5208:DRIVER/FatFs/source/ff.c **** 							if (sect == 0) {
 11003              		.loc 1 5208 8 is_stmt 1 view .LVU3770
5208:DRIVER/FatFs/source/ff.c **** 							if (sect == 0) {
 11004              		.loc 1 5208 15 is_stmt 0 view .LVU3771
 11005 0118 2846     		mov	r0, r5
 11006 011a FFF7FEFF 		bl	ld_clust
 11007              	.LVL1299:
5208:DRIVER/FatFs/source/ff.c **** 							if (sect == 0) {
 11008              		.loc 1 5208 15 view .LVU3772
 11009 011e 0146     		mov	r1, r0
 11010 0120 2846     		mov	r0, r5
 11011 0122 FFF7FEFF 		bl	clst2sect
 11012              	.LVL1300:
5209:DRIVER/FatFs/source/ff.c **** 								res = FR_INT_ERR;
 11013              		.loc 1 5209 8 is_stmt 1 view .LVU3773
5209:DRIVER/FatFs/source/ff.c **** 								res = FR_INT_ERR;
 11014              		.loc 1 5209 11 is_stmt 0 view .LVU3774
 11015 0126 0146     		mov	r1, r0
 11016 0128 08B9     		cbnz	r0, .L801
 11017              	.LVL1301:
5210:DRIVER/FatFs/source/ff.c **** 							} else {
 11018              		.loc 1 5210 13 view .LVU3775
 11019 012a 0224     		movs	r4, #2
 11020 012c 76E7     		b	.L789
 11021              	.LVL1302:
 11022              	.L801:
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 355


5213:DRIVER/FatFs/source/ff.c **** 								dir = fs->win + SZDIRE * 1;	/* Ptr to .. entry */
 11023              		.loc 1 5213 9 is_stmt 1 view .LVU3776
5213:DRIVER/FatFs/source/ff.c **** 								dir = fs->win + SZDIRE * 1;	/* Ptr to .. entry */
 11024              		.loc 1 5213 15 is_stmt 0 view .LVU3777
 11025 012e 2846     		mov	r0, r5
 11026              	.LVL1303:
5213:DRIVER/FatFs/source/ff.c **** 								dir = fs->win + SZDIRE * 1;	/* Ptr to .. entry */
 11027              		.loc 1 5213 15 view .LVU3778
 11028 0130 FFF7FEFF 		bl	move_window
 11029              	.LVL1304:
5214:DRIVER/FatFs/source/ff.c **** 								if (res == FR_OK && dir[1] == '.') {
 11030              		.loc 1 5214 9 is_stmt 1 view .LVU3779
5214:DRIVER/FatFs/source/ff.c **** 								if (res == FR_OK && dir[1] == '.') {
 11031              		.loc 1 5214 17 is_stmt 0 view .LVU3780
 11032 0134 239B     		ldr	r3, [sp, #140]
5214:DRIVER/FatFs/source/ff.c **** 								if (res == FR_OK && dir[1] == '.') {
 11033              		.loc 1 5214 13 view .LVU3781
 11034 0136 03F15801 		add	r1, r3, #88
 11035              	.LVL1305:
5215:DRIVER/FatFs/source/ff.c **** 									st_clust(fs, dir, djn.obj.sclust);
 11036              		.loc 1 5215 9 is_stmt 1 view .LVU3782
5215:DRIVER/FatFs/source/ff.c **** 									st_clust(fs, dir, djn.obj.sclust);
 11037              		.loc 1 5215 12 is_stmt 0 view .LVU3783
 11038 013a 0446     		mov	r4, r0
 11039 013c 0028     		cmp	r0, #0
 11040 013e 7FF46DAF 		bne	.L789
5215:DRIVER/FatFs/source/ff.c **** 									st_clust(fs, dir, djn.obj.sclust);
 11041              		.loc 1 5215 32 discriminator 1 view .LVU3784
 11042 0142 93F85920 		ldrb	r2, [r3, #89]	@ zero_extendqisi2
5215:DRIVER/FatFs/source/ff.c **** 									st_clust(fs, dir, djn.obj.sclust);
 11043              		.loc 1 5215 26 discriminator 1 view .LVU3785
 11044 0146 2E2A     		cmp	r2, #46
 11045 0148 A7D1     		bne	.L791
5216:DRIVER/FatFs/source/ff.c **** 									fs->wflag = 1;
 11046              		.loc 1 5216 10 is_stmt 1 view .LVU3786
 11047 014a 0D9A     		ldr	r2, [sp, #52]
 11048 014c 1846     		mov	r0, r3
 11049              	.LVL1306:
5216:DRIVER/FatFs/source/ff.c **** 									fs->wflag = 1;
 11050              		.loc 1 5216 10 is_stmt 0 view .LVU3787
 11051 014e FFF7FEFF 		bl	st_clust
 11052              	.LVL1307:
5217:DRIVER/FatFs/source/ff.c **** 								}
 11053              		.loc 1 5217 10 is_stmt 1 view .LVU3788
5217:DRIVER/FatFs/source/ff.c **** 								}
 11054              		.loc 1 5217 20 is_stmt 0 view .LVU3789
 11055 0152 239B     		ldr	r3, [sp, #140]
 11056 0154 0122     		movs	r2, #1
 11057 0156 1A71     		strb	r2, [r3, #4]
 11058 0158 9FE7     		b	.L791
 11059              		.cfi_endproc
 11060              	.LFE54:
 11062              		.section	.rodata.f_mkfs.str1.4,"aMS",%progbits,1
 11063              		.align	2
 11064              	.LC3:
 11065 0000 EBFE904D 		.ascii	"\353\376\220MSDOS5.0\000"
 11065      53444F53 
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 356


 11065      352E3000 
 11066              		.align	2
 11067              	.LC4:
 11068 000c 4E4F204E 		.ascii	"NO NAME    FAT32   \000"
 11068      414D4520 
 11068      20202046 
 11068      41543332 
 11068      20202000 
 11069              		.align	2
 11070              	.LC5:
 11071 0020 4E4F204E 		.ascii	"NO NAME    FAT     \000"
 11071      414D4520 
 11071      20202046 
 11071      41542020 
 11071      20202000 
 11072              		.section	.text.f_mkfs,"ax",%progbits
 11073              		.align	1
 11074              		.global	f_mkfs
 11075              		.syntax unified
 11076              		.thumb
 11077              		.thumb_func
 11079              	f_mkfs:
 11080              	.LVL1308:
 11081              	.LFB56:
5879:DRIVER/FatFs/source/ff.c **** 
5880:DRIVER/FatFs/source/ff.c **** 
5881:DRIVER/FatFs/source/ff.c **** 
5882:DRIVER/FatFs/source/ff.c **** FRESULT f_mkfs (
5883:DRIVER/FatFs/source/ff.c **** 	const TCHAR* path,		/* Logical drive number */
5884:DRIVER/FatFs/source/ff.c **** 	const MKFS_PARM* opt,	/* Format options */
5885:DRIVER/FatFs/source/ff.c **** 	void* work,				/* Pointer to working buffer (null: use len bytes of heap memory) */
5886:DRIVER/FatFs/source/ff.c **** 	UINT len				/* Size of working buffer [byte] */
5887:DRIVER/FatFs/source/ff.c **** )
5888:DRIVER/FatFs/source/ff.c **** {
 11082              		.loc 1 5888 1 is_stmt 1 view -0
 11083              		.cfi_startproc
 11084              		@ args = 0, pretend = 0, frame = 64
 11085              		@ frame_needed = 0, uses_anonymous_args = 0
 11086              		.loc 1 5888 1 is_stmt 0 view .LVU3791
 11087 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 11088              	.LCFI111:
 11089              		.cfi_def_cfa_offset 36
 11090              		.cfi_offset 4, -36
 11091              		.cfi_offset 5, -32
 11092              		.cfi_offset 6, -28
 11093              		.cfi_offset 7, -24
 11094              		.cfi_offset 8, -20
 11095              		.cfi_offset 9, -16
 11096              		.cfi_offset 10, -12
 11097              		.cfi_offset 11, -8
 11098              		.cfi_offset 14, -4
 11099 0004 91B0     		sub	sp, sp, #68
 11100              	.LCFI112:
 11101              		.cfi_def_cfa_offset 104
 11102 0006 0990     		str	r0, [sp, #36]
 11103 0008 0E46     		mov	r6, r1
 11104 000a 0192     		str	r2, [sp, #4]
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 357


 11105 000c 1F46     		mov	r7, r3
5889:DRIVER/FatFs/source/ff.c **** 	static const WORD cst[] = {1, 4, 16, 64, 256, 512, 0};	/* Cluster size boundary for FAT volume (4K
 11106              		.loc 1 5889 2 is_stmt 1 view .LVU3792
5890:DRIVER/FatFs/source/ff.c **** 	static const WORD cst32[] = {1, 2, 4, 8, 16, 32, 0};	/* Cluster size boundary for FAT32 volume (12
 11107              		.loc 1 5890 2 view .LVU3793
5891:DRIVER/FatFs/source/ff.c **** 	static const MKFS_PARM defopt = {FM_ANY, 0, 0, 0, 0};	/* Default parameter */
 11108              		.loc 1 5891 2 view .LVU3794
5892:DRIVER/FatFs/source/ff.c **** 	BYTE fsopt, fsty, sys, pdrv, ipart;
 11109              		.loc 1 5892 2 view .LVU3795
5893:DRIVER/FatFs/source/ff.c **** 	BYTE *buf;
 11110              		.loc 1 5893 2 view .LVU3796
5894:DRIVER/FatFs/source/ff.c **** 	BYTE *pte;
 11111              		.loc 1 5894 2 view .LVU3797
5895:DRIVER/FatFs/source/ff.c **** 	WORD ss;	/* Sector size */
 11112              		.loc 1 5895 2 view .LVU3798
5896:DRIVER/FatFs/source/ff.c **** 	DWORD sz_buf, sz_blk, n_clst, pau, nsect, n, vsn;
 11113              		.loc 1 5896 2 view .LVU3799
5897:DRIVER/FatFs/source/ff.c **** 	LBA_t sz_vol, b_vol, b_fat, b_data;		/* Size of volume, Base LBA of volume, fat, data */
 11114              		.loc 1 5897 2 view .LVU3800
5898:DRIVER/FatFs/source/ff.c **** 	LBA_t sect, lba[2];
 11115              		.loc 1 5898 2 view .LVU3801
5899:DRIVER/FatFs/source/ff.c **** 	DWORD sz_rsv, sz_fat, sz_dir, sz_au;	/* Size of reserved, fat, dir, data, cluster */
 11116              		.loc 1 5899 2 view .LVU3802
5900:DRIVER/FatFs/source/ff.c **** 	UINT n_fat, n_root, i;					/* Index, Number of FATs and Number of roor dir entries */
 11117              		.loc 1 5900 2 view .LVU3803
5901:DRIVER/FatFs/source/ff.c **** 	int vol;
 11118              		.loc 1 5901 2 view .LVU3804
5902:DRIVER/FatFs/source/ff.c **** 	DSTATUS ds;
 11119              		.loc 1 5902 2 view .LVU3805
5903:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
 11120              		.loc 1 5903 2 view .LVU3806
5904:DRIVER/FatFs/source/ff.c **** 
5905:DRIVER/FatFs/source/ff.c **** 
5906:DRIVER/FatFs/source/ff.c **** 	/* Check mounted drive and clear work area */
5907:DRIVER/FatFs/source/ff.c **** 	vol = get_ldnumber(&path);					/* Get target logical drive */
 11121              		.loc 1 5907 2 view .LVU3807
 11122              		.loc 1 5907 8 is_stmt 0 view .LVU3808
 11123 000e 09A8     		add	r0, sp, #36
 11124              	.LVL1309:
 11125              		.loc 1 5907 8 view .LVU3809
 11126 0010 FFF7FEFF 		bl	get_ldnumber
 11127              	.LVL1310:
5908:DRIVER/FatFs/source/ff.c **** 	if (vol < 0) return FR_INVALID_DRIVE;
 11128              		.loc 1 5908 2 is_stmt 1 view .LVU3810
 11129              		.loc 1 5908 5 is_stmt 0 view .LVU3811
 11130 0014 0028     		cmp	r0, #0
 11131              		.loc 1 5908 5 view .LVU3812
 11132 0016 C0F20483 		blt	.L852
5909:DRIVER/FatFs/source/ff.c **** 	if (FatFs[vol]) FatFs[vol]->fs_type = 0;	/* Clear the fs object if mounted */
 11133              		.loc 1 5909 2 is_stmt 1 view .LVU3813
 11134              		.loc 1 5909 11 is_stmt 0 view .LVU3814
 11135 001a B54B     		ldr	r3, .L909
 11136 001c 53F82030 		ldr	r3, [r3, r0, lsl #2]
 11137              		.loc 1 5909 5 view .LVU3815
 11138 0020 0BB1     		cbz	r3, .L804
 11139              		.loc 1 5909 18 is_stmt 1 discriminator 1 view .LVU3816
 11140              		.loc 1 5909 38 is_stmt 0 discriminator 1 view .LVU3817
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 358


 11141 0022 0022     		movs	r2, #0
 11142 0024 1A70     		strb	r2, [r3]
 11143              	.L804:
5910:DRIVER/FatFs/source/ff.c **** 	pdrv = LD2PD(vol);		/* Hosting physical drive */
 11144              		.loc 1 5910 2 is_stmt 1 view .LVU3818
 11145              		.loc 1 5910 7 is_stmt 0 view .LVU3819
 11146 0026 C4B2     		uxtb	r4, r0
 11147              	.LVL1311:
5911:DRIVER/FatFs/source/ff.c **** 	ipart = LD2PT(vol);		/* Hosting partition (0:create as new, 1..:existing partition) */
 11148              		.loc 1 5911 2 is_stmt 1 view .LVU3820
5912:DRIVER/FatFs/source/ff.c **** 
5913:DRIVER/FatFs/source/ff.c **** 	/* Initialize the hosting physical drive */
5914:DRIVER/FatFs/source/ff.c **** 	ds = disk_initialize(pdrv);
 11149              		.loc 1 5914 2 view .LVU3821
 11150              		.loc 1 5914 7 is_stmt 0 view .LVU3822
 11151 0028 2046     		mov	r0, r4
 11152              	.LVL1312:
 11153              		.loc 1 5914 7 view .LVU3823
 11154 002a FFF7FEFF 		bl	disk_initialize
 11155              	.LVL1313:
5915:DRIVER/FatFs/source/ff.c **** 	if (ds & STA_NOINIT) return FR_NOT_READY;
 11156              		.loc 1 5915 2 is_stmt 1 view .LVU3824
 11157              		.loc 1 5915 5 is_stmt 0 view .LVU3825
 11158 002e 10F0010F 		tst	r0, #1
 11159 0032 40F0F882 		bne	.L853
5916:DRIVER/FatFs/source/ff.c **** 	if (ds & STA_PROTECT) return FR_WRITE_PROTECTED;
 11160              		.loc 1 5916 2 is_stmt 1 view .LVU3826
 11161              		.loc 1 5916 5 is_stmt 0 view .LVU3827
 11162 0036 10F0040F 		tst	r0, #4
 11163 003a 40F0F882 		bne	.L854
5917:DRIVER/FatFs/source/ff.c **** 
5918:DRIVER/FatFs/source/ff.c **** 	/* Get physical drive parameters (sz_drv, sz_blk and ss) */
5919:DRIVER/FatFs/source/ff.c **** 	if (!opt) opt = &defopt;	/* Use default parameter if it is not given */
 11164              		.loc 1 5919 2 is_stmt 1 view .LVU3828
 11165              		.loc 1 5919 5 is_stmt 0 view .LVU3829
 11166 003e 002E     		cmp	r6, #0
 11167 0040 3AD0     		beq	.L894
 11168              	.LVL1314:
 11169              	.L805:
5920:DRIVER/FatFs/source/ff.c **** 	sz_blk = opt->align;
 11170              		.loc 1 5920 2 is_stmt 1 view .LVU3830
 11171              		.loc 1 5920 14 is_stmt 0 view .LVU3831
 11172 0042 7368     		ldr	r3, [r6, #4]
 11173              		.loc 1 5920 9 view .LVU3832
 11174 0044 0E93     		str	r3, [sp, #56]
5921:DRIVER/FatFs/source/ff.c **** 	if (sz_blk == 0) disk_ioctl(pdrv, GET_BLOCK_SIZE, &sz_blk);					/* Block size from the paramter or
 11175              		.loc 1 5921 2 is_stmt 1 view .LVU3833
 11176              		.loc 1 5921 5 is_stmt 0 view .LVU3834
 11177 0046 002B     		cmp	r3, #0
 11178 0048 38D0     		beq	.L895
 11179              	.LVL1315:
 11180              	.L806:
5922:DRIVER/FatFs/source/ff.c ****  	if (sz_blk == 0 || sz_blk > 0x8000 || (sz_blk & (sz_blk - 1))) sz_blk = 1;	/* Use default if the 
 11181              		.loc 1 5922 3 is_stmt 1 view .LVU3835
 11182              		.loc 1 5922 19 is_stmt 0 view .LVU3836
 11183 004a 0E9A     		ldr	r2, [sp, #56]
 11184 004c 531E     		subs	r3, r2, #1
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 359


 11185              		.loc 1 5922 6 view .LVU3837
 11186 004e B3F5004F 		cmp	r3, #32768
 11187 0052 01D2     		bcs	.L807
 11188              		.loc 1 5922 38 discriminator 2 view .LVU3838
 11189 0054 1A42     		tst	r2, r3
 11190 0056 01D0     		beq	.L808
 11191              	.L807:
 11192              		.loc 1 5922 66 is_stmt 1 discriminator 3 view .LVU3839
 11193              		.loc 1 5922 73 is_stmt 0 discriminator 3 view .LVU3840
 11194 0058 0123     		movs	r3, #1
 11195 005a 0E93     		str	r3, [sp, #56]
 11196              	.L808:
5923:DRIVER/FatFs/source/ff.c **** #if FF_MAX_SS != FF_MIN_SS
5924:DRIVER/FatFs/source/ff.c **** 	if (disk_ioctl(pdrv, GET_SECTOR_SIZE, &ss) != RES_OK) return FR_DISK_ERR;
 11197              		.loc 1 5924 2 is_stmt 1 view .LVU3841
 11198              		.loc 1 5924 6 is_stmt 0 view .LVU3842
 11199 005c 0DF13E02 		add	r2, sp, #62
 11200 0060 0221     		movs	r1, #2
 11201 0062 2046     		mov	r0, r4
 11202 0064 FFF7FEFF 		bl	disk_ioctl
 11203              	.LVL1316:
 11204              		.loc 1 5924 5 view .LVU3843
 11205 0068 0028     		cmp	r0, #0
 11206 006a 40F0E282 		bne	.L856
5925:DRIVER/FatFs/source/ff.c **** 	if (ss > FF_MAX_SS || ss < FF_MIN_SS || (ss & (ss - 1))) return FR_DISK_ERR;
 11207              		.loc 1 5925 2 is_stmt 1 view .LVU3844
 11208              		.loc 1 5925 21 is_stmt 0 view .LVU3845
 11209 006e BDF83E30 		ldrh	r3, [sp, #62]
 11210 0072 A3F50072 		sub	r2, r3, #512
 11211 0076 92B2     		uxth	r2, r2
 11212              		.loc 1 5925 5 view .LVU3846
 11213 0078 B2F5606F 		cmp	r2, #3584
 11214 007c 00F2DB82 		bhi	.L857
 11215              		.loc 1 5925 52 discriminator 2 view .LVU3847
 11216 0080 5A1E     		subs	r2, r3, #1
 11217              		.loc 1 5925 39 discriminator 2 view .LVU3848
 11218 0082 1342     		tst	r3, r2
 11219 0084 40F0D982 		bne	.L858
5926:DRIVER/FatFs/source/ff.c **** #else
5927:DRIVER/FatFs/source/ff.c **** 	ss = FF_MAX_SS;
5928:DRIVER/FatFs/source/ff.c **** #endif
5929:DRIVER/FatFs/source/ff.c **** 
5930:DRIVER/FatFs/source/ff.c **** 	/* Options for FAT sub-type and FAT parameters */
5931:DRIVER/FatFs/source/ff.c **** 	fsopt = opt->fmt & (FM_ANY | FM_SFD);
 11220              		.loc 1 5931 2 is_stmt 1 view .LVU3849
 11221              		.loc 1 5931 13 is_stmt 0 view .LVU3850
 11222 0088 3578     		ldrb	r5, [r6]	@ zero_extendqisi2
 11223              	.LVL1317:
5932:DRIVER/FatFs/source/ff.c **** 	n_fat = (opt->n_fat >= 1 && opt->n_fat <= 2) ? opt->n_fat : 1;
 11224              		.loc 1 5932 2 is_stmt 1 view .LVU3851
 11225              		.loc 1 5932 14 is_stmt 0 view .LVU3852
 11226 008a 7178     		ldrb	r1, [r6, #1]	@ zero_extendqisi2
 11227              		.loc 1 5932 27 view .LVU3853
 11228 008c 4A1E     		subs	r2, r1, #1
 11229 008e D2B2     		uxtb	r2, r2
 11230              		.loc 1 5932 60 view .LVU3854
 11231 0090 012A     		cmp	r2, #1
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 360


 11232 0092 19D9     		bls	.L896
 11233 0094 4FF0010B 		mov	fp, #1
 11234              	.L809:
 11235              	.LVL1318:
5933:DRIVER/FatFs/source/ff.c **** 	n_root = (opt->n_root >= 1 && opt->n_root <= 32768 && (opt->n_root % (ss / SZDIRE)) == 0) ? opt->n
 11236              		.loc 1 5933 2 is_stmt 1 discriminator 4 view .LVU3855
 11237              		.loc 1 5933 15 is_stmt 0 discriminator 4 view .LVU3856
 11238 0098 D6F80890 		ldr	r9, [r6, #8]
 11239              		.loc 1 5933 29 discriminator 4 view .LVU3857
 11240 009c 09F1FF32 		add	r2, r9, #-1
 11241              		.loc 1 5933 106 discriminator 4 view .LVU3858
 11242 00a0 B2F5004F 		cmp	r2, #32768
 11243 00a4 12D2     		bcs	.L860
 11244              		.loc 1 5933 75 discriminator 1 view .LVU3859
 11245 00a6 5909     		lsrs	r1, r3, #5
 11246              		.loc 1 5933 69 discriminator 1 view .LVU3860
 11247 00a8 B9FBF1F2 		udiv	r2, r9, r1
 11248 00ac 01FB1292 		mls	r2, r1, r2, r9
 11249              		.loc 1 5933 53 discriminator 1 view .LVU3861
 11250 00b0 72B1     		cbz	r2, .L810
 11251              		.loc 1 5933 106 view .LVU3862
 11252 00b2 4FF40079 		mov	r9, #512
 11253 00b6 0BE0     		b	.L810
 11254              	.LVL1319:
 11255              	.L894:
5919:DRIVER/FatFs/source/ff.c **** 	sz_blk = opt->align;
 11256              		.loc 1 5919 16 view .LVU3863
 11257 00b8 8E4E     		ldr	r6, .L909+4
 11258              	.LVL1320:
5919:DRIVER/FatFs/source/ff.c **** 	sz_blk = opt->align;
 11259              		.loc 1 5919 16 view .LVU3864
 11260 00ba C2E7     		b	.L805
 11261              	.LVL1321:
 11262              	.L895:
5921:DRIVER/FatFs/source/ff.c ****  	if (sz_blk == 0 || sz_blk > 0x8000 || (sz_blk & (sz_blk - 1))) sz_blk = 1;	/* Use default if the 
 11263              		.loc 1 5921 19 is_stmt 1 discriminator 1 view .LVU3865
 11264 00bc 0EAA     		add	r2, sp, #56
 11265 00be 0321     		movs	r1, #3
 11266 00c0 2046     		mov	r0, r4
 11267              	.LVL1322:
5921:DRIVER/FatFs/source/ff.c ****  	if (sz_blk == 0 || sz_blk > 0x8000 || (sz_blk & (sz_blk - 1))) sz_blk = 1;	/* Use default if the 
 11268              		.loc 1 5921 19 is_stmt 0 discriminator 1 view .LVU3866
 11269 00c2 FFF7FEFF 		bl	disk_ioctl
 11270              	.LVL1323:
 11271 00c6 C0E7     		b	.L806
 11272              	.LVL1324:
 11273              	.L896:
5932:DRIVER/FatFs/source/ff.c **** 	n_root = (opt->n_root >= 1 && opt->n_root <= 32768 && (opt->n_root % (ss / SZDIRE)) == 0) ? opt->n
 11274              		.loc 1 5932 60 discriminator 1 view .LVU3867
 11275 00c8 8B46     		mov	fp, r1
 11276 00ca E5E7     		b	.L809
 11277              	.LVL1325:
 11278              	.L860:
 11279              		.loc 1 5933 106 view .LVU3868
 11280 00cc 4FF40079 		mov	r9, #512
 11281              	.L810:
 11282              	.LVL1326:
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 361


5934:DRIVER/FatFs/source/ff.c **** 	sz_au = (opt->au_size <= 0x1000000 && (opt->au_size & (opt->au_size - 1)) == 0) ? opt->au_size : 0
 11283              		.loc 1 5934 2 is_stmt 1 discriminator 6 view .LVU3869
 11284              		.loc 1 5934 14 is_stmt 0 discriminator 6 view .LVU3870
 11285 00d0 F668     		ldr	r6, [r6, #12]
 11286              	.LVL1327:
 11287              		.loc 1 5934 97 discriminator 6 view .LVU3871
 11288 00d2 B6F1807F 		cmp	r6, #16777216
 11289 00d6 04D8     		bhi	.L861
 11290              		.loc 1 5934 70 discriminator 1 view .LVU3872
 11291 00d8 721E     		subs	r2, r6, #1
 11292              		.loc 1 5934 37 discriminator 1 view .LVU3873
 11293 00da 1642     		tst	r6, r2
 11294 00dc 02D0     		beq	.L811
 11295              		.loc 1 5934 97 view .LVU3874
 11296 00de 0026     		movs	r6, #0
 11297 00e0 00E0     		b	.L811
 11298              	.L861:
 11299 00e2 0026     		movs	r6, #0
 11300              	.L811:
 11301              	.LVL1328:
5935:DRIVER/FatFs/source/ff.c **** 	sz_au /= ss;	/* Byte --> Sector */
 11302              		.loc 1 5935 2 is_stmt 1 discriminator 6 view .LVU3875
 11303              		.loc 1 5935 8 is_stmt 0 discriminator 6 view .LVU3876
 11304 00e4 B6FBF3F6 		udiv	r6, r6, r3
 11305              	.LVL1329:
5936:DRIVER/FatFs/source/ff.c **** 
5937:DRIVER/FatFs/source/ff.c **** 	/* Get working buffer */
5938:DRIVER/FatFs/source/ff.c **** 	sz_buf = len / ss;		/* Size of working buffer [sector] */
 11306              		.loc 1 5938 2 is_stmt 1 discriminator 6 view .LVU3877
 11307              		.loc 1 5938 9 is_stmt 0 discriminator 6 view .LVU3878
 11308 00e8 B7FBF3F2 		udiv	r2, r7, r3
 11309 00ec 0392     		str	r2, [sp, #12]
 11310              	.LVL1330:
5939:DRIVER/FatFs/source/ff.c **** 	if (sz_buf == 0) return FR_NOT_ENOUGH_CORE;
 11311              		.loc 1 5939 2 is_stmt 1 discriminator 6 view .LVU3879
 11312              		.loc 1 5939 5 is_stmt 0 discriminator 6 view .LVU3880
 11313 00ee BB42     		cmp	r3, r7
 11314 00f0 00F2A582 		bhi	.L862
5940:DRIVER/FatFs/source/ff.c **** 	buf = (BYTE*)work;		/* Working buffer */
 11315              		.loc 1 5940 2 is_stmt 1 view .LVU3881
 11316              	.LVL1331:
5941:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN == 3
5942:DRIVER/FatFs/source/ff.c **** 	if (!buf) buf = ff_memalloc(sz_buf * ss);	/* Use heap memory for working buffer */
5943:DRIVER/FatFs/source/ff.c **** #endif
5944:DRIVER/FatFs/source/ff.c **** 	if (!buf) return FR_NOT_ENOUGH_CORE;
 11317              		.loc 1 5944 2 view .LVU3882
 11318              		.loc 1 5944 5 is_stmt 0 view .LVU3883
 11319 00f4 019B     		ldr	r3, [sp, #4]
 11320 00f6 002B     		cmp	r3, #0
 11321 00f8 00F0A382 		beq	.L863
5945:DRIVER/FatFs/source/ff.c **** 
5946:DRIVER/FatFs/source/ff.c **** 	/* Determine where the volume to be located (b_vol, sz_vol) */
5947:DRIVER/FatFs/source/ff.c **** 	b_vol = sz_vol = 0;
 11322              		.loc 1 5947 2 is_stmt 1 view .LVU3884
 11323              		.loc 1 5947 17 is_stmt 0 view .LVU3885
 11324 00fc 0023     		movs	r3, #0
 11325 00fe 0D93     		str	r3, [sp, #52]
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 362


 11326              	.LVL1332:
5948:DRIVER/FatFs/source/ff.c **** 	if (FF_MULTI_PARTITION && ipart != 0) {	/* Is the volume associated with any specific partition? *
 11327              		.loc 1 5948 2 is_stmt 1 view .LVU3886
5949:DRIVER/FatFs/source/ff.c **** 		/* Get partition location from the existing partition table */
5950:DRIVER/FatFs/source/ff.c **** 		if (disk_read(pdrv, buf, 0, 1) != RES_OK) LEAVE_MKFS(FR_DISK_ERR);	/* Load MBR */
5951:DRIVER/FatFs/source/ff.c **** 		if (ld_word(buf + BS_55AA) != 0xAA55) LEAVE_MKFS(FR_MKFS_ABORTED);	/* Check if MBR is valid */
5952:DRIVER/FatFs/source/ff.c **** #if FF_LBA64
5953:DRIVER/FatFs/source/ff.c **** 		if (buf[MBR_Table + PTE_System] == 0xEE) {	/* GPT protective MBR? */
5954:DRIVER/FatFs/source/ff.c **** 			DWORD n_ent, ofs;
5955:DRIVER/FatFs/source/ff.c **** 			QWORD pt_lba;
5956:DRIVER/FatFs/source/ff.c **** 
5957:DRIVER/FatFs/source/ff.c **** 			/* Get the partition location from GPT */
5958:DRIVER/FatFs/source/ff.c **** 			if (disk_read(pdrv, buf, 1, 1) != RES_OK) LEAVE_MKFS(FR_DISK_ERR);	/* Load GPT header sector (ne
5959:DRIVER/FatFs/source/ff.c **** 			if (!test_gpt_header(buf)) LEAVE_MKFS(FR_MKFS_ABORTED);	/* Check if GPT header is valid */
5960:DRIVER/FatFs/source/ff.c **** 			n_ent = ld_dword(buf + GPTH_PtNum);		/* Number of entries */
5961:DRIVER/FatFs/source/ff.c **** 			pt_lba = ld_qword(buf + GPTH_PtOfs);	/* Table start sector */
5962:DRIVER/FatFs/source/ff.c **** 			ofs = i = 0;
5963:DRIVER/FatFs/source/ff.c **** 			while (n_ent) {		/* Find MS Basic partition with order of ipart */
5964:DRIVER/FatFs/source/ff.c **** 				if (ofs == 0 && disk_read(pdrv, buf, pt_lba++, 1) != RES_OK) LEAVE_MKFS(FR_DISK_ERR);	/* Get PT
5965:DRIVER/FatFs/source/ff.c **** 				if (!memcmp(buf + ofs + GPTE_PtGuid, GUID_MS_Basic, 16) && ++i == ipart) {	/* MS basic data par
5966:DRIVER/FatFs/source/ff.c **** 					b_vol = ld_qword(buf + ofs + GPTE_FstLba);
5967:DRIVER/FatFs/source/ff.c **** 					sz_vol = ld_qword(buf + ofs + GPTE_LstLba) - b_vol + 1;
5968:DRIVER/FatFs/source/ff.c **** 					break;
5969:DRIVER/FatFs/source/ff.c **** 				}
5970:DRIVER/FatFs/source/ff.c **** 				n_ent--; ofs = (ofs + SZ_GPTE) % ss;	/* Next entry */
5971:DRIVER/FatFs/source/ff.c **** 			}
5972:DRIVER/FatFs/source/ff.c **** 			if (n_ent == 0) LEAVE_MKFS(FR_MKFS_ABORTED);	/* Partition not found */
5973:DRIVER/FatFs/source/ff.c **** 			fsopt |= 0x80;	/* Partitioning is in GPT */
5974:DRIVER/FatFs/source/ff.c **** 		} else
5975:DRIVER/FatFs/source/ff.c **** #endif
5976:DRIVER/FatFs/source/ff.c **** 		{	/* Get the partition location from MBR partition table */
5977:DRIVER/FatFs/source/ff.c **** 			pte = buf + (MBR_Table + (ipart - 1) * SZ_PTE);
5978:DRIVER/FatFs/source/ff.c **** 			if (ipart > 4 || pte[PTE_System] == 0) LEAVE_MKFS(FR_MKFS_ABORTED);	/* No partition? */
5979:DRIVER/FatFs/source/ff.c **** 			b_vol = ld_dword(pte + PTE_StLba);		/* Get volume start sector */
5980:DRIVER/FatFs/source/ff.c **** 			sz_vol = ld_dword(pte + PTE_SizLba);	/* Get volume size */
5981:DRIVER/FatFs/source/ff.c **** 		}
5982:DRIVER/FatFs/source/ff.c **** 	} else {	/* The volume is associated with a physical drive */
5983:DRIVER/FatFs/source/ff.c **** 		if (disk_ioctl(pdrv, GET_SECTOR_COUNT, &sz_vol) != RES_OK) LEAVE_MKFS(FR_DISK_ERR);
 11328              		.loc 1 5983 3 view .LVU3887
 11329              		.loc 1 5983 7 is_stmt 0 view .LVU3888
 11330 0100 0DAA     		add	r2, sp, #52
 11331              	.LVL1333:
 11332              		.loc 1 5983 7 view .LVU3889
 11333 0102 0121     		movs	r1, #1
 11334 0104 2046     		mov	r0, r4
 11335 0106 FFF7FEFF 		bl	disk_ioctl
 11336              	.LVL1334:
 11337              		.loc 1 5983 6 view .LVU3890
 11338 010a 0028     		cmp	r0, #0
 11339 010c 40F09B82 		bne	.L864
5984:DRIVER/FatFs/source/ff.c **** 		if (!(fsopt & FM_SFD)) {	/* To be partitioned? */
 11340              		.loc 1 5984 3 is_stmt 1 view .LVU3891
 11341              		.loc 1 5984 6 is_stmt 0 view .LVU3892
 11342 0110 15F00803 		ands	r3, r5, #8
 11343 0114 0593     		str	r3, [sp, #20]
 11344 0116 08D1     		bne	.L865
5985:DRIVER/FatFs/source/ff.c **** 			/* Create a single-partition on the drive in this function */
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 363


5986:DRIVER/FatFs/source/ff.c **** #if FF_LBA64
5987:DRIVER/FatFs/source/ff.c **** 			if (sz_vol >= FF_MIN_GPT) {	/* Which partition type to create, MBR or GPT? */
5988:DRIVER/FatFs/source/ff.c **** 				fsopt |= 0x80;		/* Partitioning is in GPT */
5989:DRIVER/FatFs/source/ff.c **** 				b_vol = GPT_ALIGN / ss; sz_vol -= b_vol + GPT_ITEMS * SZ_GPTE / ss + 1;	/* Estimated partition 
5990:DRIVER/FatFs/source/ff.c **** 			} else
5991:DRIVER/FatFs/source/ff.c **** #endif
5992:DRIVER/FatFs/source/ff.c **** 			{	/* Partitioning is in MBR */
5993:DRIVER/FatFs/source/ff.c **** 				if (sz_vol > N_SEC_TRACK) {
 11345              		.loc 1 5993 5 is_stmt 1 view .LVU3893
 11346              		.loc 1 5993 16 is_stmt 0 view .LVU3894
 11347 0118 0D9B     		ldr	r3, [sp, #52]
 11348              		.loc 1 5993 8 view .LVU3895
 11349 011a 3F2B     		cmp	r3, #63
 11350 011c 40F28480 		bls	.L866
5994:DRIVER/FatFs/source/ff.c **** 					b_vol = N_SEC_TRACK; sz_vol -= b_vol;	/* Estimated partition offset and size */
 11351              		.loc 1 5994 6 is_stmt 1 view .LVU3896
 11352              	.LVL1335:
 11353              		.loc 1 5994 27 view .LVU3897
 11354              		.loc 1 5994 34 is_stmt 0 view .LVU3898
 11355 0120 3F3B     		subs	r3, r3, #63
 11356 0122 0D93     		str	r3, [sp, #52]
 11357              		.loc 1 5994 12 view .LVU3899
 11358 0124 3F23     		movs	r3, #63
 11359 0126 0293     		str	r3, [sp, #8]
 11360 0128 01E0     		b	.L812
 11361              	.LVL1336:
 11362              	.L865:
5947:DRIVER/FatFs/source/ff.c **** 	if (FF_MULTI_PARTITION && ipart != 0) {	/* Is the volume associated with any specific partition? *
 11363              		.loc 1 5947 8 view .LVU3900
 11364 012a 0023     		movs	r3, #0
 11365 012c 0293     		str	r3, [sp, #8]
 11366              	.LVL1337:
 11367              	.L812:
5995:DRIVER/FatFs/source/ff.c **** 				}
5996:DRIVER/FatFs/source/ff.c **** 			}
5997:DRIVER/FatFs/source/ff.c **** 		}
5998:DRIVER/FatFs/source/ff.c **** 	}
5999:DRIVER/FatFs/source/ff.c **** 	if (sz_vol < 128) LEAVE_MKFS(FR_MKFS_ABORTED);	/* Check if volume size is >=128s */
 11368              		.loc 1 5999 2 is_stmt 1 view .LVU3901
 11369              		.loc 1 5999 13 is_stmt 0 view .LVU3902
 11370 012e 0D9B     		ldr	r3, [sp, #52]
 11371              		.loc 1 5999 5 view .LVU3903
 11372 0130 7F2B     		cmp	r3, #127
 11373 0132 40F28A82 		bls	.L867
6000:DRIVER/FatFs/source/ff.c **** 
6001:DRIVER/FatFs/source/ff.c **** 	/* Now start to create an FAT volume at b_vol and sz_vol */
6002:DRIVER/FatFs/source/ff.c **** 
6003:DRIVER/FatFs/source/ff.c **** 	do {	/* Pre-determine the FAT type */
 11374              		.loc 1 6003 2 is_stmt 1 view .LVU3904
6004:DRIVER/FatFs/source/ff.c **** 		if (FF_FS_EXFAT && (fsopt & FM_EXFAT)) {	/* exFAT possible? */
 11375              		.loc 1 6004 3 view .LVU3905
6005:DRIVER/FatFs/source/ff.c **** 			if ((fsopt & FM_ANY) == FM_EXFAT || sz_vol >= 0x4000000 || sz_au > 128) {	/* exFAT only, vol >= 
6006:DRIVER/FatFs/source/ff.c **** 				fsty = FS_EXFAT; break;
6007:DRIVER/FatFs/source/ff.c **** 			}
6008:DRIVER/FatFs/source/ff.c **** 		}
6009:DRIVER/FatFs/source/ff.c **** #if FF_LBA64
6010:DRIVER/FatFs/source/ff.c **** 		if (sz_vol >= 0x100000000) LEAVE_MKFS(FR_MKFS_ABORTED);	/* Too large volume for FAT/FAT32 */
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 364


6011:DRIVER/FatFs/source/ff.c **** #endif
6012:DRIVER/FatFs/source/ff.c **** 		if (sz_au > 128) sz_au = 128;	/* Invalid AU for FAT/FAT32? */
 11376              		.loc 1 6012 3 view .LVU3906
 11377              		.loc 1 6012 6 is_stmt 0 view .LVU3907
 11378 0136 802E     		cmp	r6, #128
 11379 0138 00D9     		bls	.L813
 11380              		.loc 1 6012 26 view .LVU3908
 11381 013a 8026     		movs	r6, #128
 11382              	.LVL1338:
 11383              	.L813:
6013:DRIVER/FatFs/source/ff.c **** 		if (fsopt & FM_FAT32) {	/* FAT32 possible? */
 11384              		.loc 1 6013 3 is_stmt 1 view .LVU3909
 11385              		.loc 1 6013 6 is_stmt 0 view .LVU3910
 11386 013c 15F00203 		ands	r3, r5, #2
 11387 0140 0493     		str	r3, [sp, #16]
 11388 0142 02D0     		beq	.L814
6014:DRIVER/FatFs/source/ff.c **** 			if (!(fsopt & FM_FAT)) {	/* no-FAT? */
 11389              		.loc 1 6014 4 is_stmt 1 view .LVU3911
 11390              		.loc 1 6014 7 is_stmt 0 view .LVU3912
 11391 0144 15F0010F 		tst	r5, #1
 11392 0148 71D0     		beq	.L869
 11393              	.L814:
6015:DRIVER/FatFs/source/ff.c **** 				fsty = FS_FAT32; break;
6016:DRIVER/FatFs/source/ff.c **** 			}
6017:DRIVER/FatFs/source/ff.c **** 		}
6018:DRIVER/FatFs/source/ff.c **** 		if (!(fsopt & FM_FAT)) LEAVE_MKFS(FR_INVALID_PARAMETER);	/* no-FAT? */
 11394              		.loc 1 6018 3 is_stmt 1 view .LVU3913
 11395              		.loc 1 6018 6 is_stmt 0 view .LVU3914
 11396 014a 15F0010F 		tst	r5, #1
 11397 014e 00F07E82 		beq	.L870
6019:DRIVER/FatFs/source/ff.c **** 		fsty = FS_FAT16;
 11398              		.loc 1 6019 8 view .LVU3915
 11399 0152 4FF0020A 		mov	r10, #2
 11400              	.L815:
 11401              	.LVL1339:
6003:DRIVER/FatFs/source/ff.c **** 		if (FF_FS_EXFAT && (fsopt & FM_EXFAT)) {	/* exFAT possible? */
 11402              		.loc 1 6003 5 is_stmt 1 view .LVU3916
6020:DRIVER/FatFs/source/ff.c **** 	} while (0);
6021:DRIVER/FatFs/source/ff.c **** 
6022:DRIVER/FatFs/source/ff.c **** 	vsn = (DWORD)sz_vol + GET_FATTIME();	/* VSN generated from current time and partitiion size */
 11403              		.loc 1 6022 2 view .LVU3917
 11404              		.loc 1 6022 24 is_stmt 0 view .LVU3918
 11405 0156 FFF7FEFF 		bl	get_fattime
 11406              	.LVL1340:
 11407              		.loc 1 6022 8 view .LVU3919
 11408 015a 0D99     		ldr	r1, [sp, #52]
 11409              		.loc 1 6022 6 view .LVU3920
 11410 015c 4318     		adds	r3, r0, r1
 11411 015e 0693     		str	r3, [sp, #24]
 11412              	.LVL1341:
 11413              	.L816:
6023:DRIVER/FatFs/source/ff.c **** 
6024:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
6025:DRIVER/FatFs/source/ff.c **** 	if (fsty == FS_EXFAT) {	/* Create an exFAT volume */
6026:DRIVER/FatFs/source/ff.c **** 		DWORD szb_bit, szb_case, sum, nbit, clu, clen[3];
6027:DRIVER/FatFs/source/ff.c **** 		WCHAR ch, si;
6028:DRIVER/FatFs/source/ff.c **** 		UINT j, st;
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 365


6029:DRIVER/FatFs/source/ff.c **** 
6030:DRIVER/FatFs/source/ff.c **** 		if (sz_vol < 0x1000) LEAVE_MKFS(FR_MKFS_ABORTED);	/* Too small volume for exFAT? */
6031:DRIVER/FatFs/source/ff.c **** #if FF_USE_TRIM
6032:DRIVER/FatFs/source/ff.c **** 		lba[0] = b_vol; lba[1] = b_vol + sz_vol - 1;	/* Inform storage device that the volume area may be
6033:DRIVER/FatFs/source/ff.c **** 		disk_ioctl(pdrv, CTRL_TRIM, lba);
6034:DRIVER/FatFs/source/ff.c **** #endif
6035:DRIVER/FatFs/source/ff.c **** 		/* Determine FAT location, data location and number of clusters */
6036:DRIVER/FatFs/source/ff.c **** 		if (sz_au == 0) {	/* AU auto-selection */
6037:DRIVER/FatFs/source/ff.c **** 			sz_au = 8;
6038:DRIVER/FatFs/source/ff.c **** 			if (sz_vol >= 0x80000) sz_au = 64;		/* >= 512Ks */
6039:DRIVER/FatFs/source/ff.c **** 			if (sz_vol >= 0x4000000) sz_au = 256;	/* >= 64Ms */
6040:DRIVER/FatFs/source/ff.c **** 		}
6041:DRIVER/FatFs/source/ff.c **** 		b_fat = b_vol + 32;										/* FAT start at offset 32 */
6042:DRIVER/FatFs/source/ff.c **** 		sz_fat = (DWORD)((sz_vol / sz_au + 2) * 4 + ss - 1) / ss;	/* Number of FAT sectors */
6043:DRIVER/FatFs/source/ff.c **** 		b_data = (b_fat + sz_fat + sz_blk - 1) & ~((LBA_t)sz_blk - 1);	/* Align data area to the erase bl
6044:DRIVER/FatFs/source/ff.c **** 		if (b_data - b_vol >= sz_vol / 2) LEAVE_MKFS(FR_MKFS_ABORTED);	/* Too small volume? */
6045:DRIVER/FatFs/source/ff.c **** 		n_clst = (DWORD)((sz_vol - (b_data - b_vol)) / sz_au);	/* Number of clusters */
6046:DRIVER/FatFs/source/ff.c **** 		if (n_clst <16) LEAVE_MKFS(FR_MKFS_ABORTED);			/* Too few clusters? */
6047:DRIVER/FatFs/source/ff.c **** 		if (n_clst > MAX_EXFAT) LEAVE_MKFS(FR_MKFS_ABORTED);	/* Too many clusters? */
6048:DRIVER/FatFs/source/ff.c **** 
6049:DRIVER/FatFs/source/ff.c **** 		szb_bit = (n_clst + 7) / 8;								/* Size of allocation bitmap */
6050:DRIVER/FatFs/source/ff.c **** 		clen[0] = (szb_bit + sz_au * ss - 1) / (sz_au * ss);	/* Number of allocation bitmap clusters */
6051:DRIVER/FatFs/source/ff.c **** 
6052:DRIVER/FatFs/source/ff.c **** 		/* Create a compressed up-case table */
6053:DRIVER/FatFs/source/ff.c **** 		sect = b_data + sz_au * clen[0];	/* Table start sector */
6054:DRIVER/FatFs/source/ff.c **** 		sum = 0;							/* Table checksum to be stored in the 82 entry */
6055:DRIVER/FatFs/source/ff.c **** 		st = 0; si = 0; i = 0; j = 0; szb_case = 0;
6056:DRIVER/FatFs/source/ff.c **** 		do {
6057:DRIVER/FatFs/source/ff.c **** 			switch (st) {
6058:DRIVER/FatFs/source/ff.c **** 			case 0:
6059:DRIVER/FatFs/source/ff.c **** 				ch = (WCHAR)ff_wtoupper(si);	/* Get an up-case char */
6060:DRIVER/FatFs/source/ff.c **** 				if (ch != si) {
6061:DRIVER/FatFs/source/ff.c **** 					si++; break;		/* Store the up-case char if exist */
6062:DRIVER/FatFs/source/ff.c **** 				}
6063:DRIVER/FatFs/source/ff.c **** 				for (j = 1; (WCHAR)(si + j) && (WCHAR)(si + j) == ff_wtoupper((WCHAR)(si + j)); j++) ;	/* Get r
6064:DRIVER/FatFs/source/ff.c **** 				if (j >= 128) {
6065:DRIVER/FatFs/source/ff.c **** 					ch = 0xFFFF; st = 2; break;	/* Compress the no-case block if run is >= 128 chars */
6066:DRIVER/FatFs/source/ff.c **** 				}
6067:DRIVER/FatFs/source/ff.c **** 				st = 1;			/* Do not compress short run */
6068:DRIVER/FatFs/source/ff.c **** 				/* FALLTHROUGH */
6069:DRIVER/FatFs/source/ff.c **** 			case 1:
6070:DRIVER/FatFs/source/ff.c **** 				ch = si++;		/* Fill the short run */
6071:DRIVER/FatFs/source/ff.c **** 				if (--j == 0) st = 0;
6072:DRIVER/FatFs/source/ff.c **** 				break;
6073:DRIVER/FatFs/source/ff.c **** 
6074:DRIVER/FatFs/source/ff.c **** 			default:
6075:DRIVER/FatFs/source/ff.c **** 				ch = (WCHAR)j; si += (WCHAR)j;	/* Number of chars to skip */
6076:DRIVER/FatFs/source/ff.c **** 				st = 0;
6077:DRIVER/FatFs/source/ff.c **** 			}
6078:DRIVER/FatFs/source/ff.c **** 			sum = xsum32(buf[i + 0] = (BYTE)ch, sum);	/* Put it into the write buffer */
6079:DRIVER/FatFs/source/ff.c **** 			sum = xsum32(buf[i + 1] = (BYTE)(ch >> 8), sum);
6080:DRIVER/FatFs/source/ff.c **** 			i += 2; szb_case += 2;
6081:DRIVER/FatFs/source/ff.c **** 			if (si == 0 || i == sz_buf * ss) {		/* Write buffered data when buffer full or end of process */
6082:DRIVER/FatFs/source/ff.c **** 				n = (i + ss - 1) / ss;
6083:DRIVER/FatFs/source/ff.c **** 				if (disk_write(pdrv, buf, sect, n) != RES_OK) LEAVE_MKFS(FR_DISK_ERR);
6084:DRIVER/FatFs/source/ff.c **** 				sect += n; i = 0;
6085:DRIVER/FatFs/source/ff.c **** 			}
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 366


6086:DRIVER/FatFs/source/ff.c **** 		} while (si);
6087:DRIVER/FatFs/source/ff.c **** 		clen[1] = (szb_case + sz_au * ss - 1) / (sz_au * ss);	/* Number of up-case table clusters */
6088:DRIVER/FatFs/source/ff.c **** 		clen[2] = 1;	/* Number of root dir clusters */
6089:DRIVER/FatFs/source/ff.c **** 
6090:DRIVER/FatFs/source/ff.c **** 		/* Initialize the allocation bitmap */
6091:DRIVER/FatFs/source/ff.c **** 		sect = b_data; nsect = (szb_bit + ss - 1) / ss;	/* Start of bitmap and number of bitmap sectors *
6092:DRIVER/FatFs/source/ff.c **** 		nbit = clen[0] + clen[1] + clen[2];				/* Number of clusters in-use by system (bitmap, up-case an
6093:DRIVER/FatFs/source/ff.c **** 		do {
6094:DRIVER/FatFs/source/ff.c **** 			memset(buf, 0, sz_buf * ss);				/* Initialize bitmap buffer */
6095:DRIVER/FatFs/source/ff.c **** 			for (i = 0; nbit != 0 && i / 8 < sz_buf * ss; buf[i / 8] |= 1 << (i % 8), i++, nbit--) ;	/* Mark
6096:DRIVER/FatFs/source/ff.c **** 			n = (nsect > sz_buf) ? sz_buf : nsect;		/* Write the buffered data */
6097:DRIVER/FatFs/source/ff.c **** 			if (disk_write(pdrv, buf, sect, n) != RES_OK) LEAVE_MKFS(FR_DISK_ERR);
6098:DRIVER/FatFs/source/ff.c **** 			sect += n; nsect -= n;
6099:DRIVER/FatFs/source/ff.c **** 		} while (nsect);
6100:DRIVER/FatFs/source/ff.c **** 
6101:DRIVER/FatFs/source/ff.c **** 		/* Initialize the FAT */
6102:DRIVER/FatFs/source/ff.c **** 		sect = b_fat; nsect = sz_fat;	/* Start of FAT and number of FAT sectors */
6103:DRIVER/FatFs/source/ff.c **** 		j = nbit = clu = 0;
6104:DRIVER/FatFs/source/ff.c **** 		do {
6105:DRIVER/FatFs/source/ff.c **** 			memset(buf, 0, sz_buf * ss); i = 0;	/* Clear work area and reset write offset */
6106:DRIVER/FatFs/source/ff.c **** 			if (clu == 0) {	/* Initialize FAT [0] and FAT[1] */
6107:DRIVER/FatFs/source/ff.c **** 				st_dword(buf + i, 0xFFFFFFF8); i += 4; clu++;
6108:DRIVER/FatFs/source/ff.c **** 				st_dword(buf + i, 0xFFFFFFFF); i += 4; clu++;
6109:DRIVER/FatFs/source/ff.c **** 			}
6110:DRIVER/FatFs/source/ff.c **** 			do {			/* Create chains of bitmap, up-case and root dir */
6111:DRIVER/FatFs/source/ff.c **** 				while (nbit != 0 && i < sz_buf * ss) {	/* Create a chain */
6112:DRIVER/FatFs/source/ff.c **** 					st_dword(buf + i, (nbit > 1) ? clu + 1 : 0xFFFFFFFF);
6113:DRIVER/FatFs/source/ff.c **** 					i += 4; clu++; nbit--;
6114:DRIVER/FatFs/source/ff.c **** 				}
6115:DRIVER/FatFs/source/ff.c **** 				if (nbit == 0 && j < 3) nbit = clen[j++];	/* Get next chain length */
6116:DRIVER/FatFs/source/ff.c **** 			} while (nbit != 0 && i < sz_buf * ss);
6117:DRIVER/FatFs/source/ff.c **** 			n = (nsect > sz_buf) ? sz_buf : nsect;	/* Write the buffered data */
6118:DRIVER/FatFs/source/ff.c **** 			if (disk_write(pdrv, buf, sect, n) != RES_OK) LEAVE_MKFS(FR_DISK_ERR);
6119:DRIVER/FatFs/source/ff.c **** 			sect += n; nsect -= n;
6120:DRIVER/FatFs/source/ff.c **** 		} while (nsect);
6121:DRIVER/FatFs/source/ff.c **** 
6122:DRIVER/FatFs/source/ff.c **** 		/* Initialize the root directory */
6123:DRIVER/FatFs/source/ff.c **** 		memset(buf, 0, sz_buf * ss);
6124:DRIVER/FatFs/source/ff.c **** 		buf[SZDIRE * 0 + 0] = ET_VLABEL;				/* Volume label entry (no label) */
6125:DRIVER/FatFs/source/ff.c **** 		buf[SZDIRE * 1 + 0] = ET_BITMAP;				/* Bitmap entry */
6126:DRIVER/FatFs/source/ff.c **** 		st_dword(buf + SZDIRE * 1 + 20, 2);				/*  cluster */
6127:DRIVER/FatFs/source/ff.c **** 		st_dword(buf + SZDIRE * 1 + 24, szb_bit);		/*  size */
6128:DRIVER/FatFs/source/ff.c **** 		buf[SZDIRE * 2 + 0] = ET_UPCASE;				/* Up-case table entry */
6129:DRIVER/FatFs/source/ff.c **** 		st_dword(buf + SZDIRE * 2 + 4, sum);			/*  sum */
6130:DRIVER/FatFs/source/ff.c **** 		st_dword(buf + SZDIRE * 2 + 20, 2 + clen[0]);	/*  cluster */
6131:DRIVER/FatFs/source/ff.c **** 		st_dword(buf + SZDIRE * 2 + 24, szb_case);		/*  size */
6132:DRIVER/FatFs/source/ff.c **** 		sect = b_data + sz_au * (clen[0] + clen[1]); nsect = sz_au;	/* Start of the root directory and nu
6133:DRIVER/FatFs/source/ff.c **** 		do {	/* Fill root directory sectors */
6134:DRIVER/FatFs/source/ff.c **** 			n = (nsect > sz_buf) ? sz_buf : nsect;
6135:DRIVER/FatFs/source/ff.c **** 			if (disk_write(pdrv, buf, sect, n) != RES_OK) LEAVE_MKFS(FR_DISK_ERR);
6136:DRIVER/FatFs/source/ff.c **** 			memset(buf, 0, ss);	/* Rest of entries are filled with zero */
6137:DRIVER/FatFs/source/ff.c **** 			sect += n; nsect -= n;
6138:DRIVER/FatFs/source/ff.c **** 		} while (nsect);
6139:DRIVER/FatFs/source/ff.c **** 
6140:DRIVER/FatFs/source/ff.c **** 		/* Create two set of the exFAT VBR blocks */
6141:DRIVER/FatFs/source/ff.c **** 		sect = b_vol;
6142:DRIVER/FatFs/source/ff.c **** 		for (n = 0; n < 2; n++) {
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 367


6143:DRIVER/FatFs/source/ff.c **** 			/* Main record (+0) */
6144:DRIVER/FatFs/source/ff.c **** 			memset(buf, 0, ss);
6145:DRIVER/FatFs/source/ff.c **** 			memcpy(buf + BS_JmpBoot, "\xEB\x76\x90" "EXFAT   ", 11);	/* Boot jump code (x86), OEM name */
6146:DRIVER/FatFs/source/ff.c **** 			st_qword(buf + BPB_VolOfsEx, b_vol);					/* Volume offset in the physical drive [sector] */
6147:DRIVER/FatFs/source/ff.c **** 			st_qword(buf + BPB_TotSecEx, sz_vol);					/* Volume size [sector] */
6148:DRIVER/FatFs/source/ff.c **** 			st_dword(buf + BPB_FatOfsEx, (DWORD)(b_fat - b_vol));	/* FAT offset [sector] */
6149:DRIVER/FatFs/source/ff.c **** 			st_dword(buf + BPB_FatSzEx, sz_fat);					/* FAT size [sector] */
6150:DRIVER/FatFs/source/ff.c **** 			st_dword(buf + BPB_DataOfsEx, (DWORD)(b_data - b_vol));	/* Data offset [sector] */
6151:DRIVER/FatFs/source/ff.c **** 			st_dword(buf + BPB_NumClusEx, n_clst);					/* Number of clusters */
6152:DRIVER/FatFs/source/ff.c **** 			st_dword(buf + BPB_RootClusEx, 2 + clen[0] + clen[1]);	/* Root dir cluster # */
6153:DRIVER/FatFs/source/ff.c **** 			st_dword(buf + BPB_VolIDEx, vsn);						/* VSN */
6154:DRIVER/FatFs/source/ff.c **** 			st_word(buf + BPB_FSVerEx, 0x100);						/* Filesystem version (1.00) */
6155:DRIVER/FatFs/source/ff.c **** 			for (buf[BPB_BytsPerSecEx] = 0, i = ss; i >>= 1; buf[BPB_BytsPerSecEx]++) ;	/* Log2 of sector si
6156:DRIVER/FatFs/source/ff.c **** 			for (buf[BPB_SecPerClusEx] = 0, i = sz_au; i >>= 1; buf[BPB_SecPerClusEx]++) ;	/* Log2 of cluste
6157:DRIVER/FatFs/source/ff.c **** 			buf[BPB_NumFATsEx] = 1;					/* Number of FATs */
6158:DRIVER/FatFs/source/ff.c **** 			buf[BPB_DrvNumEx] = 0x80;				/* Drive number (for int13) */
6159:DRIVER/FatFs/source/ff.c **** 			st_word(buf + BS_BootCodeEx, 0xFEEB);	/* Boot code (x86) */
6160:DRIVER/FatFs/source/ff.c **** 			st_word(buf + BS_55AA, 0xAA55);			/* Signature (placed here regardless of sector size) */
6161:DRIVER/FatFs/source/ff.c **** 			for (i = sum = 0; i < ss; i++) {		/* VBR checksum */
6162:DRIVER/FatFs/source/ff.c **** 				if (i != BPB_VolFlagEx && i != BPB_VolFlagEx + 1 && i != BPB_PercInUseEx) sum = xsum32(buf[i], 
6163:DRIVER/FatFs/source/ff.c **** 			}
6164:DRIVER/FatFs/source/ff.c **** 			if (disk_write(pdrv, buf, sect++, 1) != RES_OK) LEAVE_MKFS(FR_DISK_ERR);
6165:DRIVER/FatFs/source/ff.c **** 			/* Extended bootstrap record (+1..+8) */
6166:DRIVER/FatFs/source/ff.c **** 			memset(buf, 0, ss);
6167:DRIVER/FatFs/source/ff.c **** 			st_word(buf + ss - 2, 0xAA55);	/* Signature (placed at end of sector) */
6168:DRIVER/FatFs/source/ff.c **** 			for (j = 1; j < 9; j++) {
6169:DRIVER/FatFs/source/ff.c **** 				for (i = 0; i < ss; sum = xsum32(buf[i++], sum)) ;	/* VBR checksum */
6170:DRIVER/FatFs/source/ff.c **** 				if (disk_write(pdrv, buf, sect++, 1) != RES_OK) LEAVE_MKFS(FR_DISK_ERR);
6171:DRIVER/FatFs/source/ff.c **** 			}
6172:DRIVER/FatFs/source/ff.c **** 			/* OEM/Reserved record (+9..+10) */
6173:DRIVER/FatFs/source/ff.c **** 			memset(buf, 0, ss);
6174:DRIVER/FatFs/source/ff.c **** 			for ( ; j < 11; j++) {
6175:DRIVER/FatFs/source/ff.c **** 				for (i = 0; i < ss; sum = xsum32(buf[i++], sum)) ;	/* VBR checksum */
6176:DRIVER/FatFs/source/ff.c **** 				if (disk_write(pdrv, buf, sect++, 1) != RES_OK) LEAVE_MKFS(FR_DISK_ERR);
6177:DRIVER/FatFs/source/ff.c **** 			}
6178:DRIVER/FatFs/source/ff.c **** 			/* Sum record (+11) */
6179:DRIVER/FatFs/source/ff.c **** 			for (i = 0; i < ss; i += 4) st_dword(buf + i, sum);		/* Fill with checksum value */
6180:DRIVER/FatFs/source/ff.c **** 			if (disk_write(pdrv, buf, sect++, 1) != RES_OK) LEAVE_MKFS(FR_DISK_ERR);
6181:DRIVER/FatFs/source/ff.c **** 		}
6182:DRIVER/FatFs/source/ff.c **** 
6183:DRIVER/FatFs/source/ff.c **** 	} else
6184:DRIVER/FatFs/source/ff.c **** #endif	/* FF_FS_EXFAT */
6185:DRIVER/FatFs/source/ff.c **** 	{	/* Create an FAT/FAT32 volume */
6186:DRIVER/FatFs/source/ff.c **** 		do {
 11414              		.loc 1 6186 3 is_stmt 1 view .LVU3921
6187:DRIVER/FatFs/source/ff.c **** 			pau = sz_au;
 11415              		.loc 1 6187 4 view .LVU3922
6188:DRIVER/FatFs/source/ff.c **** 			/* Pre-determine number of clusters and FAT sub-type */
6189:DRIVER/FatFs/source/ff.c **** 			if (fsty == FS_FAT32) {	/* FAT32 volume */
 11416              		.loc 1 6189 4 view .LVU3923
 11417              		.loc 1 6189 7 is_stmt 0 view .LVU3924
 11418 0160 BAF1030F 		cmp	r10, #3
 11419 0164 6BD0     		beq	.L897
6190:DRIVER/FatFs/source/ff.c **** 				if (pau == 0) {	/* AU auto-selection */
6191:DRIVER/FatFs/source/ff.c **** 					n = (DWORD)sz_vol / 0x20000;	/* Volume size in unit of 128KS */
6192:DRIVER/FatFs/source/ff.c **** 					for (i = 0, pau = 1; cst32[i] && cst32[i] <= n; i++, pau <<= 1) ;	/* Get from table */
6193:DRIVER/FatFs/source/ff.c **** 				}
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 368


6194:DRIVER/FatFs/source/ff.c **** 				n_clst = (DWORD)sz_vol / pau;	/* Number of clusters */
6195:DRIVER/FatFs/source/ff.c **** 				sz_fat = (n_clst * 4 + 8 + ss - 1) / ss;	/* FAT size [sector] */
6196:DRIVER/FatFs/source/ff.c **** 				sz_rsv = 32;	/* Number of reserved sectors */
6197:DRIVER/FatFs/source/ff.c **** 				sz_dir = 0;		/* No static directory */
6198:DRIVER/FatFs/source/ff.c **** 				if (n_clst <= MAX_FAT16 || n_clst > MAX_FAT32) LEAVE_MKFS(FR_MKFS_ABORTED);
6199:DRIVER/FatFs/source/ff.c **** 			} else {				/* FAT volume */
6200:DRIVER/FatFs/source/ff.c **** 				if (pau == 0) {	/* au auto-selection */
 11420              		.loc 1 6200 5 is_stmt 1 view .LVU3925
 11421              		.loc 1 6200 8 is_stmt 0 view .LVU3926
 11422 0166 002E     		cmp	r6, #0
 11423 0168 00F08E80 		beq	.L898
6187:DRIVER/FatFs/source/ff.c **** 			/* Pre-determine number of clusters and FAT sub-type */
 11424              		.loc 1 6187 8 view .LVU3927
 11425 016c 3746     		mov	r7, r6
 11426              	.LVL1342:
 11427              	.L822:
6201:DRIVER/FatFs/source/ff.c **** 					n = (DWORD)sz_vol / 0x1000;	/* Volume size in unit of 4KS */
6202:DRIVER/FatFs/source/ff.c **** 					for (i = 0, pau = 1; cst[i] && cst[i] <= n; i++, pau <<= 1) ;	/* Get from table */
6203:DRIVER/FatFs/source/ff.c **** 				}
6204:DRIVER/FatFs/source/ff.c **** 				n_clst = (DWORD)sz_vol / pau;
 11428              		.loc 1 6204 5 is_stmt 1 view .LVU3928
 11429              		.loc 1 6204 12 is_stmt 0 view .LVU3929
 11430 016e B1FBF7F3 		udiv	r3, r1, r7
 11431              	.LVL1343:
6205:DRIVER/FatFs/source/ff.c **** 				if (n_clst > MAX_FAT12) {
 11432              		.loc 1 6205 5 is_stmt 1 view .LVU3930
 11433              		.loc 1 6205 8 is_stmt 0 view .LVU3931
 11434 0172 40F6F572 		movw	r2, #4085
 11435 0176 9342     		cmp	r3, r2
 11436 0178 40F29580 		bls	.L825
6206:DRIVER/FatFs/source/ff.c **** 					n = n_clst * 2 + 4;		/* FAT size [byte] */
 11437              		.loc 1 6206 6 is_stmt 1 view .LVU3932
 11438              		.loc 1 6206 21 is_stmt 0 view .LVU3933
 11439 017c 9D1C     		adds	r5, r3, #2
 11440              		.loc 1 6206 8 view .LVU3934
 11441 017e 6D00     		lsls	r5, r5, #1
 11442              	.LVL1344:
 11443              	.L826:
6207:DRIVER/FatFs/source/ff.c **** 				} else {
6208:DRIVER/FatFs/source/ff.c **** 					fsty = FS_FAT12;
6209:DRIVER/FatFs/source/ff.c **** 					n = (n_clst * 3 + 1) / 2 + 3;	/* FAT size [byte] */
6210:DRIVER/FatFs/source/ff.c **** 				}
6211:DRIVER/FatFs/source/ff.c **** 				sz_fat = (n + ss - 1) / ss;		/* FAT size [sector] */
 11444              		.loc 1 6211 5 is_stmt 1 view .LVU3935
 11445              		.loc 1 6211 17 is_stmt 0 view .LVU3936
 11446 0180 BDF83E30 		ldrh	r3, [sp, #62]
 11447              	.LVL1345:
 11448              		.loc 1 6211 17 view .LVU3937
 11449 0184 1D44     		add	r5, r5, r3
 11450              	.LVL1346:
 11451              		.loc 1 6211 22 view .LVU3938
 11452 0186 013D     		subs	r5, r5, #1
 11453              		.loc 1 6211 12 view .LVU3939
 11454 0188 B5FBF3F5 		udiv	r5, r5, r3
 11455              	.LVL1347:
6212:DRIVER/FatFs/source/ff.c **** 				sz_rsv = 1;						/* Number of reserved sectors */
 11456              		.loc 1 6212 5 is_stmt 1 view .LVU3940
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 369


6213:DRIVER/FatFs/source/ff.c **** 				sz_dir = (DWORD)n_root * SZDIRE / ss;	/* Root dir size [sector] */
 11457              		.loc 1 6213 5 view .LVU3941
 11458              		.loc 1 6213 28 is_stmt 0 view .LVU3942
 11459 018c 4FEA491C 		lsl	ip, r9, #5
 11460              		.loc 1 6213 12 view .LVU3943
 11461 0190 BCFBF3FC 		udiv	ip, ip, r3
 11462              	.LVL1348:
6212:DRIVER/FatFs/source/ff.c **** 				sz_rsv = 1;						/* Number of reserved sectors */
 11463              		.loc 1 6212 12 view .LVU3944
 11464 0194 0120     		movs	r0, #1
 11465              	.LVL1349:
 11466              	.L821:
6214:DRIVER/FatFs/source/ff.c **** 			}
6215:DRIVER/FatFs/source/ff.c **** 			b_fat = b_vol + sz_rsv;						/* FAT base */
 11467              		.loc 1 6215 4 is_stmt 1 view .LVU3945
 11468              		.loc 1 6215 10 is_stmt 0 view .LVU3946
 11469 0196 029B     		ldr	r3, [sp, #8]
 11470 0198 00EB030E 		add	lr, r0, r3
 11471              	.LVL1350:
6216:DRIVER/FatFs/source/ff.c **** 			b_data = b_fat + sz_fat * n_fat + sz_dir;	/* Data base */
 11472              		.loc 1 6216 4 is_stmt 1 view .LVU3947
 11473              		.loc 1 6216 19 is_stmt 0 view .LVU3948
 11474 019c 0BFB05E2 		mla	r2, fp, r5, lr
 11475              		.loc 1 6216 11 view .LVU3949
 11476 01a0 6244     		add	r2, r2, ip
 11477              	.LVL1351:
6217:DRIVER/FatFs/source/ff.c **** 
6218:DRIVER/FatFs/source/ff.c **** 			/* Align data area to erase block boundary (for flash memory media) */
6219:DRIVER/FatFs/source/ff.c **** 			n = (DWORD)(((b_data + sz_blk - 1) & ~(sz_blk - 1)) - b_data);	/* Sectors to next nearest from c
 11478              		.loc 1 6219 4 is_stmt 1 view .LVU3950
 11479              		.loc 1 6219 25 is_stmt 0 view .LVU3951
 11480 01a2 DDF83880 		ldr	r8, [sp, #56]
 11481 01a6 08EB0203 		add	r3, r8, r2
 11482              		.loc 1 6219 34 view .LVU3952
 11483 01aa 013B     		subs	r3, r3, #1
 11484              		.loc 1 6219 41 view .LVU3953
 11485 01ac C8F10008 		rsb	r8, r8, #0
 11486              		.loc 1 6219 39 view .LVU3954
 11487 01b0 03EA0803 		and	r3, r3, r8
 11488              		.loc 1 6219 6 view .LVU3955
 11489 01b4 9B1A     		subs	r3, r3, r2
 11490              	.LVL1352:
6220:DRIVER/FatFs/source/ff.c **** 			if (fsty == FS_FAT32) {		/* FAT32: Move FAT */
 11491              		.loc 1 6220 4 is_stmt 1 view .LVU3956
 11492              		.loc 1 6220 7 is_stmt 0 view .LVU3957
 11493 01b6 BAF1030F 		cmp	r10, #3
 11494 01ba 7CD0     		beq	.L899
6221:DRIVER/FatFs/source/ff.c **** 				sz_rsv += n; b_fat += n;
6222:DRIVER/FatFs/source/ff.c **** 			} else {					/* FAT: Expand FAT */
6223:DRIVER/FatFs/source/ff.c **** 				if (n % n_fat) {	/* Adjust fractional error if needed */
 11495              		.loc 1 6223 5 is_stmt 1 view .LVU3958
 11496              		.loc 1 6223 11 is_stmt 0 view .LVU3959
 11497 01bc B3FBFBF8 		udiv	r8, r3, fp
 11498 01c0 0BFB1838 		mls	r8, fp, r8, r3
 11499              		.loc 1 6223 8 view .LVU3960
 11500 01c4 B8F1000F 		cmp	r8, #0
 11501 01c8 03D0     		beq	.L829
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 370


6224:DRIVER/FatFs/source/ff.c **** 					n--; sz_rsv++; b_fat++;
 11502              		.loc 1 6224 6 is_stmt 1 view .LVU3961
 11503              		.loc 1 6224 7 is_stmt 0 view .LVU3962
 11504 01ca 013B     		subs	r3, r3, #1
 11505              	.LVL1353:
 11506              		.loc 1 6224 11 is_stmt 1 view .LVU3963
 11507              		.loc 1 6224 17 is_stmt 0 view .LVU3964
 11508 01cc 0130     		adds	r0, r0, #1
 11509              	.LVL1354:
 11510              		.loc 1 6224 21 is_stmt 1 view .LVU3965
 11511              		.loc 1 6224 26 is_stmt 0 view .LVU3966
 11512 01ce 0EF1010E 		add	lr, lr, #1
 11513              	.LVL1355:
 11514              	.L829:
6225:DRIVER/FatFs/source/ff.c **** 				}
6226:DRIVER/FatFs/source/ff.c **** 				sz_fat += n / n_fat;
 11515              		.loc 1 6226 5 is_stmt 1 view .LVU3967
 11516              		.loc 1 6226 17 is_stmt 0 view .LVU3968
 11517 01d2 B3FBFBF3 		udiv	r3, r3, fp
 11518              	.LVL1356:
 11519              		.loc 1 6226 12 view .LVU3969
 11520 01d6 1D44     		add	r5, r5, r3
 11521              	.LVL1357:
 11522              	.L828:
6227:DRIVER/FatFs/source/ff.c **** 			}
6228:DRIVER/FatFs/source/ff.c **** 
6229:DRIVER/FatFs/source/ff.c **** 			/* Determine number of clusters and final check of validity of the FAT sub-type */
6230:DRIVER/FatFs/source/ff.c **** 			if (sz_vol < b_data + pau * 16 - b_vol) LEAVE_MKFS(FR_MKFS_ABORTED);	/* Too small volume? */
 11523              		.loc 1 6230 4 is_stmt 1 view .LVU3970
 11524              		.loc 1 6230 24 is_stmt 0 view .LVU3971
 11525 01d8 02EB0712 		add	r2, r2, r7, lsl #4
 11526              	.LVL1358:
 11527              		.loc 1 6230 35 view .LVU3972
 11528 01dc 029B     		ldr	r3, [sp, #8]
 11529 01de D21A     		subs	r2, r2, r3
 11530              		.loc 1 6230 7 view .LVU3973
 11531 01e0 9142     		cmp	r1, r2
 11532 01e2 C0F04582 		bcc	.L874
6231:DRIVER/FatFs/source/ff.c **** 			n_clst = ((DWORD)sz_vol - sz_rsv - sz_fat * n_fat - sz_dir) / pau;
 11533              		.loc 1 6231 4 is_stmt 1 view .LVU3974
 11534              		.loc 1 6231 28 is_stmt 0 view .LVU3975
 11535 01e6 A1EB0008 		sub	r8, r1, r0
 11536              		.loc 1 6231 37 view .LVU3976
 11537 01ea 0BFB1588 		mls	r8, fp, r5, r8
 11538              		.loc 1 6231 54 view .LVU3977
 11539 01ee A8EB0C08 		sub	r8, r8, ip
 11540              		.loc 1 6231 11 view .LVU3978
 11541 01f2 B8FBF7F8 		udiv	r8, r8, r7
 11542              	.LVL1359:
6232:DRIVER/FatFs/source/ff.c **** 			if (fsty == FS_FAT32) {
 11543              		.loc 1 6232 4 is_stmt 1 view .LVU3979
 11544              		.loc 1 6232 7 is_stmt 0 view .LVU3980
 11545 01f6 BAF1030F 		cmp	r10, #3
 11546 01fa 5FD0     		beq	.L900
 11547              	.L830:
6233:DRIVER/FatFs/source/ff.c **** 				if (n_clst <= MAX_FAT16) {	/* Too few clusters for FAT32? */
6234:DRIVER/FatFs/source/ff.c **** 					if (sz_au == 0 && (sz_au = pau / 2) != 0) continue;	/* Adjust cluster size and retry */
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 371


6235:DRIVER/FatFs/source/ff.c **** 					LEAVE_MKFS(FR_MKFS_ABORTED);
6236:DRIVER/FatFs/source/ff.c **** 				}
6237:DRIVER/FatFs/source/ff.c **** 			}
6238:DRIVER/FatFs/source/ff.c **** 			if (fsty == FS_FAT16) {
 11548              		.loc 1 6238 4 is_stmt 1 view .LVU3981
 11549              		.loc 1 6238 7 is_stmt 0 view .LVU3982
 11550 01fc BAF1020F 		cmp	r10, #2
 11551 0200 40F08080 		bne	.L832
6239:DRIVER/FatFs/source/ff.c **** 				if (n_clst > MAX_FAT16) {	/* Too many clusters for FAT16 */
 11552              		.loc 1 6239 5 is_stmt 1 view .LVU3983
 11553              		.loc 1 6239 8 is_stmt 0 view .LVU3984
 11554 0204 4FF6F573 		movw	r3, #65525
 11555 0208 9845     		cmp	r8, r3
 11556 020a 64D9     		bls	.L833
6240:DRIVER/FatFs/source/ff.c **** 					if (sz_au == 0 && (pau * 2) <= 64) {
 11557              		.loc 1 6240 6 is_stmt 1 view .LVU3985
 11558              		.loc 1 6240 9 is_stmt 0 view .LVU3986
 11559 020c 16B9     		cbnz	r6, .L834
 11560              		.loc 1 6240 29 discriminator 1 view .LVU3987
 11561 020e 7B00     		lsls	r3, r7, #1
 11562              		.loc 1 6240 21 discriminator 1 view .LVU3988
 11563 0210 402B     		cmp	r3, #64
 11564 0212 0FD9     		bls	.L876
 11565              	.L834:
6241:DRIVER/FatFs/source/ff.c **** 						sz_au = pau * 2; continue;	/* Adjust cluster size and retry */
6242:DRIVER/FatFs/source/ff.c **** 					}
6243:DRIVER/FatFs/source/ff.c **** 					if ((fsopt & FM_FAT32)) {
 11566              		.loc 1 6243 6 is_stmt 1 view .LVU3989
 11567              		.loc 1 6243 9 is_stmt 0 view .LVU3990
 11568 0214 049B     		ldr	r3, [sp, #16]
 11569 0216 7BB9     		cbnz	r3, .L877
6244:DRIVER/FatFs/source/ff.c **** 						fsty = FS_FAT32; continue;	/* Switch type to FAT32 and retry */
6245:DRIVER/FatFs/source/ff.c **** 					}
6246:DRIVER/FatFs/source/ff.c **** 					if (sz_au == 0 && (sz_au = pau * 2) <= 128) continue;	/* Adjust cluster size and retry */
 11570              		.loc 1 6246 6 is_stmt 1 view .LVU3991
 11571              		.loc 1 6246 9 is_stmt 0 view .LVU3992
 11572 0218 002E     		cmp	r6, #0
 11573 021a 40F02D82 		bne	.L878
 11574              		.loc 1 6246 31 discriminator 1 view .LVU3993
 11575 021e 7E00     		lsls	r6, r7, #1
 11576              	.LVL1360:
 11577              		.loc 1 6246 21 discriminator 1 view .LVU3994
 11578 0220 802E     		cmp	r6, #128
 11579 0222 9DD9     		bls	.L816
6247:DRIVER/FatFs/source/ff.c **** 					LEAVE_MKFS(FR_MKFS_ABORTED);
 11580              		.loc 1 6247 6 view .LVU3995
 11581 0224 0E20     		movs	r0, #14
 11582              	.LVL1361:
 11583              		.loc 1 6247 6 view .LVU3996
 11584 0226 FFE1     		b	.L803
 11585              	.LVL1362:
 11586              	.L866:
5947:DRIVER/FatFs/source/ff.c **** 	if (FF_MULTI_PARTITION && ipart != 0) {	/* Is the volume associated with any specific partition? *
 11587              		.loc 1 5947 8 view .LVU3997
 11588 0228 0023     		movs	r3, #0
 11589 022a 0293     		str	r3, [sp, #8]
 11590 022c 7FE7     		b	.L812
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 372


 11591              	.LVL1363:
 11592              	.L869:
6015:DRIVER/FatFs/source/ff.c **** 			}
 11593              		.loc 1 6015 10 view .LVU3998
 11594 022e 4FF0030A 		mov	r10, #3
 11595 0232 90E7     		b	.L815
 11596              	.LVL1364:
 11597              	.L876:
6241:DRIVER/FatFs/source/ff.c **** 					}
 11598              		.loc 1 6241 13 view .LVU3999
 11599 0234 1E46     		mov	r6, r3
 11600              	.LVL1365:
6241:DRIVER/FatFs/source/ff.c **** 					}
 11601              		.loc 1 6241 13 view .LVU4000
 11602 0236 93E7     		b	.L816
 11603              	.LVL1366:
 11604              	.L877:
6244:DRIVER/FatFs/source/ff.c **** 					}
 11605              		.loc 1 6244 12 view .LVU4001
 11606 0238 4FF0030A 		mov	r10, #3
 11607              	.LVL1367:
6244:DRIVER/FatFs/source/ff.c **** 					}
 11608              		.loc 1 6244 12 view .LVU4002
 11609 023c 90E7     		b	.L816
 11610              	.LVL1368:
 11611              	.L897:
6190:DRIVER/FatFs/source/ff.c **** 					n = (DWORD)sz_vol / 0x20000;	/* Volume size in unit of 128KS */
 11612              		.loc 1 6190 5 is_stmt 1 view .LVU4003
6190:DRIVER/FatFs/source/ff.c **** 					n = (DWORD)sz_vol / 0x20000;	/* Volume size in unit of 128KS */
 11613              		.loc 1 6190 8 is_stmt 0 view .LVU4004
 11614 023e AEB1     		cbz	r6, .L901
6187:DRIVER/FatFs/source/ff.c **** 			/* Pre-determine number of clusters and FAT sub-type */
 11615              		.loc 1 6187 8 view .LVU4005
 11616 0240 3746     		mov	r7, r6
 11617              	.LVL1369:
 11618              	.L818:
6194:DRIVER/FatFs/source/ff.c **** 				sz_fat = (n_clst * 4 + 8 + ss - 1) / ss;	/* FAT size [sector] */
 11619              		.loc 1 6194 5 is_stmt 1 view .LVU4006
6194:DRIVER/FatFs/source/ff.c **** 				sz_fat = (n_clst * 4 + 8 + ss - 1) / ss;	/* FAT size [sector] */
 11620              		.loc 1 6194 12 is_stmt 0 view .LVU4007
 11621 0242 B1FBF7F3 		udiv	r3, r1, r7
 11622              	.LVL1370:
6195:DRIVER/FatFs/source/ff.c **** 				sz_rsv = 32;	/* Number of reserved sectors */
 11623              		.loc 1 6195 5 is_stmt 1 view .LVU4008
6195:DRIVER/FatFs/source/ff.c **** 				sz_rsv = 32;	/* Number of reserved sectors */
 11624              		.loc 1 6195 26 is_stmt 0 view .LVU4009
 11625 0246 9D1C     		adds	r5, r3, #2
6195:DRIVER/FatFs/source/ff.c **** 				sz_rsv = 32;	/* Number of reserved sectors */
 11626              		.loc 1 6195 30 view .LVU4010
 11627 0248 BDF83E20 		ldrh	r2, [sp, #62]
 11628 024c 02EB8505 		add	r5, r2, r5, lsl #2
6195:DRIVER/FatFs/source/ff.c **** 				sz_rsv = 32;	/* Number of reserved sectors */
 11629              		.loc 1 6195 35 view .LVU4011
 11630 0250 013D     		subs	r5, r5, #1
6195:DRIVER/FatFs/source/ff.c **** 				sz_rsv = 32;	/* Number of reserved sectors */
 11631              		.loc 1 6195 12 view .LVU4012
 11632 0252 B5FBF2F5 		udiv	r5, r5, r2
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 373


 11633              	.LVL1371:
6196:DRIVER/FatFs/source/ff.c **** 				sz_dir = 0;		/* No static directory */
 11634              		.loc 1 6196 5 is_stmt 1 view .LVU4013
6197:DRIVER/FatFs/source/ff.c **** 				if (n_clst <= MAX_FAT16 || n_clst > MAX_FAT32) LEAVE_MKFS(FR_MKFS_ABORTED);
 11635              		.loc 1 6197 5 view .LVU4014
6198:DRIVER/FatFs/source/ff.c **** 			} else {				/* FAT volume */
 11636              		.loc 1 6198 5 view .LVU4015
6198:DRIVER/FatFs/source/ff.c **** 			} else {				/* FAT volume */
 11637              		.loc 1 6198 29 is_stmt 0 view .LVU4016
 11638 0256 A3F57F43 		sub	r3, r3, #65280
 11639              	.LVL1372:
6198:DRIVER/FatFs/source/ff.c **** 			} else {				/* FAT volume */
 11640              		.loc 1 6198 29 view .LVU4017
 11641 025a F63B     		subs	r3, r3, #246
 11642              	.LVL1373:
6198:DRIVER/FatFs/source/ff.c **** 			} else {				/* FAT volume */
 11643              		.loc 1 6198 8 view .LVU4018
 11644 025c 264A     		ldr	r2, .L909+8
 11645 025e 9342     		cmp	r3, r2
 11646 0260 00F20482 		bhi	.L872
6197:DRIVER/FatFs/source/ff.c **** 				if (n_clst <= MAX_FAT16 || n_clst > MAX_FAT32) LEAVE_MKFS(FR_MKFS_ABORTED);
 11647              		.loc 1 6197 12 view .LVU4019
 11648 0264 4FF0000C 		mov	ip, #0
6196:DRIVER/FatFs/source/ff.c **** 				sz_dir = 0;		/* No static directory */
 11649              		.loc 1 6196 12 view .LVU4020
 11650 0268 2020     		movs	r0, #32
 11651 026a 94E7     		b	.L821
 11652              	.LVL1374:
 11653              	.L901:
6191:DRIVER/FatFs/source/ff.c **** 					for (i = 0, pau = 1; cst32[i] && cst32[i] <= n; i++, pau <<= 1) ;	/* Get from table */
 11654              		.loc 1 6191 6 is_stmt 1 view .LVU4021
6191:DRIVER/FatFs/source/ff.c **** 					for (i = 0, pau = 1; cst32[i] && cst32[i] <= n; i++, pau <<= 1) ;	/* Get from table */
 11655              		.loc 1 6191 8 is_stmt 0 view .LVU4022
 11656 026c 480C     		lsrs	r0, r1, #17
 11657              	.LVL1375:
6192:DRIVER/FatFs/source/ff.c **** 				}
 11658              		.loc 1 6192 6 is_stmt 1 view .LVU4023
6192:DRIVER/FatFs/source/ff.c **** 				}
 11659              		.loc 1 6192 13 is_stmt 0 view .LVU4024
 11660 026e 3246     		mov	r2, r6
6192:DRIVER/FatFs/source/ff.c **** 				}
 11661              		.loc 1 6192 22 view .LVU4025
 11662 0270 0127     		movs	r7, #1
6192:DRIVER/FatFs/source/ff.c **** 				}
 11663              		.loc 1 6192 6 view .LVU4026
 11664 0272 01E0     		b	.L819
 11665              	.LVL1376:
 11666              	.L820:
6192:DRIVER/FatFs/source/ff.c **** 				}
 11667              		.loc 1 6192 57 is_stmt 1 discriminator 4 view .LVU4027
6192:DRIVER/FatFs/source/ff.c **** 				}
 11668              		.loc 1 6192 55 is_stmt 0 discriminator 4 view .LVU4028
 11669 0274 0132     		adds	r2, r2, #1
 11670              	.LVL1377:
6192:DRIVER/FatFs/source/ff.c **** 				}
 11671              		.loc 1 6192 63 discriminator 4 view .LVU4029
 11672 0276 7F00     		lsls	r7, r7, #1
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 374


 11673              	.LVL1378:
 11674              	.L819:
6192:DRIVER/FatFs/source/ff.c **** 				}
 11675              		.loc 1 6192 36 is_stmt 1 discriminator 1 view .LVU4030
6192:DRIVER/FatFs/source/ff.c **** 				}
 11676              		.loc 1 6192 32 is_stmt 0 discriminator 1 view .LVU4031
 11677 0278 204B     		ldr	r3, .L909+12
 11678 027a 33F81230 		ldrh	r3, [r3, r2, lsl #1]
6192:DRIVER/FatFs/source/ff.c **** 				}
 11679              		.loc 1 6192 36 discriminator 1 view .LVU4032
 11680 027e 002B     		cmp	r3, #0
 11681 0280 DFD0     		beq	.L818
6192:DRIVER/FatFs/source/ff.c **** 				}
 11682              		.loc 1 6192 36 discriminator 3 view .LVU4033
 11683 0282 8342     		cmp	r3, r0
 11684 0284 F6D9     		bls	.L820
 11685 0286 DCE7     		b	.L818
 11686              	.LVL1379:
 11687              	.L898:
6201:DRIVER/FatFs/source/ff.c **** 					for (i = 0, pau = 1; cst[i] && cst[i] <= n; i++, pau <<= 1) ;	/* Get from table */
 11688              		.loc 1 6201 6 is_stmt 1 view .LVU4034
6201:DRIVER/FatFs/source/ff.c **** 					for (i = 0, pau = 1; cst[i] && cst[i] <= n; i++, pau <<= 1) ;	/* Get from table */
 11689              		.loc 1 6201 8 is_stmt 0 view .LVU4035
 11690 0288 080B     		lsrs	r0, r1, #12
 11691              	.LVL1380:
6202:DRIVER/FatFs/source/ff.c **** 				}
 11692              		.loc 1 6202 6 is_stmt 1 view .LVU4036
6202:DRIVER/FatFs/source/ff.c **** 				}
 11693              		.loc 1 6202 13 is_stmt 0 view .LVU4037
 11694 028a 3246     		mov	r2, r6
6202:DRIVER/FatFs/source/ff.c **** 				}
 11695              		.loc 1 6202 22 view .LVU4038
 11696 028c 0127     		movs	r7, #1
6202:DRIVER/FatFs/source/ff.c **** 				}
 11697              		.loc 1 6202 6 view .LVU4039
 11698 028e 01E0     		b	.L823
 11699              	.LVL1381:
 11700              	.L824:
6202:DRIVER/FatFs/source/ff.c **** 				}
 11701              		.loc 1 6202 53 is_stmt 1 discriminator 4 view .LVU4040
6202:DRIVER/FatFs/source/ff.c **** 				}
 11702              		.loc 1 6202 51 is_stmt 0 discriminator 4 view .LVU4041
 11703 0290 0132     		adds	r2, r2, #1
 11704              	.LVL1382:
6202:DRIVER/FatFs/source/ff.c **** 				}
 11705              		.loc 1 6202 59 discriminator 4 view .LVU4042
 11706 0292 7F00     		lsls	r7, r7, #1
 11707              	.LVL1383:
 11708              	.L823:
6202:DRIVER/FatFs/source/ff.c **** 				}
 11709              		.loc 1 6202 34 is_stmt 1 discriminator 1 view .LVU4043
6202:DRIVER/FatFs/source/ff.c **** 				}
 11710              		.loc 1 6202 30 is_stmt 0 discriminator 1 view .LVU4044
 11711 0294 1A4B     		ldr	r3, .L909+16
 11712 0296 33F81230 		ldrh	r3, [r3, r2, lsl #1]
6202:DRIVER/FatFs/source/ff.c **** 				}
 11713              		.loc 1 6202 34 discriminator 1 view .LVU4045
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 375


 11714 029a 002B     		cmp	r3, #0
 11715 029c 3FF467AF 		beq	.L822
6202:DRIVER/FatFs/source/ff.c **** 				}
 11716              		.loc 1 6202 34 discriminator 3 view .LVU4046
 11717 02a0 8342     		cmp	r3, r0
 11718 02a2 F5D9     		bls	.L824
 11719 02a4 63E7     		b	.L822
 11720              	.LVL1384:
 11721              	.L825:
6208:DRIVER/FatFs/source/ff.c **** 					n = (n_clst * 3 + 1) / 2 + 3;	/* FAT size [byte] */
 11722              		.loc 1 6208 6 is_stmt 1 view .LVU4047
6209:DRIVER/FatFs/source/ff.c **** 				}
 11723              		.loc 1 6209 6 view .LVU4048
6209:DRIVER/FatFs/source/ff.c **** 				}
 11724              		.loc 1 6209 18 is_stmt 0 view .LVU4049
 11725 02a6 03EB4305 		add	r5, r3, r3, lsl #1
6209:DRIVER/FatFs/source/ff.c **** 				}
 11726              		.loc 1 6209 22 view .LVU4050
 11727 02aa 0135     		adds	r5, r5, #1
6209:DRIVER/FatFs/source/ff.c **** 				}
 11728              		.loc 1 6209 27 view .LVU4051
 11729 02ac 6D08     		lsrs	r5, r5, #1
6209:DRIVER/FatFs/source/ff.c **** 				}
 11730              		.loc 1 6209 8 view .LVU4052
 11731 02ae 0335     		adds	r5, r5, #3
 11732              	.LVL1385:
6208:DRIVER/FatFs/source/ff.c **** 					n = (n_clst * 3 + 1) / 2 + 3;	/* FAT size [byte] */
 11733              		.loc 1 6208 11 view .LVU4053
 11734 02b0 4FF0010A 		mov	r10, #1
 11735 02b4 64E7     		b	.L826
 11736              	.LVL1386:
 11737              	.L899:
6221:DRIVER/FatFs/source/ff.c **** 			} else {					/* FAT: Expand FAT */
 11738              		.loc 1 6221 5 is_stmt 1 view .LVU4054
6221:DRIVER/FatFs/source/ff.c **** 			} else {					/* FAT: Expand FAT */
 11739              		.loc 1 6221 12 is_stmt 0 view .LVU4055
 11740 02b6 1844     		add	r0, r0, r3
 11741              	.LVL1387:
6221:DRIVER/FatFs/source/ff.c **** 			} else {					/* FAT: Expand FAT */
 11742              		.loc 1 6221 18 is_stmt 1 view .LVU4056
6221:DRIVER/FatFs/source/ff.c **** 			} else {					/* FAT: Expand FAT */
 11743              		.loc 1 6221 24 is_stmt 0 view .LVU4057
 11744 02b8 9E44     		add	lr, lr, r3
 11745              	.LVL1388:
6221:DRIVER/FatFs/source/ff.c **** 			} else {					/* FAT: Expand FAT */
 11746              		.loc 1 6221 24 view .LVU4058
 11747 02ba 8DE7     		b	.L828
 11748              	.LVL1389:
 11749              	.L900:
6233:DRIVER/FatFs/source/ff.c **** 					if (sz_au == 0 && (sz_au = pau / 2) != 0) continue;	/* Adjust cluster size and retry */
 11750              		.loc 1 6233 5 is_stmt 1 view .LVU4059
6233:DRIVER/FatFs/source/ff.c **** 					if (sz_au == 0 && (sz_au = pau / 2) != 0) continue;	/* Adjust cluster size and retry */
 11751              		.loc 1 6233 8 is_stmt 0 view .LVU4060
 11752 02bc 4FF6F573 		movw	r3, #65525
 11753 02c0 9845     		cmp	r8, r3
 11754 02c2 9BD8     		bhi	.L830
6234:DRIVER/FatFs/source/ff.c **** 					LEAVE_MKFS(FR_MKFS_ABORTED);
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 376


 11755              		.loc 1 6234 6 is_stmt 1 view .LVU4061
6234:DRIVER/FatFs/source/ff.c **** 					LEAVE_MKFS(FR_MKFS_ABORTED);
 11756              		.loc 1 6234 9 is_stmt 0 view .LVU4062
 11757 02c4 002E     		cmp	r6, #0
 11758 02c6 40F0D581 		bne	.L875
6234:DRIVER/FatFs/source/ff.c **** 					LEAVE_MKFS(FR_MKFS_ABORTED);
 11759              		.loc 1 6234 31 discriminator 1 view .LVU4063
 11760 02ca 7E08     		lsrs	r6, r7, #1
 11761              	.LVL1390:
6234:DRIVER/FatFs/source/ff.c **** 					LEAVE_MKFS(FR_MKFS_ABORTED);
 11762              		.loc 1 6234 21 discriminator 1 view .LVU4064
 11763 02cc 012F     		cmp	r7, #1
 11764 02ce 3FF647AF 		bhi	.L816
6235:DRIVER/FatFs/source/ff.c **** 				}
 11765              		.loc 1 6235 6 view .LVU4065
 11766 02d2 0E20     		movs	r0, #14
 11767              	.LVL1391:
6235:DRIVER/FatFs/source/ff.c **** 				}
 11768              		.loc 1 6235 6 view .LVU4066
 11769 02d4 A8E1     		b	.L803
 11770              	.LVL1392:
 11771              	.L833:
6248:DRIVER/FatFs/source/ff.c **** 				}
6249:DRIVER/FatFs/source/ff.c **** 				if  (n_clst <= MAX_FAT12) {	/* Too few clusters for FAT16 */
 11772              		.loc 1 6249 5 is_stmt 1 view .LVU4067
 11773              		.loc 1 6249 9 is_stmt 0 view .LVU4068
 11774 02d6 40F6F573 		movw	r3, #4085
 11775 02da 9845     		cmp	r8, r3
 11776 02dc 12D8     		bhi	.L832
6250:DRIVER/FatFs/source/ff.c **** 					if (sz_au == 0 && (sz_au = pau * 2) <= 128) continue;	/* Adjust cluster size and retry */
 11777              		.loc 1 6250 6 is_stmt 1 view .LVU4069
 11778              		.loc 1 6250 9 is_stmt 0 view .LVU4070
 11779 02de 002E     		cmp	r6, #0
 11780 02e0 40F0CC81 		bne	.L879
 11781              		.loc 1 6250 31 discriminator 1 view .LVU4071
 11782 02e4 7E00     		lsls	r6, r7, #1
 11783              	.LVL1393:
 11784              		.loc 1 6250 21 discriminator 1 view .LVU4072
 11785 02e6 802E     		cmp	r6, #128
 11786 02e8 7FF63AAF 		bls	.L816
6251:DRIVER/FatFs/source/ff.c **** 					LEAVE_MKFS(FR_MKFS_ABORTED);
 11787              		.loc 1 6251 6 view .LVU4073
 11788 02ec 0E20     		movs	r0, #14
 11789              	.LVL1394:
 11790              		.loc 1 6251 6 view .LVU4074
 11791 02ee 9BE1     		b	.L803
 11792              	.L910:
 11793              		.align	2
 11794              	.L909:
 11795 02f0 00000000 		.word	FatFs
 11796 02f4 00000000 		.word	defopt.2
 11797 02f8 FFFFFE0F 		.word	268369919
 11798 02fc 00000000 		.word	cst32.1
 11799 0300 00000000 		.word	cst.0
 11800              	.LVL1395:
 11801              	.L832:
6252:DRIVER/FatFs/source/ff.c **** 				}
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 377


6253:DRIVER/FatFs/source/ff.c **** 			}
6254:DRIVER/FatFs/source/ff.c **** 			if (fsty == FS_FAT12 && n_clst > MAX_FAT12) LEAVE_MKFS(FR_MKFS_ABORTED);	/* Too many clusters fo
 11802              		.loc 1 6254 7 view .LVU4075
 11803 0304 0790     		str	r0, [sp, #28]
 11804 0306 CDF810E0 		str	lr, [sp, #16]
 11805 030a CDF820C0 		str	ip, [sp, #32]
 11806              		.loc 1 6254 4 is_stmt 1 view .LVU4076
 11807              		.loc 1 6254 7 is_stmt 0 view .LVU4077
 11808 030e BAF1010F 		cmp	r10, #1
 11809 0312 04D1     		bne	.L835
 11810              		.loc 1 6254 25 discriminator 1 view .LVU4078
 11811 0314 40F6F573 		movw	r3, #4085
 11812 0318 9845     		cmp	r8, r3
 11813 031a 00F2B181 		bhi	.L880
 11814              	.L835:
6255:DRIVER/FatFs/source/ff.c **** 
6256:DRIVER/FatFs/source/ff.c **** 			/* Ok, it is the valid cluster configuration */
6257:DRIVER/FatFs/source/ff.c **** 			break;
 11815              		.loc 1 6257 4 is_stmt 1 view .LVU4079
6258:DRIVER/FatFs/source/ff.c **** 		} while (1);
6259:DRIVER/FatFs/source/ff.c **** 
6260:DRIVER/FatFs/source/ff.c **** #if FF_USE_TRIM
6261:DRIVER/FatFs/source/ff.c **** 		lba[0] = b_vol; lba[1] = b_vol + sz_vol - 1;	/* Inform storage device that the volume area may be
6262:DRIVER/FatFs/source/ff.c **** 		disk_ioctl(pdrv, CTRL_TRIM, lba);
6263:DRIVER/FatFs/source/ff.c **** #endif
6264:DRIVER/FatFs/source/ff.c **** 		/* Create FAT VBR */
6265:DRIVER/FatFs/source/ff.c **** 		memset(buf, 0, ss);
 11816              		.loc 1 6265 3 view .LVU4080
 11817 031e BDF83E20 		ldrh	r2, [sp, #62]
 11818 0322 0021     		movs	r1, #0
 11819 0324 019E     		ldr	r6, [sp, #4]
 11820              	.LVL1396:
 11821              		.loc 1 6265 3 is_stmt 0 view .LVU4081
 11822 0326 3046     		mov	r0, r6
 11823              	.LVL1397:
 11824              		.loc 1 6265 3 view .LVU4082
 11825 0328 FFF7FEFF 		bl	memset
 11826              	.LVL1398:
6266:DRIVER/FatFs/source/ff.c **** 		memcpy(buf + BS_JmpBoot, "\xEB\xFE\x90" "MSDOS5.0", 11);	/* Boot jump code (x86), OEM name */
 11827              		.loc 1 6266 3 is_stmt 1 view .LVU4083
 11828 032c C94B     		ldr	r3, .L911
 11829 032e 03CB     		ldmia	r3!, {r0, r1}
 11830 0330 3060     		str	r0, [r6]	@ unaligned
 11831 0332 3046     		mov	r0, r6
 11832 0334 7160     		str	r1, [r6, #4]	@ unaligned
 11833 0336 1A88     		ldrh	r2, [r3]	@ unaligned
 11834 0338 9B78     		ldrb	r3, [r3, #2]	@ zero_extendqisi2
 11835 033a 3281     		strh	r2, [r6, #8]	@ unaligned
 11836 033c B372     		strb	r3, [r6, #10]
6267:DRIVER/FatFs/source/ff.c **** 		st_word(buf + BPB_BytsPerSec, ss);				/* Sector size [byte] */
 11837              		.loc 1 6267 3 view .LVU4084
 11838 033e BDF83E10 		ldrh	r1, [sp, #62]
 11839 0342 0B30     		adds	r0, r0, #11
 11840 0344 FFF7FEFF 		bl	st_word
 11841              	.LVL1399:
6268:DRIVER/FatFs/source/ff.c **** 		buf[BPB_SecPerClus] = (BYTE)pau;				/* Cluster size [sector] */
 11842              		.loc 1 6268 3 view .LVU4085
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 378


 11843              		.loc 1 6268 23 is_stmt 0 view .LVU4086
 11844 0348 3046     		mov	r0, r6
 11845 034a 7773     		strb	r7, [r6, #13]
6269:DRIVER/FatFs/source/ff.c **** 		st_word(buf + BPB_RsvdSecCnt, (WORD)sz_rsv);	/* Size of reserved area */
 11846              		.loc 1 6269 3 is_stmt 1 view .LVU4087
 11847 034c BDF81C10 		ldrh	r1, [sp, #28]
 11848 0350 0E30     		adds	r0, r0, #14
 11849 0352 FFF7FEFF 		bl	st_word
 11850              	.LVL1400:
6270:DRIVER/FatFs/source/ff.c **** 		buf[BPB_NumFATs] = (BYTE)n_fat;					/* Number of FATs */
 11851              		.loc 1 6270 3 view .LVU4088
 11852              		.loc 1 6270 20 is_stmt 0 view .LVU4089
 11853 0356 3046     		mov	r0, r6
 11854 0358 86F810B0 		strb	fp, [r6, #16]
6271:DRIVER/FatFs/source/ff.c **** 		st_word(buf + BPB_RootEntCnt, (WORD)((fsty == FS_FAT32) ? 0 : n_root));	/* Number of root directo
 11855              		.loc 1 6271 3 is_stmt 1 view .LVU4090
 11856 035c 1130     		adds	r0, r0, #17
 11857 035e BAF1030F 		cmp	r10, #3
 11858 0362 00F09C80 		beq	.L881
 11859              		.loc 1 6271 3 is_stmt 0 discriminator 1 view .LVU4091
 11860 0366 1FFA89F1 		uxth	r1, r9
 11861              	.L836:
 11862              		.loc 1 6271 3 discriminator 4 view .LVU4092
 11863 036a FFF7FEFF 		bl	st_word
 11864              	.LVL1401:
6272:DRIVER/FatFs/source/ff.c **** 		if (sz_vol < 0x10000) {
 11865              		.loc 1 6272 3 is_stmt 1 discriminator 4 view .LVU4093
 11866              		.loc 1 6272 14 is_stmt 0 discriminator 4 view .LVU4094
 11867 036e 0D99     		ldr	r1, [sp, #52]
 11868              		.loc 1 6272 6 discriminator 4 view .LVU4095
 11869 0370 B1F5803F 		cmp	r1, #65536
 11870 0374 80F09580 		bcs	.L837
6273:DRIVER/FatFs/source/ff.c **** 			st_word(buf + BPB_TotSec16, (WORD)sz_vol);	/* Volume size in 16-bit LBA */
 11871              		.loc 1 6273 4 is_stmt 1 view .LVU4096
 11872 0378 89B2     		uxth	r1, r1
 11873 037a 019B     		ldr	r3, [sp, #4]
 11874 037c 03F11300 		add	r0, r3, #19
 11875 0380 FFF7FEFF 		bl	st_word
 11876              	.LVL1402:
 11877              	.L838:
6274:DRIVER/FatFs/source/ff.c **** 		} else {
6275:DRIVER/FatFs/source/ff.c **** 			st_dword(buf + BPB_TotSec32, (DWORD)sz_vol);	/* Volume size in 32-bit LBA */
6276:DRIVER/FatFs/source/ff.c **** 		}
6277:DRIVER/FatFs/source/ff.c **** 		buf[BPB_Media] = 0xF8;							/* Media descriptor byte */
 11878              		.loc 1 6277 3 view .LVU4097
 11879              		.loc 1 6277 18 is_stmt 0 view .LVU4098
 11880 0384 F823     		movs	r3, #248
 11881 0386 019E     		ldr	r6, [sp, #4]
 11882 0388 7375     		strb	r3, [r6, #21]
6278:DRIVER/FatFs/source/ff.c **** 		st_word(buf + BPB_SecPerTrk, 63);				/* Number of sectors per track (for int13) */
 11883              		.loc 1 6278 3 is_stmt 1 view .LVU4099
 11884 038a 3F21     		movs	r1, #63
 11885 038c 06F11800 		add	r0, r6, #24
 11886 0390 FFF7FEFF 		bl	st_word
 11887              	.LVL1403:
6279:DRIVER/FatFs/source/ff.c **** 		st_word(buf + BPB_NumHeads, 255);				/* Number of heads (for int13) */
 11888              		.loc 1 6279 3 view .LVU4100
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 379


 11889 0394 FF21     		movs	r1, #255
 11890 0396 06F11A00 		add	r0, r6, #26
 11891 039a FFF7FEFF 		bl	st_word
 11892              	.LVL1404:
6280:DRIVER/FatFs/source/ff.c **** 		st_dword(buf + BPB_HiddSec, (DWORD)b_vol);		/* Volume offset in the physical drive [sector] */
 11893              		.loc 1 6280 3 view .LVU4101
 11894 039e 0299     		ldr	r1, [sp, #8]
 11895 03a0 06F11C00 		add	r0, r6, #28
 11896 03a4 FFF7FEFF 		bl	st_dword
 11897              	.LVL1405:
6281:DRIVER/FatFs/source/ff.c **** 		if (fsty == FS_FAT32) {
 11898              		.loc 1 6281 3 view .LVU4102
 11899              		.loc 1 6281 6 is_stmt 0 view .LVU4103
 11900 03a8 BAF1030F 		cmp	r10, #3
 11901 03ac 7FD0     		beq	.L902
6282:DRIVER/FatFs/source/ff.c **** 			st_dword(buf + BS_VolID32, vsn);			/* VSN */
6283:DRIVER/FatFs/source/ff.c **** 			st_dword(buf + BPB_FATSz32, sz_fat);		/* FAT size [sector] */
6284:DRIVER/FatFs/source/ff.c **** 			st_dword(buf + BPB_RootClus32, 2);			/* Root directory cluster # (2) */
6285:DRIVER/FatFs/source/ff.c **** 			st_word(buf + BPB_FSInfo32, 1);				/* Offset of FSINFO sector (VBR + 1) */
6286:DRIVER/FatFs/source/ff.c **** 			st_word(buf + BPB_BkBootSec32, 6);			/* Offset of backup VBR (VBR + 6) */
6287:DRIVER/FatFs/source/ff.c **** 			buf[BS_DrvNum32] = 0x80;					/* Drive number (for int13) */
6288:DRIVER/FatFs/source/ff.c **** 			buf[BS_BootSig32] = 0x29;					/* Extended boot signature */
6289:DRIVER/FatFs/source/ff.c **** 			memcpy(buf + BS_VolLab32, "NO NAME    " "FAT32   ", 19);	/* Volume label, FAT signature */
6290:DRIVER/FatFs/source/ff.c **** 		} else {
6291:DRIVER/FatFs/source/ff.c **** 			st_dword(buf + BS_VolID, vsn);				/* VSN */
 11902              		.loc 1 6291 4 is_stmt 1 view .LVU4104
 11903 03ae 0699     		ldr	r1, [sp, #24]
 11904 03b0 019E     		ldr	r6, [sp, #4]
 11905 03b2 06F12700 		add	r0, r6, #39
 11906 03b6 FFF7FEFF 		bl	st_dword
 11907              	.LVL1406:
6292:DRIVER/FatFs/source/ff.c **** 			st_word(buf + BPB_FATSz16, (WORD)sz_fat);	/* FAT size [sector] */
 11908              		.loc 1 6292 4 view .LVU4105
 11909 03ba A9B2     		uxth	r1, r5
 11910 03bc 06F11600 		add	r0, r6, #22
 11911 03c0 FFF7FEFF 		bl	st_word
 11912              	.LVL1407:
6293:DRIVER/FatFs/source/ff.c **** 			buf[BS_DrvNum] = 0x80;						/* Drive number (for int13) */
 11913              		.loc 1 6293 4 view .LVU4106
 11914              		.loc 1 6293 19 is_stmt 0 view .LVU4107
 11915 03c4 8023     		movs	r3, #128
 11916 03c6 86F82430 		strb	r3, [r6, #36]
6294:DRIVER/FatFs/source/ff.c **** 			buf[BS_BootSig] = 0x29;						/* Extended boot signature */
 11917              		.loc 1 6294 4 is_stmt 1 view .LVU4108
 11918              		.loc 1 6294 20 is_stmt 0 view .LVU4109
 11919 03ca 2923     		movs	r3, #41
 11920 03cc B446     		mov	ip, r6
 11921 03ce 86F82630 		strb	r3, [r6, #38]
6295:DRIVER/FatFs/source/ff.c **** 			memcpy(buf + BS_VolLab, "NO NAME    " "FAT     ", 19);	/* Volume label, FAT signature */
 11922              		.loc 1 6295 4 is_stmt 1 view .LVU4110
 11923 03d2 A14E     		ldr	r6, .L911+4
 11924 03d4 0FCE     		ldmia	r6!, {r0, r1, r2, r3}
 11925 03d6 CCF82B00 		str	r0, [ip, #43]	@ unaligned
 11926 03da CCF82F10 		str	r1, [ip, #47]	@ unaligned
 11927 03de CCF83320 		str	r2, [ip, #51]	@ unaligned
 11928 03e2 CCF83730 		str	r3, [ip, #55]	@ unaligned
 11929 03e6 3288     		ldrh	r2, [r6]	@ unaligned
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 380


 11930 03e8 B378     		ldrb	r3, [r6, #2]	@ zero_extendqisi2
 11931 03ea ACF83B20 		strh	r2, [ip, #59]	@ unaligned
 11932 03ee 8CF83D30 		strb	r3, [ip, #61]
 11933              	.L840:
6296:DRIVER/FatFs/source/ff.c **** 		}
6297:DRIVER/FatFs/source/ff.c **** 		st_word(buf + BS_55AA, 0xAA55);					/* Signature (offset is fixed here regardless of sector size)
 11934              		.loc 1 6297 3 view .LVU4111
 11935 03f2 DDF80490 		ldr	r9, [sp, #4]
 11936              	.LVL1408:
 11937              		.loc 1 6297 3 is_stmt 0 view .LVU4112
 11938 03f6 09F5FF76 		add	r6, r9, #510
 11939 03fa 4AF65521 		movw	r1, #43605
 11940 03fe 3046     		mov	r0, r6
 11941 0400 FFF7FEFF 		bl	st_word
 11942              	.LVL1409:
6298:DRIVER/FatFs/source/ff.c **** 		if (disk_write(pdrv, buf, b_vol, 1) != RES_OK) LEAVE_MKFS(FR_DISK_ERR);	/* Write it to the VBR se
 11943              		.loc 1 6298 3 is_stmt 1 view .LVU4113
 11944              		.loc 1 6298 7 is_stmt 0 view .LVU4114
 11945 0404 0123     		movs	r3, #1
 11946 0406 029A     		ldr	r2, [sp, #8]
 11947 0408 4946     		mov	r1, r9
 11948 040a 2046     		mov	r0, r4
 11949 040c FFF7FEFF 		bl	disk_write
 11950              	.LVL1410:
 11951              		.loc 1 6298 6 view .LVU4115
 11952 0410 0028     		cmp	r0, #0
 11953 0412 40F03781 		bne	.L882
6299:DRIVER/FatFs/source/ff.c **** 
6300:DRIVER/FatFs/source/ff.c **** 		/* Create FSINFO record if needed */
6301:DRIVER/FatFs/source/ff.c **** 		if (fsty == FS_FAT32) {
 11954              		.loc 1 6301 3 is_stmt 1 view .LVU4116
 11955              		.loc 1 6301 6 is_stmt 0 view .LVU4117
 11956 0416 BAF1030F 		cmp	r10, #3
 11957 041a 7AD0     		beq	.L903
 11958              	.L841:
6302:DRIVER/FatFs/source/ff.c **** 			disk_write(pdrv, buf, b_vol + 6, 1);		/* Write backup VBR (VBR + 6) */
6303:DRIVER/FatFs/source/ff.c **** 			memset(buf, 0, ss);
6304:DRIVER/FatFs/source/ff.c **** 			st_dword(buf + FSI_LeadSig, 0x41615252);
6305:DRIVER/FatFs/source/ff.c **** 			st_dword(buf + FSI_StrucSig, 0x61417272);
6306:DRIVER/FatFs/source/ff.c **** 			st_dword(buf + FSI_Free_Count, n_clst - 1);	/* Number of free clusters */
6307:DRIVER/FatFs/source/ff.c **** 			st_dword(buf + FSI_Nxt_Free, 2);			/* Last allocated cluster# */
6308:DRIVER/FatFs/source/ff.c **** 			st_word(buf + BS_55AA, 0xAA55);
6309:DRIVER/FatFs/source/ff.c **** 			disk_write(pdrv, buf, b_vol + 7, 1);		/* Write backup FSINFO (VBR + 7) */
6310:DRIVER/FatFs/source/ff.c **** 			disk_write(pdrv, buf, b_vol + 1, 1);		/* Write original FSINFO (VBR + 1) */
6311:DRIVER/FatFs/source/ff.c **** 		}
6312:DRIVER/FatFs/source/ff.c **** 
6313:DRIVER/FatFs/source/ff.c **** 		/* Initialize FAT area */
6314:DRIVER/FatFs/source/ff.c **** 		memset(buf, 0, sz_buf * ss);
 11959              		.loc 1 6314 3 is_stmt 1 view .LVU4118
 11960 041c BDF83E20 		ldrh	r2, [sp, #62]
 11961 0420 039E     		ldr	r6, [sp, #12]
 11962 0422 06FB02F2 		mul	r2, r6, r2
 11963 0426 0021     		movs	r1, #0
 11964 0428 DDF80480 		ldr	r8, [sp, #4]
 11965              	.LVL1411:
 11966              		.loc 1 6314 3 is_stmt 0 view .LVU4119
 11967 042c 4046     		mov	r0, r8
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 381


 11968 042e FFF7FEFF 		bl	memset
 11969              	.LVL1412:
6315:DRIVER/FatFs/source/ff.c **** 		sect = b_fat;		/* FAT start sector */
 11970              		.loc 1 6315 3 is_stmt 1 view .LVU4120
6316:DRIVER/FatFs/source/ff.c **** 		for (i = 0; i < n_fat; i++) {			/* Initialize FATs each */
 11971              		.loc 1 6316 3 view .LVU4121
 11972              		.loc 1 6316 10 is_stmt 0 view .LVU4122
 11973 0432 4FF00009 		mov	r9, #0
 11974 0436 0697     		str	r7, [sp, #24]
 11975              	.LVL1413:
 11976              		.loc 1 6316 10 view .LVU4123
 11977 0438 049F     		ldr	r7, [sp, #16]
 11978              	.LVL1414:
 11979              		.loc 1 6316 10 view .LVU4124
 11980 043a 0295     		str	r5, [sp, #8]
 11981              	.LVL1415:
 11982              		.loc 1 6316 10 view .LVU4125
 11983 043c 5D46     		mov	r5, fp
 11984              	.LVL1416:
 11985              		.loc 1 6316 10 view .LVU4126
 11986 043e B346     		mov	fp, r6
 11987              	.LVL1417:
 11988              	.L842:
 11989              		.loc 1 6316 17 is_stmt 1 discriminator 1 view .LVU4127
 11990 0440 A945     		cmp	r9, r5
 11991 0442 80F0B080 		bcs	.L904
6317:DRIVER/FatFs/source/ff.c **** 			if (fsty == FS_FAT32) {
 11992              		.loc 1 6317 4 view .LVU4128
 11993              		.loc 1 6317 7 is_stmt 0 view .LVU4129
 11994 0446 BAF1030F 		cmp	r10, #3
 11995 044a 00F09880 		beq	.L905
6318:DRIVER/FatFs/source/ff.c **** 				st_dword(buf + 0, 0xFFFFFFF8);	/* FAT[0] */
6319:DRIVER/FatFs/source/ff.c **** 				st_dword(buf + 4, 0xFFFFFFFF);	/* FAT[1] */
6320:DRIVER/FatFs/source/ff.c **** 				st_dword(buf + 8, 0x0FFFFFFF);	/* FAT[2] (root directory) */
6321:DRIVER/FatFs/source/ff.c **** 			} else {
6322:DRIVER/FatFs/source/ff.c **** 				st_dword(buf + 0, (fsty == FS_FAT12) ? 0xFFFFF8 : 0xFFFFFFF8);	/* FAT[0] and FAT[1] */
 11996              		.loc 1 6322 5 is_stmt 1 view .LVU4130
 11997 044e BAF1010F 		cmp	r10, #1
 11998 0452 00F0A680 		beq	.L906
 11999 0456 6FF00701 		mvn	r1, #7
 12000              	.L845:
 12001              		.loc 1 6322 5 is_stmt 0 discriminator 4 view .LVU4131
 12002 045a 4046     		mov	r0, r8
 12003 045c FFF7FEFF 		bl	st_dword
 12004              	.LVL1418:
 12005              	.L844:
 12006              		.loc 1 6322 5 view .LVU4132
 12007 0460 029E     		ldr	r6, [sp, #8]
 12008 0462 CDF810A0 		str	r10, [sp, #16]
 12009              	.L846:
 12010              	.LVL1419:
6323:DRIVER/FatFs/source/ff.c **** 			}
6324:DRIVER/FatFs/source/ff.c **** 			nsect = sz_fat;		/* Number of FAT sectors */
6325:DRIVER/FatFs/source/ff.c **** 			do {	/* Fill FAT sectors */
 12011              		.loc 1 6325 4 is_stmt 1 view .LVU4133
6326:DRIVER/FatFs/source/ff.c **** 				n = (nsect > sz_buf) ? sz_buf : nsect;
 12012              		.loc 1 6326 5 view .LVU4134
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 382


 12013              		.loc 1 6326 7 is_stmt 0 view .LVU4135
 12014 0466 B246     		mov	r10, r6
 12015 0468 5E45     		cmp	r6, fp
 12016 046a 28BF     		it	cs
 12017 046c DA46     		movcs	r10, fp
 12018              	.LVL1420:
6327:DRIVER/FatFs/source/ff.c **** 				if (disk_write(pdrv, buf, sect, (UINT)n) != RES_OK) LEAVE_MKFS(FR_DISK_ERR);
 12019              		.loc 1 6327 5 is_stmt 1 view .LVU4136
 12020              		.loc 1 6327 9 is_stmt 0 view .LVU4137
 12021 046e 5346     		mov	r3, r10
 12022 0470 3A46     		mov	r2, r7
 12023 0472 4146     		mov	r1, r8
 12024 0474 2046     		mov	r0, r4
 12025 0476 FFF7FEFF 		bl	disk_write
 12026              	.LVL1421:
 12027              		.loc 1 6327 8 view .LVU4138
 12028 047a 0028     		cmp	r0, #0
 12029 047c 40F00481 		bne	.L884
6328:DRIVER/FatFs/source/ff.c **** 				memset(buf, 0, ss);	/* Rest of FAT all are cleared */
 12030              		.loc 1 6328 5 is_stmt 1 view .LVU4139
 12031 0480 BDF83E20 		ldrh	r2, [sp, #62]
 12032 0484 0021     		movs	r1, #0
 12033 0486 4046     		mov	r0, r8
 12034 0488 FFF7FEFF 		bl	memset
 12035              	.LVL1422:
6329:DRIVER/FatFs/source/ff.c **** 				sect += n; nsect -= n;
 12036              		.loc 1 6329 5 view .LVU4140
 12037              		.loc 1 6329 10 is_stmt 0 view .LVU4141
 12038 048c 5744     		add	r7, r7, r10
 12039              	.LVL1423:
 12040              		.loc 1 6329 16 is_stmt 1 view .LVU4142
6330:DRIVER/FatFs/source/ff.c **** 			} while (nsect);
 12041              		.loc 1 6330 13 view .LVU4143
 12042 048e B6EB0A06 		subs	r6, r6, r10
 12043              	.LVL1424:
 12044              		.loc 1 6330 13 is_stmt 0 view .LVU4144
 12045 0492 E8D1     		bne	.L846
6316:DRIVER/FatFs/source/ff.c **** 			if (fsty == FS_FAT32) {
 12046              		.loc 1 6316 27 discriminator 2 view .LVU4145
 12047 0494 DDF810A0 		ldr	r10, [sp, #16]
 12048              	.LVL1425:
6316:DRIVER/FatFs/source/ff.c **** 			if (fsty == FS_FAT32) {
 12049              		.loc 1 6316 27 is_stmt 1 discriminator 2 view .LVU4146
 12050 0498 09F10109 		add	r9, r9, #1
 12051              	.LVL1426:
6316:DRIVER/FatFs/source/ff.c **** 			if (fsty == FS_FAT32) {
 12052              		.loc 1 6316 27 is_stmt 0 discriminator 2 view .LVU4147
 12053 049c D0E7     		b	.L842
 12054              	.LVL1427:
 12055              	.L881:
6271:DRIVER/FatFs/source/ff.c **** 		if (sz_vol < 0x10000) {
 12056              		.loc 1 6271 3 view .LVU4148
 12057 049e 0021     		movs	r1, #0
 12058 04a0 63E7     		b	.L836
 12059              	.L837:
6275:DRIVER/FatFs/source/ff.c **** 		}
 12060              		.loc 1 6275 4 is_stmt 1 view .LVU4149
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 383


 12061 04a2 019B     		ldr	r3, [sp, #4]
 12062 04a4 03F12000 		add	r0, r3, #32
 12063 04a8 FFF7FEFF 		bl	st_dword
 12064              	.LVL1428:
 12065 04ac 6AE7     		b	.L838
 12066              	.L902:
6282:DRIVER/FatFs/source/ff.c **** 			st_dword(buf + BPB_FATSz32, sz_fat);		/* FAT size [sector] */
 12067              		.loc 1 6282 4 view .LVU4150
 12068 04ae 0699     		ldr	r1, [sp, #24]
 12069 04b0 019E     		ldr	r6, [sp, #4]
 12070 04b2 06F14300 		add	r0, r6, #67
 12071 04b6 FFF7FEFF 		bl	st_dword
 12072              	.LVL1429:
6283:DRIVER/FatFs/source/ff.c **** 			st_dword(buf + BPB_RootClus32, 2);			/* Root directory cluster # (2) */
 12073              		.loc 1 6283 4 view .LVU4151
 12074 04ba 2946     		mov	r1, r5
 12075 04bc 06F12400 		add	r0, r6, #36
 12076 04c0 FFF7FEFF 		bl	st_dword
 12077              	.LVL1430:
6284:DRIVER/FatFs/source/ff.c **** 			st_word(buf + BPB_FSInfo32, 1);				/* Offset of FSINFO sector (VBR + 1) */
 12078              		.loc 1 6284 4 view .LVU4152
 12079 04c4 0221     		movs	r1, #2
 12080 04c6 06F12C00 		add	r0, r6, #44
 12081 04ca FFF7FEFF 		bl	st_dword
 12082              	.LVL1431:
6285:DRIVER/FatFs/source/ff.c **** 			st_word(buf + BPB_BkBootSec32, 6);			/* Offset of backup VBR (VBR + 6) */
 12083              		.loc 1 6285 4 view .LVU4153
 12084 04ce 0121     		movs	r1, #1
 12085 04d0 06F13000 		add	r0, r6, #48
 12086 04d4 FFF7FEFF 		bl	st_word
 12087              	.LVL1432:
6286:DRIVER/FatFs/source/ff.c **** 			buf[BS_DrvNum32] = 0x80;					/* Drive number (for int13) */
 12088              		.loc 1 6286 4 view .LVU4154
 12089 04d8 0621     		movs	r1, #6
 12090 04da 06F13200 		add	r0, r6, #50
 12091 04de FFF7FEFF 		bl	st_word
 12092              	.LVL1433:
6287:DRIVER/FatFs/source/ff.c **** 			buf[BS_BootSig32] = 0x29;					/* Extended boot signature */
 12093              		.loc 1 6287 4 view .LVU4155
6287:DRIVER/FatFs/source/ff.c **** 			buf[BS_BootSig32] = 0x29;					/* Extended boot signature */
 12094              		.loc 1 6287 21 is_stmt 0 view .LVU4156
 12095 04e2 8023     		movs	r3, #128
 12096 04e4 86F84030 		strb	r3, [r6, #64]
6288:DRIVER/FatFs/source/ff.c **** 			memcpy(buf + BS_VolLab32, "NO NAME    " "FAT32   ", 19);	/* Volume label, FAT signature */
 12097              		.loc 1 6288 4 is_stmt 1 view .LVU4157
6288:DRIVER/FatFs/source/ff.c **** 			memcpy(buf + BS_VolLab32, "NO NAME    " "FAT32   ", 19);	/* Volume label, FAT signature */
 12098              		.loc 1 6288 22 is_stmt 0 view .LVU4158
 12099 04e8 2923     		movs	r3, #41
 12100 04ea B446     		mov	ip, r6
 12101 04ec 86F84230 		strb	r3, [r6, #66]
6289:DRIVER/FatFs/source/ff.c **** 		} else {
 12102              		.loc 1 6289 4 is_stmt 1 view .LVU4159
 12103 04f0 5A4E     		ldr	r6, .L911+8
 12104 04f2 0FCE     		ldmia	r6!, {r0, r1, r2, r3}
 12105 04f4 CCF84700 		str	r0, [ip, #71]	@ unaligned
 12106 04f8 CCF84B10 		str	r1, [ip, #75]	@ unaligned
 12107 04fc CCF84F20 		str	r2, [ip, #79]	@ unaligned
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 384


 12108 0500 CCF85330 		str	r3, [ip, #83]	@ unaligned
 12109 0504 3288     		ldrh	r2, [r6]	@ unaligned
 12110 0506 B378     		ldrb	r3, [r6, #2]	@ zero_extendqisi2
 12111 0508 ACF85720 		strh	r2, [ip, #87]	@ unaligned
 12112 050c 8CF85930 		strb	r3, [ip, #89]
 12113 0510 6FE7     		b	.L840
 12114              	.LVL1434:
 12115              	.L903:
6302:DRIVER/FatFs/source/ff.c **** 			memset(buf, 0, ss);
 12116              		.loc 1 6302 4 view .LVU4160
 12117 0512 0123     		movs	r3, #1
 12118 0514 029A     		ldr	r2, [sp, #8]
 12119 0516 0632     		adds	r2, r2, #6
 12120 0518 DDF80490 		ldr	r9, [sp, #4]
 12121 051c 4946     		mov	r1, r9
 12122 051e 2046     		mov	r0, r4
 12123 0520 FFF7FEFF 		bl	disk_write
 12124              	.LVL1435:
6303:DRIVER/FatFs/source/ff.c **** 			st_dword(buf + FSI_LeadSig, 0x41615252);
 12125              		.loc 1 6303 4 view .LVU4161
 12126 0524 BDF83E20 		ldrh	r2, [sp, #62]
 12127 0528 0021     		movs	r1, #0
 12128 052a 4846     		mov	r0, r9
 12129 052c FFF7FEFF 		bl	memset
 12130              	.LVL1436:
6304:DRIVER/FatFs/source/ff.c **** 			st_dword(buf + FSI_StrucSig, 0x61417272);
 12131              		.loc 1 6304 4 view .LVU4162
 12132 0530 4B49     		ldr	r1, .L911+12
 12133 0532 4846     		mov	r0, r9
 12134 0534 FFF7FEFF 		bl	st_dword
 12135              	.LVL1437:
6305:DRIVER/FatFs/source/ff.c **** 			st_dword(buf + FSI_Free_Count, n_clst - 1);	/* Number of free clusters */
 12136              		.loc 1 6305 4 view .LVU4163
 12137 0538 4A49     		ldr	r1, .L911+16
 12138 053a 09F5F270 		add	r0, r9, #484
 12139 053e FFF7FEFF 		bl	st_dword
 12140              	.LVL1438:
6306:DRIVER/FatFs/source/ff.c **** 			st_dword(buf + FSI_Nxt_Free, 2);			/* Last allocated cluster# */
 12141              		.loc 1 6306 4 view .LVU4164
 12142 0542 08F1FF31 		add	r1, r8, #-1
 12143 0546 09F5F470 		add	r0, r9, #488
 12144 054a FFF7FEFF 		bl	st_dword
 12145              	.LVL1439:
6307:DRIVER/FatFs/source/ff.c **** 			st_word(buf + BS_55AA, 0xAA55);
 12146              		.loc 1 6307 4 view .LVU4165
 12147 054e 0221     		movs	r1, #2
 12148 0550 09F5F670 		add	r0, r9, #492
 12149 0554 FFF7FEFF 		bl	st_dword
 12150              	.LVL1440:
6308:DRIVER/FatFs/source/ff.c **** 			disk_write(pdrv, buf, b_vol + 7, 1);		/* Write backup FSINFO (VBR + 7) */
 12151              		.loc 1 6308 4 view .LVU4166
 12152 0558 4AF65521 		movw	r1, #43605
 12153 055c 3046     		mov	r0, r6
 12154 055e FFF7FEFF 		bl	st_word
 12155              	.LVL1441:
6309:DRIVER/FatFs/source/ff.c **** 			disk_write(pdrv, buf, b_vol + 1, 1);		/* Write original FSINFO (VBR + 1) */
 12156              		.loc 1 6309 4 view .LVU4167
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 385


 12157 0562 0123     		movs	r3, #1
 12158 0564 029E     		ldr	r6, [sp, #8]
 12159 0566 F21D     		adds	r2, r6, #7
 12160 0568 4946     		mov	r1, r9
 12161 056a 2046     		mov	r0, r4
 12162 056c FFF7FEFF 		bl	disk_write
 12163              	.LVL1442:
6310:DRIVER/FatFs/source/ff.c **** 		}
 12164              		.loc 1 6310 4 view .LVU4168
 12165 0570 0123     		movs	r3, #1
 12166 0572 F218     		adds	r2, r6, r3
 12167 0574 4946     		mov	r1, r9
 12168 0576 2046     		mov	r0, r4
 12169 0578 FFF7FEFF 		bl	disk_write
 12170              	.LVL1443:
 12171 057c 4EE7     		b	.L841
 12172              	.LVL1444:
 12173              	.L905:
6318:DRIVER/FatFs/source/ff.c **** 				st_dword(buf + 4, 0xFFFFFFFF);	/* FAT[1] */
 12174              		.loc 1 6318 5 view .LVU4169
 12175 057e 6FF00701 		mvn	r1, #7
 12176 0582 4046     		mov	r0, r8
 12177 0584 FFF7FEFF 		bl	st_dword
 12178              	.LVL1445:
6319:DRIVER/FatFs/source/ff.c **** 				st_dword(buf + 8, 0x0FFFFFFF);	/* FAT[2] (root directory) */
 12179              		.loc 1 6319 5 view .LVU4170
 12180 0588 4FF0FF31 		mov	r1, #-1
 12181 058c 08F10400 		add	r0, r8, #4
 12182 0590 FFF7FEFF 		bl	st_dword
 12183              	.LVL1446:
6320:DRIVER/FatFs/source/ff.c **** 			} else {
 12184              		.loc 1 6320 5 view .LVU4171
 12185 0594 6FF07041 		mvn	r1, #-268435456
 12186 0598 08F10800 		add	r0, r8, #8
 12187 059c FFF7FEFF 		bl	st_dword
 12188              	.LVL1447:
 12189 05a0 5EE7     		b	.L844
 12190              	.L906:
6322:DRIVER/FatFs/source/ff.c **** 			}
 12191              		.loc 1 6322 5 is_stmt 0 view .LVU4172
 12192 05a2 3149     		ldr	r1, .L911+20
 12193 05a4 59E7     		b	.L845
 12194              	.L904:
6331:DRIVER/FatFs/source/ff.c **** 		}
6332:DRIVER/FatFs/source/ff.c **** 
6333:DRIVER/FatFs/source/ff.c **** 		/* Initialize root directory (fill with zero) */
6334:DRIVER/FatFs/source/ff.c **** 		nsect = (fsty == FS_FAT32) ? pau : sz_dir;	/* Number of root directory sectors */
 12195              		.loc 1 6334 36 view .LVU4173
 12196 05a6 0497     		str	r7, [sp, #16]
 12197 05a8 069F     		ldr	r7, [sp, #24]
 12198              	.LVL1448:
 12199              		.loc 1 6334 3 is_stmt 1 view .LVU4174
 12200              		.loc 1 6334 36 is_stmt 0 view .LVU4175
 12201 05aa BAF1030F 		cmp	r10, #3
 12202 05ae 1CD0     		beq	.L907
 12203              		.loc 1 6334 36 view .LVU4176
 12204 05b0 049F     		ldr	r7, [sp, #16]
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 386


 12205 05b2 089E     		ldr	r6, [sp, #32]
 12206              	.LVL1449:
 12207              	.L849:
6335:DRIVER/FatFs/source/ff.c **** 		do {
 12208              		.loc 1 6335 3 is_stmt 1 view .LVU4177
6336:DRIVER/FatFs/source/ff.c **** 			n = (nsect > sz_buf) ? sz_buf : nsect;
 12209              		.loc 1 6336 4 view .LVU4178
 12210              		.loc 1 6336 6 is_stmt 0 view .LVU4179
 12211 05b4 039D     		ldr	r5, [sp, #12]
 12212 05b6 B542     		cmp	r5, r6
 12213 05b8 28BF     		it	cs
 12214 05ba 3546     		movcs	r5, r6
 12215              	.LVL1450:
6337:DRIVER/FatFs/source/ff.c **** 			if (disk_write(pdrv, buf, sect, (UINT)n) != RES_OK) LEAVE_MKFS(FR_DISK_ERR);
 12216              		.loc 1 6337 4 is_stmt 1 view .LVU4180
 12217              		.loc 1 6337 8 is_stmt 0 view .LVU4181
 12218 05bc 2B46     		mov	r3, r5
 12219 05be 3A46     		mov	r2, r7
 12220 05c0 0199     		ldr	r1, [sp, #4]
 12221 05c2 2046     		mov	r0, r4
 12222 05c4 FFF7FEFF 		bl	disk_write
 12223              	.LVL1451:
 12224              		.loc 1 6337 7 view .LVU4182
 12225 05c8 0028     		cmp	r0, #0
 12226 05ca 5FD1     		bne	.L885
6338:DRIVER/FatFs/source/ff.c **** 			sect += n; nsect -= n;
 12227              		.loc 1 6338 4 is_stmt 1 view .LVU4183
 12228              		.loc 1 6338 9 is_stmt 0 view .LVU4184
 12229 05cc 2F44     		add	r7, r7, r5
 12230              	.LVL1452:
 12231              		.loc 1 6338 15 is_stmt 1 view .LVU4185
6339:DRIVER/FatFs/source/ff.c **** 		} while (nsect);
 12232              		.loc 1 6339 12 view .LVU4186
 12233 05ce 761B     		subs	r6, r6, r5
 12234              	.LVL1453:
 12235              		.loc 1 6339 12 is_stmt 0 view .LVU4187
 12236 05d0 F0D1     		bne	.L849
6340:DRIVER/FatFs/source/ff.c **** 	}
6341:DRIVER/FatFs/source/ff.c **** 
6342:DRIVER/FatFs/source/ff.c **** 	/* A FAT volume has been created here */
6343:DRIVER/FatFs/source/ff.c **** 
6344:DRIVER/FatFs/source/ff.c **** 	/* Determine system ID in the MBR partition table */
6345:DRIVER/FatFs/source/ff.c **** 	if (FF_FS_EXFAT && fsty == FS_EXFAT) {
 12237              		.loc 1 6345 2 is_stmt 1 view .LVU4188
6346:DRIVER/FatFs/source/ff.c **** 		sys = 0x07;		/* exFAT */
6347:DRIVER/FatFs/source/ff.c **** 	} else if (fsty == FS_FAT32) {
 12238              		.loc 1 6347 9 view .LVU4189
 12239              		.loc 1 6347 12 is_stmt 0 view .LVU4190
 12240 05d2 BAF1030F 		cmp	r10, #3
 12241 05d6 0DD0     		beq	.L886
6348:DRIVER/FatFs/source/ff.c **** 		sys = 0x0C;		/* FAT32X */
6349:DRIVER/FatFs/source/ff.c **** 	} else if (sz_vol >= 0x10000) {
 12242              		.loc 1 6349 9 is_stmt 1 view .LVU4191
 12243              		.loc 1 6349 20 is_stmt 0 view .LVU4192
 12244 05d8 0D9B     		ldr	r3, [sp, #52]
 12245              		.loc 1 6349 12 view .LVU4193
 12246 05da B3F5803F 		cmp	r3, #65536
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 387


 12247 05de 1ED2     		bcs	.L887
6350:DRIVER/FatFs/source/ff.c **** 		sys = 0x06;		/* FAT12/16 (large) */
6351:DRIVER/FatFs/source/ff.c **** 	} else if (fsty == FS_FAT16) {
 12248              		.loc 1 6351 9 is_stmt 1 view .LVU4194
 12249              		.loc 1 6351 12 is_stmt 0 view .LVU4195
 12250 05e0 BAF1020F 		cmp	r10, #2
 12251 05e4 04D0     		beq	.L908
6352:DRIVER/FatFs/source/ff.c **** 		sys = 0x04;		/* FAT16 */
6353:DRIVER/FatFs/source/ff.c **** 	} else {
6354:DRIVER/FatFs/source/ff.c **** 		sys = 0x01;		/* FAT12 */
 12252              		.loc 1 6354 7 view .LVU4196
 12253 05e6 0122     		movs	r2, #1
 12254 05e8 05E0     		b	.L850
 12255              	.LVL1454:
 12256              	.L907:
6334:DRIVER/FatFs/source/ff.c **** 		do {
 12257              		.loc 1 6334 36 view .LVU4197
 12258 05ea 3E46     		mov	r6, r7
 12259 05ec 049F     		ldr	r7, [sp, #16]
 12260 05ee E1E7     		b	.L849
 12261              	.LVL1455:
 12262              	.L908:
6352:DRIVER/FatFs/source/ff.c **** 		sys = 0x04;		/* FAT16 */
 12263              		.loc 1 6352 7 view .LVU4198
 12264 05f0 0422     		movs	r2, #4
 12265 05f2 00E0     		b	.L850
 12266              	.L886:
6348:DRIVER/FatFs/source/ff.c **** 	} else if (sz_vol >= 0x10000) {
 12267              		.loc 1 6348 7 view .LVU4199
 12268 05f4 0C22     		movs	r2, #12
 12269              	.L850:
 12270              	.LVL1456:
6355:DRIVER/FatFs/source/ff.c **** 	}
6356:DRIVER/FatFs/source/ff.c **** 
6357:DRIVER/FatFs/source/ff.c **** 	/* Update partition information */
6358:DRIVER/FatFs/source/ff.c **** 	if (FF_MULTI_PARTITION && ipart != 0) {	/* Volume is in the existing partition */
 12271              		.loc 1 6358 2 is_stmt 1 view .LVU4200
6359:DRIVER/FatFs/source/ff.c **** 		if (!FF_LBA64 || !(fsopt & 0x80)) {	/* Is the partition in MBR? */
6360:DRIVER/FatFs/source/ff.c **** 			/* Update system ID in the partition table */
6361:DRIVER/FatFs/source/ff.c **** 			if (disk_read(pdrv, buf, 0, 1) != RES_OK) LEAVE_MKFS(FR_DISK_ERR);	/* Read the MBR */
6362:DRIVER/FatFs/source/ff.c **** 			buf[MBR_Table + (ipart - 1) * SZ_PTE + PTE_System] = sys;			/* Set system ID */
6363:DRIVER/FatFs/source/ff.c **** 			if (disk_write(pdrv, buf, 0, 1) != RES_OK) LEAVE_MKFS(FR_DISK_ERR);	/* Write it back to the MBR 
6364:DRIVER/FatFs/source/ff.c **** 		}
6365:DRIVER/FatFs/source/ff.c **** 	} else {								/* Volume as a new single partition */
6366:DRIVER/FatFs/source/ff.c **** 		if (!(fsopt & FM_SFD)) {			/* Create partition table if not in SFD format */
 12272              		.loc 1 6366 3 view .LVU4201
 12273              		.loc 1 6366 6 is_stmt 0 view .LVU4202
 12274 05f6 059B     		ldr	r3, [sp, #20]
 12275 05f8 4BB9     		cbnz	r3, .L851
6367:DRIVER/FatFs/source/ff.c **** 			lba[0] = sz_vol; lba[1] = 0;
 12276              		.loc 1 6367 4 is_stmt 1 view .LVU4203
 12277              		.loc 1 6367 11 is_stmt 0 view .LVU4204
 12278 05fa 0D9B     		ldr	r3, [sp, #52]
 12279 05fc 0B93     		str	r3, [sp, #44]
 12280              		.loc 1 6367 21 is_stmt 1 view .LVU4205
 12281              		.loc 1 6367 28 is_stmt 0 view .LVU4206
 12282 05fe 0023     		movs	r3, #0
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 388


 12283 0600 0C93     		str	r3, [sp, #48]
6368:DRIVER/FatFs/source/ff.c **** 			res = create_partition(pdrv, lba, sys, buf);
 12284              		.loc 1 6368 4 is_stmt 1 view .LVU4207
 12285              		.loc 1 6368 10 is_stmt 0 view .LVU4208
 12286 0602 019B     		ldr	r3, [sp, #4]
 12287 0604 0BA9     		add	r1, sp, #44
 12288 0606 2046     		mov	r0, r4
 12289 0608 FFF7FEFF 		bl	create_partition
 12290              	.LVL1457:
6369:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) LEAVE_MKFS(res);
 12291              		.loc 1 6369 4 is_stmt 1 view .LVU4209
 12292              		.loc 1 6369 7 is_stmt 0 view .LVU4210
 12293 060c 60B9     		cbnz	r0, .L803
 12294              	.LVL1458:
 12295              	.L851:
6370:DRIVER/FatFs/source/ff.c **** 		}
6371:DRIVER/FatFs/source/ff.c **** 	}
6372:DRIVER/FatFs/source/ff.c **** 
6373:DRIVER/FatFs/source/ff.c **** 	if (disk_ioctl(pdrv, CTRL_SYNC, 0) != RES_OK) LEAVE_MKFS(FR_DISK_ERR);
 12296              		.loc 1 6373 2 is_stmt 1 view .LVU4211
 12297              		.loc 1 6373 6 is_stmt 0 view .LVU4212
 12298 060e 0022     		movs	r2, #0
 12299 0610 1146     		mov	r1, r2
 12300 0612 2046     		mov	r0, r4
 12301 0614 FFF7FEFF 		bl	disk_ioctl
 12302              	.LVL1459:
 12303              		.loc 1 6373 5 view .LVU4213
 12304 0618 30B1     		cbz	r0, .L803
 12305              		.loc 1 6373 48 view .LVU4214
 12306 061a 0120     		movs	r0, #1
 12307 061c 04E0     		b	.L803
 12308              	.LVL1460:
 12309              	.L887:
6350:DRIVER/FatFs/source/ff.c **** 	} else if (fsty == FS_FAT16) {
 12310              		.loc 1 6350 7 view .LVU4215
 12311 061e 0622     		movs	r2, #6
 12312 0620 E9E7     		b	.L850
 12313              	.LVL1461:
 12314              	.L852:
5908:DRIVER/FatFs/source/ff.c **** 	if (FatFs[vol]) FatFs[vol]->fs_type = 0;	/* Clear the fs object if mounted */
 12315              		.loc 1 5908 22 view .LVU4216
 12316 0622 0B20     		movs	r0, #11
 12317              	.LVL1462:
5908:DRIVER/FatFs/source/ff.c **** 	if (FatFs[vol]) FatFs[vol]->fs_type = 0;	/* Clear the fs object if mounted */
 12318              		.loc 1 5908 22 view .LVU4217
 12319 0624 00E0     		b	.L803
 12320              	.LVL1463:
 12321              	.L853:
5915:DRIVER/FatFs/source/ff.c **** 	if (ds & STA_PROTECT) return FR_WRITE_PROTECTED;
 12322              		.loc 1 5915 30 view .LVU4218
 12323 0626 0320     		movs	r0, #3
 12324              	.LVL1464:
 12325              	.L803:
6374:DRIVER/FatFs/source/ff.c **** 
6375:DRIVER/FatFs/source/ff.c **** 	LEAVE_MKFS(FR_OK);
6376:DRIVER/FatFs/source/ff.c **** }
 12326              		.loc 1 6376 1 view .LVU4219
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 389


 12327 0628 11B0     		add	sp, sp, #68
 12328              	.LCFI113:
 12329              		.cfi_remember_state
 12330              		.cfi_def_cfa_offset 36
 12331              		@ sp needed
 12332 062a BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 12333              	.LVL1465:
 12334              	.L854:
 12335              	.LCFI114:
 12336              		.cfi_restore_state
5916:DRIVER/FatFs/source/ff.c **** 
 12337              		.loc 1 5916 31 view .LVU4220
 12338 062e 0A20     		movs	r0, #10
 12339              	.LVL1466:
5916:DRIVER/FatFs/source/ff.c **** 
 12340              		.loc 1 5916 31 view .LVU4221
 12341 0630 FAE7     		b	.L803
 12342              	.L856:
5924:DRIVER/FatFs/source/ff.c **** 	if (ss > FF_MAX_SS || ss < FF_MIN_SS || (ss & (ss - 1))) return FR_DISK_ERR;
 12343              		.loc 1 5924 63 view .LVU4222
 12344 0632 0120     		movs	r0, #1
 12345 0634 F8E7     		b	.L803
 12346              	.L857:
5925:DRIVER/FatFs/source/ff.c **** #else
 12347              		.loc 1 5925 66 view .LVU4223
 12348 0636 0120     		movs	r0, #1
 12349 0638 F6E7     		b	.L803
 12350              	.L858:
 12351 063a 0120     		movs	r0, #1
 12352 063c F4E7     		b	.L803
 12353              	.LVL1467:
 12354              	.L862:
5939:DRIVER/FatFs/source/ff.c **** 	buf = (BYTE*)work;		/* Working buffer */
 12355              		.loc 1 5939 26 view .LVU4224
 12356 063e 1120     		movs	r0, #17
 12357 0640 F2E7     		b	.L803
 12358              	.LVL1468:
 12359              	.L863:
5944:DRIVER/FatFs/source/ff.c **** 
 12360              		.loc 1 5944 19 view .LVU4225
 12361 0642 1120     		movs	r0, #17
 12362 0644 F0E7     		b	.L803
 12363              	.LVL1469:
 12364              	.L864:
5983:DRIVER/FatFs/source/ff.c **** 		if (!(fsopt & FM_SFD)) {	/* To be partitioned? */
 12365              		.loc 1 5983 62 view .LVU4226
 12366 0646 0120     		movs	r0, #1
 12367 0648 EEE7     		b	.L803
 12368              	.LVL1470:
 12369              	.L867:
5999:DRIVER/FatFs/source/ff.c **** 
 12370              		.loc 1 5999 20 view .LVU4227
 12371 064a 0E20     		movs	r0, #14
 12372 064c ECE7     		b	.L803
 12373              	.L870:
6018:DRIVER/FatFs/source/ff.c **** 		fsty = FS_FAT16;
 12374              		.loc 1 6018 26 view .LVU4228
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 390


 12375 064e 1320     		movs	r0, #19
 12376 0650 EAE7     		b	.L803
 12377              	.L912:
 12378 0652 00BF     		.align	2
 12379              	.L911:
 12380 0654 00000000 		.word	.LC3
 12381 0658 20000000 		.word	.LC5
 12382 065c 0C000000 		.word	.LC4
 12383 0660 52526141 		.word	1096897106
 12384 0664 72724161 		.word	1631679090
 12385 0668 F8FFFF00 		.word	16777208
 12386              	.LVL1471:
 12387              	.L872:
6198:DRIVER/FatFs/source/ff.c **** 			} else {				/* FAT volume */
 12388              		.loc 1 6198 52 view .LVU4229
 12389 066c 0E20     		movs	r0, #14
 12390 066e DBE7     		b	.L803
 12391              	.LVL1472:
 12392              	.L874:
6230:DRIVER/FatFs/source/ff.c **** 			n_clst = ((DWORD)sz_vol - sz_rsv - sz_fat * n_fat - sz_dir) / pau;
 12393              		.loc 1 6230 44 view .LVU4230
 12394 0670 0E20     		movs	r0, #14
 12395              	.LVL1473:
6230:DRIVER/FatFs/source/ff.c **** 			n_clst = ((DWORD)sz_vol - sz_rsv - sz_fat * n_fat - sz_dir) / pau;
 12396              		.loc 1 6230 44 view .LVU4231
 12397 0672 D9E7     		b	.L803
 12398              	.LVL1474:
 12399              	.L875:
6235:DRIVER/FatFs/source/ff.c **** 				}
 12400              		.loc 1 6235 6 view .LVU4232
 12401 0674 0E20     		movs	r0, #14
 12402              	.LVL1475:
6235:DRIVER/FatFs/source/ff.c **** 				}
 12403              		.loc 1 6235 6 view .LVU4233
 12404 0676 D7E7     		b	.L803
 12405              	.LVL1476:
 12406              	.L878:
6247:DRIVER/FatFs/source/ff.c **** 				}
 12407              		.loc 1 6247 6 view .LVU4234
 12408 0678 0E20     		movs	r0, #14
 12409              	.LVL1477:
6247:DRIVER/FatFs/source/ff.c **** 				}
 12410              		.loc 1 6247 6 view .LVU4235
 12411 067a D5E7     		b	.L803
 12412              	.LVL1478:
 12413              	.L879:
6251:DRIVER/FatFs/source/ff.c **** 				}
 12414              		.loc 1 6251 6 view .LVU4236
 12415 067c 0E20     		movs	r0, #14
 12416              	.LVL1479:
6251:DRIVER/FatFs/source/ff.c **** 				}
 12417              		.loc 1 6251 6 view .LVU4237
 12418 067e D3E7     		b	.L803
 12419              	.LVL1480:
 12420              	.L880:
6254:DRIVER/FatFs/source/ff.c **** 
 12421              		.loc 1 6254 48 view .LVU4238
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 391


 12422 0680 0E20     		movs	r0, #14
 12423              	.LVL1481:
6254:DRIVER/FatFs/source/ff.c **** 
 12424              		.loc 1 6254 48 view .LVU4239
 12425 0682 D1E7     		b	.L803
 12426              	.LVL1482:
 12427              	.L882:
6298:DRIVER/FatFs/source/ff.c **** 
 12428              		.loc 1 6298 50 view .LVU4240
 12429 0684 0120     		movs	r0, #1
 12430 0686 CFE7     		b	.L803
 12431              	.LVL1483:
 12432              	.L884:
6327:DRIVER/FatFs/source/ff.c **** 				memset(buf, 0, ss);	/* Rest of FAT all are cleared */
 12433              		.loc 1 6327 57 view .LVU4241
 12434 0688 0120     		movs	r0, #1
 12435 068a CDE7     		b	.L803
 12436              	.LVL1484:
 12437              	.L885:
6337:DRIVER/FatFs/source/ff.c **** 			sect += n; nsect -= n;
 12438              		.loc 1 6337 56 view .LVU4242
 12439 068c 0120     		movs	r0, #1
 12440 068e CBE7     		b	.L803
 12441              		.cfi_endproc
 12442              	.LFE56:
 12444              		.section	.rodata.cst.0,"a"
 12445              		.align	2
 12448              	cst.0:
 12449 0000 0100     		.short	1
 12450 0002 0400     		.short	4
 12451 0004 1000     		.short	16
 12452 0006 4000     		.short	64
 12453 0008 0001     		.short	256
 12454 000a 0002     		.short	512
 12455 000c 0000     		.short	0
 12456              		.section	.rodata.cst32.1,"a"
 12457              		.align	2
 12460              	cst32.1:
 12461 0000 0100     		.short	1
 12462 0002 0200     		.short	2
 12463 0004 0400     		.short	4
 12464 0006 0800     		.short	8
 12465 0008 1000     		.short	16
 12466 000a 2000     		.short	32
 12467 000c 0000     		.short	0
 12468              		.section	.rodata.defopt.2,"a"
 12469              		.align	2
 12472              	defopt.2:
 12473 0000 07       		.byte	7
 12474 0001 00       		.byte	0
 12475 0002 0000     		.space	2
 12476 0004 00000000 		.word	0
 12477 0008 00000000 		.word	0
 12478 000c 00000000 		.word	0
 12479              		.section	.rodata.ExCvt,"a"
 12480              		.align	2
 12483              	ExCvt:
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 392


 12484 0000 809A4541 		.ascii	"\200\232EA\216A\217\200EEEIII\216\217\220\222\222O\231"
 12484      8E418F80 
 12484      45454549 
 12484      49498E8F 
 12484      9092924F 
 12485 0015 4F555559 		.ascii	"OUUY\231\232\233\234\235\236\237AIOU\245\245\246\247"
 12485      999A9B9C 
 12485      9D9E9F41 
 12485      494F55A5 
 12485      A5A6A7
 12486 0028 A8A9AAAB 		.ascii	"\250\251\252\253\254\255\256\257\260\261\262\263\264"
 12486      ACADAEAF 
 12486      B0B1B2B3 
 12486      B4
 12487 0035 B5B6B7B8 		.ascii	"\265\266\267\270\271\272\273\274\275\276\277\300\301"
 12487      B9BABBBC 
 12487      BDBEBFC0 
 12487      C1
 12488 0042 C2C3C4C5 		.ascii	"\302\303\304\305\306\307\310\311\312\313\314\315\316"
 12488      C6C7C8C9 
 12488      CACBCCCD 
 12488      CE
 12489 004f CFD0D1D2 		.ascii	"\317\320\321\322\323\324\325\326\327\330\331\332\333"
 12489      D3D4D5D6 
 12489      D7D8D9DA 
 12489      DB
 12490 005c DCDDDEDF 		.ascii	"\334\335\336\337\340\341\342\343\344\345\346\347\350"
 12490      E0E1E2E3 
 12490      E4E5E6E7 
 12490      E8
 12491 0069 E9EAEBEC 		.ascii	"\351\352\353\354\355\356\357\360\361\362\363\364\365"
 12491      EDEEEFF0 
 12491      F1F2F3F4 
 12491      F5
 12492 0076 F6F7F8F9 		.ascii	"\366\367\370\371\372\373\374\375\376\377"
 12492      FAFBFCFD 
 12492      FEFF
 12493              		.section	.bss.LfnBuf,"aw",%nobits
 12494              		.align	2
 12497              	LfnBuf:
 12498 0000 00000000 		.space	512
 12498      00000000 
 12498      00000000 
 12498      00000000 
 12498      00000000 
 12499              		.section	.rodata.LfnOfs,"a"
 12500              		.align	2
 12503              	LfnOfs:
 12504 0000 01030507 		.ascii	"\001\003\005\007\011\016\020\022\024\026\030\034\036"
 12504      090E1012 
 12504      1416181C 
 12504      1E
 12505              		.section	.bss.Fsid,"aw",%nobits
 12506              		.align	1
 12509              	Fsid:
 12510 0000 0000     		.space	2
 12511              		.section	.bss.FatFs,"aw",%nobits
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 393


 12512              		.align	2
 12515              	FatFs:
 12516 0000 00000000 		.space	8
 12516      00000000 
 12517              		.text
 12518              	.Letext0:
 12519              		.file 2 "e:\\windows\\programs\\arm-gnu-toolchain-12.2.mpacbti-bet1-mingw-w64-i686-arm-none-eabi\\
 12520              		.file 3 "e:\\windows\\programs\\arm-gnu-toolchain-12.2.mpacbti-bet1-mingw-w64-i686-arm-none-eabi\\
 12521              		.file 4 "e:\\windows\\programs\\arm-gnu-toolchain-12.2.mpacbti-bet1-mingw-w64-i686-arm-none-eabi\\
 12522              		.file 5 "DRIVER/FatFs/source/ff.h"
 12523              		.file 6 "DRIVER/FatFs/source/diskio.h"
 12524              		.file 7 "e:\\windows\\programs\\arm-gnu-toolchain-12.2.mpacbti-bet1-mingw-w64-i686-arm-none-eabi\\
 12525              		.file 8 "<built-in>"
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 394


DEFINED SYMBOLS
                            *ABS*:00000000 ff.c
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:19     .text.ld_word:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:24     .text.ld_word:00000000 ld_word
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:51     .text.ld_dword:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:56     .text.ld_dword:00000000 ld_dword
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:95     .text.st_word:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:100    .text.st_word:00000000 st_word
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:125    .text.st_dword:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:130    .text.st_dword:00000000 st_dword
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:169    .text.dbc_1st:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:174    .text.dbc_1st:00000000 dbc_1st
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:192    .text.dbc_2nd:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:197    .text.dbc_2nd:00000000 dbc_2nd
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:215    .text.tchar2uni:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:220    .text.tchar2uni:00000000 tchar2uni
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:406    .text.tchar2uni:000000b4 $d
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:411    .text.put_utf:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:416    .text.put_utf:00000000 put_utf
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:642    .text.clst2sect:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:647    .text.clst2sect:00000000 clst2sect
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:688    .text.ld_clust:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:693    .text.ld_clust:00000000 ld_clust
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:749    .text.st_clust:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:754    .text.st_clust:00000000 st_clust
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:803    .text.pick_lfn:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:808    .text.pick_lfn:00000000 pick_lfn
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:957    .text.pick_lfn:00000084 $d
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:12503  .rodata.LfnOfs:00000000 LfnOfs
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:962    .text.put_lfn:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:967    .text.put_lfn:00000000 put_lfn
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:1095   .text.put_lfn:00000074 $d
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:1100   .text.sum_sfn:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:1105   .text.sum_sfn:00000000 sum_sfn
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:1151   .text.get_ldnumber:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:1156   .text.get_ldnumber:00000000 get_ldnumber
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:1269   .text.validate:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:1274   .text.validate:00000000 validate
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:1383   .text.sync_window:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:1388   .text.sync_window:00000000 sync_window
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:1473   .text.move_window:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:1478   .text.move_window:00000000 move_window
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:1549   .rodata.check_fs.str1.4:00000000 $d
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:1553   .text.check_fs:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:1558   .text.check_fs:00000000 check_fs
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:1739   .text.check_fs:000000d4 $d
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:1744   .text.find_volume:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:1749   .text.find_volume:00000000 find_volume
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:1875   .text.mount_volume:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:1880   .text.mount_volume:00000000 mount_volume
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:2529   .text.mount_volume:000002f4 $d
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:12515  .bss.FatFs:00000000 FatFs
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:12509  .bss.Fsid:00000000 Fsid
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:12497  .bss.LfnBuf:00000000 LfnBuf
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:2539   .text.put_fat:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:2544   .text.put_fat:00000000 put_fat
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:2825   .text.get_fat:00000000 $t
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 395


C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:2830   .text.get_fat:00000000 get_fat
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:3076   .text.dir_sdi:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:3081   .text.dir_sdi:00000000 dir_sdi
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:3286   .text.create_chain:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:3291   .text.create_chain:00000000 create_chain
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:3611   .text.remove_chain:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:3616   .text.remove_chain:00000000 remove_chain
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:3777   .text.dir_clear:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:3782   .text.dir_clear:00000000 dir_clear
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:3883   .text.dir_next:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:3888   .text.dir_next:00000000 dir_next
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:4139   .text.dir_alloc:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:4144   .text.dir_alloc:00000000 dir_alloc
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:4259   .text.dir_read:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:4264   .text.dir_read:00000000 dir_read
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:4493   .text.dir_remove:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:4498   .text.dir_remove:00000000 dir_remove
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:4608   .text.sync_fs:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:4613   .text.sync_fs:00000000 sync_fs
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:4727   .text.sync_fs:00000084 $d
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:4733   .text.create_partition:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:4738   .text.create_partition:00000000 create_partition
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:5040   .text.create_partition:00000134 $d
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:5046   .rodata.create_name.str1.4:00000000 $d
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:5053   .text.create_name:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:5058   .text.create_name:00000000 create_name
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:5649   .text.create_name:00000258 $d
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:12483  .rodata.ExCvt:00000000 ExCvt
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:5656   .text.cmp_lfn:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:5661   .text.cmp_lfn:00000000 cmp_lfn
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:5820   .text.cmp_lfn:0000009c $d
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:5825   .text.dir_find:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:5830   .text.dir_find:00000000 dir_find
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:6079   .text.follow_path:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:6084   .text.follow_path:00000000 follow_path
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:6249   .text.gen_numname:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:6254   .text.gen_numname:00000000 gen_numname
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:6483   .text.dir_register:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:6488   .text.dir_register:00000000 dir_register
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:6790   .text.dir_register:00000140 $d
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:6795   .text.get_fileinfo:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:6800   .text.get_fileinfo:00000000 get_fileinfo
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:7215   .text.f_mount:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:7221   .text.f_mount:00000000 f_mount
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:7334   .text.f_mount:00000054 $d
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:7339   .text.f_open:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:7345   .text.f_open:00000000 f_open
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:7839   .text.f_read:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:7845   .text.f_read:00000000 f_read
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:8265   .text.f_write:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:8271   .text.f_write:00000000 f_write
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:8740   .text.f_sync:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:8746   .text.f_sync:00000000 f_sync
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:8897   .text.f_close:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:8903   .text.f_close:00000000 f_close
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:8961   .text.f_lseek:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:8967   .text.f_lseek:00000000 f_lseek
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s 			page 396


C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:9391   .text.f_opendir:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:9397   .text.f_opendir:00000000 f_opendir
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:9541   .text.f_closedir:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:9547   .text.f_closedir:00000000 f_closedir
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:9590   .text.f_readdir:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:9596   .text.f_readdir:00000000 f_readdir
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:9701   .text.f_stat:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:9707   .text.f_stat:00000000 f_stat
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:9800   .text.f_getfree:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:9806   .text.f_getfree:00000000 f_getfree
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:10081  .text.f_truncate:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:10087  .text.f_truncate:00000000 f_truncate
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:10270  .text.f_unlink:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:10276  .text.f_unlink:00000000 f_unlink
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:10482  .text.f_mkdir:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:10488  .text.f_mkdir:00000000 f_mkdir
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:10759  .text.f_rename:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:10765  .text.f_rename:00000000 f_rename
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:11063  .rodata.f_mkfs.str1.4:00000000 $d
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:11073  .text.f_mkfs:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:11079  .text.f_mkfs:00000000 f_mkfs
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:11795  .text.f_mkfs:000002f0 $d
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:12472  .rodata.defopt.2:00000000 defopt.2
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:12460  .rodata.cst32.1:00000000 cst32.1
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:12448  .rodata.cst.0:00000000 cst.0
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:11803  .text.f_mkfs:00000304 $t
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:12380  .text.f_mkfs:00000654 $d
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:12389  .text.f_mkfs:0000066c $t
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:12445  .rodata.cst.0:00000000 $d
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:12457  .rodata.cst32.1:00000000 $d
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:12469  .rodata.defopt.2:00000000 $d
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:12480  .rodata.ExCvt:00000000 $d
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:12494  .bss.LfnBuf:00000000 $d
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:12500  .rodata.LfnOfs:00000000 $d
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:12506  .bss.Fsid:00000000 $d
C:\Users\86157\AppData\Local\Temp\ccl7a1Sx.s:12512  .bss.FatFs:00000000 $d

UNDEFINED SYMBOLS
disk_status
disk_write
disk_read
memcmp
disk_initialize
disk_ioctl
memset
strchr
ff_uni2oem
ff_wtoupper
ff_oem2uni
get_fattime
memcpy
