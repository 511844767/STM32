ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 1


   1              		.cpu cortex-m3
   2              		.arch armv7-m
   3              		.fpu softvfp
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"ff.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.file 1 "DRIVER/FatFs/source/ff.c"
  18              		.section	.text.ld_word,"ax",%progbits
  19              		.align	1
  20              		.syntax unified
  21              		.thumb
  22              		.thumb_func
  24              	ld_word:
  25              	.LVL0:
  26              	.LFB0:
   1:DRIVER/FatFs/source/ff.c **** /*----------------------------------------------------------------------------/
   2:DRIVER/FatFs/source/ff.c **** /  FatFs - Generic FAT Filesystem Module  R0.15 w/patch1                      /
   3:DRIVER/FatFs/source/ff.c **** /-----------------------------------------------------------------------------/
   4:DRIVER/FatFs/source/ff.c **** /
   5:DRIVER/FatFs/source/ff.c **** / Copyright (C) 2022, ChaN, all right reserved.
   6:DRIVER/FatFs/source/ff.c **** /
   7:DRIVER/FatFs/source/ff.c **** / FatFs module is an open source software. Redistribution and use of FatFs in
   8:DRIVER/FatFs/source/ff.c **** / source and binary forms, with or without modification, are permitted provided
   9:DRIVER/FatFs/source/ff.c **** / that the following condition is met:
  10:DRIVER/FatFs/source/ff.c **** /
  11:DRIVER/FatFs/source/ff.c **** / 1. Redistributions of source code must retain the above copyright notice,
  12:DRIVER/FatFs/source/ff.c **** /    this condition and the following disclaimer.
  13:DRIVER/FatFs/source/ff.c **** /
  14:DRIVER/FatFs/source/ff.c **** / This software is provided by the copyright holder and contributors "AS IS"
  15:DRIVER/FatFs/source/ff.c **** / and any warranties related to this software are DISCLAIMED.
  16:DRIVER/FatFs/source/ff.c **** / The copyright owner or contributors be NOT LIABLE for any damages caused
  17:DRIVER/FatFs/source/ff.c **** / by use of this software.
  18:DRIVER/FatFs/source/ff.c **** /
  19:DRIVER/FatFs/source/ff.c **** /----------------------------------------------------------------------------*/
  20:DRIVER/FatFs/source/ff.c **** 
  21:DRIVER/FatFs/source/ff.c **** 
  22:DRIVER/FatFs/source/ff.c **** #include <string.h>
  23:DRIVER/FatFs/source/ff.c **** #include "ff.h"			/* Declarations of FatFs API */
  24:DRIVER/FatFs/source/ff.c **** #include "diskio.h"		/* Declarations of device I/O functions */
  25:DRIVER/FatFs/source/ff.c **** 
  26:DRIVER/FatFs/source/ff.c **** 
  27:DRIVER/FatFs/source/ff.c **** /*--------------------------------------------------------------------------
  28:DRIVER/FatFs/source/ff.c **** 
  29:DRIVER/FatFs/source/ff.c ****    Module Private Definitions
  30:DRIVER/FatFs/source/ff.c **** 
  31:DRIVER/FatFs/source/ff.c **** ---------------------------------------------------------------------------*/
  32:DRIVER/FatFs/source/ff.c **** 
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 2


  33:DRIVER/FatFs/source/ff.c **** #if FF_DEFINED != 80286	/* Revision ID */
  34:DRIVER/FatFs/source/ff.c **** #error Wrong include file (ff.h).
  35:DRIVER/FatFs/source/ff.c **** #endif
  36:DRIVER/FatFs/source/ff.c **** 
  37:DRIVER/FatFs/source/ff.c **** 
  38:DRIVER/FatFs/source/ff.c **** /* Limits and boundaries */
  39:DRIVER/FatFs/source/ff.c **** #define MAX_DIR		0x200000		/* Max size of FAT directory */
  40:DRIVER/FatFs/source/ff.c **** #define MAX_DIR_EX	0x10000000		/* Max size of exFAT directory */
  41:DRIVER/FatFs/source/ff.c **** #define MAX_FAT12	0xFF5			/* Max FAT12 clusters (differs from specs, but right for real DOS/Windows
  42:DRIVER/FatFs/source/ff.c **** #define MAX_FAT16	0xFFF5			/* Max FAT16 clusters (differs from specs, but right for real DOS/Window
  43:DRIVER/FatFs/source/ff.c **** #define MAX_FAT32	0x0FFFFFF5		/* Max FAT32 clusters (not specified, practical limit) */
  44:DRIVER/FatFs/source/ff.c **** #define MAX_EXFAT	0x7FFFFFFD		/* Max exFAT clusters (differs from specs, implementation limit) */
  45:DRIVER/FatFs/source/ff.c **** 
  46:DRIVER/FatFs/source/ff.c **** 
  47:DRIVER/FatFs/source/ff.c **** /* Character code support macros */
  48:DRIVER/FatFs/source/ff.c **** #define IsUpper(c)		((c) >= 'A' && (c) <= 'Z')
  49:DRIVER/FatFs/source/ff.c **** #define IsLower(c)		((c) >= 'a' && (c) <= 'z')
  50:DRIVER/FatFs/source/ff.c **** #define IsDigit(c)		((c) >= '0' && (c) <= '9')
  51:DRIVER/FatFs/source/ff.c **** #define IsSeparator(c)	((c) == '/' || (c) == '\\')
  52:DRIVER/FatFs/source/ff.c **** #define IsTerminator(c)	((UINT)(c) < (FF_USE_LFN ? ' ' : '!'))
  53:DRIVER/FatFs/source/ff.c **** #define IsSurrogate(c)	((c) >= 0xD800 && (c) <= 0xDFFF)
  54:DRIVER/FatFs/source/ff.c **** #define IsSurrogateH(c)	((c) >= 0xD800 && (c) <= 0xDBFF)
  55:DRIVER/FatFs/source/ff.c **** #define IsSurrogateL(c)	((c) >= 0xDC00 && (c) <= 0xDFFF)
  56:DRIVER/FatFs/source/ff.c **** 
  57:DRIVER/FatFs/source/ff.c **** 
  58:DRIVER/FatFs/source/ff.c **** /* Additional file access control and file status flags for internal use */
  59:DRIVER/FatFs/source/ff.c **** #define FA_SEEKEND	0x20	/* Seek to end of the file on file open */
  60:DRIVER/FatFs/source/ff.c **** #define FA_MODIFIED	0x40	/* File has been modified */
  61:DRIVER/FatFs/source/ff.c **** #define FA_DIRTY	0x80	/* FIL.buf[] needs to be written-back */
  62:DRIVER/FatFs/source/ff.c **** 
  63:DRIVER/FatFs/source/ff.c **** 
  64:DRIVER/FatFs/source/ff.c **** /* Additional file attribute bits for internal use */
  65:DRIVER/FatFs/source/ff.c **** #define AM_VOL		0x08	/* Volume label */
  66:DRIVER/FatFs/source/ff.c **** #define AM_LFN		0x0F	/* LFN entry */
  67:DRIVER/FatFs/source/ff.c **** #define AM_MASK		0x3F	/* Mask of defined bits in FAT */
  68:DRIVER/FatFs/source/ff.c **** #define AM_MASKX	0x37	/* Mask of defined bits in exFAT */
  69:DRIVER/FatFs/source/ff.c **** 
  70:DRIVER/FatFs/source/ff.c **** 
  71:DRIVER/FatFs/source/ff.c **** /* Name status flags in fn[11] */
  72:DRIVER/FatFs/source/ff.c **** #define NSFLAG		11		/* Index of the name status byte */
  73:DRIVER/FatFs/source/ff.c **** #define NS_LOSS		0x01	/* Out of 8.3 format */
  74:DRIVER/FatFs/source/ff.c **** #define NS_LFN		0x02	/* Force to create LFN entry */
  75:DRIVER/FatFs/source/ff.c **** #define NS_LAST		0x04	/* Last segment */
  76:DRIVER/FatFs/source/ff.c **** #define NS_BODY		0x08	/* Lower case flag (body) */
  77:DRIVER/FatFs/source/ff.c **** #define NS_EXT		0x10	/* Lower case flag (ext) */
  78:DRIVER/FatFs/source/ff.c **** #define NS_DOT		0x20	/* Dot entry */
  79:DRIVER/FatFs/source/ff.c **** #define NS_NOLFN	0x40	/* Do not find LFN */
  80:DRIVER/FatFs/source/ff.c **** #define NS_NONAME	0x80	/* Not followed */
  81:DRIVER/FatFs/source/ff.c **** 
  82:DRIVER/FatFs/source/ff.c **** 
  83:DRIVER/FatFs/source/ff.c **** /* exFAT directory entry types */
  84:DRIVER/FatFs/source/ff.c **** #define	ET_BITMAP	0x81	/* Allocation bitmap */
  85:DRIVER/FatFs/source/ff.c **** #define	ET_UPCASE	0x82	/* Up-case table */
  86:DRIVER/FatFs/source/ff.c **** #define	ET_VLABEL	0x83	/* Volume label */
  87:DRIVER/FatFs/source/ff.c **** #define	ET_FILEDIR	0x85	/* File and directory */
  88:DRIVER/FatFs/source/ff.c **** #define	ET_STREAM	0xC0	/* Stream extension */
  89:DRIVER/FatFs/source/ff.c **** #define	ET_FILENAME	0xC1	/* Name extension */
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 3


  90:DRIVER/FatFs/source/ff.c **** 
  91:DRIVER/FatFs/source/ff.c **** 
  92:DRIVER/FatFs/source/ff.c **** /* FatFs refers the FAT structure as simple byte array instead of structure member
  93:DRIVER/FatFs/source/ff.c **** / because the C structure is not binary compatible between different platforms */
  94:DRIVER/FatFs/source/ff.c **** 
  95:DRIVER/FatFs/source/ff.c **** #define BS_JmpBoot			0		/* x86 jump instruction (3-byte) */
  96:DRIVER/FatFs/source/ff.c **** #define BS_OEMName			3		/* OEM name (8-byte) */
  97:DRIVER/FatFs/source/ff.c **** #define BPB_BytsPerSec		11		/* Sector size [byte] (WORD) */
  98:DRIVER/FatFs/source/ff.c **** #define BPB_SecPerClus		13		/* Cluster size [sector] (BYTE) */
  99:DRIVER/FatFs/source/ff.c **** #define BPB_RsvdSecCnt		14		/* Size of reserved area [sector] (WORD) */
 100:DRIVER/FatFs/source/ff.c **** #define BPB_NumFATs			16		/* Number of FATs (BYTE) */
 101:DRIVER/FatFs/source/ff.c **** #define BPB_RootEntCnt		17		/* Size of root directory area for FAT [entry] (WORD) */
 102:DRIVER/FatFs/source/ff.c **** #define BPB_TotSec16		19		/* Volume size (16-bit) [sector] (WORD) */
 103:DRIVER/FatFs/source/ff.c **** #define BPB_Media			21		/* Media descriptor byte (BYTE) */
 104:DRIVER/FatFs/source/ff.c **** #define BPB_FATSz16			22		/* FAT size (16-bit) [sector] (WORD) */
 105:DRIVER/FatFs/source/ff.c **** #define BPB_SecPerTrk		24		/* Number of sectors per track for int13h [sector] (WORD) */
 106:DRIVER/FatFs/source/ff.c **** #define BPB_NumHeads		26		/* Number of heads for int13h (WORD) */
 107:DRIVER/FatFs/source/ff.c **** #define BPB_HiddSec			28		/* Volume offset from top of the drive (DWORD) */
 108:DRIVER/FatFs/source/ff.c **** #define BPB_TotSec32		32		/* Volume size (32-bit) [sector] (DWORD) */
 109:DRIVER/FatFs/source/ff.c **** #define BS_DrvNum			36		/* Physical drive number for int13h (BYTE) */
 110:DRIVER/FatFs/source/ff.c **** #define BS_NTres			37		/* WindowsNT error flag (BYTE) */
 111:DRIVER/FatFs/source/ff.c **** #define BS_BootSig			38		/* Extended boot signature (BYTE) */
 112:DRIVER/FatFs/source/ff.c **** #define BS_VolID			39		/* Volume serial number (DWORD) */
 113:DRIVER/FatFs/source/ff.c **** #define BS_VolLab			43		/* Volume label string (8-byte) */
 114:DRIVER/FatFs/source/ff.c **** #define BS_FilSysType		54		/* Filesystem type string (8-byte) */
 115:DRIVER/FatFs/source/ff.c **** #define BS_BootCode			62		/* Boot code (448-byte) */
 116:DRIVER/FatFs/source/ff.c **** #define BS_55AA				510		/* Signature word (WORD) */
 117:DRIVER/FatFs/source/ff.c **** 
 118:DRIVER/FatFs/source/ff.c **** #define BPB_FATSz32			36		/* FAT32: FAT size [sector] (DWORD) */
 119:DRIVER/FatFs/source/ff.c **** #define BPB_ExtFlags32		40		/* FAT32: Extended flags (WORD) */
 120:DRIVER/FatFs/source/ff.c **** #define BPB_FSVer32			42		/* FAT32: Filesystem version (WORD) */
 121:DRIVER/FatFs/source/ff.c **** #define BPB_RootClus32		44		/* FAT32: Root directory cluster (DWORD) */
 122:DRIVER/FatFs/source/ff.c **** #define BPB_FSInfo32		48		/* FAT32: Offset of FSINFO sector (WORD) */
 123:DRIVER/FatFs/source/ff.c **** #define BPB_BkBootSec32		50		/* FAT32: Offset of backup boot sector (WORD) */
 124:DRIVER/FatFs/source/ff.c **** #define BS_DrvNum32			64		/* FAT32: Physical drive number for int13h (BYTE) */
 125:DRIVER/FatFs/source/ff.c **** #define BS_NTres32			65		/* FAT32: Error flag (BYTE) */
 126:DRIVER/FatFs/source/ff.c **** #define BS_BootSig32		66		/* FAT32: Extended boot signature (BYTE) */
 127:DRIVER/FatFs/source/ff.c **** #define BS_VolID32			67		/* FAT32: Volume serial number (DWORD) */
 128:DRIVER/FatFs/source/ff.c **** #define BS_VolLab32			71		/* FAT32: Volume label string (8-byte) */
 129:DRIVER/FatFs/source/ff.c **** #define BS_FilSysType32		82		/* FAT32: Filesystem type string (8-byte) */
 130:DRIVER/FatFs/source/ff.c **** #define BS_BootCode32		90		/* FAT32: Boot code (420-byte) */
 131:DRIVER/FatFs/source/ff.c **** 
 132:DRIVER/FatFs/source/ff.c **** #define BPB_ZeroedEx		11		/* exFAT: MBZ field (53-byte) */
 133:DRIVER/FatFs/source/ff.c **** #define BPB_VolOfsEx		64		/* exFAT: Volume offset from top of the drive [sector] (QWORD) */
 134:DRIVER/FatFs/source/ff.c **** #define BPB_TotSecEx		72		/* exFAT: Volume size [sector] (QWORD) */
 135:DRIVER/FatFs/source/ff.c **** #define BPB_FatOfsEx		80		/* exFAT: FAT offset from top of the volume [sector] (DWORD) */
 136:DRIVER/FatFs/source/ff.c **** #define BPB_FatSzEx			84		/* exFAT: FAT size [sector] (DWORD) */
 137:DRIVER/FatFs/source/ff.c **** #define BPB_DataOfsEx		88		/* exFAT: Data offset from top of the volume [sector] (DWORD) */
 138:DRIVER/FatFs/source/ff.c **** #define BPB_NumClusEx		92		/* exFAT: Number of clusters (DWORD) */
 139:DRIVER/FatFs/source/ff.c **** #define BPB_RootClusEx		96		/* exFAT: Root directory start cluster (DWORD) */
 140:DRIVER/FatFs/source/ff.c **** #define BPB_VolIDEx			100		/* exFAT: Volume serial number (DWORD) */
 141:DRIVER/FatFs/source/ff.c **** #define BPB_FSVerEx			104		/* exFAT: Filesystem version (WORD) */
 142:DRIVER/FatFs/source/ff.c **** #define BPB_VolFlagEx		106		/* exFAT: Volume flags (WORD) */
 143:DRIVER/FatFs/source/ff.c **** #define BPB_BytsPerSecEx	108		/* exFAT: Log2 of sector size in unit of byte (BYTE) */
 144:DRIVER/FatFs/source/ff.c **** #define BPB_SecPerClusEx	109		/* exFAT: Log2 of cluster size in unit of sector (BYTE) */
 145:DRIVER/FatFs/source/ff.c **** #define BPB_NumFATsEx		110		/* exFAT: Number of FATs (BYTE) */
 146:DRIVER/FatFs/source/ff.c **** #define BPB_DrvNumEx		111		/* exFAT: Physical drive number for int13h (BYTE) */
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 4


 147:DRIVER/FatFs/source/ff.c **** #define BPB_PercInUseEx		112		/* exFAT: Percent in use (BYTE) */
 148:DRIVER/FatFs/source/ff.c **** #define BPB_RsvdEx			113		/* exFAT: Reserved (7-byte) */
 149:DRIVER/FatFs/source/ff.c **** #define BS_BootCodeEx		120		/* exFAT: Boot code (390-byte) */
 150:DRIVER/FatFs/source/ff.c **** 
 151:DRIVER/FatFs/source/ff.c **** #define DIR_Name			0		/* Short file name (11-byte) */
 152:DRIVER/FatFs/source/ff.c **** #define DIR_Attr			11		/* Attribute (BYTE) */
 153:DRIVER/FatFs/source/ff.c **** #define DIR_NTres			12		/* Lower case flag (BYTE) */
 154:DRIVER/FatFs/source/ff.c **** #define DIR_CrtTime10		13		/* Created time sub-second (BYTE) */
 155:DRIVER/FatFs/source/ff.c **** #define DIR_CrtTime			14		/* Created time (DWORD) */
 156:DRIVER/FatFs/source/ff.c **** #define DIR_LstAccDate		18		/* Last accessed date (WORD) */
 157:DRIVER/FatFs/source/ff.c **** #define DIR_FstClusHI		20		/* Higher 16-bit of first cluster (WORD) */
 158:DRIVER/FatFs/source/ff.c **** #define DIR_ModTime			22		/* Modified time (DWORD) */
 159:DRIVER/FatFs/source/ff.c **** #define DIR_FstClusLO		26		/* Lower 16-bit of first cluster (WORD) */
 160:DRIVER/FatFs/source/ff.c **** #define DIR_FileSize		28		/* File size (DWORD) */
 161:DRIVER/FatFs/source/ff.c **** #define LDIR_Ord			0		/* LFN: LFN order and LLE flag (BYTE) */
 162:DRIVER/FatFs/source/ff.c **** #define LDIR_Attr			11		/* LFN: LFN attribute (BYTE) */
 163:DRIVER/FatFs/source/ff.c **** #define LDIR_Type			12		/* LFN: Entry type (BYTE) */
 164:DRIVER/FatFs/source/ff.c **** #define LDIR_Chksum			13		/* LFN: Checksum of the SFN (BYTE) */
 165:DRIVER/FatFs/source/ff.c **** #define LDIR_FstClusLO		26		/* LFN: MBZ field (WORD) */
 166:DRIVER/FatFs/source/ff.c **** #define XDIR_Type			0		/* exFAT: Type of exFAT directory entry (BYTE) */
 167:DRIVER/FatFs/source/ff.c **** #define XDIR_NumLabel		1		/* exFAT: Number of volume label characters (BYTE) */
 168:DRIVER/FatFs/source/ff.c **** #define XDIR_Label			2		/* exFAT: Volume label (11-WORD) */
 169:DRIVER/FatFs/source/ff.c **** #define XDIR_CaseSum		4		/* exFAT: Sum of case conversion table (DWORD) */
 170:DRIVER/FatFs/source/ff.c **** #define XDIR_NumSec			1		/* exFAT: Number of secondary entries (BYTE) */
 171:DRIVER/FatFs/source/ff.c **** #define XDIR_SetSum			2		/* exFAT: Sum of the set of directory entries (WORD) */
 172:DRIVER/FatFs/source/ff.c **** #define XDIR_Attr			4		/* exFAT: File attribute (WORD) */
 173:DRIVER/FatFs/source/ff.c **** #define XDIR_CrtTime		8		/* exFAT: Created time (DWORD) */
 174:DRIVER/FatFs/source/ff.c **** #define XDIR_ModTime		12		/* exFAT: Modified time (DWORD) */
 175:DRIVER/FatFs/source/ff.c **** #define XDIR_AccTime		16		/* exFAT: Last accessed time (DWORD) */
 176:DRIVER/FatFs/source/ff.c **** #define XDIR_CrtTime10		20		/* exFAT: Created time subsecond (BYTE) */
 177:DRIVER/FatFs/source/ff.c **** #define XDIR_ModTime10		21		/* exFAT: Modified time subsecond (BYTE) */
 178:DRIVER/FatFs/source/ff.c **** #define XDIR_CrtTZ			22		/* exFAT: Created timezone (BYTE) */
 179:DRIVER/FatFs/source/ff.c **** #define XDIR_ModTZ			23		/* exFAT: Modified timezone (BYTE) */
 180:DRIVER/FatFs/source/ff.c **** #define XDIR_AccTZ			24		/* exFAT: Last accessed timezone (BYTE) */
 181:DRIVER/FatFs/source/ff.c **** #define XDIR_GenFlags		33		/* exFAT: General secondary flags (BYTE) */
 182:DRIVER/FatFs/source/ff.c **** #define XDIR_NumName		35		/* exFAT: Number of file name characters (BYTE) */
 183:DRIVER/FatFs/source/ff.c **** #define XDIR_NameHash		36		/* exFAT: Hash of file name (WORD) */
 184:DRIVER/FatFs/source/ff.c **** #define XDIR_ValidFileSize	40		/* exFAT: Valid file size (QWORD) */
 185:DRIVER/FatFs/source/ff.c **** #define XDIR_FstClus		52		/* exFAT: First cluster of the file data (DWORD) */
 186:DRIVER/FatFs/source/ff.c **** #define XDIR_FileSize		56		/* exFAT: File/Directory size (QWORD) */
 187:DRIVER/FatFs/source/ff.c **** 
 188:DRIVER/FatFs/source/ff.c **** #define SZDIRE				32		/* Size of a directory entry */
 189:DRIVER/FatFs/source/ff.c **** #define DDEM				0xE5	/* Deleted directory entry mark set to DIR_Name[0] */
 190:DRIVER/FatFs/source/ff.c **** #define RDDEM				0x05	/* Replacement of the character collides with DDEM */
 191:DRIVER/FatFs/source/ff.c **** #define LLEF				0x40	/* Last long entry flag in LDIR_Ord */
 192:DRIVER/FatFs/source/ff.c **** 
 193:DRIVER/FatFs/source/ff.c **** #define FSI_LeadSig			0		/* FAT32 FSI: Leading signature (DWORD) */
 194:DRIVER/FatFs/source/ff.c **** #define FSI_StrucSig		484		/* FAT32 FSI: Structure signature (DWORD) */
 195:DRIVER/FatFs/source/ff.c **** #define FSI_Free_Count		488		/* FAT32 FSI: Number of free clusters (DWORD) */
 196:DRIVER/FatFs/source/ff.c **** #define FSI_Nxt_Free		492		/* FAT32 FSI: Last allocated cluster (DWORD) */
 197:DRIVER/FatFs/source/ff.c **** 
 198:DRIVER/FatFs/source/ff.c **** #define MBR_Table			446		/* MBR: Offset of partition table in the MBR */
 199:DRIVER/FatFs/source/ff.c **** #define SZ_PTE				16		/* MBR: Size of a partition table entry */
 200:DRIVER/FatFs/source/ff.c **** #define PTE_Boot			0		/* MBR PTE: Boot indicator */
 201:DRIVER/FatFs/source/ff.c **** #define PTE_StHead			1		/* MBR PTE: Start head */
 202:DRIVER/FatFs/source/ff.c **** #define PTE_StSec			2		/* MBR PTE: Start sector */
 203:DRIVER/FatFs/source/ff.c **** #define PTE_StCyl			3		/* MBR PTE: Start cylinder */
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 5


 204:DRIVER/FatFs/source/ff.c **** #define PTE_System			4		/* MBR PTE: System ID */
 205:DRIVER/FatFs/source/ff.c **** #define PTE_EdHead			5		/* MBR PTE: End head */
 206:DRIVER/FatFs/source/ff.c **** #define PTE_EdSec			6		/* MBR PTE: End sector */
 207:DRIVER/FatFs/source/ff.c **** #define PTE_EdCyl			7		/* MBR PTE: End cylinder */
 208:DRIVER/FatFs/source/ff.c **** #define PTE_StLba			8		/* MBR PTE: Start in LBA */
 209:DRIVER/FatFs/source/ff.c **** #define PTE_SizLba			12		/* MBR PTE: Size in LBA */
 210:DRIVER/FatFs/source/ff.c **** 
 211:DRIVER/FatFs/source/ff.c **** #define GPTH_Sign			0		/* GPT HDR: Signature (8-byte) */
 212:DRIVER/FatFs/source/ff.c **** #define GPTH_Rev			8		/* GPT HDR: Revision (DWORD) */
 213:DRIVER/FatFs/source/ff.c **** #define GPTH_Size			12		/* GPT HDR: Header size (DWORD) */
 214:DRIVER/FatFs/source/ff.c **** #define GPTH_Bcc			16		/* GPT HDR: Header BCC (DWORD) */
 215:DRIVER/FatFs/source/ff.c **** #define GPTH_CurLba			24		/* GPT HDR: This header LBA (QWORD) */
 216:DRIVER/FatFs/source/ff.c **** #define GPTH_BakLba			32		/* GPT HDR: Another header LBA (QWORD) */
 217:DRIVER/FatFs/source/ff.c **** #define GPTH_FstLba			40		/* GPT HDR: First LBA for partition data (QWORD) */
 218:DRIVER/FatFs/source/ff.c **** #define GPTH_LstLba			48		/* GPT HDR: Last LBA for partition data (QWORD) */
 219:DRIVER/FatFs/source/ff.c **** #define GPTH_DskGuid		56		/* GPT HDR: Disk GUID (16-byte) */
 220:DRIVER/FatFs/source/ff.c **** #define GPTH_PtOfs			72		/* GPT HDR: Partition table LBA (QWORD) */
 221:DRIVER/FatFs/source/ff.c **** #define GPTH_PtNum			80		/* GPT HDR: Number of table entries (DWORD) */
 222:DRIVER/FatFs/source/ff.c **** #define GPTH_PteSize		84		/* GPT HDR: Size of table entry (DWORD) */
 223:DRIVER/FatFs/source/ff.c **** #define GPTH_PtBcc			88		/* GPT HDR: Partition table BCC (DWORD) */
 224:DRIVER/FatFs/source/ff.c **** #define SZ_GPTE				128		/* GPT PTE: Size of partition table entry */
 225:DRIVER/FatFs/source/ff.c **** #define GPTE_PtGuid			0		/* GPT PTE: Partition type GUID (16-byte) */
 226:DRIVER/FatFs/source/ff.c **** #define GPTE_UpGuid			16		/* GPT PTE: Partition unique GUID (16-byte) */
 227:DRIVER/FatFs/source/ff.c **** #define GPTE_FstLba			32		/* GPT PTE: First LBA of partition (QWORD) */
 228:DRIVER/FatFs/source/ff.c **** #define GPTE_LstLba			40		/* GPT PTE: Last LBA of partition (QWORD) */
 229:DRIVER/FatFs/source/ff.c **** #define GPTE_Flags			48		/* GPT PTE: Partition flags (QWORD) */
 230:DRIVER/FatFs/source/ff.c **** #define GPTE_Name			56		/* GPT PTE: Partition name */
 231:DRIVER/FatFs/source/ff.c **** 
 232:DRIVER/FatFs/source/ff.c **** 
 233:DRIVER/FatFs/source/ff.c **** /* Post process on fatal error in the file operations */
 234:DRIVER/FatFs/source/ff.c **** #define ABORT(fs, res)		{ fp->err = (BYTE)(res); LEAVE_FF(fs, res); }
 235:DRIVER/FatFs/source/ff.c **** 
 236:DRIVER/FatFs/source/ff.c **** 
 237:DRIVER/FatFs/source/ff.c **** /* Re-entrancy related */
 238:DRIVER/FatFs/source/ff.c **** #if FF_FS_REENTRANT
 239:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN == 1
 240:DRIVER/FatFs/source/ff.c **** #error Static LFN work area cannot be used in thread-safe configuration
 241:DRIVER/FatFs/source/ff.c **** #endif
 242:DRIVER/FatFs/source/ff.c **** #define LEAVE_FF(fs, res)	{ unlock_volume(fs, res); return res; }
 243:DRIVER/FatFs/source/ff.c **** #else
 244:DRIVER/FatFs/source/ff.c **** #define LEAVE_FF(fs, res)	return res
 245:DRIVER/FatFs/source/ff.c **** #endif
 246:DRIVER/FatFs/source/ff.c **** 
 247:DRIVER/FatFs/source/ff.c **** 
 248:DRIVER/FatFs/source/ff.c **** /* Definitions of logical drive - physical location conversion */
 249:DRIVER/FatFs/source/ff.c **** #if FF_MULTI_PARTITION
 250:DRIVER/FatFs/source/ff.c **** #define LD2PD(vol) VolToPart[vol].pd	/* Get physical drive number */
 251:DRIVER/FatFs/source/ff.c **** #define LD2PT(vol) VolToPart[vol].pt	/* Get partition number (0:auto search, 1..:forced partition n
 252:DRIVER/FatFs/source/ff.c **** #else
 253:DRIVER/FatFs/source/ff.c **** #define LD2PD(vol) (BYTE)(vol)	/* Each logical drive is associated with the same physical drive num
 254:DRIVER/FatFs/source/ff.c **** #define LD2PT(vol) 0			/* Auto partition search */
 255:DRIVER/FatFs/source/ff.c **** #endif
 256:DRIVER/FatFs/source/ff.c **** 
 257:DRIVER/FatFs/source/ff.c **** 
 258:DRIVER/FatFs/source/ff.c **** /* Definitions of sector size */
 259:DRIVER/FatFs/source/ff.c **** #if (FF_MAX_SS < FF_MIN_SS) || (FF_MAX_SS != 512 && FF_MAX_SS != 1024 && FF_MAX_SS != 2048 && FF_MA
 260:DRIVER/FatFs/source/ff.c **** #error Wrong sector size configuration
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 6


 261:DRIVER/FatFs/source/ff.c **** #endif
 262:DRIVER/FatFs/source/ff.c **** #if FF_MAX_SS == FF_MIN_SS
 263:DRIVER/FatFs/source/ff.c **** #define SS(fs)	((UINT)FF_MAX_SS)	/* Fixed sector size */
 264:DRIVER/FatFs/source/ff.c **** #else
 265:DRIVER/FatFs/source/ff.c **** #define SS(fs)	((fs)->ssize)	/* Variable sector size */
 266:DRIVER/FatFs/source/ff.c **** #endif
 267:DRIVER/FatFs/source/ff.c **** 
 268:DRIVER/FatFs/source/ff.c **** 
 269:DRIVER/FatFs/source/ff.c **** /* Timestamp */
 270:DRIVER/FatFs/source/ff.c **** #if FF_FS_NORTC == 1
 271:DRIVER/FatFs/source/ff.c **** #if FF_NORTC_YEAR < 1980 || FF_NORTC_YEAR > 2107 || FF_NORTC_MON < 1 || FF_NORTC_MON > 12 || FF_NOR
 272:DRIVER/FatFs/source/ff.c **** #error Invalid FF_FS_NORTC settings
 273:DRIVER/FatFs/source/ff.c **** #endif
 274:DRIVER/FatFs/source/ff.c **** #define GET_FATTIME()	((DWORD)(FF_NORTC_YEAR - 1980) << 25 | (DWORD)FF_NORTC_MON << 21 | (DWORD)FF_
 275:DRIVER/FatFs/source/ff.c **** #else
 276:DRIVER/FatFs/source/ff.c **** #define GET_FATTIME()	get_fattime()
 277:DRIVER/FatFs/source/ff.c **** #endif
 278:DRIVER/FatFs/source/ff.c **** 
 279:DRIVER/FatFs/source/ff.c **** 
 280:DRIVER/FatFs/source/ff.c **** /* File lock controls */
 281:DRIVER/FatFs/source/ff.c **** #if FF_FS_LOCK
 282:DRIVER/FatFs/source/ff.c **** #if FF_FS_READONLY
 283:DRIVER/FatFs/source/ff.c **** #error FF_FS_LOCK must be 0 at read-only configuration
 284:DRIVER/FatFs/source/ff.c **** #endif
 285:DRIVER/FatFs/source/ff.c **** typedef struct {
 286:DRIVER/FatFs/source/ff.c **** 	FATFS* fs;		/* Object ID 1, volume (NULL:blank entry) */
 287:DRIVER/FatFs/source/ff.c **** 	DWORD clu;		/* Object ID 2, containing directory (0:root) */
 288:DRIVER/FatFs/source/ff.c **** 	DWORD ofs;		/* Object ID 3, offset in the directory */
 289:DRIVER/FatFs/source/ff.c **** 	UINT ctr;		/* Object open counter, 0:none, 0x01..0xFF:read mode open count, 0x100:write mode */
 290:DRIVER/FatFs/source/ff.c **** } FILESEM;
 291:DRIVER/FatFs/source/ff.c **** #endif
 292:DRIVER/FatFs/source/ff.c **** 
 293:DRIVER/FatFs/source/ff.c **** 
 294:DRIVER/FatFs/source/ff.c **** /* SBCS up-case tables (\x80-\xFF) */
 295:DRIVER/FatFs/source/ff.c **** #define TBL_CT437  {0x80,0x9A,0x45,0x41,0x8E,0x41,0x8F,0x80,0x45,0x45,0x45,0x49,0x49,0x49,0x8E,0x8F
 296:DRIVER/FatFs/source/ff.c **** 					0x90,0x92,0x92,0x4F,0x99,0x4F,0x55,0x55,0x59,0x99,0x9A,0x9B,0x9C,0x9D,0x9E,0x9F, \
 297:DRIVER/FatFs/source/ff.c **** 					0x41,0x49,0x4F,0x55,0xA5,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF, \
 298:DRIVER/FatFs/source/ff.c **** 					0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB9,0xBA,0xBB,0xBC,0xBD,0xBE,0xBF, \
 299:DRIVER/FatFs/source/ff.c **** 					0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF, \
 300:DRIVER/FatFs/source/ff.c **** 					0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xD7,0xD8,0xD9,0xDA,0xDB,0xDC,0xDD,0xDE,0xDF, \
 301:DRIVER/FatFs/source/ff.c **** 					0xE0,0xE1,0xE2,0xE3,0xE4,0xE5,0xE6,0xE7,0xE8,0xE9,0xEA,0xEB,0xEC,0xED,0xEE,0xEF, \
 302:DRIVER/FatFs/source/ff.c **** 					0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF6,0xF7,0xF8,0xF9,0xFA,0xFB,0xFC,0xFD,0xFE,0xFF}
 303:DRIVER/FatFs/source/ff.c **** #define TBL_CT720  {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F
 304:DRIVER/FatFs/source/ff.c **** 					0x90,0x91,0x92,0x93,0x94,0x95,0x96,0x97,0x98,0x99,0x9A,0x9B,0x9C,0x9D,0x9E,0x9F, \
 305:DRIVER/FatFs/source/ff.c **** 					0xA0,0xA1,0xA2,0xA3,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF, \
 306:DRIVER/FatFs/source/ff.c **** 					0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB9,0xBA,0xBB,0xBC,0xBD,0xBE,0xBF, \
 307:DRIVER/FatFs/source/ff.c **** 					0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF, \
 308:DRIVER/FatFs/source/ff.c **** 					0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xD7,0xD8,0xD9,0xDA,0xDB,0xDC,0xDD,0xDE,0xDF, \
 309:DRIVER/FatFs/source/ff.c **** 					0xE0,0xE1,0xE2,0xE3,0xE4,0xE5,0xE6,0xE7,0xE8,0xE9,0xEA,0xEB,0xEC,0xED,0xEE,0xEF, \
 310:DRIVER/FatFs/source/ff.c **** 					0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF6,0xF7,0xF8,0xF9,0xFA,0xFB,0xFC,0xFD,0xFE,0xFF}
 311:DRIVER/FatFs/source/ff.c **** #define TBL_CT737  {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F
 312:DRIVER/FatFs/source/ff.c **** 					0x90,0x92,0x92,0x93,0x94,0x95,0x96,0x97,0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87, \
 313:DRIVER/FatFs/source/ff.c **** 					0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x90,0x91,0xAA,0x92,0x93,0x94,0x95,0x96, \
 314:DRIVER/FatFs/source/ff.c **** 					0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB9,0xBA,0xBB,0xBC,0xBD,0xBE,0xBF, \
 315:DRIVER/FatFs/source/ff.c **** 					0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF, \
 316:DRIVER/FatFs/source/ff.c **** 					0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xD7,0xD8,0xD9,0xDA,0xDB,0xDC,0xDD,0xDE,0xDF, \
 317:DRIVER/FatFs/source/ff.c **** 					0x97,0xEA,0xEB,0xEC,0xE4,0xED,0xEE,0xEF,0xF5,0xF0,0xEA,0xEB,0xEC,0xED,0xEE,0xEF, \
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 7


 318:DRIVER/FatFs/source/ff.c **** 					0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF6,0xF7,0xF8,0xF9,0xFA,0xFB,0xFC,0xFD,0xFE,0xFF}
 319:DRIVER/FatFs/source/ff.c **** #define TBL_CT771  {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F
 320:DRIVER/FatFs/source/ff.c **** 					0x90,0x91,0x92,0x93,0x94,0x95,0x96,0x97,0x98,0x99,0x9A,0x9B,0x9C,0x9D,0x9E,0x9F, \
 321:DRIVER/FatFs/source/ff.c **** 					0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F, \
 322:DRIVER/FatFs/source/ff.c **** 					0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB9,0xBA,0xBB,0xBC,0xBD,0xBE,0xBF, \
 323:DRIVER/FatFs/source/ff.c **** 					0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF, \
 324:DRIVER/FatFs/source/ff.c **** 					0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xD7,0xD8,0xD9,0xDA,0xDB,0xDC,0xDC,0xDE,0xDE, \
 325:DRIVER/FatFs/source/ff.c **** 					0x90,0x91,0x92,0x93,0x94,0x95,0x96,0x97,0x98,0x99,0x9A,0x9B,0x9C,0x9D,0x9E,0x9F, \
 326:DRIVER/FatFs/source/ff.c **** 					0xF0,0xF0,0xF2,0xF2,0xF4,0xF4,0xF6,0xF6,0xF8,0xF8,0xFA,0xFA,0xFC,0xFC,0xFE,0xFF}
 327:DRIVER/FatFs/source/ff.c **** #define TBL_CT775  {0x80,0x9A,0x91,0xA0,0x8E,0x95,0x8F,0x80,0xAD,0xED,0x8A,0x8A,0xA1,0x8D,0x8E,0x8F
 328:DRIVER/FatFs/source/ff.c **** 					0x90,0x92,0x92,0xE2,0x99,0x95,0x96,0x97,0x97,0x99,0x9A,0x9D,0x9C,0x9D,0x9E,0x9F, \
 329:DRIVER/FatFs/source/ff.c **** 					0xA0,0xA1,0xE0,0xA3,0xA3,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF, \
 330:DRIVER/FatFs/source/ff.c **** 					0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB9,0xBA,0xBB,0xBC,0xBD,0xBE,0xBF, \
 331:DRIVER/FatFs/source/ff.c **** 					0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF, \
 332:DRIVER/FatFs/source/ff.c **** 					0xB5,0xB6,0xB7,0xB8,0xBD,0xBE,0xC6,0xC7,0xA5,0xD9,0xDA,0xDB,0xDC,0xDD,0xDE,0xDF, \
 333:DRIVER/FatFs/source/ff.c **** 					0xE0,0xE1,0xE2,0xE3,0xE5,0xE5,0xE6,0xE3,0xE8,0xE8,0xEA,0xEA,0xEE,0xED,0xEE,0xEF, \
 334:DRIVER/FatFs/source/ff.c **** 					0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF6,0xF7,0xF8,0xF9,0xFA,0xFB,0xFC,0xFD,0xFE,0xFF}
 335:DRIVER/FatFs/source/ff.c **** #define TBL_CT850  {0x43,0x55,0x45,0x41,0x41,0x41,0x41,0x43,0x45,0x45,0x45,0x49,0x49,0x49,0x41,0x41
 336:DRIVER/FatFs/source/ff.c **** 					0x45,0x92,0x92,0x4F,0x4F,0x4F,0x55,0x55,0x59,0x4F,0x55,0x4F,0x9C,0x4F,0x9E,0x9F, \
 337:DRIVER/FatFs/source/ff.c **** 					0x41,0x49,0x4F,0x55,0xA5,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF, \
 338:DRIVER/FatFs/source/ff.c **** 					0xB0,0xB1,0xB2,0xB3,0xB4,0x41,0x41,0x41,0xB8,0xB9,0xBA,0xBB,0xBC,0xBD,0xBE,0xBF, \
 339:DRIVER/FatFs/source/ff.c **** 					0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0x41,0x41,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF, \
 340:DRIVER/FatFs/source/ff.c **** 					0xD1,0xD1,0x45,0x45,0x45,0x49,0x49,0x49,0x49,0xD9,0xDA,0xDB,0xDC,0xDD,0x49,0xDF, \
 341:DRIVER/FatFs/source/ff.c **** 					0x4F,0xE1,0x4F,0x4F,0x4F,0x4F,0xE6,0xE8,0xE8,0x55,0x55,0x55,0x59,0x59,0xEE,0xEF, \
 342:DRIVER/FatFs/source/ff.c **** 					0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF6,0xF7,0xF8,0xF9,0xFA,0xFB,0xFC,0xFD,0xFE,0xFF}
 343:DRIVER/FatFs/source/ff.c **** #define TBL_CT852  {0x80,0x9A,0x90,0xB6,0x8E,0xDE,0x8F,0x80,0x9D,0xD3,0x8A,0x8A,0xD7,0x8D,0x8E,0x8F
 344:DRIVER/FatFs/source/ff.c **** 					0x90,0x91,0x91,0xE2,0x99,0x95,0x95,0x97,0x97,0x99,0x9A,0x9B,0x9B,0x9D,0x9E,0xAC, \
 345:DRIVER/FatFs/source/ff.c **** 					0xB5,0xD6,0xE0,0xE9,0xA4,0xA4,0xA6,0xA6,0xA8,0xA8,0xAA,0x8D,0xAC,0xB8,0xAE,0xAF, \
 346:DRIVER/FatFs/source/ff.c **** 					0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB9,0xBA,0xBB,0xBC,0xBD,0xBD,0xBF, \
 347:DRIVER/FatFs/source/ff.c **** 					0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC6,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF, \
 348:DRIVER/FatFs/source/ff.c **** 					0xD1,0xD1,0xD2,0xD3,0xD2,0xD5,0xD6,0xD7,0xB7,0xD9,0xDA,0xDB,0xDC,0xDD,0xDE,0xDF, \
 349:DRIVER/FatFs/source/ff.c **** 					0xE0,0xE1,0xE2,0xE3,0xE3,0xD5,0xE6,0xE6,0xE8,0xE9,0xE8,0xEB,0xED,0xED,0xDD,0xEF, \
 350:DRIVER/FatFs/source/ff.c **** 					0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF6,0xF7,0xF8,0xF9,0xFA,0xEB,0xFC,0xFC,0xFE,0xFF}
 351:DRIVER/FatFs/source/ff.c **** #define TBL_CT855  {0x81,0x81,0x83,0x83,0x85,0x85,0x87,0x87,0x89,0x89,0x8B,0x8B,0x8D,0x8D,0x8F,0x8F
 352:DRIVER/FatFs/source/ff.c **** 					0x91,0x91,0x93,0x93,0x95,0x95,0x97,0x97,0x99,0x99,0x9B,0x9B,0x9D,0x9D,0x9F,0x9F, \
 353:DRIVER/FatFs/source/ff.c **** 					0xA1,0xA1,0xA3,0xA3,0xA5,0xA5,0xA7,0xA7,0xA9,0xA9,0xAB,0xAB,0xAD,0xAD,0xAE,0xAF, \
 354:DRIVER/FatFs/source/ff.c **** 					0xB0,0xB1,0xB2,0xB3,0xB4,0xB6,0xB6,0xB8,0xB8,0xB9,0xBA,0xBB,0xBC,0xBE,0xBE,0xBF, \
 355:DRIVER/FatFs/source/ff.c **** 					0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC7,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF, \
 356:DRIVER/FatFs/source/ff.c **** 					0xD1,0xD1,0xD3,0xD3,0xD5,0xD5,0xD7,0xD7,0xDD,0xD9,0xDA,0xDB,0xDC,0xDD,0xE0,0xDF, \
 357:DRIVER/FatFs/source/ff.c **** 					0xE0,0xE2,0xE2,0xE4,0xE4,0xE6,0xE6,0xE8,0xE8,0xEA,0xEA,0xEC,0xEC,0xEE,0xEE,0xEF, \
 358:DRIVER/FatFs/source/ff.c **** 					0xF0,0xF2,0xF2,0xF4,0xF4,0xF6,0xF6,0xF8,0xF8,0xFA,0xFA,0xFC,0xFC,0xFD,0xFE,0xFF}
 359:DRIVER/FatFs/source/ff.c **** #define TBL_CT857  {0x80,0x9A,0x90,0xB6,0x8E,0xB7,0x8F,0x80,0xD2,0xD3,0xD4,0xD8,0xD7,0x49,0x8E,0x8F
 360:DRIVER/FatFs/source/ff.c **** 					0x90,0x92,0x92,0xE2,0x99,0xE3,0xEA,0xEB,0x98,0x99,0x9A,0x9D,0x9C,0x9D,0x9E,0x9E, \
 361:DRIVER/FatFs/source/ff.c **** 					0xB5,0xD6,0xE0,0xE9,0xA5,0xA5,0xA6,0xA6,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF, \
 362:DRIVER/FatFs/source/ff.c **** 					0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB9,0xBA,0xBB,0xBC,0xBD,0xBE,0xBF, \
 363:DRIVER/FatFs/source/ff.c **** 					0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC7,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF, \
 364:DRIVER/FatFs/source/ff.c **** 					0xD0,0xD1,0xD2,0xD3,0xD4,0x49,0xD6,0xD7,0xD8,0xD9,0xDA,0xDB,0xDC,0xDD,0xDE,0xDF, \
 365:DRIVER/FatFs/source/ff.c **** 					0xE0,0xE1,0xE2,0xE3,0xE5,0xE5,0xE6,0xE7,0xE8,0xE9,0xEA,0xEB,0xDE,0xED,0xEE,0xEF, \
 366:DRIVER/FatFs/source/ff.c **** 					0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF6,0xF7,0xF8,0xF9,0xFA,0xFB,0xFC,0xFD,0xFE,0xFF}
 367:DRIVER/FatFs/source/ff.c **** #define TBL_CT860  {0x80,0x9A,0x90,0x8F,0x8E,0x91,0x86,0x80,0x89,0x89,0x92,0x8B,0x8C,0x98,0x8E,0x8F
 368:DRIVER/FatFs/source/ff.c **** 					0x90,0x91,0x92,0x8C,0x99,0xA9,0x96,0x9D,0x98,0x99,0x9A,0x9B,0x9C,0x9D,0x9E,0x9F, \
 369:DRIVER/FatFs/source/ff.c **** 					0x86,0x8B,0x9F,0x96,0xA5,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF, \
 370:DRIVER/FatFs/source/ff.c **** 					0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB9,0xBA,0xBB,0xBC,0xBD,0xBE,0xBF, \
 371:DRIVER/FatFs/source/ff.c **** 					0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF, \
 372:DRIVER/FatFs/source/ff.c **** 					0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xD7,0xD8,0xD9,0xDA,0xDB,0xDC,0xDD,0xDE,0xDF, \
 373:DRIVER/FatFs/source/ff.c **** 					0xE0,0xE1,0xE2,0xE3,0xE4,0xE5,0xE6,0xE7,0xE8,0xE9,0xEA,0xEB,0xEC,0xED,0xEE,0xEF, \
 374:DRIVER/FatFs/source/ff.c **** 					0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF6,0xF7,0xF8,0xF9,0xFA,0xFB,0xFC,0xFD,0xFE,0xFF}
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 8


 375:DRIVER/FatFs/source/ff.c **** #define TBL_CT861  {0x80,0x9A,0x90,0x41,0x8E,0x41,0x8F,0x80,0x45,0x45,0x45,0x8B,0x8B,0x8D,0x8E,0x8F
 376:DRIVER/FatFs/source/ff.c **** 					0x90,0x92,0x92,0x4F,0x99,0x8D,0x55,0x97,0x97,0x99,0x9A,0x9D,0x9C,0x9D,0x9E,0x9F, \
 377:DRIVER/FatFs/source/ff.c **** 					0xA4,0xA5,0xA6,0xA7,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF, \
 378:DRIVER/FatFs/source/ff.c **** 					0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB9,0xBA,0xBB,0xBC,0xBD,0xBE,0xBF, \
 379:DRIVER/FatFs/source/ff.c **** 					0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF, \
 380:DRIVER/FatFs/source/ff.c **** 					0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xD7,0xD8,0xD9,0xDA,0xDB,0xDC,0xDD,0xDE,0xDF, \
 381:DRIVER/FatFs/source/ff.c **** 					0xE0,0xE1,0xE2,0xE3,0xE4,0xE5,0xE6,0xE7,0xE8,0xE9,0xEA,0xEB,0xEC,0xED,0xEE,0xEF, \
 382:DRIVER/FatFs/source/ff.c **** 					0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF6,0xF7,0xF8,0xF9,0xFA,0xFB,0xFC,0xFD,0xFE,0xFF}
 383:DRIVER/FatFs/source/ff.c **** #define TBL_CT862  {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F
 384:DRIVER/FatFs/source/ff.c **** 					0x90,0x91,0x92,0x93,0x94,0x95,0x96,0x97,0x98,0x99,0x9A,0x9B,0x9C,0x9D,0x9E,0x9F, \
 385:DRIVER/FatFs/source/ff.c **** 					0x41,0x49,0x4F,0x55,0xA5,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF, \
 386:DRIVER/FatFs/source/ff.c **** 					0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB9,0xBA,0xBB,0xBC,0xBD,0xBE,0xBF, \
 387:DRIVER/FatFs/source/ff.c **** 					0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF, \
 388:DRIVER/FatFs/source/ff.c **** 					0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xD7,0xD8,0xD9,0xDA,0xDB,0xDC,0xDD,0xDE,0xDF, \
 389:DRIVER/FatFs/source/ff.c **** 					0xE0,0xE1,0xE2,0xE3,0xE4,0xE5,0xE6,0xE7,0xE8,0xE9,0xEA,0xEB,0xEC,0xED,0xEE,0xEF, \
 390:DRIVER/FatFs/source/ff.c **** 					0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF6,0xF7,0xF8,0xF9,0xFA,0xFB,0xFC,0xFD,0xFE,0xFF}
 391:DRIVER/FatFs/source/ff.c **** #define TBL_CT863  {0x43,0x55,0x45,0x41,0x41,0x41,0x86,0x43,0x45,0x45,0x45,0x49,0x49,0x8D,0x41,0x8F
 392:DRIVER/FatFs/source/ff.c **** 					0x45,0x45,0x45,0x4F,0x45,0x49,0x55,0x55,0x98,0x4F,0x55,0x9B,0x9C,0x55,0x55,0x9F, \
 393:DRIVER/FatFs/source/ff.c **** 					0xA0,0xA1,0x4F,0x55,0xA4,0xA5,0xA6,0xA7,0x49,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF, \
 394:DRIVER/FatFs/source/ff.c **** 					0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB9,0xBA,0xBB,0xBC,0xBD,0xBE,0xBF, \
 395:DRIVER/FatFs/source/ff.c **** 					0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF, \
 396:DRIVER/FatFs/source/ff.c **** 					0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xD7,0xD8,0xD9,0xDA,0xDB,0xDC,0xDD,0xDE,0xDF, \
 397:DRIVER/FatFs/source/ff.c **** 					0xE0,0xE1,0xE2,0xE3,0xE4,0xE5,0xE6,0xE7,0xE8,0xE9,0xEA,0xEB,0xEC,0xED,0xEE,0xEF, \
 398:DRIVER/FatFs/source/ff.c **** 					0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF6,0xF7,0xF8,0xF9,0xFA,0xFB,0xFC,0xFD,0xFE,0xFF}
 399:DRIVER/FatFs/source/ff.c **** #define TBL_CT864  {0x80,0x9A,0x45,0x41,0x8E,0x41,0x8F,0x80,0x45,0x45,0x45,0x49,0x49,0x49,0x8E,0x8F
 400:DRIVER/FatFs/source/ff.c **** 					0x90,0x92,0x92,0x4F,0x99,0x4F,0x55,0x55,0x59,0x99,0x9A,0x9B,0x9C,0x9D,0x9E,0x9F, \
 401:DRIVER/FatFs/source/ff.c **** 					0x41,0x49,0x4F,0x55,0xA5,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF, \
 402:DRIVER/FatFs/source/ff.c **** 					0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB9,0xBA,0xBB,0xBC,0xBD,0xBE,0xBF, \
 403:DRIVER/FatFs/source/ff.c **** 					0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF, \
 404:DRIVER/FatFs/source/ff.c **** 					0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xD7,0xD8,0xD9,0xDA,0xDB,0xDC,0xDD,0xDE,0xDF, \
 405:DRIVER/FatFs/source/ff.c **** 					0xE0,0xE1,0xE2,0xE3,0xE4,0xE5,0xE6,0xE7,0xE8,0xE9,0xEA,0xEB,0xEC,0xED,0xEE,0xEF, \
 406:DRIVER/FatFs/source/ff.c **** 					0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF6,0xF7,0xF8,0xF9,0xFA,0xFB,0xFC,0xFD,0xFE,0xFF}
 407:DRIVER/FatFs/source/ff.c **** #define TBL_CT865  {0x80,0x9A,0x90,0x41,0x8E,0x41,0x8F,0x80,0x45,0x45,0x45,0x49,0x49,0x49,0x8E,0x8F
 408:DRIVER/FatFs/source/ff.c **** 					0x90,0x92,0x92,0x4F,0x99,0x4F,0x55,0x55,0x59,0x99,0x9A,0x9B,0x9C,0x9D,0x9E,0x9F, \
 409:DRIVER/FatFs/source/ff.c **** 					0x41,0x49,0x4F,0x55,0xA5,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF, \
 410:DRIVER/FatFs/source/ff.c **** 					0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB9,0xBA,0xBB,0xBC,0xBD,0xBE,0xBF, \
 411:DRIVER/FatFs/source/ff.c **** 					0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF, \
 412:DRIVER/FatFs/source/ff.c **** 					0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xD7,0xD8,0xD9,0xDA,0xDB,0xDC,0xDD,0xDE,0xDF, \
 413:DRIVER/FatFs/source/ff.c **** 					0xE0,0xE1,0xE2,0xE3,0xE4,0xE5,0xE6,0xE7,0xE8,0xE9,0xEA,0xEB,0xEC,0xED,0xEE,0xEF, \
 414:DRIVER/FatFs/source/ff.c **** 					0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF6,0xF7,0xF8,0xF9,0xFA,0xFB,0xFC,0xFD,0xFE,0xFF}
 415:DRIVER/FatFs/source/ff.c **** #define TBL_CT866  {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F
 416:DRIVER/FatFs/source/ff.c **** 					0x90,0x91,0x92,0x93,0x94,0x95,0x96,0x97,0x98,0x99,0x9A,0x9B,0x9C,0x9D,0x9E,0x9F, \
 417:DRIVER/FatFs/source/ff.c **** 					0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F, \
 418:DRIVER/FatFs/source/ff.c **** 					0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB9,0xBA,0xBB,0xBC,0xBD,0xBE,0xBF, \
 419:DRIVER/FatFs/source/ff.c **** 					0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF, \
 420:DRIVER/FatFs/source/ff.c **** 					0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xD7,0xD8,0xD9,0xDA,0xDB,0xDC,0xDD,0xDE,0xDF, \
 421:DRIVER/FatFs/source/ff.c **** 					0x90,0x91,0x92,0x93,0x94,0x95,0x96,0x97,0x98,0x99,0x9A,0x9B,0x9C,0x9D,0x9E,0x9F, \
 422:DRIVER/FatFs/source/ff.c **** 					0xF0,0xF0,0xF2,0xF2,0xF4,0xF4,0xF6,0xF6,0xF8,0xF9,0xFA,0xFB,0xFC,0xFD,0xFE,0xFF}
 423:DRIVER/FatFs/source/ff.c **** #define TBL_CT869  {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F
 424:DRIVER/FatFs/source/ff.c **** 					0x90,0x91,0x92,0x93,0x94,0x95,0x96,0x97,0x98,0x99,0x9A,0x86,0x9C,0x8D,0x8F,0x90, \
 425:DRIVER/FatFs/source/ff.c **** 					0x91,0x90,0x92,0x95,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF, \
 426:DRIVER/FatFs/source/ff.c **** 					0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB9,0xBA,0xBB,0xBC,0xBD,0xBE,0xBF, \
 427:DRIVER/FatFs/source/ff.c **** 					0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF, \
 428:DRIVER/FatFs/source/ff.c **** 					0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xA4,0xA5,0xA6,0xD9,0xDA,0xDB,0xDC,0xA7,0xA8,0xDF, \
 429:DRIVER/FatFs/source/ff.c **** 					0xA9,0xAA,0xAC,0xAD,0xB5,0xB6,0xB7,0xB8,0xBD,0xBE,0xC6,0xC7,0xCF,0xCF,0xD0,0xEF, \
 430:DRIVER/FatFs/source/ff.c **** 					0xF0,0xF1,0xD1,0xD2,0xD3,0xF5,0xD4,0xF7,0xF8,0xF9,0xD5,0x96,0x95,0x98,0xFE,0xFF}
 431:DRIVER/FatFs/source/ff.c **** 
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 9


 432:DRIVER/FatFs/source/ff.c **** 
 433:DRIVER/FatFs/source/ff.c **** /* DBCS code range |----- 1st byte -----|  |----------- 2nd byte -----------| */
 434:DRIVER/FatFs/source/ff.c **** /*                  <------>    <------>    <------>    <------>    <------>  */
 435:DRIVER/FatFs/source/ff.c **** #define TBL_DC932 {0x81, 0x9F, 0xE0, 0xFC, 0x40, 0x7E, 0x80, 0xFC, 0x00, 0x00}
 436:DRIVER/FatFs/source/ff.c **** #define TBL_DC936 {0x81, 0xFE, 0x00, 0x00, 0x40, 0x7E, 0x80, 0xFE, 0x00, 0x00}
 437:DRIVER/FatFs/source/ff.c **** #define TBL_DC949 {0x81, 0xFE, 0x00, 0x00, 0x41, 0x5A, 0x61, 0x7A, 0x81, 0xFE}
 438:DRIVER/FatFs/source/ff.c **** #define TBL_DC950 {0x81, 0xFE, 0x00, 0x00, 0x40, 0x7E, 0xA1, 0xFE, 0x00, 0x00}
 439:DRIVER/FatFs/source/ff.c **** 
 440:DRIVER/FatFs/source/ff.c **** 
 441:DRIVER/FatFs/source/ff.c **** /* Macros for table definitions */
 442:DRIVER/FatFs/source/ff.c **** #define MERGE_2STR(a, b) a ## b
 443:DRIVER/FatFs/source/ff.c **** #define MKCVTBL(hd, cp) MERGE_2STR(hd, cp)
 444:DRIVER/FatFs/source/ff.c **** 
 445:DRIVER/FatFs/source/ff.c **** 
 446:DRIVER/FatFs/source/ff.c **** 
 447:DRIVER/FatFs/source/ff.c **** 
 448:DRIVER/FatFs/source/ff.c **** /*--------------------------------------------------------------------------
 449:DRIVER/FatFs/source/ff.c **** 
 450:DRIVER/FatFs/source/ff.c ****    Module Private Work Area
 451:DRIVER/FatFs/source/ff.c **** 
 452:DRIVER/FatFs/source/ff.c **** ---------------------------------------------------------------------------*/
 453:DRIVER/FatFs/source/ff.c **** /* Remark: Variables defined here without initial value shall be guaranteed
 454:DRIVER/FatFs/source/ff.c **** /  zero/null at start-up. If not, the linker option or start-up routine is
 455:DRIVER/FatFs/source/ff.c **** /  not compliance with C standard. */
 456:DRIVER/FatFs/source/ff.c **** 
 457:DRIVER/FatFs/source/ff.c **** /*--------------------------------*/
 458:DRIVER/FatFs/source/ff.c **** /* File/Volume controls           */
 459:DRIVER/FatFs/source/ff.c **** /*--------------------------------*/
 460:DRIVER/FatFs/source/ff.c **** 
 461:DRIVER/FatFs/source/ff.c **** #if FF_VOLUMES < 1 || FF_VOLUMES > 10
 462:DRIVER/FatFs/source/ff.c **** #error Wrong FF_VOLUMES setting
 463:DRIVER/FatFs/source/ff.c **** #endif
 464:DRIVER/FatFs/source/ff.c **** static FATFS *FatFs[FF_VOLUMES];	/* Pointer to the filesystem objects (logical drives) */
 465:DRIVER/FatFs/source/ff.c **** static WORD Fsid;					/* Filesystem mount ID */
 466:DRIVER/FatFs/source/ff.c **** 
 467:DRIVER/FatFs/source/ff.c **** #if FF_FS_RPATH != 0
 468:DRIVER/FatFs/source/ff.c **** static BYTE CurrVol;				/* Current drive set by f_chdrive() */
 469:DRIVER/FatFs/source/ff.c **** #endif
 470:DRIVER/FatFs/source/ff.c **** 
 471:DRIVER/FatFs/source/ff.c **** #if FF_FS_LOCK != 0
 472:DRIVER/FatFs/source/ff.c **** static FILESEM Files[FF_FS_LOCK];	/* Open object lock semaphores */
 473:DRIVER/FatFs/source/ff.c **** #if FF_FS_REENTRANT
 474:DRIVER/FatFs/source/ff.c **** static BYTE SysLock;				/* System lock flag (0:no mutex, 1:unlocked, 2:locked) */
 475:DRIVER/FatFs/source/ff.c **** #endif
 476:DRIVER/FatFs/source/ff.c **** #endif
 477:DRIVER/FatFs/source/ff.c **** 
 478:DRIVER/FatFs/source/ff.c **** #if FF_STR_VOLUME_ID
 479:DRIVER/FatFs/source/ff.c **** #ifdef FF_VOLUME_STRS
 480:DRIVER/FatFs/source/ff.c **** static const char *const VolumeStr[FF_VOLUMES] = {FF_VOLUME_STRS};	/* Pre-defined volume ID */
 481:DRIVER/FatFs/source/ff.c **** #endif
 482:DRIVER/FatFs/source/ff.c **** #endif
 483:DRIVER/FatFs/source/ff.c **** 
 484:DRIVER/FatFs/source/ff.c **** #if FF_LBA64
 485:DRIVER/FatFs/source/ff.c **** #if FF_MIN_GPT > 0x100000000
 486:DRIVER/FatFs/source/ff.c **** #error Wrong FF_MIN_GPT setting
 487:DRIVER/FatFs/source/ff.c **** #endif
 488:DRIVER/FatFs/source/ff.c **** static const BYTE GUID_MS_Basic[16] = {0xA2,0xA0,0xD0,0xEB,0xE5,0xB9,0x33,0x44,0x87,0xC0,0x68,0xB6,
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 10


 489:DRIVER/FatFs/source/ff.c **** #endif
 490:DRIVER/FatFs/source/ff.c **** 
 491:DRIVER/FatFs/source/ff.c **** 
 492:DRIVER/FatFs/source/ff.c **** 
 493:DRIVER/FatFs/source/ff.c **** /*--------------------------------*/
 494:DRIVER/FatFs/source/ff.c **** /* LFN/Directory working buffer   */
 495:DRIVER/FatFs/source/ff.c **** /*--------------------------------*/
 496:DRIVER/FatFs/source/ff.c **** 
 497:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN == 0		/* Non-LFN configuration */
 498:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
 499:DRIVER/FatFs/source/ff.c **** #error LFN must be enabled when enable exFAT
 500:DRIVER/FatFs/source/ff.c **** #endif
 501:DRIVER/FatFs/source/ff.c **** #define DEF_NAMBUF
 502:DRIVER/FatFs/source/ff.c **** #define INIT_NAMBUF(fs)
 503:DRIVER/FatFs/source/ff.c **** #define FREE_NAMBUF()
 504:DRIVER/FatFs/source/ff.c **** #define LEAVE_MKFS(res)	return res
 505:DRIVER/FatFs/source/ff.c **** 
 506:DRIVER/FatFs/source/ff.c **** #else					/* LFN configurations */
 507:DRIVER/FatFs/source/ff.c **** #if FF_MAX_LFN < 12 || FF_MAX_LFN > 255
 508:DRIVER/FatFs/source/ff.c **** #error Wrong setting of FF_MAX_LFN
 509:DRIVER/FatFs/source/ff.c **** #endif
 510:DRIVER/FatFs/source/ff.c **** #if FF_LFN_BUF < FF_SFN_BUF || FF_SFN_BUF < 12
 511:DRIVER/FatFs/source/ff.c **** #error Wrong setting of FF_LFN_BUF or FF_SFN_BUF
 512:DRIVER/FatFs/source/ff.c **** #endif
 513:DRIVER/FatFs/source/ff.c **** #if FF_LFN_UNICODE < 0 || FF_LFN_UNICODE > 3
 514:DRIVER/FatFs/source/ff.c **** #error Wrong setting of FF_LFN_UNICODE
 515:DRIVER/FatFs/source/ff.c **** #endif
 516:DRIVER/FatFs/source/ff.c **** static const BYTE LfnOfs[] = {1,3,5,7,9,14,16,18,20,22,24,28,30};	/* FAT: Offset of LFN characters 
 517:DRIVER/FatFs/source/ff.c **** #define MAXDIRB(nc)	((nc + 44U) / 15 * SZDIRE)	/* exFAT: Size of directory entry block scratchpad b
 518:DRIVER/FatFs/source/ff.c **** 
 519:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN == 1		/* LFN enabled with static working buffer */
 520:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
 521:DRIVER/FatFs/source/ff.c **** static BYTE	DirBuf[MAXDIRB(FF_MAX_LFN)];	/* Directory entry block scratchpad buffer */
 522:DRIVER/FatFs/source/ff.c **** #endif
 523:DRIVER/FatFs/source/ff.c **** static WCHAR LfnBuf[FF_MAX_LFN + 1];		/* LFN working buffer */
 524:DRIVER/FatFs/source/ff.c **** #define DEF_NAMBUF
 525:DRIVER/FatFs/source/ff.c **** #define INIT_NAMBUF(fs)
 526:DRIVER/FatFs/source/ff.c **** #define FREE_NAMBUF()
 527:DRIVER/FatFs/source/ff.c **** #define LEAVE_MKFS(res)	return res
 528:DRIVER/FatFs/source/ff.c **** 
 529:DRIVER/FatFs/source/ff.c **** #elif FF_USE_LFN == 2 	/* LFN enabled with dynamic working buffer on the stack */
 530:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
 531:DRIVER/FatFs/source/ff.c **** #define DEF_NAMBUF		WCHAR lbuf[FF_MAX_LFN+1]; BYTE dbuf[MAXDIRB(FF_MAX_LFN)];	/* LFN working buffer
 532:DRIVER/FatFs/source/ff.c **** #define INIT_NAMBUF(fs)	{ (fs)->lfnbuf = lbuf; (fs)->dirbuf = dbuf; }
 533:DRIVER/FatFs/source/ff.c **** #define FREE_NAMBUF()
 534:DRIVER/FatFs/source/ff.c **** #else
 535:DRIVER/FatFs/source/ff.c **** #define DEF_NAMBUF		WCHAR lbuf[FF_MAX_LFN+1];	/* LFN working buffer */
 536:DRIVER/FatFs/source/ff.c **** #define INIT_NAMBUF(fs)	{ (fs)->lfnbuf = lbuf; }
 537:DRIVER/FatFs/source/ff.c **** #define FREE_NAMBUF()
 538:DRIVER/FatFs/source/ff.c **** #endif
 539:DRIVER/FatFs/source/ff.c **** #define LEAVE_MKFS(res)	return res
 540:DRIVER/FatFs/source/ff.c **** 
 541:DRIVER/FatFs/source/ff.c **** #elif FF_USE_LFN == 3 	/* LFN enabled with dynamic working buffer on the heap */
 542:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
 543:DRIVER/FatFs/source/ff.c **** #define DEF_NAMBUF		WCHAR *lfn;	/* Pointer to LFN working buffer and directory entry block scratchp
 544:DRIVER/FatFs/source/ff.c **** #define INIT_NAMBUF(fs)	{ lfn = ff_memalloc((FF_MAX_LFN+1)*2 + MAXDIRB(FF_MAX_LFN)); if (!lfn) LEAV
 545:DRIVER/FatFs/source/ff.c **** #define FREE_NAMBUF()	ff_memfree(lfn)
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 11


 546:DRIVER/FatFs/source/ff.c **** #else
 547:DRIVER/FatFs/source/ff.c **** #define DEF_NAMBUF		WCHAR *lfn;	/* Pointer to LFN working buffer */
 548:DRIVER/FatFs/source/ff.c **** #define INIT_NAMBUF(fs)	{ lfn = ff_memalloc((FF_MAX_LFN+1)*2); if (!lfn) LEAVE_FF(fs, FR_NOT_ENOUGH
 549:DRIVER/FatFs/source/ff.c **** #define FREE_NAMBUF()	ff_memfree(lfn)
 550:DRIVER/FatFs/source/ff.c **** #endif
 551:DRIVER/FatFs/source/ff.c **** #define LEAVE_MKFS(res)	{ if (!work) ff_memfree(buf); return res; }
 552:DRIVER/FatFs/source/ff.c **** #define MAX_MALLOC	0x8000	/* Must be >=FF_MAX_SS */
 553:DRIVER/FatFs/source/ff.c **** 
 554:DRIVER/FatFs/source/ff.c **** #else
 555:DRIVER/FatFs/source/ff.c **** #error Wrong setting of FF_USE_LFN
 556:DRIVER/FatFs/source/ff.c **** 
 557:DRIVER/FatFs/source/ff.c **** #endif	/* FF_USE_LFN == 1 */
 558:DRIVER/FatFs/source/ff.c **** #endif	/* FF_USE_LFN == 0 */
 559:DRIVER/FatFs/source/ff.c **** 
 560:DRIVER/FatFs/source/ff.c **** 
 561:DRIVER/FatFs/source/ff.c **** 
 562:DRIVER/FatFs/source/ff.c **** /*--------------------------------*/
 563:DRIVER/FatFs/source/ff.c **** /* Code conversion tables         */
 564:DRIVER/FatFs/source/ff.c **** /*--------------------------------*/
 565:DRIVER/FatFs/source/ff.c **** 
 566:DRIVER/FatFs/source/ff.c **** #if FF_CODE_PAGE == 0	/* Run-time code page configuration */
 567:DRIVER/FatFs/source/ff.c **** #define CODEPAGE CodePage
 568:DRIVER/FatFs/source/ff.c **** static WORD CodePage;	/* Current code page */
 569:DRIVER/FatFs/source/ff.c **** static const BYTE* ExCvt;	/* Ptr to SBCS up-case table Ct???[] (null:not used) */
 570:DRIVER/FatFs/source/ff.c **** static const BYTE* DbcTbl;	/* Ptr to DBCS code range table Dc???[] (null:not used) */
 571:DRIVER/FatFs/source/ff.c **** 
 572:DRIVER/FatFs/source/ff.c **** static const BYTE Ct437[] = TBL_CT437;
 573:DRIVER/FatFs/source/ff.c **** static const BYTE Ct720[] = TBL_CT720;
 574:DRIVER/FatFs/source/ff.c **** static const BYTE Ct737[] = TBL_CT737;
 575:DRIVER/FatFs/source/ff.c **** static const BYTE Ct771[] = TBL_CT771;
 576:DRIVER/FatFs/source/ff.c **** static const BYTE Ct775[] = TBL_CT775;
 577:DRIVER/FatFs/source/ff.c **** static const BYTE Ct850[] = TBL_CT850;
 578:DRIVER/FatFs/source/ff.c **** static const BYTE Ct852[] = TBL_CT852;
 579:DRIVER/FatFs/source/ff.c **** static const BYTE Ct855[] = TBL_CT855;
 580:DRIVER/FatFs/source/ff.c **** static const BYTE Ct857[] = TBL_CT857;
 581:DRIVER/FatFs/source/ff.c **** static const BYTE Ct860[] = TBL_CT860;
 582:DRIVER/FatFs/source/ff.c **** static const BYTE Ct861[] = TBL_CT861;
 583:DRIVER/FatFs/source/ff.c **** static const BYTE Ct862[] = TBL_CT862;
 584:DRIVER/FatFs/source/ff.c **** static const BYTE Ct863[] = TBL_CT863;
 585:DRIVER/FatFs/source/ff.c **** static const BYTE Ct864[] = TBL_CT864;
 586:DRIVER/FatFs/source/ff.c **** static const BYTE Ct865[] = TBL_CT865;
 587:DRIVER/FatFs/source/ff.c **** static const BYTE Ct866[] = TBL_CT866;
 588:DRIVER/FatFs/source/ff.c **** static const BYTE Ct869[] = TBL_CT869;
 589:DRIVER/FatFs/source/ff.c **** static const BYTE Dc932[] = TBL_DC932;
 590:DRIVER/FatFs/source/ff.c **** static const BYTE Dc936[] = TBL_DC936;
 591:DRIVER/FatFs/source/ff.c **** static const BYTE Dc949[] = TBL_DC949;
 592:DRIVER/FatFs/source/ff.c **** static const BYTE Dc950[] = TBL_DC950;
 593:DRIVER/FatFs/source/ff.c **** 
 594:DRIVER/FatFs/source/ff.c **** #elif FF_CODE_PAGE < 900	/* Static code page configuration (SBCS) */
 595:DRIVER/FatFs/source/ff.c **** #define CODEPAGE FF_CODE_PAGE
 596:DRIVER/FatFs/source/ff.c **** static const BYTE ExCvt[] = MKCVTBL(TBL_CT, FF_CODE_PAGE);
 597:DRIVER/FatFs/source/ff.c **** 
 598:DRIVER/FatFs/source/ff.c **** #else					/* Static code page configuration (DBCS) */
 599:DRIVER/FatFs/source/ff.c **** #define CODEPAGE FF_CODE_PAGE
 600:DRIVER/FatFs/source/ff.c **** static const BYTE DbcTbl[] = MKCVTBL(TBL_DC, FF_CODE_PAGE);
 601:DRIVER/FatFs/source/ff.c **** 
 602:DRIVER/FatFs/source/ff.c **** #endif
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 12


 603:DRIVER/FatFs/source/ff.c **** 
 604:DRIVER/FatFs/source/ff.c **** 
 605:DRIVER/FatFs/source/ff.c **** 
 606:DRIVER/FatFs/source/ff.c **** 
 607:DRIVER/FatFs/source/ff.c **** /*--------------------------------------------------------------------------
 608:DRIVER/FatFs/source/ff.c **** 
 609:DRIVER/FatFs/source/ff.c ****    Module Private Functions
 610:DRIVER/FatFs/source/ff.c **** 
 611:DRIVER/FatFs/source/ff.c **** ---------------------------------------------------------------------------*/
 612:DRIVER/FatFs/source/ff.c **** 
 613:DRIVER/FatFs/source/ff.c **** 
 614:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
 615:DRIVER/FatFs/source/ff.c **** /* Load/Store multi-byte word in the FAT structure                       */
 616:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
 617:DRIVER/FatFs/source/ff.c **** 
 618:DRIVER/FatFs/source/ff.c **** static WORD ld_word (const BYTE* ptr)	/*	 Load a 2-byte little-endian word */
 619:DRIVER/FatFs/source/ff.c **** {
  27              		.loc 1 619 1 view -0
  28              		.cfi_startproc
  29              		@ args = 0, pretend = 0, frame = 0
  30              		@ frame_needed = 0, uses_anonymous_args = 0
  31              		@ link register save eliminated.
 620:DRIVER/FatFs/source/ff.c **** 	WORD rv;
  32              		.loc 1 620 2 view .LVU1
 621:DRIVER/FatFs/source/ff.c **** 
 622:DRIVER/FatFs/source/ff.c **** 	rv = ptr[1];
  33              		.loc 1 622 2 view .LVU2
  34              		.loc 1 622 10 is_stmt 0 view .LVU3
  35 0000 4278     		ldrb	r2, [r0, #1]	@ zero_extendqisi2
  36              	.LVL1:
 623:DRIVER/FatFs/source/ff.c **** 	rv = rv << 8 | ptr[0];
  37              		.loc 1 623 2 is_stmt 1 view .LVU4
  38              		.loc 1 623 20 is_stmt 0 view .LVU5
  39 0002 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
  40              	.LVL2:
 624:DRIVER/FatFs/source/ff.c **** 	return rv;
  41              		.loc 1 624 2 is_stmt 1 view .LVU6
 625:DRIVER/FatFs/source/ff.c **** }
  42              		.loc 1 625 1 is_stmt 0 view .LVU7
  43 0004 40EA0220 		orr	r0, r0, r2, lsl #8
  44              	.LVL3:
  45              		.loc 1 625 1 view .LVU8
  46 0008 7047     		bx	lr
  47              		.cfi_endproc
  48              	.LFE0:
  50              		.section	.text.ld_dword,"ax",%progbits
  51              		.align	1
  52              		.syntax unified
  53              		.thumb
  54              		.thumb_func
  56              	ld_dword:
  57              	.LVL4:
  58              	.LFB1:
 626:DRIVER/FatFs/source/ff.c **** 
 627:DRIVER/FatFs/source/ff.c **** static DWORD ld_dword (const BYTE* ptr)	/* Load a 4-byte little-endian word */
 628:DRIVER/FatFs/source/ff.c **** {
  59              		.loc 1 628 1 is_stmt 1 view -0
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 13


  60              		.cfi_startproc
  61              		@ args = 0, pretend = 0, frame = 0
  62              		@ frame_needed = 0, uses_anonymous_args = 0
  63              		@ link register save eliminated.
 629:DRIVER/FatFs/source/ff.c **** 	DWORD rv;
  64              		.loc 1 629 2 view .LVU10
 630:DRIVER/FatFs/source/ff.c **** 
 631:DRIVER/FatFs/source/ff.c **** 	rv = ptr[3];
  65              		.loc 1 631 2 view .LVU11
  66              		.loc 1 631 10 is_stmt 0 view .LVU12
  67 0000 C378     		ldrb	r3, [r0, #3]	@ zero_extendqisi2
  68              	.LVL5:
 632:DRIVER/FatFs/source/ff.c **** 	rv = rv << 8 | ptr[2];
  69              		.loc 1 632 2 is_stmt 1 view .LVU13
  70              		.loc 1 632 20 is_stmt 0 view .LVU14
  71 0002 8278     		ldrb	r2, [r0, #2]	@ zero_extendqisi2
  72              		.loc 1 632 5 view .LVU15
  73 0004 42EA0322 		orr	r2, r2, r3, lsl #8
  74              	.LVL6:
 633:DRIVER/FatFs/source/ff.c **** 	rv = rv << 8 | ptr[1];
  75              		.loc 1 633 2 is_stmt 1 view .LVU16
  76              		.loc 1 633 20 is_stmt 0 view .LVU17
  77 0008 4378     		ldrb	r3, [r0, #1]	@ zero_extendqisi2
  78              		.loc 1 633 5 view .LVU18
  79 000a 43EA0223 		orr	r3, r3, r2, lsl #8
  80              	.LVL7:
 634:DRIVER/FatFs/source/ff.c **** 	rv = rv << 8 | ptr[0];
  81              		.loc 1 634 2 is_stmt 1 view .LVU19
  82              		.loc 1 634 20 is_stmt 0 view .LVU20
  83 000e 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
  84              	.LVL8:
 635:DRIVER/FatFs/source/ff.c **** 	return rv;
  85              		.loc 1 635 2 is_stmt 1 view .LVU21
 636:DRIVER/FatFs/source/ff.c **** }
  86              		.loc 1 636 1 is_stmt 0 view .LVU22
  87 0010 40EA0320 		orr	r0, r0, r3, lsl #8
  88              	.LVL9:
  89              		.loc 1 636 1 view .LVU23
  90 0014 7047     		bx	lr
  91              		.cfi_endproc
  92              	.LFE1:
  94              		.section	.text.st_word,"ax",%progbits
  95              		.align	1
  96              		.syntax unified
  97              		.thumb
  98              		.thumb_func
 100              	st_word:
 101              	.LVL10:
 102              	.LFB2:
 637:DRIVER/FatFs/source/ff.c **** 
 638:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
 639:DRIVER/FatFs/source/ff.c **** static QWORD ld_qword (const BYTE* ptr)	/* Load an 8-byte little-endian word */
 640:DRIVER/FatFs/source/ff.c **** {
 641:DRIVER/FatFs/source/ff.c **** 	QWORD rv;
 642:DRIVER/FatFs/source/ff.c **** 
 643:DRIVER/FatFs/source/ff.c **** 	rv = ptr[7];
 644:DRIVER/FatFs/source/ff.c **** 	rv = rv << 8 | ptr[6];
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 14


 645:DRIVER/FatFs/source/ff.c **** 	rv = rv << 8 | ptr[5];
 646:DRIVER/FatFs/source/ff.c **** 	rv = rv << 8 | ptr[4];
 647:DRIVER/FatFs/source/ff.c **** 	rv = rv << 8 | ptr[3];
 648:DRIVER/FatFs/source/ff.c **** 	rv = rv << 8 | ptr[2];
 649:DRIVER/FatFs/source/ff.c **** 	rv = rv << 8 | ptr[1];
 650:DRIVER/FatFs/source/ff.c **** 	rv = rv << 8 | ptr[0];
 651:DRIVER/FatFs/source/ff.c **** 	return rv;
 652:DRIVER/FatFs/source/ff.c **** }
 653:DRIVER/FatFs/source/ff.c **** #endif
 654:DRIVER/FatFs/source/ff.c **** 
 655:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY
 656:DRIVER/FatFs/source/ff.c **** static void st_word (BYTE* ptr, WORD val)	/* Store a 2-byte word in little-endian */
 657:DRIVER/FatFs/source/ff.c **** {
 103              		.loc 1 657 1 is_stmt 1 view -0
 104              		.cfi_startproc
 105              		@ args = 0, pretend = 0, frame = 0
 106              		@ frame_needed = 0, uses_anonymous_args = 0
 107              		@ link register save eliminated.
 658:DRIVER/FatFs/source/ff.c **** 	*ptr++ = (BYTE)val; val >>= 8;
 108              		.loc 1 658 2 view .LVU25
 109              		.loc 1 658 9 is_stmt 0 view .LVU26
 110 0000 0170     		strb	r1, [r0]
 111              		.loc 1 658 22 is_stmt 1 view .LVU27
 112              	.LVL11:
 659:DRIVER/FatFs/source/ff.c **** 	*ptr++ = (BYTE)val;
 113              		.loc 1 659 2 view .LVU28
 114              		.loc 1 659 11 is_stmt 0 view .LVU29
 115 0002 090A     		lsrs	r1, r1, #8
 116              	.LVL12:
 117              		.loc 1 659 9 view .LVU30
 118 0004 4170     		strb	r1, [r0, #1]
 660:DRIVER/FatFs/source/ff.c **** }
 119              		.loc 1 660 1 view .LVU31
 120 0006 7047     		bx	lr
 121              		.cfi_endproc
 122              	.LFE2:
 124              		.section	.text.st_dword,"ax",%progbits
 125              		.align	1
 126              		.syntax unified
 127              		.thumb
 128              		.thumb_func
 130              	st_dword:
 131              	.LVL13:
 132              	.LFB3:
 661:DRIVER/FatFs/source/ff.c **** 
 662:DRIVER/FatFs/source/ff.c **** static void st_dword (BYTE* ptr, DWORD val)	/* Store a 4-byte word in little-endian */
 663:DRIVER/FatFs/source/ff.c **** {
 133              		.loc 1 663 1 is_stmt 1 view -0
 134              		.cfi_startproc
 135              		@ args = 0, pretend = 0, frame = 0
 136              		@ frame_needed = 0, uses_anonymous_args = 0
 137              		@ link register save eliminated.
 664:DRIVER/FatFs/source/ff.c **** 	*ptr++ = (BYTE)val; val >>= 8;
 138              		.loc 1 664 2 view .LVU33
 139              		.loc 1 664 9 is_stmt 0 view .LVU34
 140 0000 0170     		strb	r1, [r0]
 141              		.loc 1 664 22 is_stmt 1 view .LVU35
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 15


 142              	.LVL14:
 665:DRIVER/FatFs/source/ff.c **** 	*ptr++ = (BYTE)val; val >>= 8;
 143              		.loc 1 665 2 view .LVU36
 144              		.loc 1 665 11 is_stmt 0 view .LVU37
 145 0002 C1F30723 		ubfx	r3, r1, #8, #8
 146              		.loc 1 665 9 view .LVU38
 147 0006 4370     		strb	r3, [r0, #1]
 148              		.loc 1 665 22 is_stmt 1 view .LVU39
 149              	.LVL15:
 666:DRIVER/FatFs/source/ff.c **** 	*ptr++ = (BYTE)val; val >>= 8;
 150              		.loc 1 666 2 view .LVU40
 151              		.loc 1 666 11 is_stmt 0 view .LVU41
 152 0008 C1F30743 		ubfx	r3, r1, #16, #8
 153              		.loc 1 666 9 view .LVU42
 154 000c 8370     		strb	r3, [r0, #2]
 155              		.loc 1 666 22 is_stmt 1 view .LVU43
 156              	.LVL16:
 667:DRIVER/FatFs/source/ff.c **** 	*ptr++ = (BYTE)val;
 157              		.loc 1 667 2 view .LVU44
 158              		.loc 1 667 11 is_stmt 0 view .LVU45
 159 000e 090E     		lsrs	r1, r1, #24
 160              	.LVL17:
 161              		.loc 1 667 9 view .LVU46
 162 0010 C170     		strb	r1, [r0, #3]
 668:DRIVER/FatFs/source/ff.c **** }
 163              		.loc 1 668 1 view .LVU47
 164 0012 7047     		bx	lr
 165              		.cfi_endproc
 166              	.LFE3:
 168              		.section	.text.dbc_1st,"ax",%progbits
 169              		.align	1
 170              		.syntax unified
 171              		.thumb
 172              		.thumb_func
 174              	dbc_1st:
 175              	.LVL18:
 176              	.LFB4:
 669:DRIVER/FatFs/source/ff.c **** 
 670:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
 671:DRIVER/FatFs/source/ff.c **** static void st_qword (BYTE* ptr, QWORD val)	/* Store an 8-byte word in little-endian */
 672:DRIVER/FatFs/source/ff.c **** {
 673:DRIVER/FatFs/source/ff.c **** 	*ptr++ = (BYTE)val; val >>= 8;
 674:DRIVER/FatFs/source/ff.c **** 	*ptr++ = (BYTE)val; val >>= 8;
 675:DRIVER/FatFs/source/ff.c **** 	*ptr++ = (BYTE)val; val >>= 8;
 676:DRIVER/FatFs/source/ff.c **** 	*ptr++ = (BYTE)val; val >>= 8;
 677:DRIVER/FatFs/source/ff.c **** 	*ptr++ = (BYTE)val; val >>= 8;
 678:DRIVER/FatFs/source/ff.c **** 	*ptr++ = (BYTE)val; val >>= 8;
 679:DRIVER/FatFs/source/ff.c **** 	*ptr++ = (BYTE)val; val >>= 8;
 680:DRIVER/FatFs/source/ff.c **** 	*ptr++ = (BYTE)val;
 681:DRIVER/FatFs/source/ff.c **** }
 682:DRIVER/FatFs/source/ff.c **** #endif
 683:DRIVER/FatFs/source/ff.c **** #endif	/* !FF_FS_READONLY */
 684:DRIVER/FatFs/source/ff.c **** 
 685:DRIVER/FatFs/source/ff.c **** 
 686:DRIVER/FatFs/source/ff.c **** 
 687:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
 688:DRIVER/FatFs/source/ff.c **** /* String functions                                                      */
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 16


 689:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
 690:DRIVER/FatFs/source/ff.c **** 
 691:DRIVER/FatFs/source/ff.c **** /* Test if the byte is DBC 1st byte */
 692:DRIVER/FatFs/source/ff.c **** static int dbc_1st (BYTE c)
 693:DRIVER/FatFs/source/ff.c **** {
 177              		.loc 1 693 1 is_stmt 1 view -0
 178              		.cfi_startproc
 179              		@ args = 0, pretend = 0, frame = 0
 180              		@ frame_needed = 0, uses_anonymous_args = 0
 181              		@ link register save eliminated.
 694:DRIVER/FatFs/source/ff.c **** #if FF_CODE_PAGE == 0		/* Variable code page */
 695:DRIVER/FatFs/source/ff.c **** 	if (DbcTbl && c >= DbcTbl[0]) {
 696:DRIVER/FatFs/source/ff.c **** 		if (c <= DbcTbl[1]) return 1;					/* 1st byte range 1 */
 697:DRIVER/FatFs/source/ff.c **** 		if (c >= DbcTbl[2] && c <= DbcTbl[3]) return 1;	/* 1st byte range 2 */
 698:DRIVER/FatFs/source/ff.c **** 	}
 699:DRIVER/FatFs/source/ff.c **** #elif FF_CODE_PAGE >= 900	/* DBCS fixed code page */
 700:DRIVER/FatFs/source/ff.c **** 	if (c >= DbcTbl[0]) {
 701:DRIVER/FatFs/source/ff.c **** 		if (c <= DbcTbl[1]) return 1;
 702:DRIVER/FatFs/source/ff.c **** 		if (c >= DbcTbl[2] && c <= DbcTbl[3]) return 1;
 703:DRIVER/FatFs/source/ff.c **** 	}
 704:DRIVER/FatFs/source/ff.c **** #else						/* SBCS fixed code page */
 705:DRIVER/FatFs/source/ff.c **** 	if (c != 0) return 0;	/* Always false */
 182              		.loc 1 705 2 view .LVU49
 706:DRIVER/FatFs/source/ff.c **** #endif
 707:DRIVER/FatFs/source/ff.c **** 	return 0;
 708:DRIVER/FatFs/source/ff.c **** }
 183              		.loc 1 708 1 is_stmt 0 view .LVU50
 184 0000 0020     		movs	r0, #0
 185              	.LVL19:
 186              		.loc 1 708 1 view .LVU51
 187 0002 7047     		bx	lr
 188              		.cfi_endproc
 189              	.LFE4:
 191              		.section	.text.dbc_2nd,"ax",%progbits
 192              		.align	1
 193              		.syntax unified
 194              		.thumb
 195              		.thumb_func
 197              	dbc_2nd:
 198              	.LVL20:
 199              	.LFB5:
 709:DRIVER/FatFs/source/ff.c **** 
 710:DRIVER/FatFs/source/ff.c **** 
 711:DRIVER/FatFs/source/ff.c **** /* Test if the byte is DBC 2nd byte */
 712:DRIVER/FatFs/source/ff.c **** static int dbc_2nd (BYTE c)
 713:DRIVER/FatFs/source/ff.c **** {
 200              		.loc 1 713 1 is_stmt 1 view -0
 201              		.cfi_startproc
 202              		@ args = 0, pretend = 0, frame = 0
 203              		@ frame_needed = 0, uses_anonymous_args = 0
 204              		@ link register save eliminated.
 714:DRIVER/FatFs/source/ff.c **** #if FF_CODE_PAGE == 0		/* Variable code page */
 715:DRIVER/FatFs/source/ff.c **** 	if (DbcTbl && c >= DbcTbl[4]) {
 716:DRIVER/FatFs/source/ff.c **** 		if (c <= DbcTbl[5]) return 1;					/* 2nd byte range 1 */
 717:DRIVER/FatFs/source/ff.c **** 		if (c >= DbcTbl[6] && c <= DbcTbl[7]) return 1;	/* 2nd byte range 2 */
 718:DRIVER/FatFs/source/ff.c **** 		if (c >= DbcTbl[8] && c <= DbcTbl[9]) return 1;	/* 2nd byte range 3 */
 719:DRIVER/FatFs/source/ff.c **** 	}
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 17


 720:DRIVER/FatFs/source/ff.c **** #elif FF_CODE_PAGE >= 900	/* DBCS fixed code page */
 721:DRIVER/FatFs/source/ff.c **** 	if (c >= DbcTbl[4]) {
 722:DRIVER/FatFs/source/ff.c **** 		if (c <= DbcTbl[5]) return 1;
 723:DRIVER/FatFs/source/ff.c **** 		if (c >= DbcTbl[6] && c <= DbcTbl[7]) return 1;
 724:DRIVER/FatFs/source/ff.c **** 		if (c >= DbcTbl[8] && c <= DbcTbl[9]) return 1;
 725:DRIVER/FatFs/source/ff.c **** 	}
 726:DRIVER/FatFs/source/ff.c **** #else						/* SBCS fixed code page */
 727:DRIVER/FatFs/source/ff.c **** 	if (c != 0) return 0;	/* Always false */
 205              		.loc 1 727 2 view .LVU53
 728:DRIVER/FatFs/source/ff.c **** #endif
 729:DRIVER/FatFs/source/ff.c **** 	return 0;
 730:DRIVER/FatFs/source/ff.c **** }
 206              		.loc 1 730 1 is_stmt 0 view .LVU54
 207 0000 0020     		movs	r0, #0
 208              	.LVL21:
 209              		.loc 1 730 1 view .LVU55
 210 0002 7047     		bx	lr
 211              		.cfi_endproc
 212              	.LFE5:
 214              		.section	.text.tchar2uni,"ax",%progbits
 215              		.align	1
 216              		.syntax unified
 217              		.thumb
 218              		.thumb_func
 220              	tchar2uni:
 221              	.LVL22:
 222              	.LFB6:
 731:DRIVER/FatFs/source/ff.c **** 
 732:DRIVER/FatFs/source/ff.c **** 
 733:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN
 734:DRIVER/FatFs/source/ff.c **** 
 735:DRIVER/FatFs/source/ff.c **** /* Get a Unicode code point from the TCHAR string in defined API encodeing */
 736:DRIVER/FatFs/source/ff.c **** static DWORD tchar2uni (	/* Returns a character in UTF-16 encoding (>=0x10000 on surrogate pair, 0x
 737:DRIVER/FatFs/source/ff.c **** 	const TCHAR** str		/* Pointer to pointer to TCHAR string in configured encoding */
 738:DRIVER/FatFs/source/ff.c **** )
 739:DRIVER/FatFs/source/ff.c **** {
 223              		.loc 1 739 1 is_stmt 1 view -0
 224              		.cfi_startproc
 225              		@ args = 0, pretend = 0, frame = 0
 226              		@ frame_needed = 0, uses_anonymous_args = 0
 227              		.loc 1 739 1 is_stmt 0 view .LVU57
 228 0000 00B5     		push	{lr}
 229              	.LCFI0:
 230              		.cfi_def_cfa_offset 4
 231              		.cfi_offset 14, -4
 232 0002 8646     		mov	lr, r0
 740:DRIVER/FatFs/source/ff.c **** 	DWORD uc;
 233              		.loc 1 740 2 is_stmt 1 view .LVU58
 741:DRIVER/FatFs/source/ff.c **** 	const TCHAR *p = *str;
 234              		.loc 1 741 2 view .LVU59
 235              	.LVL23:
 742:DRIVER/FatFs/source/ff.c **** 
 743:DRIVER/FatFs/source/ff.c **** #if FF_LFN_UNICODE == 1		/* UTF-16 input */
 744:DRIVER/FatFs/source/ff.c **** 	WCHAR wc;
 745:DRIVER/FatFs/source/ff.c **** 
 746:DRIVER/FatFs/source/ff.c **** 	uc = *p++;	/* Get a unit */
 747:DRIVER/FatFs/source/ff.c **** 	if (IsSurrogate(uc)) {	/* Surrogate? */
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 18


 748:DRIVER/FatFs/source/ff.c **** 		wc = *p++;		/* Get low surrogate */
 749:DRIVER/FatFs/source/ff.c **** 		if (!IsSurrogateH(uc) || !IsSurrogateL(wc)) return 0xFFFFFFFF;	/* Wrong surrogate? */
 750:DRIVER/FatFs/source/ff.c **** 		uc = uc << 16 | wc;
 751:DRIVER/FatFs/source/ff.c **** 	}
 752:DRIVER/FatFs/source/ff.c **** 
 753:DRIVER/FatFs/source/ff.c **** #elif FF_LFN_UNICODE == 2	/* UTF-8 input */
 754:DRIVER/FatFs/source/ff.c **** 	BYTE b;
 236              		.loc 1 754 2 view .LVU60
 755:DRIVER/FatFs/source/ff.c **** 	int nf;
 237              		.loc 1 755 2 view .LVU61
 756:DRIVER/FatFs/source/ff.c **** 
 757:DRIVER/FatFs/source/ff.c **** 	uc = (BYTE)*p++;	/* Get an encoding unit */
 238              		.loc 1 757 2 view .LVU62
 239              		.loc 1 757 15 is_stmt 0 view .LVU63
 240 0004 0268     		ldr	r2, [r0]
 241              	.LVL24:
 242              		.loc 1 757 13 view .LVU64
 243 0006 12F8013B 		ldrb	r3, [r2], #1	@ zero_extendqisi2
 244              	.LVL25:
 245              		.loc 1 757 5 view .LVU65
 246 000a 1846     		mov	r0, r3
 247              	.LVL26:
 758:DRIVER/FatFs/source/ff.c **** 	if (uc & 0x80) {	/* Multiple byte code? */
 248              		.loc 1 758 2 is_stmt 1 view .LVU66
 249              		.loc 1 758 5 is_stmt 0 view .LVU67
 250 000c 13F0800F 		tst	r3, #128
 251 0010 03D1     		bne	.L20
 252              	.LVL27:
 253              	.L8:
 759:DRIVER/FatFs/source/ff.c **** 		if        ((uc & 0xE0) == 0xC0) {	/* 2-byte sequence? */
 760:DRIVER/FatFs/source/ff.c **** 			uc &= 0x1F; nf = 1;
 761:DRIVER/FatFs/source/ff.c **** 		} else if ((uc & 0xF0) == 0xE0) {	/* 3-byte sequence? */
 762:DRIVER/FatFs/source/ff.c **** 			uc &= 0x0F; nf = 2;
 763:DRIVER/FatFs/source/ff.c **** 		} else if ((uc & 0xF8) == 0xF0) {	/* 4-byte sequence? */
 764:DRIVER/FatFs/source/ff.c **** 			uc &= 0x07; nf = 3;
 765:DRIVER/FatFs/source/ff.c **** 		} else {							/* Wrong sequence */
 766:DRIVER/FatFs/source/ff.c **** 			return 0xFFFFFFFF;
 767:DRIVER/FatFs/source/ff.c **** 		}
 768:DRIVER/FatFs/source/ff.c **** 		do {	/* Get trailing bytes */
 769:DRIVER/FatFs/source/ff.c **** 			b = (BYTE)*p++;
 770:DRIVER/FatFs/source/ff.c **** 			if ((b & 0xC0) != 0x80) return 0xFFFFFFFF;	/* Wrong sequence? */
 771:DRIVER/FatFs/source/ff.c **** 			uc = uc << 6 | (b & 0x3F);
 772:DRIVER/FatFs/source/ff.c **** 		} while (--nf != 0);
 773:DRIVER/FatFs/source/ff.c **** 		if (uc < 0x80 || IsSurrogate(uc) || uc >= 0x110000) return 0xFFFFFFFF;	/* Wrong code? */
 774:DRIVER/FatFs/source/ff.c **** 		if (uc >= 0x010000) uc = 0xD800DC00 | ((uc - 0x10000) << 6 & 0x3FF0000) | (uc & 0x3FF);	/* Make a
 775:DRIVER/FatFs/source/ff.c **** 	}
 776:DRIVER/FatFs/source/ff.c **** 
 777:DRIVER/FatFs/source/ff.c **** #elif FF_LFN_UNICODE == 3	/* UTF-32 input */
 778:DRIVER/FatFs/source/ff.c **** 	uc = (TCHAR)*p++;	/* Get a unit */
 779:DRIVER/FatFs/source/ff.c **** 	if (uc >= 0x110000 || IsSurrogate(uc)) return 0xFFFFFFFF;	/* Wrong code? */
 780:DRIVER/FatFs/source/ff.c **** 	if (uc >= 0x010000) uc = 0xD800DC00 | ((uc - 0x10000) << 6 & 0x3FF0000) | (uc & 0x3FF);	/* Make a 
 781:DRIVER/FatFs/source/ff.c **** 
 782:DRIVER/FatFs/source/ff.c **** #else		/* ANSI/OEM input */
 783:DRIVER/FatFs/source/ff.c **** 	BYTE b;
 784:DRIVER/FatFs/source/ff.c **** 	WCHAR wc;
 785:DRIVER/FatFs/source/ff.c **** 
 786:DRIVER/FatFs/source/ff.c **** 	wc = (BYTE)*p++;			/* Get a byte */
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 19


 787:DRIVER/FatFs/source/ff.c **** 	if (dbc_1st((BYTE)wc)) {	/* Is it a DBC 1st byte? */
 788:DRIVER/FatFs/source/ff.c **** 		b = (BYTE)*p++;			/* Get 2nd byte */
 789:DRIVER/FatFs/source/ff.c **** 		if (!dbc_2nd(b)) return 0xFFFFFFFF;	/* Invalid code? */
 790:DRIVER/FatFs/source/ff.c **** 		wc = (wc << 8) + b;		/* Make a DBC */
 791:DRIVER/FatFs/source/ff.c **** 	}
 792:DRIVER/FatFs/source/ff.c **** 	if (wc != 0) {
 793:DRIVER/FatFs/source/ff.c **** 		wc = ff_oem2uni(wc, CODEPAGE);	/* ANSI/OEM ==> Unicode */
 794:DRIVER/FatFs/source/ff.c **** 		if (wc == 0) return 0xFFFFFFFF;	/* Invalid code? */
 795:DRIVER/FatFs/source/ff.c **** 	}
 796:DRIVER/FatFs/source/ff.c **** 	uc = wc;
 797:DRIVER/FatFs/source/ff.c **** 
 798:DRIVER/FatFs/source/ff.c **** #endif
 799:DRIVER/FatFs/source/ff.c **** 	*str = p;	/* Next read pointer */
 254              		.loc 1 799 2 is_stmt 1 view .LVU68
 255              		.loc 1 799 7 is_stmt 0 view .LVU69
 256 0012 CEF80020 		str	r2, [lr]
 800:DRIVER/FatFs/source/ff.c **** 	return uc;
 257              		.loc 1 800 2 is_stmt 1 view .LVU70
 258              	.LVL28:
 259              	.L7:
 801:DRIVER/FatFs/source/ff.c **** }
 260              		.loc 1 801 1 is_stmt 0 view .LVU71
 261 0016 5DF804FB 		ldr	pc, [sp], #4
 262              	.LVL29:
 263              	.L20:
 759:DRIVER/FatFs/source/ff.c **** 		if        ((uc & 0xE0) == 0xC0) {	/* 2-byte sequence? */
 264              		.loc 1 759 3 is_stmt 1 view .LVU72
 759:DRIVER/FatFs/source/ff.c **** 		if        ((uc & 0xE0) == 0xC0) {	/* 2-byte sequence? */
 265              		.loc 1 759 13 is_stmt 0 view .LVU73
 266 001a 03F0E001 		and	r1, r3, #224
 267 001e C029     		cmp	r1, #192
 268 0020 0BD0     		beq	.L21
 761:DRIVER/FatFs/source/ff.c **** 			uc &= 0x0F; nf = 2;
 269              		.loc 1 761 10 is_stmt 1 view .LVU74
 761:DRIVER/FatFs/source/ff.c **** 			uc &= 0x0F; nf = 2;
 270              		.loc 1 761 13 is_stmt 0 view .LVU75
 271 0022 03F0F001 		and	r1, r3, #240
 272 0026 E029     		cmp	r1, #224
 273 0028 31D0     		beq	.L22
 763:DRIVER/FatFs/source/ff.c **** 			uc &= 0x07; nf = 3;
 274              		.loc 1 763 10 is_stmt 1 view .LVU76
 763:DRIVER/FatFs/source/ff.c **** 			uc &= 0x07; nf = 3;
 275              		.loc 1 763 13 is_stmt 0 view .LVU77
 276 002a 03F0F801 		and	r1, r3, #248
 277 002e F029     		cmp	r1, #240
 278 0030 31D1     		bne	.L14
 764:DRIVER/FatFs/source/ff.c **** 		} else {							/* Wrong sequence */
 279              		.loc 1 764 4 is_stmt 1 view .LVU78
 764:DRIVER/FatFs/source/ff.c **** 		} else {							/* Wrong sequence */
 280              		.loc 1 764 7 is_stmt 0 view .LVU79
 281 0032 03F00700 		and	r0, r3, #7
 282              	.LVL30:
 764:DRIVER/FatFs/source/ff.c **** 		} else {							/* Wrong sequence */
 283              		.loc 1 764 16 is_stmt 1 view .LVU80
 764:DRIVER/FatFs/source/ff.c **** 		} else {							/* Wrong sequence */
 284              		.loc 1 764 19 is_stmt 0 view .LVU81
 285 0036 0321     		movs	r1, #3
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 20


 286 0038 02E0     		b	.L13
 287              	.LVL31:
 288              	.L21:
 760:DRIVER/FatFs/source/ff.c **** 		} else if ((uc & 0xF0) == 0xE0) {	/* 3-byte sequence? */
 289              		.loc 1 760 4 is_stmt 1 view .LVU82
 760:DRIVER/FatFs/source/ff.c **** 		} else if ((uc & 0xF0) == 0xE0) {	/* 3-byte sequence? */
 290              		.loc 1 760 7 is_stmt 0 view .LVU83
 291 003a 03F01F00 		and	r0, r3, #31
 292              	.LVL32:
 760:DRIVER/FatFs/source/ff.c **** 		} else if ((uc & 0xF0) == 0xE0) {	/* 3-byte sequence? */
 293              		.loc 1 760 16 is_stmt 1 view .LVU84
 760:DRIVER/FatFs/source/ff.c **** 		} else if ((uc & 0xF0) == 0xE0) {	/* 3-byte sequence? */
 294              		.loc 1 760 19 is_stmt 0 view .LVU85
 295 003e 0121     		movs	r1, #1
 296              	.LVL33:
 297              	.L13:
 768:DRIVER/FatFs/source/ff.c **** 			b = (BYTE)*p++;
 298              		.loc 1 768 3 is_stmt 1 view .LVU86
 769:DRIVER/FatFs/source/ff.c **** 			if ((b & 0xC0) != 0x80) return 0xFFFFFFFF;	/* Wrong sequence? */
 299              		.loc 1 769 4 view .LVU87
 769:DRIVER/FatFs/source/ff.c **** 			if ((b & 0xC0) != 0x80) return 0xFFFFFFFF;	/* Wrong sequence? */
 300              		.loc 1 769 6 is_stmt 0 view .LVU88
 301 0040 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 302 0042 0132     		adds	r2, r2, #1
 303              	.LVL34:
 770:DRIVER/FatFs/source/ff.c **** 			uc = uc << 6 | (b & 0x3F);
 304              		.loc 1 770 4 is_stmt 1 view .LVU89
 770:DRIVER/FatFs/source/ff.c **** 			uc = uc << 6 | (b & 0x3F);
 305              		.loc 1 770 7 is_stmt 0 view .LVU90
 306 0044 03F0C00C 		and	ip, r3, #192
 307 0048 BCF1800F 		cmp	ip, #128
 308 004c 26D1     		bne	.L15
 771:DRIVER/FatFs/source/ff.c **** 		} while (--nf != 0);
 309              		.loc 1 771 4 is_stmt 1 view .LVU91
 771:DRIVER/FatFs/source/ff.c **** 		} while (--nf != 0);
 310              		.loc 1 771 22 is_stmt 0 view .LVU92
 311 004e 03F03F03 		and	r3, r3, #63
 312              	.LVL35:
 771:DRIVER/FatFs/source/ff.c **** 		} while (--nf != 0);
 313              		.loc 1 771 7 view .LVU93
 314 0052 43EA8010 		orr	r0, r3, r0, lsl #6
 315              	.LVL36:
 772:DRIVER/FatFs/source/ff.c **** 		if (uc < 0x80 || IsSurrogate(uc) || uc >= 0x110000) return 0xFFFFFFFF;	/* Wrong code? */
 316              		.loc 1 772 17 is_stmt 1 view .LVU94
 772:DRIVER/FatFs/source/ff.c **** 		if (uc < 0x80 || IsSurrogate(uc) || uc >= 0x110000) return 0xFFFFFFFF;	/* Wrong code? */
 317              		.loc 1 772 17 is_stmt 0 view .LVU95
 318 0056 0139     		subs	r1, r1, #1
 319              	.LVL37:
 772:DRIVER/FatFs/source/ff.c **** 		if (uc < 0x80 || IsSurrogate(uc) || uc >= 0x110000) return 0xFFFFFFFF;	/* Wrong code? */
 320              		.loc 1 772 17 view .LVU96
 321 0058 F2D1     		bne	.L13
 773:DRIVER/FatFs/source/ff.c **** 		if (uc >= 0x010000) uc = 0xD800DC00 | ((uc - 0x10000) << 6 & 0x3FF0000) | (uc & 0x3FF);	/* Make a
 322              		.loc 1 773 3 is_stmt 1 view .LVU97
 773:DRIVER/FatFs/source/ff.c **** 		if (uc >= 0x010000) uc = 0xD800DC00 | ((uc - 0x10000) << 6 & 0x3FF0000) | (uc & 0x3FF);	/* Make a
 323              		.loc 1 773 6 is_stmt 0 view .LVU98
 324 005a 7F28     		cmp	r0, #127
 325 005c 21D9     		bls	.L16
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 21


 773:DRIVER/FatFs/source/ff.c **** 		if (uc >= 0x010000) uc = 0xD800DC00 | ((uc - 0x10000) << 6 & 0x3FF0000) | (uc & 0x3FF);	/* Make a
 326              		.loc 1 773 20 discriminator 2 view .LVU99
 327 005e A0F55843 		sub	r3, r0, #55296
 773:DRIVER/FatFs/source/ff.c **** 		if (uc >= 0x010000) uc = 0xD800DC00 | ((uc - 0x10000) << 6 & 0x3FF0000) | (uc & 0x3FF);	/* Make a
 328              		.loc 1 773 17 discriminator 2 view .LVU100
 329 0062 B3F5006F 		cmp	r3, #2048
 330 0066 1FD3     		bcc	.L17
 773:DRIVER/FatFs/source/ff.c **** 		if (uc >= 0x010000) uc = 0xD800DC00 | ((uc - 0x10000) << 6 & 0x3FF0000) | (uc & 0x3FF);	/* Make a
 331              		.loc 1 773 36 discriminator 4 view .LVU101
 332 0068 B0F5881F 		cmp	r0, #1114112
 333 006c 1FD2     		bcs	.L18
 774:DRIVER/FatFs/source/ff.c **** 	}
 334              		.loc 1 774 3 is_stmt 1 view .LVU102
 774:DRIVER/FatFs/source/ff.c **** 	}
 335              		.loc 1 774 6 is_stmt 0 view .LVU103
 336 006e B0F5803F 		cmp	r0, #65536
 337 0072 CED3     		bcc	.L8
 774:DRIVER/FatFs/source/ff.c **** 	}
 338              		.loc 1 774 23 is_stmt 1 discriminator 1 view .LVU104
 774:DRIVER/FatFs/source/ff.c **** 	}
 339              		.loc 1 774 46 is_stmt 0 discriminator 1 view .LVU105
 340 0074 A0F58033 		sub	r3, r0, #65536
 774:DRIVER/FatFs/source/ff.c **** 	}
 341              		.loc 1 774 62 discriminator 1 view .LVU106
 342 0078 0E49     		ldr	r1, .L23
 343              	.LVL38:
 774:DRIVER/FatFs/source/ff.c **** 	}
 344              		.loc 1 774 62 discriminator 1 view .LVU107
 345 007a 01EA8311 		and	r1, r1, r3, lsl #6
 774:DRIVER/FatFs/source/ff.c **** 	}
 346              		.loc 1 774 81 discriminator 1 view .LVU108
 347 007e C0F30903 		ubfx	r3, r0, #0, #10
 774:DRIVER/FatFs/source/ff.c **** 	}
 348              		.loc 1 774 75 discriminator 1 view .LVU109
 349 0082 1943     		orrs	r1, r1, r3
 774:DRIVER/FatFs/source/ff.c **** 	}
 350              		.loc 1 774 26 discriminator 1 view .LVU110
 351 0084 41F05840 		orr	r0, r1, #-671088640
 352              	.LVL39:
 774:DRIVER/FatFs/source/ff.c **** 	}
 353              		.loc 1 774 26 discriminator 1 view .LVU111
 354 0088 40F45C40 		orr	r0, r0, #56320
 355              	.LVL40:
 774:DRIVER/FatFs/source/ff.c **** 	}
 356              		.loc 1 774 26 discriminator 1 view .LVU112
 357 008c C1E7     		b	.L8
 358              	.LVL41:
 359              	.L22:
 762:DRIVER/FatFs/source/ff.c **** 		} else if ((uc & 0xF8) == 0xF0) {	/* 4-byte sequence? */
 360              		.loc 1 762 4 is_stmt 1 view .LVU113
 762:DRIVER/FatFs/source/ff.c **** 		} else if ((uc & 0xF8) == 0xF0) {	/* 4-byte sequence? */
 361              		.loc 1 762 7 is_stmt 0 view .LVU114
 362 008e 03F00F00 		and	r0, r3, #15
 363              	.LVL42:
 762:DRIVER/FatFs/source/ff.c **** 		} else if ((uc & 0xF8) == 0xF0) {	/* 4-byte sequence? */
 364              		.loc 1 762 16 is_stmt 1 view .LVU115
 762:DRIVER/FatFs/source/ff.c **** 		} else if ((uc & 0xF8) == 0xF0) {	/* 4-byte sequence? */
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 22


 365              		.loc 1 762 19 is_stmt 0 view .LVU116
 366 0092 0221     		movs	r1, #2
 367 0094 D4E7     		b	.L13
 368              	.LVL43:
 369              	.L14:
 766:DRIVER/FatFs/source/ff.c **** 		}
 370              		.loc 1 766 11 view .LVU117
 371 0096 4FF0FF30 		mov	r0, #-1
 372              	.LVL44:
 766:DRIVER/FatFs/source/ff.c **** 		}
 373              		.loc 1 766 11 view .LVU118
 374 009a BCE7     		b	.L7
 375              	.LVL45:
 376              	.L15:
 770:DRIVER/FatFs/source/ff.c **** 			uc = uc << 6 | (b & 0x3F);
 377              		.loc 1 770 35 view .LVU119
 378 009c 4FF0FF30 		mov	r0, #-1
 379              	.LVL46:
 770:DRIVER/FatFs/source/ff.c **** 			uc = uc << 6 | (b & 0x3F);
 380              		.loc 1 770 35 view .LVU120
 381 00a0 B9E7     		b	.L7
 382              	.LVL47:
 383              	.L16:
 773:DRIVER/FatFs/source/ff.c **** 		if (uc >= 0x010000) uc = 0xD800DC00 | ((uc - 0x10000) << 6 & 0x3FF0000) | (uc & 0x3FF);	/* Make a
 384              		.loc 1 773 62 view .LVU121
 385 00a2 4FF0FF30 		mov	r0, #-1
 386              	.LVL48:
 773:DRIVER/FatFs/source/ff.c **** 		if (uc >= 0x010000) uc = 0xD800DC00 | ((uc - 0x10000) << 6 & 0x3FF0000) | (uc & 0x3FF);	/* Make a
 387              		.loc 1 773 62 view .LVU122
 388 00a6 B6E7     		b	.L7
 389              	.LVL49:
 390              	.L17:
 773:DRIVER/FatFs/source/ff.c **** 		if (uc >= 0x010000) uc = 0xD800DC00 | ((uc - 0x10000) << 6 & 0x3FF0000) | (uc & 0x3FF);	/* Make a
 391              		.loc 1 773 62 view .LVU123
 392 00a8 4FF0FF30 		mov	r0, #-1
 393              	.LVL50:
 773:DRIVER/FatFs/source/ff.c **** 		if (uc >= 0x010000) uc = 0xD800DC00 | ((uc - 0x10000) << 6 & 0x3FF0000) | (uc & 0x3FF);	/* Make a
 394              		.loc 1 773 62 view .LVU124
 395 00ac B3E7     		b	.L7
 396              	.LVL51:
 397              	.L18:
 773:DRIVER/FatFs/source/ff.c **** 		if (uc >= 0x010000) uc = 0xD800DC00 | ((uc - 0x10000) << 6 & 0x3FF0000) | (uc & 0x3FF);	/* Make a
 398              		.loc 1 773 62 view .LVU125
 399 00ae 4FF0FF30 		mov	r0, #-1
 400              	.LVL52:
 773:DRIVER/FatFs/source/ff.c **** 		if (uc >= 0x010000) uc = 0xD800DC00 | ((uc - 0x10000) << 6 & 0x3FF0000) | (uc & 0x3FF);	/* Make a
 401              		.loc 1 773 62 view .LVU126
 402 00b2 B0E7     		b	.L7
 403              	.L24:
 404              		.align	2
 405              	.L23:
 406 00b4 0000FF03 		.word	67043328
 407              		.cfi_endproc
 408              	.LFE6:
 410              		.section	.text.put_utf,"ax",%progbits
 411              		.align	1
 412              		.syntax unified
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 23


 413              		.thumb
 414              		.thumb_func
 416              	put_utf:
 417              	.LVL53:
 418              	.LFB7:
 802:DRIVER/FatFs/source/ff.c **** 
 803:DRIVER/FatFs/source/ff.c **** 
 804:DRIVER/FatFs/source/ff.c **** /* Store a Unicode char in defined API encoding */
 805:DRIVER/FatFs/source/ff.c **** static UINT put_utf (	/* Returns number of encoding units written (0:buffer overflow or wrong encod
 806:DRIVER/FatFs/source/ff.c **** 	DWORD chr,	/* UTF-16 encoded character (Surrogate pair if >=0x10000) */
 807:DRIVER/FatFs/source/ff.c **** 	TCHAR* buf,	/* Output buffer */
 808:DRIVER/FatFs/source/ff.c **** 	UINT szb	/* Size of the buffer */
 809:DRIVER/FatFs/source/ff.c **** )
 810:DRIVER/FatFs/source/ff.c **** {
 419              		.loc 1 810 1 is_stmt 1 view -0
 420              		.cfi_startproc
 421              		@ args = 0, pretend = 0, frame = 0
 422              		@ frame_needed = 0, uses_anonymous_args = 0
 423              		@ link register save eliminated.
 811:DRIVER/FatFs/source/ff.c **** #if FF_LFN_UNICODE == 1	/* UTF-16 output */
 812:DRIVER/FatFs/source/ff.c **** 	WCHAR hs, wc;
 813:DRIVER/FatFs/source/ff.c **** 
 814:DRIVER/FatFs/source/ff.c **** 	hs = (WCHAR)(chr >> 16);
 815:DRIVER/FatFs/source/ff.c **** 	wc = (WCHAR)chr;
 816:DRIVER/FatFs/source/ff.c **** 	if (hs == 0) {	/* Single encoding unit? */
 817:DRIVER/FatFs/source/ff.c **** 		if (szb < 1 || IsSurrogate(wc)) return 0;	/* Buffer overflow or wrong code? */
 818:DRIVER/FatFs/source/ff.c **** 		*buf = wc;
 819:DRIVER/FatFs/source/ff.c **** 		return 1;
 820:DRIVER/FatFs/source/ff.c **** 	}
 821:DRIVER/FatFs/source/ff.c **** 	if (szb < 2 || !IsSurrogateH(hs) || !IsSurrogateL(wc)) return 0;	/* Buffer overflow or wrong surro
 822:DRIVER/FatFs/source/ff.c **** 	*buf++ = hs;
 823:DRIVER/FatFs/source/ff.c **** 	*buf++ = wc;
 824:DRIVER/FatFs/source/ff.c **** 	return 2;
 825:DRIVER/FatFs/source/ff.c **** 
 826:DRIVER/FatFs/source/ff.c **** #elif FF_LFN_UNICODE == 2	/* UTF-8 output */
 827:DRIVER/FatFs/source/ff.c **** 	DWORD hc;
 424              		.loc 1 827 2 view .LVU128
 828:DRIVER/FatFs/source/ff.c **** 
 829:DRIVER/FatFs/source/ff.c **** 	if (chr < 0x80) {	/* Single byte code? */
 425              		.loc 1 829 2 view .LVU129
 426              		.loc 1 829 5 is_stmt 0 view .LVU130
 427 0000 7F28     		cmp	r0, #127
 428 0002 04D8     		bhi	.L26
 830:DRIVER/FatFs/source/ff.c **** 		if (szb < 1) return 0;	/* Buffer overflow? */
 429              		.loc 1 830 3 is_stmt 1 view .LVU131
 430              		.loc 1 830 6 is_stmt 0 view .LVU132
 431 0004 002A     		cmp	r2, #0
 432 0006 5BD0     		beq	.L30
 831:DRIVER/FatFs/source/ff.c **** 		*buf = (TCHAR)chr;
 433              		.loc 1 831 3 is_stmt 1 view .LVU133
 434              		.loc 1 831 8 is_stmt 0 view .LVU134
 435 0008 0870     		strb	r0, [r1]
 832:DRIVER/FatFs/source/ff.c **** 		return 1;
 436              		.loc 1 832 3 is_stmt 1 view .LVU135
 437              		.loc 1 832 10 is_stmt 0 view .LVU136
 438 000a 0120     		movs	r0, #1
 439              	.LVL54:
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 24


 440              		.loc 1 832 10 view .LVU137
 441 000c 7047     		bx	lr
 442              	.LVL55:
 443              	.L26:
 833:DRIVER/FatFs/source/ff.c **** 	}
 834:DRIVER/FatFs/source/ff.c **** 	if (chr < 0x800) {	/* 2-byte sequence? */
 444              		.loc 1 834 2 is_stmt 1 view .LVU138
 445              		.loc 1 834 5 is_stmt 0 view .LVU139
 446 000e B0F5006F 		cmp	r0, #2048
 447 0012 0FD2     		bcs	.L28
 835:DRIVER/FatFs/source/ff.c **** 		if (szb < 2) return 0;	/* Buffer overflow? */
 448              		.loc 1 835 3 is_stmt 1 view .LVU140
 449              		.loc 1 835 6 is_stmt 0 view .LVU141
 450 0014 012A     		cmp	r2, #1
 451 0016 01D8     		bhi	.L37
 452              		.loc 1 835 23 view .LVU142
 453 0018 0020     		movs	r0, #0
 454              	.LVL56:
 455              		.loc 1 835 23 view .LVU143
 456 001a 7047     		bx	lr
 457              	.LVL57:
 458              	.L37:
 836:DRIVER/FatFs/source/ff.c **** 		*buf++ = (TCHAR)(0xC0 | (chr >> 6 & 0x1F));
 459              		.loc 1 836 3 is_stmt 1 view .LVU144
 460              		.loc 1 836 37 is_stmt 0 view .LVU145
 461 001c C0F38413 		ubfx	r3, r0, #6, #5
 462              	.LVL58:
 463              		.loc 1 836 12 view .LVU146
 464 0020 43F0C003 		orr	r3, r3, #192
 465              		.loc 1 836 10 view .LVU147
 466 0024 0B70     		strb	r3, [r1]
 837:DRIVER/FatFs/source/ff.c **** 		*buf++ = (TCHAR)(0x80 | (chr >> 0 & 0x3F));
 467              		.loc 1 837 3 is_stmt 1 view .LVU148
 468              		.loc 1 837 37 is_stmt 0 view .LVU149
 469 0026 00F03F00 		and	r0, r0, #63
 470              	.LVL59:
 471              		.loc 1 837 12 view .LVU150
 472 002a 40F08000 		orr	r0, r0, #128
 473              		.loc 1 837 10 view .LVU151
 474 002e 4870     		strb	r0, [r1, #1]
 838:DRIVER/FatFs/source/ff.c **** 		return 2;
 475              		.loc 1 838 3 is_stmt 1 view .LVU152
 476              		.loc 1 838 10 is_stmt 0 view .LVU153
 477 0030 0220     		movs	r0, #2
 478 0032 7047     		bx	lr
 479              	.LVL60:
 480              	.L28:
 839:DRIVER/FatFs/source/ff.c **** 	}
 840:DRIVER/FatFs/source/ff.c **** 	if (chr < 0x10000) {	/* 3-byte sequence? */
 481              		.loc 1 840 2 is_stmt 1 view .LVU154
 482              		.loc 1 840 5 is_stmt 0 view .LVU155
 483 0034 B0F5803F 		cmp	r0, #65536
 484 0038 19D2     		bcs	.L29
 841:DRIVER/FatFs/source/ff.c **** 		if (szb < 3 || IsSurrogate(chr)) return 0;	/* Buffer overflow or wrong code? */
 485              		.loc 1 841 3 is_stmt 1 view .LVU156
 486              		.loc 1 841 6 is_stmt 0 view .LVU157
 487 003a 022A     		cmp	r2, #2
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 25


 488 003c 42D9     		bls	.L32
 489              		.loc 1 841 18 discriminator 2 view .LVU158
 490 003e A0F55843 		sub	r3, r0, #55296
 491              		.loc 1 841 15 discriminator 2 view .LVU159
 492 0042 B3F5006F 		cmp	r3, #2048
 493 0046 01D2     		bcs	.L38
 494              		.loc 1 841 43 view .LVU160
 495 0048 0020     		movs	r0, #0
 496              	.LVL61:
 497              		.loc 1 841 43 view .LVU161
 498 004a 7047     		bx	lr
 499              	.LVL62:
 500              	.L38:
 842:DRIVER/FatFs/source/ff.c **** 		*buf++ = (TCHAR)(0xE0 | (chr >> 12 & 0x0F));
 501              		.loc 1 842 3 is_stmt 1 view .LVU162
 502              		.loc 1 842 38 is_stmt 0 view .LVU163
 503 004c C0F30333 		ubfx	r3, r0, #12, #4
 504              	.LVL63:
 505              		.loc 1 842 12 view .LVU164
 506 0050 43F0E003 		orr	r3, r3, #224
 507              		.loc 1 842 10 view .LVU165
 508 0054 0B70     		strb	r3, [r1]
 843:DRIVER/FatFs/source/ff.c **** 		*buf++ = (TCHAR)(0x80 | (chr >> 6 & 0x3F));
 509              		.loc 1 843 3 is_stmt 1 view .LVU166
 510              		.loc 1 843 37 is_stmt 0 view .LVU167
 511 0056 C0F38513 		ubfx	r3, r0, #6, #6
 512              	.LVL64:
 513              		.loc 1 843 12 view .LVU168
 514 005a 43F08003 		orr	r3, r3, #128
 515              		.loc 1 843 10 view .LVU169
 516 005e 4B70     		strb	r3, [r1, #1]
 844:DRIVER/FatFs/source/ff.c **** 		*buf++ = (TCHAR)(0x80 | (chr >> 0 & 0x3F));
 517              		.loc 1 844 3 is_stmt 1 view .LVU170
 518              		.loc 1 844 37 is_stmt 0 view .LVU171
 519 0060 00F03F00 		and	r0, r0, #63
 520              	.LVL65:
 521              		.loc 1 844 12 view .LVU172
 522 0064 40F08000 		orr	r0, r0, #128
 523              		.loc 1 844 10 view .LVU173
 524 0068 8870     		strb	r0, [r1, #2]
 845:DRIVER/FatFs/source/ff.c **** 		return 3;
 525              		.loc 1 845 3 is_stmt 1 view .LVU174
 526              		.loc 1 845 10 is_stmt 0 view .LVU175
 527 006a 0320     		movs	r0, #3
 528 006c 7047     		bx	lr
 529              	.LVL66:
 530              	.L29:
 846:DRIVER/FatFs/source/ff.c **** 	}
 847:DRIVER/FatFs/source/ff.c **** 	/* 4-byte sequence */
 848:DRIVER/FatFs/source/ff.c **** 	if (szb < 4) return 0;	/* Buffer overflow? */
 531              		.loc 1 848 2 is_stmt 1 view .LVU176
 532              		.loc 1 848 5 is_stmt 0 view .LVU177
 533 006e 032A     		cmp	r2, #3
 534 0070 2AD9     		bls	.L34
 849:DRIVER/FatFs/source/ff.c **** 	hc = ((chr & 0xFFFF0000) - 0xD8000000) >> 6;	/* Get high 10 bits */
 535              		.loc 1 849 2 is_stmt 1 view .LVU178
 536              		.loc 1 849 13 is_stmt 0 view .LVU179
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 26


 537 0072 030C     		lsrs	r3, r0, #16
 538 0074 1B04     		lsls	r3, r3, #16
 539              		.loc 1 849 27 view .LVU180
 540 0076 03F12053 		add	r3, r3, #671088640
 541              		.loc 1 849 5 view .LVU181
 542 007a 9B09     		lsrs	r3, r3, #6
 543              	.LVL67:
 850:DRIVER/FatFs/source/ff.c **** 	chr = (chr & 0xFFFF) - 0xDC00;					/* Get low 10 bits */
 544              		.loc 1 850 2 is_stmt 1 view .LVU182
 545              		.loc 1 850 13 is_stmt 0 view .LVU183
 546 007c 80B2     		uxth	r0, r0
 547              	.LVL68:
 548              		.loc 1 850 6 view .LVU184
 549 007e A0F55C40 		sub	r0, r0, #56320
 550              	.LVL69:
 851:DRIVER/FatFs/source/ff.c **** 	if (hc >= 0x100000 || chr >= 0x400) return 0;	/* Wrong surrogate? */
 551              		.loc 1 851 2 is_stmt 1 view .LVU185
 552              		.loc 1 851 5 is_stmt 0 view .LVU186
 553 0082 B3F5801F 		cmp	r3, #1048576
 554 0086 21D2     		bcs	.L35
 555              		.loc 1 851 21 discriminator 2 view .LVU187
 556 0088 B0F5806F 		cmp	r0, #1024
 557 008c 20D2     		bcs	.L36
 852:DRIVER/FatFs/source/ff.c **** 	chr = (hc | chr) + 0x10000;
 558              		.loc 1 852 2 is_stmt 1 view .LVU188
 559              		.loc 1 852 12 is_stmt 0 view .LVU189
 560 008e 0343     		orrs	r3, r3, r0
 561              	.LVL70:
 562              		.loc 1 852 6 view .LVU190
 563 0090 03F58033 		add	r3, r3, #65536
 564              	.LVL71:
 853:DRIVER/FatFs/source/ff.c **** 	*buf++ = (TCHAR)(0xF0 | (chr >> 18 & 0x07));
 565              		.loc 1 853 2 is_stmt 1 view .LVU191
 566              		.loc 1 853 37 is_stmt 0 view .LVU192
 567 0094 C3F38242 		ubfx	r2, r3, #18, #3
 568              	.LVL72:
 569              		.loc 1 853 11 view .LVU193
 570 0098 42F0F002 		orr	r2, r2, #240
 571              		.loc 1 853 9 view .LVU194
 572 009c 0A70     		strb	r2, [r1]
 854:DRIVER/FatFs/source/ff.c **** 	*buf++ = (TCHAR)(0x80 | (chr >> 12 & 0x3F));
 573              		.loc 1 854 2 is_stmt 1 view .LVU195
 574              		.loc 1 854 37 is_stmt 0 view .LVU196
 575 009e C3F30532 		ubfx	r2, r3, #12, #6
 576              	.LVL73:
 577              		.loc 1 854 11 view .LVU197
 578 00a2 42F08002 		orr	r2, r2, #128
 579              		.loc 1 854 9 view .LVU198
 580 00a6 4A70     		strb	r2, [r1, #1]
 855:DRIVER/FatFs/source/ff.c **** 	*buf++ = (TCHAR)(0x80 | (chr >> 6 & 0x3F));
 581              		.loc 1 855 2 is_stmt 1 view .LVU199
 582              		.loc 1 855 36 is_stmt 0 view .LVU200
 583 00a8 C3F38512 		ubfx	r2, r3, #6, #6
 584              	.LVL74:
 585              		.loc 1 855 11 view .LVU201
 586 00ac 42F08002 		orr	r2, r2, #128
 587              		.loc 1 855 9 view .LVU202
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 27


 588 00b0 8A70     		strb	r2, [r1, #2]
 856:DRIVER/FatFs/source/ff.c **** 	*buf++ = (TCHAR)(0x80 | (chr >> 0 & 0x3F));
 589              		.loc 1 856 2 is_stmt 1 view .LVU203
 590              		.loc 1 856 36 is_stmt 0 view .LVU204
 591 00b2 03F03F03 		and	r3, r3, #63
 592              	.LVL75:
 593              		.loc 1 856 11 view .LVU205
 594 00b6 43F08003 		orr	r3, r3, #128
 595              		.loc 1 856 9 view .LVU206
 596 00ba CB70     		strb	r3, [r1, #3]
 857:DRIVER/FatFs/source/ff.c **** 	return 4;
 597              		.loc 1 857 2 is_stmt 1 view .LVU207
 598              		.loc 1 857 9 is_stmt 0 view .LVU208
 599 00bc 0420     		movs	r0, #4
 600              	.LVL76:
 601              		.loc 1 857 9 view .LVU209
 602 00be 7047     		bx	lr
 603              	.LVL77:
 604              	.L30:
 830:DRIVER/FatFs/source/ff.c **** 		*buf = (TCHAR)chr;
 605              		.loc 1 830 23 view .LVU210
 606 00c0 1046     		mov	r0, r2
 607              	.LVL78:
 830:DRIVER/FatFs/source/ff.c **** 		*buf = (TCHAR)chr;
 608              		.loc 1 830 23 view .LVU211
 609 00c2 7047     		bx	lr
 610              	.LVL79:
 611              	.L32:
 841:DRIVER/FatFs/source/ff.c **** 		*buf++ = (TCHAR)(0xE0 | (chr >> 12 & 0x0F));
 612              		.loc 1 841 43 view .LVU212
 613 00c4 0020     		movs	r0, #0
 614              	.LVL80:
 841:DRIVER/FatFs/source/ff.c **** 		*buf++ = (TCHAR)(0xE0 | (chr >> 12 & 0x0F));
 615              		.loc 1 841 43 view .LVU213
 616 00c6 7047     		bx	lr
 617              	.LVL81:
 618              	.L34:
 848:DRIVER/FatFs/source/ff.c **** 	hc = ((chr & 0xFFFF0000) - 0xD8000000) >> 6;	/* Get high 10 bits */
 619              		.loc 1 848 22 view .LVU214
 620 00c8 0020     		movs	r0, #0
 621              	.LVL82:
 848:DRIVER/FatFs/source/ff.c **** 	hc = ((chr & 0xFFFF0000) - 0xD8000000) >> 6;	/* Get high 10 bits */
 622              		.loc 1 848 22 view .LVU215
 623 00ca 7047     		bx	lr
 624              	.LVL83:
 625              	.L35:
 851:DRIVER/FatFs/source/ff.c **** 	chr = (hc | chr) + 0x10000;
 626              		.loc 1 851 45 view .LVU216
 627 00cc 0020     		movs	r0, #0
 628              	.LVL84:
 851:DRIVER/FatFs/source/ff.c **** 	chr = (hc | chr) + 0x10000;
 629              		.loc 1 851 45 view .LVU217
 630 00ce 7047     		bx	lr
 631              	.LVL85:
 632              	.L36:
 851:DRIVER/FatFs/source/ff.c **** 	chr = (hc | chr) + 0x10000;
 633              		.loc 1 851 45 view .LVU218
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 28


 634 00d0 0020     		movs	r0, #0
 635              	.LVL86:
 858:DRIVER/FatFs/source/ff.c **** 
 859:DRIVER/FatFs/source/ff.c **** #elif FF_LFN_UNICODE == 3	/* UTF-32 output */
 860:DRIVER/FatFs/source/ff.c **** 	DWORD hc;
 861:DRIVER/FatFs/source/ff.c **** 
 862:DRIVER/FatFs/source/ff.c **** 	if (szb < 1) return 0;	/* Buffer overflow? */
 863:DRIVER/FatFs/source/ff.c **** 	if (chr >= 0x10000) {	/* Out of BMP? */
 864:DRIVER/FatFs/source/ff.c **** 		hc = ((chr & 0xFFFF0000) - 0xD8000000) >> 6;	/* Get high 10 bits */
 865:DRIVER/FatFs/source/ff.c **** 		chr = (chr & 0xFFFF) - 0xDC00;					/* Get low 10 bits */
 866:DRIVER/FatFs/source/ff.c **** 		if (hc >= 0x100000 || chr >= 0x400) return 0;	/* Wrong surrogate? */
 867:DRIVER/FatFs/source/ff.c **** 		chr = (hc | chr) + 0x10000;
 868:DRIVER/FatFs/source/ff.c **** 	}
 869:DRIVER/FatFs/source/ff.c **** 	*buf++ = (TCHAR)chr;
 870:DRIVER/FatFs/source/ff.c **** 	return 1;
 871:DRIVER/FatFs/source/ff.c **** 
 872:DRIVER/FatFs/source/ff.c **** #else						/* ANSI/OEM output */
 873:DRIVER/FatFs/source/ff.c **** 	WCHAR wc;
 874:DRIVER/FatFs/source/ff.c **** 
 875:DRIVER/FatFs/source/ff.c **** 	wc = ff_uni2oem(chr, CODEPAGE);
 876:DRIVER/FatFs/source/ff.c **** 	if (wc >= 0x100) {	/* Is this a DBC? */
 877:DRIVER/FatFs/source/ff.c **** 		if (szb < 2) return 0;
 878:DRIVER/FatFs/source/ff.c **** 		*buf++ = (char)(wc >> 8);	/* Store DBC 1st byte */
 879:DRIVER/FatFs/source/ff.c **** 		*buf++ = (TCHAR)wc;			/* Store DBC 2nd byte */
 880:DRIVER/FatFs/source/ff.c **** 		return 2;
 881:DRIVER/FatFs/source/ff.c **** 	}
 882:DRIVER/FatFs/source/ff.c **** 	if (wc == 0 || szb < 1) return 0;	/* Invalid char or buffer overflow? */
 883:DRIVER/FatFs/source/ff.c **** 	*buf++ = (TCHAR)wc;					/* Store the character */
 884:DRIVER/FatFs/source/ff.c **** 	return 1;
 885:DRIVER/FatFs/source/ff.c **** #endif
 886:DRIVER/FatFs/source/ff.c **** }
 636              		.loc 1 886 1 view .LVU219
 637 00d2 7047     		bx	lr
 638              		.cfi_endproc
 639              	.LFE7:
 641              		.section	.text.clst2sect,"ax",%progbits
 642              		.align	1
 643              		.syntax unified
 644              		.thumb
 645              		.thumb_func
 647              	clst2sect:
 648              	.LVL87:
 649              	.LFB11:
 887:DRIVER/FatFs/source/ff.c **** #endif	/* FF_USE_LFN */
 888:DRIVER/FatFs/source/ff.c **** 
 889:DRIVER/FatFs/source/ff.c **** 
 890:DRIVER/FatFs/source/ff.c **** #if FF_FS_REENTRANT
 891:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
 892:DRIVER/FatFs/source/ff.c **** /* Request/Release grant to access the volume                            */
 893:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
 894:DRIVER/FatFs/source/ff.c **** 
 895:DRIVER/FatFs/source/ff.c **** static int lock_volume (	/* 1:Ok, 0:timeout */
 896:DRIVER/FatFs/source/ff.c **** 	FATFS* fs,				/* Filesystem object to lock */
 897:DRIVER/FatFs/source/ff.c **** 	int syslock				/* System lock required */
 898:DRIVER/FatFs/source/ff.c **** )
 899:DRIVER/FatFs/source/ff.c **** {
 900:DRIVER/FatFs/source/ff.c **** 	int rv;
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 29


 901:DRIVER/FatFs/source/ff.c **** 
 902:DRIVER/FatFs/source/ff.c **** 
 903:DRIVER/FatFs/source/ff.c **** #if FF_FS_LOCK
 904:DRIVER/FatFs/source/ff.c **** 	rv = ff_mutex_take(fs->ldrv);	/* Lock the volume */
 905:DRIVER/FatFs/source/ff.c **** 	if (rv && syslock) {			/* System lock reqiered? */
 906:DRIVER/FatFs/source/ff.c **** 		rv = ff_mutex_take(FF_VOLUMES);	/* Lock the system */
 907:DRIVER/FatFs/source/ff.c **** 		if (rv) {
 908:DRIVER/FatFs/source/ff.c **** 			SysLock = 2;				/* System lock succeeded */
 909:DRIVER/FatFs/source/ff.c **** 		} else {
 910:DRIVER/FatFs/source/ff.c **** 			ff_mutex_give(fs->ldrv);	/* Failed system lock */
 911:DRIVER/FatFs/source/ff.c **** 		}
 912:DRIVER/FatFs/source/ff.c **** 	}
 913:DRIVER/FatFs/source/ff.c **** #else
 914:DRIVER/FatFs/source/ff.c **** 	rv = syslock ? ff_mutex_take(fs->ldrv) : ff_mutex_take(fs->ldrv);	/* Lock the volume (this is to p
 915:DRIVER/FatFs/source/ff.c **** #endif
 916:DRIVER/FatFs/source/ff.c **** 	return rv;
 917:DRIVER/FatFs/source/ff.c **** }
 918:DRIVER/FatFs/source/ff.c **** 
 919:DRIVER/FatFs/source/ff.c **** 
 920:DRIVER/FatFs/source/ff.c **** static void unlock_volume (
 921:DRIVER/FatFs/source/ff.c **** 	FATFS* fs,		/* Filesystem object */
 922:DRIVER/FatFs/source/ff.c **** 	FRESULT res		/* Result code to be returned */
 923:DRIVER/FatFs/source/ff.c **** )
 924:DRIVER/FatFs/source/ff.c **** {
 925:DRIVER/FatFs/source/ff.c **** 	if (fs && res != FR_NOT_ENABLED && res != FR_INVALID_DRIVE && res != FR_TIMEOUT) {
 926:DRIVER/FatFs/source/ff.c **** #if FF_FS_LOCK
 927:DRIVER/FatFs/source/ff.c **** 		if (SysLock == 2) {	/* Is the system locked? */
 928:DRIVER/FatFs/source/ff.c **** 			SysLock = 1;
 929:DRIVER/FatFs/source/ff.c **** 			ff_mutex_give(FF_VOLUMES);
 930:DRIVER/FatFs/source/ff.c **** 		}
 931:DRIVER/FatFs/source/ff.c **** #endif
 932:DRIVER/FatFs/source/ff.c **** 		ff_mutex_give(fs->ldrv);	/* Unlock the volume */
 933:DRIVER/FatFs/source/ff.c **** 	}
 934:DRIVER/FatFs/source/ff.c **** }
 935:DRIVER/FatFs/source/ff.c **** 
 936:DRIVER/FatFs/source/ff.c **** #endif
 937:DRIVER/FatFs/source/ff.c **** 
 938:DRIVER/FatFs/source/ff.c **** 
 939:DRIVER/FatFs/source/ff.c **** 
 940:DRIVER/FatFs/source/ff.c **** #if FF_FS_LOCK
 941:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
 942:DRIVER/FatFs/source/ff.c **** /* File shareing control functions                                       */
 943:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
 944:DRIVER/FatFs/source/ff.c **** 
 945:DRIVER/FatFs/source/ff.c **** static FRESULT chk_share (	/* Check if the file can be accessed */
 946:DRIVER/FatFs/source/ff.c **** 	DIR* dp,		/* Directory object pointing the file to be checked */
 947:DRIVER/FatFs/source/ff.c **** 	int acc			/* Desired access type (0:Read mode open, 1:Write mode open, 2:Delete or rename) */
 948:DRIVER/FatFs/source/ff.c **** )
 949:DRIVER/FatFs/source/ff.c **** {
 950:DRIVER/FatFs/source/ff.c **** 	UINT i, be;
 951:DRIVER/FatFs/source/ff.c **** 
 952:DRIVER/FatFs/source/ff.c **** 	/* Search open object table for the object */
 953:DRIVER/FatFs/source/ff.c **** 	be = 0;
 954:DRIVER/FatFs/source/ff.c **** 	for (i = 0; i < FF_FS_LOCK; i++) {
 955:DRIVER/FatFs/source/ff.c **** 		if (Files[i].fs) {	/* Existing entry */
 956:DRIVER/FatFs/source/ff.c **** 			if (Files[i].fs == dp->obj.fs &&	 	/* Check if the object matches with an open object */
 957:DRIVER/FatFs/source/ff.c **** 				Files[i].clu == dp->obj.sclust &&
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 30


 958:DRIVER/FatFs/source/ff.c **** 				Files[i].ofs == dp->dptr) break;
 959:DRIVER/FatFs/source/ff.c **** 		} else {			/* Blank entry */
 960:DRIVER/FatFs/source/ff.c **** 			be = 1;
 961:DRIVER/FatFs/source/ff.c **** 		}
 962:DRIVER/FatFs/source/ff.c **** 	}
 963:DRIVER/FatFs/source/ff.c **** 	if (i == FF_FS_LOCK) {	/* The object has not been opened */
 964:DRIVER/FatFs/source/ff.c **** 		return (!be && acc != 2) ? FR_TOO_MANY_OPEN_FILES : FR_OK;	/* Is there a blank entry for new obje
 965:DRIVER/FatFs/source/ff.c **** 	}
 966:DRIVER/FatFs/source/ff.c **** 
 967:DRIVER/FatFs/source/ff.c **** 	/* The object was opened. Reject any open against writing file and all write mode open */
 968:DRIVER/FatFs/source/ff.c **** 	return (acc != 0 || Files[i].ctr == 0x100) ? FR_LOCKED : FR_OK;
 969:DRIVER/FatFs/source/ff.c **** }
 970:DRIVER/FatFs/source/ff.c **** 
 971:DRIVER/FatFs/source/ff.c **** 
 972:DRIVER/FatFs/source/ff.c **** static int enq_share (void)	/* Check if an entry is available for a new object */
 973:DRIVER/FatFs/source/ff.c **** {
 974:DRIVER/FatFs/source/ff.c **** 	UINT i;
 975:DRIVER/FatFs/source/ff.c **** 
 976:DRIVER/FatFs/source/ff.c **** 	for (i = 0; i < FF_FS_LOCK && Files[i].fs; i++) ;	/* Find a free entry */
 977:DRIVER/FatFs/source/ff.c **** 	return (i == FF_FS_LOCK) ? 0 : 1;
 978:DRIVER/FatFs/source/ff.c **** }
 979:DRIVER/FatFs/source/ff.c **** 
 980:DRIVER/FatFs/source/ff.c **** 
 981:DRIVER/FatFs/source/ff.c **** static UINT inc_share (	/* Increment object open counter and returns its index (0:Internal error) *
 982:DRIVER/FatFs/source/ff.c **** 	DIR* dp,	/* Directory object pointing the file to register or increment */
 983:DRIVER/FatFs/source/ff.c **** 	int acc		/* Desired access (0:Read, 1:Write, 2:Delete/Rename) */
 984:DRIVER/FatFs/source/ff.c **** )
 985:DRIVER/FatFs/source/ff.c **** {
 986:DRIVER/FatFs/source/ff.c **** 	UINT i;
 987:DRIVER/FatFs/source/ff.c **** 
 988:DRIVER/FatFs/source/ff.c **** 
 989:DRIVER/FatFs/source/ff.c **** 	for (i = 0; i < FF_FS_LOCK; i++) {	/* Find the object */
 990:DRIVER/FatFs/source/ff.c **** 		if (Files[i].fs == dp->obj.fs
 991:DRIVER/FatFs/source/ff.c **** 		 && Files[i].clu == dp->obj.sclust
 992:DRIVER/FatFs/source/ff.c **** 		 && Files[i].ofs == dp->dptr) break;
 993:DRIVER/FatFs/source/ff.c **** 	}
 994:DRIVER/FatFs/source/ff.c **** 
 995:DRIVER/FatFs/source/ff.c **** 	if (i == FF_FS_LOCK) {			/* Not opened. Register it as new. */
 996:DRIVER/FatFs/source/ff.c **** 		for (i = 0; i < FF_FS_LOCK && Files[i].fs; i++) ;	/* Find a free entry */
 997:DRIVER/FatFs/source/ff.c **** 		if (i == FF_FS_LOCK) return 0;	/* No free entry to register (int err) */
 998:DRIVER/FatFs/source/ff.c **** 		Files[i].fs = dp->obj.fs;
 999:DRIVER/FatFs/source/ff.c **** 		Files[i].clu = dp->obj.sclust;
1000:DRIVER/FatFs/source/ff.c **** 		Files[i].ofs = dp->dptr;
1001:DRIVER/FatFs/source/ff.c **** 		Files[i].ctr = 0;
1002:DRIVER/FatFs/source/ff.c **** 	}
1003:DRIVER/FatFs/source/ff.c **** 
1004:DRIVER/FatFs/source/ff.c **** 	if (acc >= 1 && Files[i].ctr) return 0;	/* Access violation (int err) */
1005:DRIVER/FatFs/source/ff.c **** 
1006:DRIVER/FatFs/source/ff.c **** 	Files[i].ctr = acc ? 0x100 : Files[i].ctr + 1;	/* Set semaphore value */
1007:DRIVER/FatFs/source/ff.c **** 
1008:DRIVER/FatFs/source/ff.c **** 	return i + 1;	/* Index number origin from 1 */
1009:DRIVER/FatFs/source/ff.c **** }
1010:DRIVER/FatFs/source/ff.c **** 
1011:DRIVER/FatFs/source/ff.c **** 
1012:DRIVER/FatFs/source/ff.c **** static FRESULT dec_share (	/* Decrement object open counter */
1013:DRIVER/FatFs/source/ff.c **** 	UINT i			/* Semaphore index (1..) */
1014:DRIVER/FatFs/source/ff.c **** )
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 31


1015:DRIVER/FatFs/source/ff.c **** {
1016:DRIVER/FatFs/source/ff.c **** 	UINT n;
1017:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
1018:DRIVER/FatFs/source/ff.c **** 
1019:DRIVER/FatFs/source/ff.c **** 
1020:DRIVER/FatFs/source/ff.c **** 	if (--i < FF_FS_LOCK) {	/* Index number origin from 0 */
1021:DRIVER/FatFs/source/ff.c **** 		n = Files[i].ctr;
1022:DRIVER/FatFs/source/ff.c **** 		if (n == 0x100) n = 0;	/* If write mode open, delete the object semaphore */
1023:DRIVER/FatFs/source/ff.c **** 		if (n > 0) n--;			/* Decrement read mode open count */
1024:DRIVER/FatFs/source/ff.c **** 		Files[i].ctr = n;
1025:DRIVER/FatFs/source/ff.c **** 		if (n == 0) {			/* Delete the object semaphore if open count becomes zero */
1026:DRIVER/FatFs/source/ff.c **** 			Files[i].fs = 0;	/* Free the entry <<<If this memory write operation is not in atomic, FF_FS_REE
1027:DRIVER/FatFs/source/ff.c **** 		}
1028:DRIVER/FatFs/source/ff.c **** 		res = FR_OK;
1029:DRIVER/FatFs/source/ff.c **** 	} else {
1030:DRIVER/FatFs/source/ff.c **** 		res = FR_INT_ERR;		/* Invalid index number */
1031:DRIVER/FatFs/source/ff.c **** 	}
1032:DRIVER/FatFs/source/ff.c **** 	return res;
1033:DRIVER/FatFs/source/ff.c **** }
1034:DRIVER/FatFs/source/ff.c **** 
1035:DRIVER/FatFs/source/ff.c **** 
1036:DRIVER/FatFs/source/ff.c **** static void clear_share (	/* Clear all lock entries of the volume */
1037:DRIVER/FatFs/source/ff.c **** 	FATFS* fs
1038:DRIVER/FatFs/source/ff.c **** )
1039:DRIVER/FatFs/source/ff.c **** {
1040:DRIVER/FatFs/source/ff.c **** 	UINT i;
1041:DRIVER/FatFs/source/ff.c **** 
1042:DRIVER/FatFs/source/ff.c **** 	for (i = 0; i < FF_FS_LOCK; i++) {
1043:DRIVER/FatFs/source/ff.c **** 		if (Files[i].fs == fs) Files[i].fs = 0;
1044:DRIVER/FatFs/source/ff.c **** 	}
1045:DRIVER/FatFs/source/ff.c **** }
1046:DRIVER/FatFs/source/ff.c **** 
1047:DRIVER/FatFs/source/ff.c **** #endif	/* FF_FS_LOCK */
1048:DRIVER/FatFs/source/ff.c **** 
1049:DRIVER/FatFs/source/ff.c **** 
1050:DRIVER/FatFs/source/ff.c **** 
1051:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
1052:DRIVER/FatFs/source/ff.c **** /* Move/Flush disk access window in the filesystem object                */
1053:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
1054:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY
1055:DRIVER/FatFs/source/ff.c **** static FRESULT sync_window (	/* Returns FR_OK or FR_DISK_ERR */
1056:DRIVER/FatFs/source/ff.c **** 	FATFS* fs			/* Filesystem object */
1057:DRIVER/FatFs/source/ff.c **** )
1058:DRIVER/FatFs/source/ff.c **** {
1059:DRIVER/FatFs/source/ff.c **** 	FRESULT res = FR_OK;
1060:DRIVER/FatFs/source/ff.c **** 
1061:DRIVER/FatFs/source/ff.c **** 
1062:DRIVER/FatFs/source/ff.c **** 	if (fs->wflag) {	/* Is the disk access window dirty? */
1063:DRIVER/FatFs/source/ff.c **** 		if (disk_write(fs->pdrv, fs->win, fs->winsect, 1) == RES_OK) {	/* Write it back into the volume *
1064:DRIVER/FatFs/source/ff.c **** 			fs->wflag = 0;	/* Clear window dirty flag */
1065:DRIVER/FatFs/source/ff.c **** 			if (fs->winsect - fs->fatbase < fs->fsize) {	/* Is it in the 1st FAT? */
1066:DRIVER/FatFs/source/ff.c **** 				if (fs->n_fats == 2) disk_write(fs->pdrv, fs->win, fs->winsect + fs->fsize, 1);	/* Reflect it t
1067:DRIVER/FatFs/source/ff.c **** 			}
1068:DRIVER/FatFs/source/ff.c **** 		} else {
1069:DRIVER/FatFs/source/ff.c **** 			res = FR_DISK_ERR;
1070:DRIVER/FatFs/source/ff.c **** 		}
1071:DRIVER/FatFs/source/ff.c **** 	}
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 32


1072:DRIVER/FatFs/source/ff.c **** 	return res;
1073:DRIVER/FatFs/source/ff.c **** }
1074:DRIVER/FatFs/source/ff.c **** #endif
1075:DRIVER/FatFs/source/ff.c **** 
1076:DRIVER/FatFs/source/ff.c **** 
1077:DRIVER/FatFs/source/ff.c **** static FRESULT move_window (	/* Returns FR_OK or FR_DISK_ERR */
1078:DRIVER/FatFs/source/ff.c **** 	FATFS* fs,		/* Filesystem object */
1079:DRIVER/FatFs/source/ff.c **** 	LBA_t sect		/* Sector LBA to make appearance in the fs->win[] */
1080:DRIVER/FatFs/source/ff.c **** )
1081:DRIVER/FatFs/source/ff.c **** {
1082:DRIVER/FatFs/source/ff.c **** 	FRESULT res = FR_OK;
1083:DRIVER/FatFs/source/ff.c **** 
1084:DRIVER/FatFs/source/ff.c **** 
1085:DRIVER/FatFs/source/ff.c **** 	if (sect != fs->winsect) {	/* Window offset changed? */
1086:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY
1087:DRIVER/FatFs/source/ff.c **** 		res = sync_window(fs);		/* Flush the window */
1088:DRIVER/FatFs/source/ff.c **** #endif
1089:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK) {			/* Fill sector window with new data */
1090:DRIVER/FatFs/source/ff.c **** 			if (disk_read(fs->pdrv, fs->win, sect, 1) != RES_OK) {
1091:DRIVER/FatFs/source/ff.c **** 				sect = (LBA_t)0 - 1;	/* Invalidate window if read data is not valid */
1092:DRIVER/FatFs/source/ff.c **** 				res = FR_DISK_ERR;
1093:DRIVER/FatFs/source/ff.c **** 			}
1094:DRIVER/FatFs/source/ff.c **** 			fs->winsect = sect;
1095:DRIVER/FatFs/source/ff.c **** 		}
1096:DRIVER/FatFs/source/ff.c **** 	}
1097:DRIVER/FatFs/source/ff.c **** 	return res;
1098:DRIVER/FatFs/source/ff.c **** }
1099:DRIVER/FatFs/source/ff.c **** 
1100:DRIVER/FatFs/source/ff.c **** 
1101:DRIVER/FatFs/source/ff.c **** 
1102:DRIVER/FatFs/source/ff.c **** 
1103:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY
1104:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
1105:DRIVER/FatFs/source/ff.c **** /* Synchronize filesystem and data on the storage                        */
1106:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
1107:DRIVER/FatFs/source/ff.c **** 
1108:DRIVER/FatFs/source/ff.c **** static FRESULT sync_fs (	/* Returns FR_OK or FR_DISK_ERR */
1109:DRIVER/FatFs/source/ff.c **** 	FATFS* fs		/* Filesystem object */
1110:DRIVER/FatFs/source/ff.c **** )
1111:DRIVER/FatFs/source/ff.c **** {
1112:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
1113:DRIVER/FatFs/source/ff.c **** 
1114:DRIVER/FatFs/source/ff.c **** 
1115:DRIVER/FatFs/source/ff.c **** 	res = sync_window(fs);
1116:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
1117:DRIVER/FatFs/source/ff.c **** 		if (fs->fs_type == FS_FAT32 && fs->fsi_flag == 1) {	/* FAT32: Update FSInfo sector if needed */
1118:DRIVER/FatFs/source/ff.c **** 			/* Create FSInfo structure */
1119:DRIVER/FatFs/source/ff.c **** 			memset(fs->win, 0, sizeof fs->win);
1120:DRIVER/FatFs/source/ff.c **** 			st_word(fs->win + BS_55AA, 0xAA55);					/* Boot signature */
1121:DRIVER/FatFs/source/ff.c **** 			st_dword(fs->win + FSI_LeadSig, 0x41615252);		/* Leading signature */
1122:DRIVER/FatFs/source/ff.c **** 			st_dword(fs->win + FSI_StrucSig, 0x61417272);		/* Structure signature */
1123:DRIVER/FatFs/source/ff.c **** 			st_dword(fs->win + FSI_Free_Count, fs->free_clst);	/* Number of free clusters */
1124:DRIVER/FatFs/source/ff.c **** 			st_dword(fs->win + FSI_Nxt_Free, fs->last_clst);	/* Last allocated culuster */
1125:DRIVER/FatFs/source/ff.c **** 			fs->winsect = fs->volbase + 1;						/* Write it into the FSInfo sector (Next to VBR) */
1126:DRIVER/FatFs/source/ff.c **** 			disk_write(fs->pdrv, fs->win, fs->winsect, 1);
1127:DRIVER/FatFs/source/ff.c **** 			fs->fsi_flag = 0;
1128:DRIVER/FatFs/source/ff.c **** 		}
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 33


1129:DRIVER/FatFs/source/ff.c **** 		/* Make sure that no pending write process in the lower layer */
1130:DRIVER/FatFs/source/ff.c **** 		if (disk_ioctl(fs->pdrv, CTRL_SYNC, 0) != RES_OK) res = FR_DISK_ERR;
1131:DRIVER/FatFs/source/ff.c **** 	}
1132:DRIVER/FatFs/source/ff.c **** 
1133:DRIVER/FatFs/source/ff.c **** 	return res;
1134:DRIVER/FatFs/source/ff.c **** }
1135:DRIVER/FatFs/source/ff.c **** 
1136:DRIVER/FatFs/source/ff.c **** #endif
1137:DRIVER/FatFs/source/ff.c **** 
1138:DRIVER/FatFs/source/ff.c **** 
1139:DRIVER/FatFs/source/ff.c **** 
1140:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
1141:DRIVER/FatFs/source/ff.c **** /* Get physical sector number from cluster number                        */
1142:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
1143:DRIVER/FatFs/source/ff.c **** 
1144:DRIVER/FatFs/source/ff.c **** static LBA_t clst2sect (	/* !=0:Sector number, 0:Failed (invalid cluster#) */
1145:DRIVER/FatFs/source/ff.c **** 	FATFS* fs,		/* Filesystem object */
1146:DRIVER/FatFs/source/ff.c **** 	DWORD clst		/* Cluster# to be converted */
1147:DRIVER/FatFs/source/ff.c **** )
1148:DRIVER/FatFs/source/ff.c **** {
 650              		.loc 1 1148 1 is_stmt 1 view -0
 651              		.cfi_startproc
 652              		@ args = 0, pretend = 0, frame = 0
 653              		@ frame_needed = 0, uses_anonymous_args = 0
 654              		@ link register save eliminated.
1149:DRIVER/FatFs/source/ff.c **** 	clst -= 2;		/* Cluster number is origin from 2 */
 655              		.loc 1 1149 2 view .LVU221
 656              		.loc 1 1149 7 is_stmt 0 view .LVU222
 657 0000 0239     		subs	r1, r1, #2
 658              	.LVL88:
1150:DRIVER/FatFs/source/ff.c **** 	if (clst >= fs->n_fatent - 2) return 0;		/* Is it invalid cluster number? */
 659              		.loc 1 1150 2 is_stmt 1 view .LVU223
 660              		.loc 1 1150 16 is_stmt 0 view .LVU224
 661 0002 C369     		ldr	r3, [r0, #28]
 662              		.loc 1 1150 27 view .LVU225
 663 0004 023B     		subs	r3, r3, #2
 664              		.loc 1 1150 5 view .LVU226
 665 0006 8B42     		cmp	r3, r1
 666 0008 04D9     		bls	.L41
1151:DRIVER/FatFs/source/ff.c **** 	return fs->database + (LBA_t)fs->csize * clst;	/* Start sector number of the cluster */
 667              		.loc 1 1151 2 is_stmt 1 view .LVU227
 668              		.loc 1 1151 11 is_stmt 0 view .LVU228
 669 000a 036B     		ldr	r3, [r0, #48]
 670              		.loc 1 1151 33 view .LVU229
 671 000c 4289     		ldrh	r2, [r0, #10]
 672              		.loc 1 1151 22 view .LVU230
 673 000e 01FB0230 		mla	r0, r1, r2, r3
 674              	.LVL89:
 675              		.loc 1 1151 22 view .LVU231
 676 0012 7047     		bx	lr
 677              	.LVL90:
 678              	.L41:
1150:DRIVER/FatFs/source/ff.c **** 	if (clst >= fs->n_fatent - 2) return 0;		/* Is it invalid cluster number? */
 679              		.loc 1 1150 39 view .LVU232
 680 0014 0020     		movs	r0, #0
 681              	.LVL91:
1152:DRIVER/FatFs/source/ff.c **** }
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 34


 682              		.loc 1 1152 1 view .LVU233
 683 0016 7047     		bx	lr
 684              		.cfi_endproc
 685              	.LFE11:
 687              		.section	.text.ld_clust,"ax",%progbits
 688              		.align	1
 689              		.syntax unified
 690              		.thumb
 691              		.thumb_func
 693              	ld_clust:
 694              	.LVL92:
 695              	.LFB20:
1153:DRIVER/FatFs/source/ff.c **** 
1154:DRIVER/FatFs/source/ff.c **** 
1155:DRIVER/FatFs/source/ff.c **** 
1156:DRIVER/FatFs/source/ff.c **** 
1157:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
1158:DRIVER/FatFs/source/ff.c **** /* FAT access - Read value of an FAT entry                               */
1159:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
1160:DRIVER/FatFs/source/ff.c **** 
1161:DRIVER/FatFs/source/ff.c **** static DWORD get_fat (		/* 0xFFFFFFFF:Disk error, 1:Internal error, 2..0x7FFFFFFF:Cluster status */
1162:DRIVER/FatFs/source/ff.c **** 	FFOBJID* obj,	/* Corresponding object */
1163:DRIVER/FatFs/source/ff.c **** 	DWORD clst		/* Cluster number to get the value */
1164:DRIVER/FatFs/source/ff.c **** )
1165:DRIVER/FatFs/source/ff.c **** {
1166:DRIVER/FatFs/source/ff.c **** 	UINT wc, bc;
1167:DRIVER/FatFs/source/ff.c **** 	DWORD val;
1168:DRIVER/FatFs/source/ff.c **** 	FATFS *fs = obj->fs;
1169:DRIVER/FatFs/source/ff.c **** 
1170:DRIVER/FatFs/source/ff.c **** 
1171:DRIVER/FatFs/source/ff.c **** 	if (clst < 2 || clst >= fs->n_fatent) {	/* Check if in valid range */
1172:DRIVER/FatFs/source/ff.c **** 		val = 1;	/* Internal error */
1173:DRIVER/FatFs/source/ff.c **** 
1174:DRIVER/FatFs/source/ff.c **** 	} else {
1175:DRIVER/FatFs/source/ff.c **** 		val = 0xFFFFFFFF;	/* Default value falls on disk error */
1176:DRIVER/FatFs/source/ff.c **** 
1177:DRIVER/FatFs/source/ff.c **** 		switch (fs->fs_type) {
1178:DRIVER/FatFs/source/ff.c **** 		case FS_FAT12 :
1179:DRIVER/FatFs/source/ff.c **** 			bc = (UINT)clst; bc += bc / 2;
1180:DRIVER/FatFs/source/ff.c **** 			if (move_window(fs, fs->fatbase + (bc / SS(fs))) != FR_OK) break;
1181:DRIVER/FatFs/source/ff.c **** 			wc = fs->win[bc++ % SS(fs)];		/* Get 1st byte of the entry */
1182:DRIVER/FatFs/source/ff.c **** 			if (move_window(fs, fs->fatbase + (bc / SS(fs))) != FR_OK) break;
1183:DRIVER/FatFs/source/ff.c **** 			wc |= fs->win[bc % SS(fs)] << 8;	/* Merge 2nd byte of the entry */
1184:DRIVER/FatFs/source/ff.c **** 			val = (clst & 1) ? (wc >> 4) : (wc & 0xFFF);	/* Adjust bit position */
1185:DRIVER/FatFs/source/ff.c **** 			break;
1186:DRIVER/FatFs/source/ff.c **** 
1187:DRIVER/FatFs/source/ff.c **** 		case FS_FAT16 :
1188:DRIVER/FatFs/source/ff.c **** 			if (move_window(fs, fs->fatbase + (clst / (SS(fs) / 2))) != FR_OK) break;
1189:DRIVER/FatFs/source/ff.c **** 			val = ld_word(fs->win + clst * 2 % SS(fs));		/* Simple WORD array */
1190:DRIVER/FatFs/source/ff.c **** 			break;
1191:DRIVER/FatFs/source/ff.c **** 
1192:DRIVER/FatFs/source/ff.c **** 		case FS_FAT32 :
1193:DRIVER/FatFs/source/ff.c **** 			if (move_window(fs, fs->fatbase + (clst / (SS(fs) / 4))) != FR_OK) break;
1194:DRIVER/FatFs/source/ff.c **** 			val = ld_dword(fs->win + clst * 4 % SS(fs)) & 0x0FFFFFFF;	/* Simple DWORD array but mask out upp
1195:DRIVER/FatFs/source/ff.c **** 			break;
1196:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
1197:DRIVER/FatFs/source/ff.c **** 		case FS_EXFAT :
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 35


1198:DRIVER/FatFs/source/ff.c **** 			if ((obj->objsize != 0 && obj->sclust != 0) || obj->stat == 0) {	/* Object except root dir must 
1199:DRIVER/FatFs/source/ff.c **** 				DWORD cofs = clst - obj->sclust;	/* Offset from start cluster */
1200:DRIVER/FatFs/source/ff.c **** 				DWORD clen = (DWORD)((LBA_t)((obj->objsize - 1) / SS(fs)) / fs->csize);	/* Number of clusters -
1201:DRIVER/FatFs/source/ff.c **** 
1202:DRIVER/FatFs/source/ff.c **** 				if (obj->stat == 2 && cofs <= clen) {	/* Is it a contiguous chain? */
1203:DRIVER/FatFs/source/ff.c **** 					val = (cofs == clen) ? 0x7FFFFFFF : clst + 1;	/* No data on the FAT, generate the value */
1204:DRIVER/FatFs/source/ff.c **** 					break;
1205:DRIVER/FatFs/source/ff.c **** 				}
1206:DRIVER/FatFs/source/ff.c **** 				if (obj->stat == 3 && cofs < obj->n_cont) {	/* Is it in the 1st fragment? */
1207:DRIVER/FatFs/source/ff.c **** 					val = clst + 1; 	/* Generate the value */
1208:DRIVER/FatFs/source/ff.c **** 					break;
1209:DRIVER/FatFs/source/ff.c **** 				}
1210:DRIVER/FatFs/source/ff.c **** 				if (obj->stat != 2) {	/* Get value from FAT if FAT chain is valid */
1211:DRIVER/FatFs/source/ff.c **** 					if (obj->n_frag != 0) {	/* Is it on the growing edge? */
1212:DRIVER/FatFs/source/ff.c **** 						val = 0x7FFFFFFF;	/* Generate EOC */
1213:DRIVER/FatFs/source/ff.c **** 					} else {
1214:DRIVER/FatFs/source/ff.c **** 						if (move_window(fs, fs->fatbase + (clst / (SS(fs) / 4))) != FR_OK) break;
1215:DRIVER/FatFs/source/ff.c **** 						val = ld_dword(fs->win + clst * 4 % SS(fs)) & 0x7FFFFFFF;
1216:DRIVER/FatFs/source/ff.c **** 					}
1217:DRIVER/FatFs/source/ff.c **** 					break;
1218:DRIVER/FatFs/source/ff.c **** 				}
1219:DRIVER/FatFs/source/ff.c **** 			}
1220:DRIVER/FatFs/source/ff.c **** 			val = 1;	/* Internal error */
1221:DRIVER/FatFs/source/ff.c **** 			break;
1222:DRIVER/FatFs/source/ff.c **** #endif
1223:DRIVER/FatFs/source/ff.c **** 		default:
1224:DRIVER/FatFs/source/ff.c **** 			val = 1;	/* Internal error */
1225:DRIVER/FatFs/source/ff.c **** 		}
1226:DRIVER/FatFs/source/ff.c **** 	}
1227:DRIVER/FatFs/source/ff.c **** 
1228:DRIVER/FatFs/source/ff.c **** 	return val;
1229:DRIVER/FatFs/source/ff.c **** }
1230:DRIVER/FatFs/source/ff.c **** 
1231:DRIVER/FatFs/source/ff.c **** 
1232:DRIVER/FatFs/source/ff.c **** 
1233:DRIVER/FatFs/source/ff.c **** 
1234:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY
1235:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
1236:DRIVER/FatFs/source/ff.c **** /* FAT access - Change value of an FAT entry                             */
1237:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
1238:DRIVER/FatFs/source/ff.c **** 
1239:DRIVER/FatFs/source/ff.c **** static FRESULT put_fat (	/* FR_OK(0):succeeded, !=0:error */
1240:DRIVER/FatFs/source/ff.c **** 	FATFS* fs,		/* Corresponding filesystem object */
1241:DRIVER/FatFs/source/ff.c **** 	DWORD clst,		/* FAT index number (cluster number) to be changed */
1242:DRIVER/FatFs/source/ff.c **** 	DWORD val		/* New value to be set to the entry */
1243:DRIVER/FatFs/source/ff.c **** )
1244:DRIVER/FatFs/source/ff.c **** {
1245:DRIVER/FatFs/source/ff.c **** 	UINT bc;
1246:DRIVER/FatFs/source/ff.c **** 	BYTE *p;
1247:DRIVER/FatFs/source/ff.c **** 	FRESULT res = FR_INT_ERR;
1248:DRIVER/FatFs/source/ff.c **** 
1249:DRIVER/FatFs/source/ff.c **** 
1250:DRIVER/FatFs/source/ff.c **** 	if (clst >= 2 && clst < fs->n_fatent) {	/* Check if in valid range */
1251:DRIVER/FatFs/source/ff.c **** 		switch (fs->fs_type) {
1252:DRIVER/FatFs/source/ff.c **** 		case FS_FAT12:
1253:DRIVER/FatFs/source/ff.c **** 			bc = (UINT)clst; bc += bc / 2;	/* bc: byte offset of the entry */
1254:DRIVER/FatFs/source/ff.c **** 			res = move_window(fs, fs->fatbase + (bc / SS(fs)));
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 36


1255:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) break;
1256:DRIVER/FatFs/source/ff.c **** 			p = fs->win + bc++ % SS(fs);
1257:DRIVER/FatFs/source/ff.c **** 			*p = (clst & 1) ? ((*p & 0x0F) | ((BYTE)val << 4)) : (BYTE)val;	/* Update 1st byte */
1258:DRIVER/FatFs/source/ff.c **** 			fs->wflag = 1;
1259:DRIVER/FatFs/source/ff.c **** 			res = move_window(fs, fs->fatbase + (bc / SS(fs)));
1260:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) break;
1261:DRIVER/FatFs/source/ff.c **** 			p = fs->win + bc % SS(fs);
1262:DRIVER/FatFs/source/ff.c **** 			*p = (clst & 1) ? (BYTE)(val >> 4) : ((*p & 0xF0) | ((BYTE)(val >> 8) & 0x0F));	/* Update 2nd by
1263:DRIVER/FatFs/source/ff.c **** 			fs->wflag = 1;
1264:DRIVER/FatFs/source/ff.c **** 			break;
1265:DRIVER/FatFs/source/ff.c **** 
1266:DRIVER/FatFs/source/ff.c **** 		case FS_FAT16:
1267:DRIVER/FatFs/source/ff.c **** 			res = move_window(fs, fs->fatbase + (clst / (SS(fs) / 2)));
1268:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) break;
1269:DRIVER/FatFs/source/ff.c **** 			st_word(fs->win + clst * 2 % SS(fs), (WORD)val);	/* Simple WORD array */
1270:DRIVER/FatFs/source/ff.c **** 			fs->wflag = 1;
1271:DRIVER/FatFs/source/ff.c **** 			break;
1272:DRIVER/FatFs/source/ff.c **** 
1273:DRIVER/FatFs/source/ff.c **** 		case FS_FAT32:
1274:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
1275:DRIVER/FatFs/source/ff.c **** 		case FS_EXFAT:
1276:DRIVER/FatFs/source/ff.c **** #endif
1277:DRIVER/FatFs/source/ff.c **** 			res = move_window(fs, fs->fatbase + (clst / (SS(fs) / 4)));
1278:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) break;
1279:DRIVER/FatFs/source/ff.c **** 			if (!FF_FS_EXFAT || fs->fs_type != FS_EXFAT) {
1280:DRIVER/FatFs/source/ff.c **** 				val = (val & 0x0FFFFFFF) | (ld_dword(fs->win + clst * 4 % SS(fs)) & 0xF0000000);
1281:DRIVER/FatFs/source/ff.c **** 			}
1282:DRIVER/FatFs/source/ff.c **** 			st_dword(fs->win + clst * 4 % SS(fs), val);
1283:DRIVER/FatFs/source/ff.c **** 			fs->wflag = 1;
1284:DRIVER/FatFs/source/ff.c **** 			break;
1285:DRIVER/FatFs/source/ff.c **** 		}
1286:DRIVER/FatFs/source/ff.c **** 	}
1287:DRIVER/FatFs/source/ff.c **** 	return res;
1288:DRIVER/FatFs/source/ff.c **** }
1289:DRIVER/FatFs/source/ff.c **** 
1290:DRIVER/FatFs/source/ff.c **** #endif /* !FF_FS_READONLY */
1291:DRIVER/FatFs/source/ff.c **** 
1292:DRIVER/FatFs/source/ff.c **** 
1293:DRIVER/FatFs/source/ff.c **** 
1294:DRIVER/FatFs/source/ff.c **** 
1295:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT && !FF_FS_READONLY
1296:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
1297:DRIVER/FatFs/source/ff.c **** /* exFAT: Accessing FAT and Allocation Bitmap                            */
1298:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
1299:DRIVER/FatFs/source/ff.c **** 
1300:DRIVER/FatFs/source/ff.c **** /*--------------------------------------*/
1301:DRIVER/FatFs/source/ff.c **** /* Find a contiguous free cluster block */
1302:DRIVER/FatFs/source/ff.c **** /*--------------------------------------*/
1303:DRIVER/FatFs/source/ff.c **** 
1304:DRIVER/FatFs/source/ff.c **** static DWORD find_bitmap (	/* 0:Not found, 2..:Cluster block found, 0xFFFFFFFF:Disk error */
1305:DRIVER/FatFs/source/ff.c **** 	FATFS* fs,	/* Filesystem object */
1306:DRIVER/FatFs/source/ff.c **** 	DWORD clst,	/* Cluster number to scan from */
1307:DRIVER/FatFs/source/ff.c **** 	DWORD ncl	/* Number of contiguous clusters to find (1..) */
1308:DRIVER/FatFs/source/ff.c **** )
1309:DRIVER/FatFs/source/ff.c **** {
1310:DRIVER/FatFs/source/ff.c **** 	BYTE bm, bv;
1311:DRIVER/FatFs/source/ff.c **** 	UINT i;
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 37


1312:DRIVER/FatFs/source/ff.c **** 	DWORD val, scl, ctr;
1313:DRIVER/FatFs/source/ff.c **** 
1314:DRIVER/FatFs/source/ff.c **** 
1315:DRIVER/FatFs/source/ff.c **** 	clst -= 2;	/* The first bit in the bitmap corresponds to cluster #2 */
1316:DRIVER/FatFs/source/ff.c **** 	if (clst >= fs->n_fatent - 2) clst = 0;
1317:DRIVER/FatFs/source/ff.c **** 	scl = val = clst; ctr = 0;
1318:DRIVER/FatFs/source/ff.c **** 	for (;;) {
1319:DRIVER/FatFs/source/ff.c **** 		if (move_window(fs, fs->bitbase + val / 8 / SS(fs)) != FR_OK) return 0xFFFFFFFF;
1320:DRIVER/FatFs/source/ff.c **** 		i = val / 8 % SS(fs); bm = 1 << (val % 8);
1321:DRIVER/FatFs/source/ff.c **** 		do {
1322:DRIVER/FatFs/source/ff.c **** 			do {
1323:DRIVER/FatFs/source/ff.c **** 				bv = fs->win[i] & bm; bm <<= 1;		/* Get bit value */
1324:DRIVER/FatFs/source/ff.c **** 				if (++val >= fs->n_fatent - 2) {	/* Next cluster (with wrap-around) */
1325:DRIVER/FatFs/source/ff.c **** 					val = 0; bm = 0; i = SS(fs);
1326:DRIVER/FatFs/source/ff.c **** 				}
1327:DRIVER/FatFs/source/ff.c **** 				if (bv == 0) {	/* Is it a free cluster? */
1328:DRIVER/FatFs/source/ff.c **** 					if (++ctr == ncl) return scl + 2;	/* Check if run length is sufficient for required */
1329:DRIVER/FatFs/source/ff.c **** 				} else {
1330:DRIVER/FatFs/source/ff.c **** 					scl = val; ctr = 0;		/* Encountered a cluster in-use, restart to scan */
1331:DRIVER/FatFs/source/ff.c **** 				}
1332:DRIVER/FatFs/source/ff.c **** 				if (val == clst) return 0;	/* All cluster scanned? */
1333:DRIVER/FatFs/source/ff.c **** 			} while (bm != 0);
1334:DRIVER/FatFs/source/ff.c **** 			bm = 1;
1335:DRIVER/FatFs/source/ff.c **** 		} while (++i < SS(fs));
1336:DRIVER/FatFs/source/ff.c **** 	}
1337:DRIVER/FatFs/source/ff.c **** }
1338:DRIVER/FatFs/source/ff.c **** 
1339:DRIVER/FatFs/source/ff.c **** 
1340:DRIVER/FatFs/source/ff.c **** /*----------------------------------------*/
1341:DRIVER/FatFs/source/ff.c **** /* Set/Clear a block of allocation bitmap */
1342:DRIVER/FatFs/source/ff.c **** /*----------------------------------------*/
1343:DRIVER/FatFs/source/ff.c **** 
1344:DRIVER/FatFs/source/ff.c **** static FRESULT change_bitmap (
1345:DRIVER/FatFs/source/ff.c **** 	FATFS* fs,	/* Filesystem object */
1346:DRIVER/FatFs/source/ff.c **** 	DWORD clst,	/* Cluster number to change from */
1347:DRIVER/FatFs/source/ff.c **** 	DWORD ncl,	/* Number of clusters to be changed */
1348:DRIVER/FatFs/source/ff.c **** 	int bv		/* bit value to be set (0 or 1) */
1349:DRIVER/FatFs/source/ff.c **** )
1350:DRIVER/FatFs/source/ff.c **** {
1351:DRIVER/FatFs/source/ff.c **** 	BYTE bm;
1352:DRIVER/FatFs/source/ff.c **** 	UINT i;
1353:DRIVER/FatFs/source/ff.c **** 	LBA_t sect;
1354:DRIVER/FatFs/source/ff.c **** 
1355:DRIVER/FatFs/source/ff.c **** 
1356:DRIVER/FatFs/source/ff.c **** 	clst -= 2;	/* The first bit corresponds to cluster #2 */
1357:DRIVER/FatFs/source/ff.c **** 	sect = fs->bitbase + clst / 8 / SS(fs);	/* Sector address */
1358:DRIVER/FatFs/source/ff.c **** 	i = clst / 8 % SS(fs);					/* Byte offset in the sector */
1359:DRIVER/FatFs/source/ff.c **** 	bm = 1 << (clst % 8);					/* Bit mask in the byte */
1360:DRIVER/FatFs/source/ff.c **** 	for (;;) {
1361:DRIVER/FatFs/source/ff.c **** 		if (move_window(fs, sect++) != FR_OK) return FR_DISK_ERR;
1362:DRIVER/FatFs/source/ff.c **** 		do {
1363:DRIVER/FatFs/source/ff.c **** 			do {
1364:DRIVER/FatFs/source/ff.c **** 				if (bv == (int)((fs->win[i] & bm) != 0)) return FR_INT_ERR;	/* Is the bit expected value? */
1365:DRIVER/FatFs/source/ff.c **** 				fs->win[i] ^= bm;	/* Flip the bit */
1366:DRIVER/FatFs/source/ff.c **** 				fs->wflag = 1;
1367:DRIVER/FatFs/source/ff.c **** 				if (--ncl == 0) return FR_OK;	/* All bits processed? */
1368:DRIVER/FatFs/source/ff.c **** 			} while (bm <<= 1);		/* Next bit */
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 38


1369:DRIVER/FatFs/source/ff.c **** 			bm = 1;
1370:DRIVER/FatFs/source/ff.c **** 		} while (++i < SS(fs));		/* Next byte */
1371:DRIVER/FatFs/source/ff.c **** 		i = 0;
1372:DRIVER/FatFs/source/ff.c **** 	}
1373:DRIVER/FatFs/source/ff.c **** }
1374:DRIVER/FatFs/source/ff.c **** 
1375:DRIVER/FatFs/source/ff.c **** 
1376:DRIVER/FatFs/source/ff.c **** /*---------------------------------------------*/
1377:DRIVER/FatFs/source/ff.c **** /* Fill the first fragment of the FAT chain    */
1378:DRIVER/FatFs/source/ff.c **** /*---------------------------------------------*/
1379:DRIVER/FatFs/source/ff.c **** 
1380:DRIVER/FatFs/source/ff.c **** static FRESULT fill_first_frag (
1381:DRIVER/FatFs/source/ff.c **** 	FFOBJID* obj	/* Pointer to the corresponding object */
1382:DRIVER/FatFs/source/ff.c **** )
1383:DRIVER/FatFs/source/ff.c **** {
1384:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
1385:DRIVER/FatFs/source/ff.c **** 	DWORD cl, n;
1386:DRIVER/FatFs/source/ff.c **** 
1387:DRIVER/FatFs/source/ff.c **** 
1388:DRIVER/FatFs/source/ff.c **** 	if (obj->stat == 3) {	/* Has the object been changed 'fragmented' in this session? */
1389:DRIVER/FatFs/source/ff.c **** 		for (cl = obj->sclust, n = obj->n_cont; n; cl++, n--) {	/* Create cluster chain on the FAT */
1390:DRIVER/FatFs/source/ff.c **** 			res = put_fat(obj->fs, cl, cl + 1);
1391:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) return res;
1392:DRIVER/FatFs/source/ff.c **** 		}
1393:DRIVER/FatFs/source/ff.c **** 		obj->stat = 0;	/* Change status 'FAT chain is valid' */
1394:DRIVER/FatFs/source/ff.c **** 	}
1395:DRIVER/FatFs/source/ff.c **** 	return FR_OK;
1396:DRIVER/FatFs/source/ff.c **** }
1397:DRIVER/FatFs/source/ff.c **** 
1398:DRIVER/FatFs/source/ff.c **** 
1399:DRIVER/FatFs/source/ff.c **** /*---------------------------------------------*/
1400:DRIVER/FatFs/source/ff.c **** /* Fill the last fragment of the FAT chain     */
1401:DRIVER/FatFs/source/ff.c **** /*---------------------------------------------*/
1402:DRIVER/FatFs/source/ff.c **** 
1403:DRIVER/FatFs/source/ff.c **** static FRESULT fill_last_frag (
1404:DRIVER/FatFs/source/ff.c **** 	FFOBJID* obj,	/* Pointer to the corresponding object */
1405:DRIVER/FatFs/source/ff.c **** 	DWORD lcl,		/* Last cluster of the fragment */
1406:DRIVER/FatFs/source/ff.c **** 	DWORD term		/* Value to set the last FAT entry */
1407:DRIVER/FatFs/source/ff.c **** )
1408:DRIVER/FatFs/source/ff.c **** {
1409:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
1410:DRIVER/FatFs/source/ff.c **** 
1411:DRIVER/FatFs/source/ff.c **** 
1412:DRIVER/FatFs/source/ff.c **** 	while (obj->n_frag > 0) {	/* Create the chain of last fragment */
1413:DRIVER/FatFs/source/ff.c **** 		res = put_fat(obj->fs, lcl - obj->n_frag + 1, (obj->n_frag > 1) ? lcl - obj->n_frag + 2 : term);
1414:DRIVER/FatFs/source/ff.c **** 		if (res != FR_OK) return res;
1415:DRIVER/FatFs/source/ff.c **** 		obj->n_frag--;
1416:DRIVER/FatFs/source/ff.c **** 	}
1417:DRIVER/FatFs/source/ff.c **** 	return FR_OK;
1418:DRIVER/FatFs/source/ff.c **** }
1419:DRIVER/FatFs/source/ff.c **** 
1420:DRIVER/FatFs/source/ff.c **** #endif	/* FF_FS_EXFAT && !FF_FS_READONLY */
1421:DRIVER/FatFs/source/ff.c **** 
1422:DRIVER/FatFs/source/ff.c **** 
1423:DRIVER/FatFs/source/ff.c **** 
1424:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY
1425:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 39


1426:DRIVER/FatFs/source/ff.c **** /* FAT handling - Remove a cluster chain                                 */
1427:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
1428:DRIVER/FatFs/source/ff.c **** 
1429:DRIVER/FatFs/source/ff.c **** static FRESULT remove_chain (	/* FR_OK(0):succeeded, !=0:error */
1430:DRIVER/FatFs/source/ff.c **** 	FFOBJID* obj,		/* Corresponding object */
1431:DRIVER/FatFs/source/ff.c **** 	DWORD clst,			/* Cluster to remove a chain from */
1432:DRIVER/FatFs/source/ff.c **** 	DWORD pclst			/* Previous cluster of clst (0 if entire chain) */
1433:DRIVER/FatFs/source/ff.c **** )
1434:DRIVER/FatFs/source/ff.c **** {
1435:DRIVER/FatFs/source/ff.c **** 	FRESULT res = FR_OK;
1436:DRIVER/FatFs/source/ff.c **** 	DWORD nxt;
1437:DRIVER/FatFs/source/ff.c **** 	FATFS *fs = obj->fs;
1438:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT || FF_USE_TRIM
1439:DRIVER/FatFs/source/ff.c **** 	DWORD scl = clst, ecl = clst;
1440:DRIVER/FatFs/source/ff.c **** #endif
1441:DRIVER/FatFs/source/ff.c **** #if FF_USE_TRIM
1442:DRIVER/FatFs/source/ff.c **** 	LBA_t rt[2];
1443:DRIVER/FatFs/source/ff.c **** #endif
1444:DRIVER/FatFs/source/ff.c **** 
1445:DRIVER/FatFs/source/ff.c **** 	if (clst < 2 || clst >= fs->n_fatent) return FR_INT_ERR;	/* Check if in valid range */
1446:DRIVER/FatFs/source/ff.c **** 
1447:DRIVER/FatFs/source/ff.c **** 	/* Mark the previous cluster 'EOC' on the FAT if it exists */
1448:DRIVER/FatFs/source/ff.c **** 	if (pclst != 0 && (!FF_FS_EXFAT || fs->fs_type != FS_EXFAT || obj->stat != 2)) {
1449:DRIVER/FatFs/source/ff.c **** 		res = put_fat(fs, pclst, 0xFFFFFFFF);
1450:DRIVER/FatFs/source/ff.c **** 		if (res != FR_OK) return res;
1451:DRIVER/FatFs/source/ff.c **** 	}
1452:DRIVER/FatFs/source/ff.c **** 
1453:DRIVER/FatFs/source/ff.c **** 	/* Remove the chain */
1454:DRIVER/FatFs/source/ff.c **** 	do {
1455:DRIVER/FatFs/source/ff.c **** 		nxt = get_fat(obj, clst);			/* Get cluster status */
1456:DRIVER/FatFs/source/ff.c **** 		if (nxt == 0) break;				/* Empty cluster? */
1457:DRIVER/FatFs/source/ff.c **** 		if (nxt == 1) return FR_INT_ERR;	/* Internal error? */
1458:DRIVER/FatFs/source/ff.c **** 		if (nxt == 0xFFFFFFFF) return FR_DISK_ERR;	/* Disk error? */
1459:DRIVER/FatFs/source/ff.c **** 		if (!FF_FS_EXFAT || fs->fs_type != FS_EXFAT) {
1460:DRIVER/FatFs/source/ff.c **** 			res = put_fat(fs, clst, 0);		/* Mark the cluster 'free' on the FAT */
1461:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) return res;
1462:DRIVER/FatFs/source/ff.c **** 		}
1463:DRIVER/FatFs/source/ff.c **** 		if (fs->free_clst < fs->n_fatent - 2) {	/* Update FSINFO */
1464:DRIVER/FatFs/source/ff.c **** 			fs->free_clst++;
1465:DRIVER/FatFs/source/ff.c **** 			fs->fsi_flag |= 1;
1466:DRIVER/FatFs/source/ff.c **** 		}
1467:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT || FF_USE_TRIM
1468:DRIVER/FatFs/source/ff.c **** 		if (ecl + 1 == nxt) {	/* Is next cluster contiguous? */
1469:DRIVER/FatFs/source/ff.c **** 			ecl = nxt;
1470:DRIVER/FatFs/source/ff.c **** 		} else {				/* End of contiguous cluster block */
1471:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
1472:DRIVER/FatFs/source/ff.c **** 			if (fs->fs_type == FS_EXFAT) {
1473:DRIVER/FatFs/source/ff.c **** 				res = change_bitmap(fs, scl, ecl - scl + 1, 0);	/* Mark the cluster block 'free' on the bitmap 
1474:DRIVER/FatFs/source/ff.c **** 				if (res != FR_OK) return res;
1475:DRIVER/FatFs/source/ff.c **** 			}
1476:DRIVER/FatFs/source/ff.c **** #endif
1477:DRIVER/FatFs/source/ff.c **** #if FF_USE_TRIM
1478:DRIVER/FatFs/source/ff.c **** 			rt[0] = clst2sect(fs, scl);					/* Start of data area to be freed */
1479:DRIVER/FatFs/source/ff.c **** 			rt[1] = clst2sect(fs, ecl) + fs->csize - 1;	/* End of data area to be freed */
1480:DRIVER/FatFs/source/ff.c **** 			disk_ioctl(fs->pdrv, CTRL_TRIM, rt);		/* Inform storage device that the data in the block may be
1481:DRIVER/FatFs/source/ff.c **** #endif
1482:DRIVER/FatFs/source/ff.c **** 			scl = ecl = nxt;
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 40


1483:DRIVER/FatFs/source/ff.c **** 		}
1484:DRIVER/FatFs/source/ff.c **** #endif
1485:DRIVER/FatFs/source/ff.c **** 		clst = nxt;					/* Next cluster */
1486:DRIVER/FatFs/source/ff.c **** 	} while (clst < fs->n_fatent);	/* Repeat while not the last link */
1487:DRIVER/FatFs/source/ff.c **** 
1488:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
1489:DRIVER/FatFs/source/ff.c **** 	/* Some post processes for chain status */
1490:DRIVER/FatFs/source/ff.c **** 	if (fs->fs_type == FS_EXFAT) {
1491:DRIVER/FatFs/source/ff.c **** 		if (pclst == 0) {	/* Has the entire chain been removed? */
1492:DRIVER/FatFs/source/ff.c **** 			obj->stat = 0;		/* Change the chain status 'initial' */
1493:DRIVER/FatFs/source/ff.c **** 		} else {
1494:DRIVER/FatFs/source/ff.c **** 			if (obj->stat == 0) {	/* Is it a fragmented chain from the beginning of this session? */
1495:DRIVER/FatFs/source/ff.c **** 				clst = obj->sclust;		/* Follow the chain to check if it gets contiguous */
1496:DRIVER/FatFs/source/ff.c **** 				while (clst != pclst) {
1497:DRIVER/FatFs/source/ff.c **** 					nxt = get_fat(obj, clst);
1498:DRIVER/FatFs/source/ff.c **** 					if (nxt < 2) return FR_INT_ERR;
1499:DRIVER/FatFs/source/ff.c **** 					if (nxt == 0xFFFFFFFF) return FR_DISK_ERR;
1500:DRIVER/FatFs/source/ff.c **** 					if (nxt != clst + 1) break;	/* Not contiguous? */
1501:DRIVER/FatFs/source/ff.c **** 					clst++;
1502:DRIVER/FatFs/source/ff.c **** 				}
1503:DRIVER/FatFs/source/ff.c **** 				if (clst == pclst) {	/* Has the chain got contiguous again? */
1504:DRIVER/FatFs/source/ff.c **** 					obj->stat = 2;		/* Change the chain status 'contiguous' */
1505:DRIVER/FatFs/source/ff.c **** 				}
1506:DRIVER/FatFs/source/ff.c **** 			} else {
1507:DRIVER/FatFs/source/ff.c **** 				if (obj->stat == 3 && pclst >= obj->sclust && pclst <= obj->sclust + obj->n_cont) {	/* Was the 
1508:DRIVER/FatFs/source/ff.c **** 					obj->stat = 2;	/* Change the chain status 'contiguous' */
1509:DRIVER/FatFs/source/ff.c **** 				}
1510:DRIVER/FatFs/source/ff.c **** 			}
1511:DRIVER/FatFs/source/ff.c **** 		}
1512:DRIVER/FatFs/source/ff.c **** 	}
1513:DRIVER/FatFs/source/ff.c **** #endif
1514:DRIVER/FatFs/source/ff.c **** 	return FR_OK;
1515:DRIVER/FatFs/source/ff.c **** }
1516:DRIVER/FatFs/source/ff.c **** 
1517:DRIVER/FatFs/source/ff.c **** 
1518:DRIVER/FatFs/source/ff.c **** 
1519:DRIVER/FatFs/source/ff.c **** 
1520:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
1521:DRIVER/FatFs/source/ff.c **** /* FAT handling - Stretch a chain or Create a new chain                  */
1522:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
1523:DRIVER/FatFs/source/ff.c **** 
1524:DRIVER/FatFs/source/ff.c **** static DWORD create_chain (	/* 0:No free cluster, 1:Internal error, 0xFFFFFFFF:Disk error, >=2:New 
1525:DRIVER/FatFs/source/ff.c **** 	FFOBJID* obj,		/* Corresponding object */
1526:DRIVER/FatFs/source/ff.c **** 	DWORD clst			/* Cluster# to stretch, 0:Create a new chain */
1527:DRIVER/FatFs/source/ff.c **** )
1528:DRIVER/FatFs/source/ff.c **** {
1529:DRIVER/FatFs/source/ff.c **** 	DWORD cs, ncl, scl;
1530:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
1531:DRIVER/FatFs/source/ff.c **** 	FATFS *fs = obj->fs;
1532:DRIVER/FatFs/source/ff.c **** 
1533:DRIVER/FatFs/source/ff.c **** 
1534:DRIVER/FatFs/source/ff.c **** 	if (clst == 0) {	/* Create a new chain */
1535:DRIVER/FatFs/source/ff.c **** 		scl = fs->last_clst;				/* Suggested cluster to start to find */
1536:DRIVER/FatFs/source/ff.c **** 		if (scl == 0 || scl >= fs->n_fatent) scl = 1;
1537:DRIVER/FatFs/source/ff.c **** 	}
1538:DRIVER/FatFs/source/ff.c **** 	else {				/* Stretch a chain */
1539:DRIVER/FatFs/source/ff.c **** 		cs = get_fat(obj, clst);			/* Check the cluster status */
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 41


1540:DRIVER/FatFs/source/ff.c **** 		if (cs < 2) return 1;				/* Test for insanity */
1541:DRIVER/FatFs/source/ff.c **** 		if (cs == 0xFFFFFFFF) return cs;	/* Test for disk error */
1542:DRIVER/FatFs/source/ff.c **** 		if (cs < fs->n_fatent) return cs;	/* It is already followed by next cluster */
1543:DRIVER/FatFs/source/ff.c **** 		scl = clst;							/* Cluster to start to find */
1544:DRIVER/FatFs/source/ff.c **** 	}
1545:DRIVER/FatFs/source/ff.c **** 	if (fs->free_clst == 0) return 0;		/* No free cluster */
1546:DRIVER/FatFs/source/ff.c **** 
1547:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
1548:DRIVER/FatFs/source/ff.c **** 	if (fs->fs_type == FS_EXFAT) {	/* On the exFAT volume */
1549:DRIVER/FatFs/source/ff.c **** 		ncl = find_bitmap(fs, scl, 1);				/* Find a free cluster */
1550:DRIVER/FatFs/source/ff.c **** 		if (ncl == 0 || ncl == 0xFFFFFFFF) return ncl;	/* No free cluster or hard error? */
1551:DRIVER/FatFs/source/ff.c **** 		res = change_bitmap(fs, ncl, 1, 1);			/* Mark the cluster 'in use' */
1552:DRIVER/FatFs/source/ff.c **** 		if (res == FR_INT_ERR) return 1;
1553:DRIVER/FatFs/source/ff.c **** 		if (res == FR_DISK_ERR) return 0xFFFFFFFF;
1554:DRIVER/FatFs/source/ff.c **** 		if (clst == 0) {							/* Is it a new chain? */
1555:DRIVER/FatFs/source/ff.c **** 			obj->stat = 2;							/* Set status 'contiguous' */
1556:DRIVER/FatFs/source/ff.c **** 		} else {									/* It is a stretched chain */
1557:DRIVER/FatFs/source/ff.c **** 			if (obj->stat == 2 && ncl != scl + 1) {	/* Is the chain got fragmented? */
1558:DRIVER/FatFs/source/ff.c **** 				obj->n_cont = scl - obj->sclust;	/* Set size of the contiguous part */
1559:DRIVER/FatFs/source/ff.c **** 				obj->stat = 3;						/* Change status 'just fragmented' */
1560:DRIVER/FatFs/source/ff.c **** 			}
1561:DRIVER/FatFs/source/ff.c **** 		}
1562:DRIVER/FatFs/source/ff.c **** 		if (obj->stat != 2) {	/* Is the file non-contiguous? */
1563:DRIVER/FatFs/source/ff.c **** 			if (ncl == clst + 1) {	/* Is the cluster next to previous one? */
1564:DRIVER/FatFs/source/ff.c **** 				obj->n_frag = obj->n_frag ? obj->n_frag + 1 : 2;	/* Increment size of last framgent */
1565:DRIVER/FatFs/source/ff.c **** 			} else {				/* New fragment */
1566:DRIVER/FatFs/source/ff.c **** 				if (obj->n_frag == 0) obj->n_frag = 1;
1567:DRIVER/FatFs/source/ff.c **** 				res = fill_last_frag(obj, clst, ncl);	/* Fill last fragment on the FAT and link it to new one *
1568:DRIVER/FatFs/source/ff.c **** 				if (res == FR_OK) obj->n_frag = 1;
1569:DRIVER/FatFs/source/ff.c **** 			}
1570:DRIVER/FatFs/source/ff.c **** 		}
1571:DRIVER/FatFs/source/ff.c **** 	} else
1572:DRIVER/FatFs/source/ff.c **** #endif
1573:DRIVER/FatFs/source/ff.c **** 	{	/* On the FAT/FAT32 volume */
1574:DRIVER/FatFs/source/ff.c **** 		ncl = 0;
1575:DRIVER/FatFs/source/ff.c **** 		if (scl == clst) {						/* Stretching an existing chain? */
1576:DRIVER/FatFs/source/ff.c **** 			ncl = scl + 1;						/* Test if next cluster is free */
1577:DRIVER/FatFs/source/ff.c **** 			if (ncl >= fs->n_fatent) ncl = 2;
1578:DRIVER/FatFs/source/ff.c **** 			cs = get_fat(obj, ncl);				/* Get next cluster status */
1579:DRIVER/FatFs/source/ff.c **** 			if (cs == 1 || cs == 0xFFFFFFFF) return cs;	/* Test for error */
1580:DRIVER/FatFs/source/ff.c **** 			if (cs != 0) {						/* Not free? */
1581:DRIVER/FatFs/source/ff.c **** 				cs = fs->last_clst;				/* Start at suggested cluster if it is valid */
1582:DRIVER/FatFs/source/ff.c **** 				if (cs >= 2 && cs < fs->n_fatent) scl = cs;
1583:DRIVER/FatFs/source/ff.c **** 				ncl = 0;
1584:DRIVER/FatFs/source/ff.c **** 			}
1585:DRIVER/FatFs/source/ff.c **** 		}
1586:DRIVER/FatFs/source/ff.c **** 		if (ncl == 0) {	/* The new cluster cannot be contiguous and find another fragment */
1587:DRIVER/FatFs/source/ff.c **** 			ncl = scl;	/* Start cluster */
1588:DRIVER/FatFs/source/ff.c **** 			for (;;) {
1589:DRIVER/FatFs/source/ff.c **** 				ncl++;							/* Next cluster */
1590:DRIVER/FatFs/source/ff.c **** 				if (ncl >= fs->n_fatent) {		/* Check wrap-around */
1591:DRIVER/FatFs/source/ff.c **** 					ncl = 2;
1592:DRIVER/FatFs/source/ff.c **** 					if (ncl > scl) return 0;	/* No free cluster found? */
1593:DRIVER/FatFs/source/ff.c **** 				}
1594:DRIVER/FatFs/source/ff.c **** 				cs = get_fat(obj, ncl);			/* Get the cluster status */
1595:DRIVER/FatFs/source/ff.c **** 				if (cs == 0) break;				/* Found a free cluster? */
1596:DRIVER/FatFs/source/ff.c **** 				if (cs == 1 || cs == 0xFFFFFFFF) return cs;	/* Test for error */
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 42


1597:DRIVER/FatFs/source/ff.c **** 				if (ncl == scl) return 0;		/* No free cluster found? */
1598:DRIVER/FatFs/source/ff.c **** 			}
1599:DRIVER/FatFs/source/ff.c **** 		}
1600:DRIVER/FatFs/source/ff.c **** 		res = put_fat(fs, ncl, 0xFFFFFFFF);		/* Mark the new cluster 'EOC' */
1601:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK && clst != 0) {
1602:DRIVER/FatFs/source/ff.c **** 			res = put_fat(fs, clst, ncl);		/* Link it from the previous one if needed */
1603:DRIVER/FatFs/source/ff.c **** 		}
1604:DRIVER/FatFs/source/ff.c **** 	}
1605:DRIVER/FatFs/source/ff.c **** 
1606:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {			/* Update FSINFO if function succeeded. */
1607:DRIVER/FatFs/source/ff.c **** 		fs->last_clst = ncl;
1608:DRIVER/FatFs/source/ff.c **** 		if (fs->free_clst <= fs->n_fatent - 2) fs->free_clst--;
1609:DRIVER/FatFs/source/ff.c **** 		fs->fsi_flag |= 1;
1610:DRIVER/FatFs/source/ff.c **** 	} else {
1611:DRIVER/FatFs/source/ff.c **** 		ncl = (res == FR_DISK_ERR) ? 0xFFFFFFFF : 1;	/* Failed. Generate error status */
1612:DRIVER/FatFs/source/ff.c **** 	}
1613:DRIVER/FatFs/source/ff.c **** 
1614:DRIVER/FatFs/source/ff.c **** 	return ncl;		/* Return new cluster number or error status */
1615:DRIVER/FatFs/source/ff.c **** }
1616:DRIVER/FatFs/source/ff.c **** 
1617:DRIVER/FatFs/source/ff.c **** #endif /* !FF_FS_READONLY */
1618:DRIVER/FatFs/source/ff.c **** 
1619:DRIVER/FatFs/source/ff.c **** 
1620:DRIVER/FatFs/source/ff.c **** 
1621:DRIVER/FatFs/source/ff.c **** 
1622:DRIVER/FatFs/source/ff.c **** #if FF_USE_FASTSEEK
1623:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
1624:DRIVER/FatFs/source/ff.c **** /* FAT handling - Convert offset into cluster with link map table        */
1625:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
1626:DRIVER/FatFs/source/ff.c **** 
1627:DRIVER/FatFs/source/ff.c **** static DWORD clmt_clust (	/* <2:Error, >=2:Cluster number */
1628:DRIVER/FatFs/source/ff.c **** 	FIL* fp,		/* Pointer to the file object */
1629:DRIVER/FatFs/source/ff.c **** 	FSIZE_t ofs		/* File offset to be converted to cluster# */
1630:DRIVER/FatFs/source/ff.c **** )
1631:DRIVER/FatFs/source/ff.c **** {
1632:DRIVER/FatFs/source/ff.c **** 	DWORD cl, ncl;
1633:DRIVER/FatFs/source/ff.c **** 	DWORD *tbl;
1634:DRIVER/FatFs/source/ff.c **** 	FATFS *fs = fp->obj.fs;
1635:DRIVER/FatFs/source/ff.c **** 
1636:DRIVER/FatFs/source/ff.c **** 
1637:DRIVER/FatFs/source/ff.c **** 	tbl = fp->cltbl + 1;	/* Top of CLMT */
1638:DRIVER/FatFs/source/ff.c **** 	cl = (DWORD)(ofs / SS(fs) / fs->csize);	/* Cluster order from top of the file */
1639:DRIVER/FatFs/source/ff.c **** 	for (;;) {
1640:DRIVER/FatFs/source/ff.c **** 		ncl = *tbl++;			/* Number of cluters in the fragment */
1641:DRIVER/FatFs/source/ff.c **** 		if (ncl == 0) return 0;	/* End of table? (error) */
1642:DRIVER/FatFs/source/ff.c **** 		if (cl < ncl) break;	/* In this fragment? */
1643:DRIVER/FatFs/source/ff.c **** 		cl -= ncl; tbl++;		/* Next fragment */
1644:DRIVER/FatFs/source/ff.c **** 	}
1645:DRIVER/FatFs/source/ff.c **** 	return cl + *tbl;	/* Return the cluster number */
1646:DRIVER/FatFs/source/ff.c **** }
1647:DRIVER/FatFs/source/ff.c **** 
1648:DRIVER/FatFs/source/ff.c **** #endif	/* FF_USE_FASTSEEK */
1649:DRIVER/FatFs/source/ff.c **** 
1650:DRIVER/FatFs/source/ff.c **** 
1651:DRIVER/FatFs/source/ff.c **** 
1652:DRIVER/FatFs/source/ff.c **** 
1653:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 43


1654:DRIVER/FatFs/source/ff.c **** /* Directory handling - Fill a cluster with zeros                        */
1655:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
1656:DRIVER/FatFs/source/ff.c **** 
1657:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY
1658:DRIVER/FatFs/source/ff.c **** static FRESULT dir_clear (	/* Returns FR_OK or FR_DISK_ERR */
1659:DRIVER/FatFs/source/ff.c **** 	FATFS *fs,		/* Filesystem object */
1660:DRIVER/FatFs/source/ff.c **** 	DWORD clst		/* Directory table to clear */
1661:DRIVER/FatFs/source/ff.c **** )
1662:DRIVER/FatFs/source/ff.c **** {
1663:DRIVER/FatFs/source/ff.c **** 	LBA_t sect;
1664:DRIVER/FatFs/source/ff.c **** 	UINT n, szb;
1665:DRIVER/FatFs/source/ff.c **** 	BYTE *ibuf;
1666:DRIVER/FatFs/source/ff.c **** 
1667:DRIVER/FatFs/source/ff.c **** 
1668:DRIVER/FatFs/source/ff.c **** 	if (sync_window(fs) != FR_OK) return FR_DISK_ERR;	/* Flush disk access window */
1669:DRIVER/FatFs/source/ff.c **** 	sect = clst2sect(fs, clst);		/* Top of the cluster */
1670:DRIVER/FatFs/source/ff.c **** 	fs->winsect = sect;				/* Set window to top of the cluster */
1671:DRIVER/FatFs/source/ff.c **** 	memset(fs->win, 0, sizeof fs->win);	/* Clear window buffer */
1672:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN == 3		/* Quick table clear by using multi-secter write */
1673:DRIVER/FatFs/source/ff.c **** 	/* Allocate a temporary buffer */
1674:DRIVER/FatFs/source/ff.c **** 	for (szb = ((DWORD)fs->csize * SS(fs) >= MAX_MALLOC) ? MAX_MALLOC : fs->csize * SS(fs), ibuf = 0; 
1675:DRIVER/FatFs/source/ff.c **** 	if (szb > SS(fs)) {		/* Buffer allocated? */
1676:DRIVER/FatFs/source/ff.c **** 		memset(ibuf, 0, szb);
1677:DRIVER/FatFs/source/ff.c **** 		szb /= SS(fs);		/* Bytes -> Sectors */
1678:DRIVER/FatFs/source/ff.c **** 		for (n = 0; n < fs->csize && disk_write(fs->pdrv, ibuf, sect + n, szb) == RES_OK; n += szb) ;	/* 
1679:DRIVER/FatFs/source/ff.c **** 		ff_memfree(ibuf);
1680:DRIVER/FatFs/source/ff.c **** 	} else
1681:DRIVER/FatFs/source/ff.c **** #endif
1682:DRIVER/FatFs/source/ff.c **** 	{
1683:DRIVER/FatFs/source/ff.c **** 		ibuf = fs->win; szb = 1;	/* Use window buffer (many single-sector writes may take a time) */
1684:DRIVER/FatFs/source/ff.c **** 		for (n = 0; n < fs->csize && disk_write(fs->pdrv, ibuf, sect + n, szb) == RES_OK; n += szb) ;	/* 
1685:DRIVER/FatFs/source/ff.c **** 	}
1686:DRIVER/FatFs/source/ff.c **** 	return (n == fs->csize) ? FR_OK : FR_DISK_ERR;
1687:DRIVER/FatFs/source/ff.c **** }
1688:DRIVER/FatFs/source/ff.c **** #endif	/* !FF_FS_READONLY */
1689:DRIVER/FatFs/source/ff.c **** 
1690:DRIVER/FatFs/source/ff.c **** 
1691:DRIVER/FatFs/source/ff.c **** 
1692:DRIVER/FatFs/source/ff.c **** 
1693:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
1694:DRIVER/FatFs/source/ff.c **** /* Directory handling - Set directory index                              */
1695:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
1696:DRIVER/FatFs/source/ff.c **** 
1697:DRIVER/FatFs/source/ff.c **** static FRESULT dir_sdi (	/* FR_OK(0):succeeded, !=0:error */
1698:DRIVER/FatFs/source/ff.c **** 	DIR* dp,		/* Pointer to directory object */
1699:DRIVER/FatFs/source/ff.c **** 	DWORD ofs		/* Offset of directory table */
1700:DRIVER/FatFs/source/ff.c **** )
1701:DRIVER/FatFs/source/ff.c **** {
1702:DRIVER/FatFs/source/ff.c **** 	DWORD csz, clst;
1703:DRIVER/FatFs/source/ff.c **** 	FATFS *fs = dp->obj.fs;
1704:DRIVER/FatFs/source/ff.c **** 
1705:DRIVER/FatFs/source/ff.c **** 
1706:DRIVER/FatFs/source/ff.c **** 	if (ofs >= (DWORD)((FF_FS_EXFAT && fs->fs_type == FS_EXFAT) ? MAX_DIR_EX : MAX_DIR) || ofs % SZDIR
1707:DRIVER/FatFs/source/ff.c **** 		return FR_INT_ERR;
1708:DRIVER/FatFs/source/ff.c **** 	}
1709:DRIVER/FatFs/source/ff.c **** 	dp->dptr = ofs;				/* Set current offset */
1710:DRIVER/FatFs/source/ff.c **** 	clst = dp->obj.sclust;		/* Table start cluster (0:root) */
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 44


1711:DRIVER/FatFs/source/ff.c **** 	if (clst == 0 && fs->fs_type >= FS_FAT32) {	/* Replace cluster# 0 with root cluster# */
1712:DRIVER/FatFs/source/ff.c **** 		clst = (DWORD)fs->dirbase;
1713:DRIVER/FatFs/source/ff.c **** 		if (FF_FS_EXFAT) dp->obj.stat = 0;	/* exFAT: Root dir has an FAT chain */
1714:DRIVER/FatFs/source/ff.c **** 	}
1715:DRIVER/FatFs/source/ff.c **** 
1716:DRIVER/FatFs/source/ff.c **** 	if (clst == 0) {	/* Static table (root-directory on the FAT volume) */
1717:DRIVER/FatFs/source/ff.c **** 		if (ofs / SZDIRE >= fs->n_rootdir) return FR_INT_ERR;	/* Is index out of range? */
1718:DRIVER/FatFs/source/ff.c **** 		dp->sect = fs->dirbase;
1719:DRIVER/FatFs/source/ff.c **** 
1720:DRIVER/FatFs/source/ff.c **** 	} else {			/* Dynamic table (sub-directory or root-directory on the FAT32/exFAT volume) */
1721:DRIVER/FatFs/source/ff.c **** 		csz = (DWORD)fs->csize * SS(fs);	/* Bytes per cluster */
1722:DRIVER/FatFs/source/ff.c **** 		while (ofs >= csz) {				/* Follow cluster chain */
1723:DRIVER/FatFs/source/ff.c **** 			clst = get_fat(&dp->obj, clst);				/* Get next cluster */
1724:DRIVER/FatFs/source/ff.c **** 			if (clst == 0xFFFFFFFF) return FR_DISK_ERR;	/* Disk error */
1725:DRIVER/FatFs/source/ff.c **** 			if (clst < 2 || clst >= fs->n_fatent) return FR_INT_ERR;	/* Reached to end of table or internal 
1726:DRIVER/FatFs/source/ff.c **** 			ofs -= csz;
1727:DRIVER/FatFs/source/ff.c **** 		}
1728:DRIVER/FatFs/source/ff.c **** 		dp->sect = clst2sect(fs, clst);
1729:DRIVER/FatFs/source/ff.c **** 	}
1730:DRIVER/FatFs/source/ff.c **** 	dp->clust = clst;					/* Current cluster# */
1731:DRIVER/FatFs/source/ff.c **** 	if (dp->sect == 0) return FR_INT_ERR;
1732:DRIVER/FatFs/source/ff.c **** 	dp->sect += ofs / SS(fs);			/* Sector# of the directory entry */
1733:DRIVER/FatFs/source/ff.c **** 	dp->dir = fs->win + (ofs % SS(fs));	/* Pointer to the entry in the win[] */
1734:DRIVER/FatFs/source/ff.c **** 
1735:DRIVER/FatFs/source/ff.c **** 	return FR_OK;
1736:DRIVER/FatFs/source/ff.c **** }
1737:DRIVER/FatFs/source/ff.c **** 
1738:DRIVER/FatFs/source/ff.c **** 
1739:DRIVER/FatFs/source/ff.c **** 
1740:DRIVER/FatFs/source/ff.c **** 
1741:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
1742:DRIVER/FatFs/source/ff.c **** /* Directory handling - Move directory table index next                  */
1743:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
1744:DRIVER/FatFs/source/ff.c **** 
1745:DRIVER/FatFs/source/ff.c **** static FRESULT dir_next (	/* FR_OK(0):succeeded, FR_NO_FILE:End of table, FR_DENIED:Could not stret
1746:DRIVER/FatFs/source/ff.c **** 	DIR* dp,				/* Pointer to the directory object */
1747:DRIVER/FatFs/source/ff.c **** 	int stretch				/* 0: Do not stretch table, 1: Stretch table if needed */
1748:DRIVER/FatFs/source/ff.c **** )
1749:DRIVER/FatFs/source/ff.c **** {
1750:DRIVER/FatFs/source/ff.c **** 	DWORD ofs, clst;
1751:DRIVER/FatFs/source/ff.c **** 	FATFS *fs = dp->obj.fs;
1752:DRIVER/FatFs/source/ff.c **** 
1753:DRIVER/FatFs/source/ff.c **** 
1754:DRIVER/FatFs/source/ff.c **** 	ofs = dp->dptr + SZDIRE;	/* Next entry */
1755:DRIVER/FatFs/source/ff.c **** 	if (ofs >= (DWORD)((FF_FS_EXFAT && fs->fs_type == FS_EXFAT) ? MAX_DIR_EX : MAX_DIR)) dp->sect = 0;
1756:DRIVER/FatFs/source/ff.c **** 	if (dp->sect == 0) return FR_NO_FILE;	/* Report EOT if it has been disabled */
1757:DRIVER/FatFs/source/ff.c **** 
1758:DRIVER/FatFs/source/ff.c **** 	if (ofs % SS(fs) == 0) {	/* Sector changed? */
1759:DRIVER/FatFs/source/ff.c **** 		dp->sect++;				/* Next sector */
1760:DRIVER/FatFs/source/ff.c **** 
1761:DRIVER/FatFs/source/ff.c **** 		if (dp->clust == 0) {	/* Static table */
1762:DRIVER/FatFs/source/ff.c **** 			if (ofs / SZDIRE >= fs->n_rootdir) {	/* Report EOT if it reached end of static table */
1763:DRIVER/FatFs/source/ff.c **** 				dp->sect = 0; return FR_NO_FILE;
1764:DRIVER/FatFs/source/ff.c **** 			}
1765:DRIVER/FatFs/source/ff.c **** 		}
1766:DRIVER/FatFs/source/ff.c **** 		else {					/* Dynamic table */
1767:DRIVER/FatFs/source/ff.c **** 			if ((ofs / SS(fs) & (fs->csize - 1)) == 0) {	/* Cluster changed? */
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 45


1768:DRIVER/FatFs/source/ff.c **** 				clst = get_fat(&dp->obj, dp->clust);		/* Get next cluster */
1769:DRIVER/FatFs/source/ff.c **** 				if (clst <= 1) return FR_INT_ERR;			/* Internal error */
1770:DRIVER/FatFs/source/ff.c **** 				if (clst == 0xFFFFFFFF) return FR_DISK_ERR;	/* Disk error */
1771:DRIVER/FatFs/source/ff.c **** 				if (clst >= fs->n_fatent) {					/* It reached end of dynamic table */
1772:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY
1773:DRIVER/FatFs/source/ff.c **** 					if (!stretch) {								/* If no stretch, report EOT */
1774:DRIVER/FatFs/source/ff.c **** 						dp->sect = 0; return FR_NO_FILE;
1775:DRIVER/FatFs/source/ff.c **** 					}
1776:DRIVER/FatFs/source/ff.c **** 					clst = create_chain(&dp->obj, dp->clust);	/* Allocate a cluster */
1777:DRIVER/FatFs/source/ff.c **** 					if (clst == 0) return FR_DENIED;			/* No free cluster */
1778:DRIVER/FatFs/source/ff.c **** 					if (clst == 1) return FR_INT_ERR;			/* Internal error */
1779:DRIVER/FatFs/source/ff.c **** 					if (clst == 0xFFFFFFFF) return FR_DISK_ERR;	/* Disk error */
1780:DRIVER/FatFs/source/ff.c **** 					if (dir_clear(fs, clst) != FR_OK) return FR_DISK_ERR;	/* Clean up the stretched table */
1781:DRIVER/FatFs/source/ff.c **** 					if (FF_FS_EXFAT) dp->obj.stat |= 4;			/* exFAT: The directory has been stretched */
1782:DRIVER/FatFs/source/ff.c **** #else
1783:DRIVER/FatFs/source/ff.c **** 					if (!stretch) dp->sect = 0;					/* (this line is to suppress compiler warning) */
1784:DRIVER/FatFs/source/ff.c **** 					dp->sect = 0; return FR_NO_FILE;			/* Report EOT */
1785:DRIVER/FatFs/source/ff.c **** #endif
1786:DRIVER/FatFs/source/ff.c **** 				}
1787:DRIVER/FatFs/source/ff.c **** 				dp->clust = clst;		/* Initialize data for new cluster */
1788:DRIVER/FatFs/source/ff.c **** 				dp->sect = clst2sect(fs, clst);
1789:DRIVER/FatFs/source/ff.c **** 			}
1790:DRIVER/FatFs/source/ff.c **** 		}
1791:DRIVER/FatFs/source/ff.c **** 	}
1792:DRIVER/FatFs/source/ff.c **** 	dp->dptr = ofs;						/* Current entry */
1793:DRIVER/FatFs/source/ff.c **** 	dp->dir = fs->win + ofs % SS(fs);	/* Pointer to the entry in the win[] */
1794:DRIVER/FatFs/source/ff.c **** 
1795:DRIVER/FatFs/source/ff.c **** 	return FR_OK;
1796:DRIVER/FatFs/source/ff.c **** }
1797:DRIVER/FatFs/source/ff.c **** 
1798:DRIVER/FatFs/source/ff.c **** 
1799:DRIVER/FatFs/source/ff.c **** 
1800:DRIVER/FatFs/source/ff.c **** 
1801:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY
1802:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
1803:DRIVER/FatFs/source/ff.c **** /* Directory handling - Reserve a block of directory entries             */
1804:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
1805:DRIVER/FatFs/source/ff.c **** 
1806:DRIVER/FatFs/source/ff.c **** static FRESULT dir_alloc (	/* FR_OK(0):succeeded, !=0:error */
1807:DRIVER/FatFs/source/ff.c **** 	DIR* dp,				/* Pointer to the directory object */
1808:DRIVER/FatFs/source/ff.c **** 	UINT n_ent				/* Number of contiguous entries to allocate */
1809:DRIVER/FatFs/source/ff.c **** )
1810:DRIVER/FatFs/source/ff.c **** {
1811:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
1812:DRIVER/FatFs/source/ff.c **** 	UINT n;
1813:DRIVER/FatFs/source/ff.c **** 	FATFS *fs = dp->obj.fs;
1814:DRIVER/FatFs/source/ff.c **** 
1815:DRIVER/FatFs/source/ff.c **** 
1816:DRIVER/FatFs/source/ff.c **** 	res = dir_sdi(dp, 0);
1817:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
1818:DRIVER/FatFs/source/ff.c **** 		n = 0;
1819:DRIVER/FatFs/source/ff.c **** 		do {
1820:DRIVER/FatFs/source/ff.c **** 			res = move_window(fs, dp->sect);
1821:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) break;
1822:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
1823:DRIVER/FatFs/source/ff.c **** 			if ((fs->fs_type == FS_EXFAT) ? (int)((dp->dir[XDIR_Type] & 0x80) == 0) : (int)(dp->dir[DIR_Name
1824:DRIVER/FatFs/source/ff.c **** #else
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 46


1825:DRIVER/FatFs/source/ff.c **** 			if (dp->dir[DIR_Name] == DDEM || dp->dir[DIR_Name] == 0) {	/* Is the entry free? */
1826:DRIVER/FatFs/source/ff.c **** #endif
1827:DRIVER/FatFs/source/ff.c **** 				if (++n == n_ent) break;	/* Is a block of contiguous free entries found? */
1828:DRIVER/FatFs/source/ff.c **** 			} else {
1829:DRIVER/FatFs/source/ff.c **** 				n = 0;				/* Not a free entry, restart to search */
1830:DRIVER/FatFs/source/ff.c **** 			}
1831:DRIVER/FatFs/source/ff.c **** 			res = dir_next(dp, 1);	/* Next entry with table stretch enabled */
1832:DRIVER/FatFs/source/ff.c **** 		} while (res == FR_OK);
1833:DRIVER/FatFs/source/ff.c **** 	}
1834:DRIVER/FatFs/source/ff.c **** 
1835:DRIVER/FatFs/source/ff.c **** 	if (res == FR_NO_FILE) res = FR_DENIED;	/* No directory entry to allocate */
1836:DRIVER/FatFs/source/ff.c **** 	return res;
1837:DRIVER/FatFs/source/ff.c **** }
1838:DRIVER/FatFs/source/ff.c **** 
1839:DRIVER/FatFs/source/ff.c **** #endif	/* !FF_FS_READONLY */
1840:DRIVER/FatFs/source/ff.c **** 
1841:DRIVER/FatFs/source/ff.c **** 
1842:DRIVER/FatFs/source/ff.c **** 
1843:DRIVER/FatFs/source/ff.c **** 
1844:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
1845:DRIVER/FatFs/source/ff.c **** /* FAT: Directory handling - Load/Store start cluster number             */
1846:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
1847:DRIVER/FatFs/source/ff.c **** 
1848:DRIVER/FatFs/source/ff.c **** static DWORD ld_clust (	/* Returns the top cluster value of the SFN entry */
1849:DRIVER/FatFs/source/ff.c **** 	FATFS* fs,			/* Pointer to the fs object */
1850:DRIVER/FatFs/source/ff.c **** 	const BYTE* dir		/* Pointer to the key entry */
1851:DRIVER/FatFs/source/ff.c **** )
1852:DRIVER/FatFs/source/ff.c **** {
 696              		.loc 1 1852 1 is_stmt 1 view -0
 697              		.cfi_startproc
 698              		@ args = 0, pretend = 0, frame = 0
 699              		@ frame_needed = 0, uses_anonymous_args = 0
 700              		.loc 1 1852 1 is_stmt 0 view .LVU235
 701 0000 70B5     		push	{r4, r5, r6, lr}
 702              	.LCFI1:
 703              		.cfi_def_cfa_offset 16
 704              		.cfi_offset 4, -16
 705              		.cfi_offset 5, -12
 706              		.cfi_offset 6, -8
 707              		.cfi_offset 14, -4
 708 0002 0646     		mov	r6, r0
 709 0004 0D46     		mov	r5, r1
1853:DRIVER/FatFs/source/ff.c **** 	DWORD cl;
 710              		.loc 1 1853 2 is_stmt 1 view .LVU236
1854:DRIVER/FatFs/source/ff.c **** 
1855:DRIVER/FatFs/source/ff.c **** 	cl = ld_word(dir + DIR_FstClusLO);
 711              		.loc 1 1855 2 view .LVU237
 712              		.loc 1 1855 7 is_stmt 0 view .LVU238
 713 0006 01F11A00 		add	r0, r1, #26
 714              	.LVL93:
 715              		.loc 1 1855 7 view .LVU239
 716 000a FFF7FEFF 		bl	ld_word
 717              	.LVL94:
1856:DRIVER/FatFs/source/ff.c **** 	if (fs->fs_type == FS_FAT32) {
 718              		.loc 1 1856 2 is_stmt 1 view .LVU240
 719              		.loc 1 1856 8 is_stmt 0 view .LVU241
 720 000e 3378     		ldrb	r3, [r6]	@ zero_extendqisi2
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 47


 721              		.loc 1 1856 5 view .LVU242
 722 0010 032B     		cmp	r3, #3
 723 0012 00D0     		beq	.L45
 724              	.LVL95:
 725              	.L42:
1857:DRIVER/FatFs/source/ff.c **** 		cl |= (DWORD)ld_word(dir + DIR_FstClusHI) << 16;
1858:DRIVER/FatFs/source/ff.c **** 	}
1859:DRIVER/FatFs/source/ff.c **** 
1860:DRIVER/FatFs/source/ff.c **** 	return cl;
1861:DRIVER/FatFs/source/ff.c **** }
 726              		.loc 1 1861 1 view .LVU243
 727 0014 70BD     		pop	{r4, r5, r6, pc}
 728              	.LVL96:
 729              	.L45:
 730              		.loc 1 1861 1 view .LVU244
 731 0016 0446     		mov	r4, r0
1857:DRIVER/FatFs/source/ff.c **** 		cl |= (DWORD)ld_word(dir + DIR_FstClusHI) << 16;
 732              		.loc 1 1857 3 is_stmt 1 view .LVU245
1857:DRIVER/FatFs/source/ff.c **** 		cl |= (DWORD)ld_word(dir + DIR_FstClusHI) << 16;
 733              		.loc 1 1857 16 is_stmt 0 view .LVU246
 734 0018 05F11400 		add	r0, r5, #20
 735              	.LVL97:
1857:DRIVER/FatFs/source/ff.c **** 		cl |= (DWORD)ld_word(dir + DIR_FstClusHI) << 16;
 736              		.loc 1 1857 16 view .LVU247
 737 001c FFF7FEFF 		bl	ld_word
 738              	.LVL98:
1857:DRIVER/FatFs/source/ff.c **** 		cl |= (DWORD)ld_word(dir + DIR_FstClusHI) << 16;
 739              		.loc 1 1857 6 view .LVU248
 740 0020 44EA0040 		orr	r0, r4, r0, lsl #16
 741              	.LVL99:
1860:DRIVER/FatFs/source/ff.c **** }
 742              		.loc 1 1860 2 is_stmt 1 view .LVU249
1860:DRIVER/FatFs/source/ff.c **** }
 743              		.loc 1 1860 9 is_stmt 0 view .LVU250
 744 0024 F6E7     		b	.L42
 745              		.cfi_endproc
 746              	.LFE20:
 748              		.section	.text.st_clust,"ax",%progbits
 749              		.align	1
 750              		.syntax unified
 751              		.thumb
 752              		.thumb_func
 754              	st_clust:
 755              	.LVL100:
 756              	.LFB21:
1862:DRIVER/FatFs/source/ff.c **** 
1863:DRIVER/FatFs/source/ff.c **** 
1864:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY
1865:DRIVER/FatFs/source/ff.c **** static void st_clust (
1866:DRIVER/FatFs/source/ff.c **** 	FATFS* fs,	/* Pointer to the fs object */
1867:DRIVER/FatFs/source/ff.c **** 	BYTE* dir,	/* Pointer to the key entry */
1868:DRIVER/FatFs/source/ff.c **** 	DWORD cl	/* Value to be set */
1869:DRIVER/FatFs/source/ff.c **** )
1870:DRIVER/FatFs/source/ff.c **** {
 757              		.loc 1 1870 1 is_stmt 1 view -0
 758              		.cfi_startproc
 759              		@ args = 0, pretend = 0, frame = 0
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 48


 760              		@ frame_needed = 0, uses_anonymous_args = 0
 761              		.loc 1 1870 1 is_stmt 0 view .LVU252
 762 0000 70B5     		push	{r4, r5, r6, lr}
 763              	.LCFI2:
 764              		.cfi_def_cfa_offset 16
 765              		.cfi_offset 4, -16
 766              		.cfi_offset 5, -12
 767              		.cfi_offset 6, -8
 768              		.cfi_offset 14, -4
 769 0002 0646     		mov	r6, r0
 770 0004 0C46     		mov	r4, r1
 771 0006 1546     		mov	r5, r2
1871:DRIVER/FatFs/source/ff.c **** 	st_word(dir + DIR_FstClusLO, (WORD)cl);
 772              		.loc 1 1871 2 is_stmt 1 view .LVU253
 773 0008 91B2     		uxth	r1, r2
 774              	.LVL101:
 775              		.loc 1 1871 2 is_stmt 0 view .LVU254
 776 000a 04F11A00 		add	r0, r4, #26
 777              	.LVL102:
 778              		.loc 1 1871 2 view .LVU255
 779 000e FFF7FEFF 		bl	st_word
 780              	.LVL103:
1872:DRIVER/FatFs/source/ff.c **** 	if (fs->fs_type == FS_FAT32) {
 781              		.loc 1 1872 2 is_stmt 1 view .LVU256
 782              		.loc 1 1872 8 is_stmt 0 view .LVU257
 783 0012 3378     		ldrb	r3, [r6]	@ zero_extendqisi2
 784              		.loc 1 1872 5 view .LVU258
 785 0014 032B     		cmp	r3, #3
 786 0016 00D0     		beq	.L49
 787              	.L46:
1873:DRIVER/FatFs/source/ff.c **** 		st_word(dir + DIR_FstClusHI, (WORD)(cl >> 16));
1874:DRIVER/FatFs/source/ff.c **** 	}
1875:DRIVER/FatFs/source/ff.c **** }
 788              		.loc 1 1875 1 view .LVU259
 789 0018 70BD     		pop	{r4, r5, r6, pc}
 790              	.LVL104:
 791              	.L49:
1873:DRIVER/FatFs/source/ff.c **** 		st_word(dir + DIR_FstClusHI, (WORD)(cl >> 16));
 792              		.loc 1 1873 3 is_stmt 1 view .LVU260
 793 001a 290C     		lsrs	r1, r5, #16
 794 001c 04F11400 		add	r0, r4, #20
 795 0020 FFF7FEFF 		bl	st_word
 796              	.LVL105:
 797              		.loc 1 1875 1 is_stmt 0 view .LVU261
 798 0024 F8E7     		b	.L46
 799              		.cfi_endproc
 800              	.LFE21:
 802              		.section	.text.pick_lfn,"ax",%progbits
 803              		.align	1
 804              		.syntax unified
 805              		.thumb
 806              		.thumb_func
 808              	pick_lfn:
 809              	.LVL106:
 810              	.LFB23:
1876:DRIVER/FatFs/source/ff.c **** #endif
1877:DRIVER/FatFs/source/ff.c **** 
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 49


1878:DRIVER/FatFs/source/ff.c **** 
1879:DRIVER/FatFs/source/ff.c **** 
1880:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN
1881:DRIVER/FatFs/source/ff.c **** /*--------------------------------------------------------*/
1882:DRIVER/FatFs/source/ff.c **** /* FAT-LFN: Compare a part of file name with an LFN entry */
1883:DRIVER/FatFs/source/ff.c **** /*--------------------------------------------------------*/
1884:DRIVER/FatFs/source/ff.c **** 
1885:DRIVER/FatFs/source/ff.c **** static int cmp_lfn (		/* 1:matched, 0:not matched */
1886:DRIVER/FatFs/source/ff.c **** 	const WCHAR* lfnbuf,	/* Pointer to the LFN working buffer to be compared */
1887:DRIVER/FatFs/source/ff.c **** 	BYTE* dir				/* Pointer to the directory entry containing the part of LFN */
1888:DRIVER/FatFs/source/ff.c **** )
1889:DRIVER/FatFs/source/ff.c **** {
1890:DRIVER/FatFs/source/ff.c **** 	UINT i, s;
1891:DRIVER/FatFs/source/ff.c **** 	WCHAR wc, uc;
1892:DRIVER/FatFs/source/ff.c **** 
1893:DRIVER/FatFs/source/ff.c **** 
1894:DRIVER/FatFs/source/ff.c **** 	if (ld_word(dir + LDIR_FstClusLO) != 0) return 0;	/* Check LDIR_FstClusLO */
1895:DRIVER/FatFs/source/ff.c **** 
1896:DRIVER/FatFs/source/ff.c **** 	i = ((dir[LDIR_Ord] & 0x3F) - 1) * 13;	/* Offset in the LFN buffer */
1897:DRIVER/FatFs/source/ff.c **** 
1898:DRIVER/FatFs/source/ff.c **** 	for (wc = 1, s = 0; s < 13; s++) {		/* Process all characters in the entry */
1899:DRIVER/FatFs/source/ff.c **** 		uc = ld_word(dir + LfnOfs[s]);		/* Pick an LFN character */
1900:DRIVER/FatFs/source/ff.c **** 		if (wc != 0) {
1901:DRIVER/FatFs/source/ff.c **** 			if (i >= FF_MAX_LFN + 1 || ff_wtoupper(uc) != ff_wtoupper(lfnbuf[i++])) {	/* Compare it */
1902:DRIVER/FatFs/source/ff.c **** 				return 0;					/* Not matched */
1903:DRIVER/FatFs/source/ff.c **** 			}
1904:DRIVER/FatFs/source/ff.c **** 			wc = uc;
1905:DRIVER/FatFs/source/ff.c **** 		} else {
1906:DRIVER/FatFs/source/ff.c **** 			if (uc != 0xFFFF) return 0;		/* Check filler */
1907:DRIVER/FatFs/source/ff.c **** 		}
1908:DRIVER/FatFs/source/ff.c **** 	}
1909:DRIVER/FatFs/source/ff.c **** 
1910:DRIVER/FatFs/source/ff.c **** 	if ((dir[LDIR_Ord] & LLEF) && wc && lfnbuf[i]) return 0;	/* Last segment matched but different len
1911:DRIVER/FatFs/source/ff.c **** 
1912:DRIVER/FatFs/source/ff.c **** 	return 1;		/* The part of LFN matched */
1913:DRIVER/FatFs/source/ff.c **** }
1914:DRIVER/FatFs/source/ff.c **** 
1915:DRIVER/FatFs/source/ff.c **** 
1916:DRIVER/FatFs/source/ff.c **** #if FF_FS_MINIMIZE <= 1 || FF_FS_RPATH >= 2 || FF_USE_LABEL || FF_FS_EXFAT
1917:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------*/
1918:DRIVER/FatFs/source/ff.c **** /* FAT-LFN: Pick a part of file name from an LFN entry */
1919:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------*/
1920:DRIVER/FatFs/source/ff.c **** 
1921:DRIVER/FatFs/source/ff.c **** static int pick_lfn (	/* 1:succeeded, 0:buffer overflow or invalid LFN entry */
1922:DRIVER/FatFs/source/ff.c **** 	WCHAR* lfnbuf,		/* Pointer to the LFN working buffer */
1923:DRIVER/FatFs/source/ff.c **** 	BYTE* dir			/* Pointer to the LFN entry */
1924:DRIVER/FatFs/source/ff.c **** )
1925:DRIVER/FatFs/source/ff.c **** {
 811              		.loc 1 1925 1 is_stmt 1 view -0
 812              		.cfi_startproc
 813              		@ args = 0, pretend = 0, frame = 0
 814              		@ frame_needed = 0, uses_anonymous_args = 0
 815              		.loc 1 1925 1 is_stmt 0 view .LVU263
 816 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 817              	.LCFI3:
 818              		.cfi_def_cfa_offset 24
 819              		.cfi_offset 4, -24
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 50


 820              		.cfi_offset 5, -20
 821              		.cfi_offset 6, -16
 822              		.cfi_offset 7, -12
 823              		.cfi_offset 8, -8
 824              		.cfi_offset 14, -4
 825 0004 8046     		mov	r8, r0
 826 0006 0E46     		mov	r6, r1
1926:DRIVER/FatFs/source/ff.c **** 	UINT i, s;
 827              		.loc 1 1926 2 is_stmt 1 view .LVU264
1927:DRIVER/FatFs/source/ff.c **** 	WCHAR wc, uc;
 828              		.loc 1 1927 2 view .LVU265
1928:DRIVER/FatFs/source/ff.c **** 
1929:DRIVER/FatFs/source/ff.c **** 
1930:DRIVER/FatFs/source/ff.c **** 	if (ld_word(dir + LDIR_FstClusLO) != 0) return 0;	/* Check LDIR_FstClusLO is 0 */
 829              		.loc 1 1930 2 view .LVU266
 830              		.loc 1 1930 6 is_stmt 0 view .LVU267
 831 0008 01F11A00 		add	r0, r1, #26
 832              	.LVL107:
 833              		.loc 1 1930 6 view .LVU268
 834 000c FFF7FEFF 		bl	ld_word
 835              	.LVL108:
 836              		.loc 1 1930 5 view .LVU269
 837 0010 58BB     		cbnz	r0, .L56
1931:DRIVER/FatFs/source/ff.c **** 
1932:DRIVER/FatFs/source/ff.c **** 	i = ((dir[LDIR_Ord] & ~LLEF) - 1) * 13;	/* Offset in the LFN buffer */
 838              		.loc 1 1932 2 is_stmt 1 view .LVU270
 839              		.loc 1 1932 11 is_stmt 0 view .LVU271
 840 0012 3578     		ldrb	r5, [r6]	@ zero_extendqisi2
 841              		.loc 1 1932 22 view .LVU272
 842 0014 25F04005 		bic	r5, r5, #64
 843              		.loc 1 1932 31 view .LVU273
 844 0018 013D     		subs	r5, r5, #1
 845              		.loc 1 1932 36 view .LVU274
 846 001a 05EB4503 		add	r3, r5, r5, lsl #1
 847              		.loc 1 1932 4 view .LVU275
 848 001e 05EB8305 		add	r5, r5, r3, lsl #2
 849              	.LVL109:
1933:DRIVER/FatFs/source/ff.c **** 
1934:DRIVER/FatFs/source/ff.c **** 	for (wc = 1, s = 0; s < 13; s++) {		/* Process all characters in the entry */
 850              		.loc 1 1934 2 is_stmt 1 view .LVU276
 851              		.loc 1 1934 10 is_stmt 0 view .LVU277
 852 0022 0127     		movs	r7, #1
 853              		.loc 1 1934 17 view .LVU278
 854 0024 0024     		movs	r4, #0
 855              		.loc 1 1934 2 view .LVU279
 856 0026 04E0     		b	.L52
 857              	.LVL110:
 858              	.L53:
1935:DRIVER/FatFs/source/ff.c **** 		uc = ld_word(dir + LfnOfs[s]);		/* Pick an LFN character */
1936:DRIVER/FatFs/source/ff.c **** 		if (wc != 0) {
1937:DRIVER/FatFs/source/ff.c **** 			if (i >= FF_MAX_LFN + 1) return 0;	/* Buffer overflow? */
1938:DRIVER/FatFs/source/ff.c **** 			lfnbuf[i++] = wc = uc;			/* Store it */
1939:DRIVER/FatFs/source/ff.c **** 		} else {
1940:DRIVER/FatFs/source/ff.c **** 			if (uc != 0xFFFF) return 0;		/* Check filler */
 859              		.loc 1 1940 4 is_stmt 1 view .LVU280
 860              		.loc 1 1940 7 is_stmt 0 view .LVU281
 861 0028 4FF6FF73 		movw	r3, #65535
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 51


 862 002c 9842     		cmp	r0, r3
 863 002e 21D1     		bne	.L58
 864              	.LVL111:
 865              	.L54:
1934:DRIVER/FatFs/source/ff.c **** 		uc = ld_word(dir + LfnOfs[s]);		/* Pick an LFN character */
 866              		.loc 1 1934 31 is_stmt 1 discriminator 2 view .LVU282
 867 0030 0134     		adds	r4, r4, #1
 868              	.LVL112:
 869              	.L52:
1934:DRIVER/FatFs/source/ff.c **** 		uc = ld_word(dir + LfnOfs[s]);		/* Pick an LFN character */
 870              		.loc 1 1934 24 discriminator 1 view .LVU283
 871 0032 0C2C     		cmp	r4, #12
 872 0034 0DD8     		bhi	.L63
1935:DRIVER/FatFs/source/ff.c **** 		uc = ld_word(dir + LfnOfs[s]);		/* Pick an LFN character */
 873              		.loc 1 1935 3 view .LVU284
1935:DRIVER/FatFs/source/ff.c **** 		uc = ld_word(dir + LfnOfs[s]);		/* Pick an LFN character */
 874              		.loc 1 1935 28 is_stmt 0 view .LVU285
 875 0036 134B     		ldr	r3, .L64
 876 0038 185D     		ldrb	r0, [r3, r4]	@ zero_extendqisi2
1935:DRIVER/FatFs/source/ff.c **** 		uc = ld_word(dir + LfnOfs[s]);		/* Pick an LFN character */
 877              		.loc 1 1935 8 view .LVU286
 878 003a 3044     		add	r0, r0, r6
 879 003c FFF7FEFF 		bl	ld_word
 880              	.LVL113:
1936:DRIVER/FatFs/source/ff.c **** 			if (i >= FF_MAX_LFN + 1) return 0;	/* Buffer overflow? */
 881              		.loc 1 1936 3 is_stmt 1 view .LVU287
1936:DRIVER/FatFs/source/ff.c **** 			if (i >= FF_MAX_LFN + 1) return 0;	/* Buffer overflow? */
 882              		.loc 1 1936 6 is_stmt 0 view .LVU288
 883 0040 002F     		cmp	r7, #0
 884 0042 F1D0     		beq	.L53
1937:DRIVER/FatFs/source/ff.c **** 			lfnbuf[i++] = wc = uc;			/* Store it */
 885              		.loc 1 1937 4 is_stmt 1 view .LVU289
1937:DRIVER/FatFs/source/ff.c **** 			lfnbuf[i++] = wc = uc;			/* Store it */
 886              		.loc 1 1937 7 is_stmt 0 view .LVU290
 887 0044 FF2D     		cmp	r5, #255
 888 0046 13D8     		bhi	.L57
1938:DRIVER/FatFs/source/ff.c **** 		} else {
 889              		.loc 1 1938 4 is_stmt 1 view .LVU291
 890              	.LVL114:
1938:DRIVER/FatFs/source/ff.c **** 		} else {
 891              		.loc 1 1938 16 is_stmt 0 view .LVU292
 892 0048 28F81500 		strh	r0, [r8, r5, lsl #1]	@ movhi
1938:DRIVER/FatFs/source/ff.c **** 		} else {
 893              		.loc 1 1938 21 view .LVU293
 894 004c 0746     		mov	r7, r0
1938:DRIVER/FatFs/source/ff.c **** 		} else {
 895              		.loc 1 1938 12 view .LVU294
 896 004e 0135     		adds	r5, r5, #1
 897              	.LVL115:
1938:DRIVER/FatFs/source/ff.c **** 		} else {
 898              		.loc 1 1938 12 view .LVU295
 899 0050 EEE7     		b	.L54
 900              	.LVL116:
 901              	.L63:
1941:DRIVER/FatFs/source/ff.c **** 		}
1942:DRIVER/FatFs/source/ff.c **** 	}
1943:DRIVER/FatFs/source/ff.c **** 
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 52


1944:DRIVER/FatFs/source/ff.c **** 	if (dir[LDIR_Ord] & LLEF && wc != 0) {	/* Put terminator if it is the last LFN part and not termin
 902              		.loc 1 1944 2 is_stmt 1 view .LVU296
 903              		.loc 1 1944 9 is_stmt 0 view .LVU297
 904 0052 3378     		ldrb	r3, [r6]	@ zero_extendqisi2
 905              		.loc 1 1944 5 view .LVU298
 906 0054 13F0400F 		tst	r3, #64
 907 0058 0ED0     		beq	.L59
 908              		.loc 1 1944 27 discriminator 1 view .LVU299
 909 005a 7FB1     		cbz	r7, .L60
1945:DRIVER/FatFs/source/ff.c **** 		if (i >= FF_MAX_LFN + 1) return 0;	/* Buffer overflow? */
 910              		.loc 1 1945 3 is_stmt 1 view .LVU300
 911              		.loc 1 1945 6 is_stmt 0 view .LVU301
 912 005c FF2D     		cmp	r5, #255
 913 005e 0FD8     		bhi	.L61
1946:DRIVER/FatFs/source/ff.c **** 		lfnbuf[i] = 0;
 914              		.loc 1 1946 3 is_stmt 1 view .LVU302
 915              		.loc 1 1946 13 is_stmt 0 view .LVU303
 916 0060 0023     		movs	r3, #0
 917 0062 28F81530 		strh	r3, [r8, r5, lsl #1]	@ movhi
1947:DRIVER/FatFs/source/ff.c **** 	}
1948:DRIVER/FatFs/source/ff.c **** 
1949:DRIVER/FatFs/source/ff.c **** 	return 1;		/* The part of LFN is valid */
 918              		.loc 1 1949 9 view .LVU304
 919 0066 0120     		movs	r0, #1
 920 0068 00E0     		b	.L50
 921              	.LVL117:
 922              	.L56:
1930:DRIVER/FatFs/source/ff.c **** 
 923              		.loc 1 1930 49 view .LVU305
 924 006a 0020     		movs	r0, #0
 925              	.L50:
1950:DRIVER/FatFs/source/ff.c **** }
 926              		.loc 1 1950 1 view .LVU306
 927 006c BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 928              	.LVL118:
 929              	.L57:
1937:DRIVER/FatFs/source/ff.c **** 			lfnbuf[i++] = wc = uc;			/* Store it */
 930              		.loc 1 1937 36 view .LVU307
 931 0070 0020     		movs	r0, #0
 932              	.LVL119:
1937:DRIVER/FatFs/source/ff.c **** 			lfnbuf[i++] = wc = uc;			/* Store it */
 933              		.loc 1 1937 36 view .LVU308
 934 0072 FBE7     		b	.L50
 935              	.LVL120:
 936              	.L58:
1940:DRIVER/FatFs/source/ff.c **** 		}
 937              		.loc 1 1940 29 view .LVU309
 938 0074 0020     		movs	r0, #0
 939              	.LVL121:
1940:DRIVER/FatFs/source/ff.c **** 		}
 940              		.loc 1 1940 29 view .LVU310
 941 0076 F9E7     		b	.L50
 942              	.LVL122:
 943              	.L59:
1949:DRIVER/FatFs/source/ff.c **** }
 944              		.loc 1 1949 9 view .LVU311
 945 0078 0120     		movs	r0, #1
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 53


 946 007a F7E7     		b	.L50
 947              	.L60:
 948 007c 0120     		movs	r0, #1
 949 007e F5E7     		b	.L50
 950              	.L61:
1945:DRIVER/FatFs/source/ff.c **** 		lfnbuf[i] = 0;
 951              		.loc 1 1945 35 view .LVU312
 952 0080 0020     		movs	r0, #0
 953 0082 F3E7     		b	.L50
 954              	.L65:
 955              		.align	2
 956              	.L64:
 957 0084 00000000 		.word	LfnOfs
 958              		.cfi_endproc
 959              	.LFE23:
 961              		.section	.text.put_lfn,"ax",%progbits
 962              		.align	1
 963              		.syntax unified
 964              		.thumb
 965              		.thumb_func
 967              	put_lfn:
 968              	.LVL123:
 969              	.LFB24:
1951:DRIVER/FatFs/source/ff.c **** #endif
1952:DRIVER/FatFs/source/ff.c **** 
1953:DRIVER/FatFs/source/ff.c **** 
1954:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY
1955:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------*/
1956:DRIVER/FatFs/source/ff.c **** /* FAT-LFN: Create an entry of LFN entries */
1957:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------*/
1958:DRIVER/FatFs/source/ff.c **** 
1959:DRIVER/FatFs/source/ff.c **** static void put_lfn (
1960:DRIVER/FatFs/source/ff.c **** 	const WCHAR* lfn,	/* Pointer to the LFN */
1961:DRIVER/FatFs/source/ff.c **** 	BYTE* dir,			/* Pointer to the LFN entry to be created */
1962:DRIVER/FatFs/source/ff.c **** 	BYTE ord,			/* LFN order (1-20) */
1963:DRIVER/FatFs/source/ff.c **** 	BYTE sum			/* Checksum of the corresponding SFN */
1964:DRIVER/FatFs/source/ff.c **** )
1965:DRIVER/FatFs/source/ff.c **** {
 970              		.loc 1 1965 1 is_stmt 1 view -0
 971              		.cfi_startproc
 972              		@ args = 0, pretend = 0, frame = 0
 973              		@ frame_needed = 0, uses_anonymous_args = 0
 974              		.loc 1 1965 1 is_stmt 0 view .LVU314
 975 0000 2DE9F843 		push	{r3, r4, r5, r6, r7, r8, r9, lr}
 976              	.LCFI4:
 977              		.cfi_def_cfa_offset 32
 978              		.cfi_offset 3, -32
 979              		.cfi_offset 4, -28
 980              		.cfi_offset 5, -24
 981              		.cfi_offset 6, -20
 982              		.cfi_offset 7, -16
 983              		.cfi_offset 8, -12
 984              		.cfi_offset 9, -8
 985              		.cfi_offset 14, -4
 986 0004 8046     		mov	r8, r0
 987 0006 0F46     		mov	r7, r1
 988 0008 9146     		mov	r9, r2
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 54


1966:DRIVER/FatFs/source/ff.c **** 	UINT i, s;
 989              		.loc 1 1966 2 is_stmt 1 view .LVU315
1967:DRIVER/FatFs/source/ff.c **** 	WCHAR wc;
 990              		.loc 1 1967 2 view .LVU316
1968:DRIVER/FatFs/source/ff.c **** 
1969:DRIVER/FatFs/source/ff.c **** 
1970:DRIVER/FatFs/source/ff.c **** 	dir[LDIR_Chksum] = sum;			/* Set checksum */
 991              		.loc 1 1970 2 view .LVU317
 992              		.loc 1 1970 19 is_stmt 0 view .LVU318
 993 000a 4B73     		strb	r3, [r1, #13]
1971:DRIVER/FatFs/source/ff.c **** 	dir[LDIR_Attr] = AM_LFN;		/* Set attribute. LFN entry */
 994              		.loc 1 1971 2 is_stmt 1 view .LVU319
 995              		.loc 1 1971 17 is_stmt 0 view .LVU320
 996 000c 0F23     		movs	r3, #15
 997              	.LVL124:
 998              		.loc 1 1971 17 view .LVU321
 999 000e CB72     		strb	r3, [r1, #11]
1972:DRIVER/FatFs/source/ff.c **** 	dir[LDIR_Type] = 0;
 1000              		.loc 1 1972 2 is_stmt 1 view .LVU322
 1001              		.loc 1 1972 17 is_stmt 0 view .LVU323
 1002 0010 0024     		movs	r4, #0
 1003 0012 0C73     		strb	r4, [r1, #12]
1973:DRIVER/FatFs/source/ff.c **** 	st_word(dir + LDIR_FstClusLO, 0);
 1004              		.loc 1 1973 2 is_stmt 1 view .LVU324
 1005 0014 2146     		mov	r1, r4
 1006              	.LVL125:
 1007              		.loc 1 1973 2 is_stmt 0 view .LVU325
 1008 0016 07F11A00 		add	r0, r7, #26
 1009              	.LVL126:
 1010              		.loc 1 1973 2 view .LVU326
 1011 001a FFF7FEFF 		bl	st_word
 1012              	.LVL127:
1974:DRIVER/FatFs/source/ff.c **** 
1975:DRIVER/FatFs/source/ff.c **** 	i = (ord - 1) * 13;				/* Get offset in the LFN working buffer */
 1013              		.loc 1 1975 2 is_stmt 1 view .LVU327
 1014              		.loc 1 1975 11 is_stmt 0 view .LVU328
 1015 001e 09F1FF36 		add	r6, r9, #-1
 1016              		.loc 1 1975 16 view .LVU329
 1017 0022 06EB4603 		add	r3, r6, r6, lsl #1
 1018              		.loc 1 1975 4 view .LVU330
 1019 0026 06EB8306 		add	r6, r6, r3, lsl #2
 1020              	.LVL128:
1976:DRIVER/FatFs/source/ff.c **** 	s = wc = 0;
 1021              		.loc 1 1976 2 is_stmt 1 view .LVU331
 1022              		.loc 1 1976 9 is_stmt 0 view .LVU332
 1023 002a 2546     		mov	r5, r4
 1024 002c 02E0     		b	.L69
 1025              	.LVL129:
 1026              	.L68:
1977:DRIVER/FatFs/source/ff.c **** 	do {
1978:DRIVER/FatFs/source/ff.c **** 		if (wc != 0xFFFF) wc = lfn[i++];	/* Get an effective character */
1979:DRIVER/FatFs/source/ff.c **** 		st_word(dir + LfnOfs[s], wc);		/* Put it */
1980:DRIVER/FatFs/source/ff.c **** 		if (wc == 0) wc = 0xFFFF;			/* Padding characters for following items */
1981:DRIVER/FatFs/source/ff.c **** 	} while (++s < 13);
 1027              		.loc 1 1981 15 is_stmt 1 view .LVU333
 1028 002e 0134     		adds	r4, r4, #1
 1029              	.LVL130:
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 55


 1030              		.loc 1 1981 15 is_stmt 0 view .LVU334
 1031 0030 0C2C     		cmp	r4, #12
 1032 0032 11D8     		bhi	.L74
 1033              	.LVL131:
 1034              	.L69:
1977:DRIVER/FatFs/source/ff.c **** 	do {
 1035              		.loc 1 1977 2 is_stmt 1 view .LVU335
1978:DRIVER/FatFs/source/ff.c **** 		st_word(dir + LfnOfs[s], wc);		/* Put it */
 1036              		.loc 1 1978 3 view .LVU336
1978:DRIVER/FatFs/source/ff.c **** 		st_word(dir + LfnOfs[s], wc);		/* Put it */
 1037              		.loc 1 1978 6 is_stmt 0 view .LVU337
 1038 0034 4FF6FF73 		movw	r3, #65535
 1039 0038 9D42     		cmp	r5, r3
 1040 003a 02D0     		beq	.L67
1978:DRIVER/FatFs/source/ff.c **** 		st_word(dir + LfnOfs[s], wc);		/* Put it */
 1041              		.loc 1 1978 21 is_stmt 1 discriminator 1 view .LVU338
 1042              	.LVL132:
1978:DRIVER/FatFs/source/ff.c **** 		st_word(dir + LfnOfs[s], wc);		/* Put it */
 1043              		.loc 1 1978 24 is_stmt 0 discriminator 1 view .LVU339
 1044 003c 38F81650 		ldrh	r5, [r8, r6, lsl #1]
 1045              	.LVL133:
1978:DRIVER/FatFs/source/ff.c **** 		st_word(dir + LfnOfs[s], wc);		/* Put it */
 1046              		.loc 1 1978 31 discriminator 1 view .LVU340
 1047 0040 0136     		adds	r6, r6, #1
 1048              	.LVL134:
 1049              	.L67:
1979:DRIVER/FatFs/source/ff.c **** 		if (wc == 0) wc = 0xFFFF;			/* Padding characters for following items */
 1050              		.loc 1 1979 3 is_stmt 1 view .LVU341
1979:DRIVER/FatFs/source/ff.c **** 		if (wc == 0) wc = 0xFFFF;			/* Padding characters for following items */
 1051              		.loc 1 1979 23 is_stmt 0 view .LVU342
 1052 0042 0C4B     		ldr	r3, .L75
 1053 0044 185D     		ldrb	r0, [r3, r4]	@ zero_extendqisi2
1979:DRIVER/FatFs/source/ff.c **** 		if (wc == 0) wc = 0xFFFF;			/* Padding characters for following items */
 1054              		.loc 1 1979 3 view .LVU343
 1055 0046 2946     		mov	r1, r5
 1056 0048 3844     		add	r0, r0, r7
 1057 004a FFF7FEFF 		bl	st_word
 1058              	.LVL135:
1980:DRIVER/FatFs/source/ff.c **** 	} while (++s < 13);
 1059              		.loc 1 1980 3 is_stmt 1 view .LVU344
1980:DRIVER/FatFs/source/ff.c **** 	} while (++s < 13);
 1060              		.loc 1 1980 6 is_stmt 0 view .LVU345
 1061 004e 002D     		cmp	r5, #0
 1062 0050 EDD1     		bne	.L68
1980:DRIVER/FatFs/source/ff.c **** 	} while (++s < 13);
 1063              		.loc 1 1980 19 view .LVU346
 1064 0052 4FF6FF75 		movw	r5, #65535
 1065              	.LVL136:
1980:DRIVER/FatFs/source/ff.c **** 	} while (++s < 13);
 1066              		.loc 1 1980 19 view .LVU347
 1067 0056 EAE7     		b	.L68
 1068              	.LVL137:
 1069              	.L74:
1982:DRIVER/FatFs/source/ff.c **** 	if (wc == 0xFFFF || !lfn[i]) ord |= LLEF;	/* Last LFN part is the start of LFN sequence */
 1070              		.loc 1 1982 2 is_stmt 1 view .LVU348
 1071              		.loc 1 1982 5 is_stmt 0 view .LVU349
 1072 0058 4FF6FF73 		movw	r3, #65535
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 56


 1073 005c 9D42     		cmp	r5, r3
 1074 005e 02D0     		beq	.L70
 1075              		.loc 1 1982 26 discriminator 2 view .LVU350
 1076 0060 38F81630 		ldrh	r3, [r8, r6, lsl #1]
 1077              		.loc 1 1982 19 discriminator 2 view .LVU351
 1078 0064 0BB9     		cbnz	r3, .L71
 1079              	.L70:
 1080              		.loc 1 1982 31 is_stmt 1 discriminator 3 view .LVU352
 1081              		.loc 1 1982 35 is_stmt 0 discriminator 3 view .LVU353
 1082 0066 49F04009 		orr	r9, r9, #64
 1083              	.LVL138:
 1084              	.L71:
1983:DRIVER/FatFs/source/ff.c **** 	dir[LDIR_Ord] = ord;			/* Set the LFN order */
 1085              		.loc 1 1983 2 is_stmt 1 view .LVU354
 1086              		.loc 1 1983 16 is_stmt 0 view .LVU355
 1087 006a 87F80090 		strb	r9, [r7]
1984:DRIVER/FatFs/source/ff.c **** }
 1088              		.loc 1 1984 1 view .LVU356
 1089 006e BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 1090              	.LVL139:
 1091              	.L76:
 1092              		.loc 1 1984 1 view .LVU357
 1093 0072 00BF     		.align	2
 1094              	.L75:
 1095 0074 00000000 		.word	LfnOfs
 1096              		.cfi_endproc
 1097              	.LFE24:
 1099              		.section	.text.sum_sfn,"ax",%progbits
 1100              		.align	1
 1101              		.syntax unified
 1102              		.thumb
 1103              		.thumb_func
 1105              	sum_sfn:
 1106              	.LVL140:
 1107              	.LFB26:
1985:DRIVER/FatFs/source/ff.c **** 
1986:DRIVER/FatFs/source/ff.c **** #endif	/* !FF_FS_READONLY */
1987:DRIVER/FatFs/source/ff.c **** #endif	/* FF_USE_LFN */
1988:DRIVER/FatFs/source/ff.c **** 
1989:DRIVER/FatFs/source/ff.c **** 
1990:DRIVER/FatFs/source/ff.c **** 
1991:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN && !FF_FS_READONLY
1992:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
1993:DRIVER/FatFs/source/ff.c **** /* FAT-LFN: Create a Numbered SFN                                        */
1994:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
1995:DRIVER/FatFs/source/ff.c **** 
1996:DRIVER/FatFs/source/ff.c **** static void gen_numname (
1997:DRIVER/FatFs/source/ff.c **** 	BYTE* dst,			/* Pointer to the buffer to store numbered SFN */
1998:DRIVER/FatFs/source/ff.c **** 	const BYTE* src,	/* Pointer to SFN in directory form */
1999:DRIVER/FatFs/source/ff.c **** 	const WCHAR* lfn,	/* Pointer to LFN */
2000:DRIVER/FatFs/source/ff.c **** 	UINT seq			/* Sequence number */
2001:DRIVER/FatFs/source/ff.c **** )
2002:DRIVER/FatFs/source/ff.c **** {
2003:DRIVER/FatFs/source/ff.c **** 	BYTE ns[8], c;
2004:DRIVER/FatFs/source/ff.c **** 	UINT i, j;
2005:DRIVER/FatFs/source/ff.c **** 	WCHAR wc;
2006:DRIVER/FatFs/source/ff.c **** 	DWORD sreg;
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 57


2007:DRIVER/FatFs/source/ff.c **** 
2008:DRIVER/FatFs/source/ff.c **** 
2009:DRIVER/FatFs/source/ff.c **** 	memcpy(dst, src, 11);	/* Prepare the SFN to be modified */
2010:DRIVER/FatFs/source/ff.c **** 
2011:DRIVER/FatFs/source/ff.c **** 	if (seq > 5) {	/* In case of many collisions, generate a hash number instead of sequential number 
2012:DRIVER/FatFs/source/ff.c **** 		sreg = seq;
2013:DRIVER/FatFs/source/ff.c **** 		while (*lfn) {	/* Create a CRC as hash value */
2014:DRIVER/FatFs/source/ff.c **** 			wc = *lfn++;
2015:DRIVER/FatFs/source/ff.c **** 			for (i = 0; i < 16; i++) {
2016:DRIVER/FatFs/source/ff.c **** 				sreg = (sreg << 1) + (wc & 1);
2017:DRIVER/FatFs/source/ff.c **** 				wc >>= 1;
2018:DRIVER/FatFs/source/ff.c **** 				if (sreg & 0x10000) sreg ^= 0x11021;
2019:DRIVER/FatFs/source/ff.c **** 			}
2020:DRIVER/FatFs/source/ff.c **** 		}
2021:DRIVER/FatFs/source/ff.c **** 		seq = (UINT)sreg;
2022:DRIVER/FatFs/source/ff.c **** 	}
2023:DRIVER/FatFs/source/ff.c **** 
2024:DRIVER/FatFs/source/ff.c **** 	/* Make suffix (~ + hexadecimal) */
2025:DRIVER/FatFs/source/ff.c **** 	i = 7;
2026:DRIVER/FatFs/source/ff.c **** 	do {
2027:DRIVER/FatFs/source/ff.c **** 		c = (BYTE)((seq % 16) + '0'); seq /= 16;
2028:DRIVER/FatFs/source/ff.c **** 		if (c > '9') c += 7;
2029:DRIVER/FatFs/source/ff.c **** 		ns[i--] = c;
2030:DRIVER/FatFs/source/ff.c **** 	} while (i && seq);
2031:DRIVER/FatFs/source/ff.c **** 	ns[i] = '~';
2032:DRIVER/FatFs/source/ff.c **** 
2033:DRIVER/FatFs/source/ff.c **** 	/* Append the suffix to the SFN body */
2034:DRIVER/FatFs/source/ff.c **** 	for (j = 0; j < i && dst[j] != ' '; j++) {	/* Find the offset to append */
2035:DRIVER/FatFs/source/ff.c **** 		if (dbc_1st(dst[j])) {	/* To avoid DBC break up */
2036:DRIVER/FatFs/source/ff.c **** 			if (j == i - 1) break;
2037:DRIVER/FatFs/source/ff.c **** 			j++;
2038:DRIVER/FatFs/source/ff.c **** 		}
2039:DRIVER/FatFs/source/ff.c **** 	}
2040:DRIVER/FatFs/source/ff.c **** 	do {	/* Append the suffix */
2041:DRIVER/FatFs/source/ff.c **** 		dst[j++] = (i < 8) ? ns[i++] : ' ';
2042:DRIVER/FatFs/source/ff.c **** 	} while (j < 8);
2043:DRIVER/FatFs/source/ff.c **** }
2044:DRIVER/FatFs/source/ff.c **** #endif	/* FF_USE_LFN && !FF_FS_READONLY */
2045:DRIVER/FatFs/source/ff.c **** 
2046:DRIVER/FatFs/source/ff.c **** 
2047:DRIVER/FatFs/source/ff.c **** 
2048:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN
2049:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
2050:DRIVER/FatFs/source/ff.c **** /* FAT-LFN: Calculate checksum of an SFN entry                           */
2051:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
2052:DRIVER/FatFs/source/ff.c **** 
2053:DRIVER/FatFs/source/ff.c **** static BYTE sum_sfn (
2054:DRIVER/FatFs/source/ff.c **** 	const BYTE* dir		/* Pointer to the SFN entry */
2055:DRIVER/FatFs/source/ff.c **** )
2056:DRIVER/FatFs/source/ff.c **** {
 1108              		.loc 1 2056 1 is_stmt 1 view -0
 1109              		.cfi_startproc
 1110              		@ args = 0, pretend = 0, frame = 0
 1111              		@ frame_needed = 0, uses_anonymous_args = 0
 1112              		@ link register save eliminated.
 1113              		.loc 1 2056 1 is_stmt 0 view .LVU359
 1114 0000 0146     		mov	r1, r0
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 58


2057:DRIVER/FatFs/source/ff.c **** 	BYTE sum = 0;
 1115              		.loc 1 2057 2 is_stmt 1 view .LVU360
 1116              	.LVL141:
2058:DRIVER/FatFs/source/ff.c **** 	UINT n = 11;
 1117              		.loc 1 2058 2 view .LVU361
 1118              		.loc 1 2058 7 is_stmt 0 view .LVU362
 1119 0002 4FF00B0C 		mov	ip, #11
2057:DRIVER/FatFs/source/ff.c **** 	BYTE sum = 0;
 1120              		.loc 1 2057 7 view .LVU363
 1121 0006 0020     		movs	r0, #0
 1122              	.LVL142:
 1123              	.L78:
2059:DRIVER/FatFs/source/ff.c **** 
2060:DRIVER/FatFs/source/ff.c **** 	do {
 1124              		.loc 1 2060 2 is_stmt 1 discriminator 1 view .LVU364
2061:DRIVER/FatFs/source/ff.c **** 		sum = (sum >> 1) + (sum << 7) + *dir++;
 1125              		.loc 1 2061 3 discriminator 1 view .LVU365
 1126              		.loc 1 2061 20 is_stmt 0 discriminator 1 view .LVU366
 1127 0008 C301     		lsls	r3, r0, #7
 1128 000a 43EA5003 		orr	r3, r3, r0, lsr #1
 1129 000e DBB2     		uxtb	r3, r3
 1130              		.loc 1 2061 35 discriminator 1 view .LVU367
 1131 0010 0A78     		ldrb	r2, [r1]	@ zero_extendqisi2
 1132 0012 0131     		adds	r1, r1, #1
 1133              	.LVL143:
 1134              		.loc 1 2061 7 discriminator 1 view .LVU368
 1135 0014 1344     		add	r3, r3, r2
 1136 0016 D8B2     		uxtb	r0, r3
 1137              	.LVL144:
2062:DRIVER/FatFs/source/ff.c **** 	} while (--n);
 1138              		.loc 1 2062 11 is_stmt 1 discriminator 1 view .LVU369
 1139              		.loc 1 2062 11 is_stmt 0 discriminator 1 view .LVU370
 1140 0018 BCF1010C 		subs	ip, ip, #1
 1141              	.LVL145:
 1142              		.loc 1 2062 11 discriminator 1 view .LVU371
 1143 001c F4D1     		bne	.L78
2063:DRIVER/FatFs/source/ff.c **** 	return sum;
 1144              		.loc 1 2063 2 is_stmt 1 view .LVU372
2064:DRIVER/FatFs/source/ff.c **** }
 1145              		.loc 1 2064 1 is_stmt 0 view .LVU373
 1146 001e 7047     		bx	lr
 1147              		.cfi_endproc
 1148              	.LFE26:
 1150              		.section	.text.get_ldnumber,"ax",%progbits
 1151              		.align	1
 1152              		.syntax unified
 1153              		.thumb
 1154              		.thumb_func
 1156              	get_ldnumber:
 1157              	.LVL146:
 1158              	.LFB34:
2065:DRIVER/FatFs/source/ff.c **** 
2066:DRIVER/FatFs/source/ff.c **** #endif	/* FF_USE_LFN */
2067:DRIVER/FatFs/source/ff.c **** 
2068:DRIVER/FatFs/source/ff.c **** 
2069:DRIVER/FatFs/source/ff.c **** 
2070:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 59


2071:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
2072:DRIVER/FatFs/source/ff.c **** /* exFAT: Checksum                                                       */
2073:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
2074:DRIVER/FatFs/source/ff.c **** 
2075:DRIVER/FatFs/source/ff.c **** static WORD xdir_sum (	/* Get checksum of the directoly entry block */
2076:DRIVER/FatFs/source/ff.c **** 	const BYTE* dir		/* Directory entry block to be calculated */
2077:DRIVER/FatFs/source/ff.c **** )
2078:DRIVER/FatFs/source/ff.c **** {
2079:DRIVER/FatFs/source/ff.c **** 	UINT i, szblk;
2080:DRIVER/FatFs/source/ff.c **** 	WORD sum;
2081:DRIVER/FatFs/source/ff.c **** 
2082:DRIVER/FatFs/source/ff.c **** 
2083:DRIVER/FatFs/source/ff.c **** 	szblk = (dir[XDIR_NumSec] + 1) * SZDIRE;	/* Number of bytes of the entry block */
2084:DRIVER/FatFs/source/ff.c **** 	for (i = sum = 0; i < szblk; i++) {
2085:DRIVER/FatFs/source/ff.c **** 		if (i == XDIR_SetSum) {	/* Skip 2-byte sum field */
2086:DRIVER/FatFs/source/ff.c **** 			i++;
2087:DRIVER/FatFs/source/ff.c **** 		} else {
2088:DRIVER/FatFs/source/ff.c **** 			sum = ((sum & 1) ? 0x8000 : 0) + (sum >> 1) + dir[i];
2089:DRIVER/FatFs/source/ff.c **** 		}
2090:DRIVER/FatFs/source/ff.c **** 	}
2091:DRIVER/FatFs/source/ff.c **** 	return sum;
2092:DRIVER/FatFs/source/ff.c **** }
2093:DRIVER/FatFs/source/ff.c **** 
2094:DRIVER/FatFs/source/ff.c **** 
2095:DRIVER/FatFs/source/ff.c **** 
2096:DRIVER/FatFs/source/ff.c **** static WORD xname_sum (	/* Get check sum (to be used as hash) of the file name */
2097:DRIVER/FatFs/source/ff.c **** 	const WCHAR* name	/* File name to be calculated */
2098:DRIVER/FatFs/source/ff.c **** )
2099:DRIVER/FatFs/source/ff.c **** {
2100:DRIVER/FatFs/source/ff.c **** 	WCHAR chr;
2101:DRIVER/FatFs/source/ff.c **** 	WORD sum = 0;
2102:DRIVER/FatFs/source/ff.c **** 
2103:DRIVER/FatFs/source/ff.c **** 
2104:DRIVER/FatFs/source/ff.c **** 	while ((chr = *name++) != 0) {
2105:DRIVER/FatFs/source/ff.c **** 		chr = (WCHAR)ff_wtoupper(chr);		/* File name needs to be up-case converted */
2106:DRIVER/FatFs/source/ff.c **** 		sum = ((sum & 1) ? 0x8000 : 0) + (sum >> 1) + (chr & 0xFF);
2107:DRIVER/FatFs/source/ff.c **** 		sum = ((sum & 1) ? 0x8000 : 0) + (sum >> 1) + (chr >> 8);
2108:DRIVER/FatFs/source/ff.c **** 	}
2109:DRIVER/FatFs/source/ff.c **** 	return sum;
2110:DRIVER/FatFs/source/ff.c **** }
2111:DRIVER/FatFs/source/ff.c **** 
2112:DRIVER/FatFs/source/ff.c **** 
2113:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY && FF_USE_MKFS
2114:DRIVER/FatFs/source/ff.c **** static DWORD xsum32 (	/* Returns 32-bit checksum */
2115:DRIVER/FatFs/source/ff.c **** 	BYTE  dat,			/* Byte to be calculated (byte-by-byte processing) */
2116:DRIVER/FatFs/source/ff.c **** 	DWORD sum			/* Previous sum value */
2117:DRIVER/FatFs/source/ff.c **** )
2118:DRIVER/FatFs/source/ff.c **** {
2119:DRIVER/FatFs/source/ff.c **** 	sum = ((sum & 1) ? 0x80000000 : 0) + (sum >> 1) + dat;
2120:DRIVER/FatFs/source/ff.c **** 	return sum;
2121:DRIVER/FatFs/source/ff.c **** }
2122:DRIVER/FatFs/source/ff.c **** #endif
2123:DRIVER/FatFs/source/ff.c **** 
2124:DRIVER/FatFs/source/ff.c **** 
2125:DRIVER/FatFs/source/ff.c **** 
2126:DRIVER/FatFs/source/ff.c **** /*------------------------------------*/
2127:DRIVER/FatFs/source/ff.c **** /* exFAT: Get a directory entry block */
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 60


2128:DRIVER/FatFs/source/ff.c **** /*------------------------------------*/
2129:DRIVER/FatFs/source/ff.c **** 
2130:DRIVER/FatFs/source/ff.c **** static FRESULT load_xdir (	/* FR_INT_ERR: invalid entry block */
2131:DRIVER/FatFs/source/ff.c **** 	DIR* dp					/* Reading directory object pointing top of the entry block to load */
2132:DRIVER/FatFs/source/ff.c **** )
2133:DRIVER/FatFs/source/ff.c **** {
2134:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
2135:DRIVER/FatFs/source/ff.c **** 	UINT i, sz_ent;
2136:DRIVER/FatFs/source/ff.c **** 	BYTE *dirb = dp->obj.fs->dirbuf;	/* Pointer to the on-memory directory entry block 85+C0+C1s */
2137:DRIVER/FatFs/source/ff.c **** 
2138:DRIVER/FatFs/source/ff.c **** 
2139:DRIVER/FatFs/source/ff.c **** 	/* Load file directory entry */
2140:DRIVER/FatFs/source/ff.c **** 	res = move_window(dp->obj.fs, dp->sect);
2141:DRIVER/FatFs/source/ff.c **** 	if (res != FR_OK) return res;
2142:DRIVER/FatFs/source/ff.c **** 	if (dp->dir[XDIR_Type] != ET_FILEDIR) return FR_INT_ERR;	/* Invalid order */
2143:DRIVER/FatFs/source/ff.c **** 	memcpy(dirb + 0 * SZDIRE, dp->dir, SZDIRE);
2144:DRIVER/FatFs/source/ff.c **** 	sz_ent = (dirb[XDIR_NumSec] + 1) * SZDIRE;
2145:DRIVER/FatFs/source/ff.c **** 	if (sz_ent < 3 * SZDIRE || sz_ent > 19 * SZDIRE) return FR_INT_ERR;
2146:DRIVER/FatFs/source/ff.c **** 
2147:DRIVER/FatFs/source/ff.c **** 	/* Load stream extension entry */
2148:DRIVER/FatFs/source/ff.c **** 	res = dir_next(dp, 0);
2149:DRIVER/FatFs/source/ff.c **** 	if (res == FR_NO_FILE) res = FR_INT_ERR;	/* It cannot be */
2150:DRIVER/FatFs/source/ff.c **** 	if (res != FR_OK) return res;
2151:DRIVER/FatFs/source/ff.c **** 	res = move_window(dp->obj.fs, dp->sect);
2152:DRIVER/FatFs/source/ff.c **** 	if (res != FR_OK) return res;
2153:DRIVER/FatFs/source/ff.c **** 	if (dp->dir[XDIR_Type] != ET_STREAM) return FR_INT_ERR;	/* Invalid order */
2154:DRIVER/FatFs/source/ff.c **** 	memcpy(dirb + 1 * SZDIRE, dp->dir, SZDIRE);
2155:DRIVER/FatFs/source/ff.c **** 	if (MAXDIRB(dirb[XDIR_NumName]) > sz_ent) return FR_INT_ERR;
2156:DRIVER/FatFs/source/ff.c **** 
2157:DRIVER/FatFs/source/ff.c **** 	/* Load file name entries */
2158:DRIVER/FatFs/source/ff.c **** 	i = 2 * SZDIRE;	/* Name offset to load */
2159:DRIVER/FatFs/source/ff.c **** 	do {
2160:DRIVER/FatFs/source/ff.c **** 		res = dir_next(dp, 0);
2161:DRIVER/FatFs/source/ff.c **** 		if (res == FR_NO_FILE) res = FR_INT_ERR;	/* It cannot be */
2162:DRIVER/FatFs/source/ff.c **** 		if (res != FR_OK) return res;
2163:DRIVER/FatFs/source/ff.c **** 		res = move_window(dp->obj.fs, dp->sect);
2164:DRIVER/FatFs/source/ff.c **** 		if (res != FR_OK) return res;
2165:DRIVER/FatFs/source/ff.c **** 		if (dp->dir[XDIR_Type] != ET_FILENAME) return FR_INT_ERR;	/* Invalid order */
2166:DRIVER/FatFs/source/ff.c **** 		if (i < MAXDIRB(FF_MAX_LFN)) memcpy(dirb + i, dp->dir, SZDIRE);
2167:DRIVER/FatFs/source/ff.c **** 	} while ((i += SZDIRE) < sz_ent);
2168:DRIVER/FatFs/source/ff.c **** 
2169:DRIVER/FatFs/source/ff.c **** 	/* Sanity check (do it for only accessible object) */
2170:DRIVER/FatFs/source/ff.c **** 	if (i <= MAXDIRB(FF_MAX_LFN)) {
2171:DRIVER/FatFs/source/ff.c **** 		if (xdir_sum(dirb) != ld_word(dirb + XDIR_SetSum)) return FR_INT_ERR;
2172:DRIVER/FatFs/source/ff.c **** 	}
2173:DRIVER/FatFs/source/ff.c **** 	return FR_OK;
2174:DRIVER/FatFs/source/ff.c **** }
2175:DRIVER/FatFs/source/ff.c **** 
2176:DRIVER/FatFs/source/ff.c **** 
2177:DRIVER/FatFs/source/ff.c **** /*------------------------------------------------------------------*/
2178:DRIVER/FatFs/source/ff.c **** /* exFAT: Initialize object allocation info with loaded entry block */
2179:DRIVER/FatFs/source/ff.c **** /*------------------------------------------------------------------*/
2180:DRIVER/FatFs/source/ff.c **** 
2181:DRIVER/FatFs/source/ff.c **** static void init_alloc_info (
2182:DRIVER/FatFs/source/ff.c **** 	FATFS* fs,		/* Filesystem object */
2183:DRIVER/FatFs/source/ff.c **** 	FFOBJID* obj	/* Object allocation information to be initialized */
2184:DRIVER/FatFs/source/ff.c **** )
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 61


2185:DRIVER/FatFs/source/ff.c **** {
2186:DRIVER/FatFs/source/ff.c **** 	obj->sclust = ld_dword(fs->dirbuf + XDIR_FstClus);		/* Start cluster */
2187:DRIVER/FatFs/source/ff.c **** 	obj->objsize = ld_qword(fs->dirbuf + XDIR_FileSize);	/* Size */
2188:DRIVER/FatFs/source/ff.c **** 	obj->stat = fs->dirbuf[XDIR_GenFlags] & 2;				/* Allocation status */
2189:DRIVER/FatFs/source/ff.c **** 	obj->n_frag = 0;										/* No last fragment info */
2190:DRIVER/FatFs/source/ff.c **** }
2191:DRIVER/FatFs/source/ff.c **** 
2192:DRIVER/FatFs/source/ff.c **** 
2193:DRIVER/FatFs/source/ff.c **** 
2194:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY || FF_FS_RPATH != 0
2195:DRIVER/FatFs/source/ff.c **** /*------------------------------------------------*/
2196:DRIVER/FatFs/source/ff.c **** /* exFAT: Load the object's directory entry block */
2197:DRIVER/FatFs/source/ff.c **** /*------------------------------------------------*/
2198:DRIVER/FatFs/source/ff.c **** 
2199:DRIVER/FatFs/source/ff.c **** static FRESULT load_obj_xdir (
2200:DRIVER/FatFs/source/ff.c **** 	DIR* dp,			/* Blank directory object to be used to access containing directory */
2201:DRIVER/FatFs/source/ff.c **** 	const FFOBJID* obj	/* Object with its containing directory information */
2202:DRIVER/FatFs/source/ff.c **** )
2203:DRIVER/FatFs/source/ff.c **** {
2204:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
2205:DRIVER/FatFs/source/ff.c **** 
2206:DRIVER/FatFs/source/ff.c **** 	/* Open object containing directory */
2207:DRIVER/FatFs/source/ff.c **** 	dp->obj.fs = obj->fs;
2208:DRIVER/FatFs/source/ff.c **** 	dp->obj.sclust = obj->c_scl;
2209:DRIVER/FatFs/source/ff.c **** 	dp->obj.stat = (BYTE)obj->c_size;
2210:DRIVER/FatFs/source/ff.c **** 	dp->obj.objsize = obj->c_size & 0xFFFFFF00;
2211:DRIVER/FatFs/source/ff.c **** 	dp->obj.n_frag = 0;
2212:DRIVER/FatFs/source/ff.c **** 	dp->blk_ofs = obj->c_ofs;
2213:DRIVER/FatFs/source/ff.c **** 
2214:DRIVER/FatFs/source/ff.c **** 	res = dir_sdi(dp, dp->blk_ofs);	/* Goto object's entry block */
2215:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
2216:DRIVER/FatFs/source/ff.c **** 		res = load_xdir(dp);		/* Load the object's entry block */
2217:DRIVER/FatFs/source/ff.c **** 	}
2218:DRIVER/FatFs/source/ff.c **** 	return res;
2219:DRIVER/FatFs/source/ff.c **** }
2220:DRIVER/FatFs/source/ff.c **** #endif
2221:DRIVER/FatFs/source/ff.c **** 
2222:DRIVER/FatFs/source/ff.c **** 
2223:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY
2224:DRIVER/FatFs/source/ff.c **** /*----------------------------------------*/
2225:DRIVER/FatFs/source/ff.c **** /* exFAT: Store the directory entry block */
2226:DRIVER/FatFs/source/ff.c **** /*----------------------------------------*/
2227:DRIVER/FatFs/source/ff.c **** 
2228:DRIVER/FatFs/source/ff.c **** static FRESULT store_xdir (
2229:DRIVER/FatFs/source/ff.c **** 	DIR* dp				/* Pointer to the directory object */
2230:DRIVER/FatFs/source/ff.c **** )
2231:DRIVER/FatFs/source/ff.c **** {
2232:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
2233:DRIVER/FatFs/source/ff.c **** 	UINT nent;
2234:DRIVER/FatFs/source/ff.c **** 	BYTE *dirb = dp->obj.fs->dirbuf;	/* Pointer to the directory entry block 85+C0+C1s */
2235:DRIVER/FatFs/source/ff.c **** 
2236:DRIVER/FatFs/source/ff.c **** 	/* Create set sum */
2237:DRIVER/FatFs/source/ff.c **** 	st_word(dirb + XDIR_SetSum, xdir_sum(dirb));
2238:DRIVER/FatFs/source/ff.c **** 	nent = dirb[XDIR_NumSec] + 1;
2239:DRIVER/FatFs/source/ff.c **** 
2240:DRIVER/FatFs/source/ff.c **** 	/* Store the directory entry block to the directory */
2241:DRIVER/FatFs/source/ff.c **** 	res = dir_sdi(dp, dp->blk_ofs);
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 62


2242:DRIVER/FatFs/source/ff.c **** 	while (res == FR_OK) {
2243:DRIVER/FatFs/source/ff.c **** 		res = move_window(dp->obj.fs, dp->sect);
2244:DRIVER/FatFs/source/ff.c **** 		if (res != FR_OK) break;
2245:DRIVER/FatFs/source/ff.c **** 		memcpy(dp->dir, dirb, SZDIRE);
2246:DRIVER/FatFs/source/ff.c **** 		dp->obj.fs->wflag = 1;
2247:DRIVER/FatFs/source/ff.c **** 		if (--nent == 0) break;
2248:DRIVER/FatFs/source/ff.c **** 		dirb += SZDIRE;
2249:DRIVER/FatFs/source/ff.c **** 		res = dir_next(dp, 0);
2250:DRIVER/FatFs/source/ff.c **** 	}
2251:DRIVER/FatFs/source/ff.c **** 	return (res == FR_OK || res == FR_DISK_ERR) ? res : FR_INT_ERR;
2252:DRIVER/FatFs/source/ff.c **** }
2253:DRIVER/FatFs/source/ff.c **** 
2254:DRIVER/FatFs/source/ff.c **** 
2255:DRIVER/FatFs/source/ff.c **** 
2256:DRIVER/FatFs/source/ff.c **** /*-------------------------------------------*/
2257:DRIVER/FatFs/source/ff.c **** /* exFAT: Create a new directory entry block */
2258:DRIVER/FatFs/source/ff.c **** /*-------------------------------------------*/
2259:DRIVER/FatFs/source/ff.c **** 
2260:DRIVER/FatFs/source/ff.c **** static void create_xdir (
2261:DRIVER/FatFs/source/ff.c **** 	BYTE* dirb,			/* Pointer to the directory entry block buffer */
2262:DRIVER/FatFs/source/ff.c **** 	const WCHAR* lfn	/* Pointer to the object name */
2263:DRIVER/FatFs/source/ff.c **** )
2264:DRIVER/FatFs/source/ff.c **** {
2265:DRIVER/FatFs/source/ff.c **** 	UINT i;
2266:DRIVER/FatFs/source/ff.c **** 	BYTE nc1, nlen;
2267:DRIVER/FatFs/source/ff.c **** 	WCHAR wc;
2268:DRIVER/FatFs/source/ff.c **** 
2269:DRIVER/FatFs/source/ff.c **** 
2270:DRIVER/FatFs/source/ff.c **** 	/* Create file-directory and stream-extension entry */
2271:DRIVER/FatFs/source/ff.c **** 	memset(dirb, 0, 2 * SZDIRE);
2272:DRIVER/FatFs/source/ff.c **** 	dirb[0 * SZDIRE + XDIR_Type] = ET_FILEDIR;
2273:DRIVER/FatFs/source/ff.c **** 	dirb[1 * SZDIRE + XDIR_Type] = ET_STREAM;
2274:DRIVER/FatFs/source/ff.c **** 
2275:DRIVER/FatFs/source/ff.c **** 	/* Create file-name entries */
2276:DRIVER/FatFs/source/ff.c **** 	i = SZDIRE * 2;	/* Top of file_name entries */
2277:DRIVER/FatFs/source/ff.c **** 	nlen = nc1 = 0; wc = 1;
2278:DRIVER/FatFs/source/ff.c **** 	do {
2279:DRIVER/FatFs/source/ff.c **** 		dirb[i++] = ET_FILENAME; dirb[i++] = 0;
2280:DRIVER/FatFs/source/ff.c **** 		do {	/* Fill name field */
2281:DRIVER/FatFs/source/ff.c **** 			if (wc != 0 && (wc = lfn[nlen]) != 0) nlen++;	/* Get a character if exist */
2282:DRIVER/FatFs/source/ff.c **** 			st_word(dirb + i, wc); 	/* Store it */
2283:DRIVER/FatFs/source/ff.c **** 			i += 2;
2284:DRIVER/FatFs/source/ff.c **** 		} while (i % SZDIRE != 0);
2285:DRIVER/FatFs/source/ff.c **** 		nc1++;
2286:DRIVER/FatFs/source/ff.c **** 	} while (lfn[nlen]);	/* Fill next entry if any char follows */
2287:DRIVER/FatFs/source/ff.c **** 
2288:DRIVER/FatFs/source/ff.c **** 	dirb[XDIR_NumName] = nlen;		/* Set name length */
2289:DRIVER/FatFs/source/ff.c **** 	dirb[XDIR_NumSec] = 1 + nc1;	/* Set secondary count (C0 + C1s) */
2290:DRIVER/FatFs/source/ff.c **** 	st_word(dirb + XDIR_NameHash, xname_sum(lfn));	/* Set name hash */
2291:DRIVER/FatFs/source/ff.c **** }
2292:DRIVER/FatFs/source/ff.c **** 
2293:DRIVER/FatFs/source/ff.c **** #endif	/* !FF_FS_READONLY */
2294:DRIVER/FatFs/source/ff.c **** #endif	/* FF_FS_EXFAT */
2295:DRIVER/FatFs/source/ff.c **** 
2296:DRIVER/FatFs/source/ff.c **** 
2297:DRIVER/FatFs/source/ff.c **** 
2298:DRIVER/FatFs/source/ff.c **** #if FF_FS_MINIMIZE <= 1 || FF_FS_RPATH >= 2 || FF_USE_LABEL || FF_FS_EXFAT
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 63


2299:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
2300:DRIVER/FatFs/source/ff.c **** /* Read an object from the directory                                     */
2301:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
2302:DRIVER/FatFs/source/ff.c **** 
2303:DRIVER/FatFs/source/ff.c **** #define DIR_READ_FILE(dp) dir_read(dp, 0)
2304:DRIVER/FatFs/source/ff.c **** #define DIR_READ_LABEL(dp) dir_read(dp, 1)
2305:DRIVER/FatFs/source/ff.c **** 
2306:DRIVER/FatFs/source/ff.c **** static FRESULT dir_read (
2307:DRIVER/FatFs/source/ff.c **** 	DIR* dp,		/* Pointer to the directory object */
2308:DRIVER/FatFs/source/ff.c **** 	int vol			/* Filtered by 0:file/directory or 1:volume label */
2309:DRIVER/FatFs/source/ff.c **** )
2310:DRIVER/FatFs/source/ff.c **** {
2311:DRIVER/FatFs/source/ff.c **** 	FRESULT res = FR_NO_FILE;
2312:DRIVER/FatFs/source/ff.c **** 	FATFS *fs = dp->obj.fs;
2313:DRIVER/FatFs/source/ff.c **** 	BYTE attr, b;
2314:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN
2315:DRIVER/FatFs/source/ff.c **** 	BYTE ord = 0xFF, sum = 0xFF;
2316:DRIVER/FatFs/source/ff.c **** #endif
2317:DRIVER/FatFs/source/ff.c **** 
2318:DRIVER/FatFs/source/ff.c **** 	while (dp->sect) {
2319:DRIVER/FatFs/source/ff.c **** 		res = move_window(fs, dp->sect);
2320:DRIVER/FatFs/source/ff.c **** 		if (res != FR_OK) break;
2321:DRIVER/FatFs/source/ff.c **** 		b = dp->dir[DIR_Name];	/* Test for the entry type */
2322:DRIVER/FatFs/source/ff.c **** 		if (b == 0) {
2323:DRIVER/FatFs/source/ff.c **** 			res = FR_NO_FILE; break; /* Reached to end of the directory */
2324:DRIVER/FatFs/source/ff.c **** 		}
2325:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
2326:DRIVER/FatFs/source/ff.c **** 		if (fs->fs_type == FS_EXFAT) {	/* On the exFAT volume */
2327:DRIVER/FatFs/source/ff.c **** 			if (FF_USE_LABEL && vol) {
2328:DRIVER/FatFs/source/ff.c **** 				if (b == ET_VLABEL) break;	/* Volume label entry? */
2329:DRIVER/FatFs/source/ff.c **** 			} else {
2330:DRIVER/FatFs/source/ff.c **** 				if (b == ET_FILEDIR) {		/* Start of the file entry block? */
2331:DRIVER/FatFs/source/ff.c **** 					dp->blk_ofs = dp->dptr;	/* Get location of the block */
2332:DRIVER/FatFs/source/ff.c **** 					res = load_xdir(dp);	/* Load the entry block */
2333:DRIVER/FatFs/source/ff.c **** 					if (res == FR_OK) {
2334:DRIVER/FatFs/source/ff.c **** 						dp->obj.attr = fs->dirbuf[XDIR_Attr] & AM_MASK;	/* Get attribute */
2335:DRIVER/FatFs/source/ff.c **** 					}
2336:DRIVER/FatFs/source/ff.c **** 					break;
2337:DRIVER/FatFs/source/ff.c **** 				}
2338:DRIVER/FatFs/source/ff.c **** 			}
2339:DRIVER/FatFs/source/ff.c **** 		} else
2340:DRIVER/FatFs/source/ff.c **** #endif
2341:DRIVER/FatFs/source/ff.c **** 		{	/* On the FAT/FAT32 volume */
2342:DRIVER/FatFs/source/ff.c **** 			dp->obj.attr = attr = dp->dir[DIR_Attr] & AM_MASK;	/* Get attribute */
2343:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN		/* LFN configuration */
2344:DRIVER/FatFs/source/ff.c **** 			if (b == DDEM || b == '.' || (int)((attr & ~AM_ARC) == AM_VOL) != vol) {	/* An entry without val
2345:DRIVER/FatFs/source/ff.c **** 				ord = 0xFF;
2346:DRIVER/FatFs/source/ff.c **** 			} else {
2347:DRIVER/FatFs/source/ff.c **** 				if (attr == AM_LFN) {	/* An LFN entry is found */
2348:DRIVER/FatFs/source/ff.c **** 					if (b & LLEF) {		/* Is it start of an LFN sequence? */
2349:DRIVER/FatFs/source/ff.c **** 						sum = dp->dir[LDIR_Chksum];
2350:DRIVER/FatFs/source/ff.c **** 						b &= (BYTE)~LLEF; ord = b;
2351:DRIVER/FatFs/source/ff.c **** 						dp->blk_ofs = dp->dptr;
2352:DRIVER/FatFs/source/ff.c **** 					}
2353:DRIVER/FatFs/source/ff.c **** 					/* Check LFN validity and capture it */
2354:DRIVER/FatFs/source/ff.c **** 					ord = (b == ord && sum == dp->dir[LDIR_Chksum] && pick_lfn(fs->lfnbuf, dp->dir)) ? ord - 1 : 0
2355:DRIVER/FatFs/source/ff.c **** 				} else {				/* An SFN entry is found */
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 64


2356:DRIVER/FatFs/source/ff.c **** 					if (ord != 0 || sum != sum_sfn(dp->dir)) {	/* Is there a valid LFN? */
2357:DRIVER/FatFs/source/ff.c **** 						dp->blk_ofs = 0xFFFFFFFF;	/* It has no LFN. */
2358:DRIVER/FatFs/source/ff.c **** 					}
2359:DRIVER/FatFs/source/ff.c **** 					break;
2360:DRIVER/FatFs/source/ff.c **** 				}
2361:DRIVER/FatFs/source/ff.c **** 			}
2362:DRIVER/FatFs/source/ff.c **** #else		/* Non LFN configuration */
2363:DRIVER/FatFs/source/ff.c **** 			if (b != DDEM && b != '.' && attr != AM_LFN && (int)((attr & ~AM_ARC) == AM_VOL) == vol) {	/* Is
2364:DRIVER/FatFs/source/ff.c **** 				break;
2365:DRIVER/FatFs/source/ff.c **** 			}
2366:DRIVER/FatFs/source/ff.c **** #endif
2367:DRIVER/FatFs/source/ff.c **** 		}
2368:DRIVER/FatFs/source/ff.c **** 		res = dir_next(dp, 0);		/* Next entry */
2369:DRIVER/FatFs/source/ff.c **** 		if (res != FR_OK) break;
2370:DRIVER/FatFs/source/ff.c **** 	}
2371:DRIVER/FatFs/source/ff.c **** 
2372:DRIVER/FatFs/source/ff.c **** 	if (res != FR_OK) dp->sect = 0;		/* Terminate the read operation on error or EOT */
2373:DRIVER/FatFs/source/ff.c **** 	return res;
2374:DRIVER/FatFs/source/ff.c **** }
2375:DRIVER/FatFs/source/ff.c **** 
2376:DRIVER/FatFs/source/ff.c **** #endif	/* FF_FS_MINIMIZE <= 1 || FF_USE_LABEL || FF_FS_RPATH >= 2 */
2377:DRIVER/FatFs/source/ff.c **** 
2378:DRIVER/FatFs/source/ff.c **** 
2379:DRIVER/FatFs/source/ff.c **** 
2380:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
2381:DRIVER/FatFs/source/ff.c **** /* Directory handling - Find an object in the directory                  */
2382:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
2383:DRIVER/FatFs/source/ff.c **** 
2384:DRIVER/FatFs/source/ff.c **** static FRESULT dir_find (	/* FR_OK(0):succeeded, !=0:error */
2385:DRIVER/FatFs/source/ff.c **** 	DIR* dp					/* Pointer to the directory object with the file name */
2386:DRIVER/FatFs/source/ff.c **** )
2387:DRIVER/FatFs/source/ff.c **** {
2388:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
2389:DRIVER/FatFs/source/ff.c **** 	FATFS *fs = dp->obj.fs;
2390:DRIVER/FatFs/source/ff.c **** 	BYTE c;
2391:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN
2392:DRIVER/FatFs/source/ff.c **** 	BYTE a, ord, sum;
2393:DRIVER/FatFs/source/ff.c **** #endif
2394:DRIVER/FatFs/source/ff.c **** 
2395:DRIVER/FatFs/source/ff.c **** 	res = dir_sdi(dp, 0);			/* Rewind directory object */
2396:DRIVER/FatFs/source/ff.c **** 	if (res != FR_OK) return res;
2397:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
2398:DRIVER/FatFs/source/ff.c **** 	if (fs->fs_type == FS_EXFAT) {	/* On the exFAT volume */
2399:DRIVER/FatFs/source/ff.c **** 		BYTE nc;
2400:DRIVER/FatFs/source/ff.c **** 		UINT di, ni;
2401:DRIVER/FatFs/source/ff.c **** 		WORD hash = xname_sum(fs->lfnbuf);		/* Hash value of the name to find */
2402:DRIVER/FatFs/source/ff.c **** 
2403:DRIVER/FatFs/source/ff.c **** 		while ((res = DIR_READ_FILE(dp)) == FR_OK) {	/* Read an item */
2404:DRIVER/FatFs/source/ff.c **** #if FF_MAX_LFN < 255
2405:DRIVER/FatFs/source/ff.c **** 			if (fs->dirbuf[XDIR_NumName] > FF_MAX_LFN) continue;		/* Skip comparison if inaccessible object 
2406:DRIVER/FatFs/source/ff.c **** #endif
2407:DRIVER/FatFs/source/ff.c **** 			if (ld_word(fs->dirbuf + XDIR_NameHash) != hash) continue;	/* Skip comparison if hash mismatched
2408:DRIVER/FatFs/source/ff.c **** 			for (nc = fs->dirbuf[XDIR_NumName], di = SZDIRE * 2, ni = 0; nc; nc--, di += 2, ni++) {	/* Compa
2409:DRIVER/FatFs/source/ff.c **** 				if ((di % SZDIRE) == 0) di += 2;
2410:DRIVER/FatFs/source/ff.c **** 				if (ff_wtoupper(ld_word(fs->dirbuf + di)) != ff_wtoupper(fs->lfnbuf[ni])) break;
2411:DRIVER/FatFs/source/ff.c **** 			}
2412:DRIVER/FatFs/source/ff.c **** 			if (nc == 0 && !fs->lfnbuf[ni]) break;	/* Name matched? */
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 65


2413:DRIVER/FatFs/source/ff.c **** 		}
2414:DRIVER/FatFs/source/ff.c **** 		return res;
2415:DRIVER/FatFs/source/ff.c **** 	}
2416:DRIVER/FatFs/source/ff.c **** #endif
2417:DRIVER/FatFs/source/ff.c **** 	/* On the FAT/FAT32 volume */
2418:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN
2419:DRIVER/FatFs/source/ff.c **** 	ord = sum = 0xFF; dp->blk_ofs = 0xFFFFFFFF;	/* Reset LFN sequence */
2420:DRIVER/FatFs/source/ff.c **** #endif
2421:DRIVER/FatFs/source/ff.c **** 	do {
2422:DRIVER/FatFs/source/ff.c **** 		res = move_window(fs, dp->sect);
2423:DRIVER/FatFs/source/ff.c **** 		if (res != FR_OK) break;
2424:DRIVER/FatFs/source/ff.c **** 		c = dp->dir[DIR_Name];
2425:DRIVER/FatFs/source/ff.c **** 		if (c == 0) { res = FR_NO_FILE; break; }	/* Reached to end of table */
2426:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN		/* LFN configuration */
2427:DRIVER/FatFs/source/ff.c **** 		dp->obj.attr = a = dp->dir[DIR_Attr] & AM_MASK;
2428:DRIVER/FatFs/source/ff.c **** 		if (c == DDEM || ((a & AM_VOL) && a != AM_LFN)) {	/* An entry without valid data */
2429:DRIVER/FatFs/source/ff.c **** 			ord = 0xFF; dp->blk_ofs = 0xFFFFFFFF;	/* Reset LFN sequence */
2430:DRIVER/FatFs/source/ff.c **** 		} else {
2431:DRIVER/FatFs/source/ff.c **** 			if (a == AM_LFN) {			/* An LFN entry is found */
2432:DRIVER/FatFs/source/ff.c **** 				if (!(dp->fn[NSFLAG] & NS_NOLFN)) {
2433:DRIVER/FatFs/source/ff.c **** 					if (c & LLEF) {		/* Is it start of LFN sequence? */
2434:DRIVER/FatFs/source/ff.c **** 						sum = dp->dir[LDIR_Chksum];
2435:DRIVER/FatFs/source/ff.c **** 						c &= (BYTE)~LLEF; ord = c;	/* LFN start order */
2436:DRIVER/FatFs/source/ff.c **** 						dp->blk_ofs = dp->dptr;	/* Start offset of LFN */
2437:DRIVER/FatFs/source/ff.c **** 					}
2438:DRIVER/FatFs/source/ff.c **** 					/* Check validity of the LFN entry and compare it with given name */
2439:DRIVER/FatFs/source/ff.c **** 					ord = (c == ord && sum == dp->dir[LDIR_Chksum] && cmp_lfn(fs->lfnbuf, dp->dir)) ? ord - 1 : 0x
2440:DRIVER/FatFs/source/ff.c **** 				}
2441:DRIVER/FatFs/source/ff.c **** 			} else {					/* An SFN entry is found */
2442:DRIVER/FatFs/source/ff.c **** 				if (ord == 0 && sum == sum_sfn(dp->dir)) break;	/* LFN matched? */
2443:DRIVER/FatFs/source/ff.c **** 				if (!(dp->fn[NSFLAG] & NS_LOSS) && !memcmp(dp->dir, dp->fn, 11)) break;	/* SFN matched? */
2444:DRIVER/FatFs/source/ff.c **** 				ord = 0xFF; dp->blk_ofs = 0xFFFFFFFF;	/* Reset LFN sequence */
2445:DRIVER/FatFs/source/ff.c **** 			}
2446:DRIVER/FatFs/source/ff.c **** 		}
2447:DRIVER/FatFs/source/ff.c **** #else		/* Non LFN configuration */
2448:DRIVER/FatFs/source/ff.c **** 		dp->obj.attr = dp->dir[DIR_Attr] & AM_MASK;
2449:DRIVER/FatFs/source/ff.c **** 		if (!(dp->dir[DIR_Attr] & AM_VOL) && !memcmp(dp->dir, dp->fn, 11)) break;	/* Is it a valid entry?
2450:DRIVER/FatFs/source/ff.c **** #endif
2451:DRIVER/FatFs/source/ff.c **** 		res = dir_next(dp, 0);	/* Next entry */
2452:DRIVER/FatFs/source/ff.c **** 	} while (res == FR_OK);
2453:DRIVER/FatFs/source/ff.c **** 
2454:DRIVER/FatFs/source/ff.c **** 	return res;
2455:DRIVER/FatFs/source/ff.c **** }
2456:DRIVER/FatFs/source/ff.c **** 
2457:DRIVER/FatFs/source/ff.c **** 
2458:DRIVER/FatFs/source/ff.c **** 
2459:DRIVER/FatFs/source/ff.c **** 
2460:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY
2461:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
2462:DRIVER/FatFs/source/ff.c **** /* Register an object to the directory                                   */
2463:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
2464:DRIVER/FatFs/source/ff.c **** 
2465:DRIVER/FatFs/source/ff.c **** static FRESULT dir_register (	/* FR_OK:succeeded, FR_DENIED:no free entry or too many SFN collision
2466:DRIVER/FatFs/source/ff.c **** 	DIR* dp						/* Target directory with object name to be created */
2467:DRIVER/FatFs/source/ff.c **** )
2468:DRIVER/FatFs/source/ff.c **** {
2469:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 66


2470:DRIVER/FatFs/source/ff.c **** 	FATFS *fs = dp->obj.fs;
2471:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN		/* LFN configuration */
2472:DRIVER/FatFs/source/ff.c **** 	UINT n, len, n_ent;
2473:DRIVER/FatFs/source/ff.c **** 	BYTE sn[12], sum;
2474:DRIVER/FatFs/source/ff.c **** 
2475:DRIVER/FatFs/source/ff.c **** 
2476:DRIVER/FatFs/source/ff.c **** 	if (dp->fn[NSFLAG] & (NS_DOT | NS_NONAME)) return FR_INVALID_NAME;	/* Check name validity */
2477:DRIVER/FatFs/source/ff.c **** 	for (len = 0; fs->lfnbuf[len]; len++) ;	/* Get lfn length */
2478:DRIVER/FatFs/source/ff.c **** 
2479:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
2480:DRIVER/FatFs/source/ff.c **** 	if (fs->fs_type == FS_EXFAT) {	/* On the exFAT volume */
2481:DRIVER/FatFs/source/ff.c **** 		n_ent = (len + 14) / 15 + 2;	/* Number of entries to allocate (85+C0+C1s) */
2482:DRIVER/FatFs/source/ff.c **** 		res = dir_alloc(dp, n_ent);		/* Allocate directory entries */
2483:DRIVER/FatFs/source/ff.c **** 		if (res != FR_OK) return res;
2484:DRIVER/FatFs/source/ff.c **** 		dp->blk_ofs = dp->dptr - SZDIRE * (n_ent - 1);	/* Set the allocated entry block offset */
2485:DRIVER/FatFs/source/ff.c **** 
2486:DRIVER/FatFs/source/ff.c **** 		if (dp->obj.stat & 4) {			/* Has the directory been stretched by new allocation? */
2487:DRIVER/FatFs/source/ff.c **** 			dp->obj.stat &= ~4;
2488:DRIVER/FatFs/source/ff.c **** 			res = fill_first_frag(&dp->obj);	/* Fill the first fragment on the FAT if needed */
2489:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) return res;
2490:DRIVER/FatFs/source/ff.c **** 			res = fill_last_frag(&dp->obj, dp->clust, 0xFFFFFFFF);	/* Fill the last fragment on the FAT if n
2491:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) return res;
2492:DRIVER/FatFs/source/ff.c **** 			if (dp->obj.sclust != 0) {		/* Is it a sub-directory? */
2493:DRIVER/FatFs/source/ff.c **** 				DIR dj;
2494:DRIVER/FatFs/source/ff.c **** 
2495:DRIVER/FatFs/source/ff.c **** 				res = load_obj_xdir(&dj, &dp->obj);	/* Load the object status */
2496:DRIVER/FatFs/source/ff.c **** 				if (res != FR_OK) return res;
2497:DRIVER/FatFs/source/ff.c **** 				dp->obj.objsize += (DWORD)fs->csize * SS(fs);		/* Increase the directory size by cluster size *
2498:DRIVER/FatFs/source/ff.c **** 				st_qword(fs->dirbuf + XDIR_FileSize, dp->obj.objsize);
2499:DRIVER/FatFs/source/ff.c **** 				st_qword(fs->dirbuf + XDIR_ValidFileSize, dp->obj.objsize);
2500:DRIVER/FatFs/source/ff.c **** 				fs->dirbuf[XDIR_GenFlags] = dp->obj.stat | 1;		/* Update the allocation status */
2501:DRIVER/FatFs/source/ff.c **** 				res = store_xdir(&dj);				/* Store the object status */
2502:DRIVER/FatFs/source/ff.c **** 				if (res != FR_OK) return res;
2503:DRIVER/FatFs/source/ff.c **** 			}
2504:DRIVER/FatFs/source/ff.c **** 		}
2505:DRIVER/FatFs/source/ff.c **** 
2506:DRIVER/FatFs/source/ff.c **** 		create_xdir(fs->dirbuf, fs->lfnbuf);	/* Create on-memory directory block to be written later */
2507:DRIVER/FatFs/source/ff.c **** 		return FR_OK;
2508:DRIVER/FatFs/source/ff.c **** 	}
2509:DRIVER/FatFs/source/ff.c **** #endif
2510:DRIVER/FatFs/source/ff.c **** 	/* On the FAT/FAT32 volume */
2511:DRIVER/FatFs/source/ff.c **** 	memcpy(sn, dp->fn, 12);
2512:DRIVER/FatFs/source/ff.c **** 	if (sn[NSFLAG] & NS_LOSS) {			/* When LFN is out of 8.3 format, generate a numbered name */
2513:DRIVER/FatFs/source/ff.c **** 		dp->fn[NSFLAG] = NS_NOLFN;		/* Find only SFN */
2514:DRIVER/FatFs/source/ff.c **** 		for (n = 1; n < 100; n++) {
2515:DRIVER/FatFs/source/ff.c **** 			gen_numname(dp->fn, sn, fs->lfnbuf, n);	/* Generate a numbered name */
2516:DRIVER/FatFs/source/ff.c **** 			res = dir_find(dp);				/* Check if the name collides with existing SFN */
2517:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) break;
2518:DRIVER/FatFs/source/ff.c **** 		}
2519:DRIVER/FatFs/source/ff.c **** 		if (n == 100) return FR_DENIED;		/* Abort if too many collisions */
2520:DRIVER/FatFs/source/ff.c **** 		if (res != FR_NO_FILE) return res;	/* Abort if the result is other than 'not collided' */
2521:DRIVER/FatFs/source/ff.c **** 		dp->fn[NSFLAG] = sn[NSFLAG];
2522:DRIVER/FatFs/source/ff.c **** 	}
2523:DRIVER/FatFs/source/ff.c **** 
2524:DRIVER/FatFs/source/ff.c **** 	/* Create an SFN with/without LFNs. */
2525:DRIVER/FatFs/source/ff.c **** 	n_ent = (sn[NSFLAG] & NS_LFN) ? (len + 12) / 13 + 1 : 1;	/* Number of entries to allocate */
2526:DRIVER/FatFs/source/ff.c **** 	res = dir_alloc(dp, n_ent);		/* Allocate entries */
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 67


2527:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK && --n_ent) {	/* Set LFN entry if needed */
2528:DRIVER/FatFs/source/ff.c **** 		res = dir_sdi(dp, dp->dptr - n_ent * SZDIRE);
2529:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK) {
2530:DRIVER/FatFs/source/ff.c **** 			sum = sum_sfn(dp->fn);	/* Checksum value of the SFN tied to the LFN */
2531:DRIVER/FatFs/source/ff.c **** 			do {					/* Store LFN entries in bottom first */
2532:DRIVER/FatFs/source/ff.c **** 				res = move_window(fs, dp->sect);
2533:DRIVER/FatFs/source/ff.c **** 				if (res != FR_OK) break;
2534:DRIVER/FatFs/source/ff.c **** 				put_lfn(fs->lfnbuf, dp->dir, (BYTE)n_ent, sum);
2535:DRIVER/FatFs/source/ff.c **** 				fs->wflag = 1;
2536:DRIVER/FatFs/source/ff.c **** 				res = dir_next(dp, 0);	/* Next entry */
2537:DRIVER/FatFs/source/ff.c **** 			} while (res == FR_OK && --n_ent);
2538:DRIVER/FatFs/source/ff.c **** 		}
2539:DRIVER/FatFs/source/ff.c **** 	}
2540:DRIVER/FatFs/source/ff.c **** 
2541:DRIVER/FatFs/source/ff.c **** #else	/* Non LFN configuration */
2542:DRIVER/FatFs/source/ff.c **** 	res = dir_alloc(dp, 1);		/* Allocate an entry for SFN */
2543:DRIVER/FatFs/source/ff.c **** 
2544:DRIVER/FatFs/source/ff.c **** #endif
2545:DRIVER/FatFs/source/ff.c **** 
2546:DRIVER/FatFs/source/ff.c **** 	/* Set SFN entry */
2547:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
2548:DRIVER/FatFs/source/ff.c **** 		res = move_window(fs, dp->sect);
2549:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK) {
2550:DRIVER/FatFs/source/ff.c **** 			memset(dp->dir, 0, SZDIRE);	/* Clean the entry */
2551:DRIVER/FatFs/source/ff.c **** 			memcpy(dp->dir + DIR_Name, dp->fn, 11);	/* Put SFN */
2552:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN
2553:DRIVER/FatFs/source/ff.c **** 			dp->dir[DIR_NTres] = dp->fn[NSFLAG] & (NS_BODY | NS_EXT);	/* Put NT flag */
2554:DRIVER/FatFs/source/ff.c **** #endif
2555:DRIVER/FatFs/source/ff.c **** 			fs->wflag = 1;
2556:DRIVER/FatFs/source/ff.c **** 		}
2557:DRIVER/FatFs/source/ff.c **** 	}
2558:DRIVER/FatFs/source/ff.c **** 
2559:DRIVER/FatFs/source/ff.c **** 	return res;
2560:DRIVER/FatFs/source/ff.c **** }
2561:DRIVER/FatFs/source/ff.c **** 
2562:DRIVER/FatFs/source/ff.c **** #endif /* !FF_FS_READONLY */
2563:DRIVER/FatFs/source/ff.c **** 
2564:DRIVER/FatFs/source/ff.c **** 
2565:DRIVER/FatFs/source/ff.c **** 
2566:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY && FF_FS_MINIMIZE == 0
2567:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
2568:DRIVER/FatFs/source/ff.c **** /* Remove an object from the directory                                   */
2569:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
2570:DRIVER/FatFs/source/ff.c **** 
2571:DRIVER/FatFs/source/ff.c **** static FRESULT dir_remove (	/* FR_OK:Succeeded, FR_DISK_ERR:A disk error */
2572:DRIVER/FatFs/source/ff.c **** 	DIR* dp					/* Directory object pointing the entry to be removed */
2573:DRIVER/FatFs/source/ff.c **** )
2574:DRIVER/FatFs/source/ff.c **** {
2575:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
2576:DRIVER/FatFs/source/ff.c **** 	FATFS *fs = dp->obj.fs;
2577:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN		/* LFN configuration */
2578:DRIVER/FatFs/source/ff.c **** 	DWORD last = dp->dptr;
2579:DRIVER/FatFs/source/ff.c **** 
2580:DRIVER/FatFs/source/ff.c **** 	res = (dp->blk_ofs == 0xFFFFFFFF) ? FR_OK : dir_sdi(dp, dp->blk_ofs);	/* Goto top of the entry blo
2581:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
2582:DRIVER/FatFs/source/ff.c **** 		do {
2583:DRIVER/FatFs/source/ff.c **** 			res = move_window(fs, dp->sect);
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 68


2584:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) break;
2585:DRIVER/FatFs/source/ff.c **** 			if (FF_FS_EXFAT && fs->fs_type == FS_EXFAT) {	/* On the exFAT volume */
2586:DRIVER/FatFs/source/ff.c **** 				dp->dir[XDIR_Type] &= 0x7F;	/* Clear the entry InUse flag. */
2587:DRIVER/FatFs/source/ff.c **** 			} else {										/* On the FAT/FAT32 volume */
2588:DRIVER/FatFs/source/ff.c **** 				dp->dir[DIR_Name] = DDEM;	/* Mark the entry 'deleted'. */
2589:DRIVER/FatFs/source/ff.c **** 			}
2590:DRIVER/FatFs/source/ff.c **** 			fs->wflag = 1;
2591:DRIVER/FatFs/source/ff.c **** 			if (dp->dptr >= last) break;	/* If reached last entry then all entries of the object has been de
2592:DRIVER/FatFs/source/ff.c **** 			res = dir_next(dp, 0);	/* Next entry */
2593:DRIVER/FatFs/source/ff.c **** 		} while (res == FR_OK);
2594:DRIVER/FatFs/source/ff.c **** 		if (res == FR_NO_FILE) res = FR_INT_ERR;
2595:DRIVER/FatFs/source/ff.c **** 	}
2596:DRIVER/FatFs/source/ff.c **** #else			/* Non LFN configuration */
2597:DRIVER/FatFs/source/ff.c **** 
2598:DRIVER/FatFs/source/ff.c **** 	res = move_window(fs, dp->sect);
2599:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
2600:DRIVER/FatFs/source/ff.c **** 		dp->dir[DIR_Name] = DDEM;	/* Mark the entry 'deleted'.*/
2601:DRIVER/FatFs/source/ff.c **** 		fs->wflag = 1;
2602:DRIVER/FatFs/source/ff.c **** 	}
2603:DRIVER/FatFs/source/ff.c **** #endif
2604:DRIVER/FatFs/source/ff.c **** 
2605:DRIVER/FatFs/source/ff.c **** 	return res;
2606:DRIVER/FatFs/source/ff.c **** }
2607:DRIVER/FatFs/source/ff.c **** 
2608:DRIVER/FatFs/source/ff.c **** #endif /* !FF_FS_READONLY && FF_FS_MINIMIZE == 0 */
2609:DRIVER/FatFs/source/ff.c **** 
2610:DRIVER/FatFs/source/ff.c **** 
2611:DRIVER/FatFs/source/ff.c **** 
2612:DRIVER/FatFs/source/ff.c **** #if FF_FS_MINIMIZE <= 1 || FF_FS_RPATH >= 2
2613:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
2614:DRIVER/FatFs/source/ff.c **** /* Get file information from directory entry                             */
2615:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
2616:DRIVER/FatFs/source/ff.c **** 
2617:DRIVER/FatFs/source/ff.c **** static void get_fileinfo (
2618:DRIVER/FatFs/source/ff.c **** 	DIR* dp,			/* Pointer to the directory object */
2619:DRIVER/FatFs/source/ff.c **** 	FILINFO* fno		/* Pointer to the file information to be filled */
2620:DRIVER/FatFs/source/ff.c **** )
2621:DRIVER/FatFs/source/ff.c **** {
2622:DRIVER/FatFs/source/ff.c **** 	UINT si, di;
2623:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN
2624:DRIVER/FatFs/source/ff.c **** 	BYTE lcf;
2625:DRIVER/FatFs/source/ff.c **** 	WCHAR wc, hs;
2626:DRIVER/FatFs/source/ff.c **** 	FATFS *fs = dp->obj.fs;
2627:DRIVER/FatFs/source/ff.c **** 	UINT nw;
2628:DRIVER/FatFs/source/ff.c **** #else
2629:DRIVER/FatFs/source/ff.c **** 	TCHAR c;
2630:DRIVER/FatFs/source/ff.c **** #endif
2631:DRIVER/FatFs/source/ff.c **** 
2632:DRIVER/FatFs/source/ff.c **** 
2633:DRIVER/FatFs/source/ff.c **** 	fno->fname[0] = 0;			/* Invaidate file info */
2634:DRIVER/FatFs/source/ff.c **** 	if (dp->sect == 0) return;	/* Exit if read pointer has reached end of directory */
2635:DRIVER/FatFs/source/ff.c **** 
2636:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN		/* LFN configuration */
2637:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
2638:DRIVER/FatFs/source/ff.c **** 	if (fs->fs_type == FS_EXFAT) {	/* exFAT volume */
2639:DRIVER/FatFs/source/ff.c **** 		UINT nc = 0;
2640:DRIVER/FatFs/source/ff.c **** 
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 69


2641:DRIVER/FatFs/source/ff.c **** 		si = SZDIRE * 2; di = 0;	/* 1st C1 entry in the entry block */
2642:DRIVER/FatFs/source/ff.c **** 		hs = 0;
2643:DRIVER/FatFs/source/ff.c **** 		while (nc < fs->dirbuf[XDIR_NumName]) {
2644:DRIVER/FatFs/source/ff.c **** 			if (si >= MAXDIRB(FF_MAX_LFN)) {	/* Truncated directory block? */
2645:DRIVER/FatFs/source/ff.c **** 				di = 0; break;
2646:DRIVER/FatFs/source/ff.c **** 			}
2647:DRIVER/FatFs/source/ff.c **** 			if ((si % SZDIRE) == 0) si += 2;	/* Skip entry type field */
2648:DRIVER/FatFs/source/ff.c **** 			wc = ld_word(fs->dirbuf + si); si += 2; nc++;	/* Get a character */
2649:DRIVER/FatFs/source/ff.c **** 			if (hs == 0 && IsSurrogate(wc)) {	/* Is it a surrogate? */
2650:DRIVER/FatFs/source/ff.c **** 				hs = wc; continue;				/* Get low surrogate */
2651:DRIVER/FatFs/source/ff.c **** 			}
2652:DRIVER/FatFs/source/ff.c **** 			nw = put_utf((DWORD)hs << 16 | wc, &fno->fname[di], FF_LFN_BUF - di);	/* Store it in API encodin
2653:DRIVER/FatFs/source/ff.c **** 			if (nw == 0) {						/* Buffer overflow or wrong char? */
2654:DRIVER/FatFs/source/ff.c **** 				di = 0; break;
2655:DRIVER/FatFs/source/ff.c **** 			}
2656:DRIVER/FatFs/source/ff.c **** 			di += nw;
2657:DRIVER/FatFs/source/ff.c **** 			hs = 0;
2658:DRIVER/FatFs/source/ff.c **** 		}
2659:DRIVER/FatFs/source/ff.c **** 		if (hs != 0) di = 0;					/* Broken surrogate pair? */
2660:DRIVER/FatFs/source/ff.c **** 		if (di == 0) fno->fname[di++] = '\?';	/* Inaccessible object name? */
2661:DRIVER/FatFs/source/ff.c **** 		fno->fname[di] = 0;						/* Terminate the name */
2662:DRIVER/FatFs/source/ff.c **** 		fno->altname[0] = 0;					/* exFAT does not support SFN */
2663:DRIVER/FatFs/source/ff.c **** 
2664:DRIVER/FatFs/source/ff.c **** 		fno->fattrib = fs->dirbuf[XDIR_Attr] & AM_MASKX;		/* Attribute */
2665:DRIVER/FatFs/source/ff.c **** 		fno->fsize = (fno->fattrib & AM_DIR) ? 0 : ld_qword(fs->dirbuf + XDIR_FileSize);	/* Size */
2666:DRIVER/FatFs/source/ff.c **** 		fno->ftime = ld_word(fs->dirbuf + XDIR_ModTime + 0);	/* Time */
2667:DRIVER/FatFs/source/ff.c **** 		fno->fdate = ld_word(fs->dirbuf + XDIR_ModTime + 2);	/* Date */
2668:DRIVER/FatFs/source/ff.c **** 		return;
2669:DRIVER/FatFs/source/ff.c **** 	} else
2670:DRIVER/FatFs/source/ff.c **** #endif
2671:DRIVER/FatFs/source/ff.c **** 	{	/* FAT/FAT32 volume */
2672:DRIVER/FatFs/source/ff.c **** 		if (dp->blk_ofs != 0xFFFFFFFF) {	/* Get LFN if available */
2673:DRIVER/FatFs/source/ff.c **** 			si = di = 0;
2674:DRIVER/FatFs/source/ff.c **** 			hs = 0;
2675:DRIVER/FatFs/source/ff.c **** 			while (fs->lfnbuf[si] != 0) {
2676:DRIVER/FatFs/source/ff.c **** 				wc = fs->lfnbuf[si++];		/* Get an LFN character (UTF-16) */
2677:DRIVER/FatFs/source/ff.c **** 				if (hs == 0 && IsSurrogate(wc)) {	/* Is it a surrogate? */
2678:DRIVER/FatFs/source/ff.c **** 					hs = wc; continue;		/* Get low surrogate */
2679:DRIVER/FatFs/source/ff.c **** 				}
2680:DRIVER/FatFs/source/ff.c **** 				nw = put_utf((DWORD)hs << 16 | wc, &fno->fname[di], FF_LFN_BUF - di);	/* Store it in API encodi
2681:DRIVER/FatFs/source/ff.c **** 				if (nw == 0) {				/* Buffer overflow or wrong char? */
2682:DRIVER/FatFs/source/ff.c **** 					di = 0; break;
2683:DRIVER/FatFs/source/ff.c **** 				}
2684:DRIVER/FatFs/source/ff.c **** 				di += nw;
2685:DRIVER/FatFs/source/ff.c **** 				hs = 0;
2686:DRIVER/FatFs/source/ff.c **** 			}
2687:DRIVER/FatFs/source/ff.c **** 			if (hs != 0) di = 0;	/* Broken surrogate pair? */
2688:DRIVER/FatFs/source/ff.c **** 			fno->fname[di] = 0;		/* Terminate the LFN (null string means LFN is invalid) */
2689:DRIVER/FatFs/source/ff.c **** 		}
2690:DRIVER/FatFs/source/ff.c **** 	}
2691:DRIVER/FatFs/source/ff.c **** 
2692:DRIVER/FatFs/source/ff.c **** 	si = di = 0;
2693:DRIVER/FatFs/source/ff.c **** 	while (si < 11) {		/* Get SFN from SFN entry */
2694:DRIVER/FatFs/source/ff.c **** 		wc = dp->dir[si++];			/* Get a char */
2695:DRIVER/FatFs/source/ff.c **** 		if (wc == ' ') continue;	/* Skip padding spaces */
2696:DRIVER/FatFs/source/ff.c **** 		if (wc == RDDEM) wc = DDEM;	/* Restore replaced DDEM character */
2697:DRIVER/FatFs/source/ff.c **** 		if (si == 9 && di < FF_SFN_BUF) fno->altname[di++] = '.';	/* Insert a . if extension is exist */
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 70


2698:DRIVER/FatFs/source/ff.c **** #if FF_LFN_UNICODE >= 1	/* Unicode output */
2699:DRIVER/FatFs/source/ff.c **** 		if (dbc_1st((BYTE)wc) && si != 8 && si != 11 && dbc_2nd(dp->dir[si])) {	/* Make a DBC if needed *
2700:DRIVER/FatFs/source/ff.c **** 			wc = wc << 8 | dp->dir[si++];
2701:DRIVER/FatFs/source/ff.c **** 		}
2702:DRIVER/FatFs/source/ff.c **** 		wc = ff_oem2uni(wc, CODEPAGE);		/* ANSI/OEM -> Unicode */
2703:DRIVER/FatFs/source/ff.c **** 		if (wc == 0) {				/* Wrong char in the current code page? */
2704:DRIVER/FatFs/source/ff.c **** 			di = 0; break;
2705:DRIVER/FatFs/source/ff.c **** 		}
2706:DRIVER/FatFs/source/ff.c **** 		nw = put_utf(wc, &fno->altname[di], FF_SFN_BUF - di);	/* Store it in API encoding */
2707:DRIVER/FatFs/source/ff.c **** 		if (nw == 0) {				/* Buffer overflow? */
2708:DRIVER/FatFs/source/ff.c **** 			di = 0; break;
2709:DRIVER/FatFs/source/ff.c **** 		}
2710:DRIVER/FatFs/source/ff.c **** 		di += nw;
2711:DRIVER/FatFs/source/ff.c **** #else					/* ANSI/OEM output */
2712:DRIVER/FatFs/source/ff.c **** 		fno->altname[di++] = (TCHAR)wc;	/* Store it without any conversion */
2713:DRIVER/FatFs/source/ff.c **** #endif
2714:DRIVER/FatFs/source/ff.c **** 	}
2715:DRIVER/FatFs/source/ff.c **** 	fno->altname[di] = 0;	/* Terminate the SFN  (null string means SFN is invalid) */
2716:DRIVER/FatFs/source/ff.c **** 
2717:DRIVER/FatFs/source/ff.c **** 	if (fno->fname[0] == 0) {	/* If LFN is invalid, altname[] needs to be copied to fname[] */
2718:DRIVER/FatFs/source/ff.c **** 		if (di == 0) {	/* If LFN and SFN both are invalid, this object is inaccessible */
2719:DRIVER/FatFs/source/ff.c **** 			fno->fname[di++] = '\?';
2720:DRIVER/FatFs/source/ff.c **** 		} else {
2721:DRIVER/FatFs/source/ff.c **** 			for (si = di = 0, lcf = NS_BODY; fno->altname[si]; si++, di++) {	/* Copy altname[] to fname[] wi
2722:DRIVER/FatFs/source/ff.c **** 				wc = (WCHAR)fno->altname[si];
2723:DRIVER/FatFs/source/ff.c **** 				if (wc == '.') lcf = NS_EXT;
2724:DRIVER/FatFs/source/ff.c **** 				if (IsUpper(wc) && (dp->dir[DIR_NTres] & lcf)) wc += 0x20;
2725:DRIVER/FatFs/source/ff.c **** 				fno->fname[di] = (TCHAR)wc;
2726:DRIVER/FatFs/source/ff.c **** 			}
2727:DRIVER/FatFs/source/ff.c **** 		}
2728:DRIVER/FatFs/source/ff.c **** 		fno->fname[di] = 0;	/* Terminate the LFN */
2729:DRIVER/FatFs/source/ff.c **** 		if (!dp->dir[DIR_NTres]) fno->altname[0] = 0;	/* Altname is not needed if neither LFN nor case in
2730:DRIVER/FatFs/source/ff.c **** 	}
2731:DRIVER/FatFs/source/ff.c **** 
2732:DRIVER/FatFs/source/ff.c **** #else	/* Non-LFN configuration */
2733:DRIVER/FatFs/source/ff.c **** 	si = di = 0;
2734:DRIVER/FatFs/source/ff.c **** 	while (si < 11) {		/* Copy name body and extension */
2735:DRIVER/FatFs/source/ff.c **** 		c = (TCHAR)dp->dir[si++];
2736:DRIVER/FatFs/source/ff.c **** 		if (c == ' ') continue;		/* Skip padding spaces */
2737:DRIVER/FatFs/source/ff.c **** 		if (c == RDDEM) c = DDEM;	/* Restore replaced DDEM character */
2738:DRIVER/FatFs/source/ff.c **** 		if (si == 9) fno->fname[di++] = '.';/* Insert a . if extension is exist */
2739:DRIVER/FatFs/source/ff.c **** 		fno->fname[di++] = c;
2740:DRIVER/FatFs/source/ff.c **** 	}
2741:DRIVER/FatFs/source/ff.c **** 	fno->fname[di] = 0;		/* Terminate the SFN */
2742:DRIVER/FatFs/source/ff.c **** #endif
2743:DRIVER/FatFs/source/ff.c **** 
2744:DRIVER/FatFs/source/ff.c **** 	fno->fattrib = dp->dir[DIR_Attr] & AM_MASK;			/* Attribute */
2745:DRIVER/FatFs/source/ff.c **** 	fno->fsize = ld_dword(dp->dir + DIR_FileSize);		/* Size */
2746:DRIVER/FatFs/source/ff.c **** 	fno->ftime = ld_word(dp->dir + DIR_ModTime + 0);	/* Time */
2747:DRIVER/FatFs/source/ff.c **** 	fno->fdate = ld_word(dp->dir + DIR_ModTime + 2);	/* Date */
2748:DRIVER/FatFs/source/ff.c **** }
2749:DRIVER/FatFs/source/ff.c **** 
2750:DRIVER/FatFs/source/ff.c **** #endif /* FF_FS_MINIMIZE <= 1 || FF_FS_RPATH >= 2 */
2751:DRIVER/FatFs/source/ff.c **** 
2752:DRIVER/FatFs/source/ff.c **** 
2753:DRIVER/FatFs/source/ff.c **** 
2754:DRIVER/FatFs/source/ff.c **** #if FF_USE_FIND && FF_FS_MINIMIZE <= 1
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 71


2755:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
2756:DRIVER/FatFs/source/ff.c **** /* Pattern matching                                                      */
2757:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
2758:DRIVER/FatFs/source/ff.c **** 
2759:DRIVER/FatFs/source/ff.c **** #define FIND_RECURS	4	/* Maximum number of wildcard terms in the pattern to limit recursion */
2760:DRIVER/FatFs/source/ff.c **** 
2761:DRIVER/FatFs/source/ff.c **** 
2762:DRIVER/FatFs/source/ff.c **** static DWORD get_achar (	/* Get a character and advance ptr */
2763:DRIVER/FatFs/source/ff.c **** 	const TCHAR** ptr		/* Pointer to pointer to the ANSI/OEM or Unicode string */
2764:DRIVER/FatFs/source/ff.c **** )
2765:DRIVER/FatFs/source/ff.c **** {
2766:DRIVER/FatFs/source/ff.c **** 	DWORD chr;
2767:DRIVER/FatFs/source/ff.c **** 
2768:DRIVER/FatFs/source/ff.c **** 
2769:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN && FF_LFN_UNICODE >= 1	/* Unicode input */
2770:DRIVER/FatFs/source/ff.c **** 	chr = tchar2uni(ptr);
2771:DRIVER/FatFs/source/ff.c **** 	if (chr == 0xFFFFFFFF) chr = 0;		/* Wrong UTF encoding is recognized as end of the string */
2772:DRIVER/FatFs/source/ff.c **** 	chr = ff_wtoupper(chr);
2773:DRIVER/FatFs/source/ff.c **** 
2774:DRIVER/FatFs/source/ff.c **** #else									/* ANSI/OEM input */
2775:DRIVER/FatFs/source/ff.c **** 	chr = (BYTE)*(*ptr)++;				/* Get a byte */
2776:DRIVER/FatFs/source/ff.c **** 	if (IsLower(chr)) chr -= 0x20;		/* To upper ASCII char */
2777:DRIVER/FatFs/source/ff.c **** #if FF_CODE_PAGE == 0
2778:DRIVER/FatFs/source/ff.c **** 	if (ExCvt && chr >= 0x80) chr = ExCvt[chr - 0x80];	/* To upper SBCS extended char */
2779:DRIVER/FatFs/source/ff.c **** #elif FF_CODE_PAGE < 900
2780:DRIVER/FatFs/source/ff.c **** 	if (chr >= 0x80) chr = ExCvt[chr - 0x80];	/* To upper SBCS extended char */
2781:DRIVER/FatFs/source/ff.c **** #endif
2782:DRIVER/FatFs/source/ff.c **** #if FF_CODE_PAGE == 0 || FF_CODE_PAGE >= 900
2783:DRIVER/FatFs/source/ff.c **** 	if (dbc_1st((BYTE)chr)) {	/* Get DBC 2nd byte if needed */
2784:DRIVER/FatFs/source/ff.c **** 		chr = dbc_2nd((BYTE)**ptr) ? chr << 8 | (BYTE)*(*ptr)++ : 0;
2785:DRIVER/FatFs/source/ff.c **** 	}
2786:DRIVER/FatFs/source/ff.c **** #endif
2787:DRIVER/FatFs/source/ff.c **** 
2788:DRIVER/FatFs/source/ff.c **** #endif
2789:DRIVER/FatFs/source/ff.c **** 	return chr;
2790:DRIVER/FatFs/source/ff.c **** }
2791:DRIVER/FatFs/source/ff.c **** 
2792:DRIVER/FatFs/source/ff.c **** 
2793:DRIVER/FatFs/source/ff.c **** static int pattern_match (	/* 0:mismatched, 1:matched */
2794:DRIVER/FatFs/source/ff.c **** 	const TCHAR* pat,	/* Matching pattern */
2795:DRIVER/FatFs/source/ff.c **** 	const TCHAR* nam,	/* String to be tested */
2796:DRIVER/FatFs/source/ff.c **** 	UINT skip,			/* Number of pre-skip chars (number of ?s, b8:infinite (* specified)) */
2797:DRIVER/FatFs/source/ff.c **** 	UINT recur			/* Recursion count */
2798:DRIVER/FatFs/source/ff.c **** )
2799:DRIVER/FatFs/source/ff.c **** {
2800:DRIVER/FatFs/source/ff.c **** 	const TCHAR *pptr;
2801:DRIVER/FatFs/source/ff.c **** 	const TCHAR *nptr;
2802:DRIVER/FatFs/source/ff.c **** 	DWORD pchr, nchr;
2803:DRIVER/FatFs/source/ff.c **** 	UINT sk;
2804:DRIVER/FatFs/source/ff.c **** 
2805:DRIVER/FatFs/source/ff.c **** 
2806:DRIVER/FatFs/source/ff.c **** 	while ((skip & 0xFF) != 0) {		/* Pre-skip name chars */
2807:DRIVER/FatFs/source/ff.c **** 		if (!get_achar(&nam)) return 0;	/* Branch mismatched if less name chars */
2808:DRIVER/FatFs/source/ff.c **** 		skip--;
2809:DRIVER/FatFs/source/ff.c **** 	}
2810:DRIVER/FatFs/source/ff.c **** 	if (*pat == 0 && skip) return 1;	/* Matched? (short circuit) */
2811:DRIVER/FatFs/source/ff.c **** 
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 72


2812:DRIVER/FatFs/source/ff.c **** 	do {
2813:DRIVER/FatFs/source/ff.c **** 		pptr = pat; nptr = nam;			/* Top of pattern and name to match */
2814:DRIVER/FatFs/source/ff.c **** 		for (;;) {
2815:DRIVER/FatFs/source/ff.c **** 			if (*pptr == '\?' || *pptr == '*') {	/* Wildcard term? */
2816:DRIVER/FatFs/source/ff.c **** 				if (recur == 0) return 0;	/* Too many wildcard terms? */
2817:DRIVER/FatFs/source/ff.c **** 				sk = 0;
2818:DRIVER/FatFs/source/ff.c **** 				do {	/* Analyze the wildcard term */
2819:DRIVER/FatFs/source/ff.c **** 					if (*pptr++ == '\?') {
2820:DRIVER/FatFs/source/ff.c **** 						sk++;
2821:DRIVER/FatFs/source/ff.c **** 					} else {
2822:DRIVER/FatFs/source/ff.c **** 						sk |= 0x100;
2823:DRIVER/FatFs/source/ff.c **** 					}
2824:DRIVER/FatFs/source/ff.c **** 				} while (*pptr == '\?' || *pptr == '*');
2825:DRIVER/FatFs/source/ff.c **** 				if (pattern_match(pptr, nptr, sk, recur - 1)) return 1;	/* Test new branch (recursive call) */
2826:DRIVER/FatFs/source/ff.c **** 				nchr = *nptr; break;	/* Branch mismatched */
2827:DRIVER/FatFs/source/ff.c **** 			}
2828:DRIVER/FatFs/source/ff.c **** 			pchr = get_achar(&pptr);	/* Get a pattern char */
2829:DRIVER/FatFs/source/ff.c **** 			nchr = get_achar(&nptr);	/* Get a name char */
2830:DRIVER/FatFs/source/ff.c **** 			if (pchr != nchr) break;	/* Branch mismatched? */
2831:DRIVER/FatFs/source/ff.c **** 			if (pchr == 0) return 1;	/* Branch matched? (matched at end of both strings) */
2832:DRIVER/FatFs/source/ff.c **** 		}
2833:DRIVER/FatFs/source/ff.c **** 		get_achar(&nam);			/* nam++ */
2834:DRIVER/FatFs/source/ff.c **** 	} while (skip && nchr);		/* Retry until end of name if infinite search is specified */
2835:DRIVER/FatFs/source/ff.c **** 
2836:DRIVER/FatFs/source/ff.c **** 	return 0;
2837:DRIVER/FatFs/source/ff.c **** }
2838:DRIVER/FatFs/source/ff.c **** 
2839:DRIVER/FatFs/source/ff.c **** #endif /* FF_USE_FIND && FF_FS_MINIMIZE <= 1 */
2840:DRIVER/FatFs/source/ff.c **** 
2841:DRIVER/FatFs/source/ff.c **** 
2842:DRIVER/FatFs/source/ff.c **** 
2843:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
2844:DRIVER/FatFs/source/ff.c **** /* Pick a top segment and create the object name in directory form       */
2845:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
2846:DRIVER/FatFs/source/ff.c **** 
2847:DRIVER/FatFs/source/ff.c **** static FRESULT create_name (	/* FR_OK: successful, FR_INVALID_NAME: could not create */
2848:DRIVER/FatFs/source/ff.c **** 	DIR* dp,					/* Pointer to the directory object */
2849:DRIVER/FatFs/source/ff.c **** 	const TCHAR** path			/* Pointer to pointer to the segment in the path string */
2850:DRIVER/FatFs/source/ff.c **** )
2851:DRIVER/FatFs/source/ff.c **** {
2852:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN		/* LFN configuration */
2853:DRIVER/FatFs/source/ff.c **** 	BYTE b, cf;
2854:DRIVER/FatFs/source/ff.c **** 	WCHAR wc;
2855:DRIVER/FatFs/source/ff.c **** 	WCHAR *lfn;
2856:DRIVER/FatFs/source/ff.c **** 	const TCHAR* p;
2857:DRIVER/FatFs/source/ff.c **** 	DWORD uc;
2858:DRIVER/FatFs/source/ff.c **** 	UINT i, ni, si, di;
2859:DRIVER/FatFs/source/ff.c **** 
2860:DRIVER/FatFs/source/ff.c **** 
2861:DRIVER/FatFs/source/ff.c **** 	/* Create LFN into LFN working buffer */
2862:DRIVER/FatFs/source/ff.c **** 	p = *path; lfn = dp->obj.fs->lfnbuf; di = 0;
2863:DRIVER/FatFs/source/ff.c **** 	for (;;) {
2864:DRIVER/FatFs/source/ff.c **** 		uc = tchar2uni(&p);			/* Get a character */
2865:DRIVER/FatFs/source/ff.c **** 		if (uc == 0xFFFFFFFF) return FR_INVALID_NAME;		/* Invalid code or UTF decode error */
2866:DRIVER/FatFs/source/ff.c **** 		if (uc >= 0x10000) lfn[di++] = (WCHAR)(uc >> 16);	/* Store high surrogate if needed */
2867:DRIVER/FatFs/source/ff.c **** 		wc = (WCHAR)uc;
2868:DRIVER/FatFs/source/ff.c **** 		if (wc < ' ' || IsSeparator(wc)) break;	/* Break if end of the path or a separator is found */
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 73


2869:DRIVER/FatFs/source/ff.c **** 		if (wc < 0x80 && strchr("*:<>|\"\?\x7F", (int)wc)) return FR_INVALID_NAME;	/* Reject illegal char
2870:DRIVER/FatFs/source/ff.c **** 		if (di >= FF_MAX_LFN) return FR_INVALID_NAME;	/* Reject too long name */
2871:DRIVER/FatFs/source/ff.c **** 		lfn[di++] = wc;				/* Store the Unicode character */
2872:DRIVER/FatFs/source/ff.c **** 	}
2873:DRIVER/FatFs/source/ff.c **** 	if (wc < ' ') {				/* Stopped at end of the path? */
2874:DRIVER/FatFs/source/ff.c **** 		cf = NS_LAST;			/* Last segment */
2875:DRIVER/FatFs/source/ff.c **** 	} else {					/* Stopped at a separator */
2876:DRIVER/FatFs/source/ff.c **** 		while (IsSeparator(*p)) p++;	/* Skip duplicated separators if exist */
2877:DRIVER/FatFs/source/ff.c **** 		cf = 0;					/* Next segment may follow */
2878:DRIVER/FatFs/source/ff.c **** 		if (IsTerminator(*p)) cf = NS_LAST;	/* Ignore terminating separator */
2879:DRIVER/FatFs/source/ff.c **** 	}
2880:DRIVER/FatFs/source/ff.c **** 	*path = p;					/* Return pointer to the next segment */
2881:DRIVER/FatFs/source/ff.c **** 
2882:DRIVER/FatFs/source/ff.c **** #if FF_FS_RPATH != 0
2883:DRIVER/FatFs/source/ff.c **** 	if ((di == 1 && lfn[di - 1] == '.') ||
2884:DRIVER/FatFs/source/ff.c **** 		(di == 2 && lfn[di - 1] == '.' && lfn[di - 2] == '.')) {	/* Is this segment a dot name? */
2885:DRIVER/FatFs/source/ff.c **** 		lfn[di] = 0;
2886:DRIVER/FatFs/source/ff.c **** 		for (i = 0; i < 11; i++) {	/* Create dot name for SFN entry */
2887:DRIVER/FatFs/source/ff.c **** 			dp->fn[i] = (i < di) ? '.' : ' ';
2888:DRIVER/FatFs/source/ff.c **** 		}
2889:DRIVER/FatFs/source/ff.c **** 		dp->fn[i] = cf | NS_DOT;	/* This is a dot entry */
2890:DRIVER/FatFs/source/ff.c **** 		return FR_OK;
2891:DRIVER/FatFs/source/ff.c **** 	}
2892:DRIVER/FatFs/source/ff.c **** #endif
2893:DRIVER/FatFs/source/ff.c **** 	while (di) {					/* Snip off trailing spaces and dots if exist */
2894:DRIVER/FatFs/source/ff.c **** 		wc = lfn[di - 1];
2895:DRIVER/FatFs/source/ff.c **** 		if (wc != ' ' && wc != '.') break;
2896:DRIVER/FatFs/source/ff.c **** 		di--;
2897:DRIVER/FatFs/source/ff.c **** 	}
2898:DRIVER/FatFs/source/ff.c **** 	lfn[di] = 0;							/* LFN is created into the working buffer */
2899:DRIVER/FatFs/source/ff.c **** 	if (di == 0) return FR_INVALID_NAME;	/* Reject null name */
2900:DRIVER/FatFs/source/ff.c **** 
2901:DRIVER/FatFs/source/ff.c **** 	/* Create SFN in directory form */
2902:DRIVER/FatFs/source/ff.c **** 	for (si = 0; lfn[si] == ' '; si++) ;	/* Remove leading spaces */
2903:DRIVER/FatFs/source/ff.c **** 	if (si > 0 || lfn[si] == '.') cf |= NS_LOSS | NS_LFN;	/* Is there any leading space or dot? */
2904:DRIVER/FatFs/source/ff.c **** 	while (di > 0 && lfn[di - 1] != '.') di--;	/* Find last dot (di<=si: no extension) */
2905:DRIVER/FatFs/source/ff.c **** 
2906:DRIVER/FatFs/source/ff.c **** 	memset(dp->fn, ' ', 11);
2907:DRIVER/FatFs/source/ff.c **** 	i = b = 0; ni = 8;
2908:DRIVER/FatFs/source/ff.c **** 	for (;;) {
2909:DRIVER/FatFs/source/ff.c **** 		wc = lfn[si++];					/* Get an LFN character */
2910:DRIVER/FatFs/source/ff.c **** 		if (wc == 0) break;				/* Break on end of the LFN */
2911:DRIVER/FatFs/source/ff.c **** 		if (wc == ' ' || (wc == '.' && si != di)) {	/* Remove embedded spaces and dots */
2912:DRIVER/FatFs/source/ff.c **** 			cf |= NS_LOSS | NS_LFN;
2913:DRIVER/FatFs/source/ff.c **** 			continue;
2914:DRIVER/FatFs/source/ff.c **** 		}
2915:DRIVER/FatFs/source/ff.c **** 
2916:DRIVER/FatFs/source/ff.c **** 		if (i >= ni || si == di) {		/* End of field? */
2917:DRIVER/FatFs/source/ff.c **** 			if (ni == 11) {				/* Name extension overflow? */
2918:DRIVER/FatFs/source/ff.c **** 				cf |= NS_LOSS | NS_LFN;
2919:DRIVER/FatFs/source/ff.c **** 				break;
2920:DRIVER/FatFs/source/ff.c **** 			}
2921:DRIVER/FatFs/source/ff.c **** 			if (si != di) cf |= NS_LOSS | NS_LFN;	/* Name body overflow? */
2922:DRIVER/FatFs/source/ff.c **** 			if (si > di) break;						/* No name extension? */
2923:DRIVER/FatFs/source/ff.c **** 			si = di; i = 8; ni = 11; b <<= 2;		/* Enter name extension */
2924:DRIVER/FatFs/source/ff.c **** 			continue;
2925:DRIVER/FatFs/source/ff.c **** 		}
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 74


2926:DRIVER/FatFs/source/ff.c **** 
2927:DRIVER/FatFs/source/ff.c **** 		if (wc >= 0x80) {	/* Is this an extended character? */
2928:DRIVER/FatFs/source/ff.c **** 			cf |= NS_LFN;	/* LFN entry needs to be created */
2929:DRIVER/FatFs/source/ff.c **** #if FF_CODE_PAGE == 0
2930:DRIVER/FatFs/source/ff.c **** 			if (ExCvt) {	/* In SBCS cfg */
2931:DRIVER/FatFs/source/ff.c **** 				wc = ff_uni2oem(wc, CODEPAGE);			/* Unicode ==> ANSI/OEM code */
2932:DRIVER/FatFs/source/ff.c **** 				if (wc & 0x80) wc = ExCvt[wc & 0x7F];	/* Convert extended character to upper (SBCS) */
2933:DRIVER/FatFs/source/ff.c **** 			} else {		/* In DBCS cfg */
2934:DRIVER/FatFs/source/ff.c **** 				wc = ff_uni2oem(ff_wtoupper(wc), CODEPAGE);	/* Unicode ==> Up-convert ==> ANSI/OEM code */
2935:DRIVER/FatFs/source/ff.c **** 			}
2936:DRIVER/FatFs/source/ff.c **** #elif FF_CODE_PAGE < 900	/* In SBCS cfg */
2937:DRIVER/FatFs/source/ff.c **** 			wc = ff_uni2oem(wc, CODEPAGE);			/* Unicode ==> ANSI/OEM code */
2938:DRIVER/FatFs/source/ff.c **** 			if (wc & 0x80) wc = ExCvt[wc & 0x7F];	/* Convert extended character to upper (SBCS) */
2939:DRIVER/FatFs/source/ff.c **** #else						/* In DBCS cfg */
2940:DRIVER/FatFs/source/ff.c **** 			wc = ff_uni2oem(ff_wtoupper(wc), CODEPAGE);	/* Unicode ==> Up-convert ==> ANSI/OEM code */
2941:DRIVER/FatFs/source/ff.c **** #endif
2942:DRIVER/FatFs/source/ff.c **** 		}
2943:DRIVER/FatFs/source/ff.c **** 
2944:DRIVER/FatFs/source/ff.c **** 		if (wc >= 0x100) {				/* Is this a DBC? */
2945:DRIVER/FatFs/source/ff.c **** 			if (i >= ni - 1) {			/* Field overflow? */
2946:DRIVER/FatFs/source/ff.c **** 				cf |= NS_LOSS | NS_LFN;
2947:DRIVER/FatFs/source/ff.c **** 				i = ni; continue;		/* Next field */
2948:DRIVER/FatFs/source/ff.c **** 			}
2949:DRIVER/FatFs/source/ff.c **** 			dp->fn[i++] = (BYTE)(wc >> 8);	/* Put 1st byte */
2950:DRIVER/FatFs/source/ff.c **** 		} else {						/* SBC */
2951:DRIVER/FatFs/source/ff.c **** 			if (wc == 0 || strchr("+,;=[]", (int)wc)) {	/* Replace illegal characters for SFN */
2952:DRIVER/FatFs/source/ff.c **** 				wc = '_'; cf |= NS_LOSS | NS_LFN;/* Lossy conversion */
2953:DRIVER/FatFs/source/ff.c **** 			} else {
2954:DRIVER/FatFs/source/ff.c **** 				if (IsUpper(wc)) {		/* ASCII upper case? */
2955:DRIVER/FatFs/source/ff.c **** 					b |= 2;
2956:DRIVER/FatFs/source/ff.c **** 				}
2957:DRIVER/FatFs/source/ff.c **** 				if (IsLower(wc)) {		/* ASCII lower case? */
2958:DRIVER/FatFs/source/ff.c **** 					b |= 1; wc -= 0x20;
2959:DRIVER/FatFs/source/ff.c **** 				}
2960:DRIVER/FatFs/source/ff.c **** 			}
2961:DRIVER/FatFs/source/ff.c **** 		}
2962:DRIVER/FatFs/source/ff.c **** 		dp->fn[i++] = (BYTE)wc;
2963:DRIVER/FatFs/source/ff.c **** 	}
2964:DRIVER/FatFs/source/ff.c **** 
2965:DRIVER/FatFs/source/ff.c **** 	if (dp->fn[0] == DDEM) dp->fn[0] = RDDEM;	/* If the first character collides with DDEM, replace it
2966:DRIVER/FatFs/source/ff.c **** 
2967:DRIVER/FatFs/source/ff.c **** 	if (ni == 8) b <<= 2;				/* Shift capital flags if no extension */
2968:DRIVER/FatFs/source/ff.c **** 	if ((b & 0x0C) == 0x0C || (b & 0x03) == 0x03) cf |= NS_LFN;	/* LFN entry needs to be created if co
2969:DRIVER/FatFs/source/ff.c **** 	if (!(cf & NS_LFN)) {				/* When LFN is in 8.3 format without extended character, NT flags are cre
2970:DRIVER/FatFs/source/ff.c **** 		if (b & 0x01) cf |= NS_EXT;		/* NT flag (Extension has small capital letters only) */
2971:DRIVER/FatFs/source/ff.c **** 		if (b & 0x04) cf |= NS_BODY;	/* NT flag (Body has small capital letters only) */
2972:DRIVER/FatFs/source/ff.c **** 	}
2973:DRIVER/FatFs/source/ff.c **** 
2974:DRIVER/FatFs/source/ff.c **** 	dp->fn[NSFLAG] = cf;	/* SFN is created into dp->fn[] */
2975:DRIVER/FatFs/source/ff.c **** 
2976:DRIVER/FatFs/source/ff.c **** 	return FR_OK;
2977:DRIVER/FatFs/source/ff.c **** 
2978:DRIVER/FatFs/source/ff.c **** 
2979:DRIVER/FatFs/source/ff.c **** #else	/* FF_USE_LFN : Non-LFN configuration */
2980:DRIVER/FatFs/source/ff.c **** 	BYTE c, d;
2981:DRIVER/FatFs/source/ff.c **** 	BYTE *sfn;
2982:DRIVER/FatFs/source/ff.c **** 	UINT ni, si, i;
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 75


2983:DRIVER/FatFs/source/ff.c **** 	const char *p;
2984:DRIVER/FatFs/source/ff.c **** 
2985:DRIVER/FatFs/source/ff.c **** 	/* Create file name in directory form */
2986:DRIVER/FatFs/source/ff.c **** 	p = *path; sfn = dp->fn;
2987:DRIVER/FatFs/source/ff.c **** 	memset(sfn, ' ', 11);
2988:DRIVER/FatFs/source/ff.c **** 	si = i = 0; ni = 8;
2989:DRIVER/FatFs/source/ff.c **** #if FF_FS_RPATH != 0
2990:DRIVER/FatFs/source/ff.c **** 	if (p[si] == '.') { /* Is this a dot entry? */
2991:DRIVER/FatFs/source/ff.c **** 		for (;;) {
2992:DRIVER/FatFs/source/ff.c **** 			c = (BYTE)p[si++];
2993:DRIVER/FatFs/source/ff.c **** 			if (c != '.' || si >= 3) break;
2994:DRIVER/FatFs/source/ff.c **** 			sfn[i++] = c;
2995:DRIVER/FatFs/source/ff.c **** 		}
2996:DRIVER/FatFs/source/ff.c **** 		if (!IsSeparator(c) && c > ' ') return FR_INVALID_NAME;
2997:DRIVER/FatFs/source/ff.c **** 		*path = p + si;					/* Return pointer to the next segment */
2998:DRIVER/FatFs/source/ff.c **** 		sfn[NSFLAG] = (c <= ' ') ? NS_LAST | NS_DOT : NS_DOT;	/* Set last segment flag if end of the path
2999:DRIVER/FatFs/source/ff.c **** 		return FR_OK;
3000:DRIVER/FatFs/source/ff.c **** 	}
3001:DRIVER/FatFs/source/ff.c **** #endif
3002:DRIVER/FatFs/source/ff.c **** 	for (;;) {
3003:DRIVER/FatFs/source/ff.c **** 		c = (BYTE)p[si++];				/* Get a byte */
3004:DRIVER/FatFs/source/ff.c **** 		if (c <= ' ') break; 			/* Break if end of the path name */
3005:DRIVER/FatFs/source/ff.c **** 		if (IsSeparator(c)) {			/* Break if a separator is found */
3006:DRIVER/FatFs/source/ff.c **** 			while (IsSeparator(p[si])) si++;	/* Skip duplicated separator if exist */
3007:DRIVER/FatFs/source/ff.c **** 			break;
3008:DRIVER/FatFs/source/ff.c **** 		}
3009:DRIVER/FatFs/source/ff.c **** 		if (c == '.' || i >= ni) {		/* End of body or field overflow? */
3010:DRIVER/FatFs/source/ff.c **** 			if (ni == 11 || c != '.') return FR_INVALID_NAME;	/* Field overflow or invalid dot? */
3011:DRIVER/FatFs/source/ff.c **** 			i = 8; ni = 11;				/* Enter file extension field */
3012:DRIVER/FatFs/source/ff.c **** 			continue;
3013:DRIVER/FatFs/source/ff.c **** 		}
3014:DRIVER/FatFs/source/ff.c **** #if FF_CODE_PAGE == 0
3015:DRIVER/FatFs/source/ff.c **** 		if (ExCvt && c >= 0x80) {		/* Is SBC extended character? */
3016:DRIVER/FatFs/source/ff.c **** 			c = ExCvt[c & 0x7F];		/* To upper SBC extended character */
3017:DRIVER/FatFs/source/ff.c **** 		}
3018:DRIVER/FatFs/source/ff.c **** #elif FF_CODE_PAGE < 900
3019:DRIVER/FatFs/source/ff.c **** 		if (c >= 0x80) {				/* Is SBC extended character? */
3020:DRIVER/FatFs/source/ff.c **** 			c = ExCvt[c & 0x7F];		/* To upper SBC extended character */
3021:DRIVER/FatFs/source/ff.c **** 		}
3022:DRIVER/FatFs/source/ff.c **** #endif
3023:DRIVER/FatFs/source/ff.c **** 		if (dbc_1st(c)) {				/* Check if it is a DBC 1st byte */
3024:DRIVER/FatFs/source/ff.c **** 			d = (BYTE)p[si++];			/* Get 2nd byte */
3025:DRIVER/FatFs/source/ff.c **** 			if (!dbc_2nd(d) || i >= ni - 1) return FR_INVALID_NAME;	/* Reject invalid DBC */
3026:DRIVER/FatFs/source/ff.c **** 			sfn[i++] = c;
3027:DRIVER/FatFs/source/ff.c **** 			sfn[i++] = d;
3028:DRIVER/FatFs/source/ff.c **** 		} else {						/* SBC */
3029:DRIVER/FatFs/source/ff.c **** 			if (strchr("*+,:;<=>[]|\"\?\x7F", (int)c)) return FR_INVALID_NAME;	/* Reject illegal chrs for SF
3030:DRIVER/FatFs/source/ff.c **** 			if (IsLower(c)) c -= 0x20;	/* To upper */
3031:DRIVER/FatFs/source/ff.c **** 			sfn[i++] = c;
3032:DRIVER/FatFs/source/ff.c **** 		}
3033:DRIVER/FatFs/source/ff.c **** 	}
3034:DRIVER/FatFs/source/ff.c **** 	*path = &p[si];						/* Return pointer to the next segment */
3035:DRIVER/FatFs/source/ff.c **** 	if (i == 0) return FR_INVALID_NAME;	/* Reject nul string */
3036:DRIVER/FatFs/source/ff.c **** 
3037:DRIVER/FatFs/source/ff.c **** 	if (sfn[0] == DDEM) sfn[0] = RDDEM;	/* If the first character collides with DDEM, replace it with 
3038:DRIVER/FatFs/source/ff.c **** 	sfn[NSFLAG] = (c <= ' ' || p[si] <= ' ') ? NS_LAST : 0;	/* Set last segment flag if end of the pat
3039:DRIVER/FatFs/source/ff.c **** 
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 76


3040:DRIVER/FatFs/source/ff.c **** 	return FR_OK;
3041:DRIVER/FatFs/source/ff.c **** #endif /* FF_USE_LFN */
3042:DRIVER/FatFs/source/ff.c **** }
3043:DRIVER/FatFs/source/ff.c **** 
3044:DRIVER/FatFs/source/ff.c **** 
3045:DRIVER/FatFs/source/ff.c **** 
3046:DRIVER/FatFs/source/ff.c **** 
3047:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
3048:DRIVER/FatFs/source/ff.c **** /* Follow a file path                                                    */
3049:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
3050:DRIVER/FatFs/source/ff.c **** 
3051:DRIVER/FatFs/source/ff.c **** static FRESULT follow_path (	/* FR_OK(0): successful, !=0: error code */
3052:DRIVER/FatFs/source/ff.c **** 	DIR* dp,					/* Directory object to return last directory and found object */
3053:DRIVER/FatFs/source/ff.c **** 	const TCHAR* path			/* Full-path string to find a file or directory */
3054:DRIVER/FatFs/source/ff.c **** )
3055:DRIVER/FatFs/source/ff.c **** {
3056:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
3057:DRIVER/FatFs/source/ff.c **** 	BYTE ns;
3058:DRIVER/FatFs/source/ff.c **** 	FATFS *fs = dp->obj.fs;
3059:DRIVER/FatFs/source/ff.c **** 
3060:DRIVER/FatFs/source/ff.c **** 
3061:DRIVER/FatFs/source/ff.c **** #if FF_FS_RPATH != 0
3062:DRIVER/FatFs/source/ff.c **** 	if (!IsSeparator(*path) && (FF_STR_VOLUME_ID != 2 || !IsTerminator(*path))) {	/* Without heading s
3063:DRIVER/FatFs/source/ff.c **** 		dp->obj.sclust = fs->cdir;			/* Start at the current directory */
3064:DRIVER/FatFs/source/ff.c **** 	} else
3065:DRIVER/FatFs/source/ff.c **** #endif
3066:DRIVER/FatFs/source/ff.c **** 	{										/* With heading separator */
3067:DRIVER/FatFs/source/ff.c **** 		while (IsSeparator(*path)) path++;	/* Strip separators */
3068:DRIVER/FatFs/source/ff.c **** 		dp->obj.sclust = 0;					/* Start from the root directory */
3069:DRIVER/FatFs/source/ff.c **** 	}
3070:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
3071:DRIVER/FatFs/source/ff.c **** 	dp->obj.n_frag = 0;	/* Invalidate last fragment counter of the object */
3072:DRIVER/FatFs/source/ff.c **** #if FF_FS_RPATH != 0
3073:DRIVER/FatFs/source/ff.c **** 	if (fs->fs_type == FS_EXFAT && dp->obj.sclust) {	/* exFAT: Retrieve the sub-directory's status */
3074:DRIVER/FatFs/source/ff.c **** 		DIR dj;
3075:DRIVER/FatFs/source/ff.c **** 
3076:DRIVER/FatFs/source/ff.c **** 		dp->obj.c_scl = fs->cdc_scl;
3077:DRIVER/FatFs/source/ff.c **** 		dp->obj.c_size = fs->cdc_size;
3078:DRIVER/FatFs/source/ff.c **** 		dp->obj.c_ofs = fs->cdc_ofs;
3079:DRIVER/FatFs/source/ff.c **** 		res = load_obj_xdir(&dj, &dp->obj);
3080:DRIVER/FatFs/source/ff.c **** 		if (res != FR_OK) return res;
3081:DRIVER/FatFs/source/ff.c **** 		dp->obj.objsize = ld_dword(fs->dirbuf + XDIR_FileSize);
3082:DRIVER/FatFs/source/ff.c **** 		dp->obj.stat = fs->dirbuf[XDIR_GenFlags] & 2;
3083:DRIVER/FatFs/source/ff.c **** 	}
3084:DRIVER/FatFs/source/ff.c **** #endif
3085:DRIVER/FatFs/source/ff.c **** #endif
3086:DRIVER/FatFs/source/ff.c **** 
3087:DRIVER/FatFs/source/ff.c **** 	if ((UINT)*path < ' ') {				/* Null path name is the origin directory itself */
3088:DRIVER/FatFs/source/ff.c **** 		dp->fn[NSFLAG] = NS_NONAME;
3089:DRIVER/FatFs/source/ff.c **** 		res = dir_sdi(dp, 0);
3090:DRIVER/FatFs/source/ff.c **** 
3091:DRIVER/FatFs/source/ff.c **** 	} else {								/* Follow path */
3092:DRIVER/FatFs/source/ff.c **** 		for (;;) {
3093:DRIVER/FatFs/source/ff.c **** 			res = create_name(dp, &path);	/* Get a segment name of the path */
3094:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) break;
3095:DRIVER/FatFs/source/ff.c **** 			res = dir_find(dp);				/* Find an object with the segment name */
3096:DRIVER/FatFs/source/ff.c **** 			ns = dp->fn[NSFLAG];
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 77


3097:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) {				/* Failed to find the object */
3098:DRIVER/FatFs/source/ff.c **** 				if (res == FR_NO_FILE) {	/* Object is not found */
3099:DRIVER/FatFs/source/ff.c **** 					if (FF_FS_RPATH && (ns & NS_DOT)) {	/* If dot entry is not exist, stay there */
3100:DRIVER/FatFs/source/ff.c **** 						if (!(ns & NS_LAST)) continue;	/* Continue to follow if not last segment */
3101:DRIVER/FatFs/source/ff.c **** 						dp->fn[NSFLAG] = NS_NONAME;
3102:DRIVER/FatFs/source/ff.c **** 						res = FR_OK;
3103:DRIVER/FatFs/source/ff.c **** 					} else {							/* Could not find the object */
3104:DRIVER/FatFs/source/ff.c **** 						if (!(ns & NS_LAST)) res = FR_NO_PATH;	/* Adjust error code if not last segment */
3105:DRIVER/FatFs/source/ff.c **** 					}
3106:DRIVER/FatFs/source/ff.c **** 				}
3107:DRIVER/FatFs/source/ff.c **** 				break;
3108:DRIVER/FatFs/source/ff.c **** 			}
3109:DRIVER/FatFs/source/ff.c **** 			if (ns & NS_LAST) break;		/* Last segment matched. Function completed. */
3110:DRIVER/FatFs/source/ff.c **** 			/* Get into the sub-directory */
3111:DRIVER/FatFs/source/ff.c **** 			if (!(dp->obj.attr & AM_DIR)) {	/* It is not a sub-directory and cannot follow */
3112:DRIVER/FatFs/source/ff.c **** 				res = FR_NO_PATH; break;
3113:DRIVER/FatFs/source/ff.c **** 			}
3114:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
3115:DRIVER/FatFs/source/ff.c **** 			if (fs->fs_type == FS_EXFAT) {	/* Save containing directory information for next dir */
3116:DRIVER/FatFs/source/ff.c **** 				dp->obj.c_scl = dp->obj.sclust;
3117:DRIVER/FatFs/source/ff.c **** 				dp->obj.c_size = ((DWORD)dp->obj.objsize & 0xFFFFFF00) | dp->obj.stat;
3118:DRIVER/FatFs/source/ff.c **** 				dp->obj.c_ofs = dp->blk_ofs;
3119:DRIVER/FatFs/source/ff.c **** 				init_alloc_info(fs, &dp->obj);	/* Open next directory */
3120:DRIVER/FatFs/source/ff.c **** 			} else
3121:DRIVER/FatFs/source/ff.c **** #endif
3122:DRIVER/FatFs/source/ff.c **** 			{
3123:DRIVER/FatFs/source/ff.c **** 				dp->obj.sclust = ld_clust(fs, fs->win + dp->dptr % SS(fs));	/* Open next directory */
3124:DRIVER/FatFs/source/ff.c **** 			}
3125:DRIVER/FatFs/source/ff.c **** 		}
3126:DRIVER/FatFs/source/ff.c **** 	}
3127:DRIVER/FatFs/source/ff.c **** 
3128:DRIVER/FatFs/source/ff.c **** 	return res;
3129:DRIVER/FatFs/source/ff.c **** }
3130:DRIVER/FatFs/source/ff.c **** 
3131:DRIVER/FatFs/source/ff.c **** 
3132:DRIVER/FatFs/source/ff.c **** 
3133:DRIVER/FatFs/source/ff.c **** 
3134:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
3135:DRIVER/FatFs/source/ff.c **** /* Get logical drive number from path name                               */
3136:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
3137:DRIVER/FatFs/source/ff.c **** 
3138:DRIVER/FatFs/source/ff.c **** static int get_ldnumber (	/* Returns logical drive number (-1:invalid drive number or null pointer)
3139:DRIVER/FatFs/source/ff.c **** 	const TCHAR** path		/* Pointer to pointer to the path name */
3140:DRIVER/FatFs/source/ff.c **** )
3141:DRIVER/FatFs/source/ff.c **** {
 1159              		.loc 1 3141 1 is_stmt 1 view -0
 1160              		.cfi_startproc
 1161              		@ args = 0, pretend = 0, frame = 0
 1162              		@ frame_needed = 0, uses_anonymous_args = 0
 1163              		@ link register save eliminated.
 1164              		.loc 1 3141 1 is_stmt 0 view .LVU375
 1165 0000 0146     		mov	r1, r0
3142:DRIVER/FatFs/source/ff.c **** 	const TCHAR *tp;
 1166              		.loc 1 3142 2 is_stmt 1 view .LVU376
3143:DRIVER/FatFs/source/ff.c **** 	const TCHAR *tt;
 1167              		.loc 1 3143 2 view .LVU377
3144:DRIVER/FatFs/source/ff.c **** 	TCHAR tc;
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 78


 1168              		.loc 1 3144 2 view .LVU378
3145:DRIVER/FatFs/source/ff.c **** 	int i;
 1169              		.loc 1 3145 2 view .LVU379
3146:DRIVER/FatFs/source/ff.c **** 	int vol = -1;
 1170              		.loc 1 3146 2 view .LVU380
 1171              	.LVL147:
3147:DRIVER/FatFs/source/ff.c **** #if FF_STR_VOLUME_ID		/* Find string volume ID */
3148:DRIVER/FatFs/source/ff.c **** 	const char *sp;
3149:DRIVER/FatFs/source/ff.c **** 	char c;
3150:DRIVER/FatFs/source/ff.c **** #endif
3151:DRIVER/FatFs/source/ff.c **** 
3152:DRIVER/FatFs/source/ff.c **** 	tt = tp = *path;
 1172              		.loc 1 3152 2 view .LVU381
 1173              		.loc 1 3152 10 is_stmt 0 view .LVU382
 1174 0002 0068     		ldr	r0, [r0]
 1175              	.LVL148:
3153:DRIVER/FatFs/source/ff.c **** 	if (!tp) return vol;	/* Invalid path name? */
 1176              		.loc 1 3153 2 is_stmt 1 view .LVU383
 1177              		.loc 1 3153 5 is_stmt 0 view .LVU384
 1178 0004 20B3     		cbz	r0, .L84
3152:DRIVER/FatFs/source/ff.c **** 	if (!tp) return vol;	/* Invalid path name? */
 1179              		.loc 1 3152 5 view .LVU385
 1180 0006 0246     		mov	r2, r0
 1181              	.LVL149:
 1182              	.L82:
3154:DRIVER/FatFs/source/ff.c **** 	do {					/* Find a colon in the path */
 1183              		.loc 1 3154 2 is_stmt 1 discriminator 2 view .LVU386
3155:DRIVER/FatFs/source/ff.c **** 		tc = *tt++;
 1184              		.loc 1 3155 3 discriminator 2 view .LVU387
 1185              		.loc 1 3155 6 is_stmt 0 discriminator 2 view .LVU388
 1186 0008 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 1187 000a 0132     		adds	r2, r2, #1
 1188              	.LVL150:
3156:DRIVER/FatFs/source/ff.c **** 	} while (!IsTerminator(tc) && tc != ':');
 1189              		.loc 1 3156 29 is_stmt 1 discriminator 2 view .LVU389
 1190 000c 1F2B     		cmp	r3, #31
 1191 000e 01D9     		bls	.L81
 1192              		.loc 1 3156 29 is_stmt 0 discriminator 1 view .LVU390
 1193 0010 3A2B     		cmp	r3, #58
 1194 0012 F9D1     		bne	.L82
 1195              	.L81:
3157:DRIVER/FatFs/source/ff.c **** 
3158:DRIVER/FatFs/source/ff.c **** 	if (tc == ':') {	/* DOS/Windows style volume ID? */
 1196              		.loc 1 3158 2 is_stmt 1 view .LVU391
 1197              		.loc 1 3158 5 is_stmt 0 view .LVU392
 1198 0014 3A2B     		cmp	r3, #58
 1199 0016 01D0     		beq	.L89
3159:DRIVER/FatFs/source/ff.c **** 		i = FF_VOLUMES;
3160:DRIVER/FatFs/source/ff.c **** 		if (IsDigit(*tp) && tp + 2 == tt) {	/* Is there a numeric volume ID + colon? */
3161:DRIVER/FatFs/source/ff.c **** 			i = (int)*tp - '0';	/* Get the LD number */
3162:DRIVER/FatFs/source/ff.c **** 		}
3163:DRIVER/FatFs/source/ff.c **** #if FF_STR_VOLUME_ID == 1	/* Arbitrary string is enabled */
3164:DRIVER/FatFs/source/ff.c **** 		else {
3165:DRIVER/FatFs/source/ff.c **** 			i = 0;
3166:DRIVER/FatFs/source/ff.c **** 			do {
3167:DRIVER/FatFs/source/ff.c **** 				sp = VolumeStr[i]; tp = *path;	/* This string volume ID and path name */
3168:DRIVER/FatFs/source/ff.c **** 				do {	/* Compare the volume ID with path name */
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 79


3169:DRIVER/FatFs/source/ff.c **** 					c = *sp++; tc = *tp++;
3170:DRIVER/FatFs/source/ff.c **** 					if (IsLower(c)) c -= 0x20;
3171:DRIVER/FatFs/source/ff.c **** 					if (IsLower(tc)) tc -= 0x20;
3172:DRIVER/FatFs/source/ff.c **** 				} while (c && (TCHAR)c == tc);
3173:DRIVER/FatFs/source/ff.c **** 			} while ((c || tp != tt) && ++i < FF_VOLUMES);	/* Repeat for each id until pattern match */
3174:DRIVER/FatFs/source/ff.c **** 		}
3175:DRIVER/FatFs/source/ff.c **** #endif
3176:DRIVER/FatFs/source/ff.c **** 		if (i < FF_VOLUMES) {	/* If a volume ID is found, get the drive number and strip it */
3177:DRIVER/FatFs/source/ff.c **** 			vol = i;		/* Drive number */
3178:DRIVER/FatFs/source/ff.c **** 			*path = tt;		/* Snip the drive prefix off */
3179:DRIVER/FatFs/source/ff.c **** 		}
3180:DRIVER/FatFs/source/ff.c **** 		return vol;
3181:DRIVER/FatFs/source/ff.c **** 	}
3182:DRIVER/FatFs/source/ff.c **** #if FF_STR_VOLUME_ID == 2		/* Unix style volume ID is enabled */
3183:DRIVER/FatFs/source/ff.c **** 	if (*tp == '/') {			/* Is there a volume ID? */
3184:DRIVER/FatFs/source/ff.c **** 		while (*(tp + 1) == '/') tp++;	/* Skip duplicated separator */
3185:DRIVER/FatFs/source/ff.c **** 		i = 0;
3186:DRIVER/FatFs/source/ff.c **** 		do {
3187:DRIVER/FatFs/source/ff.c **** 			tt = tp; sp = VolumeStr[i]; /* Path name and this string volume ID */
3188:DRIVER/FatFs/source/ff.c **** 			do {	/* Compare the volume ID with path name */
3189:DRIVER/FatFs/source/ff.c **** 				c = *sp++; tc = *(++tt);
3190:DRIVER/FatFs/source/ff.c **** 				if (IsLower(c)) c -= 0x20;
3191:DRIVER/FatFs/source/ff.c **** 				if (IsLower(tc)) tc -= 0x20;
3192:DRIVER/FatFs/source/ff.c **** 			} while (c && (TCHAR)c == tc);
3193:DRIVER/FatFs/source/ff.c **** 		} while ((c || (tc != '/' && !IsTerminator(tc))) && ++i < FF_VOLUMES);	/* Repeat for each ID unti
3194:DRIVER/FatFs/source/ff.c **** 		if (i < FF_VOLUMES) {	/* If a volume ID is found, get the drive number and strip it */
3195:DRIVER/FatFs/source/ff.c **** 			vol = i;		/* Drive number */
3196:DRIVER/FatFs/source/ff.c **** 			*path = tt;		/* Snip the drive prefix off */
3197:DRIVER/FatFs/source/ff.c **** 		}
3198:DRIVER/FatFs/source/ff.c **** 		return vol;
3199:DRIVER/FatFs/source/ff.c **** 	}
3200:DRIVER/FatFs/source/ff.c **** #endif
3201:DRIVER/FatFs/source/ff.c **** 	/* No drive prefix is found */
3202:DRIVER/FatFs/source/ff.c **** #if FF_FS_RPATH != 0
3203:DRIVER/FatFs/source/ff.c **** 	vol = CurrVol;	/* Default drive is current drive */
3204:DRIVER/FatFs/source/ff.c **** #else
3205:DRIVER/FatFs/source/ff.c **** 	vol = 0;		/* Default drive is 0 */
3206:DRIVER/FatFs/source/ff.c **** #endif
3207:DRIVER/FatFs/source/ff.c **** 	return vol;		/* Return the default drive */
 1200              		.loc 1 3207 9 view .LVU393
 1201 0018 0020     		movs	r0, #0
 1202              	.LVL151:
3208:DRIVER/FatFs/source/ff.c **** }
 1203              		.loc 1 3208 1 view .LVU394
 1204 001a 7047     		bx	lr
 1205              	.LVL152:
 1206              	.L89:
3159:DRIVER/FatFs/source/ff.c **** 		i = FF_VOLUMES;
 1207              		.loc 1 3159 3 is_stmt 1 view .LVU395
3160:DRIVER/FatFs/source/ff.c **** 			i = (int)*tp - '0';	/* Get the LD number */
 1208              		.loc 1 3160 3 view .LVU396
3160:DRIVER/FatFs/source/ff.c **** 			i = (int)*tp - '0';	/* Get the LD number */
 1209              		.loc 1 3160 7 is_stmt 0 view .LVU397
 1210 001c 0378     		ldrb	r3, [r0]	@ zero_extendqisi2
 1211              	.LVL153:
3160:DRIVER/FatFs/source/ff.c **** 			i = (int)*tp - '0';	/* Get the LD number */
 1212              		.loc 1 3160 7 view .LVU398
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 80


 1213 001e A3F1300C 		sub	ip, r3, #48
 1214 0022 5FFA8CFC 		uxtb	ip, ip
3160:DRIVER/FatFs/source/ff.c **** 			i = (int)*tp - '0';	/* Get the LD number */
 1215              		.loc 1 3160 6 view .LVU399
 1216 0026 BCF1090F 		cmp	ip, #9
 1217 002a 0ED8     		bhi	.L86
3160:DRIVER/FatFs/source/ff.c **** 			i = (int)*tp - '0';	/* Get the LD number */
 1218              		.loc 1 3160 26 discriminator 1 view .LVU400
 1219 002c 0230     		adds	r0, r0, #2
 1220              	.LVL154:
3160:DRIVER/FatFs/source/ff.c **** 			i = (int)*tp - '0';	/* Get the LD number */
 1221              		.loc 1 3160 20 discriminator 1 view .LVU401
 1222 002e 9042     		cmp	r0, r2
 1223 0030 02D0     		beq	.L90
3146:DRIVER/FatFs/source/ff.c **** #if FF_STR_VOLUME_ID		/* Find string volume ID */
 1224              		.loc 1 3146 6 view .LVU402
 1225 0032 4FF0FF30 		mov	r0, #-1
 1226 0036 7047     		bx	lr
 1227              	.L90:
3161:DRIVER/FatFs/source/ff.c **** 		}
 1228              		.loc 1 3161 4 is_stmt 1 view .LVU403
3161:DRIVER/FatFs/source/ff.c **** 		}
 1229              		.loc 1 3161 6 is_stmt 0 view .LVU404
 1230 0038 A3F13000 		sub	r0, r3, #48
 1231              	.LVL155:
3176:DRIVER/FatFs/source/ff.c **** 			vol = i;		/* Drive number */
 1232              		.loc 1 3176 3 is_stmt 1 view .LVU405
3176:DRIVER/FatFs/source/ff.c **** 			vol = i;		/* Drive number */
 1233              		.loc 1 3176 6 is_stmt 0 view .LVU406
 1234 003c 0128     		cmp	r0, #1
 1235 003e 02DD     		ble	.L91
3146:DRIVER/FatFs/source/ff.c **** #if FF_STR_VOLUME_ID		/* Find string volume ID */
 1236              		.loc 1 3146 6 view .LVU407
 1237 0040 4FF0FF30 		mov	r0, #-1
 1238              	.LVL156:
3180:DRIVER/FatFs/source/ff.c **** 	}
 1239              		.loc 1 3180 3 is_stmt 1 view .LVU408
3180:DRIVER/FatFs/source/ff.c **** 	}
 1240              		.loc 1 3180 10 is_stmt 0 view .LVU409
 1241 0044 7047     		bx	lr
 1242              	.LVL157:
 1243              	.L91:
3177:DRIVER/FatFs/source/ff.c **** 			*path = tt;		/* Snip the drive prefix off */
 1244              		.loc 1 3177 4 is_stmt 1 view .LVU410
3178:DRIVER/FatFs/source/ff.c **** 		}
 1245              		.loc 1 3178 4 view .LVU411
3178:DRIVER/FatFs/source/ff.c **** 		}
 1246              		.loc 1 3178 10 is_stmt 0 view .LVU412
 1247 0046 0A60     		str	r2, [r1]
 1248              	.LVL158:
3178:DRIVER/FatFs/source/ff.c **** 		}
 1249              		.loc 1 3178 10 view .LVU413
 1250 0048 7047     		bx	lr
 1251              	.LVL159:
 1252              	.L86:
3146:DRIVER/FatFs/source/ff.c **** #if FF_STR_VOLUME_ID		/* Find string volume ID */
 1253              		.loc 1 3146 6 view .LVU414
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 81


 1254 004a 4FF0FF30 		mov	r0, #-1
 1255              	.LVL160:
3146:DRIVER/FatFs/source/ff.c **** #if FF_STR_VOLUME_ID		/* Find string volume ID */
 1256              		.loc 1 3146 6 view .LVU415
 1257 004e 7047     		bx	lr
 1258              	.LVL161:
 1259              	.L84:
3153:DRIVER/FatFs/source/ff.c **** 	do {					/* Find a colon in the path */
 1260              		.loc 1 3153 18 view .LVU416
 1261 0050 4FF0FF30 		mov	r0, #-1
 1262              	.LVL162:
3153:DRIVER/FatFs/source/ff.c **** 	do {					/* Find a colon in the path */
 1263              		.loc 1 3153 18 view .LVU417
 1264 0054 7047     		bx	lr
 1265              		.cfi_endproc
 1266              	.LFE34:
 1268              		.section	.text.validate,"ax",%progbits
 1269              		.align	1
 1270              		.syntax unified
 1271              		.thumb
 1272              		.thumb_func
 1274              	validate:
 1275              	.LVL163:
 1276              	.LFB38:
3209:DRIVER/FatFs/source/ff.c **** 
3210:DRIVER/FatFs/source/ff.c **** 
3211:DRIVER/FatFs/source/ff.c **** 
3212:DRIVER/FatFs/source/ff.c **** 
3213:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
3214:DRIVER/FatFs/source/ff.c **** /* GPT support functions                                                 */
3215:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
3216:DRIVER/FatFs/source/ff.c **** 
3217:DRIVER/FatFs/source/ff.c **** #if FF_LBA64
3218:DRIVER/FatFs/source/ff.c **** 
3219:DRIVER/FatFs/source/ff.c **** /* Calculate CRC32 in byte-by-byte */
3220:DRIVER/FatFs/source/ff.c **** 
3221:DRIVER/FatFs/source/ff.c **** static DWORD crc32 (	/* Returns next CRC value */
3222:DRIVER/FatFs/source/ff.c **** 	DWORD crc,			/* Current CRC value */
3223:DRIVER/FatFs/source/ff.c **** 	BYTE d				/* A byte to be processed */
3224:DRIVER/FatFs/source/ff.c **** )
3225:DRIVER/FatFs/source/ff.c **** {
3226:DRIVER/FatFs/source/ff.c **** 	BYTE b;
3227:DRIVER/FatFs/source/ff.c **** 
3228:DRIVER/FatFs/source/ff.c **** 
3229:DRIVER/FatFs/source/ff.c **** 	for (b = 1; b; b <<= 1) {
3230:DRIVER/FatFs/source/ff.c **** 		crc ^= (d & b) ? 1 : 0;
3231:DRIVER/FatFs/source/ff.c **** 		crc = (crc & 1) ? crc >> 1 ^ 0xEDB88320 : crc >> 1;
3232:DRIVER/FatFs/source/ff.c **** 	}
3233:DRIVER/FatFs/source/ff.c **** 	return crc;
3234:DRIVER/FatFs/source/ff.c **** }
3235:DRIVER/FatFs/source/ff.c **** 
3236:DRIVER/FatFs/source/ff.c **** 
3237:DRIVER/FatFs/source/ff.c **** /* Check validity of GPT header */
3238:DRIVER/FatFs/source/ff.c **** 
3239:DRIVER/FatFs/source/ff.c **** static int test_gpt_header (	/* 0:Invalid, 1:Valid */
3240:DRIVER/FatFs/source/ff.c **** 	const BYTE* gpth			/* Pointer to the GPT header */
3241:DRIVER/FatFs/source/ff.c **** )
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 82


3242:DRIVER/FatFs/source/ff.c **** {
3243:DRIVER/FatFs/source/ff.c **** 	UINT i;
3244:DRIVER/FatFs/source/ff.c **** 	DWORD bcc, hlen;
3245:DRIVER/FatFs/source/ff.c **** 
3246:DRIVER/FatFs/source/ff.c **** 
3247:DRIVER/FatFs/source/ff.c **** 	if (memcmp(gpth + GPTH_Sign, "EFI PART" "\0\0\1", 12)) return 0;	/* Check signature and version (1
3248:DRIVER/FatFs/source/ff.c **** 	hlen = ld_dword(gpth + GPTH_Size);						/* Check header size */
3249:DRIVER/FatFs/source/ff.c **** 	if (hlen < 92 || hlen > FF_MIN_SS) return 0;
3250:DRIVER/FatFs/source/ff.c **** 	for (i = 0, bcc = 0xFFFFFFFF; i < hlen; i++) {			/* Check header BCC */
3251:DRIVER/FatFs/source/ff.c **** 		bcc = crc32(bcc, i - GPTH_Bcc < 4 ? 0 : gpth[i]);
3252:DRIVER/FatFs/source/ff.c **** 	}
3253:DRIVER/FatFs/source/ff.c **** 	if (~bcc != ld_dword(gpth + GPTH_Bcc)) return 0;
3254:DRIVER/FatFs/source/ff.c **** 	if (ld_dword(gpth + GPTH_PteSize) != SZ_GPTE) return 0;	/* Table entry size (must be SZ_GPTE bytes
3255:DRIVER/FatFs/source/ff.c **** 	if (ld_dword(gpth + GPTH_PtNum) > 128) return 0;		/* Table size (must be 128 entries or less) */
3256:DRIVER/FatFs/source/ff.c **** 
3257:DRIVER/FatFs/source/ff.c **** 	return 1;
3258:DRIVER/FatFs/source/ff.c **** }
3259:DRIVER/FatFs/source/ff.c **** 
3260:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY && FF_USE_MKFS
3261:DRIVER/FatFs/source/ff.c **** 
3262:DRIVER/FatFs/source/ff.c **** /* Generate random value */
3263:DRIVER/FatFs/source/ff.c **** static DWORD make_rand (
3264:DRIVER/FatFs/source/ff.c **** 	DWORD seed,		/* Seed value */
3265:DRIVER/FatFs/source/ff.c **** 	BYTE *buff,		/* Output buffer */
3266:DRIVER/FatFs/source/ff.c **** 	UINT n			/* Data length */
3267:DRIVER/FatFs/source/ff.c **** )
3268:DRIVER/FatFs/source/ff.c **** {
3269:DRIVER/FatFs/source/ff.c **** 	UINT r;
3270:DRIVER/FatFs/source/ff.c **** 
3271:DRIVER/FatFs/source/ff.c **** 
3272:DRIVER/FatFs/source/ff.c **** 	if (seed == 0) seed = 1;
3273:DRIVER/FatFs/source/ff.c **** 	do {
3274:DRIVER/FatFs/source/ff.c **** 		for (r = 0; r < 8; r++) seed = seed & 1 ? seed >> 1 ^ 0xA3000000 : seed >> 1;	/* Shift 8 bits the
3275:DRIVER/FatFs/source/ff.c **** 		*buff++ = (BYTE)seed;
3276:DRIVER/FatFs/source/ff.c **** 	} while (--n);
3277:DRIVER/FatFs/source/ff.c **** 	return seed;
3278:DRIVER/FatFs/source/ff.c **** }
3279:DRIVER/FatFs/source/ff.c **** 
3280:DRIVER/FatFs/source/ff.c **** #endif
3281:DRIVER/FatFs/source/ff.c **** #endif
3282:DRIVER/FatFs/source/ff.c **** 
3283:DRIVER/FatFs/source/ff.c **** 
3284:DRIVER/FatFs/source/ff.c **** 
3285:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
3286:DRIVER/FatFs/source/ff.c **** /* Load a sector and check if it is an FAT VBR                           */
3287:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
3288:DRIVER/FatFs/source/ff.c **** 
3289:DRIVER/FatFs/source/ff.c **** /* Check what the sector is */
3290:DRIVER/FatFs/source/ff.c **** 
3291:DRIVER/FatFs/source/ff.c **** static UINT check_fs (	/* 0:FAT/FAT32 VBR, 1:exFAT VBR, 2:Not FAT and valid BS, 3:Not FAT and inval
3292:DRIVER/FatFs/source/ff.c **** 	FATFS* fs,			/* Filesystem object */
3293:DRIVER/FatFs/source/ff.c **** 	LBA_t sect			/* Sector to load and check if it is an FAT-VBR or not */
3294:DRIVER/FatFs/source/ff.c **** )
3295:DRIVER/FatFs/source/ff.c **** {
3296:DRIVER/FatFs/source/ff.c **** 	WORD w, sign;
3297:DRIVER/FatFs/source/ff.c **** 	BYTE b;
3298:DRIVER/FatFs/source/ff.c **** 
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 83


3299:DRIVER/FatFs/source/ff.c **** 
3300:DRIVER/FatFs/source/ff.c **** 	fs->wflag = 0; fs->winsect = (LBA_t)0 - 1;		/* Invaidate window */
3301:DRIVER/FatFs/source/ff.c **** 	if (move_window(fs, sect) != FR_OK) return 4;	/* Load the boot sector */
3302:DRIVER/FatFs/source/ff.c **** 	sign = ld_word(fs->win + BS_55AA);
3303:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
3304:DRIVER/FatFs/source/ff.c **** 	if (sign == 0xAA55 && !memcmp(fs->win + BS_JmpBoot, "\xEB\x76\x90" "EXFAT   ", 11)) return 1;	/* I
3305:DRIVER/FatFs/source/ff.c **** #endif
3306:DRIVER/FatFs/source/ff.c **** 	b = fs->win[BS_JmpBoot];
3307:DRIVER/FatFs/source/ff.c **** 	if (b == 0xEB || b == 0xE9 || b == 0xE8) {	/* Valid JumpBoot code? (short jump, near jump or near 
3308:DRIVER/FatFs/source/ff.c **** 		if (sign == 0xAA55 && !memcmp(fs->win + BS_FilSysType32, "FAT32   ", 8)) {
3309:DRIVER/FatFs/source/ff.c **** 			return 0;	/* It is an FAT32 VBR */
3310:DRIVER/FatFs/source/ff.c **** 		}
3311:DRIVER/FatFs/source/ff.c **** 		/* FAT volumes formatted with early MS-DOS lack BS_55AA and BS_FilSysType, so FAT VBR needs to be
3312:DRIVER/FatFs/source/ff.c **** 		w = ld_word(fs->win + BPB_BytsPerSec);
3313:DRIVER/FatFs/source/ff.c **** 		b = fs->win[BPB_SecPerClus];
3314:DRIVER/FatFs/source/ff.c **** 		if ((w & (w - 1)) == 0 && w >= FF_MIN_SS && w <= FF_MAX_SS	/* Properness of sector size (512-4096
3315:DRIVER/FatFs/source/ff.c **** 			&& b != 0 && (b & (b - 1)) == 0				/* Properness of cluster size (2^n) */
3316:DRIVER/FatFs/source/ff.c **** 			&& ld_word(fs->win + BPB_RsvdSecCnt) != 0	/* Properness of reserved sectors (MNBZ) */
3317:DRIVER/FatFs/source/ff.c **** 			&& (UINT)fs->win[BPB_NumFATs] - 1 <= 1		/* Properness of FATs (1 or 2) */
3318:DRIVER/FatFs/source/ff.c **** 			&& ld_word(fs->win + BPB_RootEntCnt) != 0	/* Properness of root dir entries (MNBZ) */
3319:DRIVER/FatFs/source/ff.c **** 			&& (ld_word(fs->win + BPB_TotSec16) >= 128 || ld_dword(fs->win + BPB_TotSec32) >= 0x10000)	/* Pr
3320:DRIVER/FatFs/source/ff.c **** 			&& ld_word(fs->win + BPB_FATSz16) != 0) {	/* Properness of FAT size (MNBZ) */
3321:DRIVER/FatFs/source/ff.c **** 				return 0;	/* It can be presumed an FAT VBR */
3322:DRIVER/FatFs/source/ff.c **** 		}
3323:DRIVER/FatFs/source/ff.c **** 	}
3324:DRIVER/FatFs/source/ff.c **** 	return sign == 0xAA55 ? 2 : 3;	/* Not an FAT VBR (valid or invalid BS) */
3325:DRIVER/FatFs/source/ff.c **** }
3326:DRIVER/FatFs/source/ff.c **** 
3327:DRIVER/FatFs/source/ff.c **** 
3328:DRIVER/FatFs/source/ff.c **** /* Find an FAT volume */
3329:DRIVER/FatFs/source/ff.c **** /* (It supports only generic partitioning rules, MBR, GPT and SFD) */
3330:DRIVER/FatFs/source/ff.c **** 
3331:DRIVER/FatFs/source/ff.c **** static UINT find_volume (	/* Returns BS status found in the hosting drive */
3332:DRIVER/FatFs/source/ff.c **** 	FATFS* fs,		/* Filesystem object */
3333:DRIVER/FatFs/source/ff.c **** 	UINT part		/* Partition to fined = 0:find as SFD and partitions, >0:forced partition number */
3334:DRIVER/FatFs/source/ff.c **** )
3335:DRIVER/FatFs/source/ff.c **** {
3336:DRIVER/FatFs/source/ff.c **** 	UINT fmt, i;
3337:DRIVER/FatFs/source/ff.c **** 	DWORD mbr_pt[4];
3338:DRIVER/FatFs/source/ff.c **** 
3339:DRIVER/FatFs/source/ff.c **** 
3340:DRIVER/FatFs/source/ff.c **** 	fmt = check_fs(fs, 0);				/* Load sector 0 and check if it is an FAT VBR as SFD format */
3341:DRIVER/FatFs/source/ff.c **** 	if (fmt != 2 && (fmt >= 3 || part == 0)) return fmt;	/* Returns if it is an FAT VBR as auto scan, 
3342:DRIVER/FatFs/source/ff.c **** 
3343:DRIVER/FatFs/source/ff.c **** 	/* Sector 0 is not an FAT VBR or forced partition number wants a partition */
3344:DRIVER/FatFs/source/ff.c **** 
3345:DRIVER/FatFs/source/ff.c **** #if FF_LBA64
3346:DRIVER/FatFs/source/ff.c **** 	if (fs->win[MBR_Table + PTE_System] == 0xEE) {	/* GPT protective MBR? */
3347:DRIVER/FatFs/source/ff.c **** 		DWORD n_ent, v_ent, ofs;
3348:DRIVER/FatFs/source/ff.c **** 		QWORD pt_lba;
3349:DRIVER/FatFs/source/ff.c **** 
3350:DRIVER/FatFs/source/ff.c **** 		if (move_window(fs, 1) != FR_OK) return 4;	/* Load GPT header sector (next to MBR) */
3351:DRIVER/FatFs/source/ff.c **** 		if (!test_gpt_header(fs->win)) return 3;	/* Check if GPT header is valid */
3352:DRIVER/FatFs/source/ff.c **** 		n_ent = ld_dword(fs->win + GPTH_PtNum);		/* Number of entries */
3353:DRIVER/FatFs/source/ff.c **** 		pt_lba = ld_qword(fs->win + GPTH_PtOfs);	/* Table location */
3354:DRIVER/FatFs/source/ff.c **** 		for (v_ent = i = 0; i < n_ent; i++) {		/* Find FAT partition */
3355:DRIVER/FatFs/source/ff.c **** 			if (move_window(fs, pt_lba + i * SZ_GPTE / SS(fs)) != FR_OK) return 4;	/* PT sector */
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 84


3356:DRIVER/FatFs/source/ff.c **** 			ofs = i * SZ_GPTE % SS(fs);												/* Offset in the sector */
3357:DRIVER/FatFs/source/ff.c **** 			if (!memcmp(fs->win + ofs + GPTE_PtGuid, GUID_MS_Basic, 16)) {	/* MS basic data partition? */
3358:DRIVER/FatFs/source/ff.c **** 				v_ent++;
3359:DRIVER/FatFs/source/ff.c **** 				fmt = check_fs(fs, ld_qword(fs->win + ofs + GPTE_FstLba));	/* Load VBR and check status */
3360:DRIVER/FatFs/source/ff.c **** 				if (part == 0 && fmt <= 1) return fmt;			/* Auto search (valid FAT volume found first) */
3361:DRIVER/FatFs/source/ff.c **** 				if (part != 0 && v_ent == part) return fmt;		/* Forced partition order (regardless of it is val
3362:DRIVER/FatFs/source/ff.c **** 			}
3363:DRIVER/FatFs/source/ff.c **** 		}
3364:DRIVER/FatFs/source/ff.c **** 		return 3;	/* Not found */
3365:DRIVER/FatFs/source/ff.c **** 	}
3366:DRIVER/FatFs/source/ff.c **** #endif
3367:DRIVER/FatFs/source/ff.c **** 	if (FF_MULTI_PARTITION && part > 4) return 3;	/* MBR has 4 partitions max */
3368:DRIVER/FatFs/source/ff.c **** 	for (i = 0; i < 4; i++) {		/* Load partition offset in the MBR */
3369:DRIVER/FatFs/source/ff.c **** 		mbr_pt[i] = ld_dword(fs->win + MBR_Table + i * SZ_PTE + PTE_StLba);
3370:DRIVER/FatFs/source/ff.c **** 	}
3371:DRIVER/FatFs/source/ff.c **** 	i = part ? part - 1 : 0;		/* Table index to find first */
3372:DRIVER/FatFs/source/ff.c **** 	do {							/* Find an FAT volume */
3373:DRIVER/FatFs/source/ff.c **** 		fmt = mbr_pt[i] ? check_fs(fs, mbr_pt[i]) : 3;	/* Check if the partition is FAT */
3374:DRIVER/FatFs/source/ff.c **** 	} while (part == 0 && fmt >= 2 && ++i < 4);
3375:DRIVER/FatFs/source/ff.c **** 	return fmt;
3376:DRIVER/FatFs/source/ff.c **** }
3377:DRIVER/FatFs/source/ff.c **** 
3378:DRIVER/FatFs/source/ff.c **** 
3379:DRIVER/FatFs/source/ff.c **** 
3380:DRIVER/FatFs/source/ff.c **** 
3381:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
3382:DRIVER/FatFs/source/ff.c **** /* Determine logical drive number and mount the volume if needed         */
3383:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
3384:DRIVER/FatFs/source/ff.c **** 
3385:DRIVER/FatFs/source/ff.c **** static FRESULT mount_volume (	/* FR_OK(0): successful, !=0: an error occurred */
3386:DRIVER/FatFs/source/ff.c **** 	const TCHAR** path,			/* Pointer to pointer to the path name (drive number) */
3387:DRIVER/FatFs/source/ff.c **** 	FATFS** rfs,				/* Pointer to pointer to the found filesystem object */
3388:DRIVER/FatFs/source/ff.c **** 	BYTE mode					/* Desiered access mode to check write protection */
3389:DRIVER/FatFs/source/ff.c **** )
3390:DRIVER/FatFs/source/ff.c **** {
3391:DRIVER/FatFs/source/ff.c **** 	int vol;
3392:DRIVER/FatFs/source/ff.c **** 	FATFS *fs;
3393:DRIVER/FatFs/source/ff.c **** 	DSTATUS stat;
3394:DRIVER/FatFs/source/ff.c **** 	LBA_t bsect;
3395:DRIVER/FatFs/source/ff.c **** 	DWORD tsect, sysect, fasize, nclst, szbfat;
3396:DRIVER/FatFs/source/ff.c **** 	WORD nrsv;
3397:DRIVER/FatFs/source/ff.c **** 	UINT fmt;
3398:DRIVER/FatFs/source/ff.c **** 
3399:DRIVER/FatFs/source/ff.c **** 
3400:DRIVER/FatFs/source/ff.c **** 	/* Get logical drive number */
3401:DRIVER/FatFs/source/ff.c **** 	*rfs = 0;
3402:DRIVER/FatFs/source/ff.c **** 	vol = get_ldnumber(path);
3403:DRIVER/FatFs/source/ff.c **** 	if (vol < 0) return FR_INVALID_DRIVE;
3404:DRIVER/FatFs/source/ff.c **** 
3405:DRIVER/FatFs/source/ff.c **** 	/* Check if the filesystem object is valid or not */
3406:DRIVER/FatFs/source/ff.c **** 	fs = FatFs[vol];					/* Get pointer to the filesystem object */
3407:DRIVER/FatFs/source/ff.c **** 	if (!fs) return FR_NOT_ENABLED;		/* Is the filesystem object available? */
3408:DRIVER/FatFs/source/ff.c **** #if FF_FS_REENTRANT
3409:DRIVER/FatFs/source/ff.c **** 	if (!lock_volume(fs, 1)) return FR_TIMEOUT;	/* Lock the volume, and system if needed */
3410:DRIVER/FatFs/source/ff.c **** #endif
3411:DRIVER/FatFs/source/ff.c **** 	*rfs = fs;							/* Return pointer to the filesystem object */
3412:DRIVER/FatFs/source/ff.c **** 
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 85


3413:DRIVER/FatFs/source/ff.c **** 	mode &= (BYTE)~FA_READ;				/* Desired access mode, write access or not */
3414:DRIVER/FatFs/source/ff.c **** 	if (fs->fs_type != 0) {				/* If the volume has been mounted */
3415:DRIVER/FatFs/source/ff.c **** 		stat = disk_status(fs->pdrv);
3416:DRIVER/FatFs/source/ff.c **** 		if (!(stat & STA_NOINIT)) {		/* and the physical drive is kept initialized */
3417:DRIVER/FatFs/source/ff.c **** 			if (!FF_FS_READONLY && mode && (stat & STA_PROTECT)) {	/* Check write protection if needed */
3418:DRIVER/FatFs/source/ff.c **** 				return FR_WRITE_PROTECTED;
3419:DRIVER/FatFs/source/ff.c **** 			}
3420:DRIVER/FatFs/source/ff.c **** 			return FR_OK;				/* The filesystem object is already valid */
3421:DRIVER/FatFs/source/ff.c **** 		}
3422:DRIVER/FatFs/source/ff.c **** 	}
3423:DRIVER/FatFs/source/ff.c **** 
3424:DRIVER/FatFs/source/ff.c **** 	/* The filesystem object is not valid. */
3425:DRIVER/FatFs/source/ff.c **** 	/* Following code attempts to mount the volume. (find an FAT volume, analyze the BPB and initializ
3426:DRIVER/FatFs/source/ff.c **** 
3427:DRIVER/FatFs/source/ff.c **** 	fs->fs_type = 0;					/* Invalidate the filesystem object */
3428:DRIVER/FatFs/source/ff.c **** 	stat = disk_initialize(fs->pdrv);	/* Initialize the volume hosting physical drive */
3429:DRIVER/FatFs/source/ff.c **** 	if (stat & STA_NOINIT) { 			/* Check if the initialization succeeded */
3430:DRIVER/FatFs/source/ff.c **** 		return FR_NOT_READY;			/* Failed to initialize due to no medium or hard error */
3431:DRIVER/FatFs/source/ff.c **** 	}
3432:DRIVER/FatFs/source/ff.c **** 	if (!FF_FS_READONLY && mode && (stat & STA_PROTECT)) { /* Check disk write protection if needed */
3433:DRIVER/FatFs/source/ff.c **** 		return FR_WRITE_PROTECTED;
3434:DRIVER/FatFs/source/ff.c **** 	}
3435:DRIVER/FatFs/source/ff.c **** #if FF_MAX_SS != FF_MIN_SS				/* Get sector size (multiple sector size cfg only) */
3436:DRIVER/FatFs/source/ff.c **** 	if (disk_ioctl(fs->pdrv, GET_SECTOR_SIZE, &SS(fs)) != RES_OK) return FR_DISK_ERR;
3437:DRIVER/FatFs/source/ff.c **** 	if (SS(fs) > FF_MAX_SS || SS(fs) < FF_MIN_SS || (SS(fs) & (SS(fs) - 1))) return FR_DISK_ERR;
3438:DRIVER/FatFs/source/ff.c **** #endif
3439:DRIVER/FatFs/source/ff.c **** 
3440:DRIVER/FatFs/source/ff.c **** 	/* Find an FAT volume on the hosting drive */
3441:DRIVER/FatFs/source/ff.c **** 	fmt = find_volume(fs, LD2PT(vol));
3442:DRIVER/FatFs/source/ff.c **** 	if (fmt == 4) return FR_DISK_ERR;		/* An error occurred in the disk I/O layer */
3443:DRIVER/FatFs/source/ff.c **** 	if (fmt >= 2) return FR_NO_FILESYSTEM;	/* No FAT volume is found */
3444:DRIVER/FatFs/source/ff.c **** 	bsect = fs->winsect;					/* Volume offset in the hosting physical drive */
3445:DRIVER/FatFs/source/ff.c **** 
3446:DRIVER/FatFs/source/ff.c **** 	/* An FAT volume is found (bsect). Following code initializes the filesystem object */
3447:DRIVER/FatFs/source/ff.c **** 
3448:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
3449:DRIVER/FatFs/source/ff.c **** 	if (fmt == 1) {
3450:DRIVER/FatFs/source/ff.c **** 		QWORD maxlba;
3451:DRIVER/FatFs/source/ff.c **** 		DWORD so, cv, bcl, i;
3452:DRIVER/FatFs/source/ff.c **** 
3453:DRIVER/FatFs/source/ff.c **** 		for (i = BPB_ZeroedEx; i < BPB_ZeroedEx + 53 && fs->win[i] == 0; i++) ;	/* Check zero filler */
3454:DRIVER/FatFs/source/ff.c **** 		if (i < BPB_ZeroedEx + 53) return FR_NO_FILESYSTEM;
3455:DRIVER/FatFs/source/ff.c **** 
3456:DRIVER/FatFs/source/ff.c **** 		if (ld_word(fs->win + BPB_FSVerEx) != 0x100) return FR_NO_FILESYSTEM;	/* Check exFAT version (mus
3457:DRIVER/FatFs/source/ff.c **** 
3458:DRIVER/FatFs/source/ff.c **** 		if (1 << fs->win[BPB_BytsPerSecEx] != SS(fs)) {	/* (BPB_BytsPerSecEx must be equal to the physica
3459:DRIVER/FatFs/source/ff.c **** 			return FR_NO_FILESYSTEM;
3460:DRIVER/FatFs/source/ff.c **** 		}
3461:DRIVER/FatFs/source/ff.c **** 
3462:DRIVER/FatFs/source/ff.c **** 		maxlba = ld_qword(fs->win + BPB_TotSecEx) + bsect;	/* Last LBA of the volume + 1 */
3463:DRIVER/FatFs/source/ff.c **** 		if (!FF_LBA64 && maxlba >= 0x100000000) return FR_NO_FILESYSTEM;	/* (It cannot be accessed in 32-
3464:DRIVER/FatFs/source/ff.c **** 
3465:DRIVER/FatFs/source/ff.c **** 		fs->fsize = ld_dword(fs->win + BPB_FatSzEx);	/* Number of sectors per FAT */
3466:DRIVER/FatFs/source/ff.c **** 
3467:DRIVER/FatFs/source/ff.c **** 		fs->n_fats = fs->win[BPB_NumFATsEx];			/* Number of FATs */
3468:DRIVER/FatFs/source/ff.c **** 		if (fs->n_fats != 1) return FR_NO_FILESYSTEM;	/* (Supports only 1 FAT) */
3469:DRIVER/FatFs/source/ff.c **** 
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 86


3470:DRIVER/FatFs/source/ff.c **** 		fs->csize = 1 << fs->win[BPB_SecPerClusEx];		/* Cluster size */
3471:DRIVER/FatFs/source/ff.c **** 		if (fs->csize == 0)	return FR_NO_FILESYSTEM;	/* (Must be 1..32768 sectors) */
3472:DRIVER/FatFs/source/ff.c **** 
3473:DRIVER/FatFs/source/ff.c **** 		nclst = ld_dword(fs->win + BPB_NumClusEx);		/* Number of clusters */
3474:DRIVER/FatFs/source/ff.c **** 		if (nclst > MAX_EXFAT) return FR_NO_FILESYSTEM;	/* (Too many clusters) */
3475:DRIVER/FatFs/source/ff.c **** 		fs->n_fatent = nclst + 2;
3476:DRIVER/FatFs/source/ff.c **** 
3477:DRIVER/FatFs/source/ff.c **** 		/* Boundaries and Limits */
3478:DRIVER/FatFs/source/ff.c **** 		fs->volbase = bsect;
3479:DRIVER/FatFs/source/ff.c **** 		fs->database = bsect + ld_dword(fs->win + BPB_DataOfsEx);
3480:DRIVER/FatFs/source/ff.c **** 		fs->fatbase = bsect + ld_dword(fs->win + BPB_FatOfsEx);
3481:DRIVER/FatFs/source/ff.c **** 		if (maxlba < (QWORD)fs->database + nclst * fs->csize) return FR_NO_FILESYSTEM;	/* (Volume size mu
3482:DRIVER/FatFs/source/ff.c **** 		fs->dirbase = ld_dword(fs->win + BPB_RootClusEx);
3483:DRIVER/FatFs/source/ff.c **** 
3484:DRIVER/FatFs/source/ff.c **** 		/* Get bitmap location and check if it is contiguous (implementation assumption) */
3485:DRIVER/FatFs/source/ff.c **** 		so = i = 0;
3486:DRIVER/FatFs/source/ff.c **** 		for (;;) {	/* Find the bitmap entry in the root directory (in only first cluster) */
3487:DRIVER/FatFs/source/ff.c **** 			if (i == 0) {
3488:DRIVER/FatFs/source/ff.c **** 				if (so >= fs->csize) return FR_NO_FILESYSTEM;	/* Not found? */
3489:DRIVER/FatFs/source/ff.c **** 				if (move_window(fs, clst2sect(fs, (DWORD)fs->dirbase) + so) != FR_OK) return FR_DISK_ERR;
3490:DRIVER/FatFs/source/ff.c **** 				so++;
3491:DRIVER/FatFs/source/ff.c **** 			}
3492:DRIVER/FatFs/source/ff.c **** 			if (fs->win[i] == ET_BITMAP) break;			/* Is it a bitmap entry? */
3493:DRIVER/FatFs/source/ff.c **** 			i = (i + SZDIRE) % SS(fs);	/* Next entry */
3494:DRIVER/FatFs/source/ff.c **** 		}
3495:DRIVER/FatFs/source/ff.c **** 		bcl = ld_dword(fs->win + i + 20);				/* Bitmap cluster */
3496:DRIVER/FatFs/source/ff.c **** 		if (bcl < 2 || bcl >= fs->n_fatent) return FR_NO_FILESYSTEM;	/* (Wrong cluster#) */
3497:DRIVER/FatFs/source/ff.c **** 		fs->bitbase = fs->database + fs->csize * (bcl - 2);	/* Bitmap sector */
3498:DRIVER/FatFs/source/ff.c **** 		for (;;) {	/* Check if bitmap is contiguous */
3499:DRIVER/FatFs/source/ff.c **** 			if (move_window(fs, fs->fatbase + bcl / (SS(fs) / 4)) != FR_OK) return FR_DISK_ERR;
3500:DRIVER/FatFs/source/ff.c **** 			cv = ld_dword(fs->win + bcl % (SS(fs) / 4) * 4);
3501:DRIVER/FatFs/source/ff.c **** 			if (cv == 0xFFFFFFFF) break;				/* Last link? */
3502:DRIVER/FatFs/source/ff.c **** 			if (cv != ++bcl) return FR_NO_FILESYSTEM;	/* Fragmented bitmap? */
3503:DRIVER/FatFs/source/ff.c **** 		}
3504:DRIVER/FatFs/source/ff.c **** 
3505:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY
3506:DRIVER/FatFs/source/ff.c **** 		fs->last_clst = fs->free_clst = 0xFFFFFFFF;		/* Initialize cluster allocation information */
3507:DRIVER/FatFs/source/ff.c **** #endif
3508:DRIVER/FatFs/source/ff.c **** 		fmt = FS_EXFAT;			/* FAT sub-type */
3509:DRIVER/FatFs/source/ff.c **** 	} else
3510:DRIVER/FatFs/source/ff.c **** #endif	/* FF_FS_EXFAT */
3511:DRIVER/FatFs/source/ff.c **** 	{
3512:DRIVER/FatFs/source/ff.c **** 		if (ld_word(fs->win + BPB_BytsPerSec) != SS(fs)) return FR_NO_FILESYSTEM;	/* (BPB_BytsPerSec must
3513:DRIVER/FatFs/source/ff.c **** 
3514:DRIVER/FatFs/source/ff.c **** 		fasize = ld_word(fs->win + BPB_FATSz16);		/* Number of sectors per FAT */
3515:DRIVER/FatFs/source/ff.c **** 		if (fasize == 0) fasize = ld_dword(fs->win + BPB_FATSz32);
3516:DRIVER/FatFs/source/ff.c **** 		fs->fsize = fasize;
3517:DRIVER/FatFs/source/ff.c **** 
3518:DRIVER/FatFs/source/ff.c **** 		fs->n_fats = fs->win[BPB_NumFATs];				/* Number of FATs */
3519:DRIVER/FatFs/source/ff.c **** 		if (fs->n_fats != 1 && fs->n_fats != 2) return FR_NO_FILESYSTEM;	/* (Must be 1 or 2) */
3520:DRIVER/FatFs/source/ff.c **** 		fasize *= fs->n_fats;							/* Number of sectors for FAT area */
3521:DRIVER/FatFs/source/ff.c **** 
3522:DRIVER/FatFs/source/ff.c **** 		fs->csize = fs->win[BPB_SecPerClus];			/* Cluster size */
3523:DRIVER/FatFs/source/ff.c **** 		if (fs->csize == 0 || (fs->csize & (fs->csize - 1))) return FR_NO_FILESYSTEM;	/* (Must be power o
3524:DRIVER/FatFs/source/ff.c **** 
3525:DRIVER/FatFs/source/ff.c **** 		fs->n_rootdir = ld_word(fs->win + BPB_RootEntCnt);	/* Number of root directory entries */
3526:DRIVER/FatFs/source/ff.c **** 		if (fs->n_rootdir % (SS(fs) / SZDIRE)) return FR_NO_FILESYSTEM;	/* (Must be sector aligned) */
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 87


3527:DRIVER/FatFs/source/ff.c **** 
3528:DRIVER/FatFs/source/ff.c **** 		tsect = ld_word(fs->win + BPB_TotSec16);		/* Number of sectors on the volume */
3529:DRIVER/FatFs/source/ff.c **** 		if (tsect == 0) tsect = ld_dword(fs->win + BPB_TotSec32);
3530:DRIVER/FatFs/source/ff.c **** 
3531:DRIVER/FatFs/source/ff.c **** 		nrsv = ld_word(fs->win + BPB_RsvdSecCnt);		/* Number of reserved sectors */
3532:DRIVER/FatFs/source/ff.c **** 		if (nrsv == 0) return FR_NO_FILESYSTEM;			/* (Must not be 0) */
3533:DRIVER/FatFs/source/ff.c **** 
3534:DRIVER/FatFs/source/ff.c **** 		/* Determine the FAT sub type */
3535:DRIVER/FatFs/source/ff.c **** 		sysect = nrsv + fasize + fs->n_rootdir / (SS(fs) / SZDIRE);	/* RSV + FAT + DIR */
3536:DRIVER/FatFs/source/ff.c **** 		if (tsect < sysect) return FR_NO_FILESYSTEM;	/* (Invalid volume size) */
3537:DRIVER/FatFs/source/ff.c **** 		nclst = (tsect - sysect) / fs->csize;			/* Number of clusters */
3538:DRIVER/FatFs/source/ff.c **** 		if (nclst == 0) return FR_NO_FILESYSTEM;		/* (Invalid volume size) */
3539:DRIVER/FatFs/source/ff.c **** 		fmt = 0;
3540:DRIVER/FatFs/source/ff.c **** 		if (nclst <= MAX_FAT32) fmt = FS_FAT32;
3541:DRIVER/FatFs/source/ff.c **** 		if (nclst <= MAX_FAT16) fmt = FS_FAT16;
3542:DRIVER/FatFs/source/ff.c **** 		if (nclst <= MAX_FAT12) fmt = FS_FAT12;
3543:DRIVER/FatFs/source/ff.c **** 		if (fmt == 0) return FR_NO_FILESYSTEM;
3544:DRIVER/FatFs/source/ff.c **** 
3545:DRIVER/FatFs/source/ff.c **** 		/* Boundaries and Limits */
3546:DRIVER/FatFs/source/ff.c **** 		fs->n_fatent = nclst + 2;						/* Number of FAT entries */
3547:DRIVER/FatFs/source/ff.c **** 		fs->volbase = bsect;							/* Volume start sector */
3548:DRIVER/FatFs/source/ff.c **** 		fs->fatbase = bsect + nrsv; 					/* FAT start sector */
3549:DRIVER/FatFs/source/ff.c **** 		fs->database = bsect + sysect;					/* Data start sector */
3550:DRIVER/FatFs/source/ff.c **** 		if (fmt == FS_FAT32) {
3551:DRIVER/FatFs/source/ff.c **** 			if (ld_word(fs->win + BPB_FSVer32) != 0) return FR_NO_FILESYSTEM;	/* (Must be FAT32 revision 0.0
3552:DRIVER/FatFs/source/ff.c **** 			if (fs->n_rootdir != 0) return FR_NO_FILESYSTEM;	/* (BPB_RootEntCnt must be 0) */
3553:DRIVER/FatFs/source/ff.c **** 			fs->dirbase = ld_dword(fs->win + BPB_RootClus32);	/* Root directory start cluster */
3554:DRIVER/FatFs/source/ff.c **** 			szbfat = fs->n_fatent * 4;					/* (Needed FAT size) */
3555:DRIVER/FatFs/source/ff.c **** 		} else {
3556:DRIVER/FatFs/source/ff.c **** 			if (fs->n_rootdir == 0)	return FR_NO_FILESYSTEM;	/* (BPB_RootEntCnt must not be 0) */
3557:DRIVER/FatFs/source/ff.c **** 			fs->dirbase = fs->fatbase + fasize;			/* Root directory start sector */
3558:DRIVER/FatFs/source/ff.c **** 			szbfat = (fmt == FS_FAT16) ?				/* (Needed FAT size) */
3559:DRIVER/FatFs/source/ff.c **** 				fs->n_fatent * 2 : fs->n_fatent * 3 / 2 + (fs->n_fatent & 1);
3560:DRIVER/FatFs/source/ff.c **** 		}
3561:DRIVER/FatFs/source/ff.c **** 		if (fs->fsize < (szbfat + (SS(fs) - 1)) / SS(fs)) return FR_NO_FILESYSTEM;	/* (BPB_FATSz must not
3562:DRIVER/FatFs/source/ff.c **** 
3563:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY
3564:DRIVER/FatFs/source/ff.c **** 		/* Get FSInfo if available */
3565:DRIVER/FatFs/source/ff.c **** 		fs->last_clst = fs->free_clst = 0xFFFFFFFF;		/* Initialize cluster allocation information */
3566:DRIVER/FatFs/source/ff.c **** 		fs->fsi_flag = 0x80;
3567:DRIVER/FatFs/source/ff.c **** #if (FF_FS_NOFSINFO & 3) != 3
3568:DRIVER/FatFs/source/ff.c **** 		if (fmt == FS_FAT32				/* Allow to update FSInfo only if BPB_FSInfo32 == 1 */
3569:DRIVER/FatFs/source/ff.c **** 			&& ld_word(fs->win + BPB_FSInfo32) == 1
3570:DRIVER/FatFs/source/ff.c **** 			&& move_window(fs, bsect + 1) == FR_OK)
3571:DRIVER/FatFs/source/ff.c **** 		{
3572:DRIVER/FatFs/source/ff.c **** 			fs->fsi_flag = 0;
3573:DRIVER/FatFs/source/ff.c **** 			if (ld_word(fs->win + BS_55AA) == 0xAA55	/* Load FSInfo data if available */
3574:DRIVER/FatFs/source/ff.c **** 				&& ld_dword(fs->win + FSI_LeadSig) == 0x41615252
3575:DRIVER/FatFs/source/ff.c **** 				&& ld_dword(fs->win + FSI_StrucSig) == 0x61417272)
3576:DRIVER/FatFs/source/ff.c **** 			{
3577:DRIVER/FatFs/source/ff.c **** #if (FF_FS_NOFSINFO & 1) == 0
3578:DRIVER/FatFs/source/ff.c **** 				fs->free_clst = ld_dword(fs->win + FSI_Free_Count);
3579:DRIVER/FatFs/source/ff.c **** #endif
3580:DRIVER/FatFs/source/ff.c **** #if (FF_FS_NOFSINFO & 2) == 0
3581:DRIVER/FatFs/source/ff.c **** 				fs->last_clst = ld_dword(fs->win + FSI_Nxt_Free);
3582:DRIVER/FatFs/source/ff.c **** #endif
3583:DRIVER/FatFs/source/ff.c **** 			}
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 88


3584:DRIVER/FatFs/source/ff.c **** 		}
3585:DRIVER/FatFs/source/ff.c **** #endif	/* (FF_FS_NOFSINFO & 3) != 3 */
3586:DRIVER/FatFs/source/ff.c **** #endif	/* !FF_FS_READONLY */
3587:DRIVER/FatFs/source/ff.c **** 	}
3588:DRIVER/FatFs/source/ff.c **** 
3589:DRIVER/FatFs/source/ff.c **** 	fs->fs_type = (BYTE)fmt;/* FAT sub-type (the filesystem object gets valid) */
3590:DRIVER/FatFs/source/ff.c **** 	fs->id = ++Fsid;		/* Volume mount ID */
3591:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN == 1
3592:DRIVER/FatFs/source/ff.c **** 	fs->lfnbuf = LfnBuf;	/* Static LFN working buffer */
3593:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
3594:DRIVER/FatFs/source/ff.c **** 	fs->dirbuf = DirBuf;	/* Static directory block scratchpad buuffer */
3595:DRIVER/FatFs/source/ff.c **** #endif
3596:DRIVER/FatFs/source/ff.c **** #endif
3597:DRIVER/FatFs/source/ff.c **** #if FF_FS_RPATH != 0
3598:DRIVER/FatFs/source/ff.c **** 	fs->cdir = 0;			/* Initialize current directory */
3599:DRIVER/FatFs/source/ff.c **** #endif
3600:DRIVER/FatFs/source/ff.c **** #if FF_FS_LOCK				/* Clear file lock semaphores */
3601:DRIVER/FatFs/source/ff.c **** 	clear_share(fs);
3602:DRIVER/FatFs/source/ff.c **** #endif
3603:DRIVER/FatFs/source/ff.c **** 	return FR_OK;
3604:DRIVER/FatFs/source/ff.c **** }
3605:DRIVER/FatFs/source/ff.c **** 
3606:DRIVER/FatFs/source/ff.c **** 
3607:DRIVER/FatFs/source/ff.c **** 
3608:DRIVER/FatFs/source/ff.c **** 
3609:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
3610:DRIVER/FatFs/source/ff.c **** /* Check if the file/directory object is valid or not                    */
3611:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
3612:DRIVER/FatFs/source/ff.c **** 
3613:DRIVER/FatFs/source/ff.c **** static FRESULT validate (	/* Returns FR_OK or FR_INVALID_OBJECT */
3614:DRIVER/FatFs/source/ff.c **** 	FFOBJID* obj,			/* Pointer to the FFOBJID, the 1st member in the FIL/DIR structure, to check valid
3615:DRIVER/FatFs/source/ff.c **** 	FATFS** rfs				/* Pointer to pointer to the owner filesystem object to return */
3616:DRIVER/FatFs/source/ff.c **** )
3617:DRIVER/FatFs/source/ff.c **** {
 1277              		.loc 1 3617 1 is_stmt 1 view -0
 1278              		.cfi_startproc
 1279              		@ args = 0, pretend = 0, frame = 0
 1280              		@ frame_needed = 0, uses_anonymous_args = 0
 1281              		.loc 1 3617 1 is_stmt 0 view .LVU419
 1282 0000 38B5     		push	{r3, r4, r5, lr}
 1283              	.LCFI5:
 1284              		.cfi_def_cfa_offset 16
 1285              		.cfi_offset 3, -16
 1286              		.cfi_offset 4, -12
 1287              		.cfi_offset 5, -8
 1288              		.cfi_offset 14, -4
 1289 0002 0D46     		mov	r5, r1
3618:DRIVER/FatFs/source/ff.c **** 	FRESULT res = FR_INVALID_OBJECT;
 1290              		.loc 1 3618 2 is_stmt 1 view .LVU420
 1291              	.LVL164:
3619:DRIVER/FatFs/source/ff.c **** 
3620:DRIVER/FatFs/source/ff.c **** 
3621:DRIVER/FatFs/source/ff.c **** 	if (obj && obj->fs && obj->fs->fs_type && obj->id == obj->fs->id) {	/* Test if the object is valid
 1292              		.loc 1 3621 2 view .LVU421
 1293              		.loc 1 3621 5 is_stmt 0 view .LVU422
 1294 0004 0446     		mov	r4, r0
 1295 0006 98B1     		cbz	r0, .L94
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 89


 1296              		.loc 1 3621 16 discriminator 1 view .LVU423
 1297 0008 0368     		ldr	r3, [r0]
 1298              		.loc 1 3621 10 discriminator 1 view .LVU424
 1299 000a 9BB1     		cbz	r3, .L95
 1300              		.loc 1 3621 31 discriminator 2 view .LVU425
 1301 000c 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 1302              		.loc 1 3621 21 discriminator 2 view .LVU426
 1303 000e A2B1     		cbz	r2, .L96
 1304              		.loc 1 3621 47 discriminator 3 view .LVU427
 1305 0010 8188     		ldrh	r1, [r0, #4]
 1306              	.LVL165:
 1307              		.loc 1 3621 62 discriminator 3 view .LVU428
 1308 0012 DA88     		ldrh	r2, [r3, #6]
 1309              		.loc 1 3621 41 discriminator 3 view .LVU429
 1310 0014 9142     		cmp	r1, r2
 1311 0016 03D0     		beq	.L100
3618:DRIVER/FatFs/source/ff.c **** 	FRESULT res = FR_INVALID_OBJECT;
 1312              		.loc 1 3618 10 view .LVU430
 1313 0018 0920     		movs	r0, #9
 1314              	.LVL166:
3622:DRIVER/FatFs/source/ff.c **** #if FF_FS_REENTRANT
3623:DRIVER/FatFs/source/ff.c **** 		if (lock_volume(obj->fs, 0)) {	/* Take a grant to access the volume */
3624:DRIVER/FatFs/source/ff.c **** 			if (!(disk_status(obj->fs->pdrv) & STA_NOINIT)) { /* Test if the hosting phsical drive is kept i
3625:DRIVER/FatFs/source/ff.c **** 				res = FR_OK;
3626:DRIVER/FatFs/source/ff.c **** 			} else {
3627:DRIVER/FatFs/source/ff.c **** 				unlock_volume(obj->fs, FR_OK);	/* Invalidated volume, abort to access */
3628:DRIVER/FatFs/source/ff.c **** 			}
3629:DRIVER/FatFs/source/ff.c **** 		} else {	/* Could not take */
3630:DRIVER/FatFs/source/ff.c **** 			res = FR_TIMEOUT;
3631:DRIVER/FatFs/source/ff.c **** 		}
3632:DRIVER/FatFs/source/ff.c **** #else
3633:DRIVER/FatFs/source/ff.c **** 		if (!(disk_status(obj->fs->pdrv) & STA_NOINIT)) { /* Test if the hosting phsical drive is kept in
3634:DRIVER/FatFs/source/ff.c **** 			res = FR_OK;
3635:DRIVER/FatFs/source/ff.c **** 		}
3636:DRIVER/FatFs/source/ff.c **** #endif
3637:DRIVER/FatFs/source/ff.c **** 	}
3638:DRIVER/FatFs/source/ff.c **** 	*rfs = (res == FR_OK) ? obj->fs : 0;	/* Return corresponding filesystem object if it is valid */
 1315              		.loc 1 3638 34 view .LVU431
 1316 001a 0024     		movs	r4, #0
 1317              	.LVL167:
 1318              	.L93:
 1319              		.loc 1 3638 7 discriminator 4 view .LVU432
 1320 001c 2C60     		str	r4, [r5]
3639:DRIVER/FatFs/source/ff.c **** 	return res;
 1321              		.loc 1 3639 2 is_stmt 1 discriminator 4 view .LVU433
3640:DRIVER/FatFs/source/ff.c **** }
 1322              		.loc 1 3640 1 is_stmt 0 discriminator 4 view .LVU434
 1323 001e 38BD     		pop	{r3, r4, r5, pc}
 1324              	.LVL168:
 1325              	.L100:
3633:DRIVER/FatFs/source/ff.c **** 			res = FR_OK;
 1326              		.loc 1 3633 3 is_stmt 1 view .LVU435
3633:DRIVER/FatFs/source/ff.c **** 			res = FR_OK;
 1327              		.loc 1 3633 9 is_stmt 0 view .LVU436
 1328 0020 5878     		ldrb	r0, [r3, #1]	@ zero_extendqisi2
 1329              	.LVL169:
3633:DRIVER/FatFs/source/ff.c **** 			res = FR_OK;
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 90


 1330              		.loc 1 3633 9 view .LVU437
 1331 0022 FFF7FEFF 		bl	disk_status
 1332              	.LVL170:
3633:DRIVER/FatFs/source/ff.c **** 			res = FR_OK;
 1333              		.loc 1 3633 6 view .LVU438
 1334 0026 10F00100 		ands	r0, r0, #1
 1335 002a 09D1     		bne	.L98
3634:DRIVER/FatFs/source/ff.c **** 		}
 1336              		.loc 1 3634 4 is_stmt 1 view .LVU439
 1337              	.LVL171:
3638:DRIVER/FatFs/source/ff.c **** 	return res;
 1338              		.loc 1 3638 2 view .LVU440
3638:DRIVER/FatFs/source/ff.c **** 	return res;
 1339              		.loc 1 3638 34 is_stmt 0 view .LVU441
 1340 002c 2468     		ldr	r4, [r4]
 1341              	.LVL172:
3638:DRIVER/FatFs/source/ff.c **** 	return res;
 1342              		.loc 1 3638 34 view .LVU442
 1343 002e F5E7     		b	.L93
 1344              	.LVL173:
 1345              	.L94:
3618:DRIVER/FatFs/source/ff.c **** 
 1346              		.loc 1 3618 10 view .LVU443
 1347 0030 0920     		movs	r0, #9
 1348              	.LVL174:
3618:DRIVER/FatFs/source/ff.c **** 
 1349              		.loc 1 3618 10 view .LVU444
 1350 0032 F3E7     		b	.L93
 1351              	.LVL175:
 1352              	.L95:
3638:DRIVER/FatFs/source/ff.c **** 	return res;
 1353              		.loc 1 3638 34 view .LVU445
 1354 0034 1C46     		mov	r4, r3
3618:DRIVER/FatFs/source/ff.c **** 
 1355              		.loc 1 3618 10 view .LVU446
 1356 0036 0920     		movs	r0, #9
 1357              	.LVL176:
3618:DRIVER/FatFs/source/ff.c **** 
 1358              		.loc 1 3618 10 view .LVU447
 1359 0038 F0E7     		b	.L93
 1360              	.LVL177:
 1361              	.L96:
3618:DRIVER/FatFs/source/ff.c **** 
 1362              		.loc 1 3618 10 view .LVU448
 1363 003a 0920     		movs	r0, #9
 1364              	.LVL178:
3638:DRIVER/FatFs/source/ff.c **** 	return res;
 1365              		.loc 1 3638 34 view .LVU449
 1366 003c 0024     		movs	r4, #0
 1367              	.LVL179:
3638:DRIVER/FatFs/source/ff.c **** 	return res;
 1368              		.loc 1 3638 34 view .LVU450
 1369 003e EDE7     		b	.L93
 1370              	.LVL180:
 1371              	.L98:
3618:DRIVER/FatFs/source/ff.c **** 
 1372              		.loc 1 3618 10 view .LVU451
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 91


 1373 0040 0920     		movs	r0, #9
3638:DRIVER/FatFs/source/ff.c **** 	return res;
 1374              		.loc 1 3638 34 view .LVU452
 1375 0042 0024     		movs	r4, #0
 1376              	.LVL181:
3638:DRIVER/FatFs/source/ff.c **** 	return res;
 1377              		.loc 1 3638 34 view .LVU453
 1378 0044 EAE7     		b	.L93
 1379              		.cfi_endproc
 1380              	.LFE38:
 1382              		.section	.text.sync_window,"ax",%progbits
 1383              		.align	1
 1384              		.syntax unified
 1385              		.thumb
 1386              		.thumb_func
 1388              	sync_window:
 1389              	.LVL182:
 1390              	.LFB8:
1058:DRIVER/FatFs/source/ff.c **** 	FRESULT res = FR_OK;
 1391              		.loc 1 1058 1 is_stmt 1 view -0
 1392              		.cfi_startproc
 1393              		@ args = 0, pretend = 0, frame = 0
 1394              		@ frame_needed = 0, uses_anonymous_args = 0
1058:DRIVER/FatFs/source/ff.c **** 	FRESULT res = FR_OK;
 1395              		.loc 1 1058 1 is_stmt 0 view .LVU455
 1396 0000 70B5     		push	{r4, r5, r6, lr}
 1397              	.LCFI6:
 1398              		.cfi_def_cfa_offset 16
 1399              		.cfi_offset 4, -16
 1400              		.cfi_offset 5, -12
 1401              		.cfi_offset 6, -8
 1402              		.cfi_offset 14, -4
1059:DRIVER/FatFs/source/ff.c **** 
 1403              		.loc 1 1059 2 is_stmt 1 view .LVU456
 1404              	.LVL183:
1062:DRIVER/FatFs/source/ff.c **** 		if (disk_write(fs->pdrv, fs->win, fs->winsect, 1) == RES_OK) {	/* Write it back into the volume *
 1405              		.loc 1 1062 2 view .LVU457
1062:DRIVER/FatFs/source/ff.c **** 		if (disk_write(fs->pdrv, fs->win, fs->winsect, 1) == RES_OK) {	/* Write it back into the volume *
 1406              		.loc 1 1062 8 is_stmt 0 view .LVU458
 1407 0002 0579     		ldrb	r5, [r0, #4]	@ zero_extendqisi2
1062:DRIVER/FatFs/source/ff.c **** 		if (disk_write(fs->pdrv, fs->win, fs->winsect, 1) == RES_OK) {	/* Write it back into the volume *
 1408              		.loc 1 1062 5 view .LVU459
 1409 0004 0DB9     		cbnz	r5, .L105
 1410              	.LVL184:
 1411              	.L102:
1072:DRIVER/FatFs/source/ff.c **** }
 1412              		.loc 1 1072 2 is_stmt 1 view .LVU460
1073:DRIVER/FatFs/source/ff.c **** #endif
 1413              		.loc 1 1073 1 is_stmt 0 view .LVU461
 1414 0006 2846     		mov	r0, r5
 1415 0008 70BD     		pop	{r4, r5, r6, pc}
 1416              	.LVL185:
 1417              	.L105:
1073:DRIVER/FatFs/source/ff.c **** #endif
 1418              		.loc 1 1073 1 view .LVU462
 1419 000a 0446     		mov	r4, r0
1063:DRIVER/FatFs/source/ff.c **** 			fs->wflag = 0;	/* Clear window dirty flag */
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 92


 1420              		.loc 1 1063 3 is_stmt 1 view .LVU463
1063:DRIVER/FatFs/source/ff.c **** 			fs->wflag = 0;	/* Clear window dirty flag */
 1421              		.loc 1 1063 30 is_stmt 0 view .LVU464
 1422 000c 00F13806 		add	r6, r0, #56
1063:DRIVER/FatFs/source/ff.c **** 			fs->wflag = 0;	/* Clear window dirty flag */
 1423              		.loc 1 1063 7 view .LVU465
 1424 0010 0123     		movs	r3, #1
 1425 0012 426B     		ldr	r2, [r0, #52]
 1426 0014 3146     		mov	r1, r6
 1427 0016 4078     		ldrb	r0, [r0, #1]	@ zero_extendqisi2
 1428              	.LVL186:
1063:DRIVER/FatFs/source/ff.c **** 			fs->wflag = 0;	/* Clear window dirty flag */
 1429              		.loc 1 1063 7 view .LVU466
 1430 0018 FFF7FEFF 		bl	disk_write
 1431              	.LVL187:
1063:DRIVER/FatFs/source/ff.c **** 			fs->wflag = 0;	/* Clear window dirty flag */
 1432              		.loc 1 1063 6 view .LVU467
 1433 001c 0546     		mov	r5, r0
 1434 001e 88B9     		cbnz	r0, .L103
1064:DRIVER/FatFs/source/ff.c **** 			if (fs->winsect - fs->fatbase < fs->fsize) {	/* Is it in the 1st FAT? */
 1435              		.loc 1 1064 4 is_stmt 1 view .LVU468
1064:DRIVER/FatFs/source/ff.c **** 			if (fs->winsect - fs->fatbase < fs->fsize) {	/* Is it in the 1st FAT? */
 1436              		.loc 1 1064 14 is_stmt 0 view .LVU469
 1437 0020 0023     		movs	r3, #0
 1438 0022 2371     		strb	r3, [r4, #4]
1065:DRIVER/FatFs/source/ff.c **** 				if (fs->n_fats == 2) disk_write(fs->pdrv, fs->win, fs->winsect + fs->fsize, 1);	/* Reflect it t
 1439              		.loc 1 1065 4 is_stmt 1 view .LVU470
1065:DRIVER/FatFs/source/ff.c **** 				if (fs->n_fats == 2) disk_write(fs->pdrv, fs->win, fs->winsect + fs->fsize, 1);	/* Reflect it t
 1440              		.loc 1 1065 10 is_stmt 0 view .LVU471
 1441 0024 616B     		ldr	r1, [r4, #52]
1065:DRIVER/FatFs/source/ff.c **** 				if (fs->n_fats == 2) disk_write(fs->pdrv, fs->win, fs->winsect + fs->fsize, 1);	/* Reflect it t
 1442              		.loc 1 1065 24 view .LVU472
 1443 0026 A36A     		ldr	r3, [r4, #40]
1065:DRIVER/FatFs/source/ff.c **** 				if (fs->n_fats == 2) disk_write(fs->pdrv, fs->win, fs->winsect + fs->fsize, 1);	/* Reflect it t
 1444              		.loc 1 1065 20 view .LVU473
 1445 0028 CB1A     		subs	r3, r1, r3
1065:DRIVER/FatFs/source/ff.c **** 				if (fs->n_fats == 2) disk_write(fs->pdrv, fs->win, fs->winsect + fs->fsize, 1);	/* Reflect it t
 1446              		.loc 1 1065 38 view .LVU474
 1447 002a 226A     		ldr	r2, [r4, #32]
1065:DRIVER/FatFs/source/ff.c **** 				if (fs->n_fats == 2) disk_write(fs->pdrv, fs->win, fs->winsect + fs->fsize, 1);	/* Reflect it t
 1448              		.loc 1 1065 7 view .LVU475
 1449 002c 9342     		cmp	r3, r2
 1450 002e EAD2     		bcs	.L102
1066:DRIVER/FatFs/source/ff.c **** 			}
 1451              		.loc 1 1066 5 is_stmt 1 view .LVU476
1066:DRIVER/FatFs/source/ff.c **** 			}
 1452              		.loc 1 1066 11 is_stmt 0 view .LVU477
 1453 0030 E378     		ldrb	r3, [r4, #3]	@ zero_extendqisi2
1066:DRIVER/FatFs/source/ff.c **** 			}
 1454              		.loc 1 1066 8 view .LVU478
 1455 0032 022B     		cmp	r3, #2
 1456 0034 E7D1     		bne	.L102
1066:DRIVER/FatFs/source/ff.c **** 			}
 1457              		.loc 1 1066 26 is_stmt 1 discriminator 1 view .LVU479
 1458 0036 0123     		movs	r3, #1
 1459 0038 0A44     		add	r2, r2, r1
 1460 003a 3146     		mov	r1, r6
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 93


 1461 003c 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 1462 003e FFF7FEFF 		bl	disk_write
 1463              	.LVL188:
 1464 0042 E0E7     		b	.L102
 1465              	.L103:
1069:DRIVER/FatFs/source/ff.c **** 		}
 1466              		.loc 1 1069 8 is_stmt 0 view .LVU480
 1467 0044 0125     		movs	r5, #1
 1468 0046 DEE7     		b	.L102
 1469              		.cfi_endproc
 1470              	.LFE8:
 1472              		.section	.text.move_window,"ax",%progbits
 1473              		.align	1
 1474              		.syntax unified
 1475              		.thumb
 1476              		.thumb_func
 1478              	move_window:
 1479              	.LVL189:
 1480              	.LFB9:
1081:DRIVER/FatFs/source/ff.c **** 	FRESULT res = FR_OK;
 1481              		.loc 1 1081 1 is_stmt 1 view -0
 1482              		.cfi_startproc
 1483              		@ args = 0, pretend = 0, frame = 0
 1484              		@ frame_needed = 0, uses_anonymous_args = 0
1081:DRIVER/FatFs/source/ff.c **** 	FRESULT res = FR_OK;
 1485              		.loc 1 1081 1 is_stmt 0 view .LVU482
 1486 0000 70B5     		push	{r4, r5, r6, lr}
 1487              	.LCFI7:
 1488              		.cfi_def_cfa_offset 16
 1489              		.cfi_offset 4, -16
 1490              		.cfi_offset 5, -12
 1491              		.cfi_offset 6, -8
 1492              		.cfi_offset 14, -4
1082:DRIVER/FatFs/source/ff.c **** 
 1493              		.loc 1 1082 2 is_stmt 1 view .LVU483
 1494              	.LVL190:
1085:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY
 1495              		.loc 1 1085 2 view .LVU484
1085:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY
 1496              		.loc 1 1085 16 is_stmt 0 view .LVU485
 1497 0002 436B     		ldr	r3, [r0, #52]
1085:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY
 1498              		.loc 1 1085 5 view .LVU486
 1499 0004 8B42     		cmp	r3, r1
 1500 0006 02D1     		bne	.L112
1082:DRIVER/FatFs/source/ff.c **** 
 1501              		.loc 1 1082 10 view .LVU487
 1502 0008 0026     		movs	r6, #0
 1503              	.LVL191:
 1504              	.L107:
1097:DRIVER/FatFs/source/ff.c **** }
 1505              		.loc 1 1097 2 is_stmt 1 view .LVU488
1098:DRIVER/FatFs/source/ff.c **** 
 1506              		.loc 1 1098 1 is_stmt 0 view .LVU489
 1507 000a 3046     		mov	r0, r6
 1508 000c 70BD     		pop	{r4, r5, r6, pc}
 1509              	.LVL192:
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 94


 1510              	.L112:
1098:DRIVER/FatFs/source/ff.c **** 
 1511              		.loc 1 1098 1 view .LVU490
 1512 000e 0446     		mov	r4, r0
 1513 0010 0D46     		mov	r5, r1
1087:DRIVER/FatFs/source/ff.c **** #endif
 1514              		.loc 1 1087 3 is_stmt 1 view .LVU491
1087:DRIVER/FatFs/source/ff.c **** #endif
 1515              		.loc 1 1087 9 is_stmt 0 view .LVU492
 1516 0012 FFF7FEFF 		bl	sync_window
 1517              	.LVL193:
1089:DRIVER/FatFs/source/ff.c **** 			if (disk_read(fs->pdrv, fs->win, sect, 1) != RES_OK) {
 1518              		.loc 1 1089 3 is_stmt 1 view .LVU493
1089:DRIVER/FatFs/source/ff.c **** 			if (disk_read(fs->pdrv, fs->win, sect, 1) != RES_OK) {
 1519              		.loc 1 1089 6 is_stmt 0 view .LVU494
 1520 0016 0646     		mov	r6, r0
 1521 0018 0028     		cmp	r0, #0
 1522 001a F6D1     		bne	.L107
1090:DRIVER/FatFs/source/ff.c **** 				sect = (LBA_t)0 - 1;	/* Invalidate window if read data is not valid */
 1523              		.loc 1 1090 4 is_stmt 1 view .LVU495
1090:DRIVER/FatFs/source/ff.c **** 				sect = (LBA_t)0 - 1;	/* Invalidate window if read data is not valid */
 1524              		.loc 1 1090 8 is_stmt 0 view .LVU496
 1525 001c 0123     		movs	r3, #1
 1526 001e 2A46     		mov	r2, r5
 1527 0020 04F13801 		add	r1, r4, #56
 1528 0024 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 1529              	.LVL194:
1090:DRIVER/FatFs/source/ff.c **** 				sect = (LBA_t)0 - 1;	/* Invalidate window if read data is not valid */
 1530              		.loc 1 1090 8 view .LVU497
 1531 0026 FFF7FEFF 		bl	disk_read
 1532              	.LVL195:
1090:DRIVER/FatFs/source/ff.c **** 				sect = (LBA_t)0 - 1;	/* Invalidate window if read data is not valid */
 1533              		.loc 1 1090 7 view .LVU498
 1534 002a 10B1     		cbz	r0, .L108
1092:DRIVER/FatFs/source/ff.c **** 			}
 1535              		.loc 1 1092 9 view .LVU499
 1536 002c 0126     		movs	r6, #1
1091:DRIVER/FatFs/source/ff.c **** 				res = FR_DISK_ERR;
 1537              		.loc 1 1091 10 view .LVU500
 1538 002e 4FF0FF35 		mov	r5, #-1
 1539              	.LVL196:
 1540              	.L108:
1094:DRIVER/FatFs/source/ff.c **** 		}
 1541              		.loc 1 1094 4 is_stmt 1 view .LVU501
1094:DRIVER/FatFs/source/ff.c **** 		}
 1542              		.loc 1 1094 16 is_stmt 0 view .LVU502
 1543 0032 6563     		str	r5, [r4, #52]
 1544 0034 E9E7     		b	.L107
 1545              		.cfi_endproc
 1546              	.LFE9:
 1548              		.section	.rodata.check_fs.str1.4,"aMS",%progbits,1
 1549              		.align	2
 1550              	.LC0:
 1551 0000 46415433 		.ascii	"FAT32   \000"
 1551      32202020 
 1551      00
 1552              		.section	.text.check_fs,"ax",%progbits
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 95


 1553              		.align	1
 1554              		.syntax unified
 1555              		.thumb
 1556              		.thumb_func
 1558              	check_fs:
 1559              	.LVL197:
 1560              	.LFB35:
3295:DRIVER/FatFs/source/ff.c **** 	WORD w, sign;
 1561              		.loc 1 3295 1 is_stmt 1 view -0
 1562              		.cfi_startproc
 1563              		@ args = 0, pretend = 0, frame = 0
 1564              		@ frame_needed = 0, uses_anonymous_args = 0
3295:DRIVER/FatFs/source/ff.c **** 	WORD w, sign;
 1565              		.loc 1 3295 1 is_stmt 0 view .LVU504
 1566 0000 38B5     		push	{r3, r4, r5, lr}
 1567              	.LCFI8:
 1568              		.cfi_def_cfa_offset 16
 1569              		.cfi_offset 3, -16
 1570              		.cfi_offset 4, -12
 1571              		.cfi_offset 5, -8
 1572              		.cfi_offset 14, -4
 1573 0002 0446     		mov	r4, r0
3296:DRIVER/FatFs/source/ff.c **** 	BYTE b;
 1574              		.loc 1 3296 2 is_stmt 1 view .LVU505
3297:DRIVER/FatFs/source/ff.c **** 
 1575              		.loc 1 3297 2 view .LVU506
3300:DRIVER/FatFs/source/ff.c **** 	if (move_window(fs, sect) != FR_OK) return 4;	/* Load the boot sector */
 1576              		.loc 1 3300 2 view .LVU507
3300:DRIVER/FatFs/source/ff.c **** 	if (move_window(fs, sect) != FR_OK) return 4;	/* Load the boot sector */
 1577              		.loc 1 3300 12 is_stmt 0 view .LVU508
 1578 0004 0023     		movs	r3, #0
 1579 0006 0371     		strb	r3, [r0, #4]
3300:DRIVER/FatFs/source/ff.c **** 	if (move_window(fs, sect) != FR_OK) return 4;	/* Load the boot sector */
 1580              		.loc 1 3300 17 is_stmt 1 view .LVU509
3300:DRIVER/FatFs/source/ff.c **** 	if (move_window(fs, sect) != FR_OK) return 4;	/* Load the boot sector */
 1581              		.loc 1 3300 29 is_stmt 0 view .LVU510
 1582 0008 4FF0FF33 		mov	r3, #-1
 1583 000c 4363     		str	r3, [r0, #52]
3301:DRIVER/FatFs/source/ff.c **** 	sign = ld_word(fs->win + BS_55AA);
 1584              		.loc 1 3301 2 is_stmt 1 view .LVU511
3301:DRIVER/FatFs/source/ff.c **** 	sign = ld_word(fs->win + BS_55AA);
 1585              		.loc 1 3301 6 is_stmt 0 view .LVU512
 1586 000e FFF7FEFF 		bl	move_window
 1587              	.LVL198:
3301:DRIVER/FatFs/source/ff.c **** 	sign = ld_word(fs->win + BS_55AA);
 1588              		.loc 1 3301 5 view .LVU513
 1589 0012 0028     		cmp	r0, #0
 1590 0014 5CD1     		bne	.L119
3302:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
 1591              		.loc 1 3302 2 is_stmt 1 view .LVU514
3302:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
 1592              		.loc 1 3302 9 is_stmt 0 view .LVU515
 1593 0016 04F23620 		addw	r0, r4, #566
 1594 001a FFF7FEFF 		bl	ld_word
 1595              	.LVL199:
 1596 001e 0546     		mov	r5, r0
 1597              	.LVL200:
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 96


3306:DRIVER/FatFs/source/ff.c **** 	if (b == 0xEB || b == 0xE9 || b == 0xE8) {	/* Valid JumpBoot code? (short jump, near jump or near 
 1598              		.loc 1 3306 2 is_stmt 1 view .LVU516
3306:DRIVER/FatFs/source/ff.c **** 	if (b == 0xEB || b == 0xE9 || b == 0xE8) {	/* Valid JumpBoot code? (short jump, near jump or near 
 1599              		.loc 1 3306 4 is_stmt 0 view .LVU517
 1600 0020 94F83830 		ldrb	r3, [r4, #56]	@ zero_extendqisi2
 1601              	.LVL201:
3307:DRIVER/FatFs/source/ff.c **** 		if (sign == 0xAA55 && !memcmp(fs->win + BS_FilSysType32, "FAT32   ", 8)) {
 1602              		.loc 1 3307 2 is_stmt 1 view .LVU518
3307:DRIVER/FatFs/source/ff.c **** 		if (sign == 0xAA55 && !memcmp(fs->win + BS_FilSysType32, "FAT32   ", 8)) {
 1603              		.loc 1 3307 5 is_stmt 0 view .LVU519
 1604 0024 EB2B     		cmp	r3, #235
 1605 0026 09D0     		beq	.L115
3307:DRIVER/FatFs/source/ff.c **** 		if (sign == 0xAA55 && !memcmp(fs->win + BS_FilSysType32, "FAT32   ", 8)) {
 1606              		.loc 1 3307 16 discriminator 1 view .LVU520
 1607 0028 E92B     		cmp	r3, #233
 1608 002a 07D0     		beq	.L115
3307:DRIVER/FatFs/source/ff.c **** 		if (sign == 0xAA55 && !memcmp(fs->win + BS_FilSysType32, "FAT32   ", 8)) {
 1609              		.loc 1 3307 29 discriminator 2 view .LVU521
 1610 002c E82B     		cmp	r3, #232
 1611 002e 05D0     		beq	.L115
 1612              	.LVL202:
 1613              	.L116:
3324:DRIVER/FatFs/source/ff.c **** }
 1614              		.loc 1 3324 2 is_stmt 1 view .LVU522
3324:DRIVER/FatFs/source/ff.c **** }
 1615              		.loc 1 3324 28 is_stmt 0 view .LVU523
 1616 0030 4AF65523 		movw	r3, #43605
 1617 0034 9D42     		cmp	r5, r3
 1618 0036 49D0     		beq	.L124
 1619 0038 0320     		movs	r0, #3
 1620              	.LVL203:
 1621              	.L113:
3325:DRIVER/FatFs/source/ff.c **** 
 1622              		.loc 1 3325 1 view .LVU524
 1623 003a 38BD     		pop	{r3, r4, r5, pc}
 1624              	.LVL204:
 1625              	.L115:
3308:DRIVER/FatFs/source/ff.c **** 			return 0;	/* It is an FAT32 VBR */
 1626              		.loc 1 3308 3 is_stmt 1 view .LVU525
3308:DRIVER/FatFs/source/ff.c **** 			return 0;	/* It is an FAT32 VBR */
 1627              		.loc 1 3308 6 is_stmt 0 view .LVU526
 1628 003c 4AF65523 		movw	r3, #43605
 1629              	.LVL205:
3308:DRIVER/FatFs/source/ff.c **** 			return 0;	/* It is an FAT32 VBR */
 1630              		.loc 1 3308 6 view .LVU527
 1631 0040 9D42     		cmp	r5, r3
 1632 0042 39D0     		beq	.L125
 1633              	.LVL206:
 1634              	.L117:
3312:DRIVER/FatFs/source/ff.c **** 		b = fs->win[BPB_SecPerClus];
 1635              		.loc 1 3312 3 is_stmt 1 view .LVU528
3312:DRIVER/FatFs/source/ff.c **** 		b = fs->win[BPB_SecPerClus];
 1636              		.loc 1 3312 7 is_stmt 0 view .LVU529
 1637 0044 04F14300 		add	r0, r4, #67
 1638 0048 FFF7FEFF 		bl	ld_word
 1639              	.LVL207:
3313:DRIVER/FatFs/source/ff.c **** 		if ((w & (w - 1)) == 0 && w >= FF_MIN_SS && w <= FF_MAX_SS	/* Properness of sector size (512-4096
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 97


 1640              		.loc 1 3313 3 is_stmt 1 view .LVU530
3313:DRIVER/FatFs/source/ff.c **** 		if ((w & (w - 1)) == 0 && w >= FF_MIN_SS && w <= FF_MAX_SS	/* Properness of sector size (512-4096
 1641              		.loc 1 3313 5 is_stmt 0 view .LVU531
 1642 004c 94F84520 		ldrb	r2, [r4, #69]	@ zero_extendqisi2
 1643              	.LVL208:
3314:DRIVER/FatFs/source/ff.c **** 			&& b != 0 && (b & (b - 1)) == 0				/* Properness of cluster size (2^n) */
 1644              		.loc 1 3314 3 is_stmt 1 view .LVU532
3314:DRIVER/FatFs/source/ff.c **** 			&& b != 0 && (b & (b - 1)) == 0				/* Properness of cluster size (2^n) */
 1645              		.loc 1 3314 15 is_stmt 0 view .LVU533
 1646 0050 431E     		subs	r3, r0, #1
3314:DRIVER/FatFs/source/ff.c **** 			&& b != 0 && (b & (b - 1)) == 0				/* Properness of cluster size (2^n) */
 1647              		.loc 1 3314 6 view .LVU534
 1648 0052 1842     		tst	r0, r3
 1649 0054 ECD1     		bne	.L116
3314:DRIVER/FatFs/source/ff.c **** 			&& b != 0 && (b & (b - 1)) == 0				/* Properness of cluster size (2^n) */
 1650              		.loc 1 3314 26 discriminator 1 view .LVU535
 1651 0056 B0F5007F 		cmp	r0, #512
 1652 005a E9D3     		bcc	.L116
3314:DRIVER/FatFs/source/ff.c **** 			&& b != 0 && (b & (b - 1)) == 0				/* Properness of cluster size (2^n) */
 1653              		.loc 1 3314 44 discriminator 2 view .LVU536
 1654 005c B0F5805F 		cmp	r0, #4096
 1655 0060 E6D8     		bhi	.L116
3315:DRIVER/FatFs/source/ff.c **** 			&& ld_word(fs->win + BPB_RsvdSecCnt) != 0	/* Properness of reserved sectors (MNBZ) */
 1656              		.loc 1 3315 4 view .LVU537
 1657 0062 002A     		cmp	r2, #0
 1658 0064 E4D0     		beq	.L116
3315:DRIVER/FatFs/source/ff.c **** 			&& ld_word(fs->win + BPB_RsvdSecCnt) != 0	/* Properness of reserved sectors (MNBZ) */
 1659              		.loc 1 3315 25 discriminator 1 view .LVU538
 1660 0066 531E     		subs	r3, r2, #1
3315:DRIVER/FatFs/source/ff.c **** 			&& ld_word(fs->win + BPB_RsvdSecCnt) != 0	/* Properness of reserved sectors (MNBZ) */
 1661              		.loc 1 3315 14 discriminator 1 view .LVU539
 1662 0068 1A42     		tst	r2, r3
 1663 006a E1D1     		bne	.L116
3316:DRIVER/FatFs/source/ff.c **** 			&& (UINT)fs->win[BPB_NumFATs] - 1 <= 1		/* Properness of FATs (1 or 2) */
 1664              		.loc 1 3316 7 view .LVU540
 1665 006c 04F14600 		add	r0, r4, #70
 1666              	.LVL209:
3316:DRIVER/FatFs/source/ff.c **** 			&& (UINT)fs->win[BPB_NumFATs] - 1 <= 1		/* Properness of FATs (1 or 2) */
 1667              		.loc 1 3316 7 view .LVU541
 1668 0070 FFF7FEFF 		bl	ld_word
 1669              	.LVL210:
3316:DRIVER/FatFs/source/ff.c **** 			&& (UINT)fs->win[BPB_NumFATs] - 1 <= 1		/* Properness of FATs (1 or 2) */
 1670              		.loc 1 3316 4 view .LVU542
 1671 0074 0028     		cmp	r0, #0
 1672 0076 DBD0     		beq	.L116
3317:DRIVER/FatFs/source/ff.c **** 			&& ld_word(fs->win + BPB_RootEntCnt) != 0	/* Properness of root dir entries (MNBZ) */
 1673              		.loc 1 3317 20 view .LVU543
 1674 0078 94F84830 		ldrb	r3, [r4, #72]	@ zero_extendqisi2
3317:DRIVER/FatFs/source/ff.c **** 			&& ld_word(fs->win + BPB_RootEntCnt) != 0	/* Properness of root dir entries (MNBZ) */
 1675              		.loc 1 3317 34 view .LVU544
 1676 007c 013B     		subs	r3, r3, #1
3317:DRIVER/FatFs/source/ff.c **** 			&& ld_word(fs->win + BPB_RootEntCnt) != 0	/* Properness of root dir entries (MNBZ) */
 1677              		.loc 1 3317 4 view .LVU545
 1678 007e 012B     		cmp	r3, #1
 1679 0080 D6D8     		bhi	.L116
3318:DRIVER/FatFs/source/ff.c **** 			&& (ld_word(fs->win + BPB_TotSec16) >= 128 || ld_dword(fs->win + BPB_TotSec32) >= 0x10000)	/* Pr
 1680              		.loc 1 3318 7 view .LVU546
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 98


 1681 0082 04F14900 		add	r0, r4, #73
 1682 0086 FFF7FEFF 		bl	ld_word
 1683              	.LVL211:
3318:DRIVER/FatFs/source/ff.c **** 			&& (ld_word(fs->win + BPB_TotSec16) >= 128 || ld_dword(fs->win + BPB_TotSec32) >= 0x10000)	/* Pr
 1684              		.loc 1 3318 4 view .LVU547
 1685 008a 0028     		cmp	r0, #0
 1686 008c D0D0     		beq	.L116
3319:DRIVER/FatFs/source/ff.c **** 			&& ld_word(fs->win + BPB_FATSz16) != 0) {	/* Properness of FAT size (MNBZ) */
 1687              		.loc 1 3319 8 view .LVU548
 1688 008e 04F14B00 		add	r0, r4, #75
 1689 0092 FFF7FEFF 		bl	ld_word
 1690              	.LVL212:
3319:DRIVER/FatFs/source/ff.c **** 			&& ld_word(fs->win + BPB_FATSz16) != 0) {	/* Properness of FAT size (MNBZ) */
 1691              		.loc 1 3319 4 view .LVU549
 1692 0096 7F28     		cmp	r0, #127
 1693 0098 06D8     		bhi	.L118
3319:DRIVER/FatFs/source/ff.c **** 			&& ld_word(fs->win + BPB_FATSz16) != 0) {	/* Properness of FAT size (MNBZ) */
 1694              		.loc 1 3319 50 discriminator 1 view .LVU550
 1695 009a 04F15800 		add	r0, r4, #88
 1696 009e FFF7FEFF 		bl	ld_dword
 1697              	.LVL213:
3319:DRIVER/FatFs/source/ff.c **** 			&& ld_word(fs->win + BPB_FATSz16) != 0) {	/* Properness of FAT size (MNBZ) */
 1698              		.loc 1 3319 47 discriminator 1 view .LVU551
 1699 00a2 B0F5803F 		cmp	r0, #65536
 1700 00a6 C3D3     		bcc	.L116
 1701              	.L118:
3320:DRIVER/FatFs/source/ff.c **** 				return 0;	/* It can be presumed an FAT VBR */
 1702              		.loc 1 3320 7 view .LVU552
 1703 00a8 04F14E00 		add	r0, r4, #78
 1704 00ac FFF7FEFF 		bl	ld_word
 1705              	.LVL214:
3320:DRIVER/FatFs/source/ff.c **** 				return 0;	/* It can be presumed an FAT VBR */
 1706              		.loc 1 3320 4 view .LVU553
 1707 00b0 0028     		cmp	r0, #0
 1708 00b2 BDD0     		beq	.L116
3321:DRIVER/FatFs/source/ff.c **** 		}
 1709              		.loc 1 3321 12 view .LVU554
 1710 00b4 0020     		movs	r0, #0
 1711 00b6 C0E7     		b	.L113
 1712              	.LVL215:
 1713              	.L125:
3308:DRIVER/FatFs/source/ff.c **** 			return 0;	/* It is an FAT32 VBR */
 1714              		.loc 1 3308 26 discriminator 1 view .LVU555
 1715 00b8 0822     		movs	r2, #8
 1716 00ba 0649     		ldr	r1, .L126
 1717 00bc 04F18A00 		add	r0, r4, #138
 1718 00c0 FFF7FEFF 		bl	memcmp
 1719              	.LVL216:
3308:DRIVER/FatFs/source/ff.c **** 			return 0;	/* It is an FAT32 VBR */
 1720              		.loc 1 3308 22 discriminator 1 view .LVU556
 1721 00c4 0028     		cmp	r0, #0
 1722 00c6 BDD1     		bne	.L117
3309:DRIVER/FatFs/source/ff.c **** 		}
 1723              		.loc 1 3309 11 view .LVU557
 1724 00c8 0020     		movs	r0, #0
 1725 00ca B6E7     		b	.L113
 1726              	.LVL217:
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 99


 1727              	.L124:
3324:DRIVER/FatFs/source/ff.c **** }
 1728              		.loc 1 3324 28 view .LVU558
 1729 00cc 0220     		movs	r0, #2
 1730 00ce B4E7     		b	.L113
 1731              	.LVL218:
 1732              	.L119:
3301:DRIVER/FatFs/source/ff.c **** 	sign = ld_word(fs->win + BS_55AA);
 1733              		.loc 1 3301 45 view .LVU559
 1734 00d0 0420     		movs	r0, #4
 1735 00d2 B2E7     		b	.L113
 1736              	.L127:
 1737              		.align	2
 1738              	.L126:
 1739 00d4 00000000 		.word	.LC0
 1740              		.cfi_endproc
 1741              	.LFE35:
 1743              		.section	.text.find_volume,"ax",%progbits
 1744              		.align	1
 1745              		.syntax unified
 1746              		.thumb
 1747              		.thumb_func
 1749              	find_volume:
 1750              	.LVL219:
 1751              	.LFB36:
3335:DRIVER/FatFs/source/ff.c **** 	UINT fmt, i;
 1752              		.loc 1 3335 1 is_stmt 1 view -0
 1753              		.cfi_startproc
 1754              		@ args = 0, pretend = 0, frame = 16
 1755              		@ frame_needed = 0, uses_anonymous_args = 0
3335:DRIVER/FatFs/source/ff.c **** 	UINT fmt, i;
 1756              		.loc 1 3335 1 is_stmt 0 view .LVU561
 1757 0000 70B5     		push	{r4, r5, r6, lr}
 1758              	.LCFI9:
 1759              		.cfi_def_cfa_offset 16
 1760              		.cfi_offset 4, -16
 1761              		.cfi_offset 5, -12
 1762              		.cfi_offset 6, -8
 1763              		.cfi_offset 14, -4
 1764 0002 84B0     		sub	sp, sp, #16
 1765              	.LCFI10:
 1766              		.cfi_def_cfa_offset 32
 1767 0004 0646     		mov	r6, r0
 1768 0006 0D46     		mov	r5, r1
3336:DRIVER/FatFs/source/ff.c **** 	DWORD mbr_pt[4];
 1769              		.loc 1 3336 2 is_stmt 1 view .LVU562
3337:DRIVER/FatFs/source/ff.c **** 
 1770              		.loc 1 3337 2 view .LVU563
3340:DRIVER/FatFs/source/ff.c **** 	if (fmt != 2 && (fmt >= 3 || part == 0)) return fmt;	/* Returns if it is an FAT VBR as auto scan, 
 1771              		.loc 1 3340 2 view .LVU564
3340:DRIVER/FatFs/source/ff.c **** 	if (fmt != 2 && (fmt >= 3 || part == 0)) return fmt;	/* Returns if it is an FAT VBR as auto scan, 
 1772              		.loc 1 3340 8 is_stmt 0 view .LVU565
 1773 0008 0021     		movs	r1, #0
 1774              	.LVL220:
3340:DRIVER/FatFs/source/ff.c **** 	if (fmt != 2 && (fmt >= 3 || part == 0)) return fmt;	/* Returns if it is an FAT VBR as auto scan, 
 1775              		.loc 1 3340 8 view .LVU566
 1776 000a FFF7FEFF 		bl	check_fs
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 100


 1777              	.LVL221:
3341:DRIVER/FatFs/source/ff.c **** 
 1778              		.loc 1 3341 2 is_stmt 1 view .LVU567
3341:DRIVER/FatFs/source/ff.c **** 
 1779              		.loc 1 3341 5 is_stmt 0 view .LVU568
 1780 000e 0228     		cmp	r0, #2
 1781 0010 03D0     		beq	.L136
3341:DRIVER/FatFs/source/ff.c **** 
 1782              		.loc 1 3341 15 discriminator 1 view .LVU569
 1783 0012 2BD8     		bhi	.L128
3341:DRIVER/FatFs/source/ff.c **** 
 1784              		.loc 1 3341 28 discriminator 3 view .LVU570
 1785 0014 55B3     		cbz	r5, .L128
 1786 0016 0024     		movs	r4, #0
 1787 0018 00E0     		b	.L131
 1788              	.L136:
 1789 001a 0024     		movs	r4, #0
 1790              	.LVL222:
 1791              	.L131:
3368:DRIVER/FatFs/source/ff.c **** 		mbr_pt[i] = ld_dword(fs->win + MBR_Table + i * SZ_PTE + PTE_StLba);
 1792              		.loc 1 3368 16 is_stmt 1 discriminator 1 view .LVU571
 1793 001c 032C     		cmp	r4, #3
 1794 001e 0ED8     		bhi	.L140
3369:DRIVER/FatFs/source/ff.c **** 	}
 1795              		.loc 1 3369 3 discriminator 3 view .LVU572
3369:DRIVER/FatFs/source/ff.c **** 	}
 1796              		.loc 1 3369 24 is_stmt 0 discriminator 3 view .LVU573
 1797 0020 06F13800 		add	r0, r6, #56
3369:DRIVER/FatFs/source/ff.c **** 	}
 1798              		.loc 1 3369 48 discriminator 3 view .LVU574
 1799 0024 2301     		lsls	r3, r4, #4
3369:DRIVER/FatFs/source/ff.c **** 	}
 1800              		.loc 1 3369 57 discriminator 3 view .LVU575
 1801 0026 03F5E373 		add	r3, r3, #454
3369:DRIVER/FatFs/source/ff.c **** 	}
 1802              		.loc 1 3369 15 discriminator 3 view .LVU576
 1803 002a 1844     		add	r0, r0, r3
 1804 002c FFF7FEFF 		bl	ld_dword
 1805              	.LVL223:
3369:DRIVER/FatFs/source/ff.c **** 	}
 1806              		.loc 1 3369 13 discriminator 3 view .LVU577
 1807 0030 04AB     		add	r3, sp, #16
 1808 0032 03EB8403 		add	r3, r3, r4, lsl #2
 1809 0036 43F8100C 		str	r0, [r3, #-16]
3368:DRIVER/FatFs/source/ff.c **** 		mbr_pt[i] = ld_dword(fs->win + MBR_Table + i * SZ_PTE + PTE_StLba);
 1810              		.loc 1 3368 22 is_stmt 1 discriminator 3 view .LVU578
 1811 003a 0134     		adds	r4, r4, #1
 1812              	.LVL224:
3368:DRIVER/FatFs/source/ff.c **** 		mbr_pt[i] = ld_dword(fs->win + MBR_Table + i * SZ_PTE + PTE_StLba);
 1813              		.loc 1 3368 22 is_stmt 0 discriminator 3 view .LVU579
 1814 003c EEE7     		b	.L131
 1815              	.L140:
3371:DRIVER/FatFs/source/ff.c **** 	do {							/* Find an FAT volume */
 1816              		.loc 1 3371 2 is_stmt 1 view .LVU580
3371:DRIVER/FatFs/source/ff.c **** 	do {							/* Find an FAT volume */
 1817              		.loc 1 3371 22 is_stmt 0 view .LVU581
 1818 003e 0DB1     		cbz	r5, .L137
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 101


3371:DRIVER/FatFs/source/ff.c **** 	do {							/* Find an FAT volume */
 1819              		.loc 1 3371 22 discriminator 1 view .LVU582
 1820 0040 6C1E     		subs	r4, r5, #1
 1821              	.LVL225:
3371:DRIVER/FatFs/source/ff.c **** 	do {							/* Find an FAT volume */
 1822              		.loc 1 3371 22 discriminator 1 view .LVU583
 1823 0042 0AE0     		b	.L135
 1824              	.LVL226:
 1825              	.L137:
3371:DRIVER/FatFs/source/ff.c **** 	do {							/* Find an FAT volume */
 1826              		.loc 1 3371 22 view .LVU584
 1827 0044 2C46     		mov	r4, r5
 1828              	.LVL227:
3371:DRIVER/FatFs/source/ff.c **** 	do {							/* Find an FAT volume */
 1829              		.loc 1 3371 22 view .LVU585
 1830 0046 08E0     		b	.L135
 1831              	.LVL228:
 1832              	.L141:
3373:DRIVER/FatFs/source/ff.c **** 	} while (part == 0 && fmt >= 2 && ++i < 4);
 1833              		.loc 1 3373 21 discriminator 1 view .LVU586
 1834 0048 3046     		mov	r0, r6
 1835 004a FFF7FEFF 		bl	check_fs
 1836              	.LVL229:
 1837              	.L134:
3374:DRIVER/FatFs/source/ff.c **** 	return fmt;
 1838              		.loc 1 3374 33 is_stmt 1 discriminator 4 view .LVU587
 1839 004e 6DB9     		cbnz	r5, .L128
3374:DRIVER/FatFs/source/ff.c **** 	return fmt;
 1840              		.loc 1 3374 21 is_stmt 0 discriminator 1 view .LVU588
 1841 0050 0128     		cmp	r0, #1
 1842 0052 0BD9     		bls	.L128
3374:DRIVER/FatFs/source/ff.c **** 	return fmt;
 1843              		.loc 1 3374 33 discriminator 2 view .LVU589
 1844 0054 0134     		adds	r4, r4, #1
 1845              	.LVL230:
3374:DRIVER/FatFs/source/ff.c **** 	return fmt;
 1846              		.loc 1 3374 33 discriminator 2 view .LVU590
 1847 0056 032C     		cmp	r4, #3
 1848 0058 08D8     		bhi	.L128
 1849              	.LVL231:
 1850              	.L135:
3372:DRIVER/FatFs/source/ff.c **** 		fmt = mbr_pt[i] ? check_fs(fs, mbr_pt[i]) : 3;	/* Check if the partition is FAT */
 1851              		.loc 1 3372 2 is_stmt 1 view .LVU591
3373:DRIVER/FatFs/source/ff.c **** 	} while (part == 0 && fmt >= 2 && ++i < 4);
 1852              		.loc 1 3373 3 view .LVU592
3373:DRIVER/FatFs/source/ff.c **** 	} while (part == 0 && fmt >= 2 && ++i < 4);
 1853              		.loc 1 3373 15 is_stmt 0 view .LVU593
 1854 005a 04AB     		add	r3, sp, #16
 1855 005c 03EB8403 		add	r3, r3, r4, lsl #2
 1856 0060 53F8101C 		ldr	r1, [r3, #-16]
3373:DRIVER/FatFs/source/ff.c **** 	} while (part == 0 && fmt >= 2 && ++i < 4);
 1857              		.loc 1 3373 45 view .LVU594
 1858 0064 0029     		cmp	r1, #0
 1859 0066 EFD1     		bne	.L141
 1860 0068 0320     		movs	r0, #3
 1861 006a F0E7     		b	.L134
 1862              	.LVL232:
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 102


 1863              	.L128:
3376:DRIVER/FatFs/source/ff.c **** 
 1864              		.loc 1 3376 1 view .LVU595
 1865 006c 04B0     		add	sp, sp, #16
 1866              	.LCFI11:
 1867              		.cfi_def_cfa_offset 16
 1868              		@ sp needed
 1869 006e 70BD     		pop	{r4, r5, r6, pc}
3376:DRIVER/FatFs/source/ff.c **** 
 1870              		.loc 1 3376 1 view .LVU596
 1871              		.cfi_endproc
 1872              	.LFE36:
 1874              		.section	.text.mount_volume,"ax",%progbits
 1875              		.align	1
 1876              		.syntax unified
 1877              		.thumb
 1878              		.thumb_func
 1880              	mount_volume:
 1881              	.LVL233:
 1882              	.LFB37:
3390:DRIVER/FatFs/source/ff.c **** 	int vol;
 1883              		.loc 1 3390 1 is_stmt 1 view -0
 1884              		.cfi_startproc
 1885              		@ args = 0, pretend = 0, frame = 8
 1886              		@ frame_needed = 0, uses_anonymous_args = 0
3390:DRIVER/FatFs/source/ff.c **** 	int vol;
 1887              		.loc 1 3390 1 is_stmt 0 view .LVU598
 1888 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 1889              	.LCFI12:
 1890              		.cfi_def_cfa_offset 36
 1891              		.cfi_offset 4, -36
 1892              		.cfi_offset 5, -32
 1893              		.cfi_offset 6, -28
 1894              		.cfi_offset 7, -24
 1895              		.cfi_offset 8, -20
 1896              		.cfi_offset 9, -16
 1897              		.cfi_offset 10, -12
 1898              		.cfi_offset 11, -8
 1899              		.cfi_offset 14, -4
 1900 0004 83B0     		sub	sp, sp, #12
 1901              	.LCFI13:
 1902              		.cfi_def_cfa_offset 48
 1903 0006 0D46     		mov	r5, r1
 1904 0008 1646     		mov	r6, r2
3391:DRIVER/FatFs/source/ff.c **** 	FATFS *fs;
 1905              		.loc 1 3391 2 is_stmt 1 view .LVU599
3392:DRIVER/FatFs/source/ff.c **** 	DSTATUS stat;
 1906              		.loc 1 3392 2 view .LVU600
3393:DRIVER/FatFs/source/ff.c **** 	LBA_t bsect;
 1907              		.loc 1 3393 2 view .LVU601
3394:DRIVER/FatFs/source/ff.c **** 	DWORD tsect, sysect, fasize, nclst, szbfat;
 1908              		.loc 1 3394 2 view .LVU602
3395:DRIVER/FatFs/source/ff.c **** 	WORD nrsv;
 1909              		.loc 1 3395 2 view .LVU603
3396:DRIVER/FatFs/source/ff.c **** 	UINT fmt;
 1910              		.loc 1 3396 2 view .LVU604
3397:DRIVER/FatFs/source/ff.c **** 
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 103


 1911              		.loc 1 3397 2 view .LVU605
3401:DRIVER/FatFs/source/ff.c **** 	vol = get_ldnumber(path);
 1912              		.loc 1 3401 2 view .LVU606
3401:DRIVER/FatFs/source/ff.c **** 	vol = get_ldnumber(path);
 1913              		.loc 1 3401 7 is_stmt 0 view .LVU607
 1914 000a 0023     		movs	r3, #0
 1915 000c 0B60     		str	r3, [r1]
3402:DRIVER/FatFs/source/ff.c **** 	if (vol < 0) return FR_INVALID_DRIVE;
 1916              		.loc 1 3402 2 is_stmt 1 view .LVU608
3402:DRIVER/FatFs/source/ff.c **** 	if (vol < 0) return FR_INVALID_DRIVE;
 1917              		.loc 1 3402 8 is_stmt 0 view .LVU609
 1918 000e FFF7FEFF 		bl	get_ldnumber
 1919              	.LVL234:
3403:DRIVER/FatFs/source/ff.c **** 
 1920              		.loc 1 3403 2 is_stmt 1 view .LVU610
3403:DRIVER/FatFs/source/ff.c **** 
 1921              		.loc 1 3403 5 is_stmt 0 view .LVU611
 1922 0012 0028     		cmp	r0, #0
3403:DRIVER/FatFs/source/ff.c **** 
 1923              		.loc 1 3403 5 view .LVU612
 1924 0014 C0F23F81 		blt	.L155
3406:DRIVER/FatFs/source/ff.c **** 	if (!fs) return FR_NOT_ENABLED;		/* Is the filesystem object available? */
 1925              		.loc 1 3406 2 is_stmt 1 view .LVU613
3406:DRIVER/FatFs/source/ff.c **** 	if (!fs) return FR_NOT_ENABLED;		/* Is the filesystem object available? */
 1926              		.loc 1 3406 5 is_stmt 0 view .LVU614
 1927 0018 B54B     		ldr	r3, .L187
 1928 001a 53F82040 		ldr	r4, [r3, r0, lsl #2]
 1929              	.LVL235:
3407:DRIVER/FatFs/source/ff.c **** #if FF_FS_REENTRANT
 1930              		.loc 1 3407 2 is_stmt 1 view .LVU615
3407:DRIVER/FatFs/source/ff.c **** #if FF_FS_REENTRANT
 1931              		.loc 1 3407 5 is_stmt 0 view .LVU616
 1932 001e 002C     		cmp	r4, #0
 1933 0020 00F03E81 		beq	.L156
3411:DRIVER/FatFs/source/ff.c **** 
 1934              		.loc 1 3411 2 is_stmt 1 view .LVU617
3411:DRIVER/FatFs/source/ff.c **** 
 1935              		.loc 1 3411 7 is_stmt 0 view .LVU618
 1936 0024 2C60     		str	r4, [r5]
3413:DRIVER/FatFs/source/ff.c **** 	if (fs->fs_type != 0) {				/* If the volume has been mounted */
 1937              		.loc 1 3413 2 is_stmt 1 view .LVU619
3413:DRIVER/FatFs/source/ff.c **** 	if (fs->fs_type != 0) {				/* If the volume has been mounted */
 1938              		.loc 1 3413 7 is_stmt 0 view .LVU620
 1939 0026 06F0FE06 		and	r6, r6, #254
 1940              	.LVL236:
3414:DRIVER/FatFs/source/ff.c **** 		stat = disk_status(fs->pdrv);
 1941              		.loc 1 3414 2 is_stmt 1 view .LVU621
3414:DRIVER/FatFs/source/ff.c **** 		stat = disk_status(fs->pdrv);
 1942              		.loc 1 3414 8 is_stmt 0 view .LVU622
 1943 002a 2378     		ldrb	r3, [r4]	@ zero_extendqisi2
3414:DRIVER/FatFs/source/ff.c **** 		stat = disk_status(fs->pdrv);
 1944              		.loc 1 3414 5 view .LVU623
 1945 002c 73B1     		cbz	r3, .L144
3415:DRIVER/FatFs/source/ff.c **** 		if (!(stat & STA_NOINIT)) {		/* and the physical drive is kept initialized */
 1946              		.loc 1 3415 3 is_stmt 1 view .LVU624
3415:DRIVER/FatFs/source/ff.c **** 		if (!(stat & STA_NOINIT)) {		/* and the physical drive is kept initialized */
 1947              		.loc 1 3415 10 is_stmt 0 view .LVU625
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 104


 1948 002e 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 1949              	.LVL237:
3415:DRIVER/FatFs/source/ff.c **** 		if (!(stat & STA_NOINIT)) {		/* and the physical drive is kept initialized */
 1950              		.loc 1 3415 10 view .LVU626
 1951 0030 FFF7FEFF 		bl	disk_status
 1952              	.LVL238:
3416:DRIVER/FatFs/source/ff.c **** 			if (!FF_FS_READONLY && mode && (stat & STA_PROTECT)) {	/* Check write protection if needed */
 1953              		.loc 1 3416 3 is_stmt 1 view .LVU627
3416:DRIVER/FatFs/source/ff.c **** 			if (!FF_FS_READONLY && mode && (stat & STA_PROTECT)) {	/* Check write protection if needed */
 1954              		.loc 1 3416 6 is_stmt 0 view .LVU628
 1955 0034 10F00105 		ands	r5, r0, #1
 1956              	.LVL239:
3416:DRIVER/FatFs/source/ff.c **** 			if (!FF_FS_READONLY && mode && (stat & STA_PROTECT)) {	/* Check write protection if needed */
 1957              		.loc 1 3416 6 view .LVU629
 1958 0038 08D1     		bne	.L144
3417:DRIVER/FatFs/source/ff.c **** 				return FR_WRITE_PROTECTED;
 1959              		.loc 1 3417 4 is_stmt 1 view .LVU630
3417:DRIVER/FatFs/source/ff.c **** 				return FR_WRITE_PROTECTED;
 1960              		.loc 1 3417 7 is_stmt 0 view .LVU631
 1961 003a 002E     		cmp	r6, #0
 1962 003c 00F02C81 		beq	.L143
3417:DRIVER/FatFs/source/ff.c **** 				return FR_WRITE_PROTECTED;
 1963              		.loc 1 3417 32 discriminator 1 view .LVU632
 1964 0040 10F0040F 		tst	r0, #4
 1965 0044 00F02881 		beq	.L143
3418:DRIVER/FatFs/source/ff.c **** 			}
 1966              		.loc 1 3418 12 view .LVU633
 1967 0048 0A25     		movs	r5, #10
 1968 004a 25E1     		b	.L143
 1969              	.LVL240:
 1970              	.L144:
3427:DRIVER/FatFs/source/ff.c **** 	stat = disk_initialize(fs->pdrv);	/* Initialize the volume hosting physical drive */
 1971              		.loc 1 3427 2 is_stmt 1 view .LVU634
3427:DRIVER/FatFs/source/ff.c **** 	stat = disk_initialize(fs->pdrv);	/* Initialize the volume hosting physical drive */
 1972              		.loc 1 3427 14 is_stmt 0 view .LVU635
 1973 004c 0023     		movs	r3, #0
 1974 004e 2370     		strb	r3, [r4]
3428:DRIVER/FatFs/source/ff.c **** 	if (stat & STA_NOINIT) { 			/* Check if the initialization succeeded */
 1975              		.loc 1 3428 2 is_stmt 1 view .LVU636
3428:DRIVER/FatFs/source/ff.c **** 	if (stat & STA_NOINIT) { 			/* Check if the initialization succeeded */
 1976              		.loc 1 3428 9 is_stmt 0 view .LVU637
 1977 0050 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 1978 0052 FFF7FEFF 		bl	disk_initialize
 1979              	.LVL241:
3429:DRIVER/FatFs/source/ff.c **** 		return FR_NOT_READY;			/* Failed to initialize due to no medium or hard error */
 1980              		.loc 1 3429 2 is_stmt 1 view .LVU638
3429:DRIVER/FatFs/source/ff.c **** 		return FR_NOT_READY;			/* Failed to initialize due to no medium or hard error */
 1981              		.loc 1 3429 5 is_stmt 0 view .LVU639
 1982 0056 10F0010F 		tst	r0, #1
 1983 005a 40F02381 		bne	.L158
3432:DRIVER/FatFs/source/ff.c **** 		return FR_WRITE_PROTECTED;
 1984              		.loc 1 3432 2 is_stmt 1 view .LVU640
3432:DRIVER/FatFs/source/ff.c **** 		return FR_WRITE_PROTECTED;
 1985              		.loc 1 3432 5 is_stmt 0 view .LVU641
 1986 005e 1EB1     		cbz	r6, .L145
3432:DRIVER/FatFs/source/ff.c **** 		return FR_WRITE_PROTECTED;
 1987              		.loc 1 3432 30 discriminator 1 view .LVU642
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 105


 1988 0060 10F0040F 		tst	r0, #4
 1989 0064 40F02081 		bne	.L159
 1990              	.L145:
3436:DRIVER/FatFs/source/ff.c **** 	if (SS(fs) > FF_MAX_SS || SS(fs) < FF_MIN_SS || (SS(fs) & (SS(fs) - 1))) return FR_DISK_ERR;
 1991              		.loc 1 3436 2 is_stmt 1 view .LVU643
3436:DRIVER/FatFs/source/ff.c **** 	if (SS(fs) > FF_MAX_SS || SS(fs) < FF_MIN_SS || (SS(fs) & (SS(fs) - 1))) return FR_DISK_ERR;
 1992              		.loc 1 3436 6 is_stmt 0 view .LVU644
 1993 0068 04F10C02 		add	r2, r4, #12
 1994 006c 0221     		movs	r1, #2
 1995 006e 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 1996              	.LVL242:
3436:DRIVER/FatFs/source/ff.c **** 	if (SS(fs) > FF_MAX_SS || SS(fs) < FF_MIN_SS || (SS(fs) & (SS(fs) - 1))) return FR_DISK_ERR;
 1997              		.loc 1 3436 6 view .LVU645
 1998 0070 FFF7FEFF 		bl	disk_ioctl
 1999              	.LVL243:
3436:DRIVER/FatFs/source/ff.c **** 	if (SS(fs) > FF_MAX_SS || SS(fs) < FF_MIN_SS || (SS(fs) & (SS(fs) - 1))) return FR_DISK_ERR;
 2000              		.loc 1 3436 5 view .LVU646
 2001 0074 0546     		mov	r5, r0
 2002 0076 0028     		cmp	r0, #0
 2003 0078 40F01881 		bne	.L160
3437:DRIVER/FatFs/source/ff.c **** #endif
 2004              		.loc 1 3437 2 is_stmt 1 view .LVU647
3437:DRIVER/FatFs/source/ff.c **** #endif
 2005              		.loc 1 3437 6 is_stmt 0 view .LVU648
 2006 007c A289     		ldrh	r2, [r4, #12]
3437:DRIVER/FatFs/source/ff.c **** #endif
 2007              		.loc 1 3437 25 view .LVU649
 2008 007e A2F50073 		sub	r3, r2, #512
 2009 0082 9BB2     		uxth	r3, r3
3437:DRIVER/FatFs/source/ff.c **** #endif
 2010              		.loc 1 3437 5 view .LVU650
 2011 0084 B3F5606F 		cmp	r3, #3584
 2012 0088 00F21281 		bhi	.L161
3437:DRIVER/FatFs/source/ff.c **** #endif
 2013              		.loc 1 3437 68 discriminator 2 view .LVU651
 2014 008c 531E     		subs	r3, r2, #1
3437:DRIVER/FatFs/source/ff.c **** #endif
 2015              		.loc 1 3437 47 discriminator 2 view .LVU652
 2016 008e 1A42     		tst	r2, r3
 2017 0090 01D0     		beq	.L182
3437:DRIVER/FatFs/source/ff.c **** #endif
 2018              		.loc 1 3437 82 view .LVU653
 2019 0092 0125     		movs	r5, #1
 2020 0094 00E1     		b	.L143
 2021              	.L182:
3441:DRIVER/FatFs/source/ff.c **** 	if (fmt == 4) return FR_DISK_ERR;		/* An error occurred in the disk I/O layer */
 2022              		.loc 1 3441 2 is_stmt 1 view .LVU654
3441:DRIVER/FatFs/source/ff.c **** 	if (fmt == 4) return FR_DISK_ERR;		/* An error occurred in the disk I/O layer */
 2023              		.loc 1 3441 8 is_stmt 0 view .LVU655
 2024 0096 0021     		movs	r1, #0
 2025 0098 2046     		mov	r0, r4
 2026 009a FFF7FEFF 		bl	find_volume
 2027              	.LVL244:
3442:DRIVER/FatFs/source/ff.c **** 	if (fmt >= 2) return FR_NO_FILESYSTEM;	/* No FAT volume is found */
 2028              		.loc 1 3442 2 is_stmt 1 view .LVU656
3442:DRIVER/FatFs/source/ff.c **** 	if (fmt >= 2) return FR_NO_FILESYSTEM;	/* No FAT volume is found */
 2029              		.loc 1 3442 5 is_stmt 0 view .LVU657
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 106


 2030 009e 0428     		cmp	r0, #4
 2031 00a0 00F00881 		beq	.L163
3443:DRIVER/FatFs/source/ff.c **** 	bsect = fs->winsect;					/* Volume offset in the hosting physical drive */
 2032              		.loc 1 3443 2 is_stmt 1 view .LVU658
3443:DRIVER/FatFs/source/ff.c **** 	bsect = fs->winsect;					/* Volume offset in the hosting physical drive */
 2033              		.loc 1 3443 5 is_stmt 0 view .LVU659
 2034 00a4 0128     		cmp	r0, #1
 2035 00a6 00F20781 		bhi	.L164
3444:DRIVER/FatFs/source/ff.c **** 
 2036              		.loc 1 3444 2 is_stmt 1 view .LVU660
3444:DRIVER/FatFs/source/ff.c **** 
 2037              		.loc 1 3444 8 is_stmt 0 view .LVU661
 2038 00aa D4F834A0 		ldr	r10, [r4, #52]
 2039              	.LVL245:
3512:DRIVER/FatFs/source/ff.c **** 
 2040              		.loc 1 3512 3 is_stmt 1 view .LVU662
3512:DRIVER/FatFs/source/ff.c **** 
 2041              		.loc 1 3512 7 is_stmt 0 view .LVU663
 2042 00ae 04F14300 		add	r0, r4, #67
 2043              	.LVL246:
3512:DRIVER/FatFs/source/ff.c **** 
 2044              		.loc 1 3512 7 view .LVU664
 2045 00b2 FFF7FEFF 		bl	ld_word
 2046              	.LVL247:
3512:DRIVER/FatFs/source/ff.c **** 
 2047              		.loc 1 3512 44 view .LVU665
 2048 00b6 A789     		ldrh	r7, [r4, #12]
3512:DRIVER/FatFs/source/ff.c **** 
 2049              		.loc 1 3512 6 view .LVU666
 2050 00b8 B842     		cmp	r0, r7
 2051 00ba 40F0FF80 		bne	.L165
3514:DRIVER/FatFs/source/ff.c **** 		if (fasize == 0) fasize = ld_dword(fs->win + BPB_FATSz32);
 2052              		.loc 1 3514 3 is_stmt 1 view .LVU667
3514:DRIVER/FatFs/source/ff.c **** 		if (fasize == 0) fasize = ld_dword(fs->win + BPB_FATSz32);
 2053              		.loc 1 3514 12 is_stmt 0 view .LVU668
 2054 00be 04F14E00 		add	r0, r4, #78
 2055 00c2 FFF7FEFF 		bl	ld_word
 2056              	.LVL248:
3514:DRIVER/FatFs/source/ff.c **** 		if (fasize == 0) fasize = ld_dword(fs->win + BPB_FATSz32);
 2057              		.loc 1 3514 10 view .LVU669
 2058 00c6 0646     		mov	r6, r0
 2059              	.LVL249:
3515:DRIVER/FatFs/source/ff.c **** 		fs->fsize = fasize;
 2060              		.loc 1 3515 3 is_stmt 1 view .LVU670
3515:DRIVER/FatFs/source/ff.c **** 		fs->fsize = fasize;
 2061              		.loc 1 3515 6 is_stmt 0 view .LVU671
 2062 00c8 20B9     		cbnz	r0, .L146
3515:DRIVER/FatFs/source/ff.c **** 		fs->fsize = fasize;
 2063              		.loc 1 3515 20 is_stmt 1 discriminator 1 view .LVU672
3515:DRIVER/FatFs/source/ff.c **** 		fs->fsize = fasize;
 2064              		.loc 1 3515 29 is_stmt 0 discriminator 1 view .LVU673
 2065 00ca 04F15C00 		add	r0, r4, #92
 2066              	.LVL250:
3515:DRIVER/FatFs/source/ff.c **** 		fs->fsize = fasize;
 2067              		.loc 1 3515 29 discriminator 1 view .LVU674
 2068 00ce FFF7FEFF 		bl	ld_dword
 2069              	.LVL251:
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 107


 2070 00d2 0646     		mov	r6, r0
 2071              	.LVL252:
 2072              	.L146:
3516:DRIVER/FatFs/source/ff.c **** 
 2073              		.loc 1 3516 3 is_stmt 1 view .LVU675
3516:DRIVER/FatFs/source/ff.c **** 
 2074              		.loc 1 3516 13 is_stmt 0 view .LVU676
 2075 00d4 2662     		str	r6, [r4, #32]
3518:DRIVER/FatFs/source/ff.c **** 		if (fs->n_fats != 1 && fs->n_fats != 2) return FR_NO_FILESYSTEM;	/* (Must be 1 or 2) */
 2076              		.loc 1 3518 3 is_stmt 1 view .LVU677
3518:DRIVER/FatFs/source/ff.c **** 		if (fs->n_fats != 1 && fs->n_fats != 2) return FR_NO_FILESYSTEM;	/* (Must be 1 or 2) */
 2077              		.loc 1 3518 23 is_stmt 0 view .LVU678
 2078 00d6 94F84820 		ldrb	r2, [r4, #72]	@ zero_extendqisi2
3518:DRIVER/FatFs/source/ff.c **** 		if (fs->n_fats != 1 && fs->n_fats != 2) return FR_NO_FILESYSTEM;	/* (Must be 1 or 2) */
 2079              		.loc 1 3518 14 view .LVU679
 2080 00da E270     		strb	r2, [r4, #3]
3519:DRIVER/FatFs/source/ff.c **** 		fasize *= fs->n_fats;							/* Number of sectors for FAT area */
 2081              		.loc 1 3519 3 is_stmt 1 view .LVU680
3519:DRIVER/FatFs/source/ff.c **** 		fasize *= fs->n_fats;							/* Number of sectors for FAT area */
 2082              		.loc 1 3519 23 is_stmt 0 view .LVU681
 2083 00dc 531E     		subs	r3, r2, #1
 2084 00de DBB2     		uxtb	r3, r3
3519:DRIVER/FatFs/source/ff.c **** 		fasize *= fs->n_fats;							/* Number of sectors for FAT area */
 2085              		.loc 1 3519 6 view .LVU682
 2086 00e0 012B     		cmp	r3, #1
 2087 00e2 00F2ED80 		bhi	.L166
3520:DRIVER/FatFs/source/ff.c **** 
 2088              		.loc 1 3520 3 is_stmt 1 view .LVU683
3520:DRIVER/FatFs/source/ff.c **** 
 2089              		.loc 1 3520 10 is_stmt 0 view .LVU684
 2090 00e6 06FB02F3 		mul	r3, r6, r2
 2091 00ea 0093     		str	r3, [sp]
 2092              	.LVL253:
3522:DRIVER/FatFs/source/ff.c **** 		if (fs->csize == 0 || (fs->csize & (fs->csize - 1))) return FR_NO_FILESYSTEM;	/* (Must be power o
 2093              		.loc 1 3522 3 is_stmt 1 view .LVU685
3522:DRIVER/FatFs/source/ff.c **** 		if (fs->csize == 0 || (fs->csize & (fs->csize - 1))) return FR_NO_FILESYSTEM;	/* (Must be power o
 2094              		.loc 1 3522 22 is_stmt 0 view .LVU686
 2095 00ec 94F84580 		ldrb	r8, [r4, #69]	@ zero_extendqisi2
3522:DRIVER/FatFs/source/ff.c **** 		if (fs->csize == 0 || (fs->csize & (fs->csize - 1))) return FR_NO_FILESYSTEM;	/* (Must be power o
 2096              		.loc 1 3522 13 view .LVU687
 2097 00f0 A4F80A80 		strh	r8, [r4, #10]	@ movhi
3523:DRIVER/FatFs/source/ff.c **** 
 2098              		.loc 1 3523 3 is_stmt 1 view .LVU688
3523:DRIVER/FatFs/source/ff.c **** 
 2099              		.loc 1 3523 6 is_stmt 0 view .LVU689
 2100 00f4 B8F1000F 		cmp	r8, #0
 2101 00f8 00F0E480 		beq	.L167
3523:DRIVER/FatFs/source/ff.c **** 
 2102              		.loc 1 3523 49 discriminator 2 view .LVU690
 2103 00fc 08F1FF33 		add	r3, r8, #-1
 2104              	.LVL254:
3523:DRIVER/FatFs/source/ff.c **** 
 2105              		.loc 1 3523 22 discriminator 2 view .LVU691
 2106 0100 18EA030F 		tst	r8, r3
 2107 0104 40F0E080 		bne	.L168
3525:DRIVER/FatFs/source/ff.c **** 		if (fs->n_rootdir % (SS(fs) / SZDIRE)) return FR_NO_FILESYSTEM;	/* (Must be sector aligned) */
 2108              		.loc 1 3525 3 is_stmt 1 view .LVU692
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 108


3525:DRIVER/FatFs/source/ff.c **** 		if (fs->n_rootdir % (SS(fs) / SZDIRE)) return FR_NO_FILESYSTEM;	/* (Must be sector aligned) */
 2109              		.loc 1 3525 19 is_stmt 0 view .LVU693
 2110 0108 04F14900 		add	r0, r4, #73
 2111 010c FFF7FEFF 		bl	ld_word
 2112              	.LVL255:
 2113 0110 8146     		mov	r9, r0
3525:DRIVER/FatFs/source/ff.c **** 		if (fs->n_rootdir % (SS(fs) / SZDIRE)) return FR_NO_FILESYSTEM;	/* (Must be sector aligned) */
 2114              		.loc 1 3525 17 view .LVU694
 2115 0112 2081     		strh	r0, [r4, #8]	@ movhi
3526:DRIVER/FatFs/source/ff.c **** 
 2116              		.loc 1 3526 3 is_stmt 1 view .LVU695
3526:DRIVER/FatFs/source/ff.c **** 
 2117              		.loc 1 3526 7 is_stmt 0 view .LVU696
 2118 0114 4FEA571B 		lsr	fp, r7, #5
 2119 0118 B0FBFBF3 		udiv	r3, r0, fp
 2120 011c 0BFB1303 		mls	r3, fp, r3, r0
 2121 0120 9BB2     		uxth	r3, r3
3526:DRIVER/FatFs/source/ff.c **** 
 2122              		.loc 1 3526 6 view .LVU697
 2123 0122 002B     		cmp	r3, #0
 2124 0124 40F0D280 		bne	.L169
3528:DRIVER/FatFs/source/ff.c **** 		if (tsect == 0) tsect = ld_dword(fs->win + BPB_TotSec32);
 2125              		.loc 1 3528 3 is_stmt 1 view .LVU698
3528:DRIVER/FatFs/source/ff.c **** 		if (tsect == 0) tsect = ld_dword(fs->win + BPB_TotSec32);
 2126              		.loc 1 3528 11 is_stmt 0 view .LVU699
 2127 0128 04F14B00 		add	r0, r4, #75
 2128 012c FFF7FEFF 		bl	ld_word
 2129              	.LVL256:
3528:DRIVER/FatFs/source/ff.c **** 		if (tsect == 0) tsect = ld_dword(fs->win + BPB_TotSec32);
 2130              		.loc 1 3528 9 view .LVU700
 2131 0130 0190     		str	r0, [sp, #4]
 2132              	.LVL257:
3529:DRIVER/FatFs/source/ff.c **** 
 2133              		.loc 1 3529 3 is_stmt 1 view .LVU701
3529:DRIVER/FatFs/source/ff.c **** 
 2134              		.loc 1 3529 6 is_stmt 0 view .LVU702
 2135 0132 20B9     		cbnz	r0, .L147
3529:DRIVER/FatFs/source/ff.c **** 
 2136              		.loc 1 3529 19 is_stmt 1 discriminator 1 view .LVU703
3529:DRIVER/FatFs/source/ff.c **** 
 2137              		.loc 1 3529 27 is_stmt 0 discriminator 1 view .LVU704
 2138 0134 04F15800 		add	r0, r4, #88
 2139              	.LVL258:
3529:DRIVER/FatFs/source/ff.c **** 
 2140              		.loc 1 3529 27 discriminator 1 view .LVU705
 2141 0138 FFF7FEFF 		bl	ld_dword
 2142              	.LVL259:
 2143 013c 0190     		str	r0, [sp, #4]
 2144              	.LVL260:
 2145              	.L147:
3531:DRIVER/FatFs/source/ff.c **** 		if (nrsv == 0) return FR_NO_FILESYSTEM;			/* (Must not be 0) */
 2146              		.loc 1 3531 3 is_stmt 1 view .LVU706
3531:DRIVER/FatFs/source/ff.c **** 		if (nrsv == 0) return FR_NO_FILESYSTEM;			/* (Must not be 0) */
 2147              		.loc 1 3531 10 is_stmt 0 view .LVU707
 2148 013e 04F14600 		add	r0, r4, #70
 2149 0142 FFF7FEFF 		bl	ld_word
 2150              	.LVL261:
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 109


3532:DRIVER/FatFs/source/ff.c **** 
 2151              		.loc 1 3532 3 is_stmt 1 view .LVU708
3532:DRIVER/FatFs/source/ff.c **** 
 2152              		.loc 1 3532 6 is_stmt 0 view .LVU709
 2153 0146 0146     		mov	r1, r0
 2154 0148 0028     		cmp	r0, #0
 2155 014a 00F0C180 		beq	.L170
3535:DRIVER/FatFs/source/ff.c **** 		if (tsect < sysect) return FR_NO_FILESYSTEM;	/* (Invalid volume size) */
 2156              		.loc 1 3535 3 is_stmt 1 view .LVU710
3535:DRIVER/FatFs/source/ff.c **** 		if (tsect < sysect) return FR_NO_FILESYSTEM;	/* (Invalid volume size) */
 2157              		.loc 1 3535 17 is_stmt 0 view .LVU711
 2158 014e 009B     		ldr	r3, [sp]
 2159 0150 C318     		adds	r3, r0, r3
3535:DRIVER/FatFs/source/ff.c **** 		if (tsect < sysect) return FR_NO_FILESYSTEM;	/* (Invalid volume size) */
 2160              		.loc 1 3535 42 view .LVU712
 2161 0152 B9FBFBFB 		udiv	fp, r9, fp
3535:DRIVER/FatFs/source/ff.c **** 		if (tsect < sysect) return FR_NO_FILESYSTEM;	/* (Invalid volume size) */
 2162              		.loc 1 3535 10 view .LVU713
 2163 0156 5B44     		add	r3, r3, fp
 2164              	.LVL262:
3536:DRIVER/FatFs/source/ff.c **** 		nclst = (tsect - sysect) / fs->csize;			/* Number of clusters */
 2165              		.loc 1 3536 3 is_stmt 1 view .LVU714
3536:DRIVER/FatFs/source/ff.c **** 		nclst = (tsect - sysect) / fs->csize;			/* Number of clusters */
 2166              		.loc 1 3536 6 is_stmt 0 view .LVU715
 2167 0158 019A     		ldr	r2, [sp, #4]
 2168 015a 9A42     		cmp	r2, r3
 2169 015c C0F0BA80 		bcc	.L171
3537:DRIVER/FatFs/source/ff.c **** 		if (nclst == 0) return FR_NO_FILESYSTEM;		/* (Invalid volume size) */
 2170              		.loc 1 3537 3 is_stmt 1 view .LVU716
3537:DRIVER/FatFs/source/ff.c **** 		if (nclst == 0) return FR_NO_FILESYSTEM;		/* (Invalid volume size) */
 2171              		.loc 1 3537 18 is_stmt 0 view .LVU717
 2172 0160 D21A     		subs	r2, r2, r3
3537:DRIVER/FatFs/source/ff.c **** 		if (nclst == 0) return FR_NO_FILESYSTEM;		/* (Invalid volume size) */
 2173              		.loc 1 3537 9 view .LVU718
 2174 0162 B2FBF8F0 		udiv	r0, r2, r8
 2175              	.LVL263:
3538:DRIVER/FatFs/source/ff.c **** 		fmt = 0;
 2176              		.loc 1 3538 3 is_stmt 1 view .LVU719
3538:DRIVER/FatFs/source/ff.c **** 		fmt = 0;
 2177              		.loc 1 3538 6 is_stmt 0 view .LVU720
 2178 0166 4245     		cmp	r2, r8
 2179 0168 C0F0B680 		bcc	.L172
3539:DRIVER/FatFs/source/ff.c **** 		if (nclst <= MAX_FAT32) fmt = FS_FAT32;
 2180              		.loc 1 3539 3 is_stmt 1 view .LVU721
 2181              	.LVL264:
3540:DRIVER/FatFs/source/ff.c **** 		if (nclst <= MAX_FAT16) fmt = FS_FAT16;
 2182              		.loc 1 3540 3 view .LVU722
3540:DRIVER/FatFs/source/ff.c **** 		if (nclst <= MAX_FAT16) fmt = FS_FAT16;
 2183              		.loc 1 3540 6 is_stmt 0 view .LVU723
 2184 016c 614A     		ldr	r2, .L187+4
 2185 016e 9042     		cmp	r0, r2
 2186 0170 06D8     		bhi	.L173
3540:DRIVER/FatFs/source/ff.c **** 		if (nclst <= MAX_FAT16) fmt = FS_FAT16;
 2187              		.loc 1 3540 27 is_stmt 1 view .LVU724
 2188              	.LVL265:
3541:DRIVER/FatFs/source/ff.c **** 		if (nclst <= MAX_FAT12) fmt = FS_FAT12;
 2189              		.loc 1 3541 3 view .LVU725
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 110


3541:DRIVER/FatFs/source/ff.c **** 		if (nclst <= MAX_FAT12) fmt = FS_FAT12;
 2190              		.loc 1 3541 6 is_stmt 0 view .LVU726
 2191 0172 4FF6F572 		movw	r2, #65525
 2192 0176 9042     		cmp	r0, r2
 2193 0178 43D8     		bhi	.L174
3541:DRIVER/FatFs/source/ff.c **** 		if (nclst <= MAX_FAT12) fmt = FS_FAT12;
 2194              		.loc 1 3541 31 view .LVU727
 2195 017a 4FF00208 		mov	r8, #2
 2196 017e 01E0     		b	.L148
 2197              	.LVL266:
 2198              	.L173:
3539:DRIVER/FatFs/source/ff.c **** 		if (nclst <= MAX_FAT32) fmt = FS_FAT32;
 2199              		.loc 1 3539 7 view .LVU728
 2200 0180 4FF00008 		mov	r8, #0
 2201              	.LVL267:
 2202              	.L148:
3542:DRIVER/FatFs/source/ff.c **** 		if (fmt == 0) return FR_NO_FILESYSTEM;
 2203              		.loc 1 3542 3 is_stmt 1 view .LVU729
3542:DRIVER/FatFs/source/ff.c **** 		if (fmt == 0) return FR_NO_FILESYSTEM;
 2204              		.loc 1 3542 6 is_stmt 0 view .LVU730
 2205 0184 40F6F572 		movw	r2, #4085
 2206 0188 9042     		cmp	r0, r2
 2207 018a 3DD9     		bls	.L175
 2208              	.LVL268:
 2209              	.L149:
3543:DRIVER/FatFs/source/ff.c **** 
 2210              		.loc 1 3543 3 is_stmt 1 view .LVU731
3543:DRIVER/FatFs/source/ff.c **** 
 2211              		.loc 1 3543 6 is_stmt 0 view .LVU732
 2212 018c B8F1000F 		cmp	r8, #0
 2213 0190 00F0A480 		beq	.L183
 2214              	.LVL269:
 2215              	.L150:
3546:DRIVER/FatFs/source/ff.c **** 		fs->volbase = bsect;							/* Volume start sector */
 2216              		.loc 1 3546 3 is_stmt 1 view .LVU733
3546:DRIVER/FatFs/source/ff.c **** 		fs->volbase = bsect;							/* Volume start sector */
 2217              		.loc 1 3546 24 is_stmt 0 view .LVU734
 2218 0194 00F1020B 		add	fp, r0, #2
3546:DRIVER/FatFs/source/ff.c **** 		fs->volbase = bsect;							/* Volume start sector */
 2219              		.loc 1 3546 16 view .LVU735
 2220 0198 C4F81CB0 		str	fp, [r4, #28]
3547:DRIVER/FatFs/source/ff.c **** 		fs->fatbase = bsect + nrsv; 					/* FAT start sector */
 2221              		.loc 1 3547 3 is_stmt 1 view .LVU736
3547:DRIVER/FatFs/source/ff.c **** 		fs->fatbase = bsect + nrsv; 					/* FAT start sector */
 2222              		.loc 1 3547 15 is_stmt 0 view .LVU737
 2223 019c C4F824A0 		str	r10, [r4, #36]
3548:DRIVER/FatFs/source/ff.c **** 		fs->database = bsect + sysect;					/* Data start sector */
 2224              		.loc 1 3548 3 is_stmt 1 view .LVU738
3548:DRIVER/FatFs/source/ff.c **** 		fs->database = bsect + sysect;					/* Data start sector */
 2225              		.loc 1 3548 23 is_stmt 0 view .LVU739
 2226 01a0 01EB0A02 		add	r2, r1, r10
3548:DRIVER/FatFs/source/ff.c **** 		fs->database = bsect + sysect;					/* Data start sector */
 2227              		.loc 1 3548 15 view .LVU740
 2228 01a4 A262     		str	r2, [r4, #40]
3549:DRIVER/FatFs/source/ff.c **** 		if (fmt == FS_FAT32) {
 2229              		.loc 1 3549 3 is_stmt 1 view .LVU741
3549:DRIVER/FatFs/source/ff.c **** 		if (fmt == FS_FAT32) {
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 111


 2230              		.loc 1 3549 24 is_stmt 0 view .LVU742
 2231 01a6 5344     		add	r3, r3, r10
 2232              	.LVL270:
3549:DRIVER/FatFs/source/ff.c **** 		if (fmt == FS_FAT32) {
 2233              		.loc 1 3549 16 view .LVU743
 2234 01a8 2363     		str	r3, [r4, #48]
3550:DRIVER/FatFs/source/ff.c **** 			if (ld_word(fs->win + BPB_FSVer32) != 0) return FR_NO_FILESYSTEM;	/* (Must be FAT32 revision 0.0
 2235              		.loc 1 3550 3 is_stmt 1 view .LVU744
3550:DRIVER/FatFs/source/ff.c **** 			if (ld_word(fs->win + BPB_FSVer32) != 0) return FR_NO_FILESYSTEM;	/* (Must be FAT32 revision 0.0
 2236              		.loc 1 3550 6 is_stmt 0 view .LVU745
 2237 01aa B8F1030F 		cmp	r8, #3
 2238 01ae 2ED0     		beq	.L184
3556:DRIVER/FatFs/source/ff.c **** 			fs->dirbase = fs->fatbase + fasize;			/* Root directory start sector */
 2239              		.loc 1 3556 4 is_stmt 1 view .LVU746
3556:DRIVER/FatFs/source/ff.c **** 			fs->dirbase = fs->fatbase + fasize;			/* Root directory start sector */
 2240              		.loc 1 3556 7 is_stmt 0 view .LVU747
 2241 01b0 B9F1000F 		cmp	r9, #0
 2242 01b4 00F09880 		beq	.L179
3557:DRIVER/FatFs/source/ff.c **** 			szbfat = (fmt == FS_FAT16) ?				/* (Needed FAT size) */
 2243              		.loc 1 3557 4 is_stmt 1 view .LVU748
3557:DRIVER/FatFs/source/ff.c **** 			szbfat = (fmt == FS_FAT16) ?				/* (Needed FAT size) */
 2244              		.loc 1 3557 30 is_stmt 0 view .LVU749
 2245 01b8 009B     		ldr	r3, [sp]
 2246 01ba 1A44     		add	r2, r2, r3
3557:DRIVER/FatFs/source/ff.c **** 			szbfat = (fmt == FS_FAT16) ?				/* (Needed FAT size) */
 2247              		.loc 1 3557 16 view .LVU750
 2248 01bc E262     		str	r2, [r4, #44]
3558:DRIVER/FatFs/source/ff.c **** 				fs->n_fatent * 2 : fs->n_fatent * 3 / 2 + (fs->n_fatent & 1);
 2249              		.loc 1 3558 4 is_stmt 1 view .LVU751
3559:DRIVER/FatFs/source/ff.c **** 		}
 2250              		.loc 1 3559 22 is_stmt 0 view .LVU752
 2251 01be B8F1020F 		cmp	r8, #2
 2252 01c2 35D0     		beq	.L185
3559:DRIVER/FatFs/source/ff.c **** 		}
 2253              		.loc 1 3559 37 discriminator 2 view .LVU753
 2254 01c4 0BEB4B02 		add	r2, fp, fp, lsl #1
3559:DRIVER/FatFs/source/ff.c **** 		}
 2255              		.loc 1 3559 61 discriminator 2 view .LVU754
 2256 01c8 0BF00103 		and	r3, fp, #1
3559:DRIVER/FatFs/source/ff.c **** 		}
 2257              		.loc 1 3559 22 discriminator 2 view .LVU755
 2258 01cc 03EB5203 		add	r3, r3, r2, lsr #1
 2259              	.LVL271:
 2260              	.L152:
3561:DRIVER/FatFs/source/ff.c **** 
 2261              		.loc 1 3561 3 is_stmt 1 view .LVU756
3561:DRIVER/FatFs/source/ff.c **** 
 2262              		.loc 1 3561 27 is_stmt 0 view .LVU757
 2263 01d0 3B44     		add	r3, r3, r7
 2264              	.LVL272:
3561:DRIVER/FatFs/source/ff.c **** 
 2265              		.loc 1 3561 27 view .LVU758
 2266 01d2 013B     		subs	r3, r3, #1
3561:DRIVER/FatFs/source/ff.c **** 
 2267              		.loc 1 3561 43 view .LVU759
 2268 01d4 B3FBF7F3 		udiv	r3, r3, r7
3561:DRIVER/FatFs/source/ff.c **** 
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 112


 2269              		.loc 1 3561 6 view .LVU760
 2270 01d8 B342     		cmp	r3, r6
 2271 01da 00F28780 		bhi	.L180
3565:DRIVER/FatFs/source/ff.c **** 		fs->fsi_flag = 0x80;
 2272              		.loc 1 3565 3 is_stmt 1 view .LVU761
3565:DRIVER/FatFs/source/ff.c **** 		fs->fsi_flag = 0x80;
 2273              		.loc 1 3565 33 is_stmt 0 view .LVU762
 2274 01de 4FF0FF33 		mov	r3, #-1
 2275 01e2 A361     		str	r3, [r4, #24]
3565:DRIVER/FatFs/source/ff.c **** 		fs->fsi_flag = 0x80;
 2276              		.loc 1 3565 17 view .LVU763
 2277 01e4 6361     		str	r3, [r4, #20]
3566:DRIVER/FatFs/source/ff.c **** #if (FF_FS_NOFSINFO & 3) != 3
 2278              		.loc 1 3566 3 is_stmt 1 view .LVU764
3566:DRIVER/FatFs/source/ff.c **** #if (FF_FS_NOFSINFO & 3) != 3
 2279              		.loc 1 3566 16 is_stmt 0 view .LVU765
 2280 01e6 8023     		movs	r3, #128
 2281 01e8 6371     		strb	r3, [r4, #5]
3568:DRIVER/FatFs/source/ff.c **** 			&& ld_word(fs->win + BPB_FSInfo32) == 1
 2282              		.loc 1 3568 3 is_stmt 1 view .LVU766
3568:DRIVER/FatFs/source/ff.c **** 			&& ld_word(fs->win + BPB_FSInfo32) == 1
 2283              		.loc 1 3568 6 is_stmt 0 view .LVU767
 2284 01ea B8F1030F 		cmp	r8, #3
 2285 01ee 22D0     		beq	.L186
 2286              	.L154:
3589:DRIVER/FatFs/source/ff.c **** 	fs->id = ++Fsid;		/* Volume mount ID */
 2287              		.loc 1 3589 2 is_stmt 1 view .LVU768
3589:DRIVER/FatFs/source/ff.c **** 	fs->id = ++Fsid;		/* Volume mount ID */
 2288              		.loc 1 3589 14 is_stmt 0 view .LVU769
 2289 01f0 84F80080 		strb	r8, [r4]
3590:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN == 1
 2290              		.loc 1 3590 2 is_stmt 1 view .LVU770
3590:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN == 1
 2291              		.loc 1 3590 11 is_stmt 0 view .LVU771
 2292 01f4 404A     		ldr	r2, .L187+8
 2293 01f6 1388     		ldrh	r3, [r2]
 2294 01f8 0133     		adds	r3, r3, #1
 2295 01fa 9BB2     		uxth	r3, r3
3590:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN == 1
 2296              		.loc 1 3590 9 view .LVU772
 2297 01fc 1380     		strh	r3, [r2]	@ movhi
 2298 01fe E380     		strh	r3, [r4, #6]	@ movhi
3603:DRIVER/FatFs/source/ff.c **** }
 2299              		.loc 1 3603 2 is_stmt 1 view .LVU773
3603:DRIVER/FatFs/source/ff.c **** }
 2300              		.loc 1 3603 9 is_stmt 0 view .LVU774
 2301 0200 4AE0     		b	.L143
 2302              	.LVL273:
 2303              	.L174:
3540:DRIVER/FatFs/source/ff.c **** 		if (nclst <= MAX_FAT16) fmt = FS_FAT16;
 2304              		.loc 1 3540 31 view .LVU775
 2305 0202 4FF00308 		mov	r8, #3
 2306 0206 C1E7     		b	.L149
 2307              	.LVL274:
 2308              	.L175:
3542:DRIVER/FatFs/source/ff.c **** 		if (fmt == 0) return FR_NO_FILESYSTEM;
 2309              		.loc 1 3542 31 view .LVU776
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 113


 2310 0208 4FF00108 		mov	r8, #1
 2311              	.LVL275:
3542:DRIVER/FatFs/source/ff.c **** 		if (fmt == 0) return FR_NO_FILESYSTEM;
 2312              		.loc 1 3542 31 view .LVU777
 2313 020c C2E7     		b	.L150
 2314              	.LVL276:
 2315              	.L184:
3551:DRIVER/FatFs/source/ff.c **** 			if (fs->n_rootdir != 0) return FR_NO_FILESYSTEM;	/* (BPB_RootEntCnt must be 0) */
 2316              		.loc 1 3551 4 is_stmt 1 view .LVU778
3551:DRIVER/FatFs/source/ff.c **** 			if (fs->n_rootdir != 0) return FR_NO_FILESYSTEM;	/* (BPB_RootEntCnt must be 0) */
 2317              		.loc 1 3551 8 is_stmt 0 view .LVU779
 2318 020e 04F16200 		add	r0, r4, #98
 2319              	.LVL277:
3551:DRIVER/FatFs/source/ff.c **** 			if (fs->n_rootdir != 0) return FR_NO_FILESYSTEM;	/* (BPB_RootEntCnt must be 0) */
 2320              		.loc 1 3551 8 view .LVU780
 2321 0212 FFF7FEFF 		bl	ld_word
 2322              	.LVL278:
3551:DRIVER/FatFs/source/ff.c **** 			if (fs->n_rootdir != 0) return FR_NO_FILESYSTEM;	/* (BPB_RootEntCnt must be 0) */
 2323              		.loc 1 3551 7 view .LVU781
 2324 0216 0028     		cmp	r0, #0
 2325 0218 62D1     		bne	.L177
3552:DRIVER/FatFs/source/ff.c **** 			fs->dirbase = ld_dword(fs->win + BPB_RootClus32);	/* Root directory start cluster */
 2326              		.loc 1 3552 4 is_stmt 1 view .LVU782
3552:DRIVER/FatFs/source/ff.c **** 			fs->dirbase = ld_dword(fs->win + BPB_RootClus32);	/* Root directory start cluster */
 2327              		.loc 1 3552 7 is_stmt 0 view .LVU783
 2328 021a B9F1000F 		cmp	r9, #0
 2329 021e 61D1     		bne	.L178
3553:DRIVER/FatFs/source/ff.c **** 			szbfat = fs->n_fatent * 4;					/* (Needed FAT size) */
 2330              		.loc 1 3553 4 is_stmt 1 view .LVU784
3553:DRIVER/FatFs/source/ff.c **** 			szbfat = fs->n_fatent * 4;					/* (Needed FAT size) */
 2331              		.loc 1 3553 18 is_stmt 0 view .LVU785
 2332 0220 04F16400 		add	r0, r4, #100
 2333 0224 FFF7FEFF 		bl	ld_dword
 2334              	.LVL279:
3553:DRIVER/FatFs/source/ff.c **** 			szbfat = fs->n_fatent * 4;					/* (Needed FAT size) */
 2335              		.loc 1 3553 16 view .LVU786
 2336 0228 E062     		str	r0, [r4, #44]
3554:DRIVER/FatFs/source/ff.c **** 		} else {
 2337              		.loc 1 3554 4 is_stmt 1 view .LVU787
3554:DRIVER/FatFs/source/ff.c **** 		} else {
 2338              		.loc 1 3554 11 is_stmt 0 view .LVU788
 2339 022a 4FEA8B03 		lsl	r3, fp, #2
 2340              	.LVL280:
3554:DRIVER/FatFs/source/ff.c **** 		} else {
 2341              		.loc 1 3554 11 view .LVU789
 2342 022e CFE7     		b	.L152
 2343              	.LVL281:
 2344              	.L185:
3559:DRIVER/FatFs/source/ff.c **** 		}
 2345              		.loc 1 3559 22 discriminator 1 view .LVU790
 2346 0230 4FEA4B03 		lsl	r3, fp, #1
 2347 0234 CCE7     		b	.L152
 2348              	.LVL282:
 2349              	.L186:
3569:DRIVER/FatFs/source/ff.c **** 			&& move_window(fs, bsect + 1) == FR_OK)
 2350              		.loc 1 3569 7 view .LVU791
 2351 0236 04F16800 		add	r0, r4, #104
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 114


 2352 023a FFF7FEFF 		bl	ld_word
 2353              	.LVL283:
3569:DRIVER/FatFs/source/ff.c **** 			&& move_window(fs, bsect + 1) == FR_OK)
 2354              		.loc 1 3569 4 view .LVU792
 2355 023e 0128     		cmp	r0, #1
 2356 0240 D6D1     		bne	.L154
3570:DRIVER/FatFs/source/ff.c **** 		{
 2357              		.loc 1 3570 7 view .LVU793
 2358 0242 0AF10101 		add	r1, r10, #1
 2359 0246 2046     		mov	r0, r4
 2360 0248 FFF7FEFF 		bl	move_window
 2361              	.LVL284:
3570:DRIVER/FatFs/source/ff.c **** 		{
 2362              		.loc 1 3570 4 view .LVU794
 2363 024c 0028     		cmp	r0, #0
 2364 024e CFD1     		bne	.L154
3572:DRIVER/FatFs/source/ff.c **** 			if (ld_word(fs->win + BS_55AA) == 0xAA55	/* Load FSInfo data if available */
 2365              		.loc 1 3572 4 is_stmt 1 view .LVU795
3572:DRIVER/FatFs/source/ff.c **** 			if (ld_word(fs->win + BS_55AA) == 0xAA55	/* Load FSInfo data if available */
 2366              		.loc 1 3572 17 is_stmt 0 view .LVU796
 2367 0250 0023     		movs	r3, #0
 2368 0252 6371     		strb	r3, [r4, #5]
3573:DRIVER/FatFs/source/ff.c **** 				&& ld_dword(fs->win + FSI_LeadSig) == 0x41615252
 2369              		.loc 1 3573 4 is_stmt 1 view .LVU797
3573:DRIVER/FatFs/source/ff.c **** 				&& ld_dword(fs->win + FSI_LeadSig) == 0x41615252
 2370              		.loc 1 3573 8 is_stmt 0 view .LVU798
 2371 0254 04F23620 		addw	r0, r4, #566
 2372 0258 FFF7FEFF 		bl	ld_word
 2373              	.LVL285:
3573:DRIVER/FatFs/source/ff.c **** 				&& ld_dword(fs->win + FSI_LeadSig) == 0x41615252
 2374              		.loc 1 3573 7 view .LVU799
 2375 025c 4AF65523 		movw	r3, #43605
 2376 0260 9842     		cmp	r0, r3
 2377 0262 C5D1     		bne	.L154
3574:DRIVER/FatFs/source/ff.c **** 				&& ld_dword(fs->win + FSI_StrucSig) == 0x61417272)
 2378              		.loc 1 3574 8 view .LVU800
 2379 0264 04F13800 		add	r0, r4, #56
 2380 0268 FFF7FEFF 		bl	ld_dword
 2381              	.LVL286:
3574:DRIVER/FatFs/source/ff.c **** 				&& ld_dword(fs->win + FSI_StrucSig) == 0x61417272)
 2382              		.loc 1 3574 5 view .LVU801
 2383 026c 234B     		ldr	r3, .L187+12
 2384 026e 9842     		cmp	r0, r3
 2385 0270 BED1     		bne	.L154
3575:DRIVER/FatFs/source/ff.c **** 			{
 2386              		.loc 1 3575 8 view .LVU802
 2387 0272 04F50770 		add	r0, r4, #540
 2388 0276 FFF7FEFF 		bl	ld_dword
 2389              	.LVL287:
3575:DRIVER/FatFs/source/ff.c **** 			{
 2390              		.loc 1 3575 5 view .LVU803
 2391 027a 214B     		ldr	r3, .L187+16
 2392 027c 9842     		cmp	r0, r3
 2393 027e B7D1     		bne	.L154
3578:DRIVER/FatFs/source/ff.c **** #endif
 2394              		.loc 1 3578 5 is_stmt 1 view .LVU804
3578:DRIVER/FatFs/source/ff.c **** #endif
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 115


 2395              		.loc 1 3578 21 is_stmt 0 view .LVU805
 2396 0280 04F50870 		add	r0, r4, #544
 2397 0284 FFF7FEFF 		bl	ld_dword
 2398              	.LVL288:
3578:DRIVER/FatFs/source/ff.c **** #endif
 2399              		.loc 1 3578 19 view .LVU806
 2400 0288 A061     		str	r0, [r4, #24]
3581:DRIVER/FatFs/source/ff.c **** #endif
 2401              		.loc 1 3581 5 is_stmt 1 view .LVU807
3581:DRIVER/FatFs/source/ff.c **** #endif
 2402              		.loc 1 3581 21 is_stmt 0 view .LVU808
 2403 028a 04F50970 		add	r0, r4, #548
 2404 028e FFF7FEFF 		bl	ld_dword
 2405              	.LVL289:
3581:DRIVER/FatFs/source/ff.c **** #endif
 2406              		.loc 1 3581 19 view .LVU809
 2407 0292 6061     		str	r0, [r4, #20]
 2408 0294 ACE7     		b	.L154
 2409              	.LVL290:
 2410              	.L155:
3403:DRIVER/FatFs/source/ff.c **** 
 2411              		.loc 1 3403 22 view .LVU810
 2412 0296 0B25     		movs	r5, #11
 2413              	.LVL291:
 2414              	.L143:
3604:DRIVER/FatFs/source/ff.c **** 
 2415              		.loc 1 3604 1 view .LVU811
 2416 0298 2846     		mov	r0, r5
 2417 029a 03B0     		add	sp, sp, #12
 2418              	.LCFI14:
 2419              		.cfi_remember_state
 2420              		.cfi_def_cfa_offset 36
 2421              		@ sp needed
 2422 029c BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 2423              	.LVL292:
 2424              	.L156:
 2425              	.LCFI15:
 2426              		.cfi_restore_state
3407:DRIVER/FatFs/source/ff.c **** #if FF_FS_REENTRANT
 2427              		.loc 1 3407 18 view .LVU812
 2428 02a0 0C25     		movs	r5, #12
 2429              	.LVL293:
3407:DRIVER/FatFs/source/ff.c **** #if FF_FS_REENTRANT
 2430              		.loc 1 3407 18 view .LVU813
 2431 02a2 F9E7     		b	.L143
 2432              	.LVL294:
 2433              	.L158:
3430:DRIVER/FatFs/source/ff.c **** 	}
 2434              		.loc 1 3430 10 view .LVU814
 2435 02a4 0325     		movs	r5, #3
 2436 02a6 F7E7     		b	.L143
 2437              	.L159:
3433:DRIVER/FatFs/source/ff.c **** 	}
 2438              		.loc 1 3433 10 view .LVU815
 2439 02a8 0A25     		movs	r5, #10
 2440 02aa F5E7     		b	.L143
 2441              	.LVL295:
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 116


 2442              	.L160:
3436:DRIVER/FatFs/source/ff.c **** 	if (SS(fs) > FF_MAX_SS || SS(fs) < FF_MIN_SS || (SS(fs) & (SS(fs) - 1))) return FR_DISK_ERR;
 2443              		.loc 1 3436 71 view .LVU816
 2444 02ac 0125     		movs	r5, #1
 2445 02ae F3E7     		b	.L143
 2446              	.L161:
3437:DRIVER/FatFs/source/ff.c **** #endif
 2447              		.loc 1 3437 82 view .LVU817
 2448 02b0 0125     		movs	r5, #1
 2449 02b2 F1E7     		b	.L143
 2450              	.LVL296:
 2451              	.L163:
3442:DRIVER/FatFs/source/ff.c **** 	if (fmt >= 2) return FR_NO_FILESYSTEM;	/* No FAT volume is found */
 2452              		.loc 1 3442 23 view .LVU818
 2453 02b4 0125     		movs	r5, #1
 2454 02b6 EFE7     		b	.L143
 2455              	.L164:
3443:DRIVER/FatFs/source/ff.c **** 	bsect = fs->winsect;					/* Volume offset in the hosting physical drive */
 2456              		.loc 1 3443 23 view .LVU819
 2457 02b8 0D25     		movs	r5, #13
 2458 02ba EDE7     		b	.L143
 2459              	.LVL297:
 2460              	.L165:
3512:DRIVER/FatFs/source/ff.c **** 
 2461              		.loc 1 3512 59 view .LVU820
 2462 02bc 0D25     		movs	r5, #13
 2463 02be EBE7     		b	.L143
 2464              	.LVL298:
 2465              	.L166:
3519:DRIVER/FatFs/source/ff.c **** 		fasize *= fs->n_fats;							/* Number of sectors for FAT area */
 2466              		.loc 1 3519 50 view .LVU821
 2467 02c0 0D25     		movs	r5, #13
 2468 02c2 E9E7     		b	.L143
 2469              	.LVL299:
 2470              	.L167:
3523:DRIVER/FatFs/source/ff.c **** 
 2471              		.loc 1 3523 63 view .LVU822
 2472 02c4 0D25     		movs	r5, #13
 2473 02c6 E7E7     		b	.L143
 2474              	.LVL300:
 2475              	.L168:
3523:DRIVER/FatFs/source/ff.c **** 
 2476              		.loc 1 3523 63 view .LVU823
 2477 02c8 0D25     		movs	r5, #13
 2478 02ca E5E7     		b	.L143
 2479              	.L169:
3526:DRIVER/FatFs/source/ff.c **** 
 2480              		.loc 1 3526 49 view .LVU824
 2481 02cc 0D25     		movs	r5, #13
 2482 02ce E3E7     		b	.L143
 2483              	.LVL301:
 2484              	.L170:
3532:DRIVER/FatFs/source/ff.c **** 
 2485              		.loc 1 3532 25 view .LVU825
 2486 02d0 0D25     		movs	r5, #13
 2487 02d2 E1E7     		b	.L143
 2488              	.LVL302:
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 117


 2489              	.L171:
3536:DRIVER/FatFs/source/ff.c **** 		nclst = (tsect - sysect) / fs->csize;			/* Number of clusters */
 2490              		.loc 1 3536 30 view .LVU826
 2491 02d4 0D25     		movs	r5, #13
 2492 02d6 DFE7     		b	.L143
 2493              	.LVL303:
 2494              	.L172:
3538:DRIVER/FatFs/source/ff.c **** 		fmt = 0;
 2495              		.loc 1 3538 26 view .LVU827
 2496 02d8 0D25     		movs	r5, #13
 2497 02da DDE7     		b	.L143
 2498              	.LVL304:
 2499              	.L183:
3543:DRIVER/FatFs/source/ff.c **** 
 2500              		.loc 1 3543 24 view .LVU828
 2501 02dc 0D25     		movs	r5, #13
 2502 02de DBE7     		b	.L143
 2503              	.LVL305:
 2504              	.L177:
3551:DRIVER/FatFs/source/ff.c **** 			if (fs->n_rootdir != 0) return FR_NO_FILESYSTEM;	/* (BPB_RootEntCnt must be 0) */
 2505              		.loc 1 3551 52 view .LVU829
 2506 02e0 0D25     		movs	r5, #13
 2507 02e2 D9E7     		b	.L143
 2508              	.L178:
3552:DRIVER/FatFs/source/ff.c **** 			fs->dirbase = ld_dword(fs->win + BPB_RootClus32);	/* Root directory start cluster */
 2509              		.loc 1 3552 35 view .LVU830
 2510 02e4 0D25     		movs	r5, #13
 2511 02e6 D7E7     		b	.L143
 2512              	.LVL306:
 2513              	.L179:
3556:DRIVER/FatFs/source/ff.c **** 			fs->dirbase = fs->fatbase + fasize;			/* Root directory start sector */
 2514              		.loc 1 3556 35 view .LVU831
 2515 02e8 0D25     		movs	r5, #13
 2516 02ea D5E7     		b	.L143
 2517              	.LVL307:
 2518              	.L180:
3561:DRIVER/FatFs/source/ff.c **** 
 2519              		.loc 1 3561 60 view .LVU832
 2520 02ec 0D25     		movs	r5, #13
 2521 02ee D3E7     		b	.L143
 2522              	.L188:
 2523              		.align	2
 2524              	.L187:
 2525 02f0 00000000 		.word	FatFs
 2526 02f4 F5FFFF0F 		.word	268435445
 2527 02f8 00000000 		.word	Fsid
 2528 02fc 52526141 		.word	1096897106
 2529 0300 72724161 		.word	1631679090
 2530              		.cfi_endproc
 2531              	.LFE37:
 2533              		.section	.text.put_fat,"ax",%progbits
 2534              		.align	1
 2535              		.syntax unified
 2536              		.thumb
 2537              		.thumb_func
 2539              	put_fat:
 2540              	.LVL308:
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 118


 2541              	.LFB13:
1244:DRIVER/FatFs/source/ff.c **** 	UINT bc;
 2542              		.loc 1 1244 1 is_stmt 1 view -0
 2543              		.cfi_startproc
 2544              		@ args = 0, pretend = 0, frame = 0
 2545              		@ frame_needed = 0, uses_anonymous_args = 0
1244:DRIVER/FatFs/source/ff.c **** 	UINT bc;
 2546              		.loc 1 1244 1 is_stmt 0 view .LVU834
 2547 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 2548              	.LCFI16:
 2549              		.cfi_def_cfa_offset 32
 2550              		.cfi_offset 4, -32
 2551              		.cfi_offset 5, -28
 2552              		.cfi_offset 6, -24
 2553              		.cfi_offset 7, -20
 2554              		.cfi_offset 8, -16
 2555              		.cfi_offset 9, -12
 2556              		.cfi_offset 10, -8
 2557              		.cfi_offset 14, -4
1245:DRIVER/FatFs/source/ff.c **** 	BYTE *p;
 2558              		.loc 1 1245 2 is_stmt 1 view .LVU835
1246:DRIVER/FatFs/source/ff.c **** 	FRESULT res = FR_INT_ERR;
 2559              		.loc 1 1246 2 view .LVU836
1247:DRIVER/FatFs/source/ff.c **** 
 2560              		.loc 1 1247 2 view .LVU837
 2561              	.LVL309:
1250:DRIVER/FatFs/source/ff.c **** 		switch (fs->fs_type) {
 2562              		.loc 1 1250 2 view .LVU838
1250:DRIVER/FatFs/source/ff.c **** 		switch (fs->fs_type) {
 2563              		.loc 1 1250 5 is_stmt 0 view .LVU839
 2564 0004 0129     		cmp	r1, #1
 2565 0006 40F29580 		bls	.L197
 2566 000a 0446     		mov	r4, r0
 2567 000c 0D46     		mov	r5, r1
 2568 000e 1746     		mov	r7, r2
1250:DRIVER/FatFs/source/ff.c **** 		switch (fs->fs_type) {
 2569              		.loc 1 1250 28 discriminator 1 view .LVU840
 2570 0010 C369     		ldr	r3, [r0, #28]
1250:DRIVER/FatFs/source/ff.c **** 		switch (fs->fs_type) {
 2571              		.loc 1 1250 16 discriminator 1 view .LVU841
 2572 0012 8B42     		cmp	r3, r1
 2573 0014 40F29080 		bls	.L198
1251:DRIVER/FatFs/source/ff.c **** 		case FS_FAT12:
 2574              		.loc 1 1251 3 is_stmt 1 view .LVU842
1251:DRIVER/FatFs/source/ff.c **** 		case FS_FAT12:
 2575              		.loc 1 1251 13 is_stmt 0 view .LVU843
 2576 0018 0378     		ldrb	r3, [r0]	@ zero_extendqisi2
1251:DRIVER/FatFs/source/ff.c **** 		case FS_FAT12:
 2577              		.loc 1 1251 3 view .LVU844
 2578 001a 022B     		cmp	r3, #2
 2579 001c 4ED0     		beq	.L191
 2580 001e 032B     		cmp	r3, #3
 2581 0020 66D0     		beq	.L192
 2582 0022 012B     		cmp	r3, #1
 2583 0024 03D0     		beq	.L201
 2584 0026 0226     		movs	r6, #2
 2585              	.LVL310:
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 119


 2586              	.L190:
1287:DRIVER/FatFs/source/ff.c **** }
 2587              		.loc 1 1287 2 is_stmt 1 view .LVU845
1288:DRIVER/FatFs/source/ff.c **** 
 2588              		.loc 1 1288 1 is_stmt 0 view .LVU846
 2589 0028 3046     		mov	r0, r6
 2590 002a BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 2591              	.LVL311:
 2592              	.L201:
1253:DRIVER/FatFs/source/ff.c **** 			res = move_window(fs, fs->fatbase + (bc / SS(fs)));
 2593              		.loc 1 1253 4 is_stmt 1 view .LVU847
1253:DRIVER/FatFs/source/ff.c **** 			res = move_window(fs, fs->fatbase + (bc / SS(fs)));
 2594              		.loc 1 1253 21 view .LVU848
1253:DRIVER/FatFs/source/ff.c **** 			res = move_window(fs, fs->fatbase + (bc / SS(fs)));
 2595              		.loc 1 1253 24 is_stmt 0 view .LVU849
 2596 002e 01EB5108 		add	r8, r1, r1, lsr #1
 2597              	.LVL312:
1254:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) break;
 2598              		.loc 1 1254 4 is_stmt 1 view .LVU850
1254:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) break;
 2599              		.loc 1 1254 28 is_stmt 0 view .LVU851
 2600 0032 816A     		ldr	r1, [r0, #40]
 2601              	.LVL313:
1254:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) break;
 2602              		.loc 1 1254 46 view .LVU852
 2603 0034 8389     		ldrh	r3, [r0, #12]
1254:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) break;
 2604              		.loc 1 1254 44 view .LVU853
 2605 0036 B8FBF3F3 		udiv	r3, r8, r3
1254:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) break;
 2606              		.loc 1 1254 10 view .LVU854
 2607 003a 1944     		add	r1, r1, r3
 2608 003c FFF7FEFF 		bl	move_window
 2609              	.LVL314:
1255:DRIVER/FatFs/source/ff.c **** 			p = fs->win + bc++ % SS(fs);
 2610              		.loc 1 1255 4 is_stmt 1 view .LVU855
1255:DRIVER/FatFs/source/ff.c **** 			p = fs->win + bc++ % SS(fs);
 2611              		.loc 1 1255 7 is_stmt 0 view .LVU856
 2612 0040 0646     		mov	r6, r0
 2613 0042 0028     		cmp	r0, #0
 2614 0044 F0D1     		bne	.L190
1256:DRIVER/FatFs/source/ff.c **** 			*p = (clst & 1) ? ((*p & 0x0F) | ((BYTE)val << 4)) : (BYTE)val;	/* Update 1st byte */
 2615              		.loc 1 1256 4 is_stmt 1 view .LVU857
1256:DRIVER/FatFs/source/ff.c **** 			*p = (clst & 1) ? ((*p & 0x0F) | ((BYTE)val << 4)) : (BYTE)val;	/* Update 1st byte */
 2616              		.loc 1 1256 8 is_stmt 0 view .LVU858
 2617 0046 04F1380A 		add	r10, r4, #56
1256:DRIVER/FatFs/source/ff.c **** 			*p = (clst & 1) ? ((*p & 0x0F) | ((BYTE)val << 4)) : (BYTE)val;	/* Update 1st byte */
 2618              		.loc 1 1256 20 view .LVU859
 2619 004a 08F10109 		add	r9, r8, #1
 2620              	.LVL315:
1256:DRIVER/FatFs/source/ff.c **** 			*p = (clst & 1) ? ((*p & 0x0F) | ((BYTE)val << 4)) : (BYTE)val;	/* Update 1st byte */
 2621              		.loc 1 1256 25 view .LVU860
 2622 004e A389     		ldrh	r3, [r4, #12]
1256:DRIVER/FatFs/source/ff.c **** 			*p = (clst & 1) ? ((*p & 0x0F) | ((BYTE)val << 4)) : (BYTE)val;	/* Update 1st byte */
 2623              		.loc 1 1256 23 view .LVU861
 2624 0050 B8FBF3F2 		udiv	r2, r8, r3
 2625 0054 03FB1288 		mls	r8, r3, r2, r8
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 120


 2626              	.LVL316:
1257:DRIVER/FatFs/source/ff.c **** 			fs->wflag = 1;
 2627              		.loc 1 1257 4 is_stmt 1 view .LVU862
1257:DRIVER/FatFs/source/ff.c **** 			fs->wflag = 1;
 2628              		.loc 1 1257 7 is_stmt 0 view .LVU863
 2629 0058 15F00105 		ands	r5, r5, #1
 2630              	.LVL317:
1257:DRIVER/FatFs/source/ff.c **** 			fs->wflag = 1;
 2631              		.loc 1 1257 7 view .LVU864
 2632 005c 24D0     		beq	.L193
1257:DRIVER/FatFs/source/ff.c **** 			fs->wflag = 1;
 2633              		.loc 1 1257 24 discriminator 1 view .LVU865
 2634 005e 1AF80830 		ldrb	r3, [r10, r8]	@ zero_extendqisi2
1257:DRIVER/FatFs/source/ff.c **** 			fs->wflag = 1;
 2635              		.loc 1 1257 48 discriminator 1 view .LVU866
 2636 0062 3A01     		lsls	r2, r7, #4
 2637 0064 02F47F62 		and	r2, r2, #4080
1257:DRIVER/FatFs/source/ff.c **** 			fs->wflag = 1;
 2638              		.loc 1 1257 7 discriminator 1 view .LVU867
 2639 0068 03F00F03 		and	r3, r3, #15
 2640 006c 1343     		orrs	r3, r3, r2
 2641 006e DBB2     		uxtb	r3, r3
 2642              	.L194:
1257:DRIVER/FatFs/source/ff.c **** 			fs->wflag = 1;
 2643              		.loc 1 1257 7 discriminator 4 view .LVU868
 2644 0070 0AF80830 		strb	r3, [r10, r8]
1258:DRIVER/FatFs/source/ff.c **** 			res = move_window(fs, fs->fatbase + (bc / SS(fs)));
 2645              		.loc 1 1258 4 is_stmt 1 discriminator 4 view .LVU869
1258:DRIVER/FatFs/source/ff.c **** 			res = move_window(fs, fs->fatbase + (bc / SS(fs)));
 2646              		.loc 1 1258 14 is_stmt 0 discriminator 4 view .LVU870
 2647 0074 0123     		movs	r3, #1
 2648 0076 2371     		strb	r3, [r4, #4]
1259:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) break;
 2649              		.loc 1 1259 4 is_stmt 1 discriminator 4 view .LVU871
1259:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) break;
 2650              		.loc 1 1259 28 is_stmt 0 discriminator 4 view .LVU872
 2651 0078 A16A     		ldr	r1, [r4, #40]
1259:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) break;
 2652              		.loc 1 1259 46 discriminator 4 view .LVU873
 2653 007a A389     		ldrh	r3, [r4, #12]
1259:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) break;
 2654              		.loc 1 1259 44 discriminator 4 view .LVU874
 2655 007c B9FBF3F3 		udiv	r3, r9, r3
1259:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) break;
 2656              		.loc 1 1259 10 discriminator 4 view .LVU875
 2657 0080 1944     		add	r1, r1, r3
 2658 0082 2046     		mov	r0, r4
 2659              	.LVL318:
1259:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) break;
 2660              		.loc 1 1259 10 discriminator 4 view .LVU876
 2661 0084 FFF7FEFF 		bl	move_window
 2662              	.LVL319:
1260:DRIVER/FatFs/source/ff.c **** 			p = fs->win + bc % SS(fs);
 2663              		.loc 1 1260 4 is_stmt 1 discriminator 4 view .LVU877
1260:DRIVER/FatFs/source/ff.c **** 			p = fs->win + bc % SS(fs);
 2664              		.loc 1 1260 7 is_stmt 0 discriminator 4 view .LVU878
 2665 0088 0646     		mov	r6, r0
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 121


 2666 008a 0028     		cmp	r0, #0
 2667 008c CCD1     		bne	.L190
1261:DRIVER/FatFs/source/ff.c **** 			*p = (clst & 1) ? (BYTE)(val >> 4) : ((*p & 0xF0) | ((BYTE)(val >> 8) & 0x0F));	/* Update 2nd by
 2668              		.loc 1 1261 4 is_stmt 1 view .LVU879
1261:DRIVER/FatFs/source/ff.c **** 			*p = (clst & 1) ? (BYTE)(val >> 4) : ((*p & 0xF0) | ((BYTE)(val >> 8) & 0x0F));	/* Update 2nd by
 2669              		.loc 1 1261 23 is_stmt 0 view .LVU880
 2670 008e A389     		ldrh	r3, [r4, #12]
1261:DRIVER/FatFs/source/ff.c **** 			*p = (clst & 1) ? (BYTE)(val >> 4) : ((*p & 0xF0) | ((BYTE)(val >> 8) & 0x0F));	/* Update 2nd by
 2671              		.loc 1 1261 21 view .LVU881
 2672 0090 B9FBF3F2 		udiv	r2, r9, r3
 2673 0094 03FB1299 		mls	r9, r3, r2, r9
 2674              	.LVL320:
1262:DRIVER/FatFs/source/ff.c **** 			fs->wflag = 1;
 2675              		.loc 1 1262 4 is_stmt 1 view .LVU882
1262:DRIVER/FatFs/source/ff.c **** 			fs->wflag = 1;
 2676              		.loc 1 1262 7 is_stmt 0 view .LVU883
 2677 0098 45B1     		cbz	r5, .L195
1262:DRIVER/FatFs/source/ff.c **** 			fs->wflag = 1;
 2678              		.loc 1 1262 7 discriminator 1 view .LVU884
 2679 009a C7F30713 		ubfx	r3, r7, #4, #8
 2680              	.L196:
1262:DRIVER/FatFs/source/ff.c **** 			fs->wflag = 1;
 2681              		.loc 1 1262 7 discriminator 4 view .LVU885
 2682 009e 0AF80930 		strb	r3, [r10, r9]
1263:DRIVER/FatFs/source/ff.c **** 			break;
 2683              		.loc 1 1263 4 is_stmt 1 discriminator 4 view .LVU886
1263:DRIVER/FatFs/source/ff.c **** 			break;
 2684              		.loc 1 1263 14 is_stmt 0 discriminator 4 view .LVU887
 2685 00a2 0123     		movs	r3, #1
 2686 00a4 2371     		strb	r3, [r4, #4]
1264:DRIVER/FatFs/source/ff.c **** 
 2687              		.loc 1 1264 4 is_stmt 1 discriminator 4 view .LVU888
 2688 00a6 BFE7     		b	.L190
 2689              	.LVL321:
 2690              	.L193:
1257:DRIVER/FatFs/source/ff.c **** 			fs->wflag = 1;
 2691              		.loc 1 1257 7 is_stmt 0 discriminator 2 view .LVU889
 2692 00a8 FBB2     		uxtb	r3, r7
 2693 00aa E1E7     		b	.L194
 2694              	.LVL322:
 2695              	.L195:
1262:DRIVER/FatFs/source/ff.c **** 			fs->wflag = 1;
 2696              		.loc 1 1262 43 discriminator 2 view .LVU890
 2697 00ac 1AF80930 		ldrb	r3, [r10, r9]	@ zero_extendqisi2
1262:DRIVER/FatFs/source/ff.c **** 			fs->wflag = 1;
 2698              		.loc 1 1262 74 discriminator 2 view .LVU891
 2699 00b0 C7F30322 		ubfx	r2, r7, #8, #4
1262:DRIVER/FatFs/source/ff.c **** 			fs->wflag = 1;
 2700              		.loc 1 1262 7 discriminator 2 view .LVU892
 2701 00b4 23F00F03 		bic	r3, r3, #15
 2702 00b8 1343     		orrs	r3, r3, r2
 2703 00ba F0E7     		b	.L196
 2704              	.LVL323:
 2705              	.L191:
1267:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) break;
 2706              		.loc 1 1267 4 is_stmt 1 view .LVU893
1267:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) break;
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 122


 2707              		.loc 1 1267 28 is_stmt 0 view .LVU894
 2708 00bc 816A     		ldr	r1, [r0, #40]
 2709              	.LVL324:
1267:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) break;
 2710              		.loc 1 1267 49 view .LVU895
 2711 00be 8389     		ldrh	r3, [r0, #12]
1267:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) break;
 2712              		.loc 1 1267 56 view .LVU896
 2713 00c0 5B08     		lsrs	r3, r3, #1
1267:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) break;
 2714              		.loc 1 1267 46 view .LVU897
 2715 00c2 B5FBF3F3 		udiv	r3, r5, r3
1267:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) break;
 2716              		.loc 1 1267 10 view .LVU898
 2717 00c6 1944     		add	r1, r1, r3
 2718 00c8 FFF7FEFF 		bl	move_window
 2719              	.LVL325:
1268:DRIVER/FatFs/source/ff.c **** 			st_word(fs->win + clst * 2 % SS(fs), (WORD)val);	/* Simple WORD array */
 2720              		.loc 1 1268 4 is_stmt 1 view .LVU899
1268:DRIVER/FatFs/source/ff.c **** 			st_word(fs->win + clst * 2 % SS(fs), (WORD)val);	/* Simple WORD array */
 2721              		.loc 1 1268 7 is_stmt 0 view .LVU900
 2722 00cc 0646     		mov	r6, r0
 2723 00ce 0028     		cmp	r0, #0
 2724 00d0 AAD1     		bne	.L190
1269:DRIVER/FatFs/source/ff.c **** 			fs->wflag = 1;
 2725              		.loc 1 1269 4 is_stmt 1 view .LVU901
1269:DRIVER/FatFs/source/ff.c **** 			fs->wflag = 1;
 2726              		.loc 1 1269 12 is_stmt 0 view .LVU902
 2727 00d2 04F13800 		add	r0, r4, #56
 2728              	.LVL326:
1269:DRIVER/FatFs/source/ff.c **** 			fs->wflag = 1;
 2729              		.loc 1 1269 27 view .LVU903
 2730 00d6 6D00     		lsls	r5, r5, #1
 2731              	.LVL327:
1269:DRIVER/FatFs/source/ff.c **** 			fs->wflag = 1;
 2732              		.loc 1 1269 33 view .LVU904
 2733 00d8 A389     		ldrh	r3, [r4, #12]
1269:DRIVER/FatFs/source/ff.c **** 			fs->wflag = 1;
 2734              		.loc 1 1269 31 view .LVU905
 2735 00da B5FBF3F2 		udiv	r2, r5, r3
 2736 00de 03FB1255 		mls	r5, r3, r2, r5
1269:DRIVER/FatFs/source/ff.c **** 			fs->wflag = 1;
 2737              		.loc 1 1269 4 view .LVU906
 2738 00e2 B9B2     		uxth	r1, r7
 2739 00e4 2844     		add	r0, r0, r5
 2740 00e6 FFF7FEFF 		bl	st_word
 2741              	.LVL328:
1270:DRIVER/FatFs/source/ff.c **** 			break;
 2742              		.loc 1 1270 4 is_stmt 1 view .LVU907
1270:DRIVER/FatFs/source/ff.c **** 			break;
 2743              		.loc 1 1270 14 is_stmt 0 view .LVU908
 2744 00ea 0123     		movs	r3, #1
 2745 00ec 2371     		strb	r3, [r4, #4]
1271:DRIVER/FatFs/source/ff.c **** 
 2746              		.loc 1 1271 4 is_stmt 1 view .LVU909
 2747 00ee 9BE7     		b	.L190
 2748              	.LVL329:
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 123


 2749              	.L192:
1277:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) break;
 2750              		.loc 1 1277 4 view .LVU910
1277:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) break;
 2751              		.loc 1 1277 28 is_stmt 0 view .LVU911
 2752 00f0 816A     		ldr	r1, [r0, #40]
 2753              	.LVL330:
1277:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) break;
 2754              		.loc 1 1277 49 view .LVU912
 2755 00f2 8389     		ldrh	r3, [r0, #12]
1277:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) break;
 2756              		.loc 1 1277 56 view .LVU913
 2757 00f4 9B08     		lsrs	r3, r3, #2
1277:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) break;
 2758              		.loc 1 1277 46 view .LVU914
 2759 00f6 B5FBF3F3 		udiv	r3, r5, r3
1277:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) break;
 2760              		.loc 1 1277 10 view .LVU915
 2761 00fa 1944     		add	r1, r1, r3
 2762 00fc FFF7FEFF 		bl	move_window
 2763              	.LVL331:
1278:DRIVER/FatFs/source/ff.c **** 			if (!FF_FS_EXFAT || fs->fs_type != FS_EXFAT) {
 2764              		.loc 1 1278 4 is_stmt 1 view .LVU916
1278:DRIVER/FatFs/source/ff.c **** 			if (!FF_FS_EXFAT || fs->fs_type != FS_EXFAT) {
 2765              		.loc 1 1278 7 is_stmt 0 view .LVU917
 2766 0100 0646     		mov	r6, r0
 2767 0102 0028     		cmp	r0, #0
 2768 0104 90D1     		bne	.L190
1279:DRIVER/FatFs/source/ff.c **** 				val = (val & 0x0FFFFFFF) | (ld_dword(fs->win + clst * 4 % SS(fs)) & 0xF0000000);
 2769              		.loc 1 1279 4 is_stmt 1 view .LVU918
1280:DRIVER/FatFs/source/ff.c **** 			}
 2770              		.loc 1 1280 5 view .LVU919
1280:DRIVER/FatFs/source/ff.c **** 			}
 2771              		.loc 1 1280 16 is_stmt 0 view .LVU920
 2772 0106 27F07047 		bic	r7, r7, #-268435456
 2773              	.LVL332:
1280:DRIVER/FatFs/source/ff.c **** 			}
 2774              		.loc 1 1280 42 view .LVU921
 2775 010a 04F13803 		add	r3, r4, #56
1280:DRIVER/FatFs/source/ff.c **** 			}
 2776              		.loc 1 1280 57 view .LVU922
 2777 010e AD00     		lsls	r5, r5, #2
 2778              	.LVL333:
1280:DRIVER/FatFs/source/ff.c **** 			}
 2779              		.loc 1 1280 63 view .LVU923
 2780 0110 A289     		ldrh	r2, [r4, #12]
1280:DRIVER/FatFs/source/ff.c **** 			}
 2781              		.loc 1 1280 61 view .LVU924
 2782 0112 B5FBF2F1 		udiv	r1, r5, r2
 2783 0116 02FB1155 		mls	r5, r2, r1, r5
1280:DRIVER/FatFs/source/ff.c **** 			}
 2784              		.loc 1 1280 33 view .LVU925
 2785 011a 1D44     		add	r5, r5, r3
 2786 011c 2846     		mov	r0, r5
 2787              	.LVL334:
1280:DRIVER/FatFs/source/ff.c **** 			}
 2788              		.loc 1 1280 33 view .LVU926
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 124


 2789 011e FFF7FEFF 		bl	ld_dword
 2790              	.LVL335:
1280:DRIVER/FatFs/source/ff.c **** 			}
 2791              		.loc 1 1280 71 view .LVU927
 2792 0122 00F07041 		and	r1, r0, #-268435456
 2793              	.LVL336:
1282:DRIVER/FatFs/source/ff.c **** 			fs->wflag = 1;
 2794              		.loc 1 1282 4 is_stmt 1 view .LVU928
 2795 0126 3943     		orrs	r1, r1, r7
 2796              	.LVL337:
1282:DRIVER/FatFs/source/ff.c **** 			fs->wflag = 1;
 2797              		.loc 1 1282 4 is_stmt 0 view .LVU929
 2798 0128 2846     		mov	r0, r5
 2799 012a FFF7FEFF 		bl	st_dword
 2800              	.LVL338:
1283:DRIVER/FatFs/source/ff.c **** 			break;
 2801              		.loc 1 1283 4 is_stmt 1 view .LVU930
1283:DRIVER/FatFs/source/ff.c **** 			break;
 2802              		.loc 1 1283 14 is_stmt 0 view .LVU931
 2803 012e 0123     		movs	r3, #1
 2804 0130 2371     		strb	r3, [r4, #4]
1284:DRIVER/FatFs/source/ff.c **** 		}
 2805              		.loc 1 1284 4 is_stmt 1 view .LVU932
 2806 0132 79E7     		b	.L190
 2807              	.LVL339:
 2808              	.L197:
1247:DRIVER/FatFs/source/ff.c **** 
 2809              		.loc 1 1247 10 is_stmt 0 view .LVU933
 2810 0134 0226     		movs	r6, #2
 2811 0136 77E7     		b	.L190
 2812              	.L198:
1247:DRIVER/FatFs/source/ff.c **** 
 2813              		.loc 1 1247 10 view .LVU934
 2814 0138 0226     		movs	r6, #2
 2815 013a 75E7     		b	.L190
 2816              		.cfi_endproc
 2817              	.LFE13:
 2819              		.section	.text.get_fat,"ax",%progbits
 2820              		.align	1
 2821              		.syntax unified
 2822              		.thumb
 2823              		.thumb_func
 2825              	get_fat:
 2826              	.LVL340:
 2827              	.LFB12:
1165:DRIVER/FatFs/source/ff.c **** 	UINT wc, bc;
 2828              		.loc 1 1165 1 is_stmt 1 view -0
 2829              		.cfi_startproc
 2830              		@ args = 0, pretend = 0, frame = 0
 2831              		@ frame_needed = 0, uses_anonymous_args = 0
1165:DRIVER/FatFs/source/ff.c **** 	UINT wc, bc;
 2832              		.loc 1 1165 1 is_stmt 0 view .LVU936
 2833 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 2834              	.LCFI17:
 2835              		.cfi_def_cfa_offset 24
 2836              		.cfi_offset 3, -24
 2837              		.cfi_offset 4, -20
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 125


 2838              		.cfi_offset 5, -16
 2839              		.cfi_offset 6, -12
 2840              		.cfi_offset 7, -8
 2841              		.cfi_offset 14, -4
1166:DRIVER/FatFs/source/ff.c **** 	DWORD val;
 2842              		.loc 1 1166 2 is_stmt 1 view .LVU937
1167:DRIVER/FatFs/source/ff.c **** 	FATFS *fs = obj->fs;
 2843              		.loc 1 1167 2 view .LVU938
1168:DRIVER/FatFs/source/ff.c **** 
 2844              		.loc 1 1168 2 view .LVU939
1168:DRIVER/FatFs/source/ff.c **** 
 2845              		.loc 1 1168 9 is_stmt 0 view .LVU940
 2846 0002 0568     		ldr	r5, [r0]
 2847              	.LVL341:
1171:DRIVER/FatFs/source/ff.c **** 		val = 1;	/* Internal error */
 2848              		.loc 1 1171 2 is_stmt 1 view .LVU941
1171:DRIVER/FatFs/source/ff.c **** 		val = 1;	/* Internal error */
 2849              		.loc 1 1171 5 is_stmt 0 view .LVU942
 2850 0004 0129     		cmp	r1, #1
 2851 0006 6CD9     		bls	.L207
 2852 0008 0C46     		mov	r4, r1
1171:DRIVER/FatFs/source/ff.c **** 		val = 1;	/* Internal error */
 2853              		.loc 1 1171 28 discriminator 1 view .LVU943
 2854 000a EB69     		ldr	r3, [r5, #28]
1171:DRIVER/FatFs/source/ff.c **** 		val = 1;	/* Internal error */
 2855              		.loc 1 1171 15 discriminator 1 view .LVU944
 2856 000c 8B42     		cmp	r3, r1
 2857 000e 6AD9     		bls	.L208
1175:DRIVER/FatFs/source/ff.c **** 
 2858              		.loc 1 1175 3 is_stmt 1 view .LVU945
 2859              	.LVL342:
1177:DRIVER/FatFs/source/ff.c **** 		case FS_FAT12 :
 2860              		.loc 1 1177 3 view .LVU946
1177:DRIVER/FatFs/source/ff.c **** 		case FS_FAT12 :
 2861              		.loc 1 1177 13 is_stmt 0 view .LVU947
 2862 0010 2B78     		ldrb	r3, [r5]	@ zero_extendqisi2
1177:DRIVER/FatFs/source/ff.c **** 		case FS_FAT12 :
 2863              		.loc 1 1177 3 view .LVU948
 2864 0012 022B     		cmp	r3, #2
 2865 0014 37D0     		beq	.L204
 2866 0016 032B     		cmp	r3, #3
 2867 0018 4BD0     		beq	.L205
 2868 001a 012B     		cmp	r3, #1
 2869 001c 01D0     		beq	.L215
 2870 001e 0120     		movs	r0, #1
 2871              	.LVL343:
1177:DRIVER/FatFs/source/ff.c **** 		case FS_FAT12 :
 2872              		.loc 1 1177 3 view .LVU949
 2873 0020 60E0     		b	.L202
 2874              	.LVL344:
 2875              	.L215:
1179:DRIVER/FatFs/source/ff.c **** 			if (move_window(fs, fs->fatbase + (bc / SS(fs))) != FR_OK) break;
 2876              		.loc 1 1179 4 is_stmt 1 view .LVU950
1179:DRIVER/FatFs/source/ff.c **** 			if (move_window(fs, fs->fatbase + (bc / SS(fs))) != FR_OK) break;
 2877              		.loc 1 1179 21 view .LVU951
1179:DRIVER/FatFs/source/ff.c **** 			if (move_window(fs, fs->fatbase + (bc / SS(fs))) != FR_OK) break;
 2878              		.loc 1 1179 24 is_stmt 0 view .LVU952
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 126


 2879 0022 01EB5106 		add	r6, r1, r1, lsr #1
 2880              	.LVL345:
1180:DRIVER/FatFs/source/ff.c **** 			wc = fs->win[bc++ % SS(fs)];		/* Get 1st byte of the entry */
 2881              		.loc 1 1180 4 is_stmt 1 view .LVU953
1180:DRIVER/FatFs/source/ff.c **** 			wc = fs->win[bc++ % SS(fs)];		/* Get 1st byte of the entry */
 2882              		.loc 1 1180 26 is_stmt 0 view .LVU954
 2883 0026 A96A     		ldr	r1, [r5, #40]
 2884              	.LVL346:
1180:DRIVER/FatFs/source/ff.c **** 			wc = fs->win[bc++ % SS(fs)];		/* Get 1st byte of the entry */
 2885              		.loc 1 1180 44 view .LVU955
 2886 0028 AB89     		ldrh	r3, [r5, #12]
1180:DRIVER/FatFs/source/ff.c **** 			wc = fs->win[bc++ % SS(fs)];		/* Get 1st byte of the entry */
 2887              		.loc 1 1180 42 view .LVU956
 2888 002a B6FBF3F3 		udiv	r3, r6, r3
1180:DRIVER/FatFs/source/ff.c **** 			wc = fs->win[bc++ % SS(fs)];		/* Get 1st byte of the entry */
 2889              		.loc 1 1180 8 view .LVU957
 2890 002e 1944     		add	r1, r1, r3
 2891 0030 2846     		mov	r0, r5
 2892              	.LVL347:
1180:DRIVER/FatFs/source/ff.c **** 			wc = fs->win[bc++ % SS(fs)];		/* Get 1st byte of the entry */
 2893              		.loc 1 1180 8 view .LVU958
 2894 0032 FFF7FEFF 		bl	move_window
 2895              	.LVL348:
1180:DRIVER/FatFs/source/ff.c **** 			wc = fs->win[bc++ % SS(fs)];		/* Get 1st byte of the entry */
 2896              		.loc 1 1180 7 view .LVU959
 2897 0036 10B1     		cbz	r0, .L216
1175:DRIVER/FatFs/source/ff.c **** 
 2898              		.loc 1 1175 7 view .LVU960
 2899 0038 4FF0FF30 		mov	r0, #-1
 2900 003c 52E0     		b	.L202
 2901              	.L216:
1181:DRIVER/FatFs/source/ff.c **** 			if (move_window(fs, fs->fatbase + (bc / SS(fs))) != FR_OK) break;
 2902              		.loc 1 1181 4 is_stmt 1 view .LVU961
1181:DRIVER/FatFs/source/ff.c **** 			if (move_window(fs, fs->fatbase + (bc / SS(fs))) != FR_OK) break;
 2903              		.loc 1 1181 19 is_stmt 0 view .LVU962
 2904 003e 771C     		adds	r7, r6, #1
 2905              	.LVL349:
1181:DRIVER/FatFs/source/ff.c **** 			if (move_window(fs, fs->fatbase + (bc / SS(fs))) != FR_OK) break;
 2906              		.loc 1 1181 24 view .LVU963
 2907 0040 AB89     		ldrh	r3, [r5, #12]
1181:DRIVER/FatFs/source/ff.c **** 			if (move_window(fs, fs->fatbase + (bc / SS(fs))) != FR_OK) break;
 2908              		.loc 1 1181 22 view .LVU964
 2909 0042 B6FBF3F2 		udiv	r2, r6, r3
 2910 0046 03FB1266 		mls	r6, r3, r2, r6
1181:DRIVER/FatFs/source/ff.c **** 			if (move_window(fs, fs->fatbase + (bc / SS(fs))) != FR_OK) break;
 2911              		.loc 1 1181 16 view .LVU965
 2912 004a 2E44     		add	r6, r6, r5
 2913 004c 96F83860 		ldrb	r6, [r6, #56]	@ zero_extendqisi2
 2914              	.LVL350:
1182:DRIVER/FatFs/source/ff.c **** 			wc |= fs->win[bc % SS(fs)] << 8;	/* Merge 2nd byte of the entry */
 2915              		.loc 1 1182 4 is_stmt 1 view .LVU966
1182:DRIVER/FatFs/source/ff.c **** 			wc |= fs->win[bc % SS(fs)] << 8;	/* Merge 2nd byte of the entry */
 2916              		.loc 1 1182 26 is_stmt 0 view .LVU967
 2917 0050 A96A     		ldr	r1, [r5, #40]
1182:DRIVER/FatFs/source/ff.c **** 			wc |= fs->win[bc % SS(fs)] << 8;	/* Merge 2nd byte of the entry */
 2918              		.loc 1 1182 42 view .LVU968
 2919 0052 B7FBF3F3 		udiv	r3, r7, r3
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 127


1182:DRIVER/FatFs/source/ff.c **** 			wc |= fs->win[bc % SS(fs)] << 8;	/* Merge 2nd byte of the entry */
 2920              		.loc 1 1182 8 view .LVU969
 2921 0056 1944     		add	r1, r1, r3
 2922 0058 2846     		mov	r0, r5
 2923 005a FFF7FEFF 		bl	move_window
 2924              	.LVL351:
1182:DRIVER/FatFs/source/ff.c **** 			wc |= fs->win[bc % SS(fs)] << 8;	/* Merge 2nd byte of the entry */
 2925              		.loc 1 1182 7 view .LVU970
 2926 005e 0028     		cmp	r0, #0
 2927 0060 43D1     		bne	.L211
1183:DRIVER/FatFs/source/ff.c **** 			val = (clst & 1) ? (wc >> 4) : (wc & 0xFFF);	/* Adjust bit position */
 2928              		.loc 1 1183 4 is_stmt 1 view .LVU971
1183:DRIVER/FatFs/source/ff.c **** 			val = (clst & 1) ? (wc >> 4) : (wc & 0xFFF);	/* Adjust bit position */
 2929              		.loc 1 1183 23 is_stmt 0 view .LVU972
 2930 0062 AB89     		ldrh	r3, [r5, #12]
1183:DRIVER/FatFs/source/ff.c **** 			val = (clst & 1) ? (wc >> 4) : (wc & 0xFFF);	/* Adjust bit position */
 2931              		.loc 1 1183 21 view .LVU973
 2932 0064 B7FBF3F2 		udiv	r2, r7, r3
 2933 0068 03FB1277 		mls	r7, r3, r2, r7
 2934              	.LVL352:
1183:DRIVER/FatFs/source/ff.c **** 			val = (clst & 1) ? (wc >> 4) : (wc & 0xFFF);	/* Adjust bit position */
 2935              		.loc 1 1183 17 view .LVU974
 2936 006c 2F44     		add	r7, r7, r5
 2937 006e 97F83830 		ldrb	r3, [r7, #56]	@ zero_extendqisi2
1183:DRIVER/FatFs/source/ff.c **** 			val = (clst & 1) ? (wc >> 4) : (wc & 0xFFF);	/* Adjust bit position */
 2938              		.loc 1 1183 7 view .LVU975
 2939 0072 46EA0320 		orr	r0, r6, r3, lsl #8
 2940              	.LVL353:
1184:DRIVER/FatFs/source/ff.c **** 			break;
 2941              		.loc 1 1184 4 is_stmt 1 view .LVU976
1184:DRIVER/FatFs/source/ff.c **** 			break;
 2942              		.loc 1 1184 33 is_stmt 0 view .LVU977
 2943 0076 14F0010F 		tst	r4, #1
 2944 007a 01D0     		beq	.L206
1184:DRIVER/FatFs/source/ff.c **** 			break;
 2945              		.loc 1 1184 33 discriminator 1 view .LVU978
 2946 007c 0009     		lsrs	r0, r0, #4
 2947              	.LVL354:
1184:DRIVER/FatFs/source/ff.c **** 			break;
 2948              		.loc 1 1184 33 discriminator 1 view .LVU979
 2949 007e 31E0     		b	.L202
 2950              	.LVL355:
 2951              	.L206:
1184:DRIVER/FatFs/source/ff.c **** 			break;
 2952              		.loc 1 1184 33 discriminator 2 view .LVU980
 2953 0080 C0F30B00 		ubfx	r0, r0, #0, #12
 2954              	.LVL356:
1184:DRIVER/FatFs/source/ff.c **** 			break;
 2955              		.loc 1 1184 33 discriminator 2 view .LVU981
 2956 0084 2EE0     		b	.L202
 2957              	.LVL357:
 2958              	.L204:
1188:DRIVER/FatFs/source/ff.c **** 			val = ld_word(fs->win + clst * 2 % SS(fs));		/* Simple WORD array */
 2959              		.loc 1 1188 4 is_stmt 1 view .LVU982
1188:DRIVER/FatFs/source/ff.c **** 			val = ld_word(fs->win + clst * 2 % SS(fs));		/* Simple WORD array */
 2960              		.loc 1 1188 26 is_stmt 0 view .LVU983
 2961 0086 A96A     		ldr	r1, [r5, #40]
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 128


 2962              	.LVL358:
1188:DRIVER/FatFs/source/ff.c **** 			val = ld_word(fs->win + clst * 2 % SS(fs));		/* Simple WORD array */
 2963              		.loc 1 1188 47 view .LVU984
 2964 0088 AB89     		ldrh	r3, [r5, #12]
1188:DRIVER/FatFs/source/ff.c **** 			val = ld_word(fs->win + clst * 2 % SS(fs));		/* Simple WORD array */
 2965              		.loc 1 1188 54 view .LVU985
 2966 008a 5B08     		lsrs	r3, r3, #1
1188:DRIVER/FatFs/source/ff.c **** 			val = ld_word(fs->win + clst * 2 % SS(fs));		/* Simple WORD array */
 2967              		.loc 1 1188 44 view .LVU986
 2968 008c B4FBF3F3 		udiv	r3, r4, r3
1188:DRIVER/FatFs/source/ff.c **** 			val = ld_word(fs->win + clst * 2 % SS(fs));		/* Simple WORD array */
 2969              		.loc 1 1188 8 view .LVU987
 2970 0090 1944     		add	r1, r1, r3
 2971 0092 2846     		mov	r0, r5
 2972              	.LVL359:
1188:DRIVER/FatFs/source/ff.c **** 			val = ld_word(fs->win + clst * 2 % SS(fs));		/* Simple WORD array */
 2973              		.loc 1 1188 8 view .LVU988
 2974 0094 FFF7FEFF 		bl	move_window
 2975              	.LVL360:
1188:DRIVER/FatFs/source/ff.c **** 			val = ld_word(fs->win + clst * 2 % SS(fs));		/* Simple WORD array */
 2976              		.loc 1 1188 7 view .LVU989
 2977 0098 50BB     		cbnz	r0, .L212
1189:DRIVER/FatFs/source/ff.c **** 			break;
 2978              		.loc 1 1189 4 is_stmt 1 view .LVU990
1189:DRIVER/FatFs/source/ff.c **** 			break;
 2979              		.loc 1 1189 18 is_stmt 0 view .LVU991
 2980 009a 05F13800 		add	r0, r5, #56
1189:DRIVER/FatFs/source/ff.c **** 			break;
 2981              		.loc 1 1189 33 view .LVU992
 2982 009e 6400     		lsls	r4, r4, #1
 2983              	.LVL361:
1189:DRIVER/FatFs/source/ff.c **** 			break;
 2984              		.loc 1 1189 39 view .LVU993
 2985 00a0 AB89     		ldrh	r3, [r5, #12]
1189:DRIVER/FatFs/source/ff.c **** 			break;
 2986              		.loc 1 1189 37 view .LVU994
 2987 00a2 B4FBF3F2 		udiv	r2, r4, r3
 2988 00a6 03FB1244 		mls	r4, r3, r2, r4
1189:DRIVER/FatFs/source/ff.c **** 			break;
 2989              		.loc 1 1189 10 view .LVU995
 2990 00aa 2044     		add	r0, r0, r4
 2991 00ac FFF7FEFF 		bl	ld_word
 2992              	.LVL362:
1190:DRIVER/FatFs/source/ff.c **** 
 2993              		.loc 1 1190 4 is_stmt 1 view .LVU996
 2994 00b0 18E0     		b	.L202
 2995              	.LVL363:
 2996              	.L205:
1193:DRIVER/FatFs/source/ff.c **** 			val = ld_dword(fs->win + clst * 4 % SS(fs)) & 0x0FFFFFFF;	/* Simple DWORD array but mask out upp
 2997              		.loc 1 1193 4 view .LVU997
1193:DRIVER/FatFs/source/ff.c **** 			val = ld_dword(fs->win + clst * 4 % SS(fs)) & 0x0FFFFFFF;	/* Simple DWORD array but mask out upp
 2998              		.loc 1 1193 26 is_stmt 0 view .LVU998
 2999 00b2 A96A     		ldr	r1, [r5, #40]
 3000              	.LVL364:
1193:DRIVER/FatFs/source/ff.c **** 			val = ld_dword(fs->win + clst * 4 % SS(fs)) & 0x0FFFFFFF;	/* Simple DWORD array but mask out upp
 3001              		.loc 1 1193 47 view .LVU999
 3002 00b4 AB89     		ldrh	r3, [r5, #12]
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 129


1193:DRIVER/FatFs/source/ff.c **** 			val = ld_dword(fs->win + clst * 4 % SS(fs)) & 0x0FFFFFFF;	/* Simple DWORD array but mask out upp
 3003              		.loc 1 1193 54 view .LVU1000
 3004 00b6 9B08     		lsrs	r3, r3, #2
1193:DRIVER/FatFs/source/ff.c **** 			val = ld_dword(fs->win + clst * 4 % SS(fs)) & 0x0FFFFFFF;	/* Simple DWORD array but mask out upp
 3005              		.loc 1 1193 44 view .LVU1001
 3006 00b8 B4FBF3F3 		udiv	r3, r4, r3
1193:DRIVER/FatFs/source/ff.c **** 			val = ld_dword(fs->win + clst * 4 % SS(fs)) & 0x0FFFFFFF;	/* Simple DWORD array but mask out upp
 3007              		.loc 1 1193 8 view .LVU1002
 3008 00bc 1944     		add	r1, r1, r3
 3009 00be 2846     		mov	r0, r5
 3010              	.LVL365:
1193:DRIVER/FatFs/source/ff.c **** 			val = ld_dword(fs->win + clst * 4 % SS(fs)) & 0x0FFFFFFF;	/* Simple DWORD array but mask out upp
 3011              		.loc 1 1193 8 view .LVU1003
 3012 00c0 FFF7FEFF 		bl	move_window
 3013              	.LVL366:
1193:DRIVER/FatFs/source/ff.c **** 			val = ld_dword(fs->win + clst * 4 % SS(fs)) & 0x0FFFFFFF;	/* Simple DWORD array but mask out upp
 3014              		.loc 1 1193 7 view .LVU1004
 3015 00c4 B8B9     		cbnz	r0, .L213
1194:DRIVER/FatFs/source/ff.c **** 			break;
 3016              		.loc 1 1194 4 is_stmt 1 view .LVU1005
1194:DRIVER/FatFs/source/ff.c **** 			break;
 3017              		.loc 1 1194 19 is_stmt 0 view .LVU1006
 3018 00c6 05F13800 		add	r0, r5, #56
1194:DRIVER/FatFs/source/ff.c **** 			break;
 3019              		.loc 1 1194 34 view .LVU1007
 3020 00ca A400     		lsls	r4, r4, #2
 3021              	.LVL367:
1194:DRIVER/FatFs/source/ff.c **** 			break;
 3022              		.loc 1 1194 40 view .LVU1008
 3023 00cc AB89     		ldrh	r3, [r5, #12]
1194:DRIVER/FatFs/source/ff.c **** 			break;
 3024              		.loc 1 1194 38 view .LVU1009
 3025 00ce B4FBF3F2 		udiv	r2, r4, r3
 3026 00d2 03FB1244 		mls	r4, r3, r2, r4
1194:DRIVER/FatFs/source/ff.c **** 			break;
 3027              		.loc 1 1194 10 view .LVU1010
 3028 00d6 2044     		add	r0, r0, r4
 3029 00d8 FFF7FEFF 		bl	ld_dword
 3030              	.LVL368:
1194:DRIVER/FatFs/source/ff.c **** 			break;
 3031              		.loc 1 1194 8 view .LVU1011
 3032 00dc 20F07040 		bic	r0, r0, #-268435456
 3033              	.LVL369:
1195:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
 3034              		.loc 1 1195 4 is_stmt 1 view .LVU1012
 3035 00e0 00E0     		b	.L202
 3036              	.LVL370:
 3037              	.L207:
1172:DRIVER/FatFs/source/ff.c **** 
 3038              		.loc 1 1172 7 is_stmt 0 view .LVU1013
 3039 00e2 0120     		movs	r0, #1
 3040              	.LVL371:
 3041              	.L202:
1229:DRIVER/FatFs/source/ff.c **** 
 3042              		.loc 1 1229 1 view .LVU1014
 3043 00e4 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 3044              	.LVL372:
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 130


 3045              	.L208:
1172:DRIVER/FatFs/source/ff.c **** 
 3046              		.loc 1 1172 7 view .LVU1015
 3047 00e6 0120     		movs	r0, #1
 3048              	.LVL373:
1172:DRIVER/FatFs/source/ff.c **** 
 3049              		.loc 1 1172 7 view .LVU1016
 3050 00e8 FCE7     		b	.L202
 3051              	.LVL374:
 3052              	.L211:
1175:DRIVER/FatFs/source/ff.c **** 
 3053              		.loc 1 1175 7 view .LVU1017
 3054 00ea 4FF0FF30 		mov	r0, #-1
 3055 00ee F9E7     		b	.L202
 3056              	.LVL375:
 3057              	.L212:
1175:DRIVER/FatFs/source/ff.c **** 
 3058              		.loc 1 1175 7 view .LVU1018
 3059 00f0 4FF0FF30 		mov	r0, #-1
 3060 00f4 F6E7     		b	.L202
 3061              	.L213:
1175:DRIVER/FatFs/source/ff.c **** 
 3062              		.loc 1 1175 7 view .LVU1019
 3063 00f6 4FF0FF30 		mov	r0, #-1
1228:DRIVER/FatFs/source/ff.c **** }
 3064              		.loc 1 1228 2 is_stmt 1 view .LVU1020
1228:DRIVER/FatFs/source/ff.c **** }
 3065              		.loc 1 1228 9 is_stmt 0 view .LVU1021
 3066 00fa F3E7     		b	.L202
 3067              		.cfi_endproc
 3068              	.LFE12:
 3070              		.section	.text.dir_sdi,"ax",%progbits
 3071              		.align	1
 3072              		.syntax unified
 3073              		.thumb
 3074              		.thumb_func
 3076              	dir_sdi:
 3077              	.LVL376:
 3078              	.LFB17:
1701:DRIVER/FatFs/source/ff.c **** 	DWORD csz, clst;
 3079              		.loc 1 1701 1 is_stmt 1 view -0
 3080              		.cfi_startproc
 3081              		@ args = 0, pretend = 0, frame = 0
 3082              		@ frame_needed = 0, uses_anonymous_args = 0
1701:DRIVER/FatFs/source/ff.c **** 	DWORD csz, clst;
 3083              		.loc 1 1701 1 is_stmt 0 view .LVU1023
 3084 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 3085              	.LCFI18:
 3086              		.cfi_def_cfa_offset 24
 3087              		.cfi_offset 4, -24
 3088              		.cfi_offset 5, -20
 3089              		.cfi_offset 6, -16
 3090              		.cfi_offset 7, -12
 3091              		.cfi_offset 8, -8
 3092              		.cfi_offset 14, -4
1702:DRIVER/FatFs/source/ff.c **** 	FATFS *fs = dp->obj.fs;
 3093              		.loc 1 1702 2 is_stmt 1 view .LVU1024
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 131


1703:DRIVER/FatFs/source/ff.c **** 
 3094              		.loc 1 1703 2 view .LVU1025
1703:DRIVER/FatFs/source/ff.c **** 
 3095              		.loc 1 1703 9 is_stmt 0 view .LVU1026
 3096 0004 D0F80080 		ldr	r8, [r0]
 3097              	.LVL377:
1706:DRIVER/FatFs/source/ff.c **** 		return FR_INT_ERR;
 3098              		.loc 1 1706 2 is_stmt 1 view .LVU1027
1706:DRIVER/FatFs/source/ff.c **** 		return FR_INT_ERR;
 3099              		.loc 1 1706 5 is_stmt 0 view .LVU1028
 3100 0008 B1F5001F 		cmp	r1, #2097152
 3101 000c 49D2     		bcs	.L224
 3102 000e 0746     		mov	r7, r0
 3103 0010 0E46     		mov	r6, r1
1706:DRIVER/FatFs/source/ff.c **** 		return FR_INT_ERR;
 3104              		.loc 1 1706 86 discriminator 1 view .LVU1029
 3105 0012 11F01F0F 		tst	r1, #31
 3106 0016 47D1     		bne	.L225
1709:DRIVER/FatFs/source/ff.c **** 	clst = dp->obj.sclust;		/* Table start cluster (0:root) */
 3107              		.loc 1 1709 2 is_stmt 1 view .LVU1030
1709:DRIVER/FatFs/source/ff.c **** 	clst = dp->obj.sclust;		/* Table start cluster (0:root) */
 3108              		.loc 1 1709 11 is_stmt 0 view .LVU1031
 3109 0018 0161     		str	r1, [r0, #16]
1710:DRIVER/FatFs/source/ff.c **** 	if (clst == 0 && fs->fs_type >= FS_FAT32) {	/* Replace cluster# 0 with root cluster# */
 3110              		.loc 1 1710 2 is_stmt 1 view .LVU1032
1710:DRIVER/FatFs/source/ff.c **** 	if (clst == 0 && fs->fs_type >= FS_FAT32) {	/* Replace cluster# 0 with root cluster# */
 3111              		.loc 1 1710 7 is_stmt 0 view .LVU1033
 3112 001a 8468     		ldr	r4, [r0, #8]
 3113              	.LVL378:
1711:DRIVER/FatFs/source/ff.c **** 		clst = (DWORD)fs->dirbase;
 3114              		.loc 1 1711 2 is_stmt 1 view .LVU1034
1711:DRIVER/FatFs/source/ff.c **** 		clst = (DWORD)fs->dirbase;
 3115              		.loc 1 1711 5 is_stmt 0 view .LVU1035
 3116 001c 1CBB     		cbnz	r4, .L219
1711:DRIVER/FatFs/source/ff.c **** 		clst = (DWORD)fs->dirbase;
 3117              		.loc 1 1711 21 discriminator 1 view .LVU1036
 3118 001e 98F80030 		ldrb	r3, [r8]	@ zero_extendqisi2
1711:DRIVER/FatFs/source/ff.c **** 		clst = (DWORD)fs->dirbase;
 3119              		.loc 1 1711 16 discriminator 1 view .LVU1037
 3120 0022 022B     		cmp	r3, #2
 3121 0024 01D9     		bls	.L220
1712:DRIVER/FatFs/source/ff.c **** 		if (FF_FS_EXFAT) dp->obj.stat = 0;	/* exFAT: Root dir has an FAT chain */
 3122              		.loc 1 1712 3 is_stmt 1 view .LVU1038
1712:DRIVER/FatFs/source/ff.c **** 		if (FF_FS_EXFAT) dp->obj.stat = 0;	/* exFAT: Root dir has an FAT chain */
 3123              		.loc 1 1712 8 is_stmt 0 view .LVU1039
 3124 0026 D8F82C40 		ldr	r4, [r8, #44]
 3125              	.LVL379:
1713:DRIVER/FatFs/source/ff.c **** 	}
 3126              		.loc 1 1713 3 is_stmt 1 view .LVU1040
 3127              	.L220:
1716:DRIVER/FatFs/source/ff.c **** 		if (ofs / SZDIRE >= fs->n_rootdir) return FR_INT_ERR;	/* Is index out of range? */
 3128              		.loc 1 1716 2 view .LVU1041
1716:DRIVER/FatFs/source/ff.c **** 		if (ofs / SZDIRE >= fs->n_rootdir) return FR_INT_ERR;	/* Is index out of range? */
 3129              		.loc 1 1716 5 is_stmt 0 view .LVU1042
 3130 002a E4B9     		cbnz	r4, .L219
1717:DRIVER/FatFs/source/ff.c **** 		dp->sect = fs->dirbase;
 3131              		.loc 1 1717 3 is_stmt 1 view .LVU1043
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 132


1717:DRIVER/FatFs/source/ff.c **** 		dp->sect = fs->dirbase;
 3132              		.loc 1 1717 25 is_stmt 0 view .LVU1044
 3133 002c B8F80830 		ldrh	r3, [r8, #8]
1717:DRIVER/FatFs/source/ff.c **** 		dp->sect = fs->dirbase;
 3134              		.loc 1 1717 6 view .LVU1045
 3135 0030 B3EB561F 		cmp	r3, r6, lsr #5
 3136 0034 3AD9     		bls	.L226
1718:DRIVER/FatFs/source/ff.c **** 
 3137              		.loc 1 1718 3 is_stmt 1 view .LVU1046
1718:DRIVER/FatFs/source/ff.c **** 
 3138              		.loc 1 1718 16 is_stmt 0 view .LVU1047
 3139 0036 D8F82C30 		ldr	r3, [r8, #44]
1718:DRIVER/FatFs/source/ff.c **** 
 3140              		.loc 1 1718 12 view .LVU1048
 3141 003a BB61     		str	r3, [r7, #24]
 3142              	.LVL380:
 3143              	.L221:
1730:DRIVER/FatFs/source/ff.c **** 	if (dp->sect == 0) return FR_INT_ERR;
 3144              		.loc 1 1730 2 is_stmt 1 view .LVU1049
1730:DRIVER/FatFs/source/ff.c **** 	if (dp->sect == 0) return FR_INT_ERR;
 3145              		.loc 1 1730 12 is_stmt 0 view .LVU1050
 3146 003c 7C61     		str	r4, [r7, #20]
1731:DRIVER/FatFs/source/ff.c **** 	dp->sect += ofs / SS(fs);			/* Sector# of the directory entry */
 3147              		.loc 1 1731 2 is_stmt 1 view .LVU1051
1731:DRIVER/FatFs/source/ff.c **** 	dp->sect += ofs / SS(fs);			/* Sector# of the directory entry */
 3148              		.loc 1 1731 8 is_stmt 0 view .LVU1052
 3149 003e BB69     		ldr	r3, [r7, #24]
1731:DRIVER/FatFs/source/ff.c **** 	dp->sect += ofs / SS(fs);			/* Sector# of the directory entry */
 3150              		.loc 1 1731 5 view .LVU1053
 3151 0040 E3B3     		cbz	r3, .L230
1732:DRIVER/FatFs/source/ff.c **** 	dp->dir = fs->win + (ofs % SS(fs));	/* Pointer to the entry in the win[] */
 3152              		.loc 1 1732 2 is_stmt 1 view .LVU1054
1732:DRIVER/FatFs/source/ff.c **** 	dp->dir = fs->win + (ofs % SS(fs));	/* Pointer to the entry in the win[] */
 3153              		.loc 1 1732 20 is_stmt 0 view .LVU1055
 3154 0042 B8F80C20 		ldrh	r2, [r8, #12]
1732:DRIVER/FatFs/source/ff.c **** 	dp->dir = fs->win + (ofs % SS(fs));	/* Pointer to the entry in the win[] */
 3155              		.loc 1 1732 18 view .LVU1056
 3156 0046 B6FBF2F2 		udiv	r2, r6, r2
1732:DRIVER/FatFs/source/ff.c **** 	dp->dir = fs->win + (ofs % SS(fs));	/* Pointer to the entry in the win[] */
 3157              		.loc 1 1732 11 view .LVU1057
 3158 004a 1344     		add	r3, r3, r2
 3159 004c BB61     		str	r3, [r7, #24]
1733:DRIVER/FatFs/source/ff.c **** 
 3160              		.loc 1 1733 2 is_stmt 1 view .LVU1058
1733:DRIVER/FatFs/source/ff.c **** 
 3161              		.loc 1 1733 12 is_stmt 0 view .LVU1059
 3162 004e 08F13803 		add	r3, r8, #56
1733:DRIVER/FatFs/source/ff.c **** 
 3163              		.loc 1 1733 29 view .LVU1060
 3164 0052 B8F80C20 		ldrh	r2, [r8, #12]
1733:DRIVER/FatFs/source/ff.c **** 
 3165              		.loc 1 1733 27 view .LVU1061
 3166 0056 B6FBF2F1 		udiv	r1, r6, r2
 3167 005a 02FB1161 		mls	r1, r2, r1, r6
1733:DRIVER/FatFs/source/ff.c **** 
 3168              		.loc 1 1733 20 view .LVU1062
 3169 005e 0B44     		add	r3, r3, r1
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 133


1733:DRIVER/FatFs/source/ff.c **** 
 3170              		.loc 1 1733 10 view .LVU1063
 3171 0060 FB61     		str	r3, [r7, #28]
1735:DRIVER/FatFs/source/ff.c **** }
 3172              		.loc 1 1735 2 is_stmt 1 view .LVU1064
1735:DRIVER/FatFs/source/ff.c **** }
 3173              		.loc 1 1735 9 is_stmt 0 view .LVU1065
 3174 0062 0020     		movs	r0, #0
 3175 0064 1EE0     		b	.L218
 3176              	.LVL381:
 3177              	.L219:
1721:DRIVER/FatFs/source/ff.c **** 		while (ofs >= csz) {				/* Follow cluster chain */
 3178              		.loc 1 1721 3 is_stmt 1 view .LVU1066
1721:DRIVER/FatFs/source/ff.c **** 		while (ofs >= csz) {				/* Follow cluster chain */
 3179              		.loc 1 1721 18 is_stmt 0 view .LVU1067
 3180 0066 B8F80A50 		ldrh	r5, [r8, #10]
1721:DRIVER/FatFs/source/ff.c **** 		while (ofs >= csz) {				/* Follow cluster chain */
 3181              		.loc 1 1721 28 view .LVU1068
 3182 006a B8F80C30 		ldrh	r3, [r8, #12]
1721:DRIVER/FatFs/source/ff.c **** 		while (ofs >= csz) {				/* Follow cluster chain */
 3183              		.loc 1 1721 7 view .LVU1069
 3184 006e 03FB05F5 		mul	r5, r3, r5
 3185              	.LVL382:
1722:DRIVER/FatFs/source/ff.c **** 			clst = get_fat(&dp->obj, clst);				/* Get next cluster */
 3186              		.loc 1 1722 3 is_stmt 1 view .LVU1070
 3187              	.L222:
1722:DRIVER/FatFs/source/ff.c **** 			clst = get_fat(&dp->obj, clst);				/* Get next cluster */
 3188              		.loc 1 1722 14 view .LVU1071
 3189 0072 AE42     		cmp	r6, r5
 3190 0074 0FD3     		bcc	.L232
1723:DRIVER/FatFs/source/ff.c **** 			if (clst == 0xFFFFFFFF) return FR_DISK_ERR;	/* Disk error */
 3191              		.loc 1 1723 4 view .LVU1072
1723:DRIVER/FatFs/source/ff.c **** 			if (clst == 0xFFFFFFFF) return FR_DISK_ERR;	/* Disk error */
 3192              		.loc 1 1723 11 is_stmt 0 view .LVU1073
 3193 0076 2146     		mov	r1, r4
 3194 0078 3846     		mov	r0, r7
 3195 007a FFF7FEFF 		bl	get_fat
 3196              	.LVL383:
 3197 007e 0446     		mov	r4, r0
 3198              	.LVL384:
1724:DRIVER/FatFs/source/ff.c **** 			if (clst < 2 || clst >= fs->n_fatent) return FR_INT_ERR;	/* Reached to end of table or internal 
 3199              		.loc 1 1724 4 is_stmt 1 view .LVU1074
1724:DRIVER/FatFs/source/ff.c **** 			if (clst < 2 || clst >= fs->n_fatent) return FR_INT_ERR;	/* Reached to end of table or internal 
 3200              		.loc 1 1724 7 is_stmt 0 view .LVU1075
 3201 0080 B0F1FF3F 		cmp	r0, #-1
 3202 0084 14D0     		beq	.L227
1725:DRIVER/FatFs/source/ff.c **** 			ofs -= csz;
 3203              		.loc 1 1725 4 is_stmt 1 view .LVU1076
1725:DRIVER/FatFs/source/ff.c **** 			ofs -= csz;
 3204              		.loc 1 1725 7 is_stmt 0 view .LVU1077
 3205 0086 0128     		cmp	r0, #1
 3206 0088 14D9     		bls	.L228
1725:DRIVER/FatFs/source/ff.c **** 			ofs -= csz;
 3207              		.loc 1 1725 30 discriminator 2 view .LVU1078
 3208 008a D8F81C30 		ldr	r3, [r8, #28]
1725:DRIVER/FatFs/source/ff.c **** 			ofs -= csz;
 3209              		.loc 1 1725 17 discriminator 2 view .LVU1079
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 134


 3210 008e 8342     		cmp	r3, r0
 3211 0090 12D9     		bls	.L229
1726:DRIVER/FatFs/source/ff.c **** 		}
 3212              		.loc 1 1726 4 is_stmt 1 view .LVU1080
1726:DRIVER/FatFs/source/ff.c **** 		}
 3213              		.loc 1 1726 8 is_stmt 0 view .LVU1081
 3214 0092 761B     		subs	r6, r6, r5
 3215              	.LVL385:
1726:DRIVER/FatFs/source/ff.c **** 		}
 3216              		.loc 1 1726 8 view .LVU1082
 3217 0094 EDE7     		b	.L222
 3218              	.LVL386:
 3219              	.L232:
1728:DRIVER/FatFs/source/ff.c **** 	}
 3220              		.loc 1 1728 3 is_stmt 1 view .LVU1083
1728:DRIVER/FatFs/source/ff.c **** 	}
 3221              		.loc 1 1728 14 is_stmt 0 view .LVU1084
 3222 0096 2146     		mov	r1, r4
 3223 0098 4046     		mov	r0, r8
 3224 009a FFF7FEFF 		bl	clst2sect
 3225              	.LVL387:
1728:DRIVER/FatFs/source/ff.c **** 	}
 3226              		.loc 1 1728 12 view .LVU1085
 3227 009e B861     		str	r0, [r7, #24]
 3228 00a0 CCE7     		b	.L221
 3229              	.LVL388:
 3230              	.L224:
1707:DRIVER/FatFs/source/ff.c **** 	}
 3231              		.loc 1 1707 10 view .LVU1086
 3232 00a2 0220     		movs	r0, #2
 3233              	.LVL389:
 3234              	.L218:
1736:DRIVER/FatFs/source/ff.c **** 
 3235              		.loc 1 1736 1 view .LVU1087
 3236 00a4 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 3237              	.LVL390:
 3238              	.L225:
1707:DRIVER/FatFs/source/ff.c **** 	}
 3239              		.loc 1 1707 10 view .LVU1088
 3240 00a8 0220     		movs	r0, #2
 3241              	.LVL391:
1707:DRIVER/FatFs/source/ff.c **** 	}
 3242              		.loc 1 1707 10 view .LVU1089
 3243 00aa FBE7     		b	.L218
 3244              	.LVL392:
 3245              	.L226:
1717:DRIVER/FatFs/source/ff.c **** 		dp->sect = fs->dirbase;
 3246              		.loc 1 1717 45 view .LVU1090
 3247 00ac 0220     		movs	r0, #2
 3248              	.LVL393:
1717:DRIVER/FatFs/source/ff.c **** 		dp->sect = fs->dirbase;
 3249              		.loc 1 1717 45 view .LVU1091
 3250 00ae F9E7     		b	.L218
 3251              	.LVL394:
 3252              	.L227:
1724:DRIVER/FatFs/source/ff.c **** 			if (clst < 2 || clst >= fs->n_fatent) return FR_INT_ERR;	/* Reached to end of table or internal 
 3253              		.loc 1 1724 35 view .LVU1092
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 135


 3254 00b0 0120     		movs	r0, #1
 3255              	.LVL395:
1724:DRIVER/FatFs/source/ff.c **** 			if (clst < 2 || clst >= fs->n_fatent) return FR_INT_ERR;	/* Reached to end of table or internal 
 3256              		.loc 1 1724 35 view .LVU1093
 3257 00b2 F7E7     		b	.L218
 3258              	.LVL396:
 3259              	.L228:
1725:DRIVER/FatFs/source/ff.c **** 			ofs -= csz;
 3260              		.loc 1 1725 49 view .LVU1094
 3261 00b4 0220     		movs	r0, #2
 3262              	.LVL397:
1725:DRIVER/FatFs/source/ff.c **** 			ofs -= csz;
 3263              		.loc 1 1725 49 view .LVU1095
 3264 00b6 F5E7     		b	.L218
 3265              	.LVL398:
 3266              	.L229:
1725:DRIVER/FatFs/source/ff.c **** 			ofs -= csz;
 3267              		.loc 1 1725 49 view .LVU1096
 3268 00b8 0220     		movs	r0, #2
 3269              	.LVL399:
1725:DRIVER/FatFs/source/ff.c **** 			ofs -= csz;
 3270              		.loc 1 1725 49 view .LVU1097
 3271 00ba F3E7     		b	.L218
 3272              	.LVL400:
 3273              	.L230:
1731:DRIVER/FatFs/source/ff.c **** 	dp->sect += ofs / SS(fs);			/* Sector# of the directory entry */
 3274              		.loc 1 1731 28 view .LVU1098
 3275 00bc 0220     		movs	r0, #2
 3276 00be F1E7     		b	.L218
 3277              		.cfi_endproc
 3278              	.LFE17:
 3280              		.section	.text.create_chain,"ax",%progbits
 3281              		.align	1
 3282              		.syntax unified
 3283              		.thumb
 3284              		.thumb_func
 3286              	create_chain:
 3287              	.LVL401:
 3288              	.LFB15:
1528:DRIVER/FatFs/source/ff.c **** 	DWORD cs, ncl, scl;
 3289              		.loc 1 1528 1 is_stmt 1 view -0
 3290              		.cfi_startproc
 3291              		@ args = 0, pretend = 0, frame = 0
 3292              		@ frame_needed = 0, uses_anonymous_args = 0
1528:DRIVER/FatFs/source/ff.c **** 	DWORD cs, ncl, scl;
 3293              		.loc 1 1528 1 is_stmt 0 view .LVU1100
 3294 0000 2DE9F843 		push	{r3, r4, r5, r6, r7, r8, r9, lr}
 3295              	.LCFI19:
 3296              		.cfi_def_cfa_offset 32
 3297              		.cfi_offset 3, -32
 3298              		.cfi_offset 4, -28
 3299              		.cfi_offset 5, -24
 3300              		.cfi_offset 6, -20
 3301              		.cfi_offset 7, -16
 3302              		.cfi_offset 8, -12
 3303              		.cfi_offset 9, -8
 3304              		.cfi_offset 14, -4
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 136


 3305 0004 0646     		mov	r6, r0
1529:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
 3306              		.loc 1 1529 2 is_stmt 1 view .LVU1101
1530:DRIVER/FatFs/source/ff.c **** 	FATFS *fs = obj->fs;
 3307              		.loc 1 1530 2 view .LVU1102
1531:DRIVER/FatFs/source/ff.c **** 
 3308              		.loc 1 1531 2 view .LVU1103
1531:DRIVER/FatFs/source/ff.c **** 
 3309              		.loc 1 1531 9 is_stmt 0 view .LVU1104
 3310 0006 0768     		ldr	r7, [r0]
 3311              	.LVL402:
1534:DRIVER/FatFs/source/ff.c **** 		scl = fs->last_clst;				/* Suggested cluster to start to find */
 3312              		.loc 1 1534 2 is_stmt 1 view .LVU1105
1534:DRIVER/FatFs/source/ff.c **** 		scl = fs->last_clst;				/* Suggested cluster to start to find */
 3313              		.loc 1 1534 5 is_stmt 0 view .LVU1106
 3314 0008 8846     		mov	r8, r1
 3315 000a 31B9     		cbnz	r1, .L234
1535:DRIVER/FatFs/source/ff.c **** 		if (scl == 0 || scl >= fs->n_fatent) scl = 1;
 3316              		.loc 1 1535 3 is_stmt 1 view .LVU1107
1535:DRIVER/FatFs/source/ff.c **** 		if (scl == 0 || scl >= fs->n_fatent) scl = 1;
 3317              		.loc 1 1535 7 is_stmt 0 view .LVU1108
 3318 000c 7D69     		ldr	r5, [r7, #20]
 3319              	.LVL403:
1536:DRIVER/FatFs/source/ff.c **** 	}
 3320              		.loc 1 1536 3 is_stmt 1 view .LVU1109
1536:DRIVER/FatFs/source/ff.c **** 	}
 3321              		.loc 1 1536 6 is_stmt 0 view .LVU1110
 3322 000e 8DB1     		cbz	r5, .L245
1536:DRIVER/FatFs/source/ff.c **** 	}
 3323              		.loc 1 1536 28 discriminator 2 view .LVU1111
 3324 0010 FB69     		ldr	r3, [r7, #28]
1536:DRIVER/FatFs/source/ff.c **** 	}
 3325              		.loc 1 1536 16 discriminator 2 view .LVU1112
 3326 0012 AB42     		cmp	r3, r5
 3327 0014 0FD8     		bhi	.L235
1536:DRIVER/FatFs/source/ff.c **** 	}
 3328              		.loc 1 1536 44 view .LVU1113
 3329 0016 0125     		movs	r5, #1
 3330              	.LVL404:
1536:DRIVER/FatFs/source/ff.c **** 	}
 3331              		.loc 1 1536 44 view .LVU1114
 3332 0018 0DE0     		b	.L235
 3333              	.LVL405:
 3334              	.L234:
1539:DRIVER/FatFs/source/ff.c **** 		if (cs < 2) return 1;				/* Test for insanity */
 3335              		.loc 1 1539 3 is_stmt 1 view .LVU1115
1539:DRIVER/FatFs/source/ff.c **** 		if (cs < 2) return 1;				/* Test for insanity */
 3336              		.loc 1 1539 8 is_stmt 0 view .LVU1116
 3337 001a FFF7FEFF 		bl	get_fat
 3338              	.LVL406:
1539:DRIVER/FatFs/source/ff.c **** 		if (cs < 2) return 1;				/* Test for insanity */
 3339              		.loc 1 1539 8 view .LVU1117
 3340 001e 0346     		mov	r3, r0
 3341              	.LVL407:
1540:DRIVER/FatFs/source/ff.c **** 		if (cs == 0xFFFFFFFF) return cs;	/* Test for disk error */
 3342              		.loc 1 1540 3 is_stmt 1 view .LVU1118
1540:DRIVER/FatFs/source/ff.c **** 		if (cs == 0xFFFFFFFF) return cs;	/* Test for disk error */
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 137


 3343              		.loc 1 1540 6 is_stmt 0 view .LVU1119
 3344 0020 0128     		cmp	r0, #1
 3345 0022 78D9     		bls	.L247
1541:DRIVER/FatFs/source/ff.c **** 		if (cs < fs->n_fatent) return cs;	/* It is already followed by next cluster */
 3346              		.loc 1 1541 3 is_stmt 1 view .LVU1120
1541:DRIVER/FatFs/source/ff.c **** 		if (cs < fs->n_fatent) return cs;	/* It is already followed by next cluster */
 3347              		.loc 1 1541 6 is_stmt 0 view .LVU1121
 3348 0024 B0F1FF3F 		cmp	r0, #-1
 3349 0028 6FD0     		beq	.L233
1542:DRIVER/FatFs/source/ff.c **** 		scl = clst;							/* Cluster to start to find */
 3350              		.loc 1 1542 3 is_stmt 1 view .LVU1122
1542:DRIVER/FatFs/source/ff.c **** 		scl = clst;							/* Cluster to start to find */
 3351              		.loc 1 1542 14 is_stmt 0 view .LVU1123
 3352 002a FA69     		ldr	r2, [r7, #28]
1542:DRIVER/FatFs/source/ff.c **** 		scl = clst;							/* Cluster to start to find */
 3353              		.loc 1 1542 6 view .LVU1124
 3354 002c 8242     		cmp	r2, r0
 3355 002e 6CD8     		bhi	.L233
1543:DRIVER/FatFs/source/ff.c **** 	}
 3356              		.loc 1 1543 7 view .LVU1125
 3357 0030 4546     		mov	r5, r8
 3358 0032 00E0     		b	.L235
 3359              	.LVL408:
 3360              	.L245:
1536:DRIVER/FatFs/source/ff.c **** 	}
 3361              		.loc 1 1536 44 view .LVU1126
 3362 0034 0125     		movs	r5, #1
 3363              	.LVL409:
 3364              	.L235:
1545:DRIVER/FatFs/source/ff.c **** 
 3365              		.loc 1 1545 2 is_stmt 1 view .LVU1127
1545:DRIVER/FatFs/source/ff.c **** 
 3366              		.loc 1 1545 8 is_stmt 0 view .LVU1128
 3367 0036 BB69     		ldr	r3, [r7, #24]
1545:DRIVER/FatFs/source/ff.c **** 
 3368              		.loc 1 1545 5 view .LVU1129
 3369 0038 002B     		cmp	r3, #0
 3370 003a 66D0     		beq	.L233
1574:DRIVER/FatFs/source/ff.c **** 		if (scl == clst) {						/* Stretching an existing chain? */
 3371              		.loc 1 1574 3 is_stmt 1 view .LVU1130
 3372              	.LVL410:
1575:DRIVER/FatFs/source/ff.c **** 			ncl = scl + 1;						/* Test if next cluster is free */
 3373              		.loc 1 1575 3 view .LVU1131
1575:DRIVER/FatFs/source/ff.c **** 			ncl = scl + 1;						/* Test if next cluster is free */
 3374              		.loc 1 1575 6 is_stmt 0 view .LVU1132
 3375 003c 4545     		cmp	r5, r8
 3376 003e 06D0     		beq	.L257
1574:DRIVER/FatFs/source/ff.c **** 		if (scl == clst) {						/* Stretching an existing chain? */
 3377              		.loc 1 1574 7 view .LVU1133
 3378 0040 4FF00009 		mov	r9, #0
 3379              	.LVL411:
 3380              	.L237:
1586:DRIVER/FatFs/source/ff.c **** 			ncl = scl;	/* Start cluster */
 3381              		.loc 1 1586 3 is_stmt 1 view .LVU1134
1586:DRIVER/FatFs/source/ff.c **** 			ncl = scl;	/* Start cluster */
 3382              		.loc 1 1586 6 is_stmt 0 view .LVU1135
 3383 0044 B9F1000F 		cmp	r9, #0
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 138


 3384 0048 3AD1     		bne	.L239
1587:DRIVER/FatFs/source/ff.c **** 			for (;;) {
 3385              		.loc 1 1587 8 view .LVU1136
 3386 004a 2C46     		mov	r4, r5
 3387 004c 2FE0     		b	.L241
 3388              	.LVL412:
 3389              	.L257:
1576:DRIVER/FatFs/source/ff.c **** 			if (ncl >= fs->n_fatent) ncl = 2;
 3390              		.loc 1 1576 4 is_stmt 1 view .LVU1137
1576:DRIVER/FatFs/source/ff.c **** 			if (ncl >= fs->n_fatent) ncl = 2;
 3391              		.loc 1 1576 8 is_stmt 0 view .LVU1138
 3392 004e 05F10109 		add	r9, r5, #1
 3393              	.LVL413:
1577:DRIVER/FatFs/source/ff.c **** 			cs = get_fat(obj, ncl);				/* Get next cluster status */
 3394              		.loc 1 1577 4 is_stmt 1 view .LVU1139
1577:DRIVER/FatFs/source/ff.c **** 			cs = get_fat(obj, ncl);				/* Get next cluster status */
 3395              		.loc 1 1577 17 is_stmt 0 view .LVU1140
 3396 0052 FB69     		ldr	r3, [r7, #28]
1577:DRIVER/FatFs/source/ff.c **** 			cs = get_fat(obj, ncl);				/* Get next cluster status */
 3397              		.loc 1 1577 7 view .LVU1141
 3398 0054 4B45     		cmp	r3, r9
 3399 0056 01D8     		bhi	.L238
1577:DRIVER/FatFs/source/ff.c **** 			cs = get_fat(obj, ncl);				/* Get next cluster status */
 3400              		.loc 1 1577 33 view .LVU1142
 3401 0058 4FF00209 		mov	r9, #2
 3402              	.LVL414:
 3403              	.L238:
1578:DRIVER/FatFs/source/ff.c **** 			if (cs == 1 || cs == 0xFFFFFFFF) return cs;	/* Test for error */
 3404              		.loc 1 1578 4 is_stmt 1 view .LVU1143
1578:DRIVER/FatFs/source/ff.c **** 			if (cs == 1 || cs == 0xFFFFFFFF) return cs;	/* Test for error */
 3405              		.loc 1 1578 9 is_stmt 0 view .LVU1144
 3406 005c 4946     		mov	r1, r9
 3407 005e 3046     		mov	r0, r6
 3408 0060 FFF7FEFF 		bl	get_fat
 3409              	.LVL415:
 3410 0064 0346     		mov	r3, r0
 3411              	.LVL416:
1579:DRIVER/FatFs/source/ff.c **** 			if (cs != 0) {						/* Not free? */
 3412              		.loc 1 1579 4 is_stmt 1 view .LVU1145
1579:DRIVER/FatFs/source/ff.c **** 			if (cs != 0) {						/* Not free? */
 3413              		.loc 1 1579 7 is_stmt 0 view .LVU1146
 3414 0066 0128     		cmp	r0, #1
 3415 0068 4FD0     		beq	.L233
1579:DRIVER/FatFs/source/ff.c **** 			if (cs != 0) {						/* Not free? */
 3416              		.loc 1 1579 16 discriminator 2 view .LVU1147
 3417 006a B0F1FF3F 		cmp	r0, #-1
 3418 006e 4CD0     		beq	.L233
1580:DRIVER/FatFs/source/ff.c **** 				cs = fs->last_clst;				/* Start at suggested cluster if it is valid */
 3419              		.loc 1 1580 4 is_stmt 1 view .LVU1148
1580:DRIVER/FatFs/source/ff.c **** 				cs = fs->last_clst;				/* Start at suggested cluster if it is valid */
 3420              		.loc 1 1580 7 is_stmt 0 view .LVU1149
 3421 0070 0028     		cmp	r0, #0
 3422 0072 E7D0     		beq	.L237
1581:DRIVER/FatFs/source/ff.c **** 				if (cs >= 2 && cs < fs->n_fatent) scl = cs;
 3423              		.loc 1 1581 5 is_stmt 1 view .LVU1150
1581:DRIVER/FatFs/source/ff.c **** 				if (cs >= 2 && cs < fs->n_fatent) scl = cs;
 3424              		.loc 1 1581 8 is_stmt 0 view .LVU1151
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 139


 3425 0074 7B69     		ldr	r3, [r7, #20]
 3426              	.LVL417:
1582:DRIVER/FatFs/source/ff.c **** 				ncl = 0;
 3427              		.loc 1 1582 5 is_stmt 1 view .LVU1152
1582:DRIVER/FatFs/source/ff.c **** 				ncl = 0;
 3428              		.loc 1 1582 8 is_stmt 0 view .LVU1153
 3429 0076 012B     		cmp	r3, #1
 3430 0078 05D9     		bls	.L250
1582:DRIVER/FatFs/source/ff.c **** 				ncl = 0;
 3431              		.loc 1 1582 27 discriminator 1 view .LVU1154
 3432 007a FA69     		ldr	r2, [r7, #28]
1582:DRIVER/FatFs/source/ff.c **** 				ncl = 0;
 3433              		.loc 1 1582 17 discriminator 1 view .LVU1155
 3434 007c 9A42     		cmp	r2, r3
 3435 007e 05D8     		bhi	.L251
1583:DRIVER/FatFs/source/ff.c **** 			}
 3436              		.loc 1 1583 9 view .LVU1156
 3437 0080 4FF00009 		mov	r9, #0
 3438              	.LVL418:
1583:DRIVER/FatFs/source/ff.c **** 			}
 3439              		.loc 1 1583 9 view .LVU1157
 3440 0084 DEE7     		b	.L237
 3441              	.LVL419:
 3442              	.L250:
1583:DRIVER/FatFs/source/ff.c **** 			}
 3443              		.loc 1 1583 9 view .LVU1158
 3444 0086 4FF00009 		mov	r9, #0
 3445              	.LVL420:
1583:DRIVER/FatFs/source/ff.c **** 			}
 3446              		.loc 1 1583 9 view .LVU1159
 3447 008a DBE7     		b	.L237
 3448              	.LVL421:
 3449              	.L251:
1582:DRIVER/FatFs/source/ff.c **** 				ncl = 0;
 3450              		.loc 1 1582 43 view .LVU1160
 3451 008c 1D46     		mov	r5, r3
 3452              	.LVL422:
1583:DRIVER/FatFs/source/ff.c **** 			}
 3453              		.loc 1 1583 9 view .LVU1161
 3454 008e 4FF00009 		mov	r9, #0
 3455              	.LVL423:
1583:DRIVER/FatFs/source/ff.c **** 			}
 3456              		.loc 1 1583 9 view .LVU1162
 3457 0092 D7E7     		b	.L237
 3458              	.LVL424:
 3459              	.L240:
1594:DRIVER/FatFs/source/ff.c **** 				if (cs == 0) break;				/* Found a free cluster? */
 3460              		.loc 1 1594 5 is_stmt 1 view .LVU1163
1594:DRIVER/FatFs/source/ff.c **** 				if (cs == 0) break;				/* Found a free cluster? */
 3461              		.loc 1 1594 10 is_stmt 0 view .LVU1164
 3462 0094 2146     		mov	r1, r4
 3463 0096 3046     		mov	r0, r6
 3464 0098 FFF7FEFF 		bl	get_fat
 3465              	.LVL425:
1595:DRIVER/FatFs/source/ff.c **** 				if (cs == 1 || cs == 0xFFFFFFFF) return cs;	/* Test for error */
 3466              		.loc 1 1595 5 is_stmt 1 view .LVU1165
1595:DRIVER/FatFs/source/ff.c **** 				if (cs == 1 || cs == 0xFFFFFFFF) return cs;	/* Test for error */
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 140


 3467              		.loc 1 1595 8 is_stmt 0 view .LVU1166
 3468 009c 0346     		mov	r3, r0
 3469 009e 70B1     		cbz	r0, .L253
1596:DRIVER/FatFs/source/ff.c **** 				if (ncl == scl) return 0;		/* No free cluster found? */
 3470              		.loc 1 1596 5 is_stmt 1 view .LVU1167
1596:DRIVER/FatFs/source/ff.c **** 				if (ncl == scl) return 0;		/* No free cluster found? */
 3471              		.loc 1 1596 8 is_stmt 0 view .LVU1168
 3472 00a0 0128     		cmp	r0, #1
 3473 00a2 32D0     		beq	.L233
1596:DRIVER/FatFs/source/ff.c **** 				if (ncl == scl) return 0;		/* No free cluster found? */
 3474              		.loc 1 1596 17 discriminator 2 view .LVU1169
 3475 00a4 B0F1FF3F 		cmp	r0, #-1
 3476 00a8 2FD0     		beq	.L233
1597:DRIVER/FatFs/source/ff.c **** 			}
 3477              		.loc 1 1597 5 is_stmt 1 view .LVU1170
1597:DRIVER/FatFs/source/ff.c **** 			}
 3478              		.loc 1 1597 8 is_stmt 0 view .LVU1171
 3479 00aa AC42     		cmp	r4, r5
 3480 00ac 37D0     		beq	.L258
 3481              	.LVL426:
 3482              	.L241:
1588:DRIVER/FatFs/source/ff.c **** 				ncl++;							/* Next cluster */
 3483              		.loc 1 1588 4 is_stmt 1 view .LVU1172
1589:DRIVER/FatFs/source/ff.c **** 				if (ncl >= fs->n_fatent) {		/* Check wrap-around */
 3484              		.loc 1 1589 5 view .LVU1173
1589:DRIVER/FatFs/source/ff.c **** 				if (ncl >= fs->n_fatent) {		/* Check wrap-around */
 3485              		.loc 1 1589 8 is_stmt 0 view .LVU1174
 3486 00ae 0134     		adds	r4, r4, #1
 3487              	.LVL427:
1590:DRIVER/FatFs/source/ff.c **** 					ncl = 2;
 3488              		.loc 1 1590 5 is_stmt 1 view .LVU1175
1590:DRIVER/FatFs/source/ff.c **** 					ncl = 2;
 3489              		.loc 1 1590 18 is_stmt 0 view .LVU1176
 3490 00b0 FB69     		ldr	r3, [r7, #28]
1590:DRIVER/FatFs/source/ff.c **** 					ncl = 2;
 3491              		.loc 1 1590 8 view .LVU1177
 3492 00b2 A342     		cmp	r3, r4
 3493 00b4 EED8     		bhi	.L240
1591:DRIVER/FatFs/source/ff.c **** 					if (ncl > scl) return 0;	/* No free cluster found? */
 3494              		.loc 1 1591 6 is_stmt 1 view .LVU1178
 3495              	.LVL428:
1592:DRIVER/FatFs/source/ff.c **** 				}
 3496              		.loc 1 1592 6 view .LVU1179
1592:DRIVER/FatFs/source/ff.c **** 				}
 3497              		.loc 1 1592 9 is_stmt 0 view .LVU1180
 3498 00b6 012D     		cmp	r5, #1
 3499 00b8 2FD9     		bls	.L252
1591:DRIVER/FatFs/source/ff.c **** 					if (ncl > scl) return 0;	/* No free cluster found? */
 3500              		.loc 1 1591 10 view .LVU1181
 3501 00ba 0224     		movs	r4, #2
 3502 00bc EAE7     		b	.L240
 3503              	.LVL429:
 3504              	.L253:
1591:DRIVER/FatFs/source/ff.c **** 					if (ncl > scl) return 0;	/* No free cluster found? */
 3505              		.loc 1 1591 10 view .LVU1182
 3506 00be A146     		mov	r9, r4
 3507              	.LVL430:
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 141


 3508              	.L239:
1600:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK && clst != 0) {
 3509              		.loc 1 1600 3 is_stmt 1 view .LVU1183
1600:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK && clst != 0) {
 3510              		.loc 1 1600 9 is_stmt 0 view .LVU1184
 3511 00c0 4FF0FF32 		mov	r2, #-1
 3512 00c4 4946     		mov	r1, r9
 3513 00c6 3846     		mov	r0, r7
 3514 00c8 FFF7FEFF 		bl	put_fat
 3515              	.LVL431:
1601:DRIVER/FatFs/source/ff.c **** 			res = put_fat(fs, clst, ncl);		/* Link it from the previous one if needed */
 3516              		.loc 1 1601 3 is_stmt 1 view .LVU1185
1601:DRIVER/FatFs/source/ff.c **** 			res = put_fat(fs, clst, ncl);		/* Link it from the previous one if needed */
 3517              		.loc 1 1601 6 is_stmt 0 view .LVU1186
 3518 00cc 0346     		mov	r3, r0
 3519 00ce C8B9     		cbnz	r0, .L242
1601:DRIVER/FatFs/source/ff.c **** 			res = put_fat(fs, clst, ncl);		/* Link it from the previous one if needed */
 3520              		.loc 1 1601 20 discriminator 1 view .LVU1187
 3521 00d0 B8F1000F 		cmp	r8, #0
 3522 00d4 0FD1     		bne	.L259
 3523              	.LVL432:
 3524              	.L243:
1606:DRIVER/FatFs/source/ff.c **** 		fs->last_clst = ncl;
 3525              		.loc 1 1606 2 is_stmt 1 view .LVU1188
1606:DRIVER/FatFs/source/ff.c **** 		fs->last_clst = ncl;
 3526              		.loc 1 1606 5 is_stmt 0 view .LVU1189
 3527 00d6 ABB9     		cbnz	r3, .L242
1607:DRIVER/FatFs/source/ff.c **** 		if (fs->free_clst <= fs->n_fatent - 2) fs->free_clst--;
 3528              		.loc 1 1607 3 is_stmt 1 view .LVU1190
1607:DRIVER/FatFs/source/ff.c **** 		if (fs->free_clst <= fs->n_fatent - 2) fs->free_clst--;
 3529              		.loc 1 1607 17 is_stmt 0 view .LVU1191
 3530 00d8 C7F81490 		str	r9, [r7, #20]
1608:DRIVER/FatFs/source/ff.c **** 		fs->fsi_flag |= 1;
 3531              		.loc 1 1608 3 is_stmt 1 view .LVU1192
1608:DRIVER/FatFs/source/ff.c **** 		fs->fsi_flag |= 1;
 3532              		.loc 1 1608 9 is_stmt 0 view .LVU1193
 3533 00dc BA69     		ldr	r2, [r7, #24]
1608:DRIVER/FatFs/source/ff.c **** 		fs->fsi_flag |= 1;
 3534              		.loc 1 1608 26 view .LVU1194
 3535 00de FB69     		ldr	r3, [r7, #28]
 3536              	.LVL433:
1608:DRIVER/FatFs/source/ff.c **** 		fs->fsi_flag |= 1;
 3537              		.loc 1 1608 37 view .LVU1195
 3538 00e0 023B     		subs	r3, r3, #2
1608:DRIVER/FatFs/source/ff.c **** 		fs->fsi_flag |= 1;
 3539              		.loc 1 1608 6 view .LVU1196
 3540 00e2 9A42     		cmp	r2, r3
 3541 00e4 01D8     		bhi	.L244
1608:DRIVER/FatFs/source/ff.c **** 		fs->fsi_flag |= 1;
 3542              		.loc 1 1608 42 is_stmt 1 discriminator 1 view .LVU1197
1608:DRIVER/FatFs/source/ff.c **** 		fs->fsi_flag |= 1;
 3543              		.loc 1 1608 55 is_stmt 0 discriminator 1 view .LVU1198
 3544 00e6 013A     		subs	r2, r2, #1
 3545 00e8 BA61     		str	r2, [r7, #24]
 3546              	.L244:
1609:DRIVER/FatFs/source/ff.c **** 	} else {
 3547              		.loc 1 1609 3 is_stmt 1 view .LVU1199
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 142


1609:DRIVER/FatFs/source/ff.c **** 	} else {
 3548              		.loc 1 1609 5 is_stmt 0 view .LVU1200
 3549 00ea 7B79     		ldrb	r3, [r7, #5]	@ zero_extendqisi2
1609:DRIVER/FatFs/source/ff.c **** 	} else {
 3550              		.loc 1 1609 16 view .LVU1201
 3551 00ec 43F00103 		orr	r3, r3, #1
 3552 00f0 7B71     		strb	r3, [r7, #5]
 3553 00f2 4B46     		mov	r3, r9
 3554 00f4 09E0     		b	.L233
 3555              	.LVL434:
 3556              	.L259:
1602:DRIVER/FatFs/source/ff.c **** 		}
 3557              		.loc 1 1602 4 is_stmt 1 view .LVU1202
1602:DRIVER/FatFs/source/ff.c **** 		}
 3558              		.loc 1 1602 10 is_stmt 0 view .LVU1203
 3559 00f6 4A46     		mov	r2, r9
 3560 00f8 4146     		mov	r1, r8
 3561 00fa 3846     		mov	r0, r7
 3562              	.LVL435:
1602:DRIVER/FatFs/source/ff.c **** 		}
 3563              		.loc 1 1602 10 view .LVU1204
 3564 00fc FFF7FEFF 		bl	put_fat
 3565              	.LVL436:
 3566 0100 0346     		mov	r3, r0
 3567              	.LVL437:
1602:DRIVER/FatFs/source/ff.c **** 		}
 3568              		.loc 1 1602 10 view .LVU1205
 3569 0102 E8E7     		b	.L243
 3570              	.LVL438:
 3571              	.L242:
1611:DRIVER/FatFs/source/ff.c **** 	}
 3572              		.loc 1 1611 3 is_stmt 1 view .LVU1206
1611:DRIVER/FatFs/source/ff.c **** 	}
 3573              		.loc 1 1611 43 is_stmt 0 view .LVU1207
 3574 0104 012B     		cmp	r3, #1
 3575 0106 03D0     		beq	.L260
 3576 0108 0123     		movs	r3, #1
 3577              	.LVL439:
 3578              	.L233:
1615:DRIVER/FatFs/source/ff.c **** 
 3579              		.loc 1 1615 1 view .LVU1208
 3580 010a 1846     		mov	r0, r3
 3581 010c BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 3582              	.LVL440:
 3583              	.L260:
1611:DRIVER/FatFs/source/ff.c **** 	}
 3584              		.loc 1 1611 43 view .LVU1209
 3585 0110 4FF0FF33 		mov	r3, #-1
 3586 0114 F9E7     		b	.L233
 3587              	.LVL441:
 3588              	.L247:
1540:DRIVER/FatFs/source/ff.c **** 		if (cs == 0xFFFFFFFF) return cs;	/* Test for disk error */
 3589              		.loc 1 1540 22 view .LVU1210
 3590 0116 0123     		movs	r3, #1
 3591 0118 F7E7     		b	.L233
 3592              	.LVL442:
 3593              	.L252:
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 143


1592:DRIVER/FatFs/source/ff.c **** 				}
 3594              		.loc 1 1592 28 view .LVU1211
 3595 011a 4B46     		mov	r3, r9
 3596 011c F5E7     		b	.L233
 3597              	.LVL443:
 3598              	.L258:
1597:DRIVER/FatFs/source/ff.c **** 			}
 3599              		.loc 1 1597 28 view .LVU1212
 3600 011e 4B46     		mov	r3, r9
 3601 0120 F3E7     		b	.L233
 3602              		.cfi_endproc
 3603              	.LFE15:
 3605              		.section	.text.remove_chain,"ax",%progbits
 3606              		.align	1
 3607              		.syntax unified
 3608              		.thumb
 3609              		.thumb_func
 3611              	remove_chain:
 3612              	.LVL444:
 3613              	.LFB14:
1434:DRIVER/FatFs/source/ff.c **** 	FRESULT res = FR_OK;
 3614              		.loc 1 1434 1 is_stmt 1 view -0
 3615              		.cfi_startproc
 3616              		@ args = 0, pretend = 0, frame = 0
 3617              		@ frame_needed = 0, uses_anonymous_args = 0
1434:DRIVER/FatFs/source/ff.c **** 	FRESULT res = FR_OK;
 3618              		.loc 1 1434 1 is_stmt 0 view .LVU1214
 3619 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 3620              	.LCFI20:
 3621              		.cfi_def_cfa_offset 24
 3622              		.cfi_offset 3, -24
 3623              		.cfi_offset 4, -20
 3624              		.cfi_offset 5, -16
 3625              		.cfi_offset 6, -12
 3626              		.cfi_offset 7, -8
 3627              		.cfi_offset 14, -4
 3628 0002 0C46     		mov	r4, r1
1435:DRIVER/FatFs/source/ff.c **** 	DWORD nxt;
 3629              		.loc 1 1435 2 is_stmt 1 view .LVU1215
 3630              	.LVL445:
1436:DRIVER/FatFs/source/ff.c **** 	FATFS *fs = obj->fs;
 3631              		.loc 1 1436 2 view .LVU1216
1437:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT || FF_USE_TRIM
 3632              		.loc 1 1437 2 view .LVU1217
1437:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT || FF_USE_TRIM
 3633              		.loc 1 1437 9 is_stmt 0 view .LVU1218
 3634 0004 0568     		ldr	r5, [r0]
 3635              	.LVL446:
1445:DRIVER/FatFs/source/ff.c **** 
 3636              		.loc 1 1445 2 is_stmt 1 view .LVU1219
1445:DRIVER/FatFs/source/ff.c **** 
 3637              		.loc 1 1445 5 is_stmt 0 view .LVU1220
 3638 0006 0129     		cmp	r1, #1
 3639 0008 2ED9     		bls	.L266
 3640 000a 0646     		mov	r6, r0
 3641 000c 1146     		mov	r1, r2
 3642              	.LVL447:
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 144


1445:DRIVER/FatFs/source/ff.c **** 
 3643              		.loc 1 1445 28 discriminator 2 view .LVU1221
 3644 000e EB69     		ldr	r3, [r5, #28]
1445:DRIVER/FatFs/source/ff.c **** 
 3645              		.loc 1 1445 15 discriminator 2 view .LVU1222
 3646 0010 A342     		cmp	r3, r4
 3647 0012 2BD9     		bls	.L267
1448:DRIVER/FatFs/source/ff.c **** 		res = put_fat(fs, pclst, 0xFFFFFFFF);
 3648              		.loc 1 1448 2 is_stmt 1 view .LVU1223
1448:DRIVER/FatFs/source/ff.c **** 		res = put_fat(fs, pclst, 0xFFFFFFFF);
 3649              		.loc 1 1448 5 is_stmt 0 view .LVU1224
 3650 0014 4AB1     		cbz	r2, .L265
1449:DRIVER/FatFs/source/ff.c **** 		if (res != FR_OK) return res;
 3651              		.loc 1 1449 3 is_stmt 1 view .LVU1225
1449:DRIVER/FatFs/source/ff.c **** 		if (res != FR_OK) return res;
 3652              		.loc 1 1449 9 is_stmt 0 view .LVU1226
 3653 0016 4FF0FF32 		mov	r2, #-1
 3654              	.LVL448:
1449:DRIVER/FatFs/source/ff.c **** 		if (res != FR_OK) return res;
 3655              		.loc 1 1449 9 view .LVU1227
 3656 001a 2846     		mov	r0, r5
 3657              	.LVL449:
1449:DRIVER/FatFs/source/ff.c **** 		if (res != FR_OK) return res;
 3658              		.loc 1 1449 9 view .LVU1228
 3659 001c FFF7FEFF 		bl	put_fat
 3660              	.LVL450:
1450:DRIVER/FatFs/source/ff.c **** 	}
 3661              		.loc 1 1450 3 is_stmt 1 view .LVU1229
1450:DRIVER/FatFs/source/ff.c **** 	}
 3662              		.loc 1 1450 6 is_stmt 0 view .LVU1230
 3663 0020 0746     		mov	r7, r0
 3664 0022 10B1     		cbz	r0, .L265
 3665 0024 23E0     		b	.L262
 3666              	.LVL451:
 3667              	.L264:
1485:DRIVER/FatFs/source/ff.c **** 	} while (clst < fs->n_fatent);	/* Repeat while not the last link */
 3668              		.loc 1 1485 3 is_stmt 1 view .LVU1231
1486:DRIVER/FatFs/source/ff.c **** 
 3669              		.loc 1 1486 16 view .LVU1232
 3670 0026 A242     		cmp	r2, r4
 3671 0028 21D9     		bls	.L262
 3672              	.LVL452:
 3673              	.L265:
1454:DRIVER/FatFs/source/ff.c **** 		nxt = get_fat(obj, clst);			/* Get cluster status */
 3674              		.loc 1 1454 2 view .LVU1233
1455:DRIVER/FatFs/source/ff.c **** 		if (nxt == 0) break;				/* Empty cluster? */
 3675              		.loc 1 1455 3 view .LVU1234
 3676 002a 2746     		mov	r7, r4
1455:DRIVER/FatFs/source/ff.c **** 		if (nxt == 0) break;				/* Empty cluster? */
 3677              		.loc 1 1455 9 is_stmt 0 view .LVU1235
 3678 002c 2146     		mov	r1, r4
 3679 002e 3046     		mov	r0, r6
 3680 0030 FFF7FEFF 		bl	get_fat
 3681              	.LVL453:
1456:DRIVER/FatFs/source/ff.c **** 		if (nxt == 1) return FR_INT_ERR;	/* Internal error? */
 3682              		.loc 1 1456 3 is_stmt 1 view .LVU1236
1456:DRIVER/FatFs/source/ff.c **** 		if (nxt == 1) return FR_INT_ERR;	/* Internal error? */
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 145


 3683              		.loc 1 1456 6 is_stmt 0 view .LVU1237
 3684 0034 0446     		mov	r4, r0
 3685              	.LVL454:
1456:DRIVER/FatFs/source/ff.c **** 		if (nxt == 1) return FR_INT_ERR;	/* Internal error? */
 3686              		.loc 1 1456 6 view .LVU1238
 3687 0036 E0B1     		cbz	r0, .L268
1457:DRIVER/FatFs/source/ff.c **** 		if (nxt == 0xFFFFFFFF) return FR_DISK_ERR;	/* Disk error? */
 3688              		.loc 1 1457 3 is_stmt 1 view .LVU1239
1457:DRIVER/FatFs/source/ff.c **** 		if (nxt == 0xFFFFFFFF) return FR_DISK_ERR;	/* Disk error? */
 3689              		.loc 1 1457 6 is_stmt 0 view .LVU1240
 3690 0038 0128     		cmp	r0, #1
 3691 003a 1CD0     		beq	.L269
1458:DRIVER/FatFs/source/ff.c **** 		if (!FF_FS_EXFAT || fs->fs_type != FS_EXFAT) {
 3692              		.loc 1 1458 3 is_stmt 1 view .LVU1241
1458:DRIVER/FatFs/source/ff.c **** 		if (!FF_FS_EXFAT || fs->fs_type != FS_EXFAT) {
 3693              		.loc 1 1458 6 is_stmt 0 view .LVU1242
 3694 003c B0F1FF3F 		cmp	r0, #-1
 3695 0040 1BD0     		beq	.L270
1459:DRIVER/FatFs/source/ff.c **** 			res = put_fat(fs, clst, 0);		/* Mark the cluster 'free' on the FAT */
 3696              		.loc 1 1459 3 is_stmt 1 view .LVU1243
1460:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) return res;
 3697              		.loc 1 1460 4 view .LVU1244
1460:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) return res;
 3698              		.loc 1 1460 10 is_stmt 0 view .LVU1245
 3699 0042 0022     		movs	r2, #0
 3700 0044 3946     		mov	r1, r7
 3701 0046 2846     		mov	r0, r5
 3702              	.LVL455:
1460:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) return res;
 3703              		.loc 1 1460 10 view .LVU1246
 3704 0048 FFF7FEFF 		bl	put_fat
 3705              	.LVL456:
1461:DRIVER/FatFs/source/ff.c **** 		}
 3706              		.loc 1 1461 4 is_stmt 1 view .LVU1247
1461:DRIVER/FatFs/source/ff.c **** 		}
 3707              		.loc 1 1461 7 is_stmt 0 view .LVU1248
 3708 004c 0746     		mov	r7, r0
 3709              	.LVL457:
1461:DRIVER/FatFs/source/ff.c **** 		}
 3710              		.loc 1 1461 7 view .LVU1249
 3711 004e 70B9     		cbnz	r0, .L262
1463:DRIVER/FatFs/source/ff.c **** 			fs->free_clst++;
 3712              		.loc 1 1463 3 is_stmt 1 view .LVU1250
1463:DRIVER/FatFs/source/ff.c **** 			fs->free_clst++;
 3713              		.loc 1 1463 9 is_stmt 0 view .LVU1251
 3714 0050 AB69     		ldr	r3, [r5, #24]
1463:DRIVER/FatFs/source/ff.c **** 			fs->free_clst++;
 3715              		.loc 1 1463 25 view .LVU1252
 3716 0052 EA69     		ldr	r2, [r5, #28]
1463:DRIVER/FatFs/source/ff.c **** 			fs->free_clst++;
 3717              		.loc 1 1463 36 view .LVU1253
 3718 0054 911E     		subs	r1, r2, #2
1463:DRIVER/FatFs/source/ff.c **** 			fs->free_clst++;
 3719              		.loc 1 1463 6 view .LVU1254
 3720 0056 8B42     		cmp	r3, r1
 3721 0058 E5D2     		bcs	.L264
1464:DRIVER/FatFs/source/ff.c **** 			fs->fsi_flag |= 1;
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 146


 3722              		.loc 1 1464 4 is_stmt 1 view .LVU1255
1464:DRIVER/FatFs/source/ff.c **** 			fs->fsi_flag |= 1;
 3723              		.loc 1 1464 17 is_stmt 0 view .LVU1256
 3724 005a 0133     		adds	r3, r3, #1
 3725 005c AB61     		str	r3, [r5, #24]
1465:DRIVER/FatFs/source/ff.c **** 		}
 3726              		.loc 1 1465 4 is_stmt 1 view .LVU1257
1465:DRIVER/FatFs/source/ff.c **** 		}
 3727              		.loc 1 1465 6 is_stmt 0 view .LVU1258
 3728 005e 6B79     		ldrb	r3, [r5, #5]	@ zero_extendqisi2
1465:DRIVER/FatFs/source/ff.c **** 		}
 3729              		.loc 1 1465 17 view .LVU1259
 3730 0060 43F00103 		orr	r3, r3, #1
 3731 0064 6B71     		strb	r3, [r5, #5]
 3732 0066 DEE7     		b	.L264
 3733              	.LVL458:
 3734              	.L266:
1445:DRIVER/FatFs/source/ff.c **** 
 3735              		.loc 1 1445 47 view .LVU1260
 3736 0068 0227     		movs	r7, #2
 3737 006a 00E0     		b	.L262
 3738              	.LVL459:
 3739              	.L267:
1445:DRIVER/FatFs/source/ff.c **** 
 3740              		.loc 1 1445 47 view .LVU1261
 3741 006c 0227     		movs	r7, #2
 3742              	.LVL460:
 3743              	.L262:
1515:DRIVER/FatFs/source/ff.c **** 
 3744              		.loc 1 1515 1 view .LVU1262
 3745 006e 3846     		mov	r0, r7
 3746 0070 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 3747              	.LVL461:
 3748              	.L268:
1514:DRIVER/FatFs/source/ff.c **** }
 3749              		.loc 1 1514 9 view .LVU1263
 3750 0072 0027     		movs	r7, #0
 3751              	.LVL462:
1514:DRIVER/FatFs/source/ff.c **** }
 3752              		.loc 1 1514 9 view .LVU1264
 3753 0074 FBE7     		b	.L262
 3754              	.LVL463:
 3755              	.L269:
1457:DRIVER/FatFs/source/ff.c **** 		if (nxt == 0xFFFFFFFF) return FR_DISK_ERR;	/* Disk error? */
 3756              		.loc 1 1457 24 view .LVU1265
 3757 0076 0227     		movs	r7, #2
 3758              	.LVL464:
1457:DRIVER/FatFs/source/ff.c **** 		if (nxt == 0xFFFFFFFF) return FR_DISK_ERR;	/* Disk error? */
 3759              		.loc 1 1457 24 view .LVU1266
 3760 0078 F9E7     		b	.L262
 3761              	.LVL465:
 3762              	.L270:
1458:DRIVER/FatFs/source/ff.c **** 		if (!FF_FS_EXFAT || fs->fs_type != FS_EXFAT) {
 3763              		.loc 1 1458 33 view .LVU1267
 3764 007a 0127     		movs	r7, #1
 3765              	.LVL466:
1458:DRIVER/FatFs/source/ff.c **** 		if (!FF_FS_EXFAT || fs->fs_type != FS_EXFAT) {
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 147


 3766              		.loc 1 1458 33 view .LVU1268
 3767 007c F7E7     		b	.L262
 3768              		.cfi_endproc
 3769              	.LFE14:
 3771              		.section	.text.dir_clear,"ax",%progbits
 3772              		.align	1
 3773              		.syntax unified
 3774              		.thumb
 3775              		.thumb_func
 3777              	dir_clear:
 3778              	.LVL467:
 3779              	.LFB16:
1662:DRIVER/FatFs/source/ff.c **** 	LBA_t sect;
 3780              		.loc 1 1662 1 is_stmt 1 view -0
 3781              		.cfi_startproc
 3782              		@ args = 0, pretend = 0, frame = 0
 3783              		@ frame_needed = 0, uses_anonymous_args = 0
1662:DRIVER/FatFs/source/ff.c **** 	LBA_t sect;
 3784              		.loc 1 1662 1 is_stmt 0 view .LVU1270
 3785 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 3786              	.LCFI21:
 3787              		.cfi_def_cfa_offset 24
 3788              		.cfi_offset 3, -24
 3789              		.cfi_offset 4, -20
 3790              		.cfi_offset 5, -16
 3791              		.cfi_offset 6, -12
 3792              		.cfi_offset 7, -8
 3793              		.cfi_offset 14, -4
 3794 0002 0546     		mov	r5, r0
 3795 0004 0C46     		mov	r4, r1
1663:DRIVER/FatFs/source/ff.c **** 	UINT n, szb;
 3796              		.loc 1 1663 2 is_stmt 1 view .LVU1271
1664:DRIVER/FatFs/source/ff.c **** 	BYTE *ibuf;
 3797              		.loc 1 1664 2 view .LVU1272
1665:DRIVER/FatFs/source/ff.c **** 
 3798              		.loc 1 1665 2 view .LVU1273
1668:DRIVER/FatFs/source/ff.c **** 	sect = clst2sect(fs, clst);		/* Top of the cluster */
 3799              		.loc 1 1668 2 view .LVU1274
1668:DRIVER/FatFs/source/ff.c **** 	sect = clst2sect(fs, clst);		/* Top of the cluster */
 3800              		.loc 1 1668 6 is_stmt 0 view .LVU1275
 3801 0006 FFF7FEFF 		bl	sync_window
 3802              	.LVL468:
1668:DRIVER/FatFs/source/ff.c **** 	sect = clst2sect(fs, clst);		/* Top of the cluster */
 3803              		.loc 1 1668 5 view .LVU1276
 3804 000a 08B1     		cbz	r0, .L279
1668:DRIVER/FatFs/source/ff.c **** 	sect = clst2sect(fs, clst);		/* Top of the cluster */
 3805              		.loc 1 1668 39 view .LVU1277
 3806 000c 0120     		movs	r0, #1
 3807              	.LVL469:
 3808              	.L273:
1687:DRIVER/FatFs/source/ff.c **** #endif	/* !FF_FS_READONLY */
 3809              		.loc 1 1687 1 view .LVU1278
 3810 000e F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 3811              	.LVL470:
 3812              	.L279:
1669:DRIVER/FatFs/source/ff.c **** 	fs->winsect = sect;				/* Set window to top of the cluster */
 3813              		.loc 1 1669 2 is_stmt 1 view .LVU1279
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 148


1669:DRIVER/FatFs/source/ff.c **** 	fs->winsect = sect;				/* Set window to top of the cluster */
 3814              		.loc 1 1669 9 is_stmt 0 view .LVU1280
 3815 0010 2146     		mov	r1, r4
 3816 0012 2846     		mov	r0, r5
 3817 0014 FFF7FEFF 		bl	clst2sect
 3818              	.LVL471:
 3819 0018 0646     		mov	r6, r0
 3820              	.LVL472:
1670:DRIVER/FatFs/source/ff.c **** 	memset(fs->win, 0, sizeof fs->win);	/* Clear window buffer */
 3821              		.loc 1 1670 2 is_stmt 1 view .LVU1281
1670:DRIVER/FatFs/source/ff.c **** 	memset(fs->win, 0, sizeof fs->win);	/* Clear window buffer */
 3822              		.loc 1 1670 14 is_stmt 0 view .LVU1282
 3823 001a 6863     		str	r0, [r5, #52]
1671:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN == 3		/* Quick table clear by using multi-secter write */
 3824              		.loc 1 1671 2 is_stmt 1 view .LVU1283
1671:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN == 3		/* Quick table clear by using multi-secter write */
 3825              		.loc 1 1671 11 is_stmt 0 view .LVU1284
 3826 001c 05F13807 		add	r7, r5, #56
1671:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN == 3		/* Quick table clear by using multi-secter write */
 3827              		.loc 1 1671 2 view .LVU1285
 3828 0020 4FF48052 		mov	r2, #4096
 3829 0024 0021     		movs	r1, #0
 3830 0026 3846     		mov	r0, r7
 3831              	.LVL473:
1671:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN == 3		/* Quick table clear by using multi-secter write */
 3832              		.loc 1 1671 2 view .LVU1286
 3833 0028 FFF7FEFF 		bl	memset
 3834              	.LVL474:
1683:DRIVER/FatFs/source/ff.c **** 		for (n = 0; n < fs->csize && disk_write(fs->pdrv, ibuf, sect + n, szb) == RES_OK; n += szb) ;	/* 
 3835              		.loc 1 1683 3 is_stmt 1 view .LVU1287
1683:DRIVER/FatFs/source/ff.c **** 		for (n = 0; n < fs->csize && disk_write(fs->pdrv, ibuf, sect + n, szb) == RES_OK; n += szb) ;	/* 
 3836              		.loc 1 1683 19 view .LVU1288
1684:DRIVER/FatFs/source/ff.c **** 	}
 3837              		.loc 1 1684 3 view .LVU1289
1684:DRIVER/FatFs/source/ff.c **** 	}
 3838              		.loc 1 1684 10 is_stmt 0 view .LVU1290
 3839 002c 0024     		movs	r4, #0
 3840              	.LVL475:
1684:DRIVER/FatFs/source/ff.c **** 	}
 3841              		.loc 1 1684 3 view .LVU1291
 3842 002e 00E0     		b	.L274
 3843              	.LVL476:
 3844              	.L276:
1684:DRIVER/FatFs/source/ff.c **** 	}
 3845              		.loc 1 1684 87 is_stmt 1 discriminator 4 view .LVU1292
 3846 0030 0134     		adds	r4, r4, #1
 3847              	.LVL477:
 3848              	.L274:
1684:DRIVER/FatFs/source/ff.c **** 	}
 3849              		.loc 1 1684 29 discriminator 1 view .LVU1293
1684:DRIVER/FatFs/source/ff.c **** 	}
 3850              		.loc 1 1684 21 is_stmt 0 discriminator 1 view .LVU1294
 3851 0032 6B89     		ldrh	r3, [r5, #10]
1684:DRIVER/FatFs/source/ff.c **** 	}
 3852              		.loc 1 1684 29 discriminator 1 view .LVU1295
 3853 0034 A342     		cmp	r3, r4
 3854 0036 07D9     		bls	.L275
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 149


1684:DRIVER/FatFs/source/ff.c **** 	}
 3855              		.loc 1 1684 32 discriminator 3 view .LVU1296
 3856 0038 0123     		movs	r3, #1
 3857 003a A219     		adds	r2, r4, r6
 3858 003c 3946     		mov	r1, r7
 3859 003e 6878     		ldrb	r0, [r5, #1]	@ zero_extendqisi2
 3860 0040 FFF7FEFF 		bl	disk_write
 3861              	.LVL478:
1684:DRIVER/FatFs/source/ff.c **** 	}
 3862              		.loc 1 1684 29 discriminator 3 view .LVU1297
 3863 0044 0028     		cmp	r0, #0
 3864 0046 F3D0     		beq	.L276
 3865              	.L275:
1686:DRIVER/FatFs/source/ff.c **** }
 3866              		.loc 1 1686 2 is_stmt 1 view .LVU1298
1686:DRIVER/FatFs/source/ff.c **** }
 3867              		.loc 1 1686 17 is_stmt 0 view .LVU1299
 3868 0048 6889     		ldrh	r0, [r5, #10]
1686:DRIVER/FatFs/source/ff.c **** }
 3869              		.loc 1 1686 34 view .LVU1300
 3870 004a 001B     		subs	r0, r0, r4
 3871 004c 18BF     		it	ne
 3872 004e 0120     		movne	r0, #1
 3873 0050 DDE7     		b	.L273
 3874              		.cfi_endproc
 3875              	.LFE16:
 3877              		.section	.text.dir_next,"ax",%progbits
 3878              		.align	1
 3879              		.syntax unified
 3880              		.thumb
 3881              		.thumb_func
 3883              	dir_next:
 3884              	.LVL479:
 3885              	.LFB18:
1749:DRIVER/FatFs/source/ff.c **** 	DWORD ofs, clst;
 3886              		.loc 1 1749 1 is_stmt 1 view -0
 3887              		.cfi_startproc
 3888              		@ args = 0, pretend = 0, frame = 0
 3889              		@ frame_needed = 0, uses_anonymous_args = 0
1749:DRIVER/FatFs/source/ff.c **** 	DWORD ofs, clst;
 3890              		.loc 1 1749 1 is_stmt 0 view .LVU1302
 3891 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 3892              	.LCFI22:
 3893              		.cfi_def_cfa_offset 24
 3894              		.cfi_offset 4, -24
 3895              		.cfi_offset 5, -20
 3896              		.cfi_offset 6, -16
 3897              		.cfi_offset 7, -12
 3898              		.cfi_offset 8, -8
 3899              		.cfi_offset 14, -4
 3900 0004 0546     		mov	r5, r0
 3901 0006 0F46     		mov	r7, r1
1750:DRIVER/FatFs/source/ff.c **** 	FATFS *fs = dp->obj.fs;
 3902              		.loc 1 1750 2 is_stmt 1 view .LVU1303
1751:DRIVER/FatFs/source/ff.c **** 
 3903              		.loc 1 1751 2 view .LVU1304
1751:DRIVER/FatFs/source/ff.c **** 
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 150


 3904              		.loc 1 1751 9 is_stmt 0 view .LVU1305
 3905 0008 0668     		ldr	r6, [r0]
 3906              	.LVL480:
1754:DRIVER/FatFs/source/ff.c **** 	if (ofs >= (DWORD)((FF_FS_EXFAT && fs->fs_type == FS_EXFAT) ? MAX_DIR_EX : MAX_DIR)) dp->sect = 0;
 3907              		.loc 1 1754 2 is_stmt 1 view .LVU1306
1754:DRIVER/FatFs/source/ff.c **** 	if (ofs >= (DWORD)((FF_FS_EXFAT && fs->fs_type == FS_EXFAT) ? MAX_DIR_EX : MAX_DIR)) dp->sect = 0;
 3908              		.loc 1 1754 10 is_stmt 0 view .LVU1307
 3909 000a 0469     		ldr	r4, [r0, #16]
1754:DRIVER/FatFs/source/ff.c **** 	if (ofs >= (DWORD)((FF_FS_EXFAT && fs->fs_type == FS_EXFAT) ? MAX_DIR_EX : MAX_DIR)) dp->sect = 0;
 3910              		.loc 1 1754 6 view .LVU1308
 3911 000c 2034     		adds	r4, r4, #32
 3912              	.LVL481:
1755:DRIVER/FatFs/source/ff.c **** 	if (dp->sect == 0) return FR_NO_FILE;	/* Report EOT if it has been disabled */
 3913              		.loc 1 1755 2 is_stmt 1 view .LVU1309
1755:DRIVER/FatFs/source/ff.c **** 	if (dp->sect == 0) return FR_NO_FILE;	/* Report EOT if it has been disabled */
 3914              		.loc 1 1755 5 is_stmt 0 view .LVU1310
 3915 000e B4F5001F 		cmp	r4, #2097152
 3916 0012 01D3     		bcc	.L281
1755:DRIVER/FatFs/source/ff.c **** 	if (dp->sect == 0) return FR_NO_FILE;	/* Report EOT if it has been disabled */
 3917              		.loc 1 1755 87 is_stmt 1 discriminator 1 view .LVU1311
1755:DRIVER/FatFs/source/ff.c **** 	if (dp->sect == 0) return FR_NO_FILE;	/* Report EOT if it has been disabled */
 3918              		.loc 1 1755 96 is_stmt 0 discriminator 1 view .LVU1312
 3919 0014 0023     		movs	r3, #0
 3920 0016 8361     		str	r3, [r0, #24]
 3921              	.L281:
1756:DRIVER/FatFs/source/ff.c **** 
 3922              		.loc 1 1756 2 is_stmt 1 view .LVU1313
1756:DRIVER/FatFs/source/ff.c **** 
 3923              		.loc 1 1756 8 is_stmt 0 view .LVU1314
 3924 0018 AB69     		ldr	r3, [r5, #24]
1756:DRIVER/FatFs/source/ff.c **** 
 3925              		.loc 1 1756 5 view .LVU1315
 3926 001a 002B     		cmp	r3, #0
 3927 001c 4ED0     		beq	.L287
1758:DRIVER/FatFs/source/ff.c **** 		dp->sect++;				/* Next sector */
 3928              		.loc 1 1758 2 is_stmt 1 view .LVU1316
1758:DRIVER/FatFs/source/ff.c **** 		dp->sect++;				/* Next sector */
 3929              		.loc 1 1758 12 is_stmt 0 view .LVU1317
 3930 001e B189     		ldrh	r1, [r6, #12]
 3931              	.LVL482:
1758:DRIVER/FatFs/source/ff.c **** 		dp->sect++;				/* Next sector */
 3932              		.loc 1 1758 10 view .LVU1318
 3933 0020 B4FBF1F2 		udiv	r2, r4, r1
 3934 0024 01FB1242 		mls	r2, r1, r2, r4
1758:DRIVER/FatFs/source/ff.c **** 		dp->sect++;				/* Next sector */
 3935              		.loc 1 1758 5 view .LVU1319
 3936 0028 3AB9     		cbnz	r2, .L283
1759:DRIVER/FatFs/source/ff.c **** 
 3937              		.loc 1 1759 3 is_stmt 1 view .LVU1320
1759:DRIVER/FatFs/source/ff.c **** 
 3938              		.loc 1 1759 11 is_stmt 0 view .LVU1321
 3939 002a 0133     		adds	r3, r3, #1
 3940 002c AB61     		str	r3, [r5, #24]
1761:DRIVER/FatFs/source/ff.c **** 			if (ofs / SZDIRE >= fs->n_rootdir) {	/* Report EOT if it reached end of static table */
 3941              		.loc 1 1761 3 is_stmt 1 view .LVU1322
1761:DRIVER/FatFs/source/ff.c **** 			if (ofs / SZDIRE >= fs->n_rootdir) {	/* Report EOT if it reached end of static table */
 3942              		.loc 1 1761 9 is_stmt 0 view .LVU1323
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 151


 3943 002e 6969     		ldr	r1, [r5, #20]
1761:DRIVER/FatFs/source/ff.c **** 			if (ofs / SZDIRE >= fs->n_rootdir) {	/* Report EOT if it reached end of static table */
 3944              		.loc 1 1761 6 view .LVU1324
 3945 0030 A1B9     		cbnz	r1, .L284
1762:DRIVER/FatFs/source/ff.c **** 				dp->sect = 0; return FR_NO_FILE;
 3946              		.loc 1 1762 4 is_stmt 1 view .LVU1325
1762:DRIVER/FatFs/source/ff.c **** 				dp->sect = 0; return FR_NO_FILE;
 3947              		.loc 1 1762 26 is_stmt 0 view .LVU1326
 3948 0032 3389     		ldrh	r3, [r6, #8]
1762:DRIVER/FatFs/source/ff.c **** 				dp->sect = 0; return FR_NO_FILE;
 3949              		.loc 1 1762 7 view .LVU1327
 3950 0034 B3EB541F 		cmp	r3, r4, lsr #5
 3951 0038 0CD9     		bls	.L295
 3952              	.LVL483:
 3953              	.L283:
1792:DRIVER/FatFs/source/ff.c **** 	dp->dir = fs->win + ofs % SS(fs);	/* Pointer to the entry in the win[] */
 3954              		.loc 1 1792 2 is_stmt 1 view .LVU1328
1792:DRIVER/FatFs/source/ff.c **** 	dp->dir = fs->win + ofs % SS(fs);	/* Pointer to the entry in the win[] */
 3955              		.loc 1 1792 11 is_stmt 0 view .LVU1329
 3956 003a 2C61     		str	r4, [r5, #16]
1793:DRIVER/FatFs/source/ff.c **** 
 3957              		.loc 1 1793 2 is_stmt 1 view .LVU1330
1793:DRIVER/FatFs/source/ff.c **** 
 3958              		.loc 1 1793 12 is_stmt 0 view .LVU1331
 3959 003c 06F13803 		add	r3, r6, #56
1793:DRIVER/FatFs/source/ff.c **** 
 3960              		.loc 1 1793 28 view .LVU1332
 3961 0040 B289     		ldrh	r2, [r6, #12]
1793:DRIVER/FatFs/source/ff.c **** 
 3962              		.loc 1 1793 26 view .LVU1333
 3963 0042 B4FBF2F1 		udiv	r1, r4, r2
 3964 0046 02FB1144 		mls	r4, r2, r1, r4
 3965              	.LVL484:
1793:DRIVER/FatFs/source/ff.c **** 
 3966              		.loc 1 1793 20 view .LVU1334
 3967 004a 2344     		add	r3, r3, r4
1793:DRIVER/FatFs/source/ff.c **** 
 3968              		.loc 1 1793 10 view .LVU1335
 3969 004c EB61     		str	r3, [r5, #28]
1795:DRIVER/FatFs/source/ff.c **** }
 3970              		.loc 1 1795 2 is_stmt 1 view .LVU1336
1795:DRIVER/FatFs/source/ff.c **** }
 3971              		.loc 1 1795 9 is_stmt 0 view .LVU1337
 3972 004e 0020     		movs	r0, #0
 3973              	.LVL485:
 3974              	.L282:
1796:DRIVER/FatFs/source/ff.c **** 
 3975              		.loc 1 1796 1 view .LVU1338
 3976 0050 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 3977              	.LVL486:
 3978              	.L295:
1763:DRIVER/FatFs/source/ff.c **** 			}
 3979              		.loc 1 1763 5 is_stmt 1 view .LVU1339
1763:DRIVER/FatFs/source/ff.c **** 			}
 3980              		.loc 1 1763 14 is_stmt 0 view .LVU1340
 3981 0054 0023     		movs	r3, #0
 3982 0056 AB61     		str	r3, [r5, #24]
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 152


1763:DRIVER/FatFs/source/ff.c **** 			}
 3983              		.loc 1 1763 19 is_stmt 1 view .LVU1341
1763:DRIVER/FatFs/source/ff.c **** 			}
 3984              		.loc 1 1763 26 is_stmt 0 view .LVU1342
 3985 0058 0420     		movs	r0, #4
 3986              	.LVL487:
1763:DRIVER/FatFs/source/ff.c **** 			}
 3987              		.loc 1 1763 26 view .LVU1343
 3988 005a F9E7     		b	.L282
 3989              	.LVL488:
 3990              	.L284:
1767:DRIVER/FatFs/source/ff.c **** 				clst = get_fat(&dp->obj, dp->clust);		/* Get next cluster */
 3991              		.loc 1 1767 4 is_stmt 1 view .LVU1344
1767:DRIVER/FatFs/source/ff.c **** 				clst = get_fat(&dp->obj, dp->clust);		/* Get next cluster */
 3992              		.loc 1 1767 15 is_stmt 0 view .LVU1345
 3993 005c B289     		ldrh	r2, [r6, #12]
1767:DRIVER/FatFs/source/ff.c **** 				clst = get_fat(&dp->obj, dp->clust);		/* Get next cluster */
 3994              		.loc 1 1767 13 view .LVU1346
 3995 005e B4FBF2F2 		udiv	r2, r4, r2
1767:DRIVER/FatFs/source/ff.c **** 				clst = get_fat(&dp->obj, dp->clust);		/* Get next cluster */
 3996              		.loc 1 1767 27 view .LVU1347
 3997 0062 7389     		ldrh	r3, [r6, #10]
1767:DRIVER/FatFs/source/ff.c **** 				clst = get_fat(&dp->obj, dp->clust);		/* Get next cluster */
 3998              		.loc 1 1767 35 view .LVU1348
 3999 0064 013B     		subs	r3, r3, #1
1767:DRIVER/FatFs/source/ff.c **** 				clst = get_fat(&dp->obj, dp->clust);		/* Get next cluster */
 4000              		.loc 1 1767 7 view .LVU1349
 4001 0066 1A42     		tst	r2, r3
 4002 0068 E7D1     		bne	.L283
1768:DRIVER/FatFs/source/ff.c **** 				if (clst <= 1) return FR_INT_ERR;			/* Internal error */
 4003              		.loc 1 1768 5 is_stmt 1 view .LVU1350
1768:DRIVER/FatFs/source/ff.c **** 				if (clst <= 1) return FR_INT_ERR;			/* Internal error */
 4004              		.loc 1 1768 12 is_stmt 0 view .LVU1351
 4005 006a 2846     		mov	r0, r5
 4006              	.LVL489:
1768:DRIVER/FatFs/source/ff.c **** 				if (clst <= 1) return FR_INT_ERR;			/* Internal error */
 4007              		.loc 1 1768 12 view .LVU1352
 4008 006c FFF7FEFF 		bl	get_fat
 4009              	.LVL490:
 4010 0070 8046     		mov	r8, r0
 4011              	.LVL491:
1769:DRIVER/FatFs/source/ff.c **** 				if (clst == 0xFFFFFFFF) return FR_DISK_ERR;	/* Disk error */
 4012              		.loc 1 1769 5 is_stmt 1 view .LVU1353
1769:DRIVER/FatFs/source/ff.c **** 				if (clst == 0xFFFFFFFF) return FR_DISK_ERR;	/* Disk error */
 4013              		.loc 1 1769 8 is_stmt 0 view .LVU1354
 4014 0072 0128     		cmp	r0, #1
 4015 0074 24D9     		bls	.L288
1770:DRIVER/FatFs/source/ff.c **** 				if (clst >= fs->n_fatent) {					/* It reached end of dynamic table */
 4016              		.loc 1 1770 5 is_stmt 1 view .LVU1355
1770:DRIVER/FatFs/source/ff.c **** 				if (clst >= fs->n_fatent) {					/* It reached end of dynamic table */
 4017              		.loc 1 1770 8 is_stmt 0 view .LVU1356
 4018 0076 B0F1FF3F 		cmp	r0, #-1
 4019 007a 23D0     		beq	.L289
1771:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY
 4020              		.loc 1 1771 5 is_stmt 1 view .LVU1357
1771:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY
 4021              		.loc 1 1771 19 is_stmt 0 view .LVU1358
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 153


 4022 007c F369     		ldr	r3, [r6, #28]
1771:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY
 4023              		.loc 1 1771 8 view .LVU1359
 4024 007e 8342     		cmp	r3, r0
 4025 0080 10D8     		bhi	.L285
1773:DRIVER/FatFs/source/ff.c **** 						dp->sect = 0; return FR_NO_FILE;
 4026              		.loc 1 1773 6 is_stmt 1 view .LVU1360
1773:DRIVER/FatFs/source/ff.c **** 						dp->sect = 0; return FR_NO_FILE;
 4027              		.loc 1 1773 9 is_stmt 0 view .LVU1361
 4028 0082 BFB1     		cbz	r7, .L296
1776:DRIVER/FatFs/source/ff.c **** 					if (clst == 0) return FR_DENIED;			/* No free cluster */
 4029              		.loc 1 1776 6 is_stmt 1 view .LVU1362
1776:DRIVER/FatFs/source/ff.c **** 					if (clst == 0) return FR_DENIED;			/* No free cluster */
 4030              		.loc 1 1776 13 is_stmt 0 view .LVU1363
 4031 0084 6969     		ldr	r1, [r5, #20]
 4032 0086 2846     		mov	r0, r5
 4033              	.LVL492:
1776:DRIVER/FatFs/source/ff.c **** 					if (clst == 0) return FR_DENIED;			/* No free cluster */
 4034              		.loc 1 1776 13 view .LVU1364
 4035 0088 FFF7FEFF 		bl	create_chain
 4036              	.LVL493:
1777:DRIVER/FatFs/source/ff.c **** 					if (clst == 1) return FR_INT_ERR;			/* Internal error */
 4037              		.loc 1 1777 6 is_stmt 1 view .LVU1365
1777:DRIVER/FatFs/source/ff.c **** 					if (clst == 1) return FR_INT_ERR;			/* Internal error */
 4038              		.loc 1 1777 9 is_stmt 0 view .LVU1366
 4039 008c 8046     		mov	r8, r0
 4040 008e D8B1     		cbz	r0, .L290
1778:DRIVER/FatFs/source/ff.c **** 					if (clst == 0xFFFFFFFF) return FR_DISK_ERR;	/* Disk error */
 4041              		.loc 1 1778 6 is_stmt 1 view .LVU1367
1778:DRIVER/FatFs/source/ff.c **** 					if (clst == 0xFFFFFFFF) return FR_DISK_ERR;	/* Disk error */
 4042              		.loc 1 1778 9 is_stmt 0 view .LVU1368
 4043 0090 0128     		cmp	r0, #1
 4044 0092 1BD0     		beq	.L291
1779:DRIVER/FatFs/source/ff.c **** 					if (dir_clear(fs, clst) != FR_OK) return FR_DISK_ERR;	/* Clean up the stretched table */
 4045              		.loc 1 1779 6 is_stmt 1 view .LVU1369
1779:DRIVER/FatFs/source/ff.c **** 					if (dir_clear(fs, clst) != FR_OK) return FR_DISK_ERR;	/* Clean up the stretched table */
 4046              		.loc 1 1779 9 is_stmt 0 view .LVU1370
 4047 0094 B0F1FF3F 		cmp	r0, #-1
 4048 0098 1AD0     		beq	.L292
1780:DRIVER/FatFs/source/ff.c **** 					if (FF_FS_EXFAT) dp->obj.stat |= 4;			/* exFAT: The directory has been stretched */
 4049              		.loc 1 1780 6 is_stmt 1 view .LVU1371
1780:DRIVER/FatFs/source/ff.c **** 					if (FF_FS_EXFAT) dp->obj.stat |= 4;			/* exFAT: The directory has been stretched */
 4050              		.loc 1 1780 10 is_stmt 0 view .LVU1372
 4051 009a 0146     		mov	r1, r0
 4052 009c 3046     		mov	r0, r6
 4053              	.LVL494:
1780:DRIVER/FatFs/source/ff.c **** 					if (FF_FS_EXFAT) dp->obj.stat |= 4;			/* exFAT: The directory has been stretched */
 4054              		.loc 1 1780 10 view .LVU1373
 4055 009e FFF7FEFF 		bl	dir_clear
 4056              	.LVL495:
1780:DRIVER/FatFs/source/ff.c **** 					if (FF_FS_EXFAT) dp->obj.stat |= 4;			/* exFAT: The directory has been stretched */
 4057              		.loc 1 1780 9 view .LVU1374
 4058 00a2 B8B9     		cbnz	r0, .L293
 4059              	.L285:
1787:DRIVER/FatFs/source/ff.c **** 				dp->sect = clst2sect(fs, clst);
 4060              		.loc 1 1787 5 is_stmt 1 view .LVU1375
1787:DRIVER/FatFs/source/ff.c **** 				dp->sect = clst2sect(fs, clst);
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 154


 4061              		.loc 1 1787 15 is_stmt 0 view .LVU1376
 4062 00a4 C5F81480 		str	r8, [r5, #20]
1788:DRIVER/FatFs/source/ff.c **** 			}
 4063              		.loc 1 1788 5 is_stmt 1 view .LVU1377
1788:DRIVER/FatFs/source/ff.c **** 			}
 4064              		.loc 1 1788 16 is_stmt 0 view .LVU1378
 4065 00a8 4146     		mov	r1, r8
 4066 00aa 3046     		mov	r0, r6
 4067 00ac FFF7FEFF 		bl	clst2sect
 4068              	.LVL496:
1788:DRIVER/FatFs/source/ff.c **** 			}
 4069              		.loc 1 1788 14 view .LVU1379
 4070 00b0 A861     		str	r0, [r5, #24]
 4071 00b2 C2E7     		b	.L283
 4072              	.LVL497:
 4073              	.L296:
1774:DRIVER/FatFs/source/ff.c **** 					}
 4074              		.loc 1 1774 7 is_stmt 1 view .LVU1380
1774:DRIVER/FatFs/source/ff.c **** 					}
 4075              		.loc 1 1774 16 is_stmt 0 view .LVU1381
 4076 00b4 0023     		movs	r3, #0
 4077 00b6 AB61     		str	r3, [r5, #24]
1774:DRIVER/FatFs/source/ff.c **** 					}
 4078              		.loc 1 1774 21 is_stmt 1 view .LVU1382
1774:DRIVER/FatFs/source/ff.c **** 					}
 4079              		.loc 1 1774 28 is_stmt 0 view .LVU1383
 4080 00b8 0420     		movs	r0, #4
 4081              	.LVL498:
1774:DRIVER/FatFs/source/ff.c **** 					}
 4082              		.loc 1 1774 28 view .LVU1384
 4083 00ba C9E7     		b	.L282
 4084              	.LVL499:
 4085              	.L287:
1756:DRIVER/FatFs/source/ff.c **** 
 4086              		.loc 1 1756 28 view .LVU1385
 4087 00bc 0420     		movs	r0, #4
 4088              	.LVL500:
1756:DRIVER/FatFs/source/ff.c **** 
 4089              		.loc 1 1756 28 view .LVU1386
 4090 00be C7E7     		b	.L282
 4091              	.LVL501:
 4092              	.L288:
1769:DRIVER/FatFs/source/ff.c **** 				if (clst == 0xFFFFFFFF) return FR_DISK_ERR;	/* Disk error */
 4093              		.loc 1 1769 27 view .LVU1387
 4094 00c0 0220     		movs	r0, #2
 4095              	.LVL502:
1769:DRIVER/FatFs/source/ff.c **** 				if (clst == 0xFFFFFFFF) return FR_DISK_ERR;	/* Disk error */
 4096              		.loc 1 1769 27 view .LVU1388
 4097 00c2 C5E7     		b	.L282
 4098              	.LVL503:
 4099              	.L289:
1770:DRIVER/FatFs/source/ff.c **** 				if (clst >= fs->n_fatent) {					/* It reached end of dynamic table */
 4100              		.loc 1 1770 36 view .LVU1389
 4101 00c4 0120     		movs	r0, #1
 4102              	.LVL504:
1770:DRIVER/FatFs/source/ff.c **** 				if (clst >= fs->n_fatent) {					/* It reached end of dynamic table */
 4103              		.loc 1 1770 36 view .LVU1390
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 155


 4104 00c6 C3E7     		b	.L282
 4105              	.LVL505:
 4106              	.L290:
1777:DRIVER/FatFs/source/ff.c **** 					if (clst == 1) return FR_INT_ERR;			/* Internal error */
 4107              		.loc 1 1777 28 view .LVU1391
 4108 00c8 0720     		movs	r0, #7
 4109              	.LVL506:
1777:DRIVER/FatFs/source/ff.c **** 					if (clst == 1) return FR_INT_ERR;			/* Internal error */
 4110              		.loc 1 1777 28 view .LVU1392
 4111 00ca C1E7     		b	.L282
 4112              	.LVL507:
 4113              	.L291:
1778:DRIVER/FatFs/source/ff.c **** 					if (clst == 0xFFFFFFFF) return FR_DISK_ERR;	/* Disk error */
 4114              		.loc 1 1778 28 view .LVU1393
 4115 00cc 0220     		movs	r0, #2
 4116              	.LVL508:
1778:DRIVER/FatFs/source/ff.c **** 					if (clst == 0xFFFFFFFF) return FR_DISK_ERR;	/* Disk error */
 4117              		.loc 1 1778 28 view .LVU1394
 4118 00ce BFE7     		b	.L282
 4119              	.LVL509:
 4120              	.L292:
1779:DRIVER/FatFs/source/ff.c **** 					if (dir_clear(fs, clst) != FR_OK) return FR_DISK_ERR;	/* Clean up the stretched table */
 4121              		.loc 1 1779 37 view .LVU1395
 4122 00d0 0120     		movs	r0, #1
 4123              	.LVL510:
1779:DRIVER/FatFs/source/ff.c **** 					if (dir_clear(fs, clst) != FR_OK) return FR_DISK_ERR;	/* Clean up the stretched table */
 4124              		.loc 1 1779 37 view .LVU1396
 4125 00d2 BDE7     		b	.L282
 4126              	.L293:
1780:DRIVER/FatFs/source/ff.c **** 					if (FF_FS_EXFAT) dp->obj.stat |= 4;			/* exFAT: The directory has been stretched */
 4127              		.loc 1 1780 47 view .LVU1397
 4128 00d4 0120     		movs	r0, #1
 4129 00d6 BBE7     		b	.L282
 4130              		.cfi_endproc
 4131              	.LFE18:
 4133              		.section	.text.dir_alloc,"ax",%progbits
 4134              		.align	1
 4135              		.syntax unified
 4136              		.thumb
 4137              		.thumb_func
 4139              	dir_alloc:
 4140              	.LVL511:
 4141              	.LFB19:
1810:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
 4142              		.loc 1 1810 1 is_stmt 1 view -0
 4143              		.cfi_startproc
 4144              		@ args = 0, pretend = 0, frame = 0
 4145              		@ frame_needed = 0, uses_anonymous_args = 0
1810:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
 4146              		.loc 1 1810 1 is_stmt 0 view .LVU1399
 4147 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 4148              	.LCFI23:
 4149              		.cfi_def_cfa_offset 24
 4150              		.cfi_offset 3, -24
 4151              		.cfi_offset 4, -20
 4152              		.cfi_offset 5, -16
 4153              		.cfi_offset 6, -12
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 156


 4154              		.cfi_offset 7, -8
 4155              		.cfi_offset 14, -4
 4156 0002 0446     		mov	r4, r0
 4157 0004 0E46     		mov	r6, r1
1811:DRIVER/FatFs/source/ff.c **** 	UINT n;
 4158              		.loc 1 1811 2 is_stmt 1 view .LVU1400
1812:DRIVER/FatFs/source/ff.c **** 	FATFS *fs = dp->obj.fs;
 4159              		.loc 1 1812 2 view .LVU1401
1813:DRIVER/FatFs/source/ff.c **** 
 4160              		.loc 1 1813 2 view .LVU1402
1813:DRIVER/FatFs/source/ff.c **** 
 4161              		.loc 1 1813 9 is_stmt 0 view .LVU1403
 4162 0006 0768     		ldr	r7, [r0]
 4163              	.LVL512:
1816:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
 4164              		.loc 1 1816 2 is_stmt 1 view .LVU1404
1816:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
 4165              		.loc 1 1816 8 is_stmt 0 view .LVU1405
 4166 0008 0021     		movs	r1, #0
 4167              	.LVL513:
1816:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
 4168              		.loc 1 1816 8 view .LVU1406
 4169 000a FFF7FEFF 		bl	dir_sdi
 4170              	.LVL514:
1817:DRIVER/FatFs/source/ff.c **** 		n = 0;
 4171              		.loc 1 1817 2 is_stmt 1 view .LVU1407
1817:DRIVER/FatFs/source/ff.c **** 		n = 0;
 4172              		.loc 1 1817 5 is_stmt 0 view .LVU1408
 4173 000e 0246     		mov	r2, r0
 4174 0010 C0B9     		cbnz	r0, .L298
1818:DRIVER/FatFs/source/ff.c **** 		do {
 4175              		.loc 1 1818 5 view .LVU1409
 4176 0012 0025     		movs	r5, #0
 4177 0014 08E0     		b	.L301
 4178              	.LVL515:
 4179              	.L299:
1827:DRIVER/FatFs/source/ff.c **** 			} else {
 4180              		.loc 1 1827 5 is_stmt 1 view .LVU1410
1827:DRIVER/FatFs/source/ff.c **** 			} else {
 4181              		.loc 1 1827 8 is_stmt 0 view .LVU1411
 4182 0016 0135     		adds	r5, r5, #1
 4183              	.LVL516:
1827:DRIVER/FatFs/source/ff.c **** 			} else {
 4184              		.loc 1 1827 8 view .LVU1412
 4185 0018 B542     		cmp	r5, r6
 4186 001a 13D0     		beq	.L298
 4187              	.LVL517:
 4188              	.L300:
1831:DRIVER/FatFs/source/ff.c **** 		} while (res == FR_OK);
 4189              		.loc 1 1831 4 is_stmt 1 view .LVU1413
1831:DRIVER/FatFs/source/ff.c **** 		} while (res == FR_OK);
 4190              		.loc 1 1831 10 is_stmt 0 view .LVU1414
 4191 001c 0121     		movs	r1, #1
 4192 001e 2046     		mov	r0, r4
 4193              	.LVL518:
1831:DRIVER/FatFs/source/ff.c **** 		} while (res == FR_OK);
 4194              		.loc 1 1831 10 view .LVU1415
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 157


 4195 0020 FFF7FEFF 		bl	dir_next
 4196              	.LVL519:
1832:DRIVER/FatFs/source/ff.c **** 	}
 4197              		.loc 1 1832 16 is_stmt 1 view .LVU1416
 4198 0024 0246     		mov	r2, r0
 4199 0026 68B9     		cbnz	r0, .L298
 4200              	.LVL520:
 4201              	.L301:
1819:DRIVER/FatFs/source/ff.c **** 			res = move_window(fs, dp->sect);
 4202              		.loc 1 1819 3 view .LVU1417
1820:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) break;
 4203              		.loc 1 1820 4 view .LVU1418
1820:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) break;
 4204              		.loc 1 1820 10 is_stmt 0 view .LVU1419
 4205 0028 A169     		ldr	r1, [r4, #24]
 4206 002a 3846     		mov	r0, r7
 4207              	.LVL521:
1820:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) break;
 4208              		.loc 1 1820 10 view .LVU1420
 4209 002c FFF7FEFF 		bl	move_window
 4210              	.LVL522:
1821:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
 4211              		.loc 1 1821 4 is_stmt 1 view .LVU1421
1821:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
 4212              		.loc 1 1821 7 is_stmt 0 view .LVU1422
 4213 0030 0246     		mov	r2, r0
 4214 0032 38B9     		cbnz	r0, .L298
1825:DRIVER/FatFs/source/ff.c **** #endif
 4215              		.loc 1 1825 4 is_stmt 1 view .LVU1423
1825:DRIVER/FatFs/source/ff.c **** #endif
 4216              		.loc 1 1825 10 is_stmt 0 view .LVU1424
 4217 0034 E369     		ldr	r3, [r4, #28]
1825:DRIVER/FatFs/source/ff.c **** #endif
 4218              		.loc 1 1825 15 view .LVU1425
 4219 0036 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
1825:DRIVER/FatFs/source/ff.c **** #endif
 4220              		.loc 1 1825 7 view .LVU1426
 4221 0038 E52B     		cmp	r3, #229
 4222 003a ECD0     		beq	.L299
1825:DRIVER/FatFs/source/ff.c **** #endif
 4223              		.loc 1 1825 34 discriminator 1 view .LVU1427
 4224 003c 002B     		cmp	r3, #0
 4225 003e EAD0     		beq	.L299
1829:DRIVER/FatFs/source/ff.c **** 			}
 4226              		.loc 1 1829 7 view .LVU1428
 4227 0040 0025     		movs	r5, #0
 4228              	.LVL523:
1829:DRIVER/FatFs/source/ff.c **** 			}
 4229              		.loc 1 1829 7 view .LVU1429
 4230 0042 EBE7     		b	.L300
 4231              	.LVL524:
 4232              	.L298:
1835:DRIVER/FatFs/source/ff.c **** 	return res;
 4233              		.loc 1 1835 2 is_stmt 1 view .LVU1430
1835:DRIVER/FatFs/source/ff.c **** 	return res;
 4234              		.loc 1 1835 5 is_stmt 0 view .LVU1431
 4235 0044 042A     		cmp	r2, #4
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 158


 4236 0046 01D0     		beq	.L306
 4237              	.LVL525:
 4238              	.L302:
1836:DRIVER/FatFs/source/ff.c **** }
 4239              		.loc 1 1836 2 is_stmt 1 view .LVU1432
1837:DRIVER/FatFs/source/ff.c **** 
 4240              		.loc 1 1837 1 is_stmt 0 view .LVU1433
 4241 0048 1046     		mov	r0, r2
 4242 004a F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 4243              	.LVL526:
 4244              	.L306:
1835:DRIVER/FatFs/source/ff.c **** 	return res;
 4245              		.loc 1 1835 29 view .LVU1434
 4246 004c 0722     		movs	r2, #7
 4247              	.LVL527:
1835:DRIVER/FatFs/source/ff.c **** 	return res;
 4248              		.loc 1 1835 29 view .LVU1435
 4249 004e FBE7     		b	.L302
 4250              		.cfi_endproc
 4251              	.LFE19:
 4253              		.section	.text.dir_read,"ax",%progbits
 4254              		.align	1
 4255              		.syntax unified
 4256              		.thumb
 4257              		.thumb_func
 4259              	dir_read:
 4260              	.LVL528:
 4261              	.LFB27:
2310:DRIVER/FatFs/source/ff.c **** 	FRESULT res = FR_NO_FILE;
 4262              		.loc 1 2310 1 is_stmt 1 view -0
 4263              		.cfi_startproc
 4264              		@ args = 0, pretend = 0, frame = 0
 4265              		@ frame_needed = 0, uses_anonymous_args = 0
2310:DRIVER/FatFs/source/ff.c **** 	FRESULT res = FR_NO_FILE;
 4266              		.loc 1 2310 1 is_stmt 0 view .LVU1437
 4267 0000 2DE9F843 		push	{r3, r4, r5, r6, r7, r8, r9, lr}
 4268              	.LCFI24:
 4269              		.cfi_def_cfa_offset 32
 4270              		.cfi_offset 3, -32
 4271              		.cfi_offset 4, -28
 4272              		.cfi_offset 5, -24
 4273              		.cfi_offset 6, -20
 4274              		.cfi_offset 7, -16
 4275              		.cfi_offset 8, -12
 4276              		.cfi_offset 9, -8
 4277              		.cfi_offset 14, -4
 4278 0004 0446     		mov	r4, r0
 4279 0006 8846     		mov	r8, r1
2311:DRIVER/FatFs/source/ff.c **** 	FATFS *fs = dp->obj.fs;
 4280              		.loc 1 2311 2 is_stmt 1 view .LVU1438
 4281              	.LVL529:
2312:DRIVER/FatFs/source/ff.c **** 	BYTE attr, b;
 4282              		.loc 1 2312 2 view .LVU1439
2312:DRIVER/FatFs/source/ff.c **** 	BYTE attr, b;
 4283              		.loc 1 2312 9 is_stmt 0 view .LVU1440
 4284 0008 0768     		ldr	r7, [r0]
 4285              	.LVL530:
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 159


2313:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN
 4286              		.loc 1 2313 2 is_stmt 1 view .LVU1441
2315:DRIVER/FatFs/source/ff.c **** #endif
 4287              		.loc 1 2315 2 view .LVU1442
2318:DRIVER/FatFs/source/ff.c **** 		res = move_window(fs, dp->sect);
 4288              		.loc 1 2318 2 view .LVU1443
2315:DRIVER/FatFs/source/ff.c **** #endif
 4289              		.loc 1 2315 19 is_stmt 0 view .LVU1444
 4290 000a 4FF0FF09 		mov	r9, #255
2315:DRIVER/FatFs/source/ff.c **** #endif
 4291              		.loc 1 2315 7 view .LVU1445
 4292 000e 4E46     		mov	r6, r9
2311:DRIVER/FatFs/source/ff.c **** 	FATFS *fs = dp->obj.fs;
 4293              		.loc 1 2311 10 view .LVU1446
 4294 0010 0425     		movs	r5, #4
2318:DRIVER/FatFs/source/ff.c **** 		res = move_window(fs, dp->sect);
 4295              		.loc 1 2318 8 view .LVU1447
 4296 0012 2EE0     		b	.L308
 4297              	.LVL531:
 4298              	.L326:
2347:DRIVER/FatFs/source/ff.c **** 					if (b & LLEF) {		/* Is it start of an LFN sequence? */
 4299              		.loc 1 2347 5 is_stmt 1 view .LVU1448
2347:DRIVER/FatFs/source/ff.c **** 					if (b & LLEF) {		/* Is it start of an LFN sequence? */
 4300              		.loc 1 2347 8 is_stmt 0 view .LVU1449
 4301 0014 0F2B     		cmp	r3, #15
 4302 0016 19D1     		bne	.L311
2348:DRIVER/FatFs/source/ff.c **** 						sum = dp->dir[LDIR_Chksum];
 4303              		.loc 1 2348 6 is_stmt 1 view .LVU1450
2348:DRIVER/FatFs/source/ff.c **** 						sum = dp->dir[LDIR_Chksum];
 4304              		.loc 1 2348 9 is_stmt 0 view .LVU1451
 4305 0018 12F0400F 		tst	r2, #64
 4306 001c 06D0     		beq	.L312
2349:DRIVER/FatFs/source/ff.c **** 						b &= (BYTE)~LLEF; ord = b;
 4307              		.loc 1 2349 7 is_stmt 1 view .LVU1452
2349:DRIVER/FatFs/source/ff.c **** 						b &= (BYTE)~LLEF; ord = b;
 4308              		.loc 1 2349 11 is_stmt 0 view .LVU1453
 4309 001e 91F80D90 		ldrb	r9, [r1, #13]	@ zero_extendqisi2
 4310              	.LVL532:
2350:DRIVER/FatFs/source/ff.c **** 						dp->blk_ofs = dp->dptr;
 4311              		.loc 1 2350 7 is_stmt 1 view .LVU1454
2350:DRIVER/FatFs/source/ff.c **** 						dp->blk_ofs = dp->dptr;
 4312              		.loc 1 2350 9 is_stmt 0 view .LVU1455
 4313 0022 02F0BF02 		and	r2, r2, #191
 4314              	.LVL533:
2350:DRIVER/FatFs/source/ff.c **** 						dp->blk_ofs = dp->dptr;
 4315              		.loc 1 2350 25 is_stmt 1 view .LVU1456
2351:DRIVER/FatFs/source/ff.c **** 					}
 4316              		.loc 1 2351 7 view .LVU1457
2351:DRIVER/FatFs/source/ff.c **** 					}
 4317              		.loc 1 2351 23 is_stmt 0 view .LVU1458
 4318 0026 2369     		ldr	r3, [r4, #16]
 4319              	.LVL534:
2351:DRIVER/FatFs/source/ff.c **** 					}
 4320              		.loc 1 2351 19 view .LVU1459
 4321 0028 E362     		str	r3, [r4, #44]
2350:DRIVER/FatFs/source/ff.c **** 						dp->blk_ofs = dp->dptr;
 4322              		.loc 1 2350 29 view .LVU1460
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 160


 4323 002a 1646     		mov	r6, r2
 4324              	.LVL535:
 4325              	.L312:
2354:DRIVER/FatFs/source/ff.c **** 				} else {				/* An SFN entry is found */
 4326              		.loc 1 2354 6 is_stmt 1 view .LVU1461
2354:DRIVER/FatFs/source/ff.c **** 				} else {				/* An SFN entry is found */
 4327              		.loc 1 2354 10 is_stmt 0 view .LVU1462
 4328 002c B242     		cmp	r2, r6
 4329 002e 01D0     		beq	.L324
2354:DRIVER/FatFs/source/ff.c **** 				} else {				/* An SFN entry is found */
 4330              		.loc 1 2354 10 view .LVU1463
 4331 0030 FF26     		movs	r6, #255
 4332              	.LVL536:
2354:DRIVER/FatFs/source/ff.c **** 				} else {				/* An SFN entry is found */
 4333              		.loc 1 2354 10 view .LVU1464
 4334 0032 18E0     		b	.L310
 4335              	.LVL537:
 4336              	.L324:
2354:DRIVER/FatFs/source/ff.c **** 				} else {				/* An SFN entry is found */
 4337              		.loc 1 2354 39 discriminator 1 view .LVU1465
 4338 0034 4B7B     		ldrb	r3, [r1, #13]	@ zero_extendqisi2
2354:DRIVER/FatFs/source/ff.c **** 				} else {				/* An SFN entry is found */
 4339              		.loc 1 2354 22 discriminator 1 view .LVU1466
 4340 0036 4B45     		cmp	r3, r9
 4341 0038 01D0     		beq	.L325
2354:DRIVER/FatFs/source/ff.c **** 				} else {				/* An SFN entry is found */
 4342              		.loc 1 2354 10 view .LVU1467
 4343 003a FF26     		movs	r6, #255
 4344              	.LVL538:
2354:DRIVER/FatFs/source/ff.c **** 				} else {				/* An SFN entry is found */
 4345              		.loc 1 2354 10 view .LVU1468
 4346 003c 13E0     		b	.L310
 4347              	.LVL539:
 4348              	.L325:
2354:DRIVER/FatFs/source/ff.c **** 				} else {				/* An SFN entry is found */
 4349              		.loc 1 2354 56 discriminator 3 view .LVU1469
 4350 003e 3869     		ldr	r0, [r7, #16]
 4351 0040 FFF7FEFF 		bl	pick_lfn
 4352              	.LVL540:
2354:DRIVER/FatFs/source/ff.c **** 				} else {				/* An SFN entry is found */
 4353              		.loc 1 2354 53 discriminator 3 view .LVU1470
 4354 0044 88B3     		cbz	r0, .L322
2354:DRIVER/FatFs/source/ff.c **** 				} else {				/* An SFN entry is found */
 4355              		.loc 1 2354 10 discriminator 5 view .LVU1471
 4356 0046 013E     		subs	r6, r6, #1
 4357              	.LVL541:
2354:DRIVER/FatFs/source/ff.c **** 				} else {				/* An SFN entry is found */
 4358              		.loc 1 2354 10 discriminator 5 view .LVU1472
 4359 0048 F6B2     		uxtb	r6, r6
 4360 004a 0CE0     		b	.L310
 4361              	.LVL542:
 4362              	.L311:
2356:DRIVER/FatFs/source/ff.c **** 						dp->blk_ofs = 0xFFFFFFFF;	/* It has no LFN. */
 4363              		.loc 1 2356 6 is_stmt 1 view .LVU1473
2356:DRIVER/FatFs/source/ff.c **** 						dp->blk_ofs = 0xFFFFFFFF;	/* It has no LFN. */
 4364              		.loc 1 2356 9 is_stmt 0 view .LVU1474
 4365 004c 26B9     		cbnz	r6, .L313
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 161


2356:DRIVER/FatFs/source/ff.c **** 						dp->blk_ofs = 0xFFFFFFFF;	/* It has no LFN. */
 4366              		.loc 1 2356 29 discriminator 1 view .LVU1475
 4367 004e 0846     		mov	r0, r1
 4368 0050 FFF7FEFF 		bl	sum_sfn
 4369              	.LVL543:
2356:DRIVER/FatFs/source/ff.c **** 						dp->blk_ofs = 0xFFFFFFFF;	/* It has no LFN. */
 4370              		.loc 1 2356 19 discriminator 1 view .LVU1476
 4371 0054 4845     		cmp	r0, r9
 4372 0056 2BD0     		beq	.L309
 4373              	.L313:
2357:DRIVER/FatFs/source/ff.c **** 					}
 4374              		.loc 1 2357 7 is_stmt 1 view .LVU1477
2357:DRIVER/FatFs/source/ff.c **** 					}
 4375              		.loc 1 2357 19 is_stmt 0 view .LVU1478
 4376 0058 4FF0FF33 		mov	r3, #-1
 4377 005c E362     		str	r3, [r4, #44]
 4378 005e 27E0     		b	.L309
 4379              	.LVL544:
 4380              	.L317:
2345:DRIVER/FatFs/source/ff.c **** 			} else {
 4381              		.loc 1 2345 9 view .LVU1479
 4382 0060 FF26     		movs	r6, #255
 4383              	.LVL545:
2345:DRIVER/FatFs/source/ff.c **** 			} else {
 4384              		.loc 1 2345 9 view .LVU1480
 4385 0062 00E0     		b	.L310
 4386              	.LVL546:
 4387              	.L318:
2345:DRIVER/FatFs/source/ff.c **** 			} else {
 4388              		.loc 1 2345 9 view .LVU1481
 4389 0064 FF26     		movs	r6, #255
 4390              	.LVL547:
 4391              	.L310:
2368:DRIVER/FatFs/source/ff.c **** 		if (res != FR_OK) break;
 4392              		.loc 1 2368 3 is_stmt 1 view .LVU1482
2368:DRIVER/FatFs/source/ff.c **** 		if (res != FR_OK) break;
 4393              		.loc 1 2368 9 is_stmt 0 view .LVU1483
 4394 0066 0021     		movs	r1, #0
 4395 0068 2046     		mov	r0, r4
 4396 006a FFF7FEFF 		bl	dir_next
 4397              	.LVL548:
2369:DRIVER/FatFs/source/ff.c **** 	}
 4398              		.loc 1 2369 3 is_stmt 1 view .LVU1484
2369:DRIVER/FatFs/source/ff.c **** 	}
 4399              		.loc 1 2369 6 is_stmt 0 view .LVU1485
 4400 006e 0546     		mov	r5, r0
 4401 0070 F0B9     		cbnz	r0, .L309
 4402              	.LVL549:
 4403              	.L308:
2318:DRIVER/FatFs/source/ff.c **** 		res = move_window(fs, dp->sect);
 4404              		.loc 1 2318 9 is_stmt 1 view .LVU1486
2318:DRIVER/FatFs/source/ff.c **** 		res = move_window(fs, dp->sect);
 4405              		.loc 1 2318 11 is_stmt 0 view .LVU1487
 4406 0072 A169     		ldr	r1, [r4, #24]
2318:DRIVER/FatFs/source/ff.c **** 		res = move_window(fs, dp->sect);
 4407              		.loc 1 2318 9 view .LVU1488
 4408 0074 E1B1     		cbz	r1, .L309
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 162


2319:DRIVER/FatFs/source/ff.c **** 		if (res != FR_OK) break;
 4409              		.loc 1 2319 3 is_stmt 1 view .LVU1489
2319:DRIVER/FatFs/source/ff.c **** 		if (res != FR_OK) break;
 4410              		.loc 1 2319 9 is_stmt 0 view .LVU1490
 4411 0076 3846     		mov	r0, r7
 4412 0078 FFF7FEFF 		bl	move_window
 4413              	.LVL550:
2320:DRIVER/FatFs/source/ff.c **** 		b = dp->dir[DIR_Name];	/* Test for the entry type */
 4414              		.loc 1 2320 3 is_stmt 1 view .LVU1491
2320:DRIVER/FatFs/source/ff.c **** 		b = dp->dir[DIR_Name];	/* Test for the entry type */
 4415              		.loc 1 2320 6 is_stmt 0 view .LVU1492
 4416 007c 0546     		mov	r5, r0
 4417 007e B8B9     		cbnz	r0, .L309
2321:DRIVER/FatFs/source/ff.c **** 		if (b == 0) {
 4418              		.loc 1 2321 3 is_stmt 1 view .LVU1493
2321:DRIVER/FatFs/source/ff.c **** 		if (b == 0) {
 4419              		.loc 1 2321 9 is_stmt 0 view .LVU1494
 4420 0080 E169     		ldr	r1, [r4, #28]
2321:DRIVER/FatFs/source/ff.c **** 		if (b == 0) {
 4421              		.loc 1 2321 5 view .LVU1495
 4422 0082 0A78     		ldrb	r2, [r1]	@ zero_extendqisi2
 4423              	.LVL551:
2322:DRIVER/FatFs/source/ff.c **** 			res = FR_NO_FILE; break; /* Reached to end of the directory */
 4424              		.loc 1 2322 3 is_stmt 1 view .LVU1496
2322:DRIVER/FatFs/source/ff.c **** 			res = FR_NO_FILE; break; /* Reached to end of the directory */
 4425              		.loc 1 2322 6 is_stmt 0 view .LVU1497
 4426 0084 9AB1     		cbz	r2, .L316
2342:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN		/* LFN configuration */
 4427              		.loc 1 2342 4 is_stmt 1 view .LVU1498
2342:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN		/* LFN configuration */
 4428              		.loc 1 2342 33 is_stmt 0 view .LVU1499
 4429 0086 CB7A     		ldrb	r3, [r1, #11]	@ zero_extendqisi2
2342:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN		/* LFN configuration */
 4430              		.loc 1 2342 24 view .LVU1500
 4431 0088 03F03F03 		and	r3, r3, #63
 4432              	.LVL552:
2342:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN		/* LFN configuration */
 4433              		.loc 1 2342 17 view .LVU1501
 4434 008c A371     		strb	r3, [r4, #6]
2344:DRIVER/FatFs/source/ff.c **** 				ord = 0xFF;
 4435              		.loc 1 2344 4 is_stmt 1 view .LVU1502
2344:DRIVER/FatFs/source/ff.c **** 				ord = 0xFF;
 4436              		.loc 1 2344 7 is_stmt 0 view .LVU1503
 4437 008e E52A     		cmp	r2, #229
 4438 0090 E6D0     		beq	.L317
2344:DRIVER/FatFs/source/ff.c **** 				ord = 0xFF;
 4439              		.loc 1 2344 18 discriminator 1 view .LVU1504
 4440 0092 2E2A     		cmp	r2, #46
 4441 0094 E6D0     		beq	.L318
2344:DRIVER/FatFs/source/ff.c **** 				ord = 0xFF;
 4442              		.loc 1 2344 45 discriminator 2 view .LVU1505
 4443 0096 23F02000 		bic	r0, r3, #32
 4444              	.LVL553:
2344:DRIVER/FatFs/source/ff.c **** 				ord = 0xFF;
 4445              		.loc 1 2344 33 discriminator 2 view .LVU1506
 4446 009a 0828     		cmp	r0, #8
 4447 009c 14BF     		ite	ne
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 163


 4448 009e 0020     		movne	r0, #0
 4449 00a0 0120     		moveq	r0, #1
2344:DRIVER/FatFs/source/ff.c **** 				ord = 0xFF;
 4450              		.loc 1 2344 30 discriminator 2 view .LVU1507
 4451 00a2 4045     		cmp	r0, r8
 4452 00a4 B6D0     		beq	.L326
2345:DRIVER/FatFs/source/ff.c **** 			} else {
 4453              		.loc 1 2345 9 view .LVU1508
 4454 00a6 FF26     		movs	r6, #255
 4455              	.LVL554:
2345:DRIVER/FatFs/source/ff.c **** 			} else {
 4456              		.loc 1 2345 9 view .LVU1509
 4457 00a8 DDE7     		b	.L310
 4458              	.LVL555:
 4459              	.L322:
2354:DRIVER/FatFs/source/ff.c **** 				} else {				/* An SFN entry is found */
 4460              		.loc 1 2354 10 view .LVU1510
 4461 00aa FF26     		movs	r6, #255
 4462              	.LVL556:
2354:DRIVER/FatFs/source/ff.c **** 				} else {				/* An SFN entry is found */
 4463              		.loc 1 2354 10 view .LVU1511
 4464 00ac DBE7     		b	.L310
 4465              	.LVL557:
 4466              	.L316:
2323:DRIVER/FatFs/source/ff.c **** 		}
 4467              		.loc 1 2323 8 view .LVU1512
 4468 00ae 0425     		movs	r5, #4
 4469              	.LVL558:
 4470              	.L309:
2372:DRIVER/FatFs/source/ff.c **** 	return res;
 4471              		.loc 1 2372 2 is_stmt 1 view .LVU1513
2372:DRIVER/FatFs/source/ff.c **** 	return res;
 4472              		.loc 1 2372 5 is_stmt 0 view .LVU1514
 4473 00b0 0DB1     		cbz	r5, .L315
2372:DRIVER/FatFs/source/ff.c **** 	return res;
 4474              		.loc 1 2372 20 is_stmt 1 discriminator 1 view .LVU1515
2372:DRIVER/FatFs/source/ff.c **** 	return res;
 4475              		.loc 1 2372 29 is_stmt 0 discriminator 1 view .LVU1516
 4476 00b2 0023     		movs	r3, #0
 4477 00b4 A361     		str	r3, [r4, #24]
 4478              	.L315:
2373:DRIVER/FatFs/source/ff.c **** }
 4479              		.loc 1 2373 2 is_stmt 1 view .LVU1517
2374:DRIVER/FatFs/source/ff.c **** 
 4480              		.loc 1 2374 1 is_stmt 0 view .LVU1518
 4481 00b6 2846     		mov	r0, r5
 4482 00b8 BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
2374:DRIVER/FatFs/source/ff.c **** 
 4483              		.loc 1 2374 1 view .LVU1519
 4484              		.cfi_endproc
 4485              	.LFE27:
 4487              		.section	.text.dir_remove,"ax",%progbits
 4488              		.align	1
 4489              		.syntax unified
 4490              		.thumb
 4491              		.thumb_func
 4493              	dir_remove:
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 164


 4494              	.LVL559:
 4495              	.LFB30:
2574:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
 4496              		.loc 1 2574 1 is_stmt 1 view -0
 4497              		.cfi_startproc
 4498              		@ args = 0, pretend = 0, frame = 0
 4499              		@ frame_needed = 0, uses_anonymous_args = 0
2574:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
 4500              		.loc 1 2574 1 is_stmt 0 view .LVU1521
 4501 0000 70B5     		push	{r4, r5, r6, lr}
 4502              	.LCFI25:
 4503              		.cfi_def_cfa_offset 16
 4504              		.cfi_offset 4, -16
 4505              		.cfi_offset 5, -12
 4506              		.cfi_offset 6, -8
 4507              		.cfi_offset 14, -4
 4508 0002 0446     		mov	r4, r0
2575:DRIVER/FatFs/source/ff.c **** 	FATFS *fs = dp->obj.fs;
 4509              		.loc 1 2575 2 is_stmt 1 view .LVU1522
2576:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN		/* LFN configuration */
 4510              		.loc 1 2576 2 view .LVU1523
2576:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN		/* LFN configuration */
 4511              		.loc 1 2576 9 is_stmt 0 view .LVU1524
 4512 0004 0568     		ldr	r5, [r0]
 4513              	.LVL560:
2578:DRIVER/FatFs/source/ff.c **** 
 4514              		.loc 1 2578 2 is_stmt 1 view .LVU1525
2578:DRIVER/FatFs/source/ff.c **** 
 4515              		.loc 1 2578 8 is_stmt 0 view .LVU1526
 4516 0006 0669     		ldr	r6, [r0, #16]
 4517              	.LVL561:
2580:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
 4518              		.loc 1 2580 2 is_stmt 1 view .LVU1527
2580:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
 4519              		.loc 1 2580 11 is_stmt 0 view .LVU1528
 4520 0008 C16A     		ldr	r1, [r0, #44]
2580:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
 4521              		.loc 1 2580 44 view .LVU1529
 4522 000a B1F1FF3F 		cmp	r1, #-1
 4523 000e 1AD1     		bne	.L335
 4524 0010 0023     		movs	r3, #0
 4525              	.LVL562:
 4526              	.L328:
2581:DRIVER/FatFs/source/ff.c **** 		do {
 4527              		.loc 1 2581 2 is_stmt 1 discriminator 4 view .LVU1530
2581:DRIVER/FatFs/source/ff.c **** 		do {
 4528              		.loc 1 2581 5 is_stmt 0 discriminator 4 view .LVU1531
 4529 0012 B3B9     		cbnz	r3, .L329
 4530              	.LVL563:
 4531              	.L331:
2582:DRIVER/FatFs/source/ff.c **** 			res = move_window(fs, dp->sect);
 4532              		.loc 1 2582 3 is_stmt 1 view .LVU1532
2583:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) break;
 4533              		.loc 1 2583 4 view .LVU1533
2583:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) break;
 4534              		.loc 1 2583 10 is_stmt 0 view .LVU1534
 4535 0014 A169     		ldr	r1, [r4, #24]
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 165


 4536 0016 2846     		mov	r0, r5
 4537 0018 FFF7FEFF 		bl	move_window
 4538              	.LVL564:
2584:DRIVER/FatFs/source/ff.c **** 			if (FF_FS_EXFAT && fs->fs_type == FS_EXFAT) {	/* On the exFAT volume */
 4539              		.loc 1 2584 4 is_stmt 1 view .LVU1535
2584:DRIVER/FatFs/source/ff.c **** 			if (FF_FS_EXFAT && fs->fs_type == FS_EXFAT) {	/* On the exFAT volume */
 4540              		.loc 1 2584 7 is_stmt 0 view .LVU1536
 4541 001c 0346     		mov	r3, r0
 4542 001e 70B9     		cbnz	r0, .L330
2585:DRIVER/FatFs/source/ff.c **** 				dp->dir[XDIR_Type] &= 0x7F;	/* Clear the entry InUse flag. */
 4543              		.loc 1 2585 4 is_stmt 1 view .LVU1537
2588:DRIVER/FatFs/source/ff.c **** 			}
 4544              		.loc 1 2588 5 view .LVU1538
2588:DRIVER/FatFs/source/ff.c **** 			}
 4545              		.loc 1 2588 7 is_stmt 0 view .LVU1539
 4546 0020 E269     		ldr	r2, [r4, #28]
2588:DRIVER/FatFs/source/ff.c **** 			}
 4547              		.loc 1 2588 23 view .LVU1540
 4548 0022 E521     		movs	r1, #229
 4549 0024 1170     		strb	r1, [r2]
2590:DRIVER/FatFs/source/ff.c **** 			if (dp->dptr >= last) break;	/* If reached last entry then all entries of the object has been de
 4550              		.loc 1 2590 4 is_stmt 1 view .LVU1541
2590:DRIVER/FatFs/source/ff.c **** 			if (dp->dptr >= last) break;	/* If reached last entry then all entries of the object has been de
 4551              		.loc 1 2590 14 is_stmt 0 view .LVU1542
 4552 0026 0122     		movs	r2, #1
 4553 0028 2A71     		strb	r2, [r5, #4]
2591:DRIVER/FatFs/source/ff.c **** 			res = dir_next(dp, 0);	/* Next entry */
 4554              		.loc 1 2591 4 is_stmt 1 view .LVU1543
2591:DRIVER/FatFs/source/ff.c **** 			res = dir_next(dp, 0);	/* Next entry */
 4555              		.loc 1 2591 10 is_stmt 0 view .LVU1544
 4556 002a 2269     		ldr	r2, [r4, #16]
2591:DRIVER/FatFs/source/ff.c **** 			res = dir_next(dp, 0);	/* Next entry */
 4557              		.loc 1 2591 7 view .LVU1545
 4558 002c B242     		cmp	r2, r6
 4559 002e 06D2     		bcs	.L330
2592:DRIVER/FatFs/source/ff.c **** 		} while (res == FR_OK);
 4560              		.loc 1 2592 4 is_stmt 1 view .LVU1546
2592:DRIVER/FatFs/source/ff.c **** 		} while (res == FR_OK);
 4561              		.loc 1 2592 10 is_stmt 0 view .LVU1547
 4562 0030 0021     		movs	r1, #0
 4563 0032 2046     		mov	r0, r4
 4564              	.LVL565:
2592:DRIVER/FatFs/source/ff.c **** 		} while (res == FR_OK);
 4565              		.loc 1 2592 10 view .LVU1548
 4566 0034 FFF7FEFF 		bl	dir_next
 4567              	.LVL566:
2593:DRIVER/FatFs/source/ff.c **** 		if (res == FR_NO_FILE) res = FR_INT_ERR;
 4568              		.loc 1 2593 16 is_stmt 1 view .LVU1549
 4569 0038 0346     		mov	r3, r0
 4570 003a 0028     		cmp	r0, #0
 4571 003c EAD0     		beq	.L331
 4572              	.L330:
 4573              	.LVL567:
2594:DRIVER/FatFs/source/ff.c **** 	}
 4574              		.loc 1 2594 3 view .LVU1550
2594:DRIVER/FatFs/source/ff.c **** 	}
 4575              		.loc 1 2594 6 is_stmt 0 view .LVU1551
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 166


 4576 003e 042B     		cmp	r3, #4
 4577 0040 05D0     		beq	.L336
 4578              	.LVL568:
 4579              	.L329:
2605:DRIVER/FatFs/source/ff.c **** }
 4580              		.loc 1 2605 2 is_stmt 1 view .LVU1552
2606:DRIVER/FatFs/source/ff.c **** 
 4581              		.loc 1 2606 1 is_stmt 0 view .LVU1553
 4582 0042 1846     		mov	r0, r3
 4583 0044 70BD     		pop	{r4, r5, r6, pc}
 4584              	.LVL569:
 4585              	.L335:
2580:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
 4586              		.loc 1 2580 46 discriminator 1 view .LVU1554
 4587 0046 FFF7FEFF 		bl	dir_sdi
 4588              	.LVL570:
2580:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
 4589              		.loc 1 2580 46 discriminator 1 view .LVU1555
 4590 004a 0346     		mov	r3, r0
 4591 004c E1E7     		b	.L328
 4592              	.LVL571:
 4593              	.L336:
2594:DRIVER/FatFs/source/ff.c **** 	}
 4594              		.loc 1 2594 30 view .LVU1556
 4595 004e 0223     		movs	r3, #2
 4596              	.LVL572:
2594:DRIVER/FatFs/source/ff.c **** 	}
 4597              		.loc 1 2594 30 view .LVU1557
 4598 0050 F7E7     		b	.L329
 4599              		.cfi_endproc
 4600              	.LFE30:
 4602              		.section	.text.sync_fs,"ax",%progbits
 4603              		.align	1
 4604              		.syntax unified
 4605              		.thumb
 4606              		.thumb_func
 4608              	sync_fs:
 4609              	.LVL573:
 4610              	.LFB10:
1111:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
 4611              		.loc 1 1111 1 is_stmt 1 view -0
 4612              		.cfi_startproc
 4613              		@ args = 0, pretend = 0, frame = 0
 4614              		@ frame_needed = 0, uses_anonymous_args = 0
1111:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
 4615              		.loc 1 1111 1 is_stmt 0 view .LVU1559
 4616 0000 70B5     		push	{r4, r5, r6, lr}
 4617              	.LCFI26:
 4618              		.cfi_def_cfa_offset 16
 4619              		.cfi_offset 4, -16
 4620              		.cfi_offset 5, -12
 4621              		.cfi_offset 6, -8
 4622              		.cfi_offset 14, -4
 4623 0002 0446     		mov	r4, r0
1112:DRIVER/FatFs/source/ff.c **** 
 4624              		.loc 1 1112 2 is_stmt 1 view .LVU1560
1115:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 167


 4625              		.loc 1 1115 2 view .LVU1561
1115:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
 4626              		.loc 1 1115 8 is_stmt 0 view .LVU1562
 4627 0004 FFF7FEFF 		bl	sync_window
 4628              	.LVL574:
1116:DRIVER/FatFs/source/ff.c **** 		if (fs->fs_type == FS_FAT32 && fs->fsi_flag == 1) {	/* FAT32: Update FSInfo sector if needed */
 4629              		.loc 1 1116 2 is_stmt 1 view .LVU1563
1116:DRIVER/FatFs/source/ff.c **** 		if (fs->fs_type == FS_FAT32 && fs->fsi_flag == 1) {	/* FAT32: Update FSInfo sector if needed */
 4630              		.loc 1 1116 5 is_stmt 0 view .LVU1564
 4631 0008 0546     		mov	r5, r0
 4632 000a 48B9     		cbnz	r0, .L338
1117:DRIVER/FatFs/source/ff.c **** 			/* Create FSInfo structure */
 4633              		.loc 1 1117 3 is_stmt 1 view .LVU1565
1117:DRIVER/FatFs/source/ff.c **** 			/* Create FSInfo structure */
 4634              		.loc 1 1117 9 is_stmt 0 view .LVU1566
 4635 000c 2378     		ldrb	r3, [r4]	@ zero_extendqisi2
1117:DRIVER/FatFs/source/ff.c **** 			/* Create FSInfo structure */
 4636              		.loc 1 1117 6 view .LVU1567
 4637 000e 032B     		cmp	r3, #3
 4638 0010 08D0     		beq	.L342
 4639              	.LVL575:
 4640              	.L339:
1130:DRIVER/FatFs/source/ff.c **** 	}
 4641              		.loc 1 1130 3 is_stmt 1 view .LVU1568
1130:DRIVER/FatFs/source/ff.c **** 	}
 4642              		.loc 1 1130 7 is_stmt 0 view .LVU1569
 4643 0012 0022     		movs	r2, #0
 4644 0014 1146     		mov	r1, r2
 4645 0016 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 4646 0018 FFF7FEFF 		bl	disk_ioctl
 4647              	.LVL576:
1130:DRIVER/FatFs/source/ff.c **** 	}
 4648              		.loc 1 1130 6 view .LVU1570
 4649 001c 00B1     		cbz	r0, .L338
1130:DRIVER/FatFs/source/ff.c **** 	}
 4650              		.loc 1 1130 57 view .LVU1571
 4651 001e 0125     		movs	r5, #1
 4652              	.L338:
 4653              	.LVL577:
1133:DRIVER/FatFs/source/ff.c **** }
 4654              		.loc 1 1133 2 is_stmt 1 view .LVU1572
1134:DRIVER/FatFs/source/ff.c **** 
 4655              		.loc 1 1134 1 is_stmt 0 view .LVU1573
 4656 0020 2846     		mov	r0, r5
 4657 0022 70BD     		pop	{r4, r5, r6, pc}
 4658              	.LVL578:
 4659              	.L342:
1117:DRIVER/FatFs/source/ff.c **** 			/* Create FSInfo structure */
 4660              		.loc 1 1117 36 discriminator 1 view .LVU1574
 4661 0024 6379     		ldrb	r3, [r4, #5]	@ zero_extendqisi2
1117:DRIVER/FatFs/source/ff.c **** 			/* Create FSInfo structure */
 4662              		.loc 1 1117 31 discriminator 1 view .LVU1575
 4663 0026 012B     		cmp	r3, #1
 4664 0028 F3D1     		bne	.L339
1119:DRIVER/FatFs/source/ff.c **** 			st_word(fs->win + BS_55AA, 0xAA55);					/* Boot signature */
 4665              		.loc 1 1119 4 is_stmt 1 view .LVU1576
1119:DRIVER/FatFs/source/ff.c **** 			st_word(fs->win + BS_55AA, 0xAA55);					/* Boot signature */
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 168


 4666              		.loc 1 1119 13 is_stmt 0 view .LVU1577
 4667 002a 04F13806 		add	r6, r4, #56
1119:DRIVER/FatFs/source/ff.c **** 			st_word(fs->win + BS_55AA, 0xAA55);					/* Boot signature */
 4668              		.loc 1 1119 4 view .LVU1578
 4669 002e 4FF48052 		mov	r2, #4096
 4670 0032 0021     		movs	r1, #0
 4671 0034 3046     		mov	r0, r6
 4672              	.LVL579:
1119:DRIVER/FatFs/source/ff.c **** 			st_word(fs->win + BS_55AA, 0xAA55);					/* Boot signature */
 4673              		.loc 1 1119 4 view .LVU1579
 4674 0036 FFF7FEFF 		bl	memset
 4675              	.LVL580:
1120:DRIVER/FatFs/source/ff.c **** 			st_dword(fs->win + FSI_LeadSig, 0x41615252);		/* Leading signature */
 4676              		.loc 1 1120 4 is_stmt 1 view .LVU1580
 4677 003a 4AF65521 		movw	r1, #43605
 4678 003e 04F23620 		addw	r0, r4, #566
 4679 0042 FFF7FEFF 		bl	st_word
 4680              	.LVL581:
1121:DRIVER/FatFs/source/ff.c **** 			st_dword(fs->win + FSI_StrucSig, 0x61417272);		/* Structure signature */
 4681              		.loc 1 1121 4 view .LVU1581
 4682 0046 0F49     		ldr	r1, .L343
 4683 0048 3046     		mov	r0, r6
 4684 004a FFF7FEFF 		bl	st_dword
 4685              	.LVL582:
1122:DRIVER/FatFs/source/ff.c **** 			st_dword(fs->win + FSI_Free_Count, fs->free_clst);	/* Number of free clusters */
 4686              		.loc 1 1122 4 view .LVU1582
 4687 004e 0E49     		ldr	r1, .L343+4
 4688 0050 04F50770 		add	r0, r4, #540
 4689 0054 FFF7FEFF 		bl	st_dword
 4690              	.LVL583:
1123:DRIVER/FatFs/source/ff.c **** 			st_dword(fs->win + FSI_Nxt_Free, fs->last_clst);	/* Last allocated culuster */
 4691              		.loc 1 1123 4 view .LVU1583
 4692 0058 A169     		ldr	r1, [r4, #24]
 4693 005a 04F50870 		add	r0, r4, #544
 4694 005e FFF7FEFF 		bl	st_dword
 4695              	.LVL584:
1124:DRIVER/FatFs/source/ff.c **** 			fs->winsect = fs->volbase + 1;						/* Write it into the FSInfo sector (Next to VBR) */
 4696              		.loc 1 1124 4 view .LVU1584
 4697 0062 6169     		ldr	r1, [r4, #20]
 4698 0064 04F50970 		add	r0, r4, #548
 4699 0068 FFF7FEFF 		bl	st_dword
 4700              	.LVL585:
1125:DRIVER/FatFs/source/ff.c **** 			disk_write(fs->pdrv, fs->win, fs->winsect, 1);
 4701              		.loc 1 1125 4 view .LVU1585
1125:DRIVER/FatFs/source/ff.c **** 			disk_write(fs->pdrv, fs->win, fs->winsect, 1);
 4702              		.loc 1 1125 20 is_stmt 0 view .LVU1586
 4703 006c 626A     		ldr	r2, [r4, #36]
1125:DRIVER/FatFs/source/ff.c **** 			disk_write(fs->pdrv, fs->win, fs->winsect, 1);
 4704              		.loc 1 1125 30 view .LVU1587
 4705 006e 0132     		adds	r2, r2, #1
1125:DRIVER/FatFs/source/ff.c **** 			disk_write(fs->pdrv, fs->win, fs->winsect, 1);
 4706              		.loc 1 1125 16 view .LVU1588
 4707 0070 6263     		str	r2, [r4, #52]
1126:DRIVER/FatFs/source/ff.c **** 			fs->fsi_flag = 0;
 4708              		.loc 1 1126 4 is_stmt 1 view .LVU1589
 4709 0072 0123     		movs	r3, #1
 4710 0074 3146     		mov	r1, r6
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 169


 4711 0076 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 4712 0078 FFF7FEFF 		bl	disk_write
 4713              	.LVL586:
1127:DRIVER/FatFs/source/ff.c **** 		}
 4714              		.loc 1 1127 4 view .LVU1590
1127:DRIVER/FatFs/source/ff.c **** 		}
 4715              		.loc 1 1127 17 is_stmt 0 view .LVU1591
 4716 007c 0023     		movs	r3, #0
 4717 007e 6371     		strb	r3, [r4, #5]
 4718 0080 C7E7     		b	.L339
 4719              	.L344:
 4720 0082 00BF     		.align	2
 4721              	.L343:
 4722 0084 52526141 		.word	1096897106
 4723 0088 72724161 		.word	1631679090
 4724              		.cfi_endproc
 4725              	.LFE10:
 4727              		.section	.text.create_partition,"ax",%progbits
 4728              		.align	1
 4729              		.syntax unified
 4730              		.thumb
 4731              		.thumb_func
 4733              	create_partition:
 4734              	.LVL587:
 4735              	.LFB55:
3641:DRIVER/FatFs/source/ff.c **** 
3642:DRIVER/FatFs/source/ff.c **** 
3643:DRIVER/FatFs/source/ff.c **** 
3644:DRIVER/FatFs/source/ff.c **** 
3645:DRIVER/FatFs/source/ff.c **** /*---------------------------------------------------------------------------
3646:DRIVER/FatFs/source/ff.c **** 
3647:DRIVER/FatFs/source/ff.c ****    Public Functions (FatFs API)
3648:DRIVER/FatFs/source/ff.c **** 
3649:DRIVER/FatFs/source/ff.c **** ----------------------------------------------------------------------------*/
3650:DRIVER/FatFs/source/ff.c **** 
3651:DRIVER/FatFs/source/ff.c **** 
3652:DRIVER/FatFs/source/ff.c **** 
3653:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
3654:DRIVER/FatFs/source/ff.c **** /* Mount/Unmount a Logical Drive                                         */
3655:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
3656:DRIVER/FatFs/source/ff.c **** 
3657:DRIVER/FatFs/source/ff.c **** FRESULT f_mount (
3658:DRIVER/FatFs/source/ff.c **** 	FATFS* fs,			/* Pointer to the filesystem object to be registered (NULL:unmount)*/
3659:DRIVER/FatFs/source/ff.c **** 	const TCHAR* path,	/* Logical drive number to be mounted/unmounted */
3660:DRIVER/FatFs/source/ff.c **** 	BYTE opt			/* Mount option: 0=Do not mount (delayed mount), 1=Mount immediately */
3661:DRIVER/FatFs/source/ff.c **** )
3662:DRIVER/FatFs/source/ff.c **** {
3663:DRIVER/FatFs/source/ff.c **** 	FATFS *cfs;
3664:DRIVER/FatFs/source/ff.c **** 	int vol;
3665:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
3666:DRIVER/FatFs/source/ff.c **** 	const TCHAR *rp = path;
3667:DRIVER/FatFs/source/ff.c **** 
3668:DRIVER/FatFs/source/ff.c **** 
3669:DRIVER/FatFs/source/ff.c **** 	/* Get volume ID (logical drive number) */
3670:DRIVER/FatFs/source/ff.c **** 	vol = get_ldnumber(&rp);
3671:DRIVER/FatFs/source/ff.c **** 	if (vol < 0) return FR_INVALID_DRIVE;
3672:DRIVER/FatFs/source/ff.c **** 	cfs = FatFs[vol];			/* Pointer to the filesystem object of the volume */
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 170


3673:DRIVER/FatFs/source/ff.c **** 
3674:DRIVER/FatFs/source/ff.c **** 	if (cfs) {					/* Unregister current filesystem object if regsitered */
3675:DRIVER/FatFs/source/ff.c **** 		FatFs[vol] = 0;
3676:DRIVER/FatFs/source/ff.c **** #if FF_FS_LOCK
3677:DRIVER/FatFs/source/ff.c **** 		clear_share(cfs);
3678:DRIVER/FatFs/source/ff.c **** #endif
3679:DRIVER/FatFs/source/ff.c **** #if FF_FS_REENTRANT				/* Discard mutex of the current volume */
3680:DRIVER/FatFs/source/ff.c **** 		ff_mutex_delete(vol);
3681:DRIVER/FatFs/source/ff.c **** #endif
3682:DRIVER/FatFs/source/ff.c **** 		cfs->fs_type = 0;		/* Invalidate the filesystem object to be unregistered */
3683:DRIVER/FatFs/source/ff.c **** 	}
3684:DRIVER/FatFs/source/ff.c **** 
3685:DRIVER/FatFs/source/ff.c **** 	if (fs) {					/* Register new filesystem object */
3686:DRIVER/FatFs/source/ff.c **** 		fs->pdrv = LD2PD(vol);	/* Volume hosting physical drive */
3687:DRIVER/FatFs/source/ff.c **** #if FF_FS_REENTRANT				/* Create a volume mutex */
3688:DRIVER/FatFs/source/ff.c **** 		fs->ldrv = (BYTE)vol;	/* Owner volume ID */
3689:DRIVER/FatFs/source/ff.c **** 		if (!ff_mutex_create(vol)) return FR_INT_ERR;
3690:DRIVER/FatFs/source/ff.c **** #if FF_FS_LOCK
3691:DRIVER/FatFs/source/ff.c **** 		if (SysLock == 0) {		/* Create a system mutex if needed */
3692:DRIVER/FatFs/source/ff.c **** 			if (!ff_mutex_create(FF_VOLUMES)) {
3693:DRIVER/FatFs/source/ff.c **** 				ff_mutex_delete(vol);
3694:DRIVER/FatFs/source/ff.c **** 				return FR_INT_ERR;
3695:DRIVER/FatFs/source/ff.c **** 			}
3696:DRIVER/FatFs/source/ff.c **** 			SysLock = 1;		/* System mutex is ready */
3697:DRIVER/FatFs/source/ff.c **** 		}
3698:DRIVER/FatFs/source/ff.c **** #endif
3699:DRIVER/FatFs/source/ff.c **** #endif
3700:DRIVER/FatFs/source/ff.c **** 		fs->fs_type = 0;		/* Invalidate the new filesystem object */
3701:DRIVER/FatFs/source/ff.c **** 		FatFs[vol] = fs;		/* Register new fs object */
3702:DRIVER/FatFs/source/ff.c **** 	}
3703:DRIVER/FatFs/source/ff.c **** 
3704:DRIVER/FatFs/source/ff.c **** 	if (opt == 0) return FR_OK;	/* Do not mount now, it will be mounted in subsequent file functions *
3705:DRIVER/FatFs/source/ff.c **** 
3706:DRIVER/FatFs/source/ff.c **** 	res = mount_volume(&path, &fs, 0);	/* Force mounted the volume */
3707:DRIVER/FatFs/source/ff.c **** 	LEAVE_FF(fs, res);
3708:DRIVER/FatFs/source/ff.c **** }
3709:DRIVER/FatFs/source/ff.c **** 
3710:DRIVER/FatFs/source/ff.c **** 
3711:DRIVER/FatFs/source/ff.c **** 
3712:DRIVER/FatFs/source/ff.c **** 
3713:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
3714:DRIVER/FatFs/source/ff.c **** /* Open or Create a File                                                 */
3715:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
3716:DRIVER/FatFs/source/ff.c **** 
3717:DRIVER/FatFs/source/ff.c **** FRESULT f_open (
3718:DRIVER/FatFs/source/ff.c **** 	FIL* fp,			/* Pointer to the blank file object */
3719:DRIVER/FatFs/source/ff.c **** 	const TCHAR* path,	/* Pointer to the file name */
3720:DRIVER/FatFs/source/ff.c **** 	BYTE mode			/* Access mode and open mode flags */
3721:DRIVER/FatFs/source/ff.c **** )
3722:DRIVER/FatFs/source/ff.c **** {
3723:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
3724:DRIVER/FatFs/source/ff.c **** 	DIR dj;
3725:DRIVER/FatFs/source/ff.c **** 	FATFS *fs;
3726:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY
3727:DRIVER/FatFs/source/ff.c **** 	DWORD cl, bcs, clst, tm;
3728:DRIVER/FatFs/source/ff.c **** 	LBA_t sc;
3729:DRIVER/FatFs/source/ff.c **** 	FSIZE_t ofs;
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 171


3730:DRIVER/FatFs/source/ff.c **** #endif
3731:DRIVER/FatFs/source/ff.c **** 	DEF_NAMBUF
3732:DRIVER/FatFs/source/ff.c **** 
3733:DRIVER/FatFs/source/ff.c **** 
3734:DRIVER/FatFs/source/ff.c **** 	if (!fp) return FR_INVALID_OBJECT;
3735:DRIVER/FatFs/source/ff.c **** 
3736:DRIVER/FatFs/source/ff.c **** 	/* Get logical drive number */
3737:DRIVER/FatFs/source/ff.c **** 	mode &= FF_FS_READONLY ? FA_READ : FA_READ | FA_WRITE | FA_CREATE_ALWAYS | FA_CREATE_NEW | FA_OPEN
3738:DRIVER/FatFs/source/ff.c **** 	res = mount_volume(&path, &fs, mode);
3739:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
3740:DRIVER/FatFs/source/ff.c **** 		dj.obj.fs = fs;
3741:DRIVER/FatFs/source/ff.c **** 		INIT_NAMBUF(fs);
3742:DRIVER/FatFs/source/ff.c **** 		res = follow_path(&dj, path);	/* Follow the file path */
3743:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY	/* Read/Write configuration */
3744:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK) {
3745:DRIVER/FatFs/source/ff.c **** 			if (dj.fn[NSFLAG] & NS_NONAME) {	/* Origin directory itself? */
3746:DRIVER/FatFs/source/ff.c **** 				res = FR_INVALID_NAME;
3747:DRIVER/FatFs/source/ff.c **** 			}
3748:DRIVER/FatFs/source/ff.c **** #if FF_FS_LOCK
3749:DRIVER/FatFs/source/ff.c **** 			else {
3750:DRIVER/FatFs/source/ff.c **** 				res = chk_share(&dj, (mode & ~FA_READ) ? 1 : 0);	/* Check if the file can be used */
3751:DRIVER/FatFs/source/ff.c **** 			}
3752:DRIVER/FatFs/source/ff.c **** #endif
3753:DRIVER/FatFs/source/ff.c **** 		}
3754:DRIVER/FatFs/source/ff.c **** 		/* Create or Open a file */
3755:DRIVER/FatFs/source/ff.c **** 		if (mode & (FA_CREATE_ALWAYS | FA_OPEN_ALWAYS | FA_CREATE_NEW)) {
3756:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) {					/* No file, create new */
3757:DRIVER/FatFs/source/ff.c **** 				if (res == FR_NO_FILE) {		/* There is no file to open, create a new entry */
3758:DRIVER/FatFs/source/ff.c **** #if FF_FS_LOCK
3759:DRIVER/FatFs/source/ff.c **** 					res = enq_share() ? dir_register(&dj) : FR_TOO_MANY_OPEN_FILES;
3760:DRIVER/FatFs/source/ff.c **** #else
3761:DRIVER/FatFs/source/ff.c **** 					res = dir_register(&dj);
3762:DRIVER/FatFs/source/ff.c **** #endif
3763:DRIVER/FatFs/source/ff.c **** 				}
3764:DRIVER/FatFs/source/ff.c **** 				mode |= FA_CREATE_ALWAYS;		/* File is created */
3765:DRIVER/FatFs/source/ff.c **** 			}
3766:DRIVER/FatFs/source/ff.c **** 			else {								/* Any object with the same name is already existing */
3767:DRIVER/FatFs/source/ff.c **** 				if (dj.obj.attr & (AM_RDO | AM_DIR)) {	/* Cannot overwrite it (R/O or DIR) */
3768:DRIVER/FatFs/source/ff.c **** 					res = FR_DENIED;
3769:DRIVER/FatFs/source/ff.c **** 				} else {
3770:DRIVER/FatFs/source/ff.c **** 					if (mode & FA_CREATE_NEW) res = FR_EXIST;	/* Cannot create as new file */
3771:DRIVER/FatFs/source/ff.c **** 				}
3772:DRIVER/FatFs/source/ff.c **** 			}
3773:DRIVER/FatFs/source/ff.c **** 			if (res == FR_OK && (mode & FA_CREATE_ALWAYS)) {	/* Truncate the file if overwrite mode */
3774:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
3775:DRIVER/FatFs/source/ff.c **** 				if (fs->fs_type == FS_EXFAT) {
3776:DRIVER/FatFs/source/ff.c **** 					/* Get current allocation info */
3777:DRIVER/FatFs/source/ff.c **** 					fp->obj.fs = fs;
3778:DRIVER/FatFs/source/ff.c **** 					init_alloc_info(fs, &fp->obj);
3779:DRIVER/FatFs/source/ff.c **** 					/* Set directory entry block initial state */
3780:DRIVER/FatFs/source/ff.c **** 					memset(fs->dirbuf + 2, 0, 30);	/* Clear 85 entry except for NumSec */
3781:DRIVER/FatFs/source/ff.c **** 					memset(fs->dirbuf + 38, 0, 26);	/* Clear C0 entry except for NumName and NameHash */
3782:DRIVER/FatFs/source/ff.c **** 					fs->dirbuf[XDIR_Attr] = AM_ARC;
3783:DRIVER/FatFs/source/ff.c **** 					st_dword(fs->dirbuf + XDIR_CrtTime, GET_FATTIME());
3784:DRIVER/FatFs/source/ff.c **** 					fs->dirbuf[XDIR_GenFlags] = 1;
3785:DRIVER/FatFs/source/ff.c **** 					res = store_xdir(&dj);
3786:DRIVER/FatFs/source/ff.c **** 					if (res == FR_OK && fp->obj.sclust != 0) {	/* Remove the cluster chain if exist */
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 172


3787:DRIVER/FatFs/source/ff.c **** 						res = remove_chain(&fp->obj, fp->obj.sclust, 0);
3788:DRIVER/FatFs/source/ff.c **** 						fs->last_clst = fp->obj.sclust - 1;		/* Reuse the cluster hole */
3789:DRIVER/FatFs/source/ff.c **** 					}
3790:DRIVER/FatFs/source/ff.c **** 				} else
3791:DRIVER/FatFs/source/ff.c **** #endif
3792:DRIVER/FatFs/source/ff.c **** 				{
3793:DRIVER/FatFs/source/ff.c **** 					/* Set directory entry initial state */
3794:DRIVER/FatFs/source/ff.c **** 					tm = GET_FATTIME();					/* Set created time */
3795:DRIVER/FatFs/source/ff.c **** 					st_dword(dj.dir + DIR_CrtTime, tm);
3796:DRIVER/FatFs/source/ff.c **** 					st_dword(dj.dir + DIR_ModTime, tm);
3797:DRIVER/FatFs/source/ff.c **** 					cl = ld_clust(fs, dj.dir);			/* Get current cluster chain */
3798:DRIVER/FatFs/source/ff.c **** 					dj.dir[DIR_Attr] = AM_ARC;			/* Reset attribute */
3799:DRIVER/FatFs/source/ff.c **** 					st_clust(fs, dj.dir, 0);			/* Reset file allocation info */
3800:DRIVER/FatFs/source/ff.c **** 					st_dword(dj.dir + DIR_FileSize, 0);
3801:DRIVER/FatFs/source/ff.c **** 					fs->wflag = 1;
3802:DRIVER/FatFs/source/ff.c **** 					if (cl != 0) {						/* Remove the cluster chain if exist */
3803:DRIVER/FatFs/source/ff.c **** 						sc = fs->winsect;
3804:DRIVER/FatFs/source/ff.c **** 						res = remove_chain(&dj.obj, cl, 0);
3805:DRIVER/FatFs/source/ff.c **** 						if (res == FR_OK) {
3806:DRIVER/FatFs/source/ff.c **** 							res = move_window(fs, sc);
3807:DRIVER/FatFs/source/ff.c **** 							fs->last_clst = cl - 1;		/* Reuse the cluster hole */
3808:DRIVER/FatFs/source/ff.c **** 						}
3809:DRIVER/FatFs/source/ff.c **** 					}
3810:DRIVER/FatFs/source/ff.c **** 				}
3811:DRIVER/FatFs/source/ff.c **** 			}
3812:DRIVER/FatFs/source/ff.c **** 		}
3813:DRIVER/FatFs/source/ff.c **** 		else {	/* Open an existing file */
3814:DRIVER/FatFs/source/ff.c **** 			if (res == FR_OK) {					/* Is the object exsiting? */
3815:DRIVER/FatFs/source/ff.c **** 				if (dj.obj.attr & AM_DIR) {		/* File open against a directory */
3816:DRIVER/FatFs/source/ff.c **** 					res = FR_NO_FILE;
3817:DRIVER/FatFs/source/ff.c **** 				} else {
3818:DRIVER/FatFs/source/ff.c **** 					if ((mode & FA_WRITE) && (dj.obj.attr & AM_RDO)) { /* Write mode open against R/O file */
3819:DRIVER/FatFs/source/ff.c **** 						res = FR_DENIED;
3820:DRIVER/FatFs/source/ff.c **** 					}
3821:DRIVER/FatFs/source/ff.c **** 				}
3822:DRIVER/FatFs/source/ff.c **** 			}
3823:DRIVER/FatFs/source/ff.c **** 		}
3824:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK) {
3825:DRIVER/FatFs/source/ff.c **** 			if (mode & FA_CREATE_ALWAYS) mode |= FA_MODIFIED;	/* Set file change flag if created or overwrit
3826:DRIVER/FatFs/source/ff.c **** 			fp->dir_sect = fs->winsect;			/* Pointer to the directory entry */
3827:DRIVER/FatFs/source/ff.c **** 			fp->dir_ptr = dj.dir;
3828:DRIVER/FatFs/source/ff.c **** #if FF_FS_LOCK
3829:DRIVER/FatFs/source/ff.c **** 			fp->obj.lockid = inc_share(&dj, (mode & ~FA_READ) ? 1 : 0);	/* Lock the file for this session */
3830:DRIVER/FatFs/source/ff.c **** 			if (fp->obj.lockid == 0) res = FR_INT_ERR;
3831:DRIVER/FatFs/source/ff.c **** #endif
3832:DRIVER/FatFs/source/ff.c **** 		}
3833:DRIVER/FatFs/source/ff.c **** #else		/* R/O configuration */
3834:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK) {
3835:DRIVER/FatFs/source/ff.c **** 			if (dj.fn[NSFLAG] & NS_NONAME) {	/* Is it origin directory itself? */
3836:DRIVER/FatFs/source/ff.c **** 				res = FR_INVALID_NAME;
3837:DRIVER/FatFs/source/ff.c **** 			} else {
3838:DRIVER/FatFs/source/ff.c **** 				if (dj.obj.attr & AM_DIR) {		/* Is it a directory? */
3839:DRIVER/FatFs/source/ff.c **** 					res = FR_NO_FILE;
3840:DRIVER/FatFs/source/ff.c **** 				}
3841:DRIVER/FatFs/source/ff.c **** 			}
3842:DRIVER/FatFs/source/ff.c **** 		}
3843:DRIVER/FatFs/source/ff.c **** #endif
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 173


3844:DRIVER/FatFs/source/ff.c **** 
3845:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK) {
3846:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
3847:DRIVER/FatFs/source/ff.c **** 			if (fs->fs_type == FS_EXFAT) {
3848:DRIVER/FatFs/source/ff.c **** 				fp->obj.c_scl = dj.obj.sclust;							/* Get containing directory info */
3849:DRIVER/FatFs/source/ff.c **** 				fp->obj.c_size = ((DWORD)dj.obj.objsize & 0xFFFFFF00) | dj.obj.stat;
3850:DRIVER/FatFs/source/ff.c **** 				fp->obj.c_ofs = dj.blk_ofs;
3851:DRIVER/FatFs/source/ff.c **** 				init_alloc_info(fs, &fp->obj);
3852:DRIVER/FatFs/source/ff.c **** 			} else
3853:DRIVER/FatFs/source/ff.c **** #endif
3854:DRIVER/FatFs/source/ff.c **** 			{
3855:DRIVER/FatFs/source/ff.c **** 				fp->obj.sclust = ld_clust(fs, dj.dir);					/* Get object allocation info */
3856:DRIVER/FatFs/source/ff.c **** 				fp->obj.objsize = ld_dword(dj.dir + DIR_FileSize);
3857:DRIVER/FatFs/source/ff.c **** 			}
3858:DRIVER/FatFs/source/ff.c **** #if FF_USE_FASTSEEK
3859:DRIVER/FatFs/source/ff.c **** 			fp->cltbl = 0;		/* Disable fast seek mode */
3860:DRIVER/FatFs/source/ff.c **** #endif
3861:DRIVER/FatFs/source/ff.c **** 			fp->obj.fs = fs;	/* Validate the file object */
3862:DRIVER/FatFs/source/ff.c **** 			fp->obj.id = fs->id;
3863:DRIVER/FatFs/source/ff.c **** 			fp->flag = mode;	/* Set file access mode */
3864:DRIVER/FatFs/source/ff.c **** 			fp->err = 0;		/* Clear error flag */
3865:DRIVER/FatFs/source/ff.c **** 			fp->sect = 0;		/* Invalidate current data sector */
3866:DRIVER/FatFs/source/ff.c **** 			fp->fptr = 0;		/* Set file pointer top of the file */
3867:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY
3868:DRIVER/FatFs/source/ff.c **** #if !FF_FS_TINY
3869:DRIVER/FatFs/source/ff.c **** 			memset(fp->buf, 0, sizeof fp->buf);	/* Clear sector buffer */
3870:DRIVER/FatFs/source/ff.c **** #endif
3871:DRIVER/FatFs/source/ff.c **** 			if ((mode & FA_SEEKEND) && fp->obj.objsize > 0) {	/* Seek to end of file if FA_OPEN_APPEND is sp
3872:DRIVER/FatFs/source/ff.c **** 				fp->fptr = fp->obj.objsize;			/* Offset to seek */
3873:DRIVER/FatFs/source/ff.c **** 				bcs = (DWORD)fs->csize * SS(fs);	/* Cluster size in byte */
3874:DRIVER/FatFs/source/ff.c **** 				clst = fp->obj.sclust;				/* Follow the cluster chain */
3875:DRIVER/FatFs/source/ff.c **** 				for (ofs = fp->obj.objsize; res == FR_OK && ofs > bcs; ofs -= bcs) {
3876:DRIVER/FatFs/source/ff.c **** 					clst = get_fat(&fp->obj, clst);
3877:DRIVER/FatFs/source/ff.c **** 					if (clst <= 1) res = FR_INT_ERR;
3878:DRIVER/FatFs/source/ff.c **** 					if (clst == 0xFFFFFFFF) res = FR_DISK_ERR;
3879:DRIVER/FatFs/source/ff.c **** 				}
3880:DRIVER/FatFs/source/ff.c **** 				fp->clust = clst;
3881:DRIVER/FatFs/source/ff.c **** 				if (res == FR_OK && ofs % SS(fs)) {	/* Fill sector buffer if not on the sector boundary */
3882:DRIVER/FatFs/source/ff.c **** 					sc = clst2sect(fs, clst);
3883:DRIVER/FatFs/source/ff.c **** 					if (sc == 0) {
3884:DRIVER/FatFs/source/ff.c **** 						res = FR_INT_ERR;
3885:DRIVER/FatFs/source/ff.c **** 					} else {
3886:DRIVER/FatFs/source/ff.c **** 						fp->sect = sc + (DWORD)(ofs / SS(fs));
3887:DRIVER/FatFs/source/ff.c **** #if !FF_FS_TINY
3888:DRIVER/FatFs/source/ff.c **** 						if (disk_read(fs->pdrv, fp->buf, fp->sect, 1) != RES_OK) res = FR_DISK_ERR;
3889:DRIVER/FatFs/source/ff.c **** #endif
3890:DRIVER/FatFs/source/ff.c **** 					}
3891:DRIVER/FatFs/source/ff.c **** 				}
3892:DRIVER/FatFs/source/ff.c **** #if FF_FS_LOCK
3893:DRIVER/FatFs/source/ff.c **** 				if (res != FR_OK) dec_share(fp->obj.lockid); /* Decrement file open counter if seek failed */
3894:DRIVER/FatFs/source/ff.c **** #endif
3895:DRIVER/FatFs/source/ff.c **** 			}
3896:DRIVER/FatFs/source/ff.c **** #endif
3897:DRIVER/FatFs/source/ff.c **** 		}
3898:DRIVER/FatFs/source/ff.c **** 
3899:DRIVER/FatFs/source/ff.c **** 		FREE_NAMBUF();
3900:DRIVER/FatFs/source/ff.c **** 	}
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 174


3901:DRIVER/FatFs/source/ff.c **** 
3902:DRIVER/FatFs/source/ff.c **** 	if (res != FR_OK) fp->obj.fs = 0;	/* Invalidate file object on error */
3903:DRIVER/FatFs/source/ff.c **** 
3904:DRIVER/FatFs/source/ff.c **** 	LEAVE_FF(fs, res);
3905:DRIVER/FatFs/source/ff.c **** }
3906:DRIVER/FatFs/source/ff.c **** 
3907:DRIVER/FatFs/source/ff.c **** 
3908:DRIVER/FatFs/source/ff.c **** 
3909:DRIVER/FatFs/source/ff.c **** 
3910:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
3911:DRIVER/FatFs/source/ff.c **** /* Read File                                                             */
3912:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
3913:DRIVER/FatFs/source/ff.c **** 
3914:DRIVER/FatFs/source/ff.c **** FRESULT f_read (
3915:DRIVER/FatFs/source/ff.c **** 	FIL* fp, 	/* Open file to be read */
3916:DRIVER/FatFs/source/ff.c **** 	void* buff,	/* Data buffer to store the read data */
3917:DRIVER/FatFs/source/ff.c **** 	UINT btr,	/* Number of bytes to read */
3918:DRIVER/FatFs/source/ff.c **** 	UINT* br	/* Number of bytes read */
3919:DRIVER/FatFs/source/ff.c **** )
3920:DRIVER/FatFs/source/ff.c **** {
3921:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
3922:DRIVER/FatFs/source/ff.c **** 	FATFS *fs;
3923:DRIVER/FatFs/source/ff.c **** 	DWORD clst;
3924:DRIVER/FatFs/source/ff.c **** 	LBA_t sect;
3925:DRIVER/FatFs/source/ff.c **** 	FSIZE_t remain;
3926:DRIVER/FatFs/source/ff.c **** 	UINT rcnt, cc, csect;
3927:DRIVER/FatFs/source/ff.c **** 	BYTE *rbuff = (BYTE*)buff;
3928:DRIVER/FatFs/source/ff.c **** 
3929:DRIVER/FatFs/source/ff.c **** 
3930:DRIVER/FatFs/source/ff.c **** 	*br = 0;	/* Clear read byte counter */
3931:DRIVER/FatFs/source/ff.c **** 	res = validate(&fp->obj, &fs);				/* Check validity of the file object */
3932:DRIVER/FatFs/source/ff.c **** 	if (res != FR_OK || (res = (FRESULT)fp->err) != FR_OK) LEAVE_FF(fs, res);	/* Check validity */
3933:DRIVER/FatFs/source/ff.c **** 	if (!(fp->flag & FA_READ)) LEAVE_FF(fs, FR_DENIED); /* Check access mode */
3934:DRIVER/FatFs/source/ff.c **** 	remain = fp->obj.objsize - fp->fptr;
3935:DRIVER/FatFs/source/ff.c **** 	if (btr > remain) btr = (UINT)remain;		/* Truncate btr by remaining bytes */
3936:DRIVER/FatFs/source/ff.c **** 
3937:DRIVER/FatFs/source/ff.c **** 	for ( ; btr > 0; btr -= rcnt, *br += rcnt, rbuff += rcnt, fp->fptr += rcnt) {	/* Repeat until btr 
3938:DRIVER/FatFs/source/ff.c **** 		if (fp->fptr % SS(fs) == 0) {			/* On the sector boundary? */
3939:DRIVER/FatFs/source/ff.c **** 			csect = (UINT)(fp->fptr / SS(fs) & (fs->csize - 1));	/* Sector offset in the cluster */
3940:DRIVER/FatFs/source/ff.c **** 			if (csect == 0) {					/* On the cluster boundary? */
3941:DRIVER/FatFs/source/ff.c **** 				if (fp->fptr == 0) {			/* On the top of the file? */
3942:DRIVER/FatFs/source/ff.c **** 					clst = fp->obj.sclust;		/* Follow cluster chain from the origin */
3943:DRIVER/FatFs/source/ff.c **** 				} else {						/* Middle or end of the file */
3944:DRIVER/FatFs/source/ff.c **** #if FF_USE_FASTSEEK
3945:DRIVER/FatFs/source/ff.c **** 					if (fp->cltbl) {
3946:DRIVER/FatFs/source/ff.c **** 						clst = clmt_clust(fp, fp->fptr);	/* Get cluster# from the CLMT */
3947:DRIVER/FatFs/source/ff.c **** 					} else
3948:DRIVER/FatFs/source/ff.c **** #endif
3949:DRIVER/FatFs/source/ff.c **** 					{
3950:DRIVER/FatFs/source/ff.c **** 						clst = get_fat(&fp->obj, fp->clust);	/* Follow cluster chain on the FAT */
3951:DRIVER/FatFs/source/ff.c **** 					}
3952:DRIVER/FatFs/source/ff.c **** 				}
3953:DRIVER/FatFs/source/ff.c **** 				if (clst < 2) ABORT(fs, FR_INT_ERR);
3954:DRIVER/FatFs/source/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
3955:DRIVER/FatFs/source/ff.c **** 				fp->clust = clst;				/* Update current cluster */
3956:DRIVER/FatFs/source/ff.c **** 			}
3957:DRIVER/FatFs/source/ff.c **** 			sect = clst2sect(fs, fp->clust);	/* Get current sector */
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 175


3958:DRIVER/FatFs/source/ff.c **** 			if (sect == 0) ABORT(fs, FR_INT_ERR);
3959:DRIVER/FatFs/source/ff.c **** 			sect += csect;
3960:DRIVER/FatFs/source/ff.c **** 			cc = btr / SS(fs);					/* When remaining bytes >= sector size, */
3961:DRIVER/FatFs/source/ff.c **** 			if (cc > 0) {						/* Read maximum contiguous sectors directly */
3962:DRIVER/FatFs/source/ff.c **** 				if (csect + cc > fs->csize) {	/* Clip at cluster boundary */
3963:DRIVER/FatFs/source/ff.c **** 					cc = fs->csize - csect;
3964:DRIVER/FatFs/source/ff.c **** 				}
3965:DRIVER/FatFs/source/ff.c **** 				if (disk_read(fs->pdrv, rbuff, sect, cc) != RES_OK) ABORT(fs, FR_DISK_ERR);
3966:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY && FF_FS_MINIMIZE <= 2		/* Replace one of the read sectors with cached data if 
3967:DRIVER/FatFs/source/ff.c **** #if FF_FS_TINY
3968:DRIVER/FatFs/source/ff.c **** 				if (fs->wflag && fs->winsect - sect < cc) {
3969:DRIVER/FatFs/source/ff.c **** 					memcpy(rbuff + ((fs->winsect - sect) * SS(fs)), fs->win, SS(fs));
3970:DRIVER/FatFs/source/ff.c **** 				}
3971:DRIVER/FatFs/source/ff.c **** #else
3972:DRIVER/FatFs/source/ff.c **** 				if ((fp->flag & FA_DIRTY) && fp->sect - sect < cc) {
3973:DRIVER/FatFs/source/ff.c **** 					memcpy(rbuff + ((fp->sect - sect) * SS(fs)), fp->buf, SS(fs));
3974:DRIVER/FatFs/source/ff.c **** 				}
3975:DRIVER/FatFs/source/ff.c **** #endif
3976:DRIVER/FatFs/source/ff.c **** #endif
3977:DRIVER/FatFs/source/ff.c **** 				rcnt = SS(fs) * cc;				/* Number of bytes transferred */
3978:DRIVER/FatFs/source/ff.c **** 				continue;
3979:DRIVER/FatFs/source/ff.c **** 			}
3980:DRIVER/FatFs/source/ff.c **** #if !FF_FS_TINY
3981:DRIVER/FatFs/source/ff.c **** 			if (fp->sect != sect) {			/* Load data sector if not in cache */
3982:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY
3983:DRIVER/FatFs/source/ff.c **** 				if (fp->flag & FA_DIRTY) {		/* Write-back dirty sector cache */
3984:DRIVER/FatFs/source/ff.c **** 					if (disk_write(fs->pdrv, fp->buf, fp->sect, 1) != RES_OK) ABORT(fs, FR_DISK_ERR);
3985:DRIVER/FatFs/source/ff.c **** 					fp->flag &= (BYTE)~FA_DIRTY;
3986:DRIVER/FatFs/source/ff.c **** 				}
3987:DRIVER/FatFs/source/ff.c **** #endif
3988:DRIVER/FatFs/source/ff.c **** 				if (disk_read(fs->pdrv, fp->buf, sect, 1) != RES_OK) ABORT(fs, FR_DISK_ERR);	/* Fill sector cac
3989:DRIVER/FatFs/source/ff.c **** 			}
3990:DRIVER/FatFs/source/ff.c **** #endif
3991:DRIVER/FatFs/source/ff.c **** 			fp->sect = sect;
3992:DRIVER/FatFs/source/ff.c **** 		}
3993:DRIVER/FatFs/source/ff.c **** 		rcnt = SS(fs) - (UINT)fp->fptr % SS(fs);	/* Number of bytes remains in the sector */
3994:DRIVER/FatFs/source/ff.c **** 		if (rcnt > btr) rcnt = btr;					/* Clip it by btr if needed */
3995:DRIVER/FatFs/source/ff.c **** #if FF_FS_TINY
3996:DRIVER/FatFs/source/ff.c **** 		if (move_window(fs, fp->sect) != FR_OK) ABORT(fs, FR_DISK_ERR);	/* Move sector window */
3997:DRIVER/FatFs/source/ff.c **** 		memcpy(rbuff, fs->win + fp->fptr % SS(fs), rcnt);	/* Extract partial sector */
3998:DRIVER/FatFs/source/ff.c **** #else
3999:DRIVER/FatFs/source/ff.c **** 		memcpy(rbuff, fp->buf + fp->fptr % SS(fs), rcnt);	/* Extract partial sector */
4000:DRIVER/FatFs/source/ff.c **** #endif
4001:DRIVER/FatFs/source/ff.c **** 	}
4002:DRIVER/FatFs/source/ff.c **** 
4003:DRIVER/FatFs/source/ff.c **** 	LEAVE_FF(fs, FR_OK);
4004:DRIVER/FatFs/source/ff.c **** }
4005:DRIVER/FatFs/source/ff.c **** 
4006:DRIVER/FatFs/source/ff.c **** 
4007:DRIVER/FatFs/source/ff.c **** 
4008:DRIVER/FatFs/source/ff.c **** 
4009:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY
4010:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
4011:DRIVER/FatFs/source/ff.c **** /* Write File                                                            */
4012:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
4013:DRIVER/FatFs/source/ff.c **** 
4014:DRIVER/FatFs/source/ff.c **** FRESULT f_write (
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 176


4015:DRIVER/FatFs/source/ff.c **** 	FIL* fp,			/* Open file to be written */
4016:DRIVER/FatFs/source/ff.c **** 	const void* buff,	/* Data to be written */
4017:DRIVER/FatFs/source/ff.c **** 	UINT btw,			/* Number of bytes to write */
4018:DRIVER/FatFs/source/ff.c **** 	UINT* bw			/* Number of bytes written */
4019:DRIVER/FatFs/source/ff.c **** )
4020:DRIVER/FatFs/source/ff.c **** {
4021:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
4022:DRIVER/FatFs/source/ff.c **** 	FATFS *fs;
4023:DRIVER/FatFs/source/ff.c **** 	DWORD clst;
4024:DRIVER/FatFs/source/ff.c **** 	LBA_t sect;
4025:DRIVER/FatFs/source/ff.c **** 	UINT wcnt, cc, csect;
4026:DRIVER/FatFs/source/ff.c **** 	const BYTE *wbuff = (const BYTE*)buff;
4027:DRIVER/FatFs/source/ff.c **** 
4028:DRIVER/FatFs/source/ff.c **** 
4029:DRIVER/FatFs/source/ff.c **** 	*bw = 0;	/* Clear write byte counter */
4030:DRIVER/FatFs/source/ff.c **** 	res = validate(&fp->obj, &fs);			/* Check validity of the file object */
4031:DRIVER/FatFs/source/ff.c **** 	if (res != FR_OK || (res = (FRESULT)fp->err) != FR_OK) LEAVE_FF(fs, res);	/* Check validity */
4032:DRIVER/FatFs/source/ff.c **** 	if (!(fp->flag & FA_WRITE)) LEAVE_FF(fs, FR_DENIED);	/* Check access mode */
4033:DRIVER/FatFs/source/ff.c **** 
4034:DRIVER/FatFs/source/ff.c **** 	/* Check fptr wrap-around (file size cannot reach 4 GiB at FAT volume) */
4035:DRIVER/FatFs/source/ff.c **** 	if ((!FF_FS_EXFAT || fs->fs_type != FS_EXFAT) && (DWORD)(fp->fptr + btw) < (DWORD)fp->fptr) {
4036:DRIVER/FatFs/source/ff.c **** 		btw = (UINT)(0xFFFFFFFF - (DWORD)fp->fptr);
4037:DRIVER/FatFs/source/ff.c **** 	}
4038:DRIVER/FatFs/source/ff.c **** 
4039:DRIVER/FatFs/source/ff.c **** 	for ( ; btw > 0; btw -= wcnt, *bw += wcnt, wbuff += wcnt, fp->fptr += wcnt, fp->obj.objsize = (fp-
4040:DRIVER/FatFs/source/ff.c **** 		if (fp->fptr % SS(fs) == 0) {		/* On the sector boundary? */
4041:DRIVER/FatFs/source/ff.c **** 			csect = (UINT)(fp->fptr / SS(fs)) & (fs->csize - 1);	/* Sector offset in the cluster */
4042:DRIVER/FatFs/source/ff.c **** 			if (csect == 0) {				/* On the cluster boundary? */
4043:DRIVER/FatFs/source/ff.c **** 				if (fp->fptr == 0) {		/* On the top of the file? */
4044:DRIVER/FatFs/source/ff.c **** 					clst = fp->obj.sclust;	/* Follow from the origin */
4045:DRIVER/FatFs/source/ff.c **** 					if (clst == 0) {		/* If no cluster is allocated, */
4046:DRIVER/FatFs/source/ff.c **** 						clst = create_chain(&fp->obj, 0);	/* create a new cluster chain */
4047:DRIVER/FatFs/source/ff.c **** 					}
4048:DRIVER/FatFs/source/ff.c **** 				} else {					/* On the middle or end of the file */
4049:DRIVER/FatFs/source/ff.c **** #if FF_USE_FASTSEEK
4050:DRIVER/FatFs/source/ff.c **** 					if (fp->cltbl) {
4051:DRIVER/FatFs/source/ff.c **** 						clst = clmt_clust(fp, fp->fptr);	/* Get cluster# from the CLMT */
4052:DRIVER/FatFs/source/ff.c **** 					} else
4053:DRIVER/FatFs/source/ff.c **** #endif
4054:DRIVER/FatFs/source/ff.c **** 					{
4055:DRIVER/FatFs/source/ff.c **** 						clst = create_chain(&fp->obj, fp->clust);	/* Follow or stretch cluster chain on the FAT */
4056:DRIVER/FatFs/source/ff.c **** 					}
4057:DRIVER/FatFs/source/ff.c **** 				}
4058:DRIVER/FatFs/source/ff.c **** 				if (clst == 0) break;		/* Could not allocate a new cluster (disk full) */
4059:DRIVER/FatFs/source/ff.c **** 				if (clst == 1) ABORT(fs, FR_INT_ERR);
4060:DRIVER/FatFs/source/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
4061:DRIVER/FatFs/source/ff.c **** 				fp->clust = clst;			/* Update current cluster */
4062:DRIVER/FatFs/source/ff.c **** 				if (fp->obj.sclust == 0) fp->obj.sclust = clst;	/* Set start cluster if the first write */
4063:DRIVER/FatFs/source/ff.c **** 			}
4064:DRIVER/FatFs/source/ff.c **** #if FF_FS_TINY
4065:DRIVER/FatFs/source/ff.c **** 			if (fs->winsect == fp->sect && sync_window(fs) != FR_OK) ABORT(fs, FR_DISK_ERR);	/* Write-back s
4066:DRIVER/FatFs/source/ff.c **** #else
4067:DRIVER/FatFs/source/ff.c **** 			if (fp->flag & FA_DIRTY) {		/* Write-back sector cache */
4068:DRIVER/FatFs/source/ff.c **** 				if (disk_write(fs->pdrv, fp->buf, fp->sect, 1) != RES_OK) ABORT(fs, FR_DISK_ERR);
4069:DRIVER/FatFs/source/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
4070:DRIVER/FatFs/source/ff.c **** 			}
4071:DRIVER/FatFs/source/ff.c **** #endif
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 177


4072:DRIVER/FatFs/source/ff.c **** 			sect = clst2sect(fs, fp->clust);	/* Get current sector */
4073:DRIVER/FatFs/source/ff.c **** 			if (sect == 0) ABORT(fs, FR_INT_ERR);
4074:DRIVER/FatFs/source/ff.c **** 			sect += csect;
4075:DRIVER/FatFs/source/ff.c **** 			cc = btw / SS(fs);				/* When remaining bytes >= sector size, */
4076:DRIVER/FatFs/source/ff.c **** 			if (cc > 0) {					/* Write maximum contiguous sectors directly */
4077:DRIVER/FatFs/source/ff.c **** 				if (csect + cc > fs->csize) {	/* Clip at cluster boundary */
4078:DRIVER/FatFs/source/ff.c **** 					cc = fs->csize - csect;
4079:DRIVER/FatFs/source/ff.c **** 				}
4080:DRIVER/FatFs/source/ff.c **** 				if (disk_write(fs->pdrv, wbuff, sect, cc) != RES_OK) ABORT(fs, FR_DISK_ERR);
4081:DRIVER/FatFs/source/ff.c **** #if FF_FS_MINIMIZE <= 2
4082:DRIVER/FatFs/source/ff.c **** #if FF_FS_TINY
4083:DRIVER/FatFs/source/ff.c **** 				if (fs->winsect - sect < cc) {	/* Refill sector cache if it gets invalidated by the direct writ
4084:DRIVER/FatFs/source/ff.c **** 					memcpy(fs->win, wbuff + ((fs->winsect - sect) * SS(fs)), SS(fs));
4085:DRIVER/FatFs/source/ff.c **** 					fs->wflag = 0;
4086:DRIVER/FatFs/source/ff.c **** 				}
4087:DRIVER/FatFs/source/ff.c **** #else
4088:DRIVER/FatFs/source/ff.c **** 				if (fp->sect - sect < cc) { /* Refill sector cache if it gets invalidated by the direct write *
4089:DRIVER/FatFs/source/ff.c **** 					memcpy(fp->buf, wbuff + ((fp->sect - sect) * SS(fs)), SS(fs));
4090:DRIVER/FatFs/source/ff.c **** 					fp->flag &= (BYTE)~FA_DIRTY;
4091:DRIVER/FatFs/source/ff.c **** 				}
4092:DRIVER/FatFs/source/ff.c **** #endif
4093:DRIVER/FatFs/source/ff.c **** #endif
4094:DRIVER/FatFs/source/ff.c **** 				wcnt = SS(fs) * cc;		/* Number of bytes transferred */
4095:DRIVER/FatFs/source/ff.c **** 				continue;
4096:DRIVER/FatFs/source/ff.c **** 			}
4097:DRIVER/FatFs/source/ff.c **** #if FF_FS_TINY
4098:DRIVER/FatFs/source/ff.c **** 			if (fp->fptr >= fp->obj.objsize) {	/* Avoid silly cache filling on the growing edge */
4099:DRIVER/FatFs/source/ff.c **** 				if (sync_window(fs) != FR_OK) ABORT(fs, FR_DISK_ERR);
4100:DRIVER/FatFs/source/ff.c **** 				fs->winsect = sect;
4101:DRIVER/FatFs/source/ff.c **** 			}
4102:DRIVER/FatFs/source/ff.c **** #else
4103:DRIVER/FatFs/source/ff.c **** 			if (fp->sect != sect && 		/* Fill sector cache with file data */
4104:DRIVER/FatFs/source/ff.c **** 				fp->fptr < fp->obj.objsize &&
4105:DRIVER/FatFs/source/ff.c **** 				disk_read(fs->pdrv, fp->buf, sect, 1) != RES_OK) {
4106:DRIVER/FatFs/source/ff.c **** 					ABORT(fs, FR_DISK_ERR);
4107:DRIVER/FatFs/source/ff.c **** 			}
4108:DRIVER/FatFs/source/ff.c **** #endif
4109:DRIVER/FatFs/source/ff.c **** 			fp->sect = sect;
4110:DRIVER/FatFs/source/ff.c **** 		}
4111:DRIVER/FatFs/source/ff.c **** 		wcnt = SS(fs) - (UINT)fp->fptr % SS(fs);	/* Number of bytes remains in the sector */
4112:DRIVER/FatFs/source/ff.c **** 		if (wcnt > btw) wcnt = btw;					/* Clip it by btw if needed */
4113:DRIVER/FatFs/source/ff.c **** #if FF_FS_TINY
4114:DRIVER/FatFs/source/ff.c **** 		if (move_window(fs, fp->sect) != FR_OK) ABORT(fs, FR_DISK_ERR);	/* Move sector window */
4115:DRIVER/FatFs/source/ff.c **** 		memcpy(fs->win + fp->fptr % SS(fs), wbuff, wcnt);	/* Fit data to the sector */
4116:DRIVER/FatFs/source/ff.c **** 		fs->wflag = 1;
4117:DRIVER/FatFs/source/ff.c **** #else
4118:DRIVER/FatFs/source/ff.c **** 		memcpy(fp->buf + fp->fptr % SS(fs), wbuff, wcnt);	/* Fit data to the sector */
4119:DRIVER/FatFs/source/ff.c **** 		fp->flag |= FA_DIRTY;
4120:DRIVER/FatFs/source/ff.c **** #endif
4121:DRIVER/FatFs/source/ff.c **** 	}
4122:DRIVER/FatFs/source/ff.c **** 
4123:DRIVER/FatFs/source/ff.c **** 	fp->flag |= FA_MODIFIED;				/* Set file change flag */
4124:DRIVER/FatFs/source/ff.c **** 
4125:DRIVER/FatFs/source/ff.c **** 	LEAVE_FF(fs, FR_OK);
4126:DRIVER/FatFs/source/ff.c **** }
4127:DRIVER/FatFs/source/ff.c **** 
4128:DRIVER/FatFs/source/ff.c **** 
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 178


4129:DRIVER/FatFs/source/ff.c **** 
4130:DRIVER/FatFs/source/ff.c **** 
4131:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
4132:DRIVER/FatFs/source/ff.c **** /* Synchronize the File                                                  */
4133:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
4134:DRIVER/FatFs/source/ff.c **** 
4135:DRIVER/FatFs/source/ff.c **** FRESULT f_sync (
4136:DRIVER/FatFs/source/ff.c **** 	FIL* fp		/* Open file to be synced */
4137:DRIVER/FatFs/source/ff.c **** )
4138:DRIVER/FatFs/source/ff.c **** {
4139:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
4140:DRIVER/FatFs/source/ff.c **** 	FATFS *fs;
4141:DRIVER/FatFs/source/ff.c **** 	DWORD tm;
4142:DRIVER/FatFs/source/ff.c **** 	BYTE *dir;
4143:DRIVER/FatFs/source/ff.c **** 
4144:DRIVER/FatFs/source/ff.c **** 
4145:DRIVER/FatFs/source/ff.c **** 	res = validate(&fp->obj, &fs);	/* Check validity of the file object */
4146:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
4147:DRIVER/FatFs/source/ff.c **** 		if (fp->flag & FA_MODIFIED) {	/* Is there any change to the file? */
4148:DRIVER/FatFs/source/ff.c **** #if !FF_FS_TINY
4149:DRIVER/FatFs/source/ff.c **** 			if (fp->flag & FA_DIRTY) {	/* Write-back cached data if needed */
4150:DRIVER/FatFs/source/ff.c **** 				if (disk_write(fs->pdrv, fp->buf, fp->sect, 1) != RES_OK) LEAVE_FF(fs, FR_DISK_ERR);
4151:DRIVER/FatFs/source/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
4152:DRIVER/FatFs/source/ff.c **** 			}
4153:DRIVER/FatFs/source/ff.c **** #endif
4154:DRIVER/FatFs/source/ff.c **** 			/* Update the directory entry */
4155:DRIVER/FatFs/source/ff.c **** 			tm = GET_FATTIME();				/* Modified time */
4156:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
4157:DRIVER/FatFs/source/ff.c **** 			if (fs->fs_type == FS_EXFAT) {
4158:DRIVER/FatFs/source/ff.c **** 				res = fill_first_frag(&fp->obj);	/* Fill first fragment on the FAT if needed */
4159:DRIVER/FatFs/source/ff.c **** 				if (res == FR_OK) {
4160:DRIVER/FatFs/source/ff.c **** 					res = fill_last_frag(&fp->obj, fp->clust, 0xFFFFFFFF);	/* Fill last fragment on the FAT if nee
4161:DRIVER/FatFs/source/ff.c **** 				}
4162:DRIVER/FatFs/source/ff.c **** 				if (res == FR_OK) {
4163:DRIVER/FatFs/source/ff.c **** 					DIR dj;
4164:DRIVER/FatFs/source/ff.c **** 					DEF_NAMBUF
4165:DRIVER/FatFs/source/ff.c **** 
4166:DRIVER/FatFs/source/ff.c **** 					INIT_NAMBUF(fs);
4167:DRIVER/FatFs/source/ff.c **** 					res = load_obj_xdir(&dj, &fp->obj);	/* Load directory entry block */
4168:DRIVER/FatFs/source/ff.c **** 					if (res == FR_OK) {
4169:DRIVER/FatFs/source/ff.c **** 						fs->dirbuf[XDIR_Attr] |= AM_ARC;				/* Set archive attribute to indicate that the file has be
4170:DRIVER/FatFs/source/ff.c **** 						fs->dirbuf[XDIR_GenFlags] = fp->obj.stat | 1;	/* Update file allocation information */
4171:DRIVER/FatFs/source/ff.c **** 						st_dword(fs->dirbuf + XDIR_FstClus, fp->obj.sclust);		/* Update start cluster */
4172:DRIVER/FatFs/source/ff.c **** 						st_qword(fs->dirbuf + XDIR_FileSize, fp->obj.objsize);		/* Update file size */
4173:DRIVER/FatFs/source/ff.c **** 						st_qword(fs->dirbuf + XDIR_ValidFileSize, fp->obj.objsize);	/* (FatFs does not support Valid 
4174:DRIVER/FatFs/source/ff.c **** 						st_dword(fs->dirbuf + XDIR_ModTime, tm);		/* Update modified time */
4175:DRIVER/FatFs/source/ff.c **** 						fs->dirbuf[XDIR_ModTime10] = 0;
4176:DRIVER/FatFs/source/ff.c **** 						st_dword(fs->dirbuf + XDIR_AccTime, 0);
4177:DRIVER/FatFs/source/ff.c **** 						res = store_xdir(&dj);	/* Restore it to the directory */
4178:DRIVER/FatFs/source/ff.c **** 						if (res == FR_OK) {
4179:DRIVER/FatFs/source/ff.c **** 							res = sync_fs(fs);
4180:DRIVER/FatFs/source/ff.c **** 							fp->flag &= (BYTE)~FA_MODIFIED;
4181:DRIVER/FatFs/source/ff.c **** 						}
4182:DRIVER/FatFs/source/ff.c **** 					}
4183:DRIVER/FatFs/source/ff.c **** 					FREE_NAMBUF();
4184:DRIVER/FatFs/source/ff.c **** 				}
4185:DRIVER/FatFs/source/ff.c **** 			} else
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 179


4186:DRIVER/FatFs/source/ff.c **** #endif
4187:DRIVER/FatFs/source/ff.c **** 			{
4188:DRIVER/FatFs/source/ff.c **** 				res = move_window(fs, fp->dir_sect);
4189:DRIVER/FatFs/source/ff.c **** 				if (res == FR_OK) {
4190:DRIVER/FatFs/source/ff.c **** 					dir = fp->dir_ptr;
4191:DRIVER/FatFs/source/ff.c **** 					dir[DIR_Attr] |= AM_ARC;						/* Set archive attribute to indicate that the file has been chan
4192:DRIVER/FatFs/source/ff.c **** 					st_clust(fp->obj.fs, dir, fp->obj.sclust);		/* Update file allocation information  */
4193:DRIVER/FatFs/source/ff.c **** 					st_dword(dir + DIR_FileSize, (DWORD)fp->obj.objsize);	/* Update file size */
4194:DRIVER/FatFs/source/ff.c **** 					st_dword(dir + DIR_ModTime, tm);				/* Update modified time */
4195:DRIVER/FatFs/source/ff.c **** 					st_word(dir + DIR_LstAccDate, 0);
4196:DRIVER/FatFs/source/ff.c **** 					fs->wflag = 1;
4197:DRIVER/FatFs/source/ff.c **** 					res = sync_fs(fs);					/* Restore it to the directory */
4198:DRIVER/FatFs/source/ff.c **** 					fp->flag &= (BYTE)~FA_MODIFIED;
4199:DRIVER/FatFs/source/ff.c **** 				}
4200:DRIVER/FatFs/source/ff.c **** 			}
4201:DRIVER/FatFs/source/ff.c **** 		}
4202:DRIVER/FatFs/source/ff.c **** 	}
4203:DRIVER/FatFs/source/ff.c **** 
4204:DRIVER/FatFs/source/ff.c **** 	LEAVE_FF(fs, res);
4205:DRIVER/FatFs/source/ff.c **** }
4206:DRIVER/FatFs/source/ff.c **** 
4207:DRIVER/FatFs/source/ff.c **** #endif /* !FF_FS_READONLY */
4208:DRIVER/FatFs/source/ff.c **** 
4209:DRIVER/FatFs/source/ff.c **** 
4210:DRIVER/FatFs/source/ff.c **** 
4211:DRIVER/FatFs/source/ff.c **** 
4212:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
4213:DRIVER/FatFs/source/ff.c **** /* Close File                                                            */
4214:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
4215:DRIVER/FatFs/source/ff.c **** 
4216:DRIVER/FatFs/source/ff.c **** FRESULT f_close (
4217:DRIVER/FatFs/source/ff.c **** 	FIL* fp		/* Open file to be closed */
4218:DRIVER/FatFs/source/ff.c **** )
4219:DRIVER/FatFs/source/ff.c **** {
4220:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
4221:DRIVER/FatFs/source/ff.c **** 	FATFS *fs;
4222:DRIVER/FatFs/source/ff.c **** 
4223:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY
4224:DRIVER/FatFs/source/ff.c **** 	res = f_sync(fp);					/* Flush cached data */
4225:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK)
4226:DRIVER/FatFs/source/ff.c **** #endif
4227:DRIVER/FatFs/source/ff.c **** 	{
4228:DRIVER/FatFs/source/ff.c **** 		res = validate(&fp->obj, &fs);	/* Lock volume */
4229:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK) {
4230:DRIVER/FatFs/source/ff.c **** #if FF_FS_LOCK
4231:DRIVER/FatFs/source/ff.c **** 			res = dec_share(fp->obj.lockid);		/* Decrement file open counter */
4232:DRIVER/FatFs/source/ff.c **** 			if (res == FR_OK) fp->obj.fs = 0;	/* Invalidate file object */
4233:DRIVER/FatFs/source/ff.c **** #else
4234:DRIVER/FatFs/source/ff.c **** 			fp->obj.fs = 0;	/* Invalidate file object */
4235:DRIVER/FatFs/source/ff.c **** #endif
4236:DRIVER/FatFs/source/ff.c **** #if FF_FS_REENTRANT
4237:DRIVER/FatFs/source/ff.c **** 			unlock_volume(fs, FR_OK);		/* Unlock volume */
4238:DRIVER/FatFs/source/ff.c **** #endif
4239:DRIVER/FatFs/source/ff.c **** 		}
4240:DRIVER/FatFs/source/ff.c **** 	}
4241:DRIVER/FatFs/source/ff.c **** 	return res;
4242:DRIVER/FatFs/source/ff.c **** }
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 180


4243:DRIVER/FatFs/source/ff.c **** 
4244:DRIVER/FatFs/source/ff.c **** 
4245:DRIVER/FatFs/source/ff.c **** 
4246:DRIVER/FatFs/source/ff.c **** 
4247:DRIVER/FatFs/source/ff.c **** #if FF_FS_RPATH >= 1
4248:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
4249:DRIVER/FatFs/source/ff.c **** /* Change Current Directory or Current Drive, Get Current Directory      */
4250:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
4251:DRIVER/FatFs/source/ff.c **** 
4252:DRIVER/FatFs/source/ff.c **** FRESULT f_chdrive (
4253:DRIVER/FatFs/source/ff.c **** 	const TCHAR* path		/* Drive number to set */
4254:DRIVER/FatFs/source/ff.c **** )
4255:DRIVER/FatFs/source/ff.c **** {
4256:DRIVER/FatFs/source/ff.c **** 	int vol;
4257:DRIVER/FatFs/source/ff.c **** 
4258:DRIVER/FatFs/source/ff.c **** 
4259:DRIVER/FatFs/source/ff.c **** 	/* Get logical drive number */
4260:DRIVER/FatFs/source/ff.c **** 	vol = get_ldnumber(&path);
4261:DRIVER/FatFs/source/ff.c **** 	if (vol < 0) return FR_INVALID_DRIVE;
4262:DRIVER/FatFs/source/ff.c **** 	CurrVol = (BYTE)vol;	/* Set it as current volume */
4263:DRIVER/FatFs/source/ff.c **** 
4264:DRIVER/FatFs/source/ff.c **** 	return FR_OK;
4265:DRIVER/FatFs/source/ff.c **** }
4266:DRIVER/FatFs/source/ff.c **** 
4267:DRIVER/FatFs/source/ff.c **** 
4268:DRIVER/FatFs/source/ff.c **** 
4269:DRIVER/FatFs/source/ff.c **** FRESULT f_chdir (
4270:DRIVER/FatFs/source/ff.c **** 	const TCHAR* path	/* Pointer to the directory path */
4271:DRIVER/FatFs/source/ff.c **** )
4272:DRIVER/FatFs/source/ff.c **** {
4273:DRIVER/FatFs/source/ff.c **** #if FF_STR_VOLUME_ID == 2
4274:DRIVER/FatFs/source/ff.c **** 	UINT i;
4275:DRIVER/FatFs/source/ff.c **** #endif
4276:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
4277:DRIVER/FatFs/source/ff.c **** 	DIR dj;
4278:DRIVER/FatFs/source/ff.c **** 	FATFS *fs;
4279:DRIVER/FatFs/source/ff.c **** 	DEF_NAMBUF
4280:DRIVER/FatFs/source/ff.c **** 
4281:DRIVER/FatFs/source/ff.c **** 
4282:DRIVER/FatFs/source/ff.c **** 	/* Get logical drive */
4283:DRIVER/FatFs/source/ff.c **** 	res = mount_volume(&path, &fs, 0);
4284:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
4285:DRIVER/FatFs/source/ff.c **** 		dj.obj.fs = fs;
4286:DRIVER/FatFs/source/ff.c **** 		INIT_NAMBUF(fs);
4287:DRIVER/FatFs/source/ff.c **** 		res = follow_path(&dj, path);		/* Follow the path */
4288:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK) {					/* Follow completed */
4289:DRIVER/FatFs/source/ff.c **** 			if (dj.fn[NSFLAG] & NS_NONAME) {	/* Is it the start directory itself? */
4290:DRIVER/FatFs/source/ff.c **** 				fs->cdir = dj.obj.sclust;
4291:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
4292:DRIVER/FatFs/source/ff.c **** 				if (fs->fs_type == FS_EXFAT) {
4293:DRIVER/FatFs/source/ff.c **** 					fs->cdc_scl = dj.obj.c_scl;
4294:DRIVER/FatFs/source/ff.c **** 					fs->cdc_size = dj.obj.c_size;
4295:DRIVER/FatFs/source/ff.c **** 					fs->cdc_ofs = dj.obj.c_ofs;
4296:DRIVER/FatFs/source/ff.c **** 				}
4297:DRIVER/FatFs/source/ff.c **** #endif
4298:DRIVER/FatFs/source/ff.c **** 			} else {
4299:DRIVER/FatFs/source/ff.c **** 				if (dj.obj.attr & AM_DIR) {	/* It is a sub-directory */
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 181


4300:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
4301:DRIVER/FatFs/source/ff.c **** 					if (fs->fs_type == FS_EXFAT) {
4302:DRIVER/FatFs/source/ff.c **** 						fs->cdir = ld_dword(fs->dirbuf + XDIR_FstClus);		/* Sub-directory cluster */
4303:DRIVER/FatFs/source/ff.c **** 						fs->cdc_scl = dj.obj.sclust;						/* Save containing directory information */
4304:DRIVER/FatFs/source/ff.c **** 						fs->cdc_size = ((DWORD)dj.obj.objsize & 0xFFFFFF00) | dj.obj.stat;
4305:DRIVER/FatFs/source/ff.c **** 						fs->cdc_ofs = dj.blk_ofs;
4306:DRIVER/FatFs/source/ff.c **** 					} else
4307:DRIVER/FatFs/source/ff.c **** #endif
4308:DRIVER/FatFs/source/ff.c **** 					{
4309:DRIVER/FatFs/source/ff.c **** 						fs->cdir = ld_clust(fs, dj.dir);					/* Sub-directory cluster */
4310:DRIVER/FatFs/source/ff.c **** 					}
4311:DRIVER/FatFs/source/ff.c **** 				} else {
4312:DRIVER/FatFs/source/ff.c **** 					res = FR_NO_PATH;		/* Reached but a file */
4313:DRIVER/FatFs/source/ff.c **** 				}
4314:DRIVER/FatFs/source/ff.c **** 			}
4315:DRIVER/FatFs/source/ff.c **** 		}
4316:DRIVER/FatFs/source/ff.c **** 		FREE_NAMBUF();
4317:DRIVER/FatFs/source/ff.c **** 		if (res == FR_NO_FILE) res = FR_NO_PATH;
4318:DRIVER/FatFs/source/ff.c **** #if FF_STR_VOLUME_ID == 2	/* Also current drive is changed if in Unix style volume ID */
4319:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK) {
4320:DRIVER/FatFs/source/ff.c **** 			for (i = FF_VOLUMES - 1; i && fs != FatFs[i]; i--) ;	/* Set current drive */
4321:DRIVER/FatFs/source/ff.c **** 			CurrVol = (BYTE)i;
4322:DRIVER/FatFs/source/ff.c **** 		}
4323:DRIVER/FatFs/source/ff.c **** #endif
4324:DRIVER/FatFs/source/ff.c **** 	}
4325:DRIVER/FatFs/source/ff.c **** 
4326:DRIVER/FatFs/source/ff.c **** 	LEAVE_FF(fs, res);
4327:DRIVER/FatFs/source/ff.c **** }
4328:DRIVER/FatFs/source/ff.c **** 
4329:DRIVER/FatFs/source/ff.c **** 
4330:DRIVER/FatFs/source/ff.c **** #if FF_FS_RPATH >= 2
4331:DRIVER/FatFs/source/ff.c **** FRESULT f_getcwd (
4332:DRIVER/FatFs/source/ff.c **** 	TCHAR* buff,	/* Pointer to the directory path */
4333:DRIVER/FatFs/source/ff.c **** 	UINT len		/* Size of buff in unit of TCHAR */
4334:DRIVER/FatFs/source/ff.c **** )
4335:DRIVER/FatFs/source/ff.c **** {
4336:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
4337:DRIVER/FatFs/source/ff.c **** 	DIR dj;
4338:DRIVER/FatFs/source/ff.c **** 	FATFS *fs;
4339:DRIVER/FatFs/source/ff.c **** 	UINT i, n;
4340:DRIVER/FatFs/source/ff.c **** 	DWORD ccl;
4341:DRIVER/FatFs/source/ff.c **** 	TCHAR *tp = buff;
4342:DRIVER/FatFs/source/ff.c **** #if FF_VOLUMES >= 2
4343:DRIVER/FatFs/source/ff.c **** 	UINT vl;
4344:DRIVER/FatFs/source/ff.c **** #if FF_STR_VOLUME_ID
4345:DRIVER/FatFs/source/ff.c **** 	const char *vp;
4346:DRIVER/FatFs/source/ff.c **** #endif
4347:DRIVER/FatFs/source/ff.c **** #endif
4348:DRIVER/FatFs/source/ff.c **** 	FILINFO fno;
4349:DRIVER/FatFs/source/ff.c **** 	DEF_NAMBUF
4350:DRIVER/FatFs/source/ff.c **** 
4351:DRIVER/FatFs/source/ff.c **** 
4352:DRIVER/FatFs/source/ff.c **** 	/* Get logical drive */
4353:DRIVER/FatFs/source/ff.c **** 	buff[0] = 0;	/* Set null string to get current volume */
4354:DRIVER/FatFs/source/ff.c **** 	res = mount_volume((const TCHAR**)&buff, &fs, 0);	/* Get current volume */
4355:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
4356:DRIVER/FatFs/source/ff.c **** 		dj.obj.fs = fs;
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 182


4357:DRIVER/FatFs/source/ff.c **** 		INIT_NAMBUF(fs);
4358:DRIVER/FatFs/source/ff.c **** 
4359:DRIVER/FatFs/source/ff.c **** 		/* Follow parent directories and create the path */
4360:DRIVER/FatFs/source/ff.c **** 		i = len;			/* Bottom of buffer (directory stack base) */
4361:DRIVER/FatFs/source/ff.c **** 		if (!FF_FS_EXFAT || fs->fs_type != FS_EXFAT) {	/* (Cannot do getcwd on exFAT and returns root pat
4362:DRIVER/FatFs/source/ff.c **** 			dj.obj.sclust = fs->cdir;				/* Start to follow upper directory from current directory */
4363:DRIVER/FatFs/source/ff.c **** 			while ((ccl = dj.obj.sclust) != 0) {	/* Repeat while current directory is a sub-directory */
4364:DRIVER/FatFs/source/ff.c **** 				res = dir_sdi(&dj, 1 * SZDIRE);	/* Get parent directory */
4365:DRIVER/FatFs/source/ff.c **** 				if (res != FR_OK) break;
4366:DRIVER/FatFs/source/ff.c **** 				res = move_window(fs, dj.sect);
4367:DRIVER/FatFs/source/ff.c **** 				if (res != FR_OK) break;
4368:DRIVER/FatFs/source/ff.c **** 				dj.obj.sclust = ld_clust(fs, dj.dir);	/* Goto parent directory */
4369:DRIVER/FatFs/source/ff.c **** 				res = dir_sdi(&dj, 0);
4370:DRIVER/FatFs/source/ff.c **** 				if (res != FR_OK) break;
4371:DRIVER/FatFs/source/ff.c **** 				do {							/* Find the entry links to the child directory */
4372:DRIVER/FatFs/source/ff.c **** 					res = DIR_READ_FILE(&dj);
4373:DRIVER/FatFs/source/ff.c **** 					if (res != FR_OK) break;
4374:DRIVER/FatFs/source/ff.c **** 					if (ccl == ld_clust(fs, dj.dir)) break;	/* Found the entry */
4375:DRIVER/FatFs/source/ff.c **** 					res = dir_next(&dj, 0);
4376:DRIVER/FatFs/source/ff.c **** 				} while (res == FR_OK);
4377:DRIVER/FatFs/source/ff.c **** 				if (res == FR_NO_FILE) res = FR_INT_ERR;/* It cannot be 'not found'. */
4378:DRIVER/FatFs/source/ff.c **** 				if (res != FR_OK) break;
4379:DRIVER/FatFs/source/ff.c **** 				get_fileinfo(&dj, &fno);		/* Get the directory name and push it to the buffer */
4380:DRIVER/FatFs/source/ff.c **** 				for (n = 0; fno.fname[n]; n++) ;	/* Name length */
4381:DRIVER/FatFs/source/ff.c **** 				if (i < n + 1) {	/* Insufficient space to store the path name? */
4382:DRIVER/FatFs/source/ff.c **** 					res = FR_NOT_ENOUGH_CORE; break;
4383:DRIVER/FatFs/source/ff.c **** 				}
4384:DRIVER/FatFs/source/ff.c **** 				while (n) buff[--i] = fno.fname[--n];	/* Stack the name */
4385:DRIVER/FatFs/source/ff.c **** 				buff[--i] = '/';
4386:DRIVER/FatFs/source/ff.c **** 			}
4387:DRIVER/FatFs/source/ff.c **** 		}
4388:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK) {
4389:DRIVER/FatFs/source/ff.c **** 			if (i == len) buff[--i] = '/';	/* Is it the root-directory? */
4390:DRIVER/FatFs/source/ff.c **** #if FF_VOLUMES >= 2			/* Put drive prefix */
4391:DRIVER/FatFs/source/ff.c **** 			vl = 0;
4392:DRIVER/FatFs/source/ff.c **** #if FF_STR_VOLUME_ID >= 1	/* String volume ID */
4393:DRIVER/FatFs/source/ff.c **** 			for (n = 0, vp = (const char*)VolumeStr[CurrVol]; vp[n]; n++) ;
4394:DRIVER/FatFs/source/ff.c **** 			if (i >= n + 2) {
4395:DRIVER/FatFs/source/ff.c **** 				if (FF_STR_VOLUME_ID == 2) *tp++ = (TCHAR)'/';
4396:DRIVER/FatFs/source/ff.c **** 				for (vl = 0; vl < n; *tp++ = (TCHAR)vp[vl], vl++) ;
4397:DRIVER/FatFs/source/ff.c **** 				if (FF_STR_VOLUME_ID == 1) *tp++ = (TCHAR)':';
4398:DRIVER/FatFs/source/ff.c **** 				vl++;
4399:DRIVER/FatFs/source/ff.c **** 			}
4400:DRIVER/FatFs/source/ff.c **** #else						/* Numeric volume ID */
4401:DRIVER/FatFs/source/ff.c **** 			if (i >= 3) {
4402:DRIVER/FatFs/source/ff.c **** 				*tp++ = (TCHAR)'0' + CurrVol;
4403:DRIVER/FatFs/source/ff.c **** 				*tp++ = (TCHAR)':';
4404:DRIVER/FatFs/source/ff.c **** 				vl = 2;
4405:DRIVER/FatFs/source/ff.c **** 			}
4406:DRIVER/FatFs/source/ff.c **** #endif
4407:DRIVER/FatFs/source/ff.c **** 			if (vl == 0) res = FR_NOT_ENOUGH_CORE;
4408:DRIVER/FatFs/source/ff.c **** #endif
4409:DRIVER/FatFs/source/ff.c **** 			/* Add current directory path */
4410:DRIVER/FatFs/source/ff.c **** 			if (res == FR_OK) {
4411:DRIVER/FatFs/source/ff.c **** 				do {	/* Copy stacked path string */
4412:DRIVER/FatFs/source/ff.c **** 					*tp++ = buff[i++];
4413:DRIVER/FatFs/source/ff.c **** 				} while (i < len);
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 183


4414:DRIVER/FatFs/source/ff.c **** 			}
4415:DRIVER/FatFs/source/ff.c **** 		}
4416:DRIVER/FatFs/source/ff.c **** 		FREE_NAMBUF();
4417:DRIVER/FatFs/source/ff.c **** 	}
4418:DRIVER/FatFs/source/ff.c **** 
4419:DRIVER/FatFs/source/ff.c **** 	*tp = 0;
4420:DRIVER/FatFs/source/ff.c **** 	LEAVE_FF(fs, res);
4421:DRIVER/FatFs/source/ff.c **** }
4422:DRIVER/FatFs/source/ff.c **** 
4423:DRIVER/FatFs/source/ff.c **** #endif /* FF_FS_RPATH >= 2 */
4424:DRIVER/FatFs/source/ff.c **** #endif /* FF_FS_RPATH >= 1 */
4425:DRIVER/FatFs/source/ff.c **** 
4426:DRIVER/FatFs/source/ff.c **** 
4427:DRIVER/FatFs/source/ff.c **** 
4428:DRIVER/FatFs/source/ff.c **** #if FF_FS_MINIMIZE <= 2
4429:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
4430:DRIVER/FatFs/source/ff.c **** /* Seek File Read/Write Pointer                                          */
4431:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
4432:DRIVER/FatFs/source/ff.c **** 
4433:DRIVER/FatFs/source/ff.c **** FRESULT f_lseek (
4434:DRIVER/FatFs/source/ff.c **** 	FIL* fp,		/* Pointer to the file object */
4435:DRIVER/FatFs/source/ff.c **** 	FSIZE_t ofs		/* File pointer from top of file */
4436:DRIVER/FatFs/source/ff.c **** )
4437:DRIVER/FatFs/source/ff.c **** {
4438:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
4439:DRIVER/FatFs/source/ff.c **** 	FATFS *fs;
4440:DRIVER/FatFs/source/ff.c **** 	DWORD clst, bcs;
4441:DRIVER/FatFs/source/ff.c **** 	LBA_t nsect;
4442:DRIVER/FatFs/source/ff.c **** 	FSIZE_t ifptr;
4443:DRIVER/FatFs/source/ff.c **** #if FF_USE_FASTSEEK
4444:DRIVER/FatFs/source/ff.c **** 	DWORD cl, pcl, ncl, tcl, tlen, ulen;
4445:DRIVER/FatFs/source/ff.c **** 	DWORD *tbl;
4446:DRIVER/FatFs/source/ff.c **** 	LBA_t dsc;
4447:DRIVER/FatFs/source/ff.c **** #endif
4448:DRIVER/FatFs/source/ff.c **** 
4449:DRIVER/FatFs/source/ff.c **** 	res = validate(&fp->obj, &fs);		/* Check validity of the file object */
4450:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) res = (FRESULT)fp->err;
4451:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT && !FF_FS_READONLY
4452:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK && fs->fs_type == FS_EXFAT) {
4453:DRIVER/FatFs/source/ff.c **** 		res = fill_last_frag(&fp->obj, fp->clust, 0xFFFFFFFF);	/* Fill last fragment on the FAT if needed
4454:DRIVER/FatFs/source/ff.c **** 	}
4455:DRIVER/FatFs/source/ff.c **** #endif
4456:DRIVER/FatFs/source/ff.c **** 	if (res != FR_OK) LEAVE_FF(fs, res);
4457:DRIVER/FatFs/source/ff.c **** 
4458:DRIVER/FatFs/source/ff.c **** #if FF_USE_FASTSEEK
4459:DRIVER/FatFs/source/ff.c **** 	if (fp->cltbl) {	/* Fast seek */
4460:DRIVER/FatFs/source/ff.c **** 		if (ofs == CREATE_LINKMAP) {	/* Create CLMT */
4461:DRIVER/FatFs/source/ff.c **** 			tbl = fp->cltbl;
4462:DRIVER/FatFs/source/ff.c **** 			tlen = *tbl++; ulen = 2;	/* Given table size and required table size */
4463:DRIVER/FatFs/source/ff.c **** 			cl = fp->obj.sclust;		/* Origin of the chain */
4464:DRIVER/FatFs/source/ff.c **** 			if (cl != 0) {
4465:DRIVER/FatFs/source/ff.c **** 				do {
4466:DRIVER/FatFs/source/ff.c **** 					/* Get a fragment */
4467:DRIVER/FatFs/source/ff.c **** 					tcl = cl; ncl = 0; ulen += 2;	/* Top, length and used items */
4468:DRIVER/FatFs/source/ff.c **** 					do {
4469:DRIVER/FatFs/source/ff.c **** 						pcl = cl; ncl++;
4470:DRIVER/FatFs/source/ff.c **** 						cl = get_fat(&fp->obj, cl);
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 184


4471:DRIVER/FatFs/source/ff.c **** 						if (cl <= 1) ABORT(fs, FR_INT_ERR);
4472:DRIVER/FatFs/source/ff.c **** 						if (cl == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
4473:DRIVER/FatFs/source/ff.c **** 					} while (cl == pcl + 1);
4474:DRIVER/FatFs/source/ff.c **** 					if (ulen <= tlen) {		/* Store the length and top of the fragment */
4475:DRIVER/FatFs/source/ff.c **** 						*tbl++ = ncl; *tbl++ = tcl;
4476:DRIVER/FatFs/source/ff.c **** 					}
4477:DRIVER/FatFs/source/ff.c **** 				} while (cl < fs->n_fatent);	/* Repeat until end of chain */
4478:DRIVER/FatFs/source/ff.c **** 			}
4479:DRIVER/FatFs/source/ff.c **** 			*fp->cltbl = ulen;	/* Number of items used */
4480:DRIVER/FatFs/source/ff.c **** 			if (ulen <= tlen) {
4481:DRIVER/FatFs/source/ff.c **** 				*tbl = 0;		/* Terminate table */
4482:DRIVER/FatFs/source/ff.c **** 			} else {
4483:DRIVER/FatFs/source/ff.c **** 				res = FR_NOT_ENOUGH_CORE;	/* Given table size is smaller than required */
4484:DRIVER/FatFs/source/ff.c **** 			}
4485:DRIVER/FatFs/source/ff.c **** 		} else {						/* Fast seek */
4486:DRIVER/FatFs/source/ff.c **** 			if (ofs > fp->obj.objsize) ofs = fp->obj.objsize;	/* Clip offset at the file size */
4487:DRIVER/FatFs/source/ff.c **** 			fp->fptr = ofs;				/* Set file pointer */
4488:DRIVER/FatFs/source/ff.c **** 			if (ofs > 0) {
4489:DRIVER/FatFs/source/ff.c **** 				fp->clust = clmt_clust(fp, ofs - 1);
4490:DRIVER/FatFs/source/ff.c **** 				dsc = clst2sect(fs, fp->clust);
4491:DRIVER/FatFs/source/ff.c **** 				if (dsc == 0) ABORT(fs, FR_INT_ERR);
4492:DRIVER/FatFs/source/ff.c **** 				dsc += (DWORD)((ofs - 1) / SS(fs)) & (fs->csize - 1);
4493:DRIVER/FatFs/source/ff.c **** 				if (fp->fptr % SS(fs) && dsc != fp->sect) {	/* Refill sector cache if needed */
4494:DRIVER/FatFs/source/ff.c **** #if !FF_FS_TINY
4495:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY
4496:DRIVER/FatFs/source/ff.c **** 					if (fp->flag & FA_DIRTY) {		/* Write-back dirty sector cache */
4497:DRIVER/FatFs/source/ff.c **** 						if (disk_write(fs->pdrv, fp->buf, fp->sect, 1) != RES_OK) ABORT(fs, FR_DISK_ERR);
4498:DRIVER/FatFs/source/ff.c **** 						fp->flag &= (BYTE)~FA_DIRTY;
4499:DRIVER/FatFs/source/ff.c **** 					}
4500:DRIVER/FatFs/source/ff.c **** #endif
4501:DRIVER/FatFs/source/ff.c **** 					if (disk_read(fs->pdrv, fp->buf, dsc, 1) != RES_OK) ABORT(fs, FR_DISK_ERR);	/* Load current se
4502:DRIVER/FatFs/source/ff.c **** #endif
4503:DRIVER/FatFs/source/ff.c **** 					fp->sect = dsc;
4504:DRIVER/FatFs/source/ff.c **** 				}
4505:DRIVER/FatFs/source/ff.c **** 			}
4506:DRIVER/FatFs/source/ff.c **** 		}
4507:DRIVER/FatFs/source/ff.c **** 	} else
4508:DRIVER/FatFs/source/ff.c **** #endif
4509:DRIVER/FatFs/source/ff.c **** 
4510:DRIVER/FatFs/source/ff.c **** 	/* Normal Seek */
4511:DRIVER/FatFs/source/ff.c **** 	{
4512:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
4513:DRIVER/FatFs/source/ff.c **** 		if (fs->fs_type != FS_EXFAT && ofs >= 0x100000000) ofs = 0xFFFFFFFF;	/* Clip at 4 GiB - 1 if at F
4514:DRIVER/FatFs/source/ff.c **** #endif
4515:DRIVER/FatFs/source/ff.c **** 		if (ofs > fp->obj.objsize && (FF_FS_READONLY || !(fp->flag & FA_WRITE))) {	/* In read-only mode, 
4516:DRIVER/FatFs/source/ff.c **** 			ofs = fp->obj.objsize;
4517:DRIVER/FatFs/source/ff.c **** 		}
4518:DRIVER/FatFs/source/ff.c **** 		ifptr = fp->fptr;
4519:DRIVER/FatFs/source/ff.c **** 		fp->fptr = nsect = 0;
4520:DRIVER/FatFs/source/ff.c **** 		if (ofs > 0) {
4521:DRIVER/FatFs/source/ff.c **** 			bcs = (DWORD)fs->csize * SS(fs);	/* Cluster size (byte) */
4522:DRIVER/FatFs/source/ff.c **** 			if (ifptr > 0 &&
4523:DRIVER/FatFs/source/ff.c **** 				(ofs - 1) / bcs >= (ifptr - 1) / bcs) {	/* When seek to same or following cluster, */
4524:DRIVER/FatFs/source/ff.c **** 				fp->fptr = (ifptr - 1) & ~(FSIZE_t)(bcs - 1);	/* start from the current cluster */
4525:DRIVER/FatFs/source/ff.c **** 				ofs -= fp->fptr;
4526:DRIVER/FatFs/source/ff.c **** 				clst = fp->clust;
4527:DRIVER/FatFs/source/ff.c **** 			} else {									/* When seek to back cluster, */
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 185


4528:DRIVER/FatFs/source/ff.c **** 				clst = fp->obj.sclust;					/* start from the first cluster */
4529:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY
4530:DRIVER/FatFs/source/ff.c **** 				if (clst == 0) {						/* If no cluster chain, create a new chain */
4531:DRIVER/FatFs/source/ff.c **** 					clst = create_chain(&fp->obj, 0);
4532:DRIVER/FatFs/source/ff.c **** 					if (clst == 1) ABORT(fs, FR_INT_ERR);
4533:DRIVER/FatFs/source/ff.c **** 					if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
4534:DRIVER/FatFs/source/ff.c **** 					fp->obj.sclust = clst;
4535:DRIVER/FatFs/source/ff.c **** 				}
4536:DRIVER/FatFs/source/ff.c **** #endif
4537:DRIVER/FatFs/source/ff.c **** 				fp->clust = clst;
4538:DRIVER/FatFs/source/ff.c **** 			}
4539:DRIVER/FatFs/source/ff.c **** 			if (clst != 0) {
4540:DRIVER/FatFs/source/ff.c **** 				while (ofs > bcs) {						/* Cluster following loop */
4541:DRIVER/FatFs/source/ff.c **** 					ofs -= bcs; fp->fptr += bcs;
4542:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY
4543:DRIVER/FatFs/source/ff.c **** 					if (fp->flag & FA_WRITE) {			/* Check if in write mode or not */
4544:DRIVER/FatFs/source/ff.c **** 						if (FF_FS_EXFAT && fp->fptr > fp->obj.objsize) {	/* No FAT chain object needs correct objsize
4545:DRIVER/FatFs/source/ff.c **** 							fp->obj.objsize = fp->fptr;
4546:DRIVER/FatFs/source/ff.c **** 							fp->flag |= FA_MODIFIED;
4547:DRIVER/FatFs/source/ff.c **** 						}
4548:DRIVER/FatFs/source/ff.c **** 						clst = create_chain(&fp->obj, clst);	/* Follow chain with forceed stretch */
4549:DRIVER/FatFs/source/ff.c **** 						if (clst == 0) {				/* Clip file size in case of disk full */
4550:DRIVER/FatFs/source/ff.c **** 							ofs = 0; break;
4551:DRIVER/FatFs/source/ff.c **** 						}
4552:DRIVER/FatFs/source/ff.c **** 					} else
4553:DRIVER/FatFs/source/ff.c **** #endif
4554:DRIVER/FatFs/source/ff.c **** 					{
4555:DRIVER/FatFs/source/ff.c **** 						clst = get_fat(&fp->obj, clst);	/* Follow cluster chain if not in write mode */
4556:DRIVER/FatFs/source/ff.c **** 					}
4557:DRIVER/FatFs/source/ff.c **** 					if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
4558:DRIVER/FatFs/source/ff.c **** 					if (clst <= 1 || clst >= fs->n_fatent) ABORT(fs, FR_INT_ERR);
4559:DRIVER/FatFs/source/ff.c **** 					fp->clust = clst;
4560:DRIVER/FatFs/source/ff.c **** 				}
4561:DRIVER/FatFs/source/ff.c **** 				fp->fptr += ofs;
4562:DRIVER/FatFs/source/ff.c **** 				if (ofs % SS(fs)) {
4563:DRIVER/FatFs/source/ff.c **** 					nsect = clst2sect(fs, clst);	/* Current sector */
4564:DRIVER/FatFs/source/ff.c **** 					if (nsect == 0) ABORT(fs, FR_INT_ERR);
4565:DRIVER/FatFs/source/ff.c **** 					nsect += (DWORD)(ofs / SS(fs));
4566:DRIVER/FatFs/source/ff.c **** 				}
4567:DRIVER/FatFs/source/ff.c **** 			}
4568:DRIVER/FatFs/source/ff.c **** 		}
4569:DRIVER/FatFs/source/ff.c **** 		if (!FF_FS_READONLY && fp->fptr > fp->obj.objsize) {	/* Set file change flag if the file size is 
4570:DRIVER/FatFs/source/ff.c **** 			fp->obj.objsize = fp->fptr;
4571:DRIVER/FatFs/source/ff.c **** 			fp->flag |= FA_MODIFIED;
4572:DRIVER/FatFs/source/ff.c **** 		}
4573:DRIVER/FatFs/source/ff.c **** 		if (fp->fptr % SS(fs) && nsect != fp->sect) {	/* Fill sector cache if needed */
4574:DRIVER/FatFs/source/ff.c **** #if !FF_FS_TINY
4575:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY
4576:DRIVER/FatFs/source/ff.c **** 			if (fp->flag & FA_DIRTY) {			/* Write-back dirty sector cache */
4577:DRIVER/FatFs/source/ff.c **** 				if (disk_write(fs->pdrv, fp->buf, fp->sect, 1) != RES_OK) ABORT(fs, FR_DISK_ERR);
4578:DRIVER/FatFs/source/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
4579:DRIVER/FatFs/source/ff.c **** 			}
4580:DRIVER/FatFs/source/ff.c **** #endif
4581:DRIVER/FatFs/source/ff.c **** 			if (disk_read(fs->pdrv, fp->buf, nsect, 1) != RES_OK) ABORT(fs, FR_DISK_ERR);	/* Fill sector cac
4582:DRIVER/FatFs/source/ff.c **** #endif
4583:DRIVER/FatFs/source/ff.c **** 			fp->sect = nsect;
4584:DRIVER/FatFs/source/ff.c **** 		}
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 186


4585:DRIVER/FatFs/source/ff.c **** 	}
4586:DRIVER/FatFs/source/ff.c **** 
4587:DRIVER/FatFs/source/ff.c **** 	LEAVE_FF(fs, res);
4588:DRIVER/FatFs/source/ff.c **** }
4589:DRIVER/FatFs/source/ff.c **** 
4590:DRIVER/FatFs/source/ff.c **** 
4591:DRIVER/FatFs/source/ff.c **** 
4592:DRIVER/FatFs/source/ff.c **** #if FF_FS_MINIMIZE <= 1
4593:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
4594:DRIVER/FatFs/source/ff.c **** /* Create a Directory Object                                             */
4595:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
4596:DRIVER/FatFs/source/ff.c **** 
4597:DRIVER/FatFs/source/ff.c **** FRESULT f_opendir (
4598:DRIVER/FatFs/source/ff.c **** 	DIR* dp,			/* Pointer to directory object to create */
4599:DRIVER/FatFs/source/ff.c **** 	const TCHAR* path	/* Pointer to the directory path */
4600:DRIVER/FatFs/source/ff.c **** )
4601:DRIVER/FatFs/source/ff.c **** {
4602:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
4603:DRIVER/FatFs/source/ff.c **** 	FATFS *fs;
4604:DRIVER/FatFs/source/ff.c **** 	DEF_NAMBUF
4605:DRIVER/FatFs/source/ff.c **** 
4606:DRIVER/FatFs/source/ff.c **** 
4607:DRIVER/FatFs/source/ff.c **** 	if (!dp) return FR_INVALID_OBJECT;
4608:DRIVER/FatFs/source/ff.c **** 
4609:DRIVER/FatFs/source/ff.c **** 	/* Get logical drive */
4610:DRIVER/FatFs/source/ff.c **** 	res = mount_volume(&path, &fs, 0);
4611:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
4612:DRIVER/FatFs/source/ff.c **** 		dp->obj.fs = fs;
4613:DRIVER/FatFs/source/ff.c **** 		INIT_NAMBUF(fs);
4614:DRIVER/FatFs/source/ff.c **** 		res = follow_path(dp, path);			/* Follow the path to the directory */
4615:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK) {						/* Follow completed */
4616:DRIVER/FatFs/source/ff.c **** 			if (!(dp->fn[NSFLAG] & NS_NONAME)) {	/* It is not the origin directory itself */
4617:DRIVER/FatFs/source/ff.c **** 				if (dp->obj.attr & AM_DIR) {		/* This object is a sub-directory */
4618:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
4619:DRIVER/FatFs/source/ff.c **** 					if (fs->fs_type == FS_EXFAT) {
4620:DRIVER/FatFs/source/ff.c **** 						dp->obj.c_scl = dp->obj.sclust;	/* Get containing directory inforamation */
4621:DRIVER/FatFs/source/ff.c **** 						dp->obj.c_size = ((DWORD)dp->obj.objsize & 0xFFFFFF00) | dp->obj.stat;
4622:DRIVER/FatFs/source/ff.c **** 						dp->obj.c_ofs = dp->blk_ofs;
4623:DRIVER/FatFs/source/ff.c **** 						init_alloc_info(fs, &dp->obj);	/* Get object allocation info */
4624:DRIVER/FatFs/source/ff.c **** 					} else
4625:DRIVER/FatFs/source/ff.c **** #endif
4626:DRIVER/FatFs/source/ff.c **** 					{
4627:DRIVER/FatFs/source/ff.c **** 						dp->obj.sclust = ld_clust(fs, dp->dir);	/* Get object allocation info */
4628:DRIVER/FatFs/source/ff.c **** 					}
4629:DRIVER/FatFs/source/ff.c **** 				} else {						/* This object is a file */
4630:DRIVER/FatFs/source/ff.c **** 					res = FR_NO_PATH;
4631:DRIVER/FatFs/source/ff.c **** 				}
4632:DRIVER/FatFs/source/ff.c **** 			}
4633:DRIVER/FatFs/source/ff.c **** 			if (res == FR_OK) {
4634:DRIVER/FatFs/source/ff.c **** 				dp->obj.id = fs->id;
4635:DRIVER/FatFs/source/ff.c **** 				res = dir_sdi(dp, 0);			/* Rewind directory */
4636:DRIVER/FatFs/source/ff.c **** #if FF_FS_LOCK
4637:DRIVER/FatFs/source/ff.c **** 				if (res == FR_OK) {
4638:DRIVER/FatFs/source/ff.c **** 					if (dp->obj.sclust != 0) {
4639:DRIVER/FatFs/source/ff.c **** 						dp->obj.lockid = inc_share(dp, 0);	/* Lock the sub directory */
4640:DRIVER/FatFs/source/ff.c **** 						if (!dp->obj.lockid) res = FR_TOO_MANY_OPEN_FILES;
4641:DRIVER/FatFs/source/ff.c **** 					} else {
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 187


4642:DRIVER/FatFs/source/ff.c **** 						dp->obj.lockid = 0;	/* Root directory need not to be locked */
4643:DRIVER/FatFs/source/ff.c **** 					}
4644:DRIVER/FatFs/source/ff.c **** 				}
4645:DRIVER/FatFs/source/ff.c **** #endif
4646:DRIVER/FatFs/source/ff.c **** 			}
4647:DRIVER/FatFs/source/ff.c **** 		}
4648:DRIVER/FatFs/source/ff.c **** 		FREE_NAMBUF();
4649:DRIVER/FatFs/source/ff.c **** 		if (res == FR_NO_FILE) res = FR_NO_PATH;
4650:DRIVER/FatFs/source/ff.c **** 	}
4651:DRIVER/FatFs/source/ff.c **** 	if (res != FR_OK) dp->obj.fs = 0;		/* Invalidate the directory object if function failed */
4652:DRIVER/FatFs/source/ff.c **** 
4653:DRIVER/FatFs/source/ff.c **** 	LEAVE_FF(fs, res);
4654:DRIVER/FatFs/source/ff.c **** }
4655:DRIVER/FatFs/source/ff.c **** 
4656:DRIVER/FatFs/source/ff.c **** 
4657:DRIVER/FatFs/source/ff.c **** 
4658:DRIVER/FatFs/source/ff.c **** 
4659:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
4660:DRIVER/FatFs/source/ff.c **** /* Close Directory                                                       */
4661:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
4662:DRIVER/FatFs/source/ff.c **** 
4663:DRIVER/FatFs/source/ff.c **** FRESULT f_closedir (
4664:DRIVER/FatFs/source/ff.c **** 	DIR *dp		/* Pointer to the directory object to be closed */
4665:DRIVER/FatFs/source/ff.c **** )
4666:DRIVER/FatFs/source/ff.c **** {
4667:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
4668:DRIVER/FatFs/source/ff.c **** 	FATFS *fs;
4669:DRIVER/FatFs/source/ff.c **** 
4670:DRIVER/FatFs/source/ff.c **** 
4671:DRIVER/FatFs/source/ff.c **** 	res = validate(&dp->obj, &fs);	/* Check validity of the file object */
4672:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
4673:DRIVER/FatFs/source/ff.c **** #if FF_FS_LOCK
4674:DRIVER/FatFs/source/ff.c **** 		if (dp->obj.lockid) res = dec_share(dp->obj.lockid);	/* Decrement sub-directory open counter */
4675:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK) dp->obj.fs = 0;	/* Invalidate directory object */
4676:DRIVER/FatFs/source/ff.c **** #else
4677:DRIVER/FatFs/source/ff.c **** 		dp->obj.fs = 0;	/* Invalidate directory object */
4678:DRIVER/FatFs/source/ff.c **** #endif
4679:DRIVER/FatFs/source/ff.c **** #if FF_FS_REENTRANT
4680:DRIVER/FatFs/source/ff.c **** 		unlock_volume(fs, FR_OK);	/* Unlock volume */
4681:DRIVER/FatFs/source/ff.c **** #endif
4682:DRIVER/FatFs/source/ff.c **** 	}
4683:DRIVER/FatFs/source/ff.c **** 	return res;
4684:DRIVER/FatFs/source/ff.c **** }
4685:DRIVER/FatFs/source/ff.c **** 
4686:DRIVER/FatFs/source/ff.c **** 
4687:DRIVER/FatFs/source/ff.c **** 
4688:DRIVER/FatFs/source/ff.c **** 
4689:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
4690:DRIVER/FatFs/source/ff.c **** /* Read Directory Entries in Sequence                                    */
4691:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
4692:DRIVER/FatFs/source/ff.c **** 
4693:DRIVER/FatFs/source/ff.c **** FRESULT f_readdir (
4694:DRIVER/FatFs/source/ff.c **** 	DIR* dp,			/* Pointer to the open directory object */
4695:DRIVER/FatFs/source/ff.c **** 	FILINFO* fno		/* Pointer to file information to return */
4696:DRIVER/FatFs/source/ff.c **** )
4697:DRIVER/FatFs/source/ff.c **** {
4698:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 188


4699:DRIVER/FatFs/source/ff.c **** 	FATFS *fs;
4700:DRIVER/FatFs/source/ff.c **** 	DEF_NAMBUF
4701:DRIVER/FatFs/source/ff.c **** 
4702:DRIVER/FatFs/source/ff.c **** 
4703:DRIVER/FatFs/source/ff.c **** 	res = validate(&dp->obj, &fs);	/* Check validity of the directory object */
4704:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
4705:DRIVER/FatFs/source/ff.c **** 		if (!fno) {
4706:DRIVER/FatFs/source/ff.c **** 			res = dir_sdi(dp, 0);		/* Rewind the directory object */
4707:DRIVER/FatFs/source/ff.c **** 		} else {
4708:DRIVER/FatFs/source/ff.c **** 			INIT_NAMBUF(fs);
4709:DRIVER/FatFs/source/ff.c **** 			res = DIR_READ_FILE(dp);		/* Read an item */
4710:DRIVER/FatFs/source/ff.c **** 			if (res == FR_NO_FILE) res = FR_OK;	/* Ignore end of directory */
4711:DRIVER/FatFs/source/ff.c **** 			if (res == FR_OK) {				/* A valid entry is found */
4712:DRIVER/FatFs/source/ff.c **** 				get_fileinfo(dp, fno);		/* Get the object information */
4713:DRIVER/FatFs/source/ff.c **** 				res = dir_next(dp, 0);		/* Increment index for next */
4714:DRIVER/FatFs/source/ff.c **** 				if (res == FR_NO_FILE) res = FR_OK;	/* Ignore end of directory now */
4715:DRIVER/FatFs/source/ff.c **** 			}
4716:DRIVER/FatFs/source/ff.c **** 			FREE_NAMBUF();
4717:DRIVER/FatFs/source/ff.c **** 		}
4718:DRIVER/FatFs/source/ff.c **** 	}
4719:DRIVER/FatFs/source/ff.c **** 	LEAVE_FF(fs, res);
4720:DRIVER/FatFs/source/ff.c **** }
4721:DRIVER/FatFs/source/ff.c **** 
4722:DRIVER/FatFs/source/ff.c **** 
4723:DRIVER/FatFs/source/ff.c **** 
4724:DRIVER/FatFs/source/ff.c **** #if FF_USE_FIND
4725:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
4726:DRIVER/FatFs/source/ff.c **** /* Find Next File                                                        */
4727:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
4728:DRIVER/FatFs/source/ff.c **** 
4729:DRIVER/FatFs/source/ff.c **** FRESULT f_findnext (
4730:DRIVER/FatFs/source/ff.c **** 	DIR* dp,		/* Pointer to the open directory object */
4731:DRIVER/FatFs/source/ff.c **** 	FILINFO* fno	/* Pointer to the file information structure */
4732:DRIVER/FatFs/source/ff.c **** )
4733:DRIVER/FatFs/source/ff.c **** {
4734:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
4735:DRIVER/FatFs/source/ff.c **** 
4736:DRIVER/FatFs/source/ff.c **** 
4737:DRIVER/FatFs/source/ff.c **** 	for (;;) {
4738:DRIVER/FatFs/source/ff.c **** 		res = f_readdir(dp, fno);		/* Get a directory item */
4739:DRIVER/FatFs/source/ff.c **** 		if (res != FR_OK || !fno || !fno->fname[0]) break;	/* Terminate if any error or end of directory 
4740:DRIVER/FatFs/source/ff.c **** 		if (pattern_match(dp->pat, fno->fname, 0, FIND_RECURS)) break;		/* Test for the file name */
4741:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN && FF_USE_FIND == 2
4742:DRIVER/FatFs/source/ff.c **** 		if (pattern_match(dp->pat, fno->altname, 0, FIND_RECURS)) break;	/* Test for alternative name if 
4743:DRIVER/FatFs/source/ff.c **** #endif
4744:DRIVER/FatFs/source/ff.c **** 	}
4745:DRIVER/FatFs/source/ff.c **** 	return res;
4746:DRIVER/FatFs/source/ff.c **** }
4747:DRIVER/FatFs/source/ff.c **** 
4748:DRIVER/FatFs/source/ff.c **** 
4749:DRIVER/FatFs/source/ff.c **** 
4750:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
4751:DRIVER/FatFs/source/ff.c **** /* Find First File                                                       */
4752:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
4753:DRIVER/FatFs/source/ff.c **** 
4754:DRIVER/FatFs/source/ff.c **** FRESULT f_findfirst (
4755:DRIVER/FatFs/source/ff.c **** 	DIR* dp,				/* Pointer to the blank directory object */
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 189


4756:DRIVER/FatFs/source/ff.c **** 	FILINFO* fno,			/* Pointer to the file information structure */
4757:DRIVER/FatFs/source/ff.c **** 	const TCHAR* path,		/* Pointer to the directory to open */
4758:DRIVER/FatFs/source/ff.c **** 	const TCHAR* pattern	/* Pointer to the matching pattern */
4759:DRIVER/FatFs/source/ff.c **** )
4760:DRIVER/FatFs/source/ff.c **** {
4761:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
4762:DRIVER/FatFs/source/ff.c **** 
4763:DRIVER/FatFs/source/ff.c **** 
4764:DRIVER/FatFs/source/ff.c **** 	dp->pat = pattern;		/* Save pointer to pattern string */
4765:DRIVER/FatFs/source/ff.c **** 	res = f_opendir(dp, path);		/* Open the target directory */
4766:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
4767:DRIVER/FatFs/source/ff.c **** 		res = f_findnext(dp, fno);	/* Find the first item */
4768:DRIVER/FatFs/source/ff.c **** 	}
4769:DRIVER/FatFs/source/ff.c **** 	return res;
4770:DRIVER/FatFs/source/ff.c **** }
4771:DRIVER/FatFs/source/ff.c **** 
4772:DRIVER/FatFs/source/ff.c **** #endif	/* FF_USE_FIND */
4773:DRIVER/FatFs/source/ff.c **** 
4774:DRIVER/FatFs/source/ff.c **** 
4775:DRIVER/FatFs/source/ff.c **** 
4776:DRIVER/FatFs/source/ff.c **** #if FF_FS_MINIMIZE == 0
4777:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
4778:DRIVER/FatFs/source/ff.c **** /* Get File Status                                                       */
4779:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
4780:DRIVER/FatFs/source/ff.c **** 
4781:DRIVER/FatFs/source/ff.c **** FRESULT f_stat (
4782:DRIVER/FatFs/source/ff.c **** 	const TCHAR* path,	/* Pointer to the file path */
4783:DRIVER/FatFs/source/ff.c **** 	FILINFO* fno		/* Pointer to file information to return */
4784:DRIVER/FatFs/source/ff.c **** )
4785:DRIVER/FatFs/source/ff.c **** {
4786:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
4787:DRIVER/FatFs/source/ff.c **** 	DIR dj;
4788:DRIVER/FatFs/source/ff.c **** 	DEF_NAMBUF
4789:DRIVER/FatFs/source/ff.c **** 
4790:DRIVER/FatFs/source/ff.c **** 
4791:DRIVER/FatFs/source/ff.c **** 	/* Get logical drive */
4792:DRIVER/FatFs/source/ff.c **** 	res = mount_volume(&path, &dj.obj.fs, 0);
4793:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
4794:DRIVER/FatFs/source/ff.c **** 		INIT_NAMBUF(dj.obj.fs);
4795:DRIVER/FatFs/source/ff.c **** 		res = follow_path(&dj, path);	/* Follow the file path */
4796:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK) {				/* Follow completed */
4797:DRIVER/FatFs/source/ff.c **** 			if (dj.fn[NSFLAG] & NS_NONAME) {	/* It is origin directory */
4798:DRIVER/FatFs/source/ff.c **** 				res = FR_INVALID_NAME;
4799:DRIVER/FatFs/source/ff.c **** 			} else {							/* Found an object */
4800:DRIVER/FatFs/source/ff.c **** 				if (fno) get_fileinfo(&dj, fno);
4801:DRIVER/FatFs/source/ff.c **** 			}
4802:DRIVER/FatFs/source/ff.c **** 		}
4803:DRIVER/FatFs/source/ff.c **** 		FREE_NAMBUF();
4804:DRIVER/FatFs/source/ff.c **** 	}
4805:DRIVER/FatFs/source/ff.c **** 
4806:DRIVER/FatFs/source/ff.c **** 	LEAVE_FF(dj.obj.fs, res);
4807:DRIVER/FatFs/source/ff.c **** }
4808:DRIVER/FatFs/source/ff.c **** 
4809:DRIVER/FatFs/source/ff.c **** 
4810:DRIVER/FatFs/source/ff.c **** 
4811:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY
4812:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 190


4813:DRIVER/FatFs/source/ff.c **** /* Get Number of Free Clusters                                           */
4814:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
4815:DRIVER/FatFs/source/ff.c **** 
4816:DRIVER/FatFs/source/ff.c **** FRESULT f_getfree (
4817:DRIVER/FatFs/source/ff.c **** 	const TCHAR* path,	/* Logical drive number */
4818:DRIVER/FatFs/source/ff.c **** 	DWORD* nclst,		/* Pointer to a variable to return number of free clusters */
4819:DRIVER/FatFs/source/ff.c **** 	FATFS** fatfs		/* Pointer to return pointer to corresponding filesystem object */
4820:DRIVER/FatFs/source/ff.c **** )
4821:DRIVER/FatFs/source/ff.c **** {
4822:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
4823:DRIVER/FatFs/source/ff.c **** 	FATFS *fs;
4824:DRIVER/FatFs/source/ff.c **** 	DWORD nfree, clst, stat;
4825:DRIVER/FatFs/source/ff.c **** 	LBA_t sect;
4826:DRIVER/FatFs/source/ff.c **** 	UINT i;
4827:DRIVER/FatFs/source/ff.c **** 	FFOBJID obj;
4828:DRIVER/FatFs/source/ff.c **** 
4829:DRIVER/FatFs/source/ff.c **** 
4830:DRIVER/FatFs/source/ff.c **** 	/* Get logical drive */
4831:DRIVER/FatFs/source/ff.c **** 	res = mount_volume(&path, &fs, 0);
4832:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
4833:DRIVER/FatFs/source/ff.c **** 		*fatfs = fs;				/* Return ptr to the fs object */
4834:DRIVER/FatFs/source/ff.c **** 		/* If free_clst is valid, return it without full FAT scan */
4835:DRIVER/FatFs/source/ff.c **** 		if (fs->free_clst <= fs->n_fatent - 2) {
4836:DRIVER/FatFs/source/ff.c **** 			*nclst = fs->free_clst;
4837:DRIVER/FatFs/source/ff.c **** 		} else {
4838:DRIVER/FatFs/source/ff.c **** 			/* Scan FAT to obtain number of free clusters */
4839:DRIVER/FatFs/source/ff.c **** 			nfree = 0;
4840:DRIVER/FatFs/source/ff.c **** 			if (fs->fs_type == FS_FAT12) {	/* FAT12: Scan bit field FAT entries */
4841:DRIVER/FatFs/source/ff.c **** 				clst = 2; obj.fs = fs;
4842:DRIVER/FatFs/source/ff.c **** 				do {
4843:DRIVER/FatFs/source/ff.c **** 					stat = get_fat(&obj, clst);
4844:DRIVER/FatFs/source/ff.c **** 					if (stat == 0xFFFFFFFF) {
4845:DRIVER/FatFs/source/ff.c **** 						res = FR_DISK_ERR; break;
4846:DRIVER/FatFs/source/ff.c **** 					}
4847:DRIVER/FatFs/source/ff.c **** 					if (stat == 1) {
4848:DRIVER/FatFs/source/ff.c **** 						res = FR_INT_ERR; break;
4849:DRIVER/FatFs/source/ff.c **** 					}
4850:DRIVER/FatFs/source/ff.c **** 					if (stat == 0) nfree++;
4851:DRIVER/FatFs/source/ff.c **** 				} while (++clst < fs->n_fatent);
4852:DRIVER/FatFs/source/ff.c **** 			} else {
4853:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
4854:DRIVER/FatFs/source/ff.c **** 				if (fs->fs_type == FS_EXFAT) {	/* exFAT: Scan allocation bitmap */
4855:DRIVER/FatFs/source/ff.c **** 					BYTE bm;
4856:DRIVER/FatFs/source/ff.c **** 					UINT b;
4857:DRIVER/FatFs/source/ff.c **** 
4858:DRIVER/FatFs/source/ff.c **** 					clst = fs->n_fatent - 2;	/* Number of clusters */
4859:DRIVER/FatFs/source/ff.c **** 					sect = fs->bitbase;			/* Bitmap sector */
4860:DRIVER/FatFs/source/ff.c **** 					i = 0;						/* Offset in the sector */
4861:DRIVER/FatFs/source/ff.c **** 					do {	/* Counts numbuer of bits with zero in the bitmap */
4862:DRIVER/FatFs/source/ff.c **** 						if (i == 0) {	/* New sector? */
4863:DRIVER/FatFs/source/ff.c **** 							res = move_window(fs, sect++);
4864:DRIVER/FatFs/source/ff.c **** 							if (res != FR_OK) break;
4865:DRIVER/FatFs/source/ff.c **** 						}
4866:DRIVER/FatFs/source/ff.c **** 						for (b = 8, bm = ~fs->win[i]; b && clst; b--, clst--) {
4867:DRIVER/FatFs/source/ff.c **** 							nfree += bm & 1;
4868:DRIVER/FatFs/source/ff.c **** 							bm >>= 1;
4869:DRIVER/FatFs/source/ff.c **** 						}
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 191


4870:DRIVER/FatFs/source/ff.c **** 						i = (i + 1) % SS(fs);
4871:DRIVER/FatFs/source/ff.c **** 					} while (clst);
4872:DRIVER/FatFs/source/ff.c **** 				} else
4873:DRIVER/FatFs/source/ff.c **** #endif
4874:DRIVER/FatFs/source/ff.c **** 				{	/* FAT16/32: Scan WORD/DWORD FAT entries */
4875:DRIVER/FatFs/source/ff.c **** 					clst = fs->n_fatent;	/* Number of entries */
4876:DRIVER/FatFs/source/ff.c **** 					sect = fs->fatbase;		/* Top of the FAT */
4877:DRIVER/FatFs/source/ff.c **** 					i = 0;					/* Offset in the sector */
4878:DRIVER/FatFs/source/ff.c **** 					do {	/* Counts numbuer of entries with zero in the FAT */
4879:DRIVER/FatFs/source/ff.c **** 						if (i == 0) {	/* New sector? */
4880:DRIVER/FatFs/source/ff.c **** 							res = move_window(fs, sect++);
4881:DRIVER/FatFs/source/ff.c **** 							if (res != FR_OK) break;
4882:DRIVER/FatFs/source/ff.c **** 						}
4883:DRIVER/FatFs/source/ff.c **** 						if (fs->fs_type == FS_FAT16) {
4884:DRIVER/FatFs/source/ff.c **** 							if (ld_word(fs->win + i) == 0) nfree++;
4885:DRIVER/FatFs/source/ff.c **** 							i += 2;
4886:DRIVER/FatFs/source/ff.c **** 						} else {
4887:DRIVER/FatFs/source/ff.c **** 							if ((ld_dword(fs->win + i) & 0x0FFFFFFF) == 0) nfree++;
4888:DRIVER/FatFs/source/ff.c **** 							i += 4;
4889:DRIVER/FatFs/source/ff.c **** 						}
4890:DRIVER/FatFs/source/ff.c **** 						i %= SS(fs);
4891:DRIVER/FatFs/source/ff.c **** 					} while (--clst);
4892:DRIVER/FatFs/source/ff.c **** 				}
4893:DRIVER/FatFs/source/ff.c **** 			}
4894:DRIVER/FatFs/source/ff.c **** 			if (res == FR_OK) {		/* Update parameters if succeeded */
4895:DRIVER/FatFs/source/ff.c **** 				*nclst = nfree;			/* Return the free clusters */
4896:DRIVER/FatFs/source/ff.c **** 				fs->free_clst = nfree;	/* Now free_clst is valid */
4897:DRIVER/FatFs/source/ff.c **** 				fs->fsi_flag |= 1;		/* FAT32: FSInfo is to be updated */
4898:DRIVER/FatFs/source/ff.c **** 			}
4899:DRIVER/FatFs/source/ff.c **** 		}
4900:DRIVER/FatFs/source/ff.c **** 	}
4901:DRIVER/FatFs/source/ff.c **** 
4902:DRIVER/FatFs/source/ff.c **** 	LEAVE_FF(fs, res);
4903:DRIVER/FatFs/source/ff.c **** }
4904:DRIVER/FatFs/source/ff.c **** 
4905:DRIVER/FatFs/source/ff.c **** 
4906:DRIVER/FatFs/source/ff.c **** 
4907:DRIVER/FatFs/source/ff.c **** 
4908:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
4909:DRIVER/FatFs/source/ff.c **** /* Truncate File                                                         */
4910:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
4911:DRIVER/FatFs/source/ff.c **** 
4912:DRIVER/FatFs/source/ff.c **** FRESULT f_truncate (
4913:DRIVER/FatFs/source/ff.c **** 	FIL* fp		/* Pointer to the file object */
4914:DRIVER/FatFs/source/ff.c **** )
4915:DRIVER/FatFs/source/ff.c **** {
4916:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
4917:DRIVER/FatFs/source/ff.c **** 	FATFS *fs;
4918:DRIVER/FatFs/source/ff.c **** 	DWORD ncl;
4919:DRIVER/FatFs/source/ff.c **** 
4920:DRIVER/FatFs/source/ff.c **** 
4921:DRIVER/FatFs/source/ff.c **** 	res = validate(&fp->obj, &fs);	/* Check validity of the file object */
4922:DRIVER/FatFs/source/ff.c **** 	if (res != FR_OK || (res = (FRESULT)fp->err) != FR_OK) LEAVE_FF(fs, res);
4923:DRIVER/FatFs/source/ff.c **** 	if (!(fp->flag & FA_WRITE)) LEAVE_FF(fs, FR_DENIED);	/* Check access mode */
4924:DRIVER/FatFs/source/ff.c **** 
4925:DRIVER/FatFs/source/ff.c **** 	if (fp->fptr < fp->obj.objsize) {	/* Process when fptr is not on the eof */
4926:DRIVER/FatFs/source/ff.c **** 		if (fp->fptr == 0) {	/* When set file size to zero, remove entire cluster chain */
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 192


4927:DRIVER/FatFs/source/ff.c **** 			res = remove_chain(&fp->obj, fp->obj.sclust, 0);
4928:DRIVER/FatFs/source/ff.c **** 			fp->obj.sclust = 0;
4929:DRIVER/FatFs/source/ff.c **** 		} else {				/* When truncate a part of the file, remove remaining clusters */
4930:DRIVER/FatFs/source/ff.c **** 			ncl = get_fat(&fp->obj, fp->clust);
4931:DRIVER/FatFs/source/ff.c **** 			res = FR_OK;
4932:DRIVER/FatFs/source/ff.c **** 			if (ncl == 0xFFFFFFFF) res = FR_DISK_ERR;
4933:DRIVER/FatFs/source/ff.c **** 			if (ncl == 1) res = FR_INT_ERR;
4934:DRIVER/FatFs/source/ff.c **** 			if (res == FR_OK && ncl < fs->n_fatent) {
4935:DRIVER/FatFs/source/ff.c **** 				res = remove_chain(&fp->obj, ncl, fp->clust);
4936:DRIVER/FatFs/source/ff.c **** 			}
4937:DRIVER/FatFs/source/ff.c **** 		}
4938:DRIVER/FatFs/source/ff.c **** 		fp->obj.objsize = fp->fptr;	/* Set file size to current read/write point */
4939:DRIVER/FatFs/source/ff.c **** 		fp->flag |= FA_MODIFIED;
4940:DRIVER/FatFs/source/ff.c **** #if !FF_FS_TINY
4941:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK && (fp->flag & FA_DIRTY)) {
4942:DRIVER/FatFs/source/ff.c **** 			if (disk_write(fs->pdrv, fp->buf, fp->sect, 1) != RES_OK) {
4943:DRIVER/FatFs/source/ff.c **** 				res = FR_DISK_ERR;
4944:DRIVER/FatFs/source/ff.c **** 			} else {
4945:DRIVER/FatFs/source/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
4946:DRIVER/FatFs/source/ff.c **** 			}
4947:DRIVER/FatFs/source/ff.c **** 		}
4948:DRIVER/FatFs/source/ff.c **** #endif
4949:DRIVER/FatFs/source/ff.c **** 		if (res != FR_OK) ABORT(fs, res);
4950:DRIVER/FatFs/source/ff.c **** 	}
4951:DRIVER/FatFs/source/ff.c **** 
4952:DRIVER/FatFs/source/ff.c **** 	LEAVE_FF(fs, res);
4953:DRIVER/FatFs/source/ff.c **** }
4954:DRIVER/FatFs/source/ff.c **** 
4955:DRIVER/FatFs/source/ff.c **** 
4956:DRIVER/FatFs/source/ff.c **** 
4957:DRIVER/FatFs/source/ff.c **** 
4958:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
4959:DRIVER/FatFs/source/ff.c **** /* Delete a File/Directory                                               */
4960:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
4961:DRIVER/FatFs/source/ff.c **** 
4962:DRIVER/FatFs/source/ff.c **** FRESULT f_unlink (
4963:DRIVER/FatFs/source/ff.c **** 	const TCHAR* path		/* Pointer to the file or directory path */
4964:DRIVER/FatFs/source/ff.c **** )
4965:DRIVER/FatFs/source/ff.c **** {
4966:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
4967:DRIVER/FatFs/source/ff.c **** 	FATFS *fs;
4968:DRIVER/FatFs/source/ff.c **** 	DIR dj, sdj;
4969:DRIVER/FatFs/source/ff.c **** 	DWORD dclst = 0;
4970:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
4971:DRIVER/FatFs/source/ff.c **** 	FFOBJID obj;
4972:DRIVER/FatFs/source/ff.c **** #endif
4973:DRIVER/FatFs/source/ff.c **** 	DEF_NAMBUF
4974:DRIVER/FatFs/source/ff.c **** 
4975:DRIVER/FatFs/source/ff.c **** 
4976:DRIVER/FatFs/source/ff.c **** 	/* Get logical drive */
4977:DRIVER/FatFs/source/ff.c **** 	res = mount_volume(&path, &fs, FA_WRITE);
4978:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
4979:DRIVER/FatFs/source/ff.c **** 		dj.obj.fs = fs;
4980:DRIVER/FatFs/source/ff.c **** 		INIT_NAMBUF(fs);
4981:DRIVER/FatFs/source/ff.c **** 		res = follow_path(&dj, path);		/* Follow the file path */
4982:DRIVER/FatFs/source/ff.c **** 		if (FF_FS_RPATH && res == FR_OK && (dj.fn[NSFLAG] & NS_DOT)) {
4983:DRIVER/FatFs/source/ff.c **** 			res = FR_INVALID_NAME;			/* Cannot remove dot entry */
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 193


4984:DRIVER/FatFs/source/ff.c **** 		}
4985:DRIVER/FatFs/source/ff.c **** #if FF_FS_LOCK
4986:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK) res = chk_share(&dj, 2);	/* Check if it is an open object */
4987:DRIVER/FatFs/source/ff.c **** #endif
4988:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK) {					/* The object is accessible */
4989:DRIVER/FatFs/source/ff.c **** 			if (dj.fn[NSFLAG] & NS_NONAME) {
4990:DRIVER/FatFs/source/ff.c **** 				res = FR_INVALID_NAME;		/* Cannot remove the origin directory */
4991:DRIVER/FatFs/source/ff.c **** 			} else {
4992:DRIVER/FatFs/source/ff.c **** 				if (dj.obj.attr & AM_RDO) {
4993:DRIVER/FatFs/source/ff.c **** 					res = FR_DENIED;		/* Cannot remove R/O object */
4994:DRIVER/FatFs/source/ff.c **** 				}
4995:DRIVER/FatFs/source/ff.c **** 			}
4996:DRIVER/FatFs/source/ff.c **** 			if (res == FR_OK) {
4997:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
4998:DRIVER/FatFs/source/ff.c **** 				obj.fs = fs;
4999:DRIVER/FatFs/source/ff.c **** 				if (fs->fs_type == FS_EXFAT) {
5000:DRIVER/FatFs/source/ff.c **** 					init_alloc_info(fs, &obj);
5001:DRIVER/FatFs/source/ff.c **** 					dclst = obj.sclust;
5002:DRIVER/FatFs/source/ff.c **** 				} else
5003:DRIVER/FatFs/source/ff.c **** #endif
5004:DRIVER/FatFs/source/ff.c **** 				{
5005:DRIVER/FatFs/source/ff.c **** 					dclst = ld_clust(fs, dj.dir);
5006:DRIVER/FatFs/source/ff.c **** 				}
5007:DRIVER/FatFs/source/ff.c **** 				if (dj.obj.attr & AM_DIR) {			/* Is it a sub-directory? */
5008:DRIVER/FatFs/source/ff.c **** #if FF_FS_RPATH != 0
5009:DRIVER/FatFs/source/ff.c **** 					if (dclst == fs->cdir) {	 	/* Is it the current directory? */
5010:DRIVER/FatFs/source/ff.c **** 						res = FR_DENIED;
5011:DRIVER/FatFs/source/ff.c **** 					} else
5012:DRIVER/FatFs/source/ff.c **** #endif
5013:DRIVER/FatFs/source/ff.c **** 					{
5014:DRIVER/FatFs/source/ff.c **** 						sdj.obj.fs = fs;			/* Open the sub-directory */
5015:DRIVER/FatFs/source/ff.c **** 						sdj.obj.sclust = dclst;
5016:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
5017:DRIVER/FatFs/source/ff.c **** 						if (fs->fs_type == FS_EXFAT) {
5018:DRIVER/FatFs/source/ff.c **** 							sdj.obj.objsize = obj.objsize;
5019:DRIVER/FatFs/source/ff.c **** 							sdj.obj.stat = obj.stat;
5020:DRIVER/FatFs/source/ff.c **** 						}
5021:DRIVER/FatFs/source/ff.c **** #endif
5022:DRIVER/FatFs/source/ff.c **** 						res = dir_sdi(&sdj, 0);
5023:DRIVER/FatFs/source/ff.c **** 						if (res == FR_OK) {
5024:DRIVER/FatFs/source/ff.c **** 							res = DIR_READ_FILE(&sdj);			/* Test if the directory is empty */
5025:DRIVER/FatFs/source/ff.c **** 							if (res == FR_OK) res = FR_DENIED;	/* Not empty? */
5026:DRIVER/FatFs/source/ff.c **** 							if (res == FR_NO_FILE) res = FR_OK;	/* Empty? */
5027:DRIVER/FatFs/source/ff.c **** 						}
5028:DRIVER/FatFs/source/ff.c **** 					}
5029:DRIVER/FatFs/source/ff.c **** 				}
5030:DRIVER/FatFs/source/ff.c **** 			}
5031:DRIVER/FatFs/source/ff.c **** 			if (res == FR_OK) {
5032:DRIVER/FatFs/source/ff.c **** 				res = dir_remove(&dj);			/* Remove the directory entry */
5033:DRIVER/FatFs/source/ff.c **** 				if (res == FR_OK && dclst != 0) {	/* Remove the cluster chain if exist */
5034:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
5035:DRIVER/FatFs/source/ff.c **** 					res = remove_chain(&obj, dclst, 0);
5036:DRIVER/FatFs/source/ff.c **** #else
5037:DRIVER/FatFs/source/ff.c **** 					res = remove_chain(&dj.obj, dclst, 0);
5038:DRIVER/FatFs/source/ff.c **** #endif
5039:DRIVER/FatFs/source/ff.c **** 				}
5040:DRIVER/FatFs/source/ff.c **** 				if (res == FR_OK) res = sync_fs(fs);
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 194


5041:DRIVER/FatFs/source/ff.c **** 			}
5042:DRIVER/FatFs/source/ff.c **** 		}
5043:DRIVER/FatFs/source/ff.c **** 		FREE_NAMBUF();
5044:DRIVER/FatFs/source/ff.c **** 	}
5045:DRIVER/FatFs/source/ff.c **** 
5046:DRIVER/FatFs/source/ff.c **** 	LEAVE_FF(fs, res);
5047:DRIVER/FatFs/source/ff.c **** }
5048:DRIVER/FatFs/source/ff.c **** 
5049:DRIVER/FatFs/source/ff.c **** 
5050:DRIVER/FatFs/source/ff.c **** 
5051:DRIVER/FatFs/source/ff.c **** 
5052:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
5053:DRIVER/FatFs/source/ff.c **** /* Create a Directory                                                    */
5054:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
5055:DRIVER/FatFs/source/ff.c **** 
5056:DRIVER/FatFs/source/ff.c **** FRESULT f_mkdir (
5057:DRIVER/FatFs/source/ff.c **** 	const TCHAR* path		/* Pointer to the directory path */
5058:DRIVER/FatFs/source/ff.c **** )
5059:DRIVER/FatFs/source/ff.c **** {
5060:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
5061:DRIVER/FatFs/source/ff.c **** 	FATFS *fs;
5062:DRIVER/FatFs/source/ff.c **** 	DIR dj;
5063:DRIVER/FatFs/source/ff.c **** 	FFOBJID sobj;
5064:DRIVER/FatFs/source/ff.c **** 	DWORD dcl, pcl, tm;
5065:DRIVER/FatFs/source/ff.c **** 	DEF_NAMBUF
5066:DRIVER/FatFs/source/ff.c **** 
5067:DRIVER/FatFs/source/ff.c **** 
5068:DRIVER/FatFs/source/ff.c **** 	res = mount_volume(&path, &fs, FA_WRITE);	/* Get logical drive */
5069:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
5070:DRIVER/FatFs/source/ff.c **** 		dj.obj.fs = fs;
5071:DRIVER/FatFs/source/ff.c **** 		INIT_NAMBUF(fs);
5072:DRIVER/FatFs/source/ff.c **** 		res = follow_path(&dj, path);			/* Follow the file path */
5073:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK) res = FR_EXIST;		/* Name collision? */
5074:DRIVER/FatFs/source/ff.c **** 		if (FF_FS_RPATH && res == FR_NO_FILE && (dj.fn[NSFLAG] & NS_DOT)) {	/* Invalid name? */
5075:DRIVER/FatFs/source/ff.c **** 			res = FR_INVALID_NAME;
5076:DRIVER/FatFs/source/ff.c **** 		}
5077:DRIVER/FatFs/source/ff.c **** 		if (res == FR_NO_FILE) {				/* It is clear to create a new directory */
5078:DRIVER/FatFs/source/ff.c **** 			sobj.fs = fs;						/* New object id to create a new chain */
5079:DRIVER/FatFs/source/ff.c **** 			dcl = create_chain(&sobj, 0);		/* Allocate a cluster for the new directory */
5080:DRIVER/FatFs/source/ff.c **** 			res = FR_OK;
5081:DRIVER/FatFs/source/ff.c **** 			if (dcl == 0) res = FR_DENIED;		/* No space to allocate a new cluster? */
5082:DRIVER/FatFs/source/ff.c **** 			if (dcl == 1) res = FR_INT_ERR;		/* Any insanity? */
5083:DRIVER/FatFs/source/ff.c **** 			if (dcl == 0xFFFFFFFF) res = FR_DISK_ERR;	/* Disk error? */
5084:DRIVER/FatFs/source/ff.c **** 			tm = GET_FATTIME();
5085:DRIVER/FatFs/source/ff.c **** 			if (res == FR_OK) {
5086:DRIVER/FatFs/source/ff.c **** 				res = dir_clear(fs, dcl);		/* Clean up the new table */
5087:DRIVER/FatFs/source/ff.c **** 				if (res == FR_OK) {
5088:DRIVER/FatFs/source/ff.c **** 					if (!FF_FS_EXFAT || fs->fs_type != FS_EXFAT) {	/* Create dot entries (FAT only) */
5089:DRIVER/FatFs/source/ff.c **** 						memset(fs->win + DIR_Name, ' ', 11);	/* Create "." entry */
5090:DRIVER/FatFs/source/ff.c **** 						fs->win[DIR_Name] = '.';
5091:DRIVER/FatFs/source/ff.c **** 						fs->win[DIR_Attr] = AM_DIR;
5092:DRIVER/FatFs/source/ff.c **** 						st_dword(fs->win + DIR_ModTime, tm);
5093:DRIVER/FatFs/source/ff.c **** 						st_clust(fs, fs->win, dcl);
5094:DRIVER/FatFs/source/ff.c **** 						memcpy(fs->win + SZDIRE, fs->win, SZDIRE);	/* Create ".." entry */
5095:DRIVER/FatFs/source/ff.c **** 						fs->win[SZDIRE + 1] = '.'; pcl = dj.obj.sclust;
5096:DRIVER/FatFs/source/ff.c **** 						st_clust(fs, fs->win + SZDIRE, pcl);
5097:DRIVER/FatFs/source/ff.c **** 						fs->wflag = 1;
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 195


5098:DRIVER/FatFs/source/ff.c **** 					}
5099:DRIVER/FatFs/source/ff.c **** 					res = dir_register(&dj);	/* Register the object to the parent directoy */
5100:DRIVER/FatFs/source/ff.c **** 				}
5101:DRIVER/FatFs/source/ff.c **** 			}
5102:DRIVER/FatFs/source/ff.c **** 			if (res == FR_OK) {
5103:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
5104:DRIVER/FatFs/source/ff.c **** 				if (fs->fs_type == FS_EXFAT) {	/* Initialize directory entry block */
5105:DRIVER/FatFs/source/ff.c **** 					st_dword(fs->dirbuf + XDIR_ModTime, tm);	/* Created time */
5106:DRIVER/FatFs/source/ff.c **** 					st_dword(fs->dirbuf + XDIR_FstClus, dcl);	/* Table start cluster */
5107:DRIVER/FatFs/source/ff.c **** 					st_dword(fs->dirbuf + XDIR_FileSize, (DWORD)fs->csize * SS(fs));	/* Directory size needs to be
5108:DRIVER/FatFs/source/ff.c **** 					st_dword(fs->dirbuf + XDIR_ValidFileSize, (DWORD)fs->csize * SS(fs));
5109:DRIVER/FatFs/source/ff.c **** 					fs->dirbuf[XDIR_GenFlags] = 3;				/* Initialize the object flag */
5110:DRIVER/FatFs/source/ff.c **** 					fs->dirbuf[XDIR_Attr] = AM_DIR;				/* Attribute */
5111:DRIVER/FatFs/source/ff.c **** 					res = store_xdir(&dj);
5112:DRIVER/FatFs/source/ff.c **** 				} else
5113:DRIVER/FatFs/source/ff.c **** #endif
5114:DRIVER/FatFs/source/ff.c **** 				{
5115:DRIVER/FatFs/source/ff.c **** 					st_dword(dj.dir + DIR_ModTime, tm);	/* Created time */
5116:DRIVER/FatFs/source/ff.c **** 					st_clust(fs, dj.dir, dcl);			/* Table start cluster */
5117:DRIVER/FatFs/source/ff.c **** 					dj.dir[DIR_Attr] = AM_DIR;			/* Attribute */
5118:DRIVER/FatFs/source/ff.c **** 					fs->wflag = 1;
5119:DRIVER/FatFs/source/ff.c **** 				}
5120:DRIVER/FatFs/source/ff.c **** 				if (res == FR_OK) {
5121:DRIVER/FatFs/source/ff.c **** 					res = sync_fs(fs);
5122:DRIVER/FatFs/source/ff.c **** 				}
5123:DRIVER/FatFs/source/ff.c **** 			} else {
5124:DRIVER/FatFs/source/ff.c **** 				remove_chain(&sobj, dcl, 0);		/* Could not register, remove the allocated cluster */
5125:DRIVER/FatFs/source/ff.c **** 			}
5126:DRIVER/FatFs/source/ff.c **** 		}
5127:DRIVER/FatFs/source/ff.c **** 		FREE_NAMBUF();
5128:DRIVER/FatFs/source/ff.c **** 	}
5129:DRIVER/FatFs/source/ff.c **** 
5130:DRIVER/FatFs/source/ff.c **** 	LEAVE_FF(fs, res);
5131:DRIVER/FatFs/source/ff.c **** }
5132:DRIVER/FatFs/source/ff.c **** 
5133:DRIVER/FatFs/source/ff.c **** 
5134:DRIVER/FatFs/source/ff.c **** 
5135:DRIVER/FatFs/source/ff.c **** 
5136:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
5137:DRIVER/FatFs/source/ff.c **** /* Rename a File/Directory                                               */
5138:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
5139:DRIVER/FatFs/source/ff.c **** 
5140:DRIVER/FatFs/source/ff.c **** FRESULT f_rename (
5141:DRIVER/FatFs/source/ff.c **** 	const TCHAR* path_old,	/* Pointer to the object name to be renamed */
5142:DRIVER/FatFs/source/ff.c **** 	const TCHAR* path_new	/* Pointer to the new name */
5143:DRIVER/FatFs/source/ff.c **** )
5144:DRIVER/FatFs/source/ff.c **** {
5145:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
5146:DRIVER/FatFs/source/ff.c **** 	FATFS *fs;
5147:DRIVER/FatFs/source/ff.c **** 	DIR djo, djn;
5148:DRIVER/FatFs/source/ff.c **** 	BYTE buf[FF_FS_EXFAT ? SZDIRE * 2 : SZDIRE], *dir;
5149:DRIVER/FatFs/source/ff.c **** 	LBA_t sect;
5150:DRIVER/FatFs/source/ff.c **** 	DEF_NAMBUF
5151:DRIVER/FatFs/source/ff.c **** 
5152:DRIVER/FatFs/source/ff.c **** 
5153:DRIVER/FatFs/source/ff.c **** 	get_ldnumber(&path_new);						/* Snip the drive number of new name off */
5154:DRIVER/FatFs/source/ff.c **** 	res = mount_volume(&path_old, &fs, FA_WRITE);	/* Get logical drive of the old object */
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 196


5155:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
5156:DRIVER/FatFs/source/ff.c **** 		djo.obj.fs = fs;
5157:DRIVER/FatFs/source/ff.c **** 		INIT_NAMBUF(fs);
5158:DRIVER/FatFs/source/ff.c **** 		res = follow_path(&djo, path_old);			/* Check old object */
5159:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK && (djo.fn[NSFLAG] & (NS_DOT | NS_NONAME))) res = FR_INVALID_NAME;	/* Check vali
5160:DRIVER/FatFs/source/ff.c **** #if FF_FS_LOCK
5161:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK) {
5162:DRIVER/FatFs/source/ff.c **** 			res = chk_share(&djo, 2);
5163:DRIVER/FatFs/source/ff.c **** 		}
5164:DRIVER/FatFs/source/ff.c **** #endif
5165:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK) {					/* Object to be renamed is found */
5166:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
5167:DRIVER/FatFs/source/ff.c **** 			if (fs->fs_type == FS_EXFAT) {	/* At exFAT volume */
5168:DRIVER/FatFs/source/ff.c **** 				BYTE nf, nn;
5169:DRIVER/FatFs/source/ff.c **** 				WORD nh;
5170:DRIVER/FatFs/source/ff.c **** 
5171:DRIVER/FatFs/source/ff.c **** 				memcpy(buf, fs->dirbuf, SZDIRE * 2);	/* Save 85+C0 entry of old object */
5172:DRIVER/FatFs/source/ff.c **** 				memcpy(&djn, &djo, sizeof djo);
5173:DRIVER/FatFs/source/ff.c **** 				res = follow_path(&djn, path_new);		/* Make sure if new object name is not in use */
5174:DRIVER/FatFs/source/ff.c **** 				if (res == FR_OK) {						/* Is new name already in use by any other object? */
5175:DRIVER/FatFs/source/ff.c **** 					res = (djn.obj.sclust == djo.obj.sclust && djn.dptr == djo.dptr) ? FR_NO_FILE : FR_EXIST;
5176:DRIVER/FatFs/source/ff.c **** 				}
5177:DRIVER/FatFs/source/ff.c **** 				if (res == FR_NO_FILE) { 				/* It is a valid path and no name collision */
5178:DRIVER/FatFs/source/ff.c **** 					res = dir_register(&djn);			/* Register the new entry */
5179:DRIVER/FatFs/source/ff.c **** 					if (res == FR_OK) {
5180:DRIVER/FatFs/source/ff.c **** 						nf = fs->dirbuf[XDIR_NumSec]; nn = fs->dirbuf[XDIR_NumName];
5181:DRIVER/FatFs/source/ff.c **** 						nh = ld_word(fs->dirbuf + XDIR_NameHash);
5182:DRIVER/FatFs/source/ff.c **** 						memcpy(fs->dirbuf, buf, SZDIRE * 2);	/* Restore 85+C0 entry */
5183:DRIVER/FatFs/source/ff.c **** 						fs->dirbuf[XDIR_NumSec] = nf; fs->dirbuf[XDIR_NumName] = nn;
5184:DRIVER/FatFs/source/ff.c **** 						st_word(fs->dirbuf + XDIR_NameHash, nh);
5185:DRIVER/FatFs/source/ff.c **** 						if (!(fs->dirbuf[XDIR_Attr] & AM_DIR)) fs->dirbuf[XDIR_Attr] |= AM_ARC;	/* Set archive attrib
5186:DRIVER/FatFs/source/ff.c **** /* Start of critical section where an interruption can cause a cross-link */
5187:DRIVER/FatFs/source/ff.c **** 						res = store_xdir(&djn);
5188:DRIVER/FatFs/source/ff.c **** 					}
5189:DRIVER/FatFs/source/ff.c **** 				}
5190:DRIVER/FatFs/source/ff.c **** 			} else
5191:DRIVER/FatFs/source/ff.c **** #endif
5192:DRIVER/FatFs/source/ff.c **** 			{	/* At FAT/FAT32 volume */
5193:DRIVER/FatFs/source/ff.c **** 				memcpy(buf, djo.dir, SZDIRE);			/* Save directory entry of the object */
5194:DRIVER/FatFs/source/ff.c **** 				memcpy(&djn, &djo, sizeof (DIR));		/* Duplicate the directory object */
5195:DRIVER/FatFs/source/ff.c **** 				res = follow_path(&djn, path_new);		/* Make sure if new object name is not in use */
5196:DRIVER/FatFs/source/ff.c **** 				if (res == FR_OK) {						/* Is new name already in use by any other object? */
5197:DRIVER/FatFs/source/ff.c **** 					res = (djn.obj.sclust == djo.obj.sclust && djn.dptr == djo.dptr) ? FR_NO_FILE : FR_EXIST;
5198:DRIVER/FatFs/source/ff.c **** 				}
5199:DRIVER/FatFs/source/ff.c **** 				if (res == FR_NO_FILE) { 				/* It is a valid path and no name collision */
5200:DRIVER/FatFs/source/ff.c **** 					res = dir_register(&djn);			/* Register the new entry */
5201:DRIVER/FatFs/source/ff.c **** 					if (res == FR_OK) {
5202:DRIVER/FatFs/source/ff.c **** 						dir = djn.dir;					/* Copy directory entry of the object except name */
5203:DRIVER/FatFs/source/ff.c **** 						memcpy(dir + 13, buf + 13, SZDIRE - 13);
5204:DRIVER/FatFs/source/ff.c **** 						dir[DIR_Attr] = buf[DIR_Attr];
5205:DRIVER/FatFs/source/ff.c **** 						if (!(dir[DIR_Attr] & AM_DIR)) dir[DIR_Attr] |= AM_ARC;	/* Set archive attribute if it is a f
5206:DRIVER/FatFs/source/ff.c **** 						fs->wflag = 1;
5207:DRIVER/FatFs/source/ff.c **** 						if ((dir[DIR_Attr] & AM_DIR) && djo.obj.sclust != djn.obj.sclust) {	/* Update .. entry in the
5208:DRIVER/FatFs/source/ff.c **** 							sect = clst2sect(fs, ld_clust(fs, dir));
5209:DRIVER/FatFs/source/ff.c **** 							if (sect == 0) {
5210:DRIVER/FatFs/source/ff.c **** 								res = FR_INT_ERR;
5211:DRIVER/FatFs/source/ff.c **** 							} else {
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 197


5212:DRIVER/FatFs/source/ff.c **** /* Start of critical section where an interruption can cause a cross-link */
5213:DRIVER/FatFs/source/ff.c **** 								res = move_window(fs, sect);
5214:DRIVER/FatFs/source/ff.c **** 								dir = fs->win + SZDIRE * 1;	/* Ptr to .. entry */
5215:DRIVER/FatFs/source/ff.c **** 								if (res == FR_OK && dir[1] == '.') {
5216:DRIVER/FatFs/source/ff.c **** 									st_clust(fs, dir, djn.obj.sclust);
5217:DRIVER/FatFs/source/ff.c **** 									fs->wflag = 1;
5218:DRIVER/FatFs/source/ff.c **** 								}
5219:DRIVER/FatFs/source/ff.c **** 							}
5220:DRIVER/FatFs/source/ff.c **** 						}
5221:DRIVER/FatFs/source/ff.c **** 					}
5222:DRIVER/FatFs/source/ff.c **** 				}
5223:DRIVER/FatFs/source/ff.c **** 			}
5224:DRIVER/FatFs/source/ff.c **** 			if (res == FR_OK) {
5225:DRIVER/FatFs/source/ff.c **** 				res = dir_remove(&djo);		/* Remove old entry */
5226:DRIVER/FatFs/source/ff.c **** 				if (res == FR_OK) {
5227:DRIVER/FatFs/source/ff.c **** 					res = sync_fs(fs);
5228:DRIVER/FatFs/source/ff.c **** 				}
5229:DRIVER/FatFs/source/ff.c **** 			}
5230:DRIVER/FatFs/source/ff.c **** /* End of the critical section */
5231:DRIVER/FatFs/source/ff.c **** 		}
5232:DRIVER/FatFs/source/ff.c **** 		FREE_NAMBUF();
5233:DRIVER/FatFs/source/ff.c **** 	}
5234:DRIVER/FatFs/source/ff.c **** 
5235:DRIVER/FatFs/source/ff.c **** 	LEAVE_FF(fs, res);
5236:DRIVER/FatFs/source/ff.c **** }
5237:DRIVER/FatFs/source/ff.c **** 
5238:DRIVER/FatFs/source/ff.c **** #endif /* !FF_FS_READONLY */
5239:DRIVER/FatFs/source/ff.c **** #endif /* FF_FS_MINIMIZE == 0 */
5240:DRIVER/FatFs/source/ff.c **** #endif /* FF_FS_MINIMIZE <= 1 */
5241:DRIVER/FatFs/source/ff.c **** #endif /* FF_FS_MINIMIZE <= 2 */
5242:DRIVER/FatFs/source/ff.c **** 
5243:DRIVER/FatFs/source/ff.c **** 
5244:DRIVER/FatFs/source/ff.c **** 
5245:DRIVER/FatFs/source/ff.c **** #if FF_USE_CHMOD && !FF_FS_READONLY
5246:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
5247:DRIVER/FatFs/source/ff.c **** /* Change Attribute                                                      */
5248:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
5249:DRIVER/FatFs/source/ff.c **** 
5250:DRIVER/FatFs/source/ff.c **** FRESULT f_chmod (
5251:DRIVER/FatFs/source/ff.c **** 	const TCHAR* path,	/* Pointer to the file path */
5252:DRIVER/FatFs/source/ff.c **** 	BYTE attr,			/* Attribute bits */
5253:DRIVER/FatFs/source/ff.c **** 	BYTE mask			/* Attribute mask to change */
5254:DRIVER/FatFs/source/ff.c **** )
5255:DRIVER/FatFs/source/ff.c **** {
5256:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
5257:DRIVER/FatFs/source/ff.c **** 	FATFS *fs;
5258:DRIVER/FatFs/source/ff.c **** 	DIR dj;
5259:DRIVER/FatFs/source/ff.c **** 	DEF_NAMBUF
5260:DRIVER/FatFs/source/ff.c **** 
5261:DRIVER/FatFs/source/ff.c **** 
5262:DRIVER/FatFs/source/ff.c **** 	res = mount_volume(&path, &fs, FA_WRITE);	/* Get logical drive */
5263:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
5264:DRIVER/FatFs/source/ff.c **** 		dj.obj.fs = fs;
5265:DRIVER/FatFs/source/ff.c **** 		INIT_NAMBUF(fs);
5266:DRIVER/FatFs/source/ff.c **** 		res = follow_path(&dj, path);	/* Follow the file path */
5267:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK && (dj.fn[NSFLAG] & (NS_DOT | NS_NONAME))) res = FR_INVALID_NAME;	/* Check objec
5268:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK) {
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 198


5269:DRIVER/FatFs/source/ff.c **** 			mask &= AM_RDO|AM_HID|AM_SYS|AM_ARC;	/* Valid attribute mask */
5270:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
5271:DRIVER/FatFs/source/ff.c **** 			if (fs->fs_type == FS_EXFAT) {
5272:DRIVER/FatFs/source/ff.c **** 				fs->dirbuf[XDIR_Attr] = (attr & mask) | (fs->dirbuf[XDIR_Attr] & (BYTE)~mask);	/* Apply attribu
5273:DRIVER/FatFs/source/ff.c **** 				res = store_xdir(&dj);
5274:DRIVER/FatFs/source/ff.c **** 			} else
5275:DRIVER/FatFs/source/ff.c **** #endif
5276:DRIVER/FatFs/source/ff.c **** 			{
5277:DRIVER/FatFs/source/ff.c **** 				dj.dir[DIR_Attr] = (attr & mask) | (dj.dir[DIR_Attr] & (BYTE)~mask);	/* Apply attribute change 
5278:DRIVER/FatFs/source/ff.c **** 				fs->wflag = 1;
5279:DRIVER/FatFs/source/ff.c **** 			}
5280:DRIVER/FatFs/source/ff.c **** 			if (res == FR_OK) {
5281:DRIVER/FatFs/source/ff.c **** 				res = sync_fs(fs);
5282:DRIVER/FatFs/source/ff.c **** 			}
5283:DRIVER/FatFs/source/ff.c **** 		}
5284:DRIVER/FatFs/source/ff.c **** 		FREE_NAMBUF();
5285:DRIVER/FatFs/source/ff.c **** 	}
5286:DRIVER/FatFs/source/ff.c **** 
5287:DRIVER/FatFs/source/ff.c **** 	LEAVE_FF(fs, res);
5288:DRIVER/FatFs/source/ff.c **** }
5289:DRIVER/FatFs/source/ff.c **** 
5290:DRIVER/FatFs/source/ff.c **** 
5291:DRIVER/FatFs/source/ff.c **** 
5292:DRIVER/FatFs/source/ff.c **** 
5293:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
5294:DRIVER/FatFs/source/ff.c **** /* Change Timestamp                                                      */
5295:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
5296:DRIVER/FatFs/source/ff.c **** 
5297:DRIVER/FatFs/source/ff.c **** FRESULT f_utime (
5298:DRIVER/FatFs/source/ff.c **** 	const TCHAR* path,	/* Pointer to the file/directory name */
5299:DRIVER/FatFs/source/ff.c **** 	const FILINFO* fno	/* Pointer to the timestamp to be set */
5300:DRIVER/FatFs/source/ff.c **** )
5301:DRIVER/FatFs/source/ff.c **** {
5302:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
5303:DRIVER/FatFs/source/ff.c **** 	FATFS *fs;
5304:DRIVER/FatFs/source/ff.c **** 	DIR dj;
5305:DRIVER/FatFs/source/ff.c **** 	DEF_NAMBUF
5306:DRIVER/FatFs/source/ff.c **** 
5307:DRIVER/FatFs/source/ff.c **** 
5308:DRIVER/FatFs/source/ff.c **** 	res = mount_volume(&path, &fs, FA_WRITE);	/* Get logical drive */
5309:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
5310:DRIVER/FatFs/source/ff.c **** 		dj.obj.fs = fs;
5311:DRIVER/FatFs/source/ff.c **** 		INIT_NAMBUF(fs);
5312:DRIVER/FatFs/source/ff.c **** 		res = follow_path(&dj, path);	/* Follow the file path */
5313:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK && (dj.fn[NSFLAG] & (NS_DOT | NS_NONAME))) res = FR_INVALID_NAME;	/* Check objec
5314:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK) {
5315:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
5316:DRIVER/FatFs/source/ff.c **** 			if (fs->fs_type == FS_EXFAT) {
5317:DRIVER/FatFs/source/ff.c **** 				st_dword(fs->dirbuf + XDIR_ModTime, (DWORD)fno->fdate << 16 | fno->ftime);
5318:DRIVER/FatFs/source/ff.c **** 				res = store_xdir(&dj);
5319:DRIVER/FatFs/source/ff.c **** 			} else
5320:DRIVER/FatFs/source/ff.c **** #endif
5321:DRIVER/FatFs/source/ff.c **** 			{
5322:DRIVER/FatFs/source/ff.c **** 				st_dword(dj.dir + DIR_ModTime, (DWORD)fno->fdate << 16 | fno->ftime);
5323:DRIVER/FatFs/source/ff.c **** 				fs->wflag = 1;
5324:DRIVER/FatFs/source/ff.c **** 			}
5325:DRIVER/FatFs/source/ff.c **** 			if (res == FR_OK) {
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 199


5326:DRIVER/FatFs/source/ff.c **** 				res = sync_fs(fs);
5327:DRIVER/FatFs/source/ff.c **** 			}
5328:DRIVER/FatFs/source/ff.c **** 		}
5329:DRIVER/FatFs/source/ff.c **** 		FREE_NAMBUF();
5330:DRIVER/FatFs/source/ff.c **** 	}
5331:DRIVER/FatFs/source/ff.c **** 
5332:DRIVER/FatFs/source/ff.c **** 	LEAVE_FF(fs, res);
5333:DRIVER/FatFs/source/ff.c **** }
5334:DRIVER/FatFs/source/ff.c **** 
5335:DRIVER/FatFs/source/ff.c **** #endif	/* FF_USE_CHMOD && !FF_FS_READONLY */
5336:DRIVER/FatFs/source/ff.c **** 
5337:DRIVER/FatFs/source/ff.c **** 
5338:DRIVER/FatFs/source/ff.c **** 
5339:DRIVER/FatFs/source/ff.c **** #if FF_USE_LABEL
5340:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
5341:DRIVER/FatFs/source/ff.c **** /* Get Volume Label                                                      */
5342:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
5343:DRIVER/FatFs/source/ff.c **** 
5344:DRIVER/FatFs/source/ff.c **** FRESULT f_getlabel (
5345:DRIVER/FatFs/source/ff.c **** 	const TCHAR* path,	/* Logical drive number */
5346:DRIVER/FatFs/source/ff.c **** 	TCHAR* label,		/* Buffer to store the volume label */
5347:DRIVER/FatFs/source/ff.c **** 	DWORD* vsn			/* Variable to store the volume serial number */
5348:DRIVER/FatFs/source/ff.c **** )
5349:DRIVER/FatFs/source/ff.c **** {
5350:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
5351:DRIVER/FatFs/source/ff.c **** 	FATFS *fs;
5352:DRIVER/FatFs/source/ff.c **** 	DIR dj;
5353:DRIVER/FatFs/source/ff.c **** 	UINT si, di;
5354:DRIVER/FatFs/source/ff.c **** 	WCHAR wc;
5355:DRIVER/FatFs/source/ff.c **** 
5356:DRIVER/FatFs/source/ff.c **** 	/* Get logical drive */
5357:DRIVER/FatFs/source/ff.c **** 	res = mount_volume(&path, &fs, 0);
5358:DRIVER/FatFs/source/ff.c **** 
5359:DRIVER/FatFs/source/ff.c **** 	/* Get volume label */
5360:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK && label) {
5361:DRIVER/FatFs/source/ff.c **** 		dj.obj.fs = fs; dj.obj.sclust = 0;	/* Open root directory */
5362:DRIVER/FatFs/source/ff.c **** 		res = dir_sdi(&dj, 0);
5363:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK) {
5364:DRIVER/FatFs/source/ff.c **** 		 	res = DIR_READ_LABEL(&dj);		/* Find a volume label entry */
5365:DRIVER/FatFs/source/ff.c **** 		 	if (res == FR_OK) {
5366:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
5367:DRIVER/FatFs/source/ff.c **** 				if (fs->fs_type == FS_EXFAT) {
5368:DRIVER/FatFs/source/ff.c **** 					WCHAR hs;
5369:DRIVER/FatFs/source/ff.c **** 					UINT nw;
5370:DRIVER/FatFs/source/ff.c **** 
5371:DRIVER/FatFs/source/ff.c **** 					for (si = di = hs = 0; si < dj.dir[XDIR_NumLabel]; si++) {	/* Extract volume label from 83 ent
5372:DRIVER/FatFs/source/ff.c **** 						wc = ld_word(dj.dir + XDIR_Label + si * 2);
5373:DRIVER/FatFs/source/ff.c **** 						if (hs == 0 && IsSurrogate(wc)) {	/* Is the code a surrogate? */
5374:DRIVER/FatFs/source/ff.c **** 							hs = wc; continue;
5375:DRIVER/FatFs/source/ff.c **** 						}
5376:DRIVER/FatFs/source/ff.c **** 						nw = put_utf((DWORD)hs << 16 | wc, &label[di], 4);	/* Store it in API encoding */
5377:DRIVER/FatFs/source/ff.c **** 						if (nw == 0) {		/* Encode error? */
5378:DRIVER/FatFs/source/ff.c **** 							di = 0; break;
5379:DRIVER/FatFs/source/ff.c **** 						}
5380:DRIVER/FatFs/source/ff.c **** 						di += nw;
5381:DRIVER/FatFs/source/ff.c **** 						hs = 0;
5382:DRIVER/FatFs/source/ff.c **** 					}
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 200


5383:DRIVER/FatFs/source/ff.c **** 					if (hs != 0) di = 0;	/* Broken surrogate pair? */
5384:DRIVER/FatFs/source/ff.c **** 					label[di] = 0;
5385:DRIVER/FatFs/source/ff.c **** 				} else
5386:DRIVER/FatFs/source/ff.c **** #endif
5387:DRIVER/FatFs/source/ff.c **** 				{
5388:DRIVER/FatFs/source/ff.c **** 					si = di = 0;		/* Extract volume label from AM_VOL entry */
5389:DRIVER/FatFs/source/ff.c **** 					while (si < 11) {
5390:DRIVER/FatFs/source/ff.c **** 						wc = dj.dir[si++];
5391:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN && FF_LFN_UNICODE >= 1 	/* Unicode output */
5392:DRIVER/FatFs/source/ff.c **** 						if (dbc_1st((BYTE)wc) && si < 11) wc = wc << 8 | dj.dir[si++];	/* Is it a DBC? */
5393:DRIVER/FatFs/source/ff.c **** 						wc = ff_oem2uni(wc, CODEPAGE);		/* Convert it into Unicode */
5394:DRIVER/FatFs/source/ff.c **** 						if (wc == 0) {		/* Invalid char in current code page? */
5395:DRIVER/FatFs/source/ff.c **** 							di = 0; break;
5396:DRIVER/FatFs/source/ff.c **** 						}
5397:DRIVER/FatFs/source/ff.c **** 						di += put_utf(wc, &label[di], 4);	/* Store it in Unicode */
5398:DRIVER/FatFs/source/ff.c **** #else									/* ANSI/OEM output */
5399:DRIVER/FatFs/source/ff.c **** 						label[di++] = (TCHAR)wc;
5400:DRIVER/FatFs/source/ff.c **** #endif
5401:DRIVER/FatFs/source/ff.c **** 					}
5402:DRIVER/FatFs/source/ff.c **** 					do {				/* Truncate trailing spaces */
5403:DRIVER/FatFs/source/ff.c **** 						label[di] = 0;
5404:DRIVER/FatFs/source/ff.c **** 						if (di == 0) break;
5405:DRIVER/FatFs/source/ff.c **** 					} while (label[--di] == ' ');
5406:DRIVER/FatFs/source/ff.c **** 				}
5407:DRIVER/FatFs/source/ff.c **** 			}
5408:DRIVER/FatFs/source/ff.c **** 		}
5409:DRIVER/FatFs/source/ff.c **** 		if (res == FR_NO_FILE) {	/* No label entry and return nul string */
5410:DRIVER/FatFs/source/ff.c **** 			label[0] = 0;
5411:DRIVER/FatFs/source/ff.c **** 			res = FR_OK;
5412:DRIVER/FatFs/source/ff.c **** 		}
5413:DRIVER/FatFs/source/ff.c **** 	}
5414:DRIVER/FatFs/source/ff.c **** 
5415:DRIVER/FatFs/source/ff.c **** 	/* Get volume serial number */
5416:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK && vsn) {
5417:DRIVER/FatFs/source/ff.c **** 		res = move_window(fs, fs->volbase);
5418:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK) {
5419:DRIVER/FatFs/source/ff.c **** 			switch (fs->fs_type) {
5420:DRIVER/FatFs/source/ff.c **** 			case FS_EXFAT:
5421:DRIVER/FatFs/source/ff.c **** 				di = BPB_VolIDEx;
5422:DRIVER/FatFs/source/ff.c **** 				break;
5423:DRIVER/FatFs/source/ff.c **** 
5424:DRIVER/FatFs/source/ff.c **** 			case FS_FAT32:
5425:DRIVER/FatFs/source/ff.c **** 				di = BS_VolID32;
5426:DRIVER/FatFs/source/ff.c **** 				break;
5427:DRIVER/FatFs/source/ff.c **** 
5428:DRIVER/FatFs/source/ff.c **** 			default:
5429:DRIVER/FatFs/source/ff.c **** 				di = BS_VolID;
5430:DRIVER/FatFs/source/ff.c **** 			}
5431:DRIVER/FatFs/source/ff.c **** 			*vsn = ld_dword(fs->win + di);
5432:DRIVER/FatFs/source/ff.c **** 		}
5433:DRIVER/FatFs/source/ff.c **** 	}
5434:DRIVER/FatFs/source/ff.c **** 
5435:DRIVER/FatFs/source/ff.c **** 	LEAVE_FF(fs, res);
5436:DRIVER/FatFs/source/ff.c **** }
5437:DRIVER/FatFs/source/ff.c **** 
5438:DRIVER/FatFs/source/ff.c **** 
5439:DRIVER/FatFs/source/ff.c **** 
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 201


5440:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY
5441:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
5442:DRIVER/FatFs/source/ff.c **** /* Set Volume Label                                                      */
5443:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
5444:DRIVER/FatFs/source/ff.c **** 
5445:DRIVER/FatFs/source/ff.c **** FRESULT f_setlabel (
5446:DRIVER/FatFs/source/ff.c **** 	const TCHAR* label	/* Volume label to set with heading logical drive number */
5447:DRIVER/FatFs/source/ff.c **** )
5448:DRIVER/FatFs/source/ff.c **** {
5449:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
5450:DRIVER/FatFs/source/ff.c **** 	FATFS *fs;
5451:DRIVER/FatFs/source/ff.c **** 	DIR dj;
5452:DRIVER/FatFs/source/ff.c **** 	BYTE dirvn[22];
5453:DRIVER/FatFs/source/ff.c **** 	UINT di;
5454:DRIVER/FatFs/source/ff.c **** 	WCHAR wc;
5455:DRIVER/FatFs/source/ff.c **** 	static const char badchr[18] = "+.,;=[]" "/*:<>|\\\"\?\x7F";	/* [0..16] for FAT, [7..16] for exFAT
5456:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN
5457:DRIVER/FatFs/source/ff.c **** 	DWORD dc;
5458:DRIVER/FatFs/source/ff.c **** #endif
5459:DRIVER/FatFs/source/ff.c **** 
5460:DRIVER/FatFs/source/ff.c **** 	/* Get logical drive */
5461:DRIVER/FatFs/source/ff.c **** 	res = mount_volume(&label, &fs, FA_WRITE);
5462:DRIVER/FatFs/source/ff.c **** 	if (res != FR_OK) LEAVE_FF(fs, res);
5463:DRIVER/FatFs/source/ff.c **** 
5464:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
5465:DRIVER/FatFs/source/ff.c **** 	if (fs->fs_type == FS_EXFAT) {	/* On the exFAT volume */
5466:DRIVER/FatFs/source/ff.c **** 		memset(dirvn, 0, 22);
5467:DRIVER/FatFs/source/ff.c **** 		di = 0;
5468:DRIVER/FatFs/source/ff.c **** 		while ((UINT)*label >= ' ') {	/* Create volume label */
5469:DRIVER/FatFs/source/ff.c **** 			dc = tchar2uni(&label);	/* Get a Unicode character */
5470:DRIVER/FatFs/source/ff.c **** 			if (dc >= 0x10000) {
5471:DRIVER/FatFs/source/ff.c **** 				if (dc == 0xFFFFFFFF || di >= 10) {	/* Wrong surrogate or buffer overflow */
5472:DRIVER/FatFs/source/ff.c **** 					dc = 0;
5473:DRIVER/FatFs/source/ff.c **** 				} else {
5474:DRIVER/FatFs/source/ff.c **** 					st_word(dirvn + di * 2, (WCHAR)(dc >> 16)); di++;
5475:DRIVER/FatFs/source/ff.c **** 				}
5476:DRIVER/FatFs/source/ff.c **** 			}
5477:DRIVER/FatFs/source/ff.c **** 			if (dc == 0 || strchr(&badchr[7], (int)dc) || di >= 11) {	/* Check validity of the volume label 
5478:DRIVER/FatFs/source/ff.c **** 				LEAVE_FF(fs, FR_INVALID_NAME);
5479:DRIVER/FatFs/source/ff.c **** 			}
5480:DRIVER/FatFs/source/ff.c **** 			st_word(dirvn + di * 2, (WCHAR)dc); di++;
5481:DRIVER/FatFs/source/ff.c **** 		}
5482:DRIVER/FatFs/source/ff.c **** 	} else
5483:DRIVER/FatFs/source/ff.c **** #endif
5484:DRIVER/FatFs/source/ff.c **** 	{	/* On the FAT/FAT32 volume */
5485:DRIVER/FatFs/source/ff.c **** 		memset(dirvn, ' ', 11);
5486:DRIVER/FatFs/source/ff.c **** 		di = 0;
5487:DRIVER/FatFs/source/ff.c **** 		while ((UINT)*label >= ' ') {	/* Create volume label */
5488:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN
5489:DRIVER/FatFs/source/ff.c **** 			dc = tchar2uni(&label);
5490:DRIVER/FatFs/source/ff.c **** 			wc = (dc < 0x10000) ? ff_uni2oem(ff_wtoupper(dc), CODEPAGE) : 0;
5491:DRIVER/FatFs/source/ff.c **** #else									/* ANSI/OEM input */
5492:DRIVER/FatFs/source/ff.c **** 			wc = (BYTE)*label++;
5493:DRIVER/FatFs/source/ff.c **** 			if (dbc_1st((BYTE)wc)) wc = dbc_2nd((BYTE)*label) ? wc << 8 | (BYTE)*label++ : 0;
5494:DRIVER/FatFs/source/ff.c **** 			if (IsLower(wc)) wc -= 0x20;		/* To upper ASCII characters */
5495:DRIVER/FatFs/source/ff.c **** #if FF_CODE_PAGE == 0
5496:DRIVER/FatFs/source/ff.c **** 			if (ExCvt && wc >= 0x80) wc = ExCvt[wc - 0x80];	/* To upper extended characters (SBCS cfg) */
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 202


5497:DRIVER/FatFs/source/ff.c **** #elif FF_CODE_PAGE < 900
5498:DRIVER/FatFs/source/ff.c **** 			if (wc >= 0x80) wc = ExCvt[wc - 0x80];	/* To upper extended characters (SBCS cfg) */
5499:DRIVER/FatFs/source/ff.c **** #endif
5500:DRIVER/FatFs/source/ff.c **** #endif
5501:DRIVER/FatFs/source/ff.c **** 			if (wc == 0 || strchr(&badchr[0], (int)wc) || di >= (UINT)((wc >= 0x100) ? 10 : 11)) {	/* Reject
5502:DRIVER/FatFs/source/ff.c **** 				LEAVE_FF(fs, FR_INVALID_NAME);
5503:DRIVER/FatFs/source/ff.c **** 			}
5504:DRIVER/FatFs/source/ff.c **** 			if (wc >= 0x100) dirvn[di++] = (BYTE)(wc >> 8);
5505:DRIVER/FatFs/source/ff.c **** 			dirvn[di++] = (BYTE)wc;
5506:DRIVER/FatFs/source/ff.c **** 		}
5507:DRIVER/FatFs/source/ff.c **** 		if (dirvn[0] == DDEM) LEAVE_FF(fs, FR_INVALID_NAME);	/* Reject illegal name (heading DDEM) */
5508:DRIVER/FatFs/source/ff.c **** 		while (di && dirvn[di - 1] == ' ') di--;				/* Snip trailing spaces */
5509:DRIVER/FatFs/source/ff.c **** 	}
5510:DRIVER/FatFs/source/ff.c **** 
5511:DRIVER/FatFs/source/ff.c **** 	/* Set volume label */
5512:DRIVER/FatFs/source/ff.c **** 	dj.obj.fs = fs; dj.obj.sclust = 0;	/* Open root directory */
5513:DRIVER/FatFs/source/ff.c **** 	res = dir_sdi(&dj, 0);
5514:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
5515:DRIVER/FatFs/source/ff.c **** 		res = DIR_READ_LABEL(&dj);	/* Get volume label entry */
5516:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK) {
5517:DRIVER/FatFs/source/ff.c **** 			if (FF_FS_EXFAT && fs->fs_type == FS_EXFAT) {
5518:DRIVER/FatFs/source/ff.c **** 				dj.dir[XDIR_NumLabel] = (BYTE)di;	/* Change the volume label */
5519:DRIVER/FatFs/source/ff.c **** 				memcpy(dj.dir + XDIR_Label, dirvn, 22);
5520:DRIVER/FatFs/source/ff.c **** 			} else {
5521:DRIVER/FatFs/source/ff.c **** 				if (di != 0) {
5522:DRIVER/FatFs/source/ff.c **** 					memcpy(dj.dir, dirvn, 11);	/* Change the volume label */
5523:DRIVER/FatFs/source/ff.c **** 				} else {
5524:DRIVER/FatFs/source/ff.c **** 					dj.dir[DIR_Name] = DDEM;	/* Remove the volume label */
5525:DRIVER/FatFs/source/ff.c **** 				}
5526:DRIVER/FatFs/source/ff.c **** 			}
5527:DRIVER/FatFs/source/ff.c **** 			fs->wflag = 1;
5528:DRIVER/FatFs/source/ff.c **** 			res = sync_fs(fs);
5529:DRIVER/FatFs/source/ff.c **** 		} else {			/* No volume label entry or an error */
5530:DRIVER/FatFs/source/ff.c **** 			if (res == FR_NO_FILE) {
5531:DRIVER/FatFs/source/ff.c **** 				res = FR_OK;
5532:DRIVER/FatFs/source/ff.c **** 				if (di != 0) {	/* Create a volume label entry */
5533:DRIVER/FatFs/source/ff.c **** 					res = dir_alloc(&dj, 1);	/* Allocate an entry */
5534:DRIVER/FatFs/source/ff.c **** 					if (res == FR_OK) {
5535:DRIVER/FatFs/source/ff.c **** 						memset(dj.dir, 0, SZDIRE);	/* Clean the entry */
5536:DRIVER/FatFs/source/ff.c **** 						if (FF_FS_EXFAT && fs->fs_type == FS_EXFAT) {
5537:DRIVER/FatFs/source/ff.c **** 							dj.dir[XDIR_Type] = ET_VLABEL;	/* Create volume label entry */
5538:DRIVER/FatFs/source/ff.c **** 							dj.dir[XDIR_NumLabel] = (BYTE)di;
5539:DRIVER/FatFs/source/ff.c **** 							memcpy(dj.dir + XDIR_Label, dirvn, 22);
5540:DRIVER/FatFs/source/ff.c **** 						} else {
5541:DRIVER/FatFs/source/ff.c **** 							dj.dir[DIR_Attr] = AM_VOL;		/* Create volume label entry */
5542:DRIVER/FatFs/source/ff.c **** 							memcpy(dj.dir, dirvn, 11);
5543:DRIVER/FatFs/source/ff.c **** 						}
5544:DRIVER/FatFs/source/ff.c **** 						fs->wflag = 1;
5545:DRIVER/FatFs/source/ff.c **** 						res = sync_fs(fs);
5546:DRIVER/FatFs/source/ff.c **** 					}
5547:DRIVER/FatFs/source/ff.c **** 				}
5548:DRIVER/FatFs/source/ff.c **** 			}
5549:DRIVER/FatFs/source/ff.c **** 		}
5550:DRIVER/FatFs/source/ff.c **** 	}
5551:DRIVER/FatFs/source/ff.c **** 
5552:DRIVER/FatFs/source/ff.c **** 	LEAVE_FF(fs, res);
5553:DRIVER/FatFs/source/ff.c **** }
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 203


5554:DRIVER/FatFs/source/ff.c **** 
5555:DRIVER/FatFs/source/ff.c **** #endif /* !FF_FS_READONLY */
5556:DRIVER/FatFs/source/ff.c **** #endif /* FF_USE_LABEL */
5557:DRIVER/FatFs/source/ff.c **** 
5558:DRIVER/FatFs/source/ff.c **** 
5559:DRIVER/FatFs/source/ff.c **** 
5560:DRIVER/FatFs/source/ff.c **** #if FF_USE_EXPAND && !FF_FS_READONLY
5561:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
5562:DRIVER/FatFs/source/ff.c **** /* Allocate a Contiguous Blocks to the File                              */
5563:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
5564:DRIVER/FatFs/source/ff.c **** 
5565:DRIVER/FatFs/source/ff.c **** FRESULT f_expand (
5566:DRIVER/FatFs/source/ff.c **** 	FIL* fp,		/* Pointer to the file object */
5567:DRIVER/FatFs/source/ff.c **** 	FSIZE_t fsz,	/* File size to be expanded to */
5568:DRIVER/FatFs/source/ff.c **** 	BYTE opt		/* Operation mode 0:Find and prepare or 1:Find and allocate */
5569:DRIVER/FatFs/source/ff.c **** )
5570:DRIVER/FatFs/source/ff.c **** {
5571:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
5572:DRIVER/FatFs/source/ff.c **** 	FATFS *fs;
5573:DRIVER/FatFs/source/ff.c **** 	DWORD n, clst, stcl, scl, ncl, tcl, lclst;
5574:DRIVER/FatFs/source/ff.c **** 
5575:DRIVER/FatFs/source/ff.c **** 
5576:DRIVER/FatFs/source/ff.c **** 	res = validate(&fp->obj, &fs);		/* Check validity of the file object */
5577:DRIVER/FatFs/source/ff.c **** 	if (res != FR_OK || (res = (FRESULT)fp->err) != FR_OK) LEAVE_FF(fs, res);
5578:DRIVER/FatFs/source/ff.c **** 	if (fsz == 0 || fp->obj.objsize != 0 || !(fp->flag & FA_WRITE)) LEAVE_FF(fs, FR_DENIED);
5579:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
5580:DRIVER/FatFs/source/ff.c **** 	if (fs->fs_type != FS_EXFAT && fsz >= 0x100000000) LEAVE_FF(fs, FR_DENIED);	/* Check if in size li
5581:DRIVER/FatFs/source/ff.c **** #endif
5582:DRIVER/FatFs/source/ff.c **** 	n = (DWORD)fs->csize * SS(fs);	/* Cluster size */
5583:DRIVER/FatFs/source/ff.c **** 	tcl = (DWORD)(fsz / n) + ((fsz & (n - 1)) ? 1 : 0);	/* Number of clusters required */
5584:DRIVER/FatFs/source/ff.c **** 	stcl = fs->last_clst; lclst = 0;
5585:DRIVER/FatFs/source/ff.c **** 	if (stcl < 2 || stcl >= fs->n_fatent) stcl = 2;
5586:DRIVER/FatFs/source/ff.c **** 
5587:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
5588:DRIVER/FatFs/source/ff.c **** 	if (fs->fs_type == FS_EXFAT) {
5589:DRIVER/FatFs/source/ff.c **** 		scl = find_bitmap(fs, stcl, tcl);			/* Find a contiguous cluster block */
5590:DRIVER/FatFs/source/ff.c **** 		if (scl == 0) res = FR_DENIED;				/* No contiguous cluster block was found */
5591:DRIVER/FatFs/source/ff.c **** 		if (scl == 0xFFFFFFFF) res = FR_DISK_ERR;
5592:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK) {	/* A contiguous free area is found */
5593:DRIVER/FatFs/source/ff.c **** 			if (opt) {		/* Allocate it now */
5594:DRIVER/FatFs/source/ff.c **** 				res = change_bitmap(fs, scl, tcl, 1);	/* Mark the cluster block 'in use' */
5595:DRIVER/FatFs/source/ff.c **** 				lclst = scl + tcl - 1;
5596:DRIVER/FatFs/source/ff.c **** 			} else {		/* Set it as suggested point for next allocation */
5597:DRIVER/FatFs/source/ff.c **** 				lclst = scl - 1;
5598:DRIVER/FatFs/source/ff.c **** 			}
5599:DRIVER/FatFs/source/ff.c **** 		}
5600:DRIVER/FatFs/source/ff.c **** 	} else
5601:DRIVER/FatFs/source/ff.c **** #endif
5602:DRIVER/FatFs/source/ff.c **** 	{
5603:DRIVER/FatFs/source/ff.c **** 		scl = clst = stcl; ncl = 0;
5604:DRIVER/FatFs/source/ff.c **** 		for (;;) {	/* Find a contiguous cluster block */
5605:DRIVER/FatFs/source/ff.c **** 			n = get_fat(&fp->obj, clst);
5606:DRIVER/FatFs/source/ff.c **** 			if (++clst >= fs->n_fatent) clst = 2;
5607:DRIVER/FatFs/source/ff.c **** 			if (n == 1) {
5608:DRIVER/FatFs/source/ff.c **** 				res = FR_INT_ERR; break;
5609:DRIVER/FatFs/source/ff.c **** 			}
5610:DRIVER/FatFs/source/ff.c **** 			if (n == 0xFFFFFFFF) {
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 204


5611:DRIVER/FatFs/source/ff.c **** 				res = FR_DISK_ERR; break;
5612:DRIVER/FatFs/source/ff.c **** 			}
5613:DRIVER/FatFs/source/ff.c **** 			if (n == 0) {	/* Is it a free cluster? */
5614:DRIVER/FatFs/source/ff.c **** 				if (++ncl == tcl) break;	/* Break if a contiguous cluster block is found */
5615:DRIVER/FatFs/source/ff.c **** 			} else {
5616:DRIVER/FatFs/source/ff.c **** 				scl = clst; ncl = 0;		/* Not a free cluster */
5617:DRIVER/FatFs/source/ff.c **** 			}
5618:DRIVER/FatFs/source/ff.c **** 			if (clst == stcl) {		/* No contiguous cluster? */
5619:DRIVER/FatFs/source/ff.c **** 				res = FR_DENIED; break;
5620:DRIVER/FatFs/source/ff.c **** 			}
5621:DRIVER/FatFs/source/ff.c **** 		}
5622:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK) {	/* A contiguous free area is found */
5623:DRIVER/FatFs/source/ff.c **** 			if (opt) {		/* Allocate it now */
5624:DRIVER/FatFs/source/ff.c **** 				for (clst = scl, n = tcl; n; clst++, n--) {	/* Create a cluster chain on the FAT */
5625:DRIVER/FatFs/source/ff.c **** 					res = put_fat(fs, clst, (n == 1) ? 0xFFFFFFFF : clst + 1);
5626:DRIVER/FatFs/source/ff.c **** 					if (res != FR_OK) break;
5627:DRIVER/FatFs/source/ff.c **** 					lclst = clst;
5628:DRIVER/FatFs/source/ff.c **** 				}
5629:DRIVER/FatFs/source/ff.c **** 			} else {		/* Set it as suggested point for next allocation */
5630:DRIVER/FatFs/source/ff.c **** 				lclst = scl - 1;
5631:DRIVER/FatFs/source/ff.c **** 			}
5632:DRIVER/FatFs/source/ff.c **** 		}
5633:DRIVER/FatFs/source/ff.c **** 	}
5634:DRIVER/FatFs/source/ff.c **** 
5635:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
5636:DRIVER/FatFs/source/ff.c **** 		fs->last_clst = lclst;		/* Set suggested start cluster to start next */
5637:DRIVER/FatFs/source/ff.c **** 		if (opt) {	/* Is it allocated now? */
5638:DRIVER/FatFs/source/ff.c **** 			fp->obj.sclust = scl;		/* Update object allocation information */
5639:DRIVER/FatFs/source/ff.c **** 			fp->obj.objsize = fsz;
5640:DRIVER/FatFs/source/ff.c **** 			if (FF_FS_EXFAT) fp->obj.stat = 2;	/* Set status 'contiguous chain' */
5641:DRIVER/FatFs/source/ff.c **** 			fp->flag |= FA_MODIFIED;
5642:DRIVER/FatFs/source/ff.c **** 			if (fs->free_clst <= fs->n_fatent - 2) {	/* Update FSINFO */
5643:DRIVER/FatFs/source/ff.c **** 				fs->free_clst -= tcl;
5644:DRIVER/FatFs/source/ff.c **** 				fs->fsi_flag |= 1;
5645:DRIVER/FatFs/source/ff.c **** 			}
5646:DRIVER/FatFs/source/ff.c **** 		}
5647:DRIVER/FatFs/source/ff.c **** 	}
5648:DRIVER/FatFs/source/ff.c **** 
5649:DRIVER/FatFs/source/ff.c **** 	LEAVE_FF(fs, res);
5650:DRIVER/FatFs/source/ff.c **** }
5651:DRIVER/FatFs/source/ff.c **** 
5652:DRIVER/FatFs/source/ff.c **** #endif /* FF_USE_EXPAND && !FF_FS_READONLY */
5653:DRIVER/FatFs/source/ff.c **** 
5654:DRIVER/FatFs/source/ff.c **** 
5655:DRIVER/FatFs/source/ff.c **** 
5656:DRIVER/FatFs/source/ff.c **** #if FF_USE_FORWARD
5657:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
5658:DRIVER/FatFs/source/ff.c **** /* Forward Data to the Stream Directly                                   */
5659:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
5660:DRIVER/FatFs/source/ff.c **** 
5661:DRIVER/FatFs/source/ff.c **** FRESULT f_forward (
5662:DRIVER/FatFs/source/ff.c **** 	FIL* fp, 						/* Pointer to the file object */
5663:DRIVER/FatFs/source/ff.c **** 	UINT (*func)(const BYTE*,UINT),	/* Pointer to the streaming function */
5664:DRIVER/FatFs/source/ff.c **** 	UINT btf,						/* Number of bytes to forward */
5665:DRIVER/FatFs/source/ff.c **** 	UINT* bf						/* Pointer to number of bytes forwarded */
5666:DRIVER/FatFs/source/ff.c **** )
5667:DRIVER/FatFs/source/ff.c **** {
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 205


5668:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
5669:DRIVER/FatFs/source/ff.c **** 	FATFS *fs;
5670:DRIVER/FatFs/source/ff.c **** 	DWORD clst;
5671:DRIVER/FatFs/source/ff.c **** 	LBA_t sect;
5672:DRIVER/FatFs/source/ff.c **** 	FSIZE_t remain;
5673:DRIVER/FatFs/source/ff.c **** 	UINT rcnt, csect;
5674:DRIVER/FatFs/source/ff.c **** 	BYTE *dbuf;
5675:DRIVER/FatFs/source/ff.c **** 
5676:DRIVER/FatFs/source/ff.c **** 
5677:DRIVER/FatFs/source/ff.c **** 	*bf = 0;	/* Clear transfer byte counter */
5678:DRIVER/FatFs/source/ff.c **** 	res = validate(&fp->obj, &fs);		/* Check validity of the file object */
5679:DRIVER/FatFs/source/ff.c **** 	if (res != FR_OK || (res = (FRESULT)fp->err) != FR_OK) LEAVE_FF(fs, res);
5680:DRIVER/FatFs/source/ff.c **** 	if (!(fp->flag & FA_READ)) LEAVE_FF(fs, FR_DENIED);	/* Check access mode */
5681:DRIVER/FatFs/source/ff.c **** 
5682:DRIVER/FatFs/source/ff.c **** 	remain = fp->obj.objsize - fp->fptr;
5683:DRIVER/FatFs/source/ff.c **** 	if (btf > remain) btf = (UINT)remain;			/* Truncate btf by remaining bytes */
5684:DRIVER/FatFs/source/ff.c **** 
5685:DRIVER/FatFs/source/ff.c **** 	for ( ; btf > 0 && (*func)(0, 0); fp->fptr += rcnt, *bf += rcnt, btf -= rcnt) {	/* Repeat until al
5686:DRIVER/FatFs/source/ff.c **** 		csect = (UINT)(fp->fptr / SS(fs) & (fs->csize - 1));	/* Sector offset in the cluster */
5687:DRIVER/FatFs/source/ff.c **** 		if (fp->fptr % SS(fs) == 0) {				/* On the sector boundary? */
5688:DRIVER/FatFs/source/ff.c **** 			if (csect == 0) {						/* On the cluster boundary? */
5689:DRIVER/FatFs/source/ff.c **** 				clst = (fp->fptr == 0) ?			/* On the top of the file? */
5690:DRIVER/FatFs/source/ff.c **** 					fp->obj.sclust : get_fat(&fp->obj, fp->clust);
5691:DRIVER/FatFs/source/ff.c **** 				if (clst <= 1) ABORT(fs, FR_INT_ERR);
5692:DRIVER/FatFs/source/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
5693:DRIVER/FatFs/source/ff.c **** 				fp->clust = clst;					/* Update current cluster */
5694:DRIVER/FatFs/source/ff.c **** 			}
5695:DRIVER/FatFs/source/ff.c **** 		}
5696:DRIVER/FatFs/source/ff.c **** 		sect = clst2sect(fs, fp->clust);			/* Get current data sector */
5697:DRIVER/FatFs/source/ff.c **** 		if (sect == 0) ABORT(fs, FR_INT_ERR);
5698:DRIVER/FatFs/source/ff.c **** 		sect += csect;
5699:DRIVER/FatFs/source/ff.c **** #if FF_FS_TINY
5700:DRIVER/FatFs/source/ff.c **** 		if (move_window(fs, sect) != FR_OK) ABORT(fs, FR_DISK_ERR);	/* Move sector window to the file dat
5701:DRIVER/FatFs/source/ff.c **** 		dbuf = fs->win;
5702:DRIVER/FatFs/source/ff.c **** #else
5703:DRIVER/FatFs/source/ff.c **** 		if (fp->sect != sect) {		/* Fill sector cache with file data */
5704:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY
5705:DRIVER/FatFs/source/ff.c **** 			if (fp->flag & FA_DIRTY) {		/* Write-back dirty sector cache */
5706:DRIVER/FatFs/source/ff.c **** 				if (disk_write(fs->pdrv, fp->buf, fp->sect, 1) != RES_OK) ABORT(fs, FR_DISK_ERR);
5707:DRIVER/FatFs/source/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
5708:DRIVER/FatFs/source/ff.c **** 			}
5709:DRIVER/FatFs/source/ff.c **** #endif
5710:DRIVER/FatFs/source/ff.c **** 			if (disk_read(fs->pdrv, fp->buf, sect, 1) != RES_OK) ABORT(fs, FR_DISK_ERR);
5711:DRIVER/FatFs/source/ff.c **** 		}
5712:DRIVER/FatFs/source/ff.c **** 		dbuf = fp->buf;
5713:DRIVER/FatFs/source/ff.c **** #endif
5714:DRIVER/FatFs/source/ff.c **** 		fp->sect = sect;
5715:DRIVER/FatFs/source/ff.c **** 		rcnt = SS(fs) - (UINT)fp->fptr % SS(fs);	/* Number of bytes remains in the sector */
5716:DRIVER/FatFs/source/ff.c **** 		if (rcnt > btf) rcnt = btf;					/* Clip it by btr if needed */
5717:DRIVER/FatFs/source/ff.c **** 		rcnt = (*func)(dbuf + ((UINT)fp->fptr % SS(fs)), rcnt);	/* Forward the file data */
5718:DRIVER/FatFs/source/ff.c **** 		if (rcnt == 0) ABORT(fs, FR_INT_ERR);
5719:DRIVER/FatFs/source/ff.c **** 	}
5720:DRIVER/FatFs/source/ff.c **** 
5721:DRIVER/FatFs/source/ff.c **** 	LEAVE_FF(fs, FR_OK);
5722:DRIVER/FatFs/source/ff.c **** }
5723:DRIVER/FatFs/source/ff.c **** #endif /* FF_USE_FORWARD */
5724:DRIVER/FatFs/source/ff.c **** 
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 206


5725:DRIVER/FatFs/source/ff.c **** 
5726:DRIVER/FatFs/source/ff.c **** 
5727:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY && FF_USE_MKFS
5728:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
5729:DRIVER/FatFs/source/ff.c **** /* Create FAT/exFAT volume (with sub-functions)                          */
5730:DRIVER/FatFs/source/ff.c **** /*-----------------------------------------------------------------------*/
5731:DRIVER/FatFs/source/ff.c **** 
5732:DRIVER/FatFs/source/ff.c **** #define N_SEC_TRACK 63			/* Sectors per track for determination of drive CHS */
5733:DRIVER/FatFs/source/ff.c **** #define	GPT_ALIGN	0x100000	/* Alignment of partitions in GPT [byte] (>=128KB) */
5734:DRIVER/FatFs/source/ff.c **** #define GPT_ITEMS	128			/* Number of GPT table size (>=128, sector aligned) */
5735:DRIVER/FatFs/source/ff.c **** 
5736:DRIVER/FatFs/source/ff.c **** 
5737:DRIVER/FatFs/source/ff.c **** /* Create partitions on the physical drive in format of MBR or GPT */
5738:DRIVER/FatFs/source/ff.c **** 
5739:DRIVER/FatFs/source/ff.c **** static FRESULT create_partition (
5740:DRIVER/FatFs/source/ff.c **** 	BYTE drv,			/* Physical drive number */
5741:DRIVER/FatFs/source/ff.c **** 	const LBA_t plst[],	/* Partition list */
5742:DRIVER/FatFs/source/ff.c **** 	BYTE sys,			/* System ID for each partition (for only MBR) */
5743:DRIVER/FatFs/source/ff.c **** 	BYTE *buf			/* Working buffer for a sector */
5744:DRIVER/FatFs/source/ff.c **** )
5745:DRIVER/FatFs/source/ff.c **** {
 4736              		.loc 1 5745 1 is_stmt 1 view -0
 4737              		.cfi_startproc
 4738              		@ args = 0, pretend = 0, frame = 16
 4739              		@ frame_needed = 0, uses_anonymous_args = 0
 4740              		.loc 1 5745 1 is_stmt 0 view .LVU1593
 4741 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 4742              	.LCFI27:
 4743              		.cfi_def_cfa_offset 36
 4744              		.cfi_offset 4, -36
 4745              		.cfi_offset 5, -32
 4746              		.cfi_offset 6, -28
 4747              		.cfi_offset 7, -24
 4748              		.cfi_offset 8, -20
 4749              		.cfi_offset 9, -16
 4750              		.cfi_offset 10, -12
 4751              		.cfi_offset 11, -8
 4752              		.cfi_offset 14, -4
 4753 0004 85B0     		sub	sp, sp, #20
 4754              	.LCFI28:
 4755              		.cfi_def_cfa_offset 56
 4756 0006 0190     		str	r0, [sp, #4]
 4757 0008 8B46     		mov	fp, r1
 4758 000a 0092     		str	r2, [sp]
 4759 000c 9A46     		mov	r10, r3
5746:DRIVER/FatFs/source/ff.c **** 	UINT i, cy;
 4760              		.loc 1 5746 2 is_stmt 1 view .LVU1594
5747:DRIVER/FatFs/source/ff.c **** 	LBA_t sz_drv;
 4761              		.loc 1 5747 2 view .LVU1595
5748:DRIVER/FatFs/source/ff.c **** 	DWORD sz_drv32, nxt_alloc32, sz_part32;
 4762              		.loc 1 5748 2 view .LVU1596
5749:DRIVER/FatFs/source/ff.c **** 	BYTE *pte;
 4763              		.loc 1 5749 2 view .LVU1597
5750:DRIVER/FatFs/source/ff.c **** 	BYTE hd, n_hd, sc, n_sc;
 4764              		.loc 1 5750 2 view .LVU1598
5751:DRIVER/FatFs/source/ff.c **** 
5752:DRIVER/FatFs/source/ff.c **** 	/* Get physical drive size */
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 207


5753:DRIVER/FatFs/source/ff.c **** 	if (disk_ioctl(drv, GET_SECTOR_COUNT, &sz_drv) != RES_OK) return FR_DISK_ERR;
 4765              		.loc 1 5753 2 view .LVU1599
 4766              		.loc 1 5753 6 is_stmt 0 view .LVU1600
 4767 000e 03AA     		add	r2, sp, #12
 4768              	.LVL588:
 4769              		.loc 1 5753 6 view .LVU1601
 4770 0010 0121     		movs	r1, #1
 4771              	.LVL589:
 4772              		.loc 1 5753 6 view .LVU1602
 4773 0012 FFF7FEFF 		bl	disk_ioctl
 4774              	.LVL590:
 4775              		.loc 1 5753 5 view .LVU1603
 4776 0016 0028     		cmp	r0, #0
 4777 0018 40F08880 		bne	.L357
5754:DRIVER/FatFs/source/ff.c **** 
5755:DRIVER/FatFs/source/ff.c **** #if FF_LBA64
5756:DRIVER/FatFs/source/ff.c **** 	if (sz_drv >= FF_MIN_GPT) {	/* Create partitions in GPT format */
5757:DRIVER/FatFs/source/ff.c **** 		WORD ss;
5758:DRIVER/FatFs/source/ff.c **** 		UINT sz_ptbl, pi, si, ofs;
5759:DRIVER/FatFs/source/ff.c **** 		DWORD bcc, rnd, align;
5760:DRIVER/FatFs/source/ff.c **** 		QWORD nxt_alloc, sz_part, sz_pool, top_bpt;
5761:DRIVER/FatFs/source/ff.c **** 		static const BYTE gpt_mbr[16] = {0x00, 0x00, 0x02, 0x00, 0xEE, 0xFE, 0xFF, 0x00, 0x01, 0x00, 0x00
5762:DRIVER/FatFs/source/ff.c **** 
5763:DRIVER/FatFs/source/ff.c **** #if FF_MAX_SS != FF_MIN_SS
5764:DRIVER/FatFs/source/ff.c **** 		if (disk_ioctl(drv, GET_SECTOR_SIZE, &ss) != RES_OK) return FR_DISK_ERR;	/* Get sector size */
5765:DRIVER/FatFs/source/ff.c **** 		if (ss > FF_MAX_SS || ss < FF_MIN_SS || (ss & (ss - 1))) return FR_DISK_ERR;
5766:DRIVER/FatFs/source/ff.c **** #else
5767:DRIVER/FatFs/source/ff.c **** 		ss = FF_MAX_SS;
5768:DRIVER/FatFs/source/ff.c **** #endif
5769:DRIVER/FatFs/source/ff.c **** 		rnd = (DWORD)sz_drv + GET_FATTIME();	/* Random seed */
5770:DRIVER/FatFs/source/ff.c **** 		align = GPT_ALIGN / ss;				/* Partition alignment for GPT [sector] */
5771:DRIVER/FatFs/source/ff.c **** 		sz_ptbl = GPT_ITEMS * SZ_GPTE / ss;	/* Size of partition table [sector] */
5772:DRIVER/FatFs/source/ff.c **** 		top_bpt = sz_drv - sz_ptbl - 1;		/* Backup partition table start sector */
5773:DRIVER/FatFs/source/ff.c **** 		nxt_alloc = 2 + sz_ptbl;			/* First allocatable sector */
5774:DRIVER/FatFs/source/ff.c **** 		sz_pool = top_bpt - nxt_alloc;		/* Size of allocatable area */
5775:DRIVER/FatFs/source/ff.c **** 		bcc = 0xFFFFFFFF; sz_part = 1;
5776:DRIVER/FatFs/source/ff.c **** 		pi = si = 0;	/* partition table index, size table index */
5777:DRIVER/FatFs/source/ff.c **** 		do {
5778:DRIVER/FatFs/source/ff.c **** 			if (pi * SZ_GPTE % ss == 0) memset(buf, 0, ss);	/* Clean the buffer if needed */
5779:DRIVER/FatFs/source/ff.c **** 			if (sz_part != 0) {				/* Is the size table not termintated? */
5780:DRIVER/FatFs/source/ff.c **** 				nxt_alloc = (nxt_alloc + align - 1) & ((QWORD)0 - align);	/* Align partition start */
5781:DRIVER/FatFs/source/ff.c **** 				sz_part = plst[si++];		/* Get a partition size */
5782:DRIVER/FatFs/source/ff.c **** 				if (sz_part <= 100) {		/* Is the size in percentage? */
5783:DRIVER/FatFs/source/ff.c **** 					sz_part = sz_pool * sz_part / 100;
5784:DRIVER/FatFs/source/ff.c **** 					sz_part = (sz_part + align - 1) & ((QWORD)0 - align);	/* Align partition end (only if in perce
5785:DRIVER/FatFs/source/ff.c **** 				}
5786:DRIVER/FatFs/source/ff.c **** 				if (nxt_alloc + sz_part > top_bpt) {	/* Clip the size at end of the pool */
5787:DRIVER/FatFs/source/ff.c **** 					sz_part = (nxt_alloc < top_bpt) ? top_bpt - nxt_alloc : 0;
5788:DRIVER/FatFs/source/ff.c **** 				}
5789:DRIVER/FatFs/source/ff.c **** 			}
5790:DRIVER/FatFs/source/ff.c **** 			if (sz_part != 0) {				/* Add a partition? */
5791:DRIVER/FatFs/source/ff.c **** 				ofs = pi * SZ_GPTE % ss;
5792:DRIVER/FatFs/source/ff.c **** 				memcpy(buf + ofs + GPTE_PtGuid, GUID_MS_Basic, 16);	/* Set partition GUID (Microsoft Basic Data
5793:DRIVER/FatFs/source/ff.c **** 				rnd = make_rand(rnd, buf + ofs + GPTE_UpGuid, 16);	/* Set unique partition GUID */
5794:DRIVER/FatFs/source/ff.c **** 				st_qword(buf + ofs + GPTE_FstLba, nxt_alloc);		/* Set partition start sector */
5795:DRIVER/FatFs/source/ff.c **** 				st_qword(buf + ofs + GPTE_LstLba, nxt_alloc + sz_part - 1);	/* Set partition end sector */
5796:DRIVER/FatFs/source/ff.c **** 				nxt_alloc += sz_part;								/* Next allocatable sector */
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 208


5797:DRIVER/FatFs/source/ff.c **** 			}
5798:DRIVER/FatFs/source/ff.c **** 			if ((pi + 1) * SZ_GPTE % ss == 0) {		/* Write the buffer if it is filled up */
5799:DRIVER/FatFs/source/ff.c **** 				for (i = 0; i < ss; bcc = crc32(bcc, buf[i++])) ;	/* Calculate table check sum */
5800:DRIVER/FatFs/source/ff.c **** 				if (disk_write(drv, buf, 2 + pi * SZ_GPTE / ss, 1) != RES_OK) return FR_DISK_ERR;		/* Write to 
5801:DRIVER/FatFs/source/ff.c **** 				if (disk_write(drv, buf, top_bpt + pi * SZ_GPTE / ss, 1) != RES_OK) return FR_DISK_ERR;	/* Writ
5802:DRIVER/FatFs/source/ff.c **** 			}
5803:DRIVER/FatFs/source/ff.c **** 		} while (++pi < GPT_ITEMS);
5804:DRIVER/FatFs/source/ff.c **** 
5805:DRIVER/FatFs/source/ff.c **** 		/* Create primary GPT header */
5806:DRIVER/FatFs/source/ff.c **** 		memset(buf, 0, ss);
5807:DRIVER/FatFs/source/ff.c **** 		memcpy(buf + GPTH_Sign, "EFI PART" "\0\0\1\0" "\x5C\0\0", 16);	/* Signature, version (1.0) and si
5808:DRIVER/FatFs/source/ff.c **** 		st_dword(buf + GPTH_PtBcc, ~bcc);			/* Table check sum */
5809:DRIVER/FatFs/source/ff.c **** 		st_qword(buf + GPTH_CurLba, 1);				/* LBA of this header */
5810:DRIVER/FatFs/source/ff.c **** 		st_qword(buf + GPTH_BakLba, sz_drv - 1);	/* LBA of secondary header */
5811:DRIVER/FatFs/source/ff.c **** 		st_qword(buf + GPTH_FstLba, 2 + sz_ptbl);	/* LBA of first allocatable sector */
5812:DRIVER/FatFs/source/ff.c **** 		st_qword(buf + GPTH_LstLba, top_bpt - 1);	/* LBA of last allocatable sector */
5813:DRIVER/FatFs/source/ff.c **** 		st_dword(buf + GPTH_PteSize, SZ_GPTE);		/* Size of a table entry */
5814:DRIVER/FatFs/source/ff.c **** 		st_dword(buf + GPTH_PtNum, GPT_ITEMS);		/* Number of table entries */
5815:DRIVER/FatFs/source/ff.c **** 		st_dword(buf + GPTH_PtOfs, 2);				/* LBA of this table */
5816:DRIVER/FatFs/source/ff.c **** 		rnd = make_rand(rnd, buf + GPTH_DskGuid, 16);	/* Disk GUID */
5817:DRIVER/FatFs/source/ff.c **** 		for (i = 0, bcc= 0xFFFFFFFF; i < 92; bcc = crc32(bcc, buf[i++])) ;	/* Calculate header check sum 
5818:DRIVER/FatFs/source/ff.c **** 		st_dword(buf + GPTH_Bcc, ~bcc);				/* Header check sum */
5819:DRIVER/FatFs/source/ff.c **** 		if (disk_write(drv, buf, 1, 1) != RES_OK) return FR_DISK_ERR;
5820:DRIVER/FatFs/source/ff.c **** 
5821:DRIVER/FatFs/source/ff.c **** 		/* Create secondary GPT header */
5822:DRIVER/FatFs/source/ff.c **** 		st_qword(buf + GPTH_CurLba, sz_drv - 1);	/* LBA of this header */
5823:DRIVER/FatFs/source/ff.c **** 		st_qword(buf + GPTH_BakLba, 1);				/* LBA of primary header */
5824:DRIVER/FatFs/source/ff.c **** 		st_qword(buf + GPTH_PtOfs, top_bpt);		/* LBA of this table */
5825:DRIVER/FatFs/source/ff.c **** 		st_dword(buf + GPTH_Bcc, 0);
5826:DRIVER/FatFs/source/ff.c **** 		for (i = 0, bcc= 0xFFFFFFFF; i < 92; bcc = crc32(bcc, buf[i++])) ;	/* Calculate header check sum 
5827:DRIVER/FatFs/source/ff.c **** 		st_dword(buf + GPTH_Bcc, ~bcc);				/* Header check sum */
5828:DRIVER/FatFs/source/ff.c **** 		if (disk_write(drv, buf, sz_drv - 1, 1) != RES_OK) return FR_DISK_ERR;
5829:DRIVER/FatFs/source/ff.c **** 
5830:DRIVER/FatFs/source/ff.c **** 		/* Create protective MBR */
5831:DRIVER/FatFs/source/ff.c **** 		memset(buf, 0, ss);
5832:DRIVER/FatFs/source/ff.c **** 		memcpy(buf + MBR_Table, gpt_mbr, 16);		/* Create a GPT partition */
5833:DRIVER/FatFs/source/ff.c **** 		st_word(buf + BS_55AA, 0xAA55);
5834:DRIVER/FatFs/source/ff.c **** 		if (disk_write(drv, buf, 0, 1) != RES_OK) return FR_DISK_ERR;
5835:DRIVER/FatFs/source/ff.c **** 
5836:DRIVER/FatFs/source/ff.c **** 	} else
5837:DRIVER/FatFs/source/ff.c **** #endif
5838:DRIVER/FatFs/source/ff.c **** 	{	/* Create partitions in MBR format */
5839:DRIVER/FatFs/source/ff.c **** 		sz_drv32 = (DWORD)sz_drv;
 4778              		.loc 1 5839 3 is_stmt 1 view .LVU1604
 4779              		.loc 1 5839 12 is_stmt 0 view .LVU1605
 4780 001c DDF80C80 		ldr	r8, [sp, #12]
 4781              	.LVL591:
5840:DRIVER/FatFs/source/ff.c **** 		n_sc = N_SEC_TRACK;				/* Determine drive CHS without any consideration of the drive geometry */
 4782              		.loc 1 5840 3 is_stmt 1 view .LVU1606
5841:DRIVER/FatFs/source/ff.c **** 		for (n_hd = 8; n_hd != 0 && sz_drv32 / n_hd / n_sc > 1024; n_hd *= 2) ;
 4783              		.loc 1 5841 3 view .LVU1607
 4784              		.loc 1 5841 13 is_stmt 0 view .LVU1608
 4785 0020 0824     		movs	r4, #8
 4786              	.LVL592:
 4787              	.L347:
 4788              		.loc 1 5841 28 is_stmt 1 discriminator 1 view .LVU1609
 4789 0022 44B1     		cbz	r4, .L348
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 209


 4790              		.loc 1 5841 40 is_stmt 0 discriminator 3 view .LVU1610
 4791 0024 B8FBF4F2 		udiv	r2, r8, r4
 4792              		.loc 1 5841 28 discriminator 3 view .LVU1611
 4793 0028 4FF63E43 		movw	r3, #64574
 4794 002c 9A42     		cmp	r2, r3
 4795 002e 02D9     		bls	.L348
 4796              		.loc 1 5841 67 is_stmt 1 discriminator 4 view .LVU1612
 4797 0030 6400     		lsls	r4, r4, #1
 4798              	.LVL593:
 4799              		.loc 1 5841 67 is_stmt 0 discriminator 4 view .LVU1613
 4800 0032 E4B2     		uxtb	r4, r4
 4801              	.LVL594:
 4802              		.loc 1 5841 67 discriminator 4 view .LVU1614
 4803 0034 F5E7     		b	.L347
 4804              	.L348:
5842:DRIVER/FatFs/source/ff.c **** 		if (n_hd == 0) n_hd = 255;		/* Number of heads needs to be <256 */
 4805              		.loc 1 5842 3 is_stmt 1 view .LVU1615
 4806              		.loc 1 5842 6 is_stmt 0 view .LVU1616
 4807 0036 04B9     		cbnz	r4, .L350
 4808              		.loc 1 5842 23 view .LVU1617
 4809 0038 FF24     		movs	r4, #255
 4810              	.LVL595:
 4811              	.L350:
5843:DRIVER/FatFs/source/ff.c **** 
5844:DRIVER/FatFs/source/ff.c **** 		memset(buf, 0, FF_MAX_SS);		/* Clear MBR */
 4812              		.loc 1 5844 3 is_stmt 1 view .LVU1618
 4813 003a 4FF48052 		mov	r2, #4096
 4814 003e 0021     		movs	r1, #0
 4815 0040 5046     		mov	r0, r10
 4816 0042 FFF7FEFF 		bl	memset
 4817              	.LVL596:
5845:DRIVER/FatFs/source/ff.c **** 		pte = buf + MBR_Table;	/* Partition table in the MBR */
 4818              		.loc 1 5845 3 view .LVU1619
 4819              		.loc 1 5845 7 is_stmt 0 view .LVU1620
 4820 0046 0AF5DF76 		add	r6, r10, #446
 4821              	.LVL597:
5846:DRIVER/FatFs/source/ff.c **** 		for (i = 0, nxt_alloc32 = n_sc; i < 4 && nxt_alloc32 != 0 && nxt_alloc32 < sz_drv32; i++, nxt_all
 4822              		.loc 1 5846 3 is_stmt 1 view .LVU1621
 4823              		.loc 1 5846 27 is_stmt 0 view .LVU1622
 4824 004a 3F25     		movs	r5, #63
 4825              		.loc 1 5846 10 view .LVU1623
 4826 004c 4FF00009 		mov	r9, #0
 4827              		.loc 1 5846 3 view .LVU1624
 4828 0050 45E0     		b	.L351
 4829              	.LVL598:
 4830              	.L359:
5847:DRIVER/FatFs/source/ff.c **** 			sz_part32 = (DWORD)plst[i];	/* Get partition size */
5848:DRIVER/FatFs/source/ff.c **** 			if (sz_part32 <= 100) sz_part32 = (sz_part32 == 100) ? sz_drv32 : sz_drv32 / 100 * sz_part32;	/*
 4831              		.loc 1 5848 68 view .LVU1625
 4832 0052 4746     		mov	r7, r8
 4833              	.LVL599:
 4834              		.loc 1 5848 68 view .LVU1626
 4835 0054 54E0     		b	.L352
 4836              	.LVL600:
 4837              	.L353:
5849:DRIVER/FatFs/source/ff.c **** 			if (nxt_alloc32 + sz_part32 > sz_drv32 || nxt_alloc32 + sz_part32 < nxt_alloc32) sz_part32 = sz_
 4838              		.loc 1 5849 85 is_stmt 1 discriminator 3 view .LVU1627
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 210


 4839              		.loc 1 5849 95 is_stmt 0 discriminator 3 view .LVU1628
 4840 0056 A8EB0507 		sub	r7, r8, r5
 4841              	.LVL601:
 4842              	.L354:
5850:DRIVER/FatFs/source/ff.c **** 			if (sz_part32 == 0) break;	/* End of table or no sector to allocate? */
 4843              		.loc 1 5850 4 is_stmt 1 view .LVU1629
 4844              		.loc 1 5850 7 is_stmt 0 view .LVU1630
 4845 005a 002F     		cmp	r7, #0
 4846 005c 56D0     		beq	.L355
5851:DRIVER/FatFs/source/ff.c **** 
5852:DRIVER/FatFs/source/ff.c **** 			st_dword(pte + PTE_StLba, nxt_alloc32);	/* Start LBA */
 4847              		.loc 1 5852 4 is_stmt 1 discriminator 2 view .LVU1631
 4848 005e 2946     		mov	r1, r5
 4849 0060 06F10800 		add	r0, r6, #8
 4850 0064 FFF7FEFF 		bl	st_dword
 4851              	.LVL602:
5853:DRIVER/FatFs/source/ff.c **** 			st_dword(pte + PTE_SizLba, sz_part32);	/* Number of sectors */
 4852              		.loc 1 5853 4 discriminator 2 view .LVU1632
 4853 0068 3946     		mov	r1, r7
 4854 006a 06F10C00 		add	r0, r6, #12
 4855 006e FFF7FEFF 		bl	st_dword
 4856              	.LVL603:
5854:DRIVER/FatFs/source/ff.c **** 			pte[PTE_System] = sys;					/* System type */
 4857              		.loc 1 5854 4 discriminator 2 view .LVU1633
 4858              		.loc 1 5854 20 is_stmt 0 discriminator 2 view .LVU1634
 4859 0072 009B     		ldr	r3, [sp]
 4860 0074 3371     		strb	r3, [r6, #4]
5855:DRIVER/FatFs/source/ff.c **** 
5856:DRIVER/FatFs/source/ff.c **** 			cy = (UINT)(nxt_alloc32 / n_sc / n_hd);	/* Start cylinder */
 4861              		.loc 1 5856 4 is_stmt 1 discriminator 2 view .LVU1635
 4862              		.loc 1 5856 28 is_stmt 0 discriminator 2 view .LVU1636
 4863 0076 2F4A     		ldr	r2, .L363
 4864 0078 A2FB0513 		umull	r1, r3, r2, r5
 4865 007c E91A     		subs	r1, r5, r3
 4866 007e 03EB5103 		add	r3, r3, r1, lsr #1
 4867 0082 5B09     		lsrs	r3, r3, #5
 4868              		.loc 1 5856 7 discriminator 2 view .LVU1637
 4869 0084 B3FBF4F1 		udiv	r1, r3, r4
 4870              	.LVL604:
5857:DRIVER/FatFs/source/ff.c **** 			hd = (BYTE)(nxt_alloc32 / n_sc % n_hd);	/* Start head */
 4871              		.loc 1 5857 4 is_stmt 1 discriminator 2 view .LVU1638
 4872              		.loc 1 5857 35 is_stmt 0 discriminator 2 view .LVU1639
 4873 0088 04FB1130 		mls	r0, r4, r1, r3
 4874              	.LVL605:
5858:DRIVER/FatFs/source/ff.c **** 			sc = (BYTE)(nxt_alloc32 % n_sc + 1);	/* Start sector */
 4875              		.loc 1 5858 4 is_stmt 1 discriminator 2 view .LVU1640
 4876              		.loc 1 5858 28 is_stmt 0 discriminator 2 view .LVU1641
 4877 008c C3EB8313 		rsb	r3, r3, r3, lsl #6
 4878 0090 EB1A     		subs	r3, r5, r3
 4879              		.loc 1 5858 9 discriminator 2 view .LVU1642
 4880 0092 DBB2     		uxtb	r3, r3
 4881              		.loc 1 5858 7 discriminator 2 view .LVU1643
 4882 0094 0133     		adds	r3, r3, #1
 4883 0096 DBB2     		uxtb	r3, r3
 4884              	.LVL606:
5859:DRIVER/FatFs/source/ff.c **** 			pte[PTE_StHead] = hd;
 4885              		.loc 1 5859 4 is_stmt 1 discriminator 2 view .LVU1644
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 211


 4886              		.loc 1 5859 20 is_stmt 0 discriminator 2 view .LVU1645
 4887 0098 7070     		strb	r0, [r6, #1]
5860:DRIVER/FatFs/source/ff.c **** 			pte[PTE_StSec] = (BYTE)((cy >> 2 & 0xC0) | sc);
 4888              		.loc 1 5860 4 is_stmt 1 discriminator 2 view .LVU1646
 4889              		.loc 1 5860 32 is_stmt 0 discriminator 2 view .LVU1647
 4890 009a 8808     		lsrs	r0, r1, #2
 4891              	.LVL607:
 4892              		.loc 1 5860 37 discriminator 2 view .LVU1648
 4893 009c 00F0C000 		and	r0, r0, #192
 4894              		.loc 1 5860 21 discriminator 2 view .LVU1649
 4895 00a0 0343     		orrs	r3, r3, r0
 4896              	.LVL608:
 4897              		.loc 1 5860 19 discriminator 2 view .LVU1650
 4898 00a2 B370     		strb	r3, [r6, #2]
5861:DRIVER/FatFs/source/ff.c **** 			pte[PTE_StCyl] = (BYTE)cy;
 4899              		.loc 1 5861 4 is_stmt 1 discriminator 2 view .LVU1651
 4900              		.loc 1 5861 19 is_stmt 0 discriminator 2 view .LVU1652
 4901 00a4 F170     		strb	r1, [r6, #3]
5862:DRIVER/FatFs/source/ff.c **** 
5863:DRIVER/FatFs/source/ff.c **** 			cy = (UINT)((nxt_alloc32 + sz_part32 - 1) / n_sc / n_hd);	/* End cylinder */
 4902              		.loc 1 5863 4 is_stmt 1 discriminator 2 view .LVU1653
 4903              		.loc 1 5863 29 is_stmt 0 discriminator 2 view .LVU1654
 4904 00a6 3D44     		add	r5, r5, r7
 4905              	.LVL609:
 4906              		.loc 1 5863 41 discriminator 2 view .LVU1655
 4907 00a8 6B1E     		subs	r3, r5, #1
 4908              		.loc 1 5863 46 discriminator 2 view .LVU1656
 4909 00aa A2FB0312 		umull	r1, r2, r2, r3
 4910              	.LVL610:
 4911              		.loc 1 5863 46 discriminator 2 view .LVU1657
 4912 00ae 991A     		subs	r1, r3, r2
 4913 00b0 02EB5102 		add	r2, r2, r1, lsr #1
 4914 00b4 5209     		lsrs	r2, r2, #5
 4915              		.loc 1 5863 7 discriminator 2 view .LVU1658
 4916 00b6 B2FBF4F1 		udiv	r1, r2, r4
 4917              	.LVL611:
5864:DRIVER/FatFs/source/ff.c **** 			hd = (BYTE)((nxt_alloc32 + sz_part32 - 1) / n_sc % n_hd);	/* End head */
 4918              		.loc 1 5864 4 is_stmt 1 discriminator 2 view .LVU1659
 4919              		.loc 1 5864 53 is_stmt 0 discriminator 2 view .LVU1660
 4920 00ba 04FB1120 		mls	r0, r4, r1, r2
 4921              	.LVL612:
5865:DRIVER/FatFs/source/ff.c **** 			sc = (BYTE)((nxt_alloc32 + sz_part32 - 1) % n_sc + 1);		/* End sector */
 4922              		.loc 1 5865 4 is_stmt 1 discriminator 2 view .LVU1661
 4923              		.loc 1 5865 46 is_stmt 0 discriminator 2 view .LVU1662
 4924 00be C2EB8212 		rsb	r2, r2, r2, lsl #6
 4925 00c2 9B1A     		subs	r3, r3, r2
 4926              		.loc 1 5865 9 discriminator 2 view .LVU1663
 4927 00c4 DBB2     		uxtb	r3, r3
 4928              		.loc 1 5865 7 discriminator 2 view .LVU1664
 4929 00c6 0133     		adds	r3, r3, #1
 4930 00c8 DBB2     		uxtb	r3, r3
 4931              	.LVL613:
5866:DRIVER/FatFs/source/ff.c **** 			pte[PTE_EdHead] = hd;
 4932              		.loc 1 5866 4 is_stmt 1 discriminator 2 view .LVU1665
 4933              		.loc 1 5866 20 is_stmt 0 discriminator 2 view .LVU1666
 4934 00ca 7071     		strb	r0, [r6, #5]
5867:DRIVER/FatFs/source/ff.c **** 			pte[PTE_EdSec] = (BYTE)((cy >> 2 & 0xC0) | sc);
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 212


 4935              		.loc 1 5867 4 is_stmt 1 discriminator 2 view .LVU1667
 4936              		.loc 1 5867 32 is_stmt 0 discriminator 2 view .LVU1668
 4937 00cc 8A08     		lsrs	r2, r1, #2
 4938              		.loc 1 5867 37 discriminator 2 view .LVU1669
 4939 00ce 02F0C002 		and	r2, r2, #192
 4940              		.loc 1 5867 21 discriminator 2 view .LVU1670
 4941 00d2 1343     		orrs	r3, r3, r2
 4942              	.LVL614:
 4943              		.loc 1 5867 19 discriminator 2 view .LVU1671
 4944 00d4 B371     		strb	r3, [r6, #6]
5868:DRIVER/FatFs/source/ff.c **** 			pte[PTE_EdCyl] = (BYTE)cy;
 4945              		.loc 1 5868 4 is_stmt 1 discriminator 2 view .LVU1672
 4946              		.loc 1 5868 19 is_stmt 0 discriminator 2 view .LVU1673
 4947 00d6 F171     		strb	r1, [r6, #7]
5869:DRIVER/FatFs/source/ff.c **** 
5870:DRIVER/FatFs/source/ff.c **** 			pte += SZ_PTE;		/* Next entry */
 4948              		.loc 1 5870 4 is_stmt 1 discriminator 2 view .LVU1674
 4949              		.loc 1 5870 8 is_stmt 0 discriminator 2 view .LVU1675
 4950 00d8 1036     		adds	r6, r6, #16
 4951              	.LVL615:
5846:DRIVER/FatFs/source/ff.c **** 			sz_part32 = (DWORD)plst[i];	/* Get partition size */
 4952              		.loc 1 5846 91 is_stmt 1 discriminator 2 view .LVU1676
5846:DRIVER/FatFs/source/ff.c **** 			sz_part32 = (DWORD)plst[i];	/* Get partition size */
 4953              		.loc 1 5846 89 is_stmt 0 discriminator 2 view .LVU1677
 4954 00da 09F10109 		add	r9, r9, #1
 4955              	.LVL616:
 4956              	.L351:
5846:DRIVER/FatFs/source/ff.c **** 			sz_part32 = (DWORD)plst[i];	/* Get partition size */
 4957              		.loc 1 5846 61 is_stmt 1 discriminator 1 view .LVU1678
 4958 00de B9F1030F 		cmp	r9, #3
 4959 00e2 13D8     		bhi	.L355
5846:DRIVER/FatFs/source/ff.c **** 			sz_part32 = (DWORD)plst[i];	/* Get partition size */
 4960              		.loc 1 5846 41 is_stmt 0 discriminator 3 view .LVU1679
 4961 00e4 95B1     		cbz	r5, .L355
5846:DRIVER/FatFs/source/ff.c **** 			sz_part32 = (DWORD)plst[i];	/* Get partition size */
 4962              		.loc 1 5846 61 discriminator 4 view .LVU1680
 4963 00e6 4545     		cmp	r5, r8
 4964 00e8 10D2     		bcs	.L355
5847:DRIVER/FatFs/source/ff.c **** 			if (sz_part32 <= 100) sz_part32 = (sz_part32 == 100) ? sz_drv32 : sz_drv32 / 100 * sz_part32;	/*
 4965              		.loc 1 5847 4 is_stmt 1 view .LVU1681
5847:DRIVER/FatFs/source/ff.c **** 			if (sz_part32 <= 100) sz_part32 = (sz_part32 == 100) ? sz_drv32 : sz_drv32 / 100 * sz_part32;	/*
 4966              		.loc 1 5847 14 is_stmt 0 view .LVU1682
 4967 00ea 5BF82970 		ldr	r7, [fp, r9, lsl #2]
 4968              	.LVL617:
5848:DRIVER/FatFs/source/ff.c **** 			if (nxt_alloc32 + sz_part32 > sz_drv32 || nxt_alloc32 + sz_part32 < nxt_alloc32) sz_part32 = sz_
 4969              		.loc 1 5848 4 is_stmt 1 view .LVU1683
5848:DRIVER/FatFs/source/ff.c **** 			if (nxt_alloc32 + sz_part32 > sz_drv32 || nxt_alloc32 + sz_part32 < nxt_alloc32) sz_part32 = sz_
 4970              		.loc 1 5848 7 is_stmt 0 view .LVU1684
 4971 00ee 642F     		cmp	r7, #100
 4972 00f0 06D8     		bhi	.L352
5848:DRIVER/FatFs/source/ff.c **** 			if (nxt_alloc32 + sz_part32 > sz_drv32 || nxt_alloc32 + sz_part32 < nxt_alloc32) sz_part32 = sz_
 4973              		.loc 1 5848 26 is_stmt 1 discriminator 1 view .LVU1685
5848:DRIVER/FatFs/source/ff.c **** 			if (nxt_alloc32 + sz_part32 > sz_drv32 || nxt_alloc32 + sz_part32 < nxt_alloc32) sz_part32 = sz_
 4974              		.loc 1 5848 68 is_stmt 0 discriminator 1 view .LVU1686
 4975 00f2 AED0     		beq	.L359
5848:DRIVER/FatFs/source/ff.c **** 			if (nxt_alloc32 + sz_part32 > sz_drv32 || nxt_alloc32 + sz_part32 < nxt_alloc32) sz_part32 = sz_
 4976              		.loc 1 5848 79 discriminator 2 view .LVU1687
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 213


 4977 00f4 104B     		ldr	r3, .L363+4
 4978 00f6 A3FB0823 		umull	r2, r3, r3, r8
 4979 00fa 5B09     		lsrs	r3, r3, #5
5848:DRIVER/FatFs/source/ff.c **** 			if (nxt_alloc32 + sz_part32 > sz_drv32 || nxt_alloc32 + sz_part32 < nxt_alloc32) sz_part32 = sz_
 4980              		.loc 1 5848 68 discriminator 2 view .LVU1688
 4981 00fc 03FB07F7 		mul	r7, r3, r7
 4982              	.LVL618:
 4983              	.L352:
5849:DRIVER/FatFs/source/ff.c **** 			if (sz_part32 == 0) break;	/* End of table or no sector to allocate? */
 4984              		.loc 1 5849 4 is_stmt 1 view .LVU1689
5849:DRIVER/FatFs/source/ff.c **** 			if (sz_part32 == 0) break;	/* End of table or no sector to allocate? */
 4985              		.loc 1 5849 20 is_stmt 0 view .LVU1690
 4986 0100 EB19     		adds	r3, r5, r7
5849:DRIVER/FatFs/source/ff.c **** 			if (sz_part32 == 0) break;	/* End of table or no sector to allocate? */
 4987              		.loc 1 5849 7 view .LVU1691
 4988 0102 4345     		cmp	r3, r8
 4989 0104 A7D8     		bhi	.L353
5849:DRIVER/FatFs/source/ff.c **** 			if (sz_part32 == 0) break;	/* End of table or no sector to allocate? */
 4990              		.loc 1 5849 43 discriminator 2 view .LVU1692
 4991 0106 AB42     		cmp	r3, r5
 4992 0108 A7D2     		bcs	.L354
 4993 010a A4E7     		b	.L353
 4994              	.LVL619:
 4995              	.L355:
5871:DRIVER/FatFs/source/ff.c **** 		}
5872:DRIVER/FatFs/source/ff.c **** 
5873:DRIVER/FatFs/source/ff.c **** 		st_word(buf + BS_55AA, 0xAA55);		/* MBR signature */
 4996              		.loc 1 5873 3 is_stmt 1 view .LVU1693
 4997 010c 4AF65521 		movw	r1, #43605
 4998 0110 0AF5FF70 		add	r0, r10, #510
 4999 0114 FFF7FEFF 		bl	st_word
 5000              	.LVL620:
5874:DRIVER/FatFs/source/ff.c **** 		if (disk_write(drv, buf, 0, 1) != RES_OK) return FR_DISK_ERR;	/* Write it to the MBR */
 5001              		.loc 1 5874 3 view .LVU1694
 5002              		.loc 1 5874 7 is_stmt 0 view .LVU1695
 5003 0118 0123     		movs	r3, #1
 5004 011a 0022     		movs	r2, #0
 5005 011c 5146     		mov	r1, r10
 5006 011e 0198     		ldr	r0, [sp, #4]
 5007 0120 FFF7FEFF 		bl	disk_write
 5008              	.LVL621:
 5009              		.loc 1 5874 6 view .LVU1696
 5010 0124 20B9     		cbnz	r0, .L362
 5011              	.LVL622:
 5012              	.L346:
5875:DRIVER/FatFs/source/ff.c **** 	}
5876:DRIVER/FatFs/source/ff.c **** 
5877:DRIVER/FatFs/source/ff.c **** 	return FR_OK;
5878:DRIVER/FatFs/source/ff.c **** }
 5013              		.loc 1 5878 1 view .LVU1697
 5014 0126 05B0     		add	sp, sp, #20
 5015              	.LCFI29:
 5016              		.cfi_remember_state
 5017              		.cfi_def_cfa_offset 36
 5018              		@ sp needed
 5019 0128 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 5020              	.LVL623:
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 214


 5021              	.L357:
 5022              	.LCFI30:
 5023              		.cfi_restore_state
5753:DRIVER/FatFs/source/ff.c **** 
 5024              		.loc 1 5753 67 view .LVU1698
 5025 012c 0120     		movs	r0, #1
 5026 012e FAE7     		b	.L346
 5027              	.LVL624:
 5028              	.L362:
5874:DRIVER/FatFs/source/ff.c **** 		if (disk_write(drv, buf, 0, 1) != RES_OK) return FR_DISK_ERR;	/* Write it to the MBR */
 5029              		.loc 1 5874 52 view .LVU1699
 5030 0130 0120     		movs	r0, #1
 5031 0132 F8E7     		b	.L346
 5032              	.L364:
 5033              		.align	2
 5034              	.L363:
 5035 0134 05411004 		.word	68174085
 5036 0138 1F85EB51 		.word	1374389535
 5037              		.cfi_endproc
 5038              	.LFE55:
 5040              		.section	.rodata.create_name.str1.4,"aMS",%progbits,1
 5041              		.align	2
 5042              	.LC1:
 5043 0000 2A3A3C3E 		.ascii	"*:<>|\"?\177\000"
 5043      7C223F7F 
 5043      00
 5044 0009 000000   		.align	2
 5045              	.LC2:
 5046 000c 2B2C3B3D 		.ascii	"+,;=[]\000"
 5046      5B5D00
 5047              		.section	.text.create_name,"ax",%progbits
 5048              		.align	1
 5049              		.syntax unified
 5050              		.thumb
 5051              		.thumb_func
 5053              	create_name:
 5054              	.LVL625:
 5055              	.LFB32:
2851:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN		/* LFN configuration */
 5056              		.loc 1 2851 1 is_stmt 1 view -0
 5057              		.cfi_startproc
 5058              		@ args = 0, pretend = 0, frame = 16
 5059              		@ frame_needed = 0, uses_anonymous_args = 0
2851:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN		/* LFN configuration */
 5060              		.loc 1 2851 1 is_stmt 0 view .LVU1701
 5061 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 5062              	.LCFI31:
 5063              		.cfi_def_cfa_offset 36
 5064              		.cfi_offset 4, -36
 5065              		.cfi_offset 5, -32
 5066              		.cfi_offset 6, -28
 5067              		.cfi_offset 7, -24
 5068              		.cfi_offset 8, -20
 5069              		.cfi_offset 9, -16
 5070              		.cfi_offset 10, -12
 5071              		.cfi_offset 11, -8
 5072              		.cfi_offset 14, -4
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 215


 5073 0004 85B0     		sub	sp, sp, #20
 5074              	.LCFI32:
 5075              		.cfi_def_cfa_offset 56
 5076 0006 0746     		mov	r7, r0
 5077 0008 8946     		mov	r9, r1
2853:DRIVER/FatFs/source/ff.c **** 	WCHAR wc;
 5078              		.loc 1 2853 2 is_stmt 1 view .LVU1702
2854:DRIVER/FatFs/source/ff.c **** 	WCHAR *lfn;
 5079              		.loc 1 2854 2 view .LVU1703
2855:DRIVER/FatFs/source/ff.c **** 	const TCHAR* p;
 5080              		.loc 1 2855 2 view .LVU1704
2856:DRIVER/FatFs/source/ff.c **** 	DWORD uc;
 5081              		.loc 1 2856 2 view .LVU1705
2857:DRIVER/FatFs/source/ff.c **** 	UINT i, ni, si, di;
 5082              		.loc 1 2857 2 view .LVU1706
2858:DRIVER/FatFs/source/ff.c **** 
 5083              		.loc 1 2858 2 view .LVU1707
2862:DRIVER/FatFs/source/ff.c **** 	for (;;) {
 5084              		.loc 1 2862 2 view .LVU1708
2862:DRIVER/FatFs/source/ff.c **** 	for (;;) {
 5085              		.loc 1 2862 6 is_stmt 0 view .LVU1709
 5086 000a 0B68     		ldr	r3, [r1]
2862:DRIVER/FatFs/source/ff.c **** 	for (;;) {
 5087              		.loc 1 2862 4 view .LVU1710
 5088 000c 0393     		str	r3, [sp, #12]
2862:DRIVER/FatFs/source/ff.c **** 	for (;;) {
 5089              		.loc 1 2862 13 is_stmt 1 view .LVU1711
2862:DRIVER/FatFs/source/ff.c **** 	for (;;) {
 5090              		.loc 1 2862 26 is_stmt 0 view .LVU1712
 5091 000e 0368     		ldr	r3, [r0]
2862:DRIVER/FatFs/source/ff.c **** 	for (;;) {
 5092              		.loc 1 2862 17 view .LVU1713
 5093 0010 1D69     		ldr	r5, [r3, #16]
 5094              	.LVL626:
2862:DRIVER/FatFs/source/ff.c **** 	for (;;) {
 5095              		.loc 1 2862 39 is_stmt 1 view .LVU1714
2862:DRIVER/FatFs/source/ff.c **** 	for (;;) {
 5096              		.loc 1 2862 42 is_stmt 0 view .LVU1715
 5097 0012 0024     		movs	r4, #0
 5098 0014 05E0     		b	.L370
 5099              	.LVL627:
 5100              	.L369:
2870:DRIVER/FatFs/source/ff.c **** 		lfn[di++] = wc;				/* Store the Unicode character */
 5101              		.loc 1 2870 3 is_stmt 1 view .LVU1716
2870:DRIVER/FatFs/source/ff.c **** 		lfn[di++] = wc;				/* Store the Unicode character */
 5102              		.loc 1 2870 6 is_stmt 0 view .LVU1717
 5103 0016 FE2C     		cmp	r4, #254
 5104 0018 00F21C81 		bhi	.L409
2871:DRIVER/FatFs/source/ff.c **** 	}
 5105              		.loc 1 2871 3 is_stmt 1 view .LVU1718
 5106              	.LVL628:
2871:DRIVER/FatFs/source/ff.c **** 	}
 5107              		.loc 1 2871 13 is_stmt 0 view .LVU1719
 5108 001c 25F81460 		strh	r6, [r5, r4, lsl #1]	@ movhi
2863:DRIVER/FatFs/source/ff.c **** 		uc = tchar2uni(&p);			/* Get a character */
 5109              		.loc 1 2863 2 is_stmt 1 view .LVU1720
2871:DRIVER/FatFs/source/ff.c **** 	}
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 216


 5110              		.loc 1 2871 9 is_stmt 0 view .LVU1721
 5111 0020 0134     		adds	r4, r4, #1
 5112              	.LVL629:
 5113              	.L370:
2863:DRIVER/FatFs/source/ff.c **** 		uc = tchar2uni(&p);			/* Get a character */
 5114              		.loc 1 2863 2 is_stmt 1 view .LVU1722
2864:DRIVER/FatFs/source/ff.c **** 		if (uc == 0xFFFFFFFF) return FR_INVALID_NAME;		/* Invalid code or UTF decode error */
 5115              		.loc 1 2864 3 view .LVU1723
2864:DRIVER/FatFs/source/ff.c **** 		if (uc == 0xFFFFFFFF) return FR_INVALID_NAME;		/* Invalid code or UTF decode error */
 5116              		.loc 1 2864 8 is_stmt 0 view .LVU1724
 5117 0022 03A8     		add	r0, sp, #12
 5118 0024 FFF7FEFF 		bl	tchar2uni
 5119              	.LVL630:
2865:DRIVER/FatFs/source/ff.c **** 		if (uc >= 0x10000) lfn[di++] = (WCHAR)(uc >> 16);	/* Store high surrogate if needed */
 5120              		.loc 1 2865 3 is_stmt 1 view .LVU1725
2865:DRIVER/FatFs/source/ff.c **** 		if (uc >= 0x10000) lfn[di++] = (WCHAR)(uc >> 16);	/* Store high surrogate if needed */
 5121              		.loc 1 2865 6 is_stmt 0 view .LVU1726
 5122 0028 B0F1FF3F 		cmp	r0, #-1
 5123 002c 00F01081 		beq	.L407
2866:DRIVER/FatFs/source/ff.c **** 		wc = (WCHAR)uc;
 5124              		.loc 1 2866 3 is_stmt 1 view .LVU1727
2866:DRIVER/FatFs/source/ff.c **** 		wc = (WCHAR)uc;
 5125              		.loc 1 2866 6 is_stmt 0 view .LVU1728
 5126 0030 B0F5803F 		cmp	r0, #65536
 5127 0034 03D3     		bcc	.L367
2866:DRIVER/FatFs/source/ff.c **** 		wc = (WCHAR)uc;
 5128              		.loc 1 2866 22 is_stmt 1 discriminator 1 view .LVU1729
 5129              	.LVL631:
2866:DRIVER/FatFs/source/ff.c **** 		wc = (WCHAR)uc;
 5130              		.loc 1 2866 34 is_stmt 0 discriminator 1 view .LVU1730
 5131 0036 030C     		lsrs	r3, r0, #16
2866:DRIVER/FatFs/source/ff.c **** 		wc = (WCHAR)uc;
 5132              		.loc 1 2866 32 discriminator 1 view .LVU1731
 5133 0038 25F81430 		strh	r3, [r5, r4, lsl #1]	@ movhi
2866:DRIVER/FatFs/source/ff.c **** 		wc = (WCHAR)uc;
 5134              		.loc 1 2866 28 discriminator 1 view .LVU1732
 5135 003c 0134     		adds	r4, r4, #1
 5136              	.LVL632:
 5137              	.L367:
2867:DRIVER/FatFs/source/ff.c **** 		if (wc < ' ' || IsSeparator(wc)) break;	/* Break if end of the path or a separator is found */
 5138              		.loc 1 2867 3 is_stmt 1 view .LVU1733
2867:DRIVER/FatFs/source/ff.c **** 		if (wc < ' ' || IsSeparator(wc)) break;	/* Break if end of the path or a separator is found */
 5139              		.loc 1 2867 6 is_stmt 0 view .LVU1734
 5140 003e 86B2     		uxth	r6, r0
 5141              	.LVL633:
2868:DRIVER/FatFs/source/ff.c **** 		if (wc < 0x80 && strchr("*:<>|\"\?\x7F", (int)wc)) return FR_INVALID_NAME;	/* Reject illegal char
 5142              		.loc 1 2868 3 is_stmt 1 view .LVU1735
2868:DRIVER/FatFs/source/ff.c **** 		if (wc < 0x80 && strchr("*:<>|\"\?\x7F", (int)wc)) return FR_INVALID_NAME;	/* Reject illegal char
 5143              		.loc 1 2868 6 is_stmt 0 view .LVU1736
 5144 0040 1F2E     		cmp	r6, #31
 5145 0042 0DD9     		bls	.L368
2868:DRIVER/FatFs/source/ff.c **** 		if (wc < 0x80 && strchr("*:<>|\"\?\x7F", (int)wc)) return FR_INVALID_NAME;	/* Reject illegal char
 5146              		.loc 1 2868 16 discriminator 1 view .LVU1737
 5147 0044 2F2E     		cmp	r6, #47
 5148 0046 0BD0     		beq	.L368
2868:DRIVER/FatFs/source/ff.c **** 		if (wc < 0x80 && strchr("*:<>|\"\?\x7F", (int)wc)) return FR_INVALID_NAME;	/* Reject illegal char
 5149              		.loc 1 2868 19 discriminator 2 view .LVU1738
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 217


 5150 0048 5C2E     		cmp	r6, #92
 5151 004a 09D0     		beq	.L368
2869:DRIVER/FatFs/source/ff.c **** 		if (di >= FF_MAX_LFN) return FR_INVALID_NAME;	/* Reject too long name */
 5152              		.loc 1 2869 3 is_stmt 1 view .LVU1739
2869:DRIVER/FatFs/source/ff.c **** 		if (di >= FF_MAX_LFN) return FR_INVALID_NAME;	/* Reject too long name */
 5153              		.loc 1 2869 6 is_stmt 0 view .LVU1740
 5154 004c 7F2E     		cmp	r6, #127
 5155 004e E2D8     		bhi	.L369
2869:DRIVER/FatFs/source/ff.c **** 		if (di >= FF_MAX_LFN) return FR_INVALID_NAME;	/* Reject too long name */
 5156              		.loc 1 2869 20 discriminator 1 view .LVU1741
 5157 0050 3146     		mov	r1, r6
 5158 0052 8148     		ldr	r0, .L422
 5159              	.LVL634:
2869:DRIVER/FatFs/source/ff.c **** 		if (di >= FF_MAX_LFN) return FR_INVALID_NAME;	/* Reject too long name */
 5160              		.loc 1 2869 20 discriminator 1 view .LVU1742
 5161 0054 FFF7FEFF 		bl	strchr
 5162              	.LVL635:
2869:DRIVER/FatFs/source/ff.c **** 		if (di >= FF_MAX_LFN) return FR_INVALID_NAME;	/* Reject too long name */
 5163              		.loc 1 2869 17 discriminator 1 view .LVU1743
 5164 0058 0028     		cmp	r0, #0
 5165 005a DCD0     		beq	.L369
2869:DRIVER/FatFs/source/ff.c **** 		if (di >= FF_MAX_LFN) return FR_INVALID_NAME;	/* Reject too long name */
 5166              		.loc 1 2869 61 view .LVU1744
 5167 005c 0620     		movs	r0, #6
 5168 005e 9CE0     		b	.L366
 5169              	.LVL636:
 5170              	.L368:
2873:DRIVER/FatFs/source/ff.c **** 		cf = NS_LAST;			/* Last segment */
 5171              		.loc 1 2873 2 is_stmt 1 view .LVU1745
2873:DRIVER/FatFs/source/ff.c **** 		cf = NS_LAST;			/* Last segment */
 5172              		.loc 1 2873 5 is_stmt 0 view .LVU1746
 5173 0060 1F2E     		cmp	r6, #31
 5174 0062 07D8     		bhi	.L372
2874:DRIVER/FatFs/source/ff.c **** 	} else {					/* Stopped at a separator */
 5175              		.loc 1 2874 6 view .LVU1747
 5176 0064 4FF00408 		mov	r8, #4
 5177              	.L371:
 5178              	.LVL637:
2880:DRIVER/FatFs/source/ff.c **** 
 5179              		.loc 1 2880 2 is_stmt 1 view .LVU1748
2880:DRIVER/FatFs/source/ff.c **** 
 5180              		.loc 1 2880 8 is_stmt 0 view .LVU1749
 5181 0068 039B     		ldr	r3, [sp, #12]
 5182 006a C9F80030 		str	r3, [r9]
2893:DRIVER/FatFs/source/ff.c **** 		wc = lfn[di - 1];
 5183              		.loc 1 2893 2 is_stmt 1 view .LVU1750
2893:DRIVER/FatFs/source/ff.c **** 		wc = lfn[di - 1];
 5184              		.loc 1 2893 8 is_stmt 0 view .LVU1751
 5185 006e 10E0     		b	.L374
 5186              	.LVL638:
 5187              	.L373:
2876:DRIVER/FatFs/source/ff.c **** 		cf = 0;					/* Next segment may follow */
 5188              		.loc 1 2876 27 is_stmt 1 discriminator 4 view .LVU1752
2876:DRIVER/FatFs/source/ff.c **** 		cf = 0;					/* Next segment may follow */
 5189              		.loc 1 2876 28 is_stmt 0 discriminator 4 view .LVU1753
 5190 0070 0133     		adds	r3, r3, #1
 5191 0072 0393     		str	r3, [sp, #12]
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 218


 5192              	.L372:
2876:DRIVER/FatFs/source/ff.c **** 		cf = 0;					/* Next segment may follow */
 5193              		.loc 1 2876 10 is_stmt 1 discriminator 1 view .LVU1754
 5194 0074 039B     		ldr	r3, [sp, #12]
 5195 0076 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 5196 0078 2F2A     		cmp	r2, #47
 5197 007a F9D0     		beq	.L373
2876:DRIVER/FatFs/source/ff.c **** 		cf = 0;					/* Next segment may follow */
 5198              		.loc 1 2876 10 is_stmt 0 discriminator 3 view .LVU1755
 5199 007c 5C2A     		cmp	r2, #92
 5200 007e F7D0     		beq	.L373
2877:DRIVER/FatFs/source/ff.c **** 		if (IsTerminator(*p)) cf = NS_LAST;	/* Ignore terminating separator */
 5201              		.loc 1 2877 3 is_stmt 1 view .LVU1756
 5202              	.LVL639:
2878:DRIVER/FatFs/source/ff.c **** 	}
 5203              		.loc 1 2878 3 view .LVU1757
2878:DRIVER/FatFs/source/ff.c **** 	}
 5204              		.loc 1 2878 6 is_stmt 0 view .LVU1758
 5205 0080 1F2A     		cmp	r2, #31
 5206 0082 02D9     		bls	.L411
2877:DRIVER/FatFs/source/ff.c **** 		if (IsTerminator(*p)) cf = NS_LAST;	/* Ignore terminating separator */
 5207              		.loc 1 2877 6 view .LVU1759
 5208 0084 4FF00008 		mov	r8, #0
 5209 0088 EEE7     		b	.L371
 5210              	.L411:
2878:DRIVER/FatFs/source/ff.c **** 	}
 5211              		.loc 1 2878 28 view .LVU1760
 5212 008a 4FF00408 		mov	r8, #4
 5213 008e EBE7     		b	.L371
 5214              	.LVL640:
 5215              	.L375:
2896:DRIVER/FatFs/source/ff.c **** 	}
 5216              		.loc 1 2896 3 is_stmt 1 view .LVU1761
2896:DRIVER/FatFs/source/ff.c **** 	}
 5217              		.loc 1 2896 5 is_stmt 0 view .LVU1762
 5218 0090 013C     		subs	r4, r4, #1
 5219              	.LVL641:
 5220              	.L374:
2893:DRIVER/FatFs/source/ff.c **** 		wc = lfn[di - 1];
 5221              		.loc 1 2893 9 is_stmt 1 view .LVU1763
 5222 0092 44B1     		cbz	r4, .L376
2894:DRIVER/FatFs/source/ff.c **** 		if (wc != ' ' && wc != '.') break;
 5223              		.loc 1 2894 3 view .LVU1764
2894:DRIVER/FatFs/source/ff.c **** 		if (wc != ' ' && wc != '.') break;
 5224              		.loc 1 2894 11 is_stmt 0 view .LVU1765
 5225 0094 04F10043 		add	r3, r4, #-2147483648
 5226 0098 013B     		subs	r3, r3, #1
2894:DRIVER/FatFs/source/ff.c **** 		if (wc != ' ' && wc != '.') break;
 5227              		.loc 1 2894 6 view .LVU1766
 5228 009a 35F81330 		ldrh	r3, [r5, r3, lsl #1]
 5229              	.LVL642:
2895:DRIVER/FatFs/source/ff.c **** 		di--;
 5230              		.loc 1 2895 3 is_stmt 1 view .LVU1767
2895:DRIVER/FatFs/source/ff.c **** 		di--;
 5231              		.loc 1 2895 6 is_stmt 0 view .LVU1768
 5232 009e 202B     		cmp	r3, #32
 5233 00a0 F6D0     		beq	.L375
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 219


2895:DRIVER/FatFs/source/ff.c **** 		di--;
 5234              		.loc 1 2895 17 discriminator 1 view .LVU1769
 5235 00a2 2E2B     		cmp	r3, #46
 5236 00a4 F4D0     		beq	.L375
 5237              	.LVL643:
 5238              	.L376:
2898:DRIVER/FatFs/source/ff.c **** 	if (di == 0) return FR_INVALID_NAME;	/* Reject null name */
 5239              		.loc 1 2898 2 is_stmt 1 view .LVU1770
2898:DRIVER/FatFs/source/ff.c **** 	if (di == 0) return FR_INVALID_NAME;	/* Reject null name */
 5240              		.loc 1 2898 10 is_stmt 0 view .LVU1771
 5241 00a6 0023     		movs	r3, #0
 5242 00a8 25F81430 		strh	r3, [r5, r4, lsl #1]	@ movhi
2899:DRIVER/FatFs/source/ff.c **** 
 5243              		.loc 1 2899 2 is_stmt 1 view .LVU1772
2899:DRIVER/FatFs/source/ff.c **** 
 5244              		.loc 1 2899 5 is_stmt 0 view .LVU1773
 5245 00ac 14B9     		cbnz	r4, .L378
2899:DRIVER/FatFs/source/ff.c **** 
 5246              		.loc 1 2899 22 view .LVU1774
 5247 00ae 0620     		movs	r0, #6
 5248              	.LVL644:
2899:DRIVER/FatFs/source/ff.c **** 
 5249              		.loc 1 2899 22 view .LVU1775
 5250 00b0 73E0     		b	.L366
 5251              	.LVL645:
 5252              	.L379:
2902:DRIVER/FatFs/source/ff.c **** 	if (si > 0 || lfn[si] == '.') cf |= NS_LOSS | NS_LFN;	/* Is there any leading space or dot? */
 5253              		.loc 1 2902 33 is_stmt 1 discriminator 3 view .LVU1776
 5254 00b2 0133     		adds	r3, r3, #1
 5255              	.LVL646:
 5256              	.L378:
2902:DRIVER/FatFs/source/ff.c **** 	if (si > 0 || lfn[si] == '.') cf |= NS_LOSS | NS_LFN;	/* Is there any leading space or dot? */
 5257              		.loc 1 2902 23 discriminator 1 view .LVU1777
2902:DRIVER/FatFs/source/ff.c **** 	if (si > 0 || lfn[si] == '.') cf |= NS_LOSS | NS_LFN;	/* Is there any leading space or dot? */
 5258              		.loc 1 2902 18 is_stmt 0 discriminator 1 view .LVU1778
 5259 00b4 35F81320 		ldrh	r2, [r5, r3, lsl #1]
2902:DRIVER/FatFs/source/ff.c **** 	if (si > 0 || lfn[si] == '.') cf |= NS_LOSS | NS_LFN;	/* Is there any leading space or dot? */
 5260              		.loc 1 2902 23 discriminator 1 view .LVU1779
 5261 00b8 202A     		cmp	r2, #32
 5262 00ba FAD0     		beq	.L379
2903:DRIVER/FatFs/source/ff.c **** 	while (di > 0 && lfn[di - 1] != '.') di--;	/* Find last dot (di<=si: no extension) */
 5263              		.loc 1 2903 2 is_stmt 1 view .LVU1780
2903:DRIVER/FatFs/source/ff.c **** 	while (di > 0 && lfn[di - 1] != '.') di--;	/* Find last dot (di<=si: no extension) */
 5264              		.loc 1 2903 5 is_stmt 0 view .LVU1781
 5265 00bc 0BB9     		cbnz	r3, .L380
2903:DRIVER/FatFs/source/ff.c **** 	while (di > 0 && lfn[di - 1] != '.') di--;	/* Find last dot (di<=si: no extension) */
 5266              		.loc 1 2903 13 discriminator 2 view .LVU1782
 5267 00be 2E2A     		cmp	r2, #46
 5268 00c0 01D1     		bne	.L382
 5269              	.L380:
2903:DRIVER/FatFs/source/ff.c **** 	while (di > 0 && lfn[di - 1] != '.') di--;	/* Find last dot (di<=si: no extension) */
 5270              		.loc 1 2903 32 is_stmt 1 discriminator 3 view .LVU1783
2903:DRIVER/FatFs/source/ff.c **** 	while (di > 0 && lfn[di - 1] != '.') di--;	/* Find last dot (di<=si: no extension) */
 5271              		.loc 1 2903 35 is_stmt 0 discriminator 3 view .LVU1784
 5272 00c2 48F00308 		orr	r8, r8, #3
 5273              	.LVL647:
 5274              	.L382:
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 220


2904:DRIVER/FatFs/source/ff.c **** 
 5275              		.loc 1 2904 16 is_stmt 1 discriminator 1 view .LVU1785
 5276 00c6 44B1     		cbz	r4, .L383
2904:DRIVER/FatFs/source/ff.c **** 
 5277              		.loc 1 2904 22 is_stmt 0 discriminator 2 view .LVU1786
 5278 00c8 04F10042 		add	r2, r4, #-2147483648
 5279 00cc 013A     		subs	r2, r2, #1
 5280 00ce 35F81220 		ldrh	r2, [r5, r2, lsl #1]
2904:DRIVER/FatFs/source/ff.c **** 
 5281              		.loc 1 2904 16 discriminator 2 view .LVU1787
 5282 00d2 2E2A     		cmp	r2, #46
 5283 00d4 01D0     		beq	.L383
2904:DRIVER/FatFs/source/ff.c **** 
 5284              		.loc 1 2904 39 is_stmt 1 discriminator 3 view .LVU1788
2904:DRIVER/FatFs/source/ff.c **** 
 5285              		.loc 1 2904 41 is_stmt 0 discriminator 3 view .LVU1789
 5286 00d6 013C     		subs	r4, r4, #1
 5287              	.LVL648:
2904:DRIVER/FatFs/source/ff.c **** 
 5288              		.loc 1 2904 41 discriminator 3 view .LVU1790
 5289 00d8 F5E7     		b	.L382
 5290              	.L383:
2906:DRIVER/FatFs/source/ff.c **** 	i = b = 0; ni = 8;
 5291              		.loc 1 2906 2 is_stmt 1 view .LVU1791
 5292 00da 4FF02032 		mov	r2, #538976288
 5293 00de 3A62     		str	r2, [r7, #32]	@ unaligned
 5294 00e0 7A62     		str	r2, [r7, #36]	@ unaligned
 5295 00e2 C7F82720 		str	r2, [r7, #39]	@ unaligned
2907:DRIVER/FatFs/source/ff.c **** 	for (;;) {
 5296              		.loc 1 2907 2 view .LVU1792
 5297              	.LVL649:
2907:DRIVER/FatFs/source/ff.c **** 	for (;;) {
 5298              		.loc 1 2907 13 view .LVU1793
2907:DRIVER/FatFs/source/ff.c **** 	for (;;) {
 5299              		.loc 1 2907 16 is_stmt 0 view .LVU1794
 5300 00e6 4FF0080B 		mov	fp, #8
2907:DRIVER/FatFs/source/ff.c **** 	for (;;) {
 5301              		.loc 1 2907 4 view .LVU1795
 5302 00ea 4FF0000A 		mov	r10, #0
2907:DRIVER/FatFs/source/ff.c **** 	for (;;) {
 5303              		.loc 1 2907 8 view .LVU1796
 5304 00ee CDF800A0 		str	r10, [sp]
 5305              	.LVL650:
 5306              	.L385:
2908:DRIVER/FatFs/source/ff.c **** 		wc = lfn[si++];					/* Get an LFN character */
 5307              		.loc 1 2908 2 is_stmt 1 view .LVU1797
2909:DRIVER/FatFs/source/ff.c **** 		if (wc == 0) break;				/* Break on end of the LFN */
 5308              		.loc 1 2909 3 view .LVU1798
2909:DRIVER/FatFs/source/ff.c **** 		if (wc == 0) break;				/* Break on end of the LFN */
 5309              		.loc 1 2909 14 is_stmt 0 view .LVU1799
 5310 00f2 03F10109 		add	r9, r3, #1
 5311              	.LVL651:
2909:DRIVER/FatFs/source/ff.c **** 		if (wc == 0) break;				/* Break on end of the LFN */
 5312              		.loc 1 2909 6 view .LVU1800
 5313 00f6 35F81360 		ldrh	r6, [r5, r3, lsl #1]
 5314              	.LVL652:
2910:DRIVER/FatFs/source/ff.c **** 		if (wc == ' ' || (wc == '.' && si != di)) {	/* Remove embedded spaces and dots */
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 221


 5315              		.loc 1 2910 3 is_stmt 1 view .LVU1801
2910:DRIVER/FatFs/source/ff.c **** 		if (wc == ' ' || (wc == '.' && si != di)) {	/* Remove embedded spaces and dots */
 5316              		.loc 1 2910 6 is_stmt 0 view .LVU1802
 5317 00fa 56B3     		cbz	r6, .L386
2911:DRIVER/FatFs/source/ff.c **** 			cf |= NS_LOSS | NS_LFN;
 5318              		.loc 1 2911 3 is_stmt 1 view .LVU1803
2911:DRIVER/FatFs/source/ff.c **** 			cf |= NS_LOSS | NS_LFN;
 5319              		.loc 1 2911 6 is_stmt 0 view .LVU1804
 5320 00fc 202E     		cmp	r6, #32
 5321 00fe 1BD0     		beq	.L387
2911:DRIVER/FatFs/source/ff.c **** 			cf |= NS_LOSS | NS_LFN;
 5322              		.loc 1 2911 17 discriminator 2 view .LVU1805
 5323 0100 2E2E     		cmp	r6, #46
 5324 0102 17D0     		beq	.L415
 5325              	.L388:
2916:DRIVER/FatFs/source/ff.c **** 			if (ni == 11) {				/* Name extension overflow? */
 5326              		.loc 1 2916 3 is_stmt 1 view .LVU1806
2916:DRIVER/FatFs/source/ff.c **** 			if (ni == 11) {				/* Name extension overflow? */
 5327              		.loc 1 2916 6 is_stmt 0 view .LVU1807
 5328 0104 DA45     		cmp	r10, fp
 5329 0106 1BD2     		bcs	.L390
2916:DRIVER/FatFs/source/ff.c **** 			if (ni == 11) {				/* Name extension overflow? */
 5330              		.loc 1 2916 15 discriminator 1 view .LVU1808
 5331 0108 4C45     		cmp	r4, r9
 5332 010a 19D0     		beq	.L390
2927:DRIVER/FatFs/source/ff.c **** 			cf |= NS_LFN;	/* LFN entry needs to be created */
 5333              		.loc 1 2927 3 is_stmt 1 view .LVU1809
2927:DRIVER/FatFs/source/ff.c **** 			cf |= NS_LFN;	/* LFN entry needs to be created */
 5334              		.loc 1 2927 6 is_stmt 0 view .LVU1810
 5335 010c 7F2E     		cmp	r6, #127
 5336 010e 54D8     		bhi	.L416
 5337              	.LVL653:
 5338              	.L394:
2951:DRIVER/FatFs/source/ff.c **** 				wc = '_'; cf |= NS_LOSS | NS_LFN;/* Lossy conversion */
 5339              		.loc 1 2951 4 is_stmt 1 view .LVU1811
2951:DRIVER/FatFs/source/ff.c **** 				wc = '_'; cf |= NS_LOSS | NS_LFN;/* Lossy conversion */
 5340              		.loc 1 2951 7 is_stmt 0 view .LVU1812
 5341 0110 2EB1     		cbz	r6, .L398
2951:DRIVER/FatFs/source/ff.c **** 				wc = '_'; cf |= NS_LOSS | NS_LFN;/* Lossy conversion */
 5342              		.loc 1 2951 19 discriminator 1 view .LVU1813
 5343 0112 3146     		mov	r1, r6
 5344 0114 5148     		ldr	r0, .L422+4
 5345 0116 FFF7FEFF 		bl	strchr
 5346              	.LVL654:
2951:DRIVER/FatFs/source/ff.c **** 				wc = '_'; cf |= NS_LOSS | NS_LFN;/* Lossy conversion */
 5347              		.loc 1 2951 16 discriminator 1 view .LVU1814
 5348 011a 0028     		cmp	r0, #0
 5349 011c 79D0     		beq	.L399
 5350              	.L398:
2952:DRIVER/FatFs/source/ff.c **** 			} else {
 5351              		.loc 1 2952 5 is_stmt 1 view .LVU1815
 5352              	.LVL655:
2952:DRIVER/FatFs/source/ff.c **** 			} else {
 5353              		.loc 1 2952 15 view .LVU1816
2952:DRIVER/FatFs/source/ff.c **** 			} else {
 5354              		.loc 1 2952 18 is_stmt 0 view .LVU1817
 5355 011e 48F00308 		orr	r8, r8, #3
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 222


 5356              	.LVL656:
2952:DRIVER/FatFs/source/ff.c **** 			} else {
 5357              		.loc 1 2952 8 view .LVU1818
 5358 0122 5F26     		movs	r6, #95
 5359              	.LVL657:
 5360              	.L397:
2962:DRIVER/FatFs/source/ff.c **** 	}
 5361              		.loc 1 2962 3 is_stmt 1 view .LVU1819
2962:DRIVER/FatFs/source/ff.c **** 	}
 5362              		.loc 1 2962 15 is_stmt 0 view .LVU1820
 5363 0124 07EB0A03 		add	r3, r7, r10
 5364 0128 83F82060 		strb	r6, [r3, #32]
2909:DRIVER/FatFs/source/ff.c **** 		if (wc == 0) break;				/* Break on end of the LFN */
 5365              		.loc 1 2909 14 view .LVU1821
 5366 012c 4B46     		mov	r3, r9
2962:DRIVER/FatFs/source/ff.c **** 	}
 5367              		.loc 1 2962 11 view .LVU1822
 5368 012e 0AF1010A 		add	r10, r10, #1
 5369              	.LVL658:
2962:DRIVER/FatFs/source/ff.c **** 	}
 5370              		.loc 1 2962 11 view .LVU1823
 5371 0132 DEE7     		b	.L385
 5372              	.L415:
2911:DRIVER/FatFs/source/ff.c **** 			cf |= NS_LOSS | NS_LFN;
 5373              		.loc 1 2911 31 discriminator 3 view .LVU1824
 5374 0134 4C45     		cmp	r4, r9
 5375 0136 E5D0     		beq	.L388
 5376              	.L387:
2912:DRIVER/FatFs/source/ff.c **** 			continue;
 5377              		.loc 1 2912 4 is_stmt 1 discriminator 4 view .LVU1825
2912:DRIVER/FatFs/source/ff.c **** 			continue;
 5378              		.loc 1 2912 7 is_stmt 0 discriminator 4 view .LVU1826
 5379 0138 48F00308 		orr	r8, r8, #3
 5380              	.LVL659:
2913:DRIVER/FatFs/source/ff.c **** 		}
 5381              		.loc 1 2913 4 is_stmt 1 discriminator 4 view .LVU1827
2909:DRIVER/FatFs/source/ff.c **** 		if (wc == 0) break;				/* Break on end of the LFN */
 5382              		.loc 1 2909 14 is_stmt 0 discriminator 4 view .LVU1828
 5383 013c 4B46     		mov	r3, r9
2913:DRIVER/FatFs/source/ff.c **** 		}
 5384              		.loc 1 2913 4 discriminator 4 view .LVU1829
 5385 013e D8E7     		b	.L385
 5386              	.L390:
2917:DRIVER/FatFs/source/ff.c **** 				cf |= NS_LOSS | NS_LFN;
 5387              		.loc 1 2917 4 is_stmt 1 view .LVU1830
2917:DRIVER/FatFs/source/ff.c **** 				cf |= NS_LOSS | NS_LFN;
 5388              		.loc 1 2917 7 is_stmt 0 view .LVU1831
 5389 0140 BBF10B0F 		cmp	fp, #11
 5390 0144 2CD0     		beq	.L417
2921:DRIVER/FatFs/source/ff.c **** 			if (si > di) break;						/* No name extension? */
 5391              		.loc 1 2921 4 is_stmt 1 view .LVU1832
2921:DRIVER/FatFs/source/ff.c **** 			if (si > di) break;						/* No name extension? */
 5392              		.loc 1 2921 7 is_stmt 0 view .LVU1833
 5393 0146 4C45     		cmp	r4, r9
 5394 0148 01D0     		beq	.L393
2921:DRIVER/FatFs/source/ff.c **** 			if (si > di) break;						/* No name extension? */
 5395              		.loc 1 2921 18 is_stmt 1 discriminator 1 view .LVU1834
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 223


2921:DRIVER/FatFs/source/ff.c **** 			if (si > di) break;						/* No name extension? */
 5396              		.loc 1 2921 21 is_stmt 0 discriminator 1 view .LVU1835
 5397 014a 48F00308 		orr	r8, r8, #3
 5398              	.LVL660:
 5399              	.L393:
2922:DRIVER/FatFs/source/ff.c **** 			si = di; i = 8; ni = 11; b <<= 2;		/* Enter name extension */
 5400              		.loc 1 2922 4 is_stmt 1 view .LVU1836
2922:DRIVER/FatFs/source/ff.c **** 			si = di; i = 8; ni = 11; b <<= 2;		/* Enter name extension */
 5401              		.loc 1 2922 7 is_stmt 0 view .LVU1837
 5402 014e 4C45     		cmp	r4, r9
 5403 0150 29D2     		bcs	.L418
 5404              	.L386:
2965:DRIVER/FatFs/source/ff.c **** 
 5405              		.loc 1 2965 2 is_stmt 1 view .LVU1838
2965:DRIVER/FatFs/source/ff.c **** 
 5406              		.loc 1 2965 12 is_stmt 0 view .LVU1839
 5407 0152 97F82030 		ldrb	r3, [r7, #32]	@ zero_extendqisi2
2965:DRIVER/FatFs/source/ff.c **** 
 5408              		.loc 1 2965 5 view .LVU1840
 5409 0156 E52B     		cmp	r3, #229
 5410 0158 71D0     		beq	.L419
 5411              	.L401:
2967:DRIVER/FatFs/source/ff.c **** 	if ((b & 0x0C) == 0x0C || (b & 0x03) == 0x03) cf |= NS_LFN;	/* LFN entry needs to be created if co
 5412              		.loc 1 2967 2 is_stmt 1 view .LVU1841
2967:DRIVER/FatFs/source/ff.c **** 	if ((b & 0x0C) == 0x0C || (b & 0x03) == 0x03) cf |= NS_LFN;	/* LFN entry needs to be created if co
 5413              		.loc 1 2967 5 is_stmt 0 view .LVU1842
 5414 015a BBF1080F 		cmp	fp, #8
 5415 015e 72D0     		beq	.L420
 5416              	.L402:
2968:DRIVER/FatFs/source/ff.c **** 	if (!(cf & NS_LFN)) {				/* When LFN is in 8.3 format without extended character, NT flags are cre
 5417              		.loc 1 2968 2 is_stmt 1 view .LVU1843
2968:DRIVER/FatFs/source/ff.c **** 	if (!(cf & NS_LFN)) {				/* When LFN is in 8.3 format without extended character, NT flags are cre
 5418              		.loc 1 2968 5 is_stmt 0 view .LVU1844
 5419 0160 009A     		ldr	r2, [sp]
 5420 0162 02F00C03 		and	r3, r2, #12
 5421 0166 0C2B     		cmp	r3, #12
 5422 0168 03D0     		beq	.L403
2968:DRIVER/FatFs/source/ff.c **** 	if (!(cf & NS_LFN)) {				/* When LFN is in 8.3 format without extended character, NT flags are cre
 5423              		.loc 1 2968 25 discriminator 2 view .LVU1845
 5424 016a 02F00303 		and	r3, r2, #3
 5425 016e 032B     		cmp	r3, #3
 5426 0170 01D1     		bne	.L404
 5427              	.L403:
2968:DRIVER/FatFs/source/ff.c **** 	if (!(cf & NS_LFN)) {				/* When LFN is in 8.3 format without extended character, NT flags are cre
 5428              		.loc 1 2968 48 is_stmt 1 discriminator 3 view .LVU1846
2968:DRIVER/FatFs/source/ff.c **** 	if (!(cf & NS_LFN)) {				/* When LFN is in 8.3 format without extended character, NT flags are cre
 5429              		.loc 1 2968 51 is_stmt 0 discriminator 3 view .LVU1847
 5430 0172 48F00208 		orr	r8, r8, #2
 5431              	.LVL661:
 5432              	.L404:
2969:DRIVER/FatFs/source/ff.c **** 		if (b & 0x01) cf |= NS_EXT;		/* NT flag (Extension has small capital letters only) */
 5433              		.loc 1 2969 2 is_stmt 1 view .LVU1848
2969:DRIVER/FatFs/source/ff.c **** 		if (b & 0x01) cf |= NS_EXT;		/* NT flag (Extension has small capital letters only) */
 5434              		.loc 1 2969 5 is_stmt 0 view .LVU1849
 5435 0176 18F0020F 		tst	r8, #2
 5436 017a 0BD1     		bne	.L405
2970:DRIVER/FatFs/source/ff.c **** 		if (b & 0x04) cf |= NS_BODY;	/* NT flag (Body has small capital letters only) */
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 224


 5437              		.loc 1 2970 3 is_stmt 1 view .LVU1850
2970:DRIVER/FatFs/source/ff.c **** 		if (b & 0x04) cf |= NS_BODY;	/* NT flag (Body has small capital letters only) */
 5438              		.loc 1 2970 6 is_stmt 0 view .LVU1851
 5439 017c 009B     		ldr	r3, [sp]
 5440 017e 13F0010F 		tst	r3, #1
 5441 0182 01D0     		beq	.L406
2970:DRIVER/FatFs/source/ff.c **** 		if (b & 0x04) cf |= NS_BODY;	/* NT flag (Body has small capital letters only) */
 5442              		.loc 1 2970 17 is_stmt 1 discriminator 1 view .LVU1852
2970:DRIVER/FatFs/source/ff.c **** 		if (b & 0x04) cf |= NS_BODY;	/* NT flag (Body has small capital letters only) */
 5443              		.loc 1 2970 20 is_stmt 0 discriminator 1 view .LVU1853
 5444 0184 48F01008 		orr	r8, r8, #16
 5445              	.LVL662:
 5446              	.L406:
2971:DRIVER/FatFs/source/ff.c **** 	}
 5447              		.loc 1 2971 3 is_stmt 1 view .LVU1854
2971:DRIVER/FatFs/source/ff.c **** 	}
 5448              		.loc 1 2971 6 is_stmt 0 view .LVU1855
 5449 0188 009B     		ldr	r3, [sp]
 5450 018a 13F0040F 		tst	r3, #4
 5451 018e 01D0     		beq	.L405
2971:DRIVER/FatFs/source/ff.c **** 	}
 5452              		.loc 1 2971 17 is_stmt 1 discriminator 1 view .LVU1856
2971:DRIVER/FatFs/source/ff.c **** 	}
 5453              		.loc 1 2971 20 is_stmt 0 discriminator 1 view .LVU1857
 5454 0190 48F00808 		orr	r8, r8, #8
 5455              	.LVL663:
 5456              	.L405:
2974:DRIVER/FatFs/source/ff.c **** 
 5457              		.loc 1 2974 2 is_stmt 1 view .LVU1858
2974:DRIVER/FatFs/source/ff.c **** 
 5458              		.loc 1 2974 17 is_stmt 0 view .LVU1859
 5459 0194 87F82B80 		strb	r8, [r7, #43]
2976:DRIVER/FatFs/source/ff.c **** 
 5460              		.loc 1 2976 2 is_stmt 1 view .LVU1860
2976:DRIVER/FatFs/source/ff.c **** 
 5461              		.loc 1 2976 9 is_stmt 0 view .LVU1861
 5462 0198 0020     		movs	r0, #0
 5463              	.LVL664:
 5464              	.L366:
3042:DRIVER/FatFs/source/ff.c **** 
 5465              		.loc 1 3042 1 view .LVU1862
 5466 019a 05B0     		add	sp, sp, #20
 5467              	.LCFI33:
 5468              		.cfi_remember_state
 5469              		.cfi_def_cfa_offset 36
 5470              		@ sp needed
 5471 019c BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 5472              	.LVL665:
 5473              	.L417:
 5474              	.LCFI34:
 5475              		.cfi_restore_state
2918:DRIVER/FatFs/source/ff.c **** 				break;
 5476              		.loc 1 2918 5 is_stmt 1 view .LVU1863
2918:DRIVER/FatFs/source/ff.c **** 				break;
 5477              		.loc 1 2918 8 is_stmt 0 view .LVU1864
 5478 01a0 48F00308 		orr	r8, r8, #3
 5479              	.LVL666:
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 225


2919:DRIVER/FatFs/source/ff.c **** 			}
 5480              		.loc 1 2919 5 is_stmt 1 view .LVU1865
 5481 01a4 D5E7     		b	.L386
 5482              	.L418:
2923:DRIVER/FatFs/source/ff.c **** 			continue;
 5483              		.loc 1 2923 4 view .LVU1866
 5484              	.LVL667:
2923:DRIVER/FatFs/source/ff.c **** 			continue;
 5485              		.loc 1 2923 13 view .LVU1867
2923:DRIVER/FatFs/source/ff.c **** 			continue;
 5486              		.loc 1 2923 20 view .LVU1868
2923:DRIVER/FatFs/source/ff.c **** 			continue;
 5487              		.loc 1 2923 29 view .LVU1869
2923:DRIVER/FatFs/source/ff.c **** 			continue;
 5488              		.loc 1 2923 31 is_stmt 0 view .LVU1870
 5489 01a6 009B     		ldr	r3, [sp]
 5490 01a8 9B00     		lsls	r3, r3, #2
 5491 01aa DBB2     		uxtb	r3, r3
 5492 01ac 0093     		str	r3, [sp]
 5493              	.LVL668:
2924:DRIVER/FatFs/source/ff.c **** 		}
 5494              		.loc 1 2924 4 is_stmt 1 view .LVU1871
2923:DRIVER/FatFs/source/ff.c **** 			continue;
 5495              		.loc 1 2923 7 is_stmt 0 view .LVU1872
 5496 01ae 2346     		mov	r3, r4
2923:DRIVER/FatFs/source/ff.c **** 			continue;
 5497              		.loc 1 2923 23 view .LVU1873
 5498 01b0 4FF00B0B 		mov	fp, #11
2923:DRIVER/FatFs/source/ff.c **** 			continue;
 5499              		.loc 1 2923 15 view .LVU1874
 5500 01b4 4FF0080A 		mov	r10, #8
2924:DRIVER/FatFs/source/ff.c **** 		}
 5501              		.loc 1 2924 4 view .LVU1875
 5502 01b8 9BE7     		b	.L385
 5503              	.LVL669:
 5504              	.L416:
2928:DRIVER/FatFs/source/ff.c **** #if FF_CODE_PAGE == 0
 5505              		.loc 1 2928 4 is_stmt 1 view .LVU1876
2928:DRIVER/FatFs/source/ff.c **** #if FF_CODE_PAGE == 0
 5506              		.loc 1 2928 7 is_stmt 0 view .LVU1877
 5507 01ba 48F00203 		orr	r3, r8, #2
 5508 01be 0193     		str	r3, [sp, #4]
 5509              	.LVL670:
2937:DRIVER/FatFs/source/ff.c **** 			if (wc & 0x80) wc = ExCvt[wc & 0x7F];	/* Convert extended character to upper (SBCS) */
 5510              		.loc 1 2937 4 is_stmt 1 view .LVU1878
2937:DRIVER/FatFs/source/ff.c **** 			if (wc & 0x80) wc = ExCvt[wc & 0x7F];	/* Convert extended character to upper (SBCS) */
 5511              		.loc 1 2937 9 is_stmt 0 view .LVU1879
 5512 01c0 40F2B511 		movw	r1, #437
 5513 01c4 3046     		mov	r0, r6
 5514 01c6 FFF7FEFF 		bl	ff_uni2oem
 5515              	.LVL671:
 5516 01ca 0646     		mov	r6, r0
 5517              	.LVL672:
2938:DRIVER/FatFs/source/ff.c **** #else						/* In DBCS cfg */
 5518              		.loc 1 2938 4 is_stmt 1 view .LVU1880
2938:DRIVER/FatFs/source/ff.c **** #else						/* In DBCS cfg */
 5519              		.loc 1 2938 7 is_stmt 0 view .LVU1881
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 226


 5520 01cc 10F0800F 		tst	r0, #128
 5521 01d0 06D0     		beq	.L395
2938:DRIVER/FatFs/source/ff.c **** #else						/* In DBCS cfg */
 5522              		.loc 1 2938 19 is_stmt 1 discriminator 1 view .LVU1882
2938:DRIVER/FatFs/source/ff.c **** #else						/* In DBCS cfg */
 5523              		.loc 1 2938 33 is_stmt 0 discriminator 1 view .LVU1883
 5524 01d2 00F07F06 		and	r6, r0, #127
2938:DRIVER/FatFs/source/ff.c **** #else						/* In DBCS cfg */
 5525              		.loc 1 2938 29 discriminator 1 view .LVU1884
 5526 01d6 224B     		ldr	r3, .L422+8
 5527 01d8 9E5D     		ldrb	r6, [r3, r6]	@ zero_extendqisi2
 5528              	.LVL673:
2944:DRIVER/FatFs/source/ff.c **** 			if (i >= ni - 1) {			/* Field overflow? */
 5529              		.loc 1 2944 3 is_stmt 1 discriminator 1 view .LVU1885
2928:DRIVER/FatFs/source/ff.c **** #if FF_CODE_PAGE == 0
 5530              		.loc 1 2928 7 is_stmt 0 discriminator 1 view .LVU1886
 5531 01da DDF80480 		ldr	r8, [sp, #4]
 5532 01de 97E7     		b	.L394
 5533              	.LVL674:
 5534              	.L395:
2944:DRIVER/FatFs/source/ff.c **** 			if (i >= ni - 1) {			/* Field overflow? */
 5535              		.loc 1 2944 3 is_stmt 1 view .LVU1887
2944:DRIVER/FatFs/source/ff.c **** 			if (i >= ni - 1) {			/* Field overflow? */
 5536              		.loc 1 2944 6 is_stmt 0 view .LVU1888
 5537 01e0 FF28     		cmp	r0, #255
 5538 01e2 13D9     		bls	.L413
2945:DRIVER/FatFs/source/ff.c **** 				cf |= NS_LOSS | NS_LFN;
 5539              		.loc 1 2945 4 is_stmt 1 view .LVU1889
2945:DRIVER/FatFs/source/ff.c **** 				cf |= NS_LOSS | NS_LFN;
 5540              		.loc 1 2945 16 is_stmt 0 view .LVU1890
 5541 01e4 0BF1FF33 		add	r3, fp, #-1
2945:DRIVER/FatFs/source/ff.c **** 				cf |= NS_LOSS | NS_LFN;
 5542              		.loc 1 2945 7 view .LVU1891
 5543 01e8 5345     		cmp	r3, r10
 5544 01ea 0AD9     		bls	.L421
2949:DRIVER/FatFs/source/ff.c **** 		} else {						/* SBC */
 5545              		.loc 1 2949 4 is_stmt 1 view .LVU1892
 5546              	.LVL675:
2949:DRIVER/FatFs/source/ff.c **** 		} else {						/* SBC */
 5547              		.loc 1 2949 18 is_stmt 0 view .LVU1893
 5548 01ec C0F30723 		ubfx	r3, r0, #8, #8
2949:DRIVER/FatFs/source/ff.c **** 		} else {						/* SBC */
 5549              		.loc 1 2949 16 view .LVU1894
 5550 01f0 07EB0A02 		add	r2, r7, r10
 5551 01f4 82F82030 		strb	r3, [r2, #32]
2949:DRIVER/FatFs/source/ff.c **** 		} else {						/* SBC */
 5552              		.loc 1 2949 12 view .LVU1895
 5553 01f8 0AF1010A 		add	r10, r10, #1
 5554              	.LVL676:
2928:DRIVER/FatFs/source/ff.c **** #if FF_CODE_PAGE == 0
 5555              		.loc 1 2928 7 view .LVU1896
 5556 01fc DDF80480 		ldr	r8, [sp, #4]
 5557 0200 90E7     		b	.L397
 5558              	.L421:
2946:DRIVER/FatFs/source/ff.c **** 				i = ni; continue;		/* Next field */
 5559              		.loc 1 2946 5 is_stmt 1 discriminator 1 view .LVU1897
2946:DRIVER/FatFs/source/ff.c **** 				i = ni; continue;		/* Next field */
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 227


 5560              		.loc 1 2946 8 is_stmt 0 discriminator 1 view .LVU1898
 5561 0202 48F00308 		orr	r8, r8, #3
 5562              	.LVL677:
2947:DRIVER/FatFs/source/ff.c **** 			}
 5563              		.loc 1 2947 5 is_stmt 1 discriminator 1 view .LVU1899
2947:DRIVER/FatFs/source/ff.c **** 			}
 5564              		.loc 1 2947 13 discriminator 1 view .LVU1900
2909:DRIVER/FatFs/source/ff.c **** 		if (wc == 0) break;				/* Break on end of the LFN */
 5565              		.loc 1 2909 14 is_stmt 0 discriminator 1 view .LVU1901
 5566 0206 4B46     		mov	r3, r9
2947:DRIVER/FatFs/source/ff.c **** 			}
 5567              		.loc 1 2947 7 discriminator 1 view .LVU1902
 5568 0208 DA46     		mov	r10, fp
2947:DRIVER/FatFs/source/ff.c **** 			}
 5569              		.loc 1 2947 13 discriminator 1 view .LVU1903
 5570 020a 72E7     		b	.L385
 5571              	.LVL678:
 5572              	.L413:
2928:DRIVER/FatFs/source/ff.c **** #if FF_CODE_PAGE == 0
 5573              		.loc 1 2928 7 view .LVU1904
 5574 020c DDF80480 		ldr	r8, [sp, #4]
 5575 0210 7EE7     		b	.L394
 5576              	.LVL679:
 5577              	.L399:
2954:DRIVER/FatFs/source/ff.c **** 					b |= 2;
 5578              		.loc 1 2954 5 is_stmt 1 view .LVU1905
2954:DRIVER/FatFs/source/ff.c **** 					b |= 2;
 5579              		.loc 1 2954 9 is_stmt 0 view .LVU1906
 5580 0212 A6F14103 		sub	r3, r6, #65
 5581 0216 9BB2     		uxth	r3, r3
2954:DRIVER/FatFs/source/ff.c **** 					b |= 2;
 5582              		.loc 1 2954 8 view .LVU1907
 5583 0218 192B     		cmp	r3, #25
 5584 021a 03D8     		bhi	.L400
2955:DRIVER/FatFs/source/ff.c **** 				}
 5585              		.loc 1 2955 6 is_stmt 1 view .LVU1908
2955:DRIVER/FatFs/source/ff.c **** 				}
 5586              		.loc 1 2955 8 is_stmt 0 view .LVU1909
 5587 021c 009B     		ldr	r3, [sp]
 5588 021e 43F00203 		orr	r3, r3, #2
 5589 0222 0093     		str	r3, [sp]
 5590              	.LVL680:
 5591              	.L400:
2957:DRIVER/FatFs/source/ff.c **** 					b |= 1; wc -= 0x20;
 5592              		.loc 1 2957 5 is_stmt 1 view .LVU1910
2957:DRIVER/FatFs/source/ff.c **** 					b |= 1; wc -= 0x20;
 5593              		.loc 1 2957 9 is_stmt 0 view .LVU1911
 5594 0224 A6F16103 		sub	r3, r6, #97
 5595 0228 9BB2     		uxth	r3, r3
2957:DRIVER/FatFs/source/ff.c **** 					b |= 1; wc -= 0x20;
 5596              		.loc 1 2957 8 view .LVU1912
 5597 022a 192B     		cmp	r3, #25
 5598 022c 3FF67AAF 		bhi	.L397
2958:DRIVER/FatFs/source/ff.c **** 				}
 5599              		.loc 1 2958 6 is_stmt 1 view .LVU1913
2958:DRIVER/FatFs/source/ff.c **** 				}
 5600              		.loc 1 2958 8 is_stmt 0 view .LVU1914
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 228


 5601 0230 009B     		ldr	r3, [sp]
 5602 0232 43F00103 		orr	r3, r3, #1
 5603 0236 0093     		str	r3, [sp]
 5604              	.LVL681:
2958:DRIVER/FatFs/source/ff.c **** 				}
 5605              		.loc 1 2958 14 is_stmt 1 view .LVU1915
2958:DRIVER/FatFs/source/ff.c **** 				}
 5606              		.loc 1 2958 17 is_stmt 0 view .LVU1916
 5607 0238 203E     		subs	r6, r6, #32
 5608 023a B6B2     		uxth	r6, r6
 5609              	.LVL682:
2958:DRIVER/FatFs/source/ff.c **** 				}
 5610              		.loc 1 2958 17 view .LVU1917
 5611 023c 72E7     		b	.L397
 5612              	.LVL683:
 5613              	.L419:
2965:DRIVER/FatFs/source/ff.c **** 
 5614              		.loc 1 2965 25 is_stmt 1 discriminator 1 view .LVU1918
2965:DRIVER/FatFs/source/ff.c **** 
 5615              		.loc 1 2965 35 is_stmt 0 discriminator 1 view .LVU1919
 5616 023e 0523     		movs	r3, #5
 5617 0240 87F82030 		strb	r3, [r7, #32]
 5618 0244 89E7     		b	.L401
 5619              	.L420:
2967:DRIVER/FatFs/source/ff.c **** 	if ((b & 0x0C) == 0x0C || (b & 0x03) == 0x03) cf |= NS_LFN;	/* LFN entry needs to be created if co
 5620              		.loc 1 2967 15 is_stmt 1 discriminator 1 view .LVU1920
2967:DRIVER/FatFs/source/ff.c **** 	if ((b & 0x0C) == 0x0C || (b & 0x03) == 0x03) cf |= NS_LFN;	/* LFN entry needs to be created if co
 5621              		.loc 1 2967 17 is_stmt 0 discriminator 1 view .LVU1921
 5622 0246 009B     		ldr	r3, [sp]
 5623 0248 9B00     		lsls	r3, r3, #2
 5624 024a DBB2     		uxtb	r3, r3
 5625 024c 0093     		str	r3, [sp]
 5626              	.LVL684:
2967:DRIVER/FatFs/source/ff.c **** 	if ((b & 0x0C) == 0x0C || (b & 0x03) == 0x03) cf |= NS_LFN;	/* LFN entry needs to be created if co
 5627              		.loc 1 2967 17 discriminator 1 view .LVU1922
 5628 024e 87E7     		b	.L402
 5629              	.LVL685:
 5630              	.L407:
2865:DRIVER/FatFs/source/ff.c **** 		if (uc >= 0x10000) lfn[di++] = (WCHAR)(uc >> 16);	/* Store high surrogate if needed */
 5631              		.loc 1 2865 32 view .LVU1923
 5632 0250 0620     		movs	r0, #6
 5633              	.LVL686:
2865:DRIVER/FatFs/source/ff.c **** 		if (uc >= 0x10000) lfn[di++] = (WCHAR)(uc >> 16);	/* Store high surrogate if needed */
 5634              		.loc 1 2865 32 view .LVU1924
 5635 0252 A2E7     		b	.L366
 5636              	.LVL687:
 5637              	.L409:
2870:DRIVER/FatFs/source/ff.c **** 		lfn[di++] = wc;				/* Store the Unicode character */
 5638              		.loc 1 2870 32 view .LVU1925
 5639 0254 0620     		movs	r0, #6
 5640 0256 A0E7     		b	.L366
 5641              	.L423:
 5642              		.align	2
 5643              	.L422:
 5644 0258 00000000 		.word	.LC1
 5645 025c 0C000000 		.word	.LC2
 5646 0260 00000000 		.word	ExCvt
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 229


 5647              		.cfi_endproc
 5648              	.LFE32:
 5650              		.section	.text.cmp_lfn,"ax",%progbits
 5651              		.align	1
 5652              		.syntax unified
 5653              		.thumb
 5654              		.thumb_func
 5656              	cmp_lfn:
 5657              	.LVL688:
 5658              	.LFB22:
1889:DRIVER/FatFs/source/ff.c **** 	UINT i, s;
 5659              		.loc 1 1889 1 is_stmt 1 view -0
 5660              		.cfi_startproc
 5661              		@ args = 0, pretend = 0, frame = 0
 5662              		@ frame_needed = 0, uses_anonymous_args = 0
1889:DRIVER/FatFs/source/ff.c **** 	UINT i, s;
 5663              		.loc 1 1889 1 is_stmt 0 view .LVU1927
 5664 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 5665              	.LCFI35:
 5666              		.cfi_def_cfa_offset 32
 5667              		.cfi_offset 4, -32
 5668              		.cfi_offset 5, -28
 5669              		.cfi_offset 6, -24
 5670              		.cfi_offset 7, -20
 5671              		.cfi_offset 8, -16
 5672              		.cfi_offset 9, -12
 5673              		.cfi_offset 10, -8
 5674              		.cfi_offset 14, -4
 5675 0004 8146     		mov	r9, r0
 5676 0006 0F46     		mov	r7, r1
1890:DRIVER/FatFs/source/ff.c **** 	WCHAR wc, uc;
 5677              		.loc 1 1890 2 is_stmt 1 view .LVU1928
1891:DRIVER/FatFs/source/ff.c **** 
 5678              		.loc 1 1891 2 view .LVU1929
1894:DRIVER/FatFs/source/ff.c **** 
 5679              		.loc 1 1894 2 view .LVU1930
1894:DRIVER/FatFs/source/ff.c **** 
 5680              		.loc 1 1894 6 is_stmt 0 view .LVU1931
 5681 0008 01F11A00 		add	r0, r1, #26
 5682              	.LVL689:
1894:DRIVER/FatFs/source/ff.c **** 
 5683              		.loc 1 1894 6 view .LVU1932
 5684 000c FFF7FEFF 		bl	ld_word
 5685              	.LVL690:
1894:DRIVER/FatFs/source/ff.c **** 
 5686              		.loc 1 1894 5 view .LVU1933
 5687 0010 C8BB     		cbnz	r0, .L431
1896:DRIVER/FatFs/source/ff.c **** 
 5688              		.loc 1 1896 2 is_stmt 1 view .LVU1934
1896:DRIVER/FatFs/source/ff.c **** 
 5689              		.loc 1 1896 11 is_stmt 0 view .LVU1935
 5690 0012 3E78     		ldrb	r6, [r7]	@ zero_extendqisi2
1896:DRIVER/FatFs/source/ff.c **** 
 5691              		.loc 1 1896 22 view .LVU1936
 5692 0014 06F03F06 		and	r6, r6, #63
1896:DRIVER/FatFs/source/ff.c **** 
 5693              		.loc 1 1896 30 view .LVU1937
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 230


 5694 0018 013E     		subs	r6, r6, #1
1896:DRIVER/FatFs/source/ff.c **** 
 5695              		.loc 1 1896 35 view .LVU1938
 5696 001a 06EB4603 		add	r3, r6, r6, lsl #1
1896:DRIVER/FatFs/source/ff.c **** 
 5697              		.loc 1 1896 4 view .LVU1939
 5698 001e 06EB8306 		add	r6, r6, r3, lsl #2
 5699              	.LVL691:
1898:DRIVER/FatFs/source/ff.c **** 		uc = ld_word(dir + LfnOfs[s]);		/* Pick an LFN character */
 5700              		.loc 1 1898 2 is_stmt 1 view .LVU1940
1898:DRIVER/FatFs/source/ff.c **** 		uc = ld_word(dir + LfnOfs[s]);		/* Pick an LFN character */
 5701              		.loc 1 1898 10 is_stmt 0 view .LVU1941
 5702 0022 4FF00108 		mov	r8, #1
1898:DRIVER/FatFs/source/ff.c **** 		uc = ld_word(dir + LfnOfs[s]);		/* Pick an LFN character */
 5703              		.loc 1 1898 17 view .LVU1942
 5704 0026 0025     		movs	r5, #0
1898:DRIVER/FatFs/source/ff.c **** 		uc = ld_word(dir + LfnOfs[s]);		/* Pick an LFN character */
 5705              		.loc 1 1898 2 view .LVU1943
 5706 0028 06E0     		b	.L426
 5707              	.LVL692:
 5708              	.L428:
1902:DRIVER/FatFs/source/ff.c **** 			}
 5709              		.loc 1 1902 5 is_stmt 1 view .LVU1944
1902:DRIVER/FatFs/source/ff.c **** 			}
 5710              		.loc 1 1902 12 is_stmt 0 view .LVU1945
 5711 002a 0020     		movs	r0, #0
 5712 002c 2CE0     		b	.L424
 5713              	.LVL693:
 5714              	.L427:
1906:DRIVER/FatFs/source/ff.c **** 		}
 5715              		.loc 1 1906 4 is_stmt 1 view .LVU1946
1906:DRIVER/FatFs/source/ff.c **** 		}
 5716              		.loc 1 1906 7 is_stmt 0 view .LVU1947
 5717 002e 4FF6FF73 		movw	r3, #65535
 5718 0032 9842     		cmp	r0, r3
 5719 0034 2AD1     		bne	.L438
 5720              	.LVL694:
 5721              	.L429:
1898:DRIVER/FatFs/source/ff.c **** 		uc = ld_word(dir + LfnOfs[s]);		/* Pick an LFN character */
 5722              		.loc 1 1898 31 is_stmt 1 discriminator 2 view .LVU1948
 5723 0036 0135     		adds	r5, r5, #1
 5724              	.LVL695:
 5725              	.L426:
1898:DRIVER/FatFs/source/ff.c **** 		uc = ld_word(dir + LfnOfs[s]);		/* Pick an LFN character */
 5726              		.loc 1 1898 24 discriminator 1 view .LVU1949
 5727 0038 0C2D     		cmp	r5, #12
 5728 003a 18D8     		bhi	.L439
1899:DRIVER/FatFs/source/ff.c **** 		if (wc != 0) {
 5729              		.loc 1 1899 3 view .LVU1950
1899:DRIVER/FatFs/source/ff.c **** 		if (wc != 0) {
 5730              		.loc 1 1899 28 is_stmt 0 view .LVU1951
 5731 003c 174B     		ldr	r3, .L440
 5732 003e 585D     		ldrb	r0, [r3, r5]	@ zero_extendqisi2
1899:DRIVER/FatFs/source/ff.c **** 		if (wc != 0) {
 5733              		.loc 1 1899 8 view .LVU1952
 5734 0040 3844     		add	r0, r0, r7
 5735 0042 FFF7FEFF 		bl	ld_word
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 231


 5736              	.LVL696:
 5737 0046 0446     		mov	r4, r0
 5738              	.LVL697:
1900:DRIVER/FatFs/source/ff.c **** 			if (i >= FF_MAX_LFN + 1 || ff_wtoupper(uc) != ff_wtoupper(lfnbuf[i++])) {	/* Compare it */
 5739              		.loc 1 1900 3 is_stmt 1 view .LVU1953
1900:DRIVER/FatFs/source/ff.c **** 			if (i >= FF_MAX_LFN + 1 || ff_wtoupper(uc) != ff_wtoupper(lfnbuf[i++])) {	/* Compare it */
 5740              		.loc 1 1900 6 is_stmt 0 view .LVU1954
 5741 0048 B8F1000F 		cmp	r8, #0
 5742 004c EFD0     		beq	.L427
1901:DRIVER/FatFs/source/ff.c **** 				return 0;					/* Not matched */
 5743              		.loc 1 1901 4 is_stmt 1 view .LVU1955
1901:DRIVER/FatFs/source/ff.c **** 				return 0;					/* Not matched */
 5744              		.loc 1 1901 7 is_stmt 0 view .LVU1956
 5745 004e FF2E     		cmp	r6, #255
 5746 0050 EBD8     		bhi	.L428
1901:DRIVER/FatFs/source/ff.c **** 				return 0;					/* Not matched */
 5747              		.loc 1 1901 31 discriminator 1 view .LVU1957
 5748 0052 FFF7FEFF 		bl	ff_wtoupper
 5749              	.LVL698:
1901:DRIVER/FatFs/source/ff.c **** 				return 0;					/* Not matched */
 5750              		.loc 1 1901 31 discriminator 1 view .LVU1958
 5751 0056 8046     		mov	r8, r0
 5752              	.LVL699:
1901:DRIVER/FatFs/source/ff.c **** 				return 0;					/* Not matched */
 5753              		.loc 1 1901 70 discriminator 1 view .LVU1959
 5754 0058 06F1010A 		add	r10, r6, #1
 5755              	.LVL700:
1901:DRIVER/FatFs/source/ff.c **** 				return 0;					/* Not matched */
 5756              		.loc 1 1901 50 discriminator 1 view .LVU1960
 5757 005c 39F81600 		ldrh	r0, [r9, r6, lsl #1]
 5758 0060 FFF7FEFF 		bl	ff_wtoupper
 5759              	.LVL701:
1901:DRIVER/FatFs/source/ff.c **** 				return 0;					/* Not matched */
 5760              		.loc 1 1901 28 discriminator 1 view .LVU1961
 5761 0064 8045     		cmp	r8, r0
 5762 0066 E0D1     		bne	.L428
1904:DRIVER/FatFs/source/ff.c **** 		} else {
 5763              		.loc 1 1904 7 view .LVU1962
 5764 0068 A046     		mov	r8, r4
1901:DRIVER/FatFs/source/ff.c **** 				return 0;					/* Not matched */
 5765              		.loc 1 1901 70 view .LVU1963
 5766 006a 5646     		mov	r6, r10
 5767 006c E3E7     		b	.L429
 5768              	.LVL702:
 5769              	.L439:
1910:DRIVER/FatFs/source/ff.c **** 
 5770              		.loc 1 1910 2 is_stmt 1 view .LVU1964
1910:DRIVER/FatFs/source/ff.c **** 
 5771              		.loc 1 1910 10 is_stmt 0 view .LVU1965
 5772 006e 3B78     		ldrb	r3, [r7]	@ zero_extendqisi2
1910:DRIVER/FatFs/source/ff.c **** 
 5773              		.loc 1 1910 5 view .LVU1966
 5774 0070 13F0400F 		tst	r3, #64
 5775 0074 0CD0     		beq	.L434
1910:DRIVER/FatFs/source/ff.c **** 
 5776              		.loc 1 1910 29 discriminator 1 view .LVU1967
 5777 0076 B8F1000F 		cmp	r8, #0
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 232


 5778 007a 0BD0     		beq	.L435
1910:DRIVER/FatFs/source/ff.c **** 
 5779              		.loc 1 1910 44 discriminator 2 view .LVU1968
 5780 007c 39F81630 		ldrh	r3, [r9, r6, lsl #1]
1910:DRIVER/FatFs/source/ff.c **** 
 5781              		.loc 1 1910 35 discriminator 2 view .LVU1969
 5782 0080 53B9     		cbnz	r3, .L436
1912:DRIVER/FatFs/source/ff.c **** }
 5783              		.loc 1 1912 9 view .LVU1970
 5784 0082 0120     		movs	r0, #1
 5785 0084 00E0     		b	.L424
 5786              	.LVL703:
 5787              	.L431:
1894:DRIVER/FatFs/source/ff.c **** 
 5788              		.loc 1 1894 49 view .LVU1971
 5789 0086 0020     		movs	r0, #0
 5790              	.L424:
1913:DRIVER/FatFs/source/ff.c **** 
 5791              		.loc 1 1913 1 view .LVU1972
 5792 0088 BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 5793              	.LVL704:
 5794              	.L438:
1906:DRIVER/FatFs/source/ff.c **** 		}
 5795              		.loc 1 1906 29 view .LVU1973
 5796 008c 0020     		movs	r0, #0
 5797              	.LVL705:
1906:DRIVER/FatFs/source/ff.c **** 		}
 5798              		.loc 1 1906 29 view .LVU1974
 5799 008e FBE7     		b	.L424
 5800              	.LVL706:
 5801              	.L434:
1912:DRIVER/FatFs/source/ff.c **** }
 5802              		.loc 1 1912 9 view .LVU1975
 5803 0090 0120     		movs	r0, #1
 5804 0092 F9E7     		b	.L424
 5805              	.L435:
 5806 0094 0120     		movs	r0, #1
 5807 0096 F7E7     		b	.L424
 5808              	.L436:
1910:DRIVER/FatFs/source/ff.c **** 
 5809              		.loc 1 1910 56 view .LVU1976
 5810 0098 0020     		movs	r0, #0
 5811 009a F5E7     		b	.L424
 5812              	.L441:
 5813              		.align	2
 5814              	.L440:
 5815 009c 00000000 		.word	LfnOfs
 5816              		.cfi_endproc
 5817              	.LFE22:
 5819              		.section	.text.dir_find,"ax",%progbits
 5820              		.align	1
 5821              		.syntax unified
 5822              		.thumb
 5823              		.thumb_func
 5825              	dir_find:
 5826              	.LVL707:
 5827              	.LFB28:
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 233


2387:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
 5828              		.loc 1 2387 1 is_stmt 1 view -0
 5829              		.cfi_startproc
 5830              		@ args = 0, pretend = 0, frame = 0
 5831              		@ frame_needed = 0, uses_anonymous_args = 0
2387:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
 5832              		.loc 1 2387 1 is_stmt 0 view .LVU1978
 5833 0000 2DE9F843 		push	{r3, r4, r5, r6, r7, r8, r9, lr}
 5834              	.LCFI36:
 5835              		.cfi_def_cfa_offset 32
 5836              		.cfi_offset 3, -32
 5837              		.cfi_offset 4, -28
 5838              		.cfi_offset 5, -24
 5839              		.cfi_offset 6, -20
 5840              		.cfi_offset 7, -16
 5841              		.cfi_offset 8, -12
 5842              		.cfi_offset 9, -8
 5843              		.cfi_offset 14, -4
 5844 0004 0446     		mov	r4, r0
2388:DRIVER/FatFs/source/ff.c **** 	FATFS *fs = dp->obj.fs;
 5845              		.loc 1 2388 2 is_stmt 1 view .LVU1979
2389:DRIVER/FatFs/source/ff.c **** 	BYTE c;
 5846              		.loc 1 2389 2 view .LVU1980
2389:DRIVER/FatFs/source/ff.c **** 	BYTE c;
 5847              		.loc 1 2389 9 is_stmt 0 view .LVU1981
 5848 0006 D0F80080 		ldr	r8, [r0]
 5849              	.LVL708:
2390:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN
 5850              		.loc 1 2390 2 is_stmt 1 view .LVU1982
2392:DRIVER/FatFs/source/ff.c **** #endif
 5851              		.loc 1 2392 2 view .LVU1983
2395:DRIVER/FatFs/source/ff.c **** 	if (res != FR_OK) return res;
 5852              		.loc 1 2395 2 view .LVU1984
2395:DRIVER/FatFs/source/ff.c **** 	if (res != FR_OK) return res;
 5853              		.loc 1 2395 8 is_stmt 0 view .LVU1985
 5854 000a 0021     		movs	r1, #0
 5855 000c FFF7FEFF 		bl	dir_sdi
 5856              	.LVL709:
2396:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
 5857              		.loc 1 2396 2 is_stmt 1 view .LVU1986
2396:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
 5858              		.loc 1 2396 5 is_stmt 0 view .LVU1987
 5859 0010 0646     		mov	r6, r0
 5860 0012 0028     		cmp	r0, #0
 5861 0014 64D1     		bne	.L443
2419:DRIVER/FatFs/source/ff.c **** #endif
 5862              		.loc 1 2419 2 is_stmt 1 view .LVU1988
 5863              	.LVL710:
2419:DRIVER/FatFs/source/ff.c **** #endif
 5864              		.loc 1 2419 20 view .LVU1989
2419:DRIVER/FatFs/source/ff.c **** #endif
 5865              		.loc 1 2419 32 is_stmt 0 view .LVU1990
 5866 0016 4FF0FF33 		mov	r3, #-1
 5867 001a E362     		str	r3, [r4, #44]
2419:DRIVER/FatFs/source/ff.c **** #endif
 5868              		.loc 1 2419 12 view .LVU1991
 5869 001c 4FF0FF09 		mov	r9, #255
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 234


2419:DRIVER/FatFs/source/ff.c **** #endif
 5870              		.loc 1 2419 6 view .LVU1992
 5871 0020 4F46     		mov	r7, r9
 5872 0022 0AE0     		b	.L452
 5873              	.LVL711:
 5874              	.L444:
2429:DRIVER/FatFs/source/ff.c **** 		} else {
 5875              		.loc 1 2429 4 is_stmt 1 view .LVU1993
2429:DRIVER/FatFs/source/ff.c **** 		} else {
 5876              		.loc 1 2429 16 view .LVU1994
2429:DRIVER/FatFs/source/ff.c **** 		} else {
 5877              		.loc 1 2429 28 is_stmt 0 view .LVU1995
 5878 0024 4FF0FF33 		mov	r3, #-1
 5879              	.LVL712:
2429:DRIVER/FatFs/source/ff.c **** 		} else {
 5880              		.loc 1 2429 28 view .LVU1996
 5881 0028 E362     		str	r3, [r4, #44]
2429:DRIVER/FatFs/source/ff.c **** 		} else {
 5882              		.loc 1 2429 8 view .LVU1997
 5883 002a FF27     		movs	r7, #255
 5884              	.LVL713:
 5885              	.L447:
2451:DRIVER/FatFs/source/ff.c **** 	} while (res == FR_OK);
 5886              		.loc 1 2451 3 is_stmt 1 view .LVU1998
2451:DRIVER/FatFs/source/ff.c **** 	} while (res == FR_OK);
 5887              		.loc 1 2451 9 is_stmt 0 view .LVU1999
 5888 002c 0021     		movs	r1, #0
 5889 002e 2046     		mov	r0, r4
 5890 0030 FFF7FEFF 		bl	dir_next
 5891              	.LVL714:
2452:DRIVER/FatFs/source/ff.c **** 
 5892              		.loc 1 2452 15 is_stmt 1 view .LVU2000
 5893 0034 0646     		mov	r6, r0
 5894 0036 0028     		cmp	r0, #0
 5895 0038 52D1     		bne	.L443
 5896              	.LVL715:
 5897              	.L452:
2421:DRIVER/FatFs/source/ff.c **** 		res = move_window(fs, dp->sect);
 5898              		.loc 1 2421 2 view .LVU2001
2422:DRIVER/FatFs/source/ff.c **** 		if (res != FR_OK) break;
 5899              		.loc 1 2422 3 view .LVU2002
2422:DRIVER/FatFs/source/ff.c **** 		if (res != FR_OK) break;
 5900              		.loc 1 2422 9 is_stmt 0 view .LVU2003
 5901 003a A169     		ldr	r1, [r4, #24]
 5902 003c 4046     		mov	r0, r8
 5903              	.LVL716:
2422:DRIVER/FatFs/source/ff.c **** 		if (res != FR_OK) break;
 5904              		.loc 1 2422 9 view .LVU2004
 5905 003e FFF7FEFF 		bl	move_window
 5906              	.LVL717:
2423:DRIVER/FatFs/source/ff.c **** 		c = dp->dir[DIR_Name];
 5907              		.loc 1 2423 3 is_stmt 1 view .LVU2005
2423:DRIVER/FatFs/source/ff.c **** 		c = dp->dir[DIR_Name];
 5908              		.loc 1 2423 6 is_stmt 0 view .LVU2006
 5909 0042 0646     		mov	r6, r0
 5910 0044 0028     		cmp	r0, #0
 5911 0046 4BD1     		bne	.L443
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 235


2424:DRIVER/FatFs/source/ff.c **** 		if (c == 0) { res = FR_NO_FILE; break; }	/* Reached to end of table */
 5912              		.loc 1 2424 3 is_stmt 1 view .LVU2007
2424:DRIVER/FatFs/source/ff.c **** 		if (c == 0) { res = FR_NO_FILE; break; }	/* Reached to end of table */
 5913              		.loc 1 2424 9 is_stmt 0 view .LVU2008
 5914 0048 E569     		ldr	r5, [r4, #28]
2424:DRIVER/FatFs/source/ff.c **** 		if (c == 0) { res = FR_NO_FILE; break; }	/* Reached to end of table */
 5915              		.loc 1 2424 5 view .LVU2009
 5916 004a 2B78     		ldrb	r3, [r5]	@ zero_extendqisi2
 5917              	.LVL718:
2425:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN		/* LFN configuration */
 5918              		.loc 1 2425 3 is_stmt 1 view .LVU2010
2425:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN		/* LFN configuration */
 5919              		.loc 1 2425 6 is_stmt 0 view .LVU2011
 5920 004c 002B     		cmp	r3, #0
 5921 004e 46D0     		beq	.L453
2427:DRIVER/FatFs/source/ff.c **** 		if (c == DDEM || ((a & AM_VOL) && a != AM_LFN)) {	/* An entry without valid data */
 5922              		.loc 1 2427 3 is_stmt 1 view .LVU2012
2427:DRIVER/FatFs/source/ff.c **** 		if (c == DDEM || ((a & AM_VOL) && a != AM_LFN)) {	/* An entry without valid data */
 5923              		.loc 1 2427 29 is_stmt 0 view .LVU2013
 5924 0050 EA7A     		ldrb	r2, [r5, #11]	@ zero_extendqisi2
2427:DRIVER/FatFs/source/ff.c **** 		if (c == DDEM || ((a & AM_VOL) && a != AM_LFN)) {	/* An entry without valid data */
 5925              		.loc 1 2427 20 view .LVU2014
 5926 0052 02F03F01 		and	r1, r2, #63
 5927              	.LVL719:
2427:DRIVER/FatFs/source/ff.c **** 		if (c == DDEM || ((a & AM_VOL) && a != AM_LFN)) {	/* An entry without valid data */
 5928              		.loc 1 2427 16 view .LVU2015
 5929 0056 A171     		strb	r1, [r4, #6]
2428:DRIVER/FatFs/source/ff.c **** 			ord = 0xFF; dp->blk_ofs = 0xFFFFFFFF;	/* Reset LFN sequence */
 5930              		.loc 1 2428 3 is_stmt 1 view .LVU2016
2428:DRIVER/FatFs/source/ff.c **** 			ord = 0xFF; dp->blk_ofs = 0xFFFFFFFF;	/* Reset LFN sequence */
 5931              		.loc 1 2428 6 is_stmt 0 view .LVU2017
 5932 0058 E52B     		cmp	r3, #229
 5933 005a E3D0     		beq	.L444
2428:DRIVER/FatFs/source/ff.c **** 			ord = 0xFF; dp->blk_ofs = 0xFFFFFFFF;	/* Reset LFN sequence */
 5934              		.loc 1 2428 17 discriminator 1 view .LVU2018
 5935 005c 12F0080F 		tst	r2, #8
 5936 0060 14D0     		beq	.L445
2428:DRIVER/FatFs/source/ff.c **** 			ord = 0xFF; dp->blk_ofs = 0xFFFFFFFF;	/* Reset LFN sequence */
 5937              		.loc 1 2428 34 discriminator 2 view .LVU2019
 5938 0062 0F29     		cmp	r1, #15
 5939 0064 DED1     		bne	.L444
 5940              	.L446:
2432:DRIVER/FatFs/source/ff.c **** 					if (c & LLEF) {		/* Is it start of LFN sequence? */
 5941              		.loc 1 2432 5 is_stmt 1 view .LVU2020
2432:DRIVER/FatFs/source/ff.c **** 					if (c & LLEF) {		/* Is it start of LFN sequence? */
 5942              		.loc 1 2432 17 is_stmt 0 view .LVU2021
 5943 0066 94F82B20 		ldrb	r2, [r4, #43]	@ zero_extendqisi2
2432:DRIVER/FatFs/source/ff.c **** 					if (c & LLEF) {		/* Is it start of LFN sequence? */
 5944              		.loc 1 2432 8 view .LVU2022
 5945 006a 12F0400F 		tst	r2, #64
 5946 006e DDD1     		bne	.L447
2433:DRIVER/FatFs/source/ff.c **** 						sum = dp->dir[LDIR_Chksum];
 5947              		.loc 1 2433 6 is_stmt 1 view .LVU2023
2433:DRIVER/FatFs/source/ff.c **** 						sum = dp->dir[LDIR_Chksum];
 5948              		.loc 1 2433 9 is_stmt 0 view .LVU2024
 5949 0070 13F0400F 		tst	r3, #64
 5950 0074 06D0     		beq	.L449
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 236


2434:DRIVER/FatFs/source/ff.c **** 						c &= (BYTE)~LLEF; ord = c;	/* LFN start order */
 5951              		.loc 1 2434 7 is_stmt 1 view .LVU2025
2434:DRIVER/FatFs/source/ff.c **** 						c &= (BYTE)~LLEF; ord = c;	/* LFN start order */
 5952              		.loc 1 2434 11 is_stmt 0 view .LVU2026
 5953 0076 95F80D90 		ldrb	r9, [r5, #13]	@ zero_extendqisi2
 5954              	.LVL720:
2435:DRIVER/FatFs/source/ff.c **** 						dp->blk_ofs = dp->dptr;	/* Start offset of LFN */
 5955              		.loc 1 2435 7 is_stmt 1 view .LVU2027
2435:DRIVER/FatFs/source/ff.c **** 						dp->blk_ofs = dp->dptr;	/* Start offset of LFN */
 5956              		.loc 1 2435 9 is_stmt 0 view .LVU2028
 5957 007a 03F0BF03 		and	r3, r3, #191
 5958              	.LVL721:
2435:DRIVER/FatFs/source/ff.c **** 						dp->blk_ofs = dp->dptr;	/* Start offset of LFN */
 5959              		.loc 1 2435 25 is_stmt 1 view .LVU2029
2436:DRIVER/FatFs/source/ff.c **** 					}
 5960              		.loc 1 2436 7 view .LVU2030
2436:DRIVER/FatFs/source/ff.c **** 					}
 5961              		.loc 1 2436 23 is_stmt 0 view .LVU2031
 5962 007e 2269     		ldr	r2, [r4, #16]
2436:DRIVER/FatFs/source/ff.c **** 					}
 5963              		.loc 1 2436 19 view .LVU2032
 5964 0080 E262     		str	r2, [r4, #44]
2435:DRIVER/FatFs/source/ff.c **** 						dp->blk_ofs = dp->dptr;	/* Start offset of LFN */
 5965              		.loc 1 2435 29 view .LVU2033
 5966 0082 1F46     		mov	r7, r3
 5967              	.LVL722:
 5968              	.L449:
2439:DRIVER/FatFs/source/ff.c **** 				}
 5969              		.loc 1 2439 6 is_stmt 1 view .LVU2034
2439:DRIVER/FatFs/source/ff.c **** 				}
 5970              		.loc 1 2439 10 is_stmt 0 view .LVU2035
 5971 0084 BB42     		cmp	r3, r7
 5972 0086 1AD0     		beq	.L458
2439:DRIVER/FatFs/source/ff.c **** 				}
 5973              		.loc 1 2439 10 view .LVU2036
 5974 0088 FF27     		movs	r7, #255
 5975              	.LVL723:
2439:DRIVER/FatFs/source/ff.c **** 				}
 5976              		.loc 1 2439 10 view .LVU2037
 5977 008a CFE7     		b	.L447
 5978              	.LVL724:
 5979              	.L445:
2431:DRIVER/FatFs/source/ff.c **** 				if (!(dp->fn[NSFLAG] & NS_NOLFN)) {
 5980              		.loc 1 2431 4 is_stmt 1 view .LVU2038
2431:DRIVER/FatFs/source/ff.c **** 				if (!(dp->fn[NSFLAG] & NS_NOLFN)) {
 5981              		.loc 1 2431 7 is_stmt 0 view .LVU2039
 5982 008c 0F29     		cmp	r1, #15
 5983 008e EAD0     		beq	.L446
2442:DRIVER/FatFs/source/ff.c **** 				if (!(dp->fn[NSFLAG] & NS_LOSS) && !memcmp(dp->dir, dp->fn, 11)) break;	/* SFN matched? */
 5984              		.loc 1 2442 5 is_stmt 1 view .LVU2040
2442:DRIVER/FatFs/source/ff.c **** 				if (!(dp->fn[NSFLAG] & NS_LOSS) && !memcmp(dp->dir, dp->fn, 11)) break;	/* SFN matched? */
 5985              		.loc 1 2442 8 is_stmt 0 view .LVU2041
 5986 0090 27B9     		cbnz	r7, .L450
2442:DRIVER/FatFs/source/ff.c **** 				if (!(dp->fn[NSFLAG] & NS_LOSS) && !memcmp(dp->dir, dp->fn, 11)) break;	/* SFN matched? */
 5987              		.loc 1 2442 28 discriminator 1 view .LVU2042
 5988 0092 2846     		mov	r0, r5
 5989              	.LVL725:
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 237


2442:DRIVER/FatFs/source/ff.c **** 				if (!(dp->fn[NSFLAG] & NS_LOSS) && !memcmp(dp->dir, dp->fn, 11)) break;	/* SFN matched? */
 5990              		.loc 1 2442 28 discriminator 1 view .LVU2043
 5991 0094 FFF7FEFF 		bl	sum_sfn
 5992              	.LVL726:
2442:DRIVER/FatFs/source/ff.c **** 				if (!(dp->fn[NSFLAG] & NS_LOSS) && !memcmp(dp->dir, dp->fn, 11)) break;	/* SFN matched? */
 5993              		.loc 1 2442 18 discriminator 1 view .LVU2044
 5994 0098 4845     		cmp	r0, r9
 5995 009a 21D0     		beq	.L443
 5996              	.L450:
2443:DRIVER/FatFs/source/ff.c **** 				ord = 0xFF; dp->blk_ofs = 0xFFFFFFFF;	/* Reset LFN sequence */
 5997              		.loc 1 2443 5 is_stmt 1 view .LVU2045
2443:DRIVER/FatFs/source/ff.c **** 				ord = 0xFF; dp->blk_ofs = 0xFFFFFFFF;	/* Reset LFN sequence */
 5998              		.loc 1 2443 17 is_stmt 0 view .LVU2046
 5999 009c 94F82B30 		ldrb	r3, [r4, #43]	@ zero_extendqisi2
2443:DRIVER/FatFs/source/ff.c **** 				ord = 0xFF; dp->blk_ofs = 0xFFFFFFFF;	/* Reset LFN sequence */
 6000              		.loc 1 2443 8 view .LVU2047
 6001 00a0 13F0010F 		tst	r3, #1
 6002 00a4 06D1     		bne	.L451
2443:DRIVER/FatFs/source/ff.c **** 				ord = 0xFF; dp->blk_ofs = 0xFFFFFFFF;	/* Reset LFN sequence */
 6003              		.loc 1 2443 41 discriminator 1 view .LVU2048
 6004 00a6 0B22     		movs	r2, #11
 6005 00a8 04F12001 		add	r1, r4, #32
 6006 00ac 2846     		mov	r0, r5
 6007 00ae FFF7FEFF 		bl	memcmp
 6008              	.LVL727:
2443:DRIVER/FatFs/source/ff.c **** 				ord = 0xFF; dp->blk_ofs = 0xFFFFFFFF;	/* Reset LFN sequence */
 6009              		.loc 1 2443 37 discriminator 1 view .LVU2049
 6010 00b2 A8B1     		cbz	r0, .L443
 6011              	.L451:
2444:DRIVER/FatFs/source/ff.c **** 			}
 6012              		.loc 1 2444 5 is_stmt 1 view .LVU2050
 6013              	.LVL728:
2444:DRIVER/FatFs/source/ff.c **** 			}
 6014              		.loc 1 2444 17 view .LVU2051
2444:DRIVER/FatFs/source/ff.c **** 			}
 6015              		.loc 1 2444 29 is_stmt 0 view .LVU2052
 6016 00b4 4FF0FF33 		mov	r3, #-1
 6017 00b8 E362     		str	r3, [r4, #44]
2444:DRIVER/FatFs/source/ff.c **** 			}
 6018              		.loc 1 2444 9 view .LVU2053
 6019 00ba FF27     		movs	r7, #255
 6020 00bc B6E7     		b	.L447
 6021              	.LVL729:
 6022              	.L458:
2439:DRIVER/FatFs/source/ff.c **** 				}
 6023              		.loc 1 2439 39 discriminator 1 view .LVU2054
 6024 00be 6B7B     		ldrb	r3, [r5, #13]	@ zero_extendqisi2
 6025              	.LVL730:
2439:DRIVER/FatFs/source/ff.c **** 				}
 6026              		.loc 1 2439 22 discriminator 1 view .LVU2055
 6027 00c0 4B45     		cmp	r3, r9
 6028 00c2 01D0     		beq	.L459
2439:DRIVER/FatFs/source/ff.c **** 				}
 6029              		.loc 1 2439 10 view .LVU2056
 6030 00c4 FF27     		movs	r7, #255
 6031              	.LVL731:
2439:DRIVER/FatFs/source/ff.c **** 				}
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 238


 6032              		.loc 1 2439 10 view .LVU2057
 6033 00c6 B1E7     		b	.L447
 6034              	.LVL732:
 6035              	.L459:
2439:DRIVER/FatFs/source/ff.c **** 				}
 6036              		.loc 1 2439 56 discriminator 3 view .LVU2058
 6037 00c8 2946     		mov	r1, r5
 6038              	.LVL733:
2439:DRIVER/FatFs/source/ff.c **** 				}
 6039              		.loc 1 2439 56 discriminator 3 view .LVU2059
 6040 00ca D8F81000 		ldr	r0, [r8, #16]
 6041              	.LVL734:
2439:DRIVER/FatFs/source/ff.c **** 				}
 6042              		.loc 1 2439 56 discriminator 3 view .LVU2060
 6043 00ce FFF7FEFF 		bl	cmp_lfn
 6044              	.LVL735:
2439:DRIVER/FatFs/source/ff.c **** 				}
 6045              		.loc 1 2439 53 discriminator 3 view .LVU2061
 6046 00d2 10B1     		cbz	r0, .L456
2439:DRIVER/FatFs/source/ff.c **** 				}
 6047              		.loc 1 2439 10 discriminator 5 view .LVU2062
 6048 00d4 013F     		subs	r7, r7, #1
 6049              	.LVL736:
2439:DRIVER/FatFs/source/ff.c **** 				}
 6050              		.loc 1 2439 10 discriminator 5 view .LVU2063
 6051 00d6 FFB2     		uxtb	r7, r7
 6052 00d8 A8E7     		b	.L447
 6053              	.LVL737:
 6054              	.L456:
2439:DRIVER/FatFs/source/ff.c **** 				}
 6055              		.loc 1 2439 10 view .LVU2064
 6056 00da FF27     		movs	r7, #255
 6057              	.LVL738:
2439:DRIVER/FatFs/source/ff.c **** 				}
 6058              		.loc 1 2439 10 view .LVU2065
 6059 00dc A6E7     		b	.L447
 6060              	.LVL739:
 6061              	.L453:
2425:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN		/* LFN configuration */
 6062              		.loc 1 2425 21 view .LVU2066
 6063 00de 0426     		movs	r6, #4
 6064              	.LVL740:
 6065              	.L443:
2455:DRIVER/FatFs/source/ff.c **** 
 6066              		.loc 1 2455 1 view .LVU2067
 6067 00e0 3046     		mov	r0, r6
 6068 00e2 BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
2455:DRIVER/FatFs/source/ff.c **** 
 6069              		.loc 1 2455 1 view .LVU2068
 6070              		.cfi_endproc
 6071              	.LFE28:
 6073              		.section	.text.follow_path,"ax",%progbits
 6074              		.align	1
 6075              		.syntax unified
 6076              		.thumb
 6077              		.thumb_func
 6079              	follow_path:
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 239


 6080              	.LVL741:
 6081              	.LFB33:
3055:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
 6082              		.loc 1 3055 1 is_stmt 1 view -0
 6083              		.cfi_startproc
 6084              		@ args = 0, pretend = 0, frame = 8
 6085              		@ frame_needed = 0, uses_anonymous_args = 0
3055:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
 6086              		.loc 1 3055 1 is_stmt 0 view .LVU2070
 6087 0000 30B5     		push	{r4, r5, lr}
 6088              	.LCFI37:
 6089              		.cfi_def_cfa_offset 12
 6090              		.cfi_offset 4, -12
 6091              		.cfi_offset 5, -8
 6092              		.cfi_offset 14, -4
 6093 0002 83B0     		sub	sp, sp, #12
 6094              	.LCFI38:
 6095              		.cfi_def_cfa_offset 24
 6096 0004 0446     		mov	r4, r0
 6097 0006 0191     		str	r1, [sp, #4]
3056:DRIVER/FatFs/source/ff.c **** 	BYTE ns;
 6098              		.loc 1 3056 2 is_stmt 1 view .LVU2071
3057:DRIVER/FatFs/source/ff.c **** 	FATFS *fs = dp->obj.fs;
 6099              		.loc 1 3057 2 view .LVU2072
3058:DRIVER/FatFs/source/ff.c **** 
 6100              		.loc 1 3058 2 view .LVU2073
3058:DRIVER/FatFs/source/ff.c **** 
 6101              		.loc 1 3058 9 is_stmt 0 view .LVU2074
 6102 0008 0568     		ldr	r5, [r0]
 6103              	.LVL742:
3067:DRIVER/FatFs/source/ff.c **** 		dp->obj.sclust = 0;					/* Start from the root directory */
 6104              		.loc 1 3067 3 is_stmt 1 view .LVU2075
3067:DRIVER/FatFs/source/ff.c **** 		dp->obj.sclust = 0;					/* Start from the root directory */
 6105              		.loc 1 3067 9 is_stmt 0 view .LVU2076
 6106 000a 01E0     		b	.L461
 6107              	.L462:
3067:DRIVER/FatFs/source/ff.c **** 		dp->obj.sclust = 0;					/* Start from the root directory */
 6108              		.loc 1 3067 30 is_stmt 1 discriminator 4 view .LVU2077
3067:DRIVER/FatFs/source/ff.c **** 		dp->obj.sclust = 0;					/* Start from the root directory */
 6109              		.loc 1 3067 34 is_stmt 0 discriminator 4 view .LVU2078
 6110 000c 0133     		adds	r3, r3, #1
 6111 000e 0193     		str	r3, [sp, #4]
 6112              	.L461:
3067:DRIVER/FatFs/source/ff.c **** 		dp->obj.sclust = 0;					/* Start from the root directory */
 6113              		.loc 1 3067 10 is_stmt 1 discriminator 1 view .LVU2079
 6114 0010 019B     		ldr	r3, [sp, #4]
 6115 0012 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 6116 0014 2F2A     		cmp	r2, #47
 6117 0016 F9D0     		beq	.L462
3067:DRIVER/FatFs/source/ff.c **** 		dp->obj.sclust = 0;					/* Start from the root directory */
 6118              		.loc 1 3067 10 is_stmt 0 discriminator 3 view .LVU2080
 6119 0018 5C2A     		cmp	r2, #92
 6120 001a F7D0     		beq	.L462
3068:DRIVER/FatFs/source/ff.c **** 	}
 6121              		.loc 1 3068 3 is_stmt 1 view .LVU2081
3068:DRIVER/FatFs/source/ff.c **** 	}
 6122              		.loc 1 3068 18 is_stmt 0 view .LVU2082
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 240


 6123 001c 0022     		movs	r2, #0
 6124 001e A260     		str	r2, [r4, #8]
3087:DRIVER/FatFs/source/ff.c **** 		dp->fn[NSFLAG] = NS_NONAME;
 6125              		.loc 1 3087 2 is_stmt 1 view .LVU2083
3087:DRIVER/FatFs/source/ff.c **** 		dp->fn[NSFLAG] = NS_NONAME;
 6126              		.loc 1 3087 12 is_stmt 0 view .LVU2084
 6127 0020 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
3087:DRIVER/FatFs/source/ff.c **** 		dp->fn[NSFLAG] = NS_NONAME;
 6128              		.loc 1 3087 5 view .LVU2085
 6129 0022 1F2B     		cmp	r3, #31
 6130 0024 21D9     		bls	.L469
 6131              	.LVL743:
 6132              	.L463:
3092:DRIVER/FatFs/source/ff.c **** 			res = create_name(dp, &path);	/* Get a segment name of the path */
 6133              		.loc 1 3092 3 is_stmt 1 view .LVU2086
3093:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) break;
 6134              		.loc 1 3093 4 view .LVU2087
3093:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) break;
 6135              		.loc 1 3093 10 is_stmt 0 view .LVU2088
 6136 0026 01A9     		add	r1, sp, #4
 6137 0028 2046     		mov	r0, r4
 6138 002a FFF7FEFF 		bl	create_name
 6139              	.LVL744:
3094:DRIVER/FatFs/source/ff.c **** 			res = dir_find(dp);				/* Find an object with the segment name */
 6140              		.loc 1 3094 4 is_stmt 1 view .LVU2089
3094:DRIVER/FatFs/source/ff.c **** 			res = dir_find(dp);				/* Find an object with the segment name */
 6141              		.loc 1 3094 7 is_stmt 0 view .LVU2090
 6142 002e 0346     		mov	r3, r0
 6143 0030 18BB     		cbnz	r0, .L464
3095:DRIVER/FatFs/source/ff.c **** 			ns = dp->fn[NSFLAG];
 6144              		.loc 1 3095 4 is_stmt 1 view .LVU2091
3095:DRIVER/FatFs/source/ff.c **** 			ns = dp->fn[NSFLAG];
 6145              		.loc 1 3095 10 is_stmt 0 view .LVU2092
 6146 0032 2046     		mov	r0, r4
 6147              	.LVL745:
3095:DRIVER/FatFs/source/ff.c **** 			ns = dp->fn[NSFLAG];
 6148              		.loc 1 3095 10 view .LVU2093
 6149 0034 FFF7FEFF 		bl	dir_find
 6150              	.LVL746:
3096:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) {				/* Failed to find the object */
 6151              		.loc 1 3096 4 is_stmt 1 view .LVU2094
3096:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) {				/* Failed to find the object */
 6152              		.loc 1 3096 7 is_stmt 0 view .LVU2095
 6153 0038 94F82B20 		ldrb	r2, [r4, #43]	@ zero_extendqisi2
 6154              	.LVL747:
3097:DRIVER/FatFs/source/ff.c **** 				if (res == FR_NO_FILE) {	/* Object is not found */
 6155              		.loc 1 3097 4 is_stmt 1 view .LVU2096
3097:DRIVER/FatFs/source/ff.c **** 				if (res == FR_NO_FILE) {	/* Object is not found */
 6156              		.loc 1 3097 7 is_stmt 0 view .LVU2097
 6157 003c 0346     		mov	r3, r0
 6158 003e F8B9     		cbnz	r0, .L470
3109:DRIVER/FatFs/source/ff.c **** 			/* Get into the sub-directory */
 6159              		.loc 1 3109 4 is_stmt 1 view .LVU2098
3109:DRIVER/FatFs/source/ff.c **** 			/* Get into the sub-directory */
 6160              		.loc 1 3109 7 is_stmt 0 view .LVU2099
 6161 0040 12F0040F 		tst	r2, #4
 6162 0044 19D1     		bne	.L464
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 241


3111:DRIVER/FatFs/source/ff.c **** 				res = FR_NO_PATH; break;
 6163              		.loc 1 3111 4 is_stmt 1 view .LVU2100
3111:DRIVER/FatFs/source/ff.c **** 				res = FR_NO_PATH; break;
 6164              		.loc 1 3111 17 is_stmt 0 view .LVU2101
 6165 0046 A379     		ldrb	r3, [r4, #6]	@ zero_extendqisi2
3111:DRIVER/FatFs/source/ff.c **** 				res = FR_NO_PATH; break;
 6166              		.loc 1 3111 7 view .LVU2102
 6167 0048 13F0100F 		tst	r3, #16
 6168 004c 1FD0     		beq	.L467
3123:DRIVER/FatFs/source/ff.c **** 			}
 6169              		.loc 1 3123 5 is_stmt 1 view .LVU2103
3123:DRIVER/FatFs/source/ff.c **** 			}
 6170              		.loc 1 3123 35 is_stmt 0 view .LVU2104
 6171 004e 05F13801 		add	r1, r5, #56
3123:DRIVER/FatFs/source/ff.c **** 			}
 6172              		.loc 1 3123 47 view .LVU2105
 6173 0052 2369     		ldr	r3, [r4, #16]
3123:DRIVER/FatFs/source/ff.c **** 			}
 6174              		.loc 1 3123 56 view .LVU2106
 6175 0054 AA89     		ldrh	r2, [r5, #12]
 6176              	.LVL748:
3123:DRIVER/FatFs/source/ff.c **** 			}
 6177              		.loc 1 3123 54 view .LVU2107
 6178 0056 B3FBF2F0 		udiv	r0, r3, r2
 6179              	.LVL749:
3123:DRIVER/FatFs/source/ff.c **** 			}
 6180              		.loc 1 3123 54 view .LVU2108
 6181 005a 02FB1033 		mls	r3, r2, r0, r3
3123:DRIVER/FatFs/source/ff.c **** 			}
 6182              		.loc 1 3123 22 view .LVU2109
 6183 005e 1944     		add	r1, r1, r3
 6184 0060 2846     		mov	r0, r5
 6185 0062 FFF7FEFF 		bl	ld_clust
 6186              	.LVL750:
3123:DRIVER/FatFs/source/ff.c **** 			}
 6187              		.loc 1 3123 20 view .LVU2110
 6188 0066 A060     		str	r0, [r4, #8]
3092:DRIVER/FatFs/source/ff.c **** 			res = create_name(dp, &path);	/* Get a segment name of the path */
 6189              		.loc 1 3092 3 is_stmt 1 view .LVU2111
3093:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) break;
 6190              		.loc 1 3093 8 is_stmt 0 view .LVU2112
 6191 0068 DDE7     		b	.L463
 6192              	.LVL751:
 6193              	.L469:
3088:DRIVER/FatFs/source/ff.c **** 		res = dir_sdi(dp, 0);
 6194              		.loc 1 3088 3 is_stmt 1 view .LVU2113
3088:DRIVER/FatFs/source/ff.c **** 		res = dir_sdi(dp, 0);
 6195              		.loc 1 3088 18 is_stmt 0 view .LVU2114
 6196 006a 8023     		movs	r3, #128
 6197 006c 84F82B30 		strb	r3, [r4, #43]
3089:DRIVER/FatFs/source/ff.c **** 
 6198              		.loc 1 3089 3 is_stmt 1 view .LVU2115
3089:DRIVER/FatFs/source/ff.c **** 
 6199              		.loc 1 3089 9 is_stmt 0 view .LVU2116
 6200 0070 1146     		mov	r1, r2
 6201              	.LVL752:
3089:DRIVER/FatFs/source/ff.c **** 
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 242


 6202              		.loc 1 3089 9 view .LVU2117
 6203 0072 2046     		mov	r0, r4
 6204              	.LVL753:
3089:DRIVER/FatFs/source/ff.c **** 
 6205              		.loc 1 3089 9 view .LVU2118
 6206 0074 FFF7FEFF 		bl	dir_sdi
 6207              	.LVL754:
 6208 0078 0346     		mov	r3, r0
 6209              	.LVL755:
 6210              	.L464:
3128:DRIVER/FatFs/source/ff.c **** }
 6211              		.loc 1 3128 2 is_stmt 1 view .LVU2119
3129:DRIVER/FatFs/source/ff.c **** 
 6212              		.loc 1 3129 1 is_stmt 0 view .LVU2120
 6213 007a 1846     		mov	r0, r3
 6214 007c 03B0     		add	sp, sp, #12
 6215              	.LCFI39:
 6216              		.cfi_remember_state
 6217              		.cfi_def_cfa_offset 12
 6218              		@ sp needed
 6219 007e 30BD     		pop	{r4, r5, pc}
 6220              	.LVL756:
 6221              	.L470:
 6222              	.LCFI40:
 6223              		.cfi_restore_state
3098:DRIVER/FatFs/source/ff.c **** 					if (FF_FS_RPATH && (ns & NS_DOT)) {	/* If dot entry is not exist, stay there */
 6224              		.loc 1 3098 5 is_stmt 1 view .LVU2121
3098:DRIVER/FatFs/source/ff.c **** 					if (FF_FS_RPATH && (ns & NS_DOT)) {	/* If dot entry is not exist, stay there */
 6225              		.loc 1 3098 8 is_stmt 0 view .LVU2122
 6226 0080 0428     		cmp	r0, #4
 6227 0082 FAD1     		bne	.L464
3099:DRIVER/FatFs/source/ff.c **** 						if (!(ns & NS_LAST)) continue;	/* Continue to follow if not last segment */
 6228              		.loc 1 3099 6 is_stmt 1 view .LVU2123
3104:DRIVER/FatFs/source/ff.c **** 					}
 6229              		.loc 1 3104 7 view .LVU2124
3104:DRIVER/FatFs/source/ff.c **** 					}
 6230              		.loc 1 3104 10 is_stmt 0 view .LVU2125
 6231 0084 12F0040F 		tst	r2, #4
 6232 0088 F7D1     		bne	.L464
3104:DRIVER/FatFs/source/ff.c **** 					}
 6233              		.loc 1 3104 32 view .LVU2126
 6234 008a 0523     		movs	r3, #5
 6235 008c F5E7     		b	.L464
 6236              	.L467:
3112:DRIVER/FatFs/source/ff.c **** 			}
 6237              		.loc 1 3112 9 view .LVU2127
 6238 008e 0523     		movs	r3, #5
 6239 0090 F3E7     		b	.L464
 6240              		.cfi_endproc
 6241              	.LFE33:
 6243              		.section	.text.gen_numname,"ax",%progbits
 6244              		.align	1
 6245              		.syntax unified
 6246              		.thumb
 6247              		.thumb_func
 6249              	gen_numname:
 6250              	.LVL757:
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 243


 6251              	.LFB25:
2002:DRIVER/FatFs/source/ff.c **** 	BYTE ns[8], c;
 6252              		.loc 1 2002 1 is_stmt 1 view -0
 6253              		.cfi_startproc
 6254              		@ args = 0, pretend = 0, frame = 8
 6255              		@ frame_needed = 0, uses_anonymous_args = 0
2002:DRIVER/FatFs/source/ff.c **** 	BYTE ns[8], c;
 6256              		.loc 1 2002 1 is_stmt 0 view .LVU2129
 6257 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 6258              	.LCFI41:
 6259              		.cfi_def_cfa_offset 20
 6260              		.cfi_offset 4, -20
 6261              		.cfi_offset 5, -16
 6262              		.cfi_offset 6, -12
 6263              		.cfi_offset 7, -8
 6264              		.cfi_offset 14, -4
 6265 0002 83B0     		sub	sp, sp, #12
 6266              	.LCFI42:
 6267              		.cfi_def_cfa_offset 32
 6268 0004 0646     		mov	r6, r0
2003:DRIVER/FatFs/source/ff.c **** 	UINT i, j;
 6269              		.loc 1 2003 2 is_stmt 1 view .LVU2130
2004:DRIVER/FatFs/source/ff.c **** 	WCHAR wc;
 6270              		.loc 1 2004 2 view .LVU2131
2005:DRIVER/FatFs/source/ff.c **** 	DWORD sreg;
 6271              		.loc 1 2005 2 view .LVU2132
2006:DRIVER/FatFs/source/ff.c **** 
 6272              		.loc 1 2006 2 view .LVU2133
2009:DRIVER/FatFs/source/ff.c **** 
 6273              		.loc 1 2009 2 view .LVU2134
 6274 0006 0C68     		ldr	r4, [r1]	@ unaligned
 6275 0008 4868     		ldr	r0, [r1, #4]	@ unaligned
 6276              	.LVL758:
2009:DRIVER/FatFs/source/ff.c **** 
 6277              		.loc 1 2009 2 is_stmt 0 view .LVU2135
 6278 000a 3460     		str	r4, [r6]	@ unaligned
 6279 000c 7060     		str	r0, [r6, #4]	@ unaligned
 6280 000e 0889     		ldrh	r0, [r1, #8]	@ unaligned
 6281 0010 897A     		ldrb	r1, [r1, #10]	@ zero_extendqisi2
 6282              	.LVL759:
2009:DRIVER/FatFs/source/ff.c **** 
 6283              		.loc 1 2009 2 view .LVU2136
 6284 0012 3081     		strh	r0, [r6, #8]	@ unaligned
 6285 0014 B172     		strb	r1, [r6, #10]
2011:DRIVER/FatFs/source/ff.c **** 		sreg = seq;
 6286              		.loc 1 2011 2 is_stmt 1 view .LVU2137
2011:DRIVER/FatFs/source/ff.c **** 		sreg = seq;
 6287              		.loc 1 2011 5 is_stmt 0 view .LVU2138
 6288 0016 052B     		cmp	r3, #5
 6289 0018 13D8     		bhi	.L472
 6290              	.LVL760:
 6291              	.L473:
2015:DRIVER/FatFs/source/ff.c **** 				sreg = (sreg << 1) + (wc & 1);
 6292              		.loc 1 2015 11 view .LVU2139
 6293 001a 0727     		movs	r7, #7
 6294 001c 22E0     		b	.L480
 6295              	.LVL761:
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 244


 6296              	.L475:
2015:DRIVER/FatFs/source/ff.c **** 				sreg = (sreg << 1) + (wc & 1);
 6297              		.loc 1 2015 25 is_stmt 1 discriminator 2 view .LVU2140
 6298 001e 0CF1010C 		add	ip, ip, #1
 6299              	.LVL762:
 6300              	.L474:
2015:DRIVER/FatFs/source/ff.c **** 				sreg = (sreg << 1) + (wc & 1);
 6301              		.loc 1 2015 18 discriminator 1 view .LVU2141
 6302 0022 BCF10F0F 		cmp	ip, #15
 6303 0026 0CD8     		bhi	.L472
2016:DRIVER/FatFs/source/ff.c **** 				wc >>= 1;
 6304              		.loc 1 2016 5 view .LVU2142
2016:DRIVER/FatFs/source/ff.c **** 				wc >>= 1;
 6305              		.loc 1 2016 30 is_stmt 0 view .LVU2143
 6306 0028 01F0010E 		and	lr, r1, #1
2016:DRIVER/FatFs/source/ff.c **** 				wc >>= 1;
 6307              		.loc 1 2016 10 view .LVU2144
 6308 002c 0EEB4303 		add	r3, lr, r3, lsl #1
 6309              	.LVL763:
2017:DRIVER/FatFs/source/ff.c **** 				if (sreg & 0x10000) sreg ^= 0x11021;
 6310              		.loc 1 2017 5 is_stmt 1 view .LVU2145
2017:DRIVER/FatFs/source/ff.c **** 				if (sreg & 0x10000) sreg ^= 0x11021;
 6311              		.loc 1 2017 8 is_stmt 0 view .LVU2146
 6312 0030 4908     		lsrs	r1, r1, #1
 6313              	.LVL764:
2018:DRIVER/FatFs/source/ff.c **** 			}
 6314              		.loc 1 2018 5 is_stmt 1 view .LVU2147
2018:DRIVER/FatFs/source/ff.c **** 			}
 6315              		.loc 1 2018 8 is_stmt 0 view .LVU2148
 6316 0032 13F4803F 		tst	r3, #65536
 6317 0036 F2D0     		beq	.L475
2018:DRIVER/FatFs/source/ff.c **** 			}
 6318              		.loc 1 2018 25 is_stmt 1 discriminator 1 view .LVU2149
2018:DRIVER/FatFs/source/ff.c **** 			}
 6319              		.loc 1 2018 30 is_stmt 0 discriminator 1 view .LVU2150
 6320 0038 83F48833 		eor	r3, r3, #69632
 6321              	.LVL765:
2018:DRIVER/FatFs/source/ff.c **** 			}
 6322              		.loc 1 2018 30 discriminator 1 view .LVU2151
 6323 003c 83F02103 		eor	r3, r3, #33
 6324              	.LVL766:
2018:DRIVER/FatFs/source/ff.c **** 			}
 6325              		.loc 1 2018 30 discriminator 1 view .LVU2152
 6326 0040 EDE7     		b	.L475
 6327              	.LVL767:
 6328              	.L472:
2013:DRIVER/FatFs/source/ff.c **** 			wc = *lfn++;
 6329              		.loc 1 2013 10 is_stmt 1 view .LVU2153
 6330 0042 1188     		ldrh	r1, [r2]
 6331 0044 0029     		cmp	r1, #0
 6332 0046 E8D0     		beq	.L473
2014:DRIVER/FatFs/source/ff.c **** 			for (i = 0; i < 16; i++) {
 6333              		.loc 1 2014 4 view .LVU2154
2014:DRIVER/FatFs/source/ff.c **** 			for (i = 0; i < 16; i++) {
 6334              		.loc 1 2014 13 is_stmt 0 view .LVU2155
 6335 0048 0232     		adds	r2, r2, #2
 6336              	.LVL768:
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 245


2015:DRIVER/FatFs/source/ff.c **** 				sreg = (sreg << 1) + (wc & 1);
 6337              		.loc 1 2015 4 is_stmt 1 view .LVU2156
2015:DRIVER/FatFs/source/ff.c **** 				sreg = (sreg << 1) + (wc & 1);
 6338              		.loc 1 2015 11 is_stmt 0 view .LVU2157
 6339 004a 4FF0000C 		mov	ip, #0
2015:DRIVER/FatFs/source/ff.c **** 				sreg = (sreg << 1) + (wc & 1);
 6340              		.loc 1 2015 4 view .LVU2158
 6341 004e E8E7     		b	.L474
 6342              	.LVL769:
 6343              	.L478:
2029:DRIVER/FatFs/source/ff.c **** 	} while (i && seq);
 6344              		.loc 1 2029 3 is_stmt 1 view .LVU2159
2029:DRIVER/FatFs/source/ff.c **** 	} while (i && seq);
 6345              		.loc 1 2029 11 is_stmt 0 view .LVU2160
 6346 0050 07F10801 		add	r1, r7, #8
 6347 0054 6944     		add	r1, sp, r1
 6348 0056 01F8082C 		strb	r2, [r1, #-8]
2030:DRIVER/FatFs/source/ff.c **** 	ns[i] = '~';
 6349              		.loc 1 2030 13 is_stmt 1 view .LVU2161
 6350 005a 7D1E     		subs	r5, r7, #1
 6351              	.LVL770:
2030:DRIVER/FatFs/source/ff.c **** 	ns[i] = '~';
 6352              		.loc 1 2030 13 is_stmt 0 view .LVU2162
 6353 005c 0DD0     		beq	.L479
2030:DRIVER/FatFs/source/ff.c **** 	ns[i] = '~';
 6354              		.loc 1 2030 13 discriminator 1 view .LVU2163
 6355 005e 0F28     		cmp	r0, #15
 6356 0060 0BD9     		bls	.L479
2029:DRIVER/FatFs/source/ff.c **** 	} while (i && seq);
 6357              		.loc 1 2029 7 view .LVU2164
 6358 0062 2F46     		mov	r7, r5
 6359              	.LVL771:
 6360              	.L480:
2026:DRIVER/FatFs/source/ff.c **** 		c = (BYTE)((seq % 16) + '0'); seq /= 16;
 6361              		.loc 1 2026 2 is_stmt 1 view .LVU2165
2027:DRIVER/FatFs/source/ff.c **** 		if (c > '9') c += 7;
 6362              		.loc 1 2027 3 view .LVU2166
2027:DRIVER/FatFs/source/ff.c **** 		if (c > '9') c += 7;
 6363              		.loc 1 2027 7 is_stmt 0 view .LVU2167
 6364 0064 03F00F01 		and	r1, r3, #15
2027:DRIVER/FatFs/source/ff.c **** 		if (c > '9') c += 7;
 6365              		.loc 1 2027 5 view .LVU2168
 6366 0068 01F13002 		add	r2, r1, #48
 6367              	.LVL772:
2027:DRIVER/FatFs/source/ff.c **** 		if (c > '9') c += 7;
 6368              		.loc 1 2027 33 is_stmt 1 view .LVU2169
 6369 006c 1846     		mov	r0, r3
2027:DRIVER/FatFs/source/ff.c **** 		if (c > '9') c += 7;
 6370              		.loc 1 2027 37 is_stmt 0 view .LVU2170
 6371 006e 1B09     		lsrs	r3, r3, #4
 6372              	.LVL773:
2028:DRIVER/FatFs/source/ff.c **** 		ns[i--] = c;
 6373              		.loc 1 2028 3 is_stmt 1 view .LVU2171
2028:DRIVER/FatFs/source/ff.c **** 		ns[i--] = c;
 6374              		.loc 1 2028 6 is_stmt 0 view .LVU2172
 6375 0070 392A     		cmp	r2, #57
 6376 0072 EDD9     		bls	.L478
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 246


2028:DRIVER/FatFs/source/ff.c **** 		ns[i--] = c;
 6377              		.loc 1 2028 16 is_stmt 1 discriminator 1 view .LVU2173
2028:DRIVER/FatFs/source/ff.c **** 		ns[i--] = c;
 6378              		.loc 1 2028 18 is_stmt 0 discriminator 1 view .LVU2174
 6379 0074 01F13702 		add	r2, r1, #55
 6380              	.LVL774:
2028:DRIVER/FatFs/source/ff.c **** 		ns[i--] = c;
 6381              		.loc 1 2028 18 discriminator 1 view .LVU2175
 6382 0078 EAE7     		b	.L478
 6383              	.LVL775:
 6384              	.L479:
2031:DRIVER/FatFs/source/ff.c **** 
 6385              		.loc 1 2031 2 is_stmt 1 view .LVU2176
2031:DRIVER/FatFs/source/ff.c **** 
 6386              		.loc 1 2031 8 is_stmt 0 view .LVU2177
 6387 007a 7E22     		movs	r2, #126
 6388              	.LVL776:
2031:DRIVER/FatFs/source/ff.c **** 
 6389              		.loc 1 2031 8 view .LVU2178
 6390 007c 05F10803 		add	r3, r5, #8
 6391              	.LVL777:
2031:DRIVER/FatFs/source/ff.c **** 
 6392              		.loc 1 2031 8 view .LVU2179
 6393 0080 6B44     		add	r3, sp, r3
 6394 0082 03F8082C 		strb	r2, [r3, #-8]
 6395              	.LVL778:
2034:DRIVER/FatFs/source/ff.c **** 		if (dbc_1st(dst[j])) {	/* To avoid DBC break up */
 6396              		.loc 1 2034 2 is_stmt 1 view .LVU2180
2034:DRIVER/FatFs/source/ff.c **** 		if (dbc_1st(dst[j])) {	/* To avoid DBC break up */
 6397              		.loc 1 2034 9 is_stmt 0 view .LVU2181
 6398 0086 0024     		movs	r4, #0
2034:DRIVER/FatFs/source/ff.c **** 		if (dbc_1st(dst[j])) {	/* To avoid DBC break up */
 6399              		.loc 1 2034 2 view .LVU2182
 6400 0088 00E0     		b	.L481
 6401              	.LVL779:
 6402              	.L482:
2034:DRIVER/FatFs/source/ff.c **** 		if (dbc_1st(dst[j])) {	/* To avoid DBC break up */
 6403              		.loc 1 2034 39 is_stmt 1 discriminator 2 view .LVU2183
 6404 008a 0134     		adds	r4, r4, #1
 6405              	.LVL780:
 6406              	.L481:
2034:DRIVER/FatFs/source/ff.c **** 		if (dbc_1st(dst[j])) {	/* To avoid DBC break up */
 6407              		.loc 1 2034 20 discriminator 1 view .LVU2184
 6408 008c AC42     		cmp	r4, r5
 6409 008e 11D2     		bcs	.L486
2034:DRIVER/FatFs/source/ff.c **** 		if (dbc_1st(dst[j])) {	/* To avoid DBC break up */
 6410              		.loc 1 2034 26 is_stmt 0 discriminator 3 view .LVU2185
 6411 0090 305D     		ldrb	r0, [r6, r4]	@ zero_extendqisi2
2034:DRIVER/FatFs/source/ff.c **** 		if (dbc_1st(dst[j])) {	/* To avoid DBC break up */
 6412              		.loc 1 2034 20 discriminator 3 view .LVU2186
 6413 0092 2028     		cmp	r0, #32
 6414 0094 0ED0     		beq	.L486
2035:DRIVER/FatFs/source/ff.c **** 			if (j == i - 1) break;
 6415              		.loc 1 2035 3 is_stmt 1 view .LVU2187
2035:DRIVER/FatFs/source/ff.c **** 			if (j == i - 1) break;
 6416              		.loc 1 2035 7 is_stmt 0 view .LVU2188
 6417 0096 FFF7FEFF 		bl	dbc_1st
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 247


 6418              	.LVL781:
2035:DRIVER/FatFs/source/ff.c **** 			if (j == i - 1) break;
 6419              		.loc 1 2035 6 view .LVU2189
 6420 009a 0028     		cmp	r0, #0
 6421 009c F5D0     		beq	.L482
2036:DRIVER/FatFs/source/ff.c **** 			j++;
 6422              		.loc 1 2036 4 is_stmt 1 view .LVU2190
2036:DRIVER/FatFs/source/ff.c **** 			j++;
 6423              		.loc 1 2036 15 is_stmt 0 view .LVU2191
 6424 009e BB1E     		subs	r3, r7, #2
2036:DRIVER/FatFs/source/ff.c **** 			j++;
 6425              		.loc 1 2036 7 view .LVU2192
 6426 00a0 A342     		cmp	r3, r4
 6427 00a2 07D0     		beq	.L486
2037:DRIVER/FatFs/source/ff.c **** 		}
 6428              		.loc 1 2037 4 is_stmt 1 view .LVU2193
2037:DRIVER/FatFs/source/ff.c **** 		}
 6429              		.loc 1 2037 5 is_stmt 0 view .LVU2194
 6430 00a4 0134     		adds	r4, r4, #1
 6431              	.LVL782:
2037:DRIVER/FatFs/source/ff.c **** 		}
 6432              		.loc 1 2037 5 view .LVU2195
 6433 00a6 F0E7     		b	.L482
 6434              	.L488:
2041:DRIVER/FatFs/source/ff.c **** 	} while (j < 8);
 6435              		.loc 1 2041 12 view .LVU2196
 6436 00a8 2022     		movs	r2, #32
 6437              	.L485:
2041:DRIVER/FatFs/source/ff.c **** 	} while (j < 8);
 6438              		.loc 1 2041 8 discriminator 4 view .LVU2197
 6439 00aa 631C     		adds	r3, r4, #1
 6440              	.LVL783:
2041:DRIVER/FatFs/source/ff.c **** 	} while (j < 8);
 6441              		.loc 1 2041 12 discriminator 4 view .LVU2198
 6442 00ac 3255     		strb	r2, [r6, r4]
2042:DRIVER/FatFs/source/ff.c **** }
 6443              		.loc 1 2042 13 is_stmt 1 discriminator 4 view .LVU2199
 6444 00ae 072B     		cmp	r3, #7
 6445 00b0 09D8     		bhi	.L491
2041:DRIVER/FatFs/source/ff.c **** 	} while (j < 8);
 6446              		.loc 1 2041 8 is_stmt 0 view .LVU2200
 6447 00b2 1C46     		mov	r4, r3
 6448              	.LVL784:
 6449              	.L486:
2040:DRIVER/FatFs/source/ff.c **** 		dst[j++] = (i < 8) ? ns[i++] : ' ';
 6450              		.loc 1 2040 2 is_stmt 1 view .LVU2201
2041:DRIVER/FatFs/source/ff.c **** 	} while (j < 8);
 6451              		.loc 1 2041 3 view .LVU2202
2041:DRIVER/FatFs/source/ff.c **** 	} while (j < 8);
 6452              		.loc 1 2041 12 is_stmt 0 view .LVU2203
 6453 00b4 072D     		cmp	r5, #7
 6454 00b6 F7D8     		bhi	.L488
 6455              	.LVL785:
2041:DRIVER/FatFs/source/ff.c **** 	} while (j < 8);
 6456              		.loc 1 2041 12 discriminator 1 view .LVU2204
 6457 00b8 05F10803 		add	r3, r5, #8
 6458 00bc 6B44     		add	r3, sp, r3
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 248


 6459 00be 13F8082C 		ldrb	r2, [r3, #-8]	@ zero_extendqisi2
2041:DRIVER/FatFs/source/ff.c **** 	} while (j < 8);
 6460              		.loc 1 2041 28 discriminator 1 view .LVU2205
 6461 00c2 0135     		adds	r5, r5, #1
 6462              	.LVL786:
2041:DRIVER/FatFs/source/ff.c **** 	} while (j < 8);
 6463              		.loc 1 2041 28 discriminator 1 view .LVU2206
 6464 00c4 F1E7     		b	.L485
 6465              	.LVL787:
 6466              	.L491:
2043:DRIVER/FatFs/source/ff.c **** #endif	/* FF_USE_LFN && !FF_FS_READONLY */
 6467              		.loc 1 2043 1 view .LVU2207
 6468 00c6 03B0     		add	sp, sp, #12
 6469              	.LCFI43:
 6470              		.cfi_def_cfa_offset 20
 6471              		@ sp needed
 6472 00c8 F0BD     		pop	{r4, r5, r6, r7, pc}
2043:DRIVER/FatFs/source/ff.c **** #endif	/* FF_USE_LFN && !FF_FS_READONLY */
 6473              		.loc 1 2043 1 view .LVU2208
 6474              		.cfi_endproc
 6475              	.LFE25:
 6477              		.section	.text.dir_register,"ax",%progbits
 6478              		.align	1
 6479              		.syntax unified
 6480              		.thumb
 6481              		.thumb_func
 6483              	dir_register:
 6484              	.LVL788:
 6485              	.LFB29:
2468:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
 6486              		.loc 1 2468 1 is_stmt 1 view -0
 6487              		.cfi_startproc
 6488              		@ args = 0, pretend = 0, frame = 16
 6489              		@ frame_needed = 0, uses_anonymous_args = 0
2468:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
 6490              		.loc 1 2468 1 is_stmt 0 view .LVU2210
 6491 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 6492              	.LCFI44:
 6493              		.cfi_def_cfa_offset 24
 6494              		.cfi_offset 4, -24
 6495              		.cfi_offset 5, -20
 6496              		.cfi_offset 6, -16
 6497              		.cfi_offset 7, -12
 6498              		.cfi_offset 8, -8
 6499              		.cfi_offset 14, -4
 6500 0004 84B0     		sub	sp, sp, #16
 6501              	.LCFI45:
 6502              		.cfi_def_cfa_offset 40
2469:DRIVER/FatFs/source/ff.c **** 	FATFS *fs = dp->obj.fs;
 6503              		.loc 1 2469 2 is_stmt 1 view .LVU2211
2470:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN		/* LFN configuration */
 6504              		.loc 1 2470 2 view .LVU2212
2470:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN		/* LFN configuration */
 6505              		.loc 1 2470 9 is_stmt 0 view .LVU2213
 6506 0006 0768     		ldr	r7, [r0]
 6507              	.LVL789:
2472:DRIVER/FatFs/source/ff.c **** 	BYTE sn[12], sum;
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 249


 6508              		.loc 1 2472 2 is_stmt 1 view .LVU2214
2473:DRIVER/FatFs/source/ff.c **** 
 6509              		.loc 1 2473 2 view .LVU2215
2476:DRIVER/FatFs/source/ff.c **** 	for (len = 0; fs->lfnbuf[len]; len++) ;	/* Get lfn length */
 6510              		.loc 1 2476 2 view .LVU2216
2476:DRIVER/FatFs/source/ff.c **** 	for (len = 0; fs->lfnbuf[len]; len++) ;	/* Get lfn length */
 6511              		.loc 1 2476 12 is_stmt 0 view .LVU2217
 6512 0008 90F82B50 		ldrb	r5, [r0, #43]	@ zero_extendqisi2
2476:DRIVER/FatFs/source/ff.c **** 	for (len = 0; fs->lfnbuf[len]; len++) ;	/* Get lfn length */
 6513              		.loc 1 2476 5 view .LVU2218
 6514 000c 15F0A00F 		tst	r5, #160
 6515 0010 40F08D80 		bne	.L503
 6516 0014 0646     		mov	r6, r0
2477:DRIVER/FatFs/source/ff.c **** 
 6517              		.loc 1 2477 11 view .LVU2219
 6518 0016 0024     		movs	r4, #0
 6519 0018 00E0     		b	.L494
 6520              	.LVL790:
 6521              	.L495:
2477:DRIVER/FatFs/source/ff.c **** 
 6522              		.loc 1 2477 36 is_stmt 1 discriminator 3 view .LVU2220
 6523 001a 0134     		adds	r4, r4, #1
 6524              	.LVL791:
 6525              	.L494:
2477:DRIVER/FatFs/source/ff.c **** 
 6526              		.loc 1 2477 16 discriminator 1 view .LVU2221
2477:DRIVER/FatFs/source/ff.c **** 
 6527              		.loc 1 2477 18 is_stmt 0 discriminator 1 view .LVU2222
 6528 001c 3B69     		ldr	r3, [r7, #16]
2477:DRIVER/FatFs/source/ff.c **** 
 6529              		.loc 1 2477 26 discriminator 1 view .LVU2223
 6530 001e 33F81430 		ldrh	r3, [r3, r4, lsl #1]
2477:DRIVER/FatFs/source/ff.c **** 
 6531              		.loc 1 2477 16 discriminator 1 view .LVU2224
 6532 0022 002B     		cmp	r3, #0
 6533 0024 F9D1     		bne	.L495
2511:DRIVER/FatFs/source/ff.c **** 	if (sn[NSFLAG] & NS_LOSS) {			/* When LFN is out of 8.3 format, generate a numbered name */
 6534              		.loc 1 2511 2 is_stmt 1 view .LVU2225
 6535 0026 01AB     		add	r3, sp, #4
 6536 0028 306A     		ldr	r0, [r6, #32]	@ unaligned
 6537              	.LVL792:
2511:DRIVER/FatFs/source/ff.c **** 	if (sn[NSFLAG] & NS_LOSS) {			/* When LFN is out of 8.3 format, generate a numbered name */
 6538              		.loc 1 2511 2 is_stmt 0 view .LVU2226
 6539 002a 716A     		ldr	r1, [r6, #36]	@ unaligned
 6540 002c B26A     		ldr	r2, [r6, #40]	@ unaligned
 6541 002e 07C3     		stmia	r3!, {r0, r1, r2}
2512:DRIVER/FatFs/source/ff.c **** 		dp->fn[NSFLAG] = NS_NOLFN;		/* Find only SFN */
 6542              		.loc 1 2512 2 is_stmt 1 view .LVU2227
2512:DRIVER/FatFs/source/ff.c **** 		dp->fn[NSFLAG] = NS_NOLFN;		/* Find only SFN */
 6543              		.loc 1 2512 5 is_stmt 0 view .LVU2228
 6544 0030 15F0010F 		tst	r5, #1
 6545 0034 1DD0     		beq	.L496
2513:DRIVER/FatFs/source/ff.c **** 		for (n = 1; n < 100; n++) {
 6546              		.loc 1 2513 3 is_stmt 1 view .LVU2229
2513:DRIVER/FatFs/source/ff.c **** 		for (n = 1; n < 100; n++) {
 6547              		.loc 1 2513 18 is_stmt 0 view .LVU2230
 6548 0036 4023     		movs	r3, #64
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 250


 6549 0038 86F82B30 		strb	r3, [r6, #43]
2514:DRIVER/FatFs/source/ff.c **** 			gen_numname(dp->fn, sn, fs->lfnbuf, n);	/* Generate a numbered name */
 6550              		.loc 1 2514 3 is_stmt 1 view .LVU2231
 6551              	.LVL793:
2514:DRIVER/FatFs/source/ff.c **** 			gen_numname(dp->fn, sn, fs->lfnbuf, n);	/* Generate a numbered name */
 6552              		.loc 1 2514 10 is_stmt 0 view .LVU2232
 6553 003c 0125     		movs	r5, #1
2514:DRIVER/FatFs/source/ff.c **** 			gen_numname(dp->fn, sn, fs->lfnbuf, n);	/* Generate a numbered name */
 6554              		.loc 1 2514 3 view .LVU2233
 6555 003e 00E0     		b	.L497
 6556              	.LVL794:
 6557              	.L507:
2514:DRIVER/FatFs/source/ff.c **** 			gen_numname(dp->fn, sn, fs->lfnbuf, n);	/* Generate a numbered name */
 6558              		.loc 1 2514 25 is_stmt 1 discriminator 2 view .LVU2234
 6559 0040 0135     		adds	r5, r5, #1
 6560              	.LVL795:
 6561              	.L497:
2514:DRIVER/FatFs/source/ff.c **** 			gen_numname(dp->fn, sn, fs->lfnbuf, n);	/* Generate a numbered name */
 6562              		.loc 1 2514 17 discriminator 1 view .LVU2235
 6563 0042 632D     		cmp	r5, #99
 6564 0044 0CD8     		bhi	.L498
2515:DRIVER/FatFs/source/ff.c **** 			res = dir_find(dp);				/* Check if the name collides with existing SFN */
 6565              		.loc 1 2515 4 view .LVU2236
 6566 0046 2B46     		mov	r3, r5
 6567 0048 3A69     		ldr	r2, [r7, #16]
 6568 004a 01A9     		add	r1, sp, #4
 6569 004c 06F12000 		add	r0, r6, #32
 6570 0050 FFF7FEFF 		bl	gen_numname
 6571              	.LVL796:
2516:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) break;
 6572              		.loc 1 2516 4 view .LVU2237
2516:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) break;
 6573              		.loc 1 2516 10 is_stmt 0 view .LVU2238
 6574 0054 3046     		mov	r0, r6
 6575 0056 FFF7FEFF 		bl	dir_find
 6576              	.LVL797:
2517:DRIVER/FatFs/source/ff.c **** 		}
 6577              		.loc 1 2517 4 is_stmt 1 view .LVU2239
2517:DRIVER/FatFs/source/ff.c **** 		}
 6578              		.loc 1 2517 7 is_stmt 0 view .LVU2240
 6579 005a 8046     		mov	r8, r0
 6580 005c 0028     		cmp	r0, #0
 6581 005e EFD0     		beq	.L507
 6582              	.LVL798:
 6583              	.L498:
2519:DRIVER/FatFs/source/ff.c **** 		if (res != FR_NO_FILE) return res;	/* Abort if the result is other than 'not collided' */
 6584              		.loc 1 2519 3 is_stmt 1 view .LVU2241
2519:DRIVER/FatFs/source/ff.c **** 		if (res != FR_NO_FILE) return res;	/* Abort if the result is other than 'not collided' */
 6585              		.loc 1 2519 6 is_stmt 0 view .LVU2242
 6586 0060 642D     		cmp	r5, #100
 6587 0062 6AD0     		beq	.L504
2520:DRIVER/FatFs/source/ff.c **** 		dp->fn[NSFLAG] = sn[NSFLAG];
 6588              		.loc 1 2520 3 is_stmt 1 view .LVU2243
2520:DRIVER/FatFs/source/ff.c **** 		dp->fn[NSFLAG] = sn[NSFLAG];
 6589              		.loc 1 2520 6 is_stmt 0 view .LVU2244
 6590 0064 B8F1040F 		cmp	r8, #4
 6591 0068 63D1     		bne	.L493
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 251


2521:DRIVER/FatFs/source/ff.c **** 	}
 6592              		.loc 1 2521 3 is_stmt 1 view .LVU2245
2521:DRIVER/FatFs/source/ff.c **** 	}
 6593              		.loc 1 2521 22 is_stmt 0 view .LVU2246
 6594 006a 9DF80F30 		ldrb	r3, [sp, #15]	@ zero_extendqisi2
2521:DRIVER/FatFs/source/ff.c **** 	}
 6595              		.loc 1 2521 18 view .LVU2247
 6596 006e 86F82B30 		strb	r3, [r6, #43]
 6597              	.LVL799:
 6598              	.L496:
2525:DRIVER/FatFs/source/ff.c **** 	res = dir_alloc(dp, n_ent);		/* Allocate entries */
 6599              		.loc 1 2525 2 is_stmt 1 view .LVU2248
2525:DRIVER/FatFs/source/ff.c **** 	res = dir_alloc(dp, n_ent);		/* Allocate entries */
 6600              		.loc 1 2525 13 is_stmt 0 view .LVU2249
 6601 0072 9DF80F30 		ldrb	r3, [sp, #15]	@ zero_extendqisi2
2525:DRIVER/FatFs/source/ff.c **** 	res = dir_alloc(dp, n_ent);		/* Allocate entries */
 6602              		.loc 1 2525 54 view .LVU2250
 6603 0076 13F0020F 		tst	r3, #2
 6604 007a 06D0     		beq	.L505
2525:DRIVER/FatFs/source/ff.c **** 	res = dir_alloc(dp, n_ent);		/* Allocate entries */
 6605              		.loc 1 2525 39 discriminator 1 view .LVU2251
 6606 007c 0C34     		adds	r4, r4, #12
 6607              	.LVL800:
2525:DRIVER/FatFs/source/ff.c **** 	res = dir_alloc(dp, n_ent);		/* Allocate entries */
 6608              		.loc 1 2525 45 discriminator 1 view .LVU2252
 6609 007e 304B     		ldr	r3, .L509
 6610 0080 A3FB0434 		umull	r3, r4, r3, r4
 6611              	.LVL801:
2525:DRIVER/FatFs/source/ff.c **** 	res = dir_alloc(dp, n_ent);		/* Allocate entries */
 6612              		.loc 1 2525 45 discriminator 1 view .LVU2253
 6613 0084 A408     		lsrs	r4, r4, #2
2525:DRIVER/FatFs/source/ff.c **** 	res = dir_alloc(dp, n_ent);		/* Allocate entries */
 6614              		.loc 1 2525 54 discriminator 1 view .LVU2254
 6615 0086 0134     		adds	r4, r4, #1
 6616 0088 00E0     		b	.L500
 6617              	.LVL802:
 6618              	.L505:
2525:DRIVER/FatFs/source/ff.c **** 	res = dir_alloc(dp, n_ent);		/* Allocate entries */
 6619              		.loc 1 2525 54 view .LVU2255
 6620 008a 0124     		movs	r4, #1
 6621              	.LVL803:
 6622              	.L500:
2526:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK && --n_ent) {	/* Set LFN entry if needed */
 6623              		.loc 1 2526 2 is_stmt 1 discriminator 4 view .LVU2256
2526:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK && --n_ent) {	/* Set LFN entry if needed */
 6624              		.loc 1 2526 8 is_stmt 0 discriminator 4 view .LVU2257
 6625 008c 2146     		mov	r1, r4
 6626 008e 3046     		mov	r0, r6
 6627 0090 FFF7FEFF 		bl	dir_alloc
 6628              	.LVL804:
2527:DRIVER/FatFs/source/ff.c **** 		res = dir_sdi(dp, dp->dptr - n_ent * SZDIRE);
 6629              		.loc 1 2527 2 is_stmt 1 discriminator 4 view .LVU2258
2527:DRIVER/FatFs/source/ff.c **** 		res = dir_sdi(dp, dp->dptr - n_ent * SZDIRE);
 6630              		.loc 1 2527 5 is_stmt 0 discriminator 4 view .LVU2259
 6631 0094 8046     		mov	r8, r0
 6632 0096 0028     		cmp	r0, #0
 6633 0098 4BD1     		bne	.L493
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 252


 6634              	.LVL805:
2527:DRIVER/FatFs/source/ff.c **** 		res = dir_sdi(dp, dp->dptr - n_ent * SZDIRE);
 6635              		.loc 1 2527 19 discriminator 1 view .LVU2260
 6636 009a 013C     		subs	r4, r4, #1
 6637              	.LVL806:
2527:DRIVER/FatFs/source/ff.c **** 		res = dir_sdi(dp, dp->dptr - n_ent * SZDIRE);
 6638              		.loc 1 2527 19 discriminator 1 view .LVU2261
 6639 009c 21D1     		bne	.L508
 6640              	.L501:
 6641              	.LVL807:
2547:DRIVER/FatFs/source/ff.c **** 		res = move_window(fs, dp->sect);
 6642              		.loc 1 2547 2 is_stmt 1 view .LVU2262
2547:DRIVER/FatFs/source/ff.c **** 		res = move_window(fs, dp->sect);
 6643              		.loc 1 2547 5 is_stmt 0 view .LVU2263
 6644 009e B8F1000F 		cmp	r8, #0
 6645 00a2 46D1     		bne	.L493
2548:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK) {
 6646              		.loc 1 2548 3 is_stmt 1 view .LVU2264
2548:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK) {
 6647              		.loc 1 2548 9 is_stmt 0 view .LVU2265
 6648 00a4 B169     		ldr	r1, [r6, #24]
 6649 00a6 3846     		mov	r0, r7
 6650 00a8 FFF7FEFF 		bl	move_window
 6651              	.LVL808:
2549:DRIVER/FatFs/source/ff.c **** 			memset(dp->dir, 0, SZDIRE);	/* Clean the entry */
 6652              		.loc 1 2549 3 is_stmt 1 view .LVU2266
2549:DRIVER/FatFs/source/ff.c **** 			memset(dp->dir, 0, SZDIRE);	/* Clean the entry */
 6653              		.loc 1 2549 6 is_stmt 0 view .LVU2267
 6654 00ac 8046     		mov	r8, r0
 6655 00ae 0028     		cmp	r0, #0
 6656 00b0 3FD1     		bne	.L493
2550:DRIVER/FatFs/source/ff.c **** 			memcpy(dp->dir + DIR_Name, dp->fn, 11);	/* Put SFN */
 6657              		.loc 1 2550 4 is_stmt 1 view .LVU2268
 6658 00b2 2022     		movs	r2, #32
 6659 00b4 0021     		movs	r1, #0
 6660 00b6 F069     		ldr	r0, [r6, #28]
 6661              	.LVL809:
2550:DRIVER/FatFs/source/ff.c **** 			memcpy(dp->dir + DIR_Name, dp->fn, 11);	/* Put SFN */
 6662              		.loc 1 2550 4 is_stmt 0 view .LVU2269
 6663 00b8 FFF7FEFF 		bl	memset
 6664              	.LVL810:
2551:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN
 6665              		.loc 1 2551 4 is_stmt 1 view .LVU2270
2551:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN
 6666              		.loc 1 2551 19 is_stmt 0 view .LVU2271
 6667 00bc F369     		ldr	r3, [r6, #28]
2551:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN
 6668              		.loc 1 2551 4 view .LVU2272
 6669 00be 316A     		ldr	r1, [r6, #32]	@ unaligned
 6670 00c0 726A     		ldr	r2, [r6, #36]	@ unaligned
 6671 00c2 1960     		str	r1, [r3]	@ unaligned
 6672 00c4 5A60     		str	r2, [r3, #4]	@ unaligned
 6673 00c6 318D     		ldrh	r1, [r6, #40]	@ unaligned
 6674 00c8 96F82A20 		ldrb	r2, [r6, #42]	@ zero_extendqisi2
 6675 00cc 1981     		strh	r1, [r3, #8]	@ unaligned
 6676 00ce 9A72     		strb	r2, [r3, #10]
2553:DRIVER/FatFs/source/ff.c **** #endif
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 253


 6677              		.loc 1 2553 4 is_stmt 1 view .LVU2273
2553:DRIVER/FatFs/source/ff.c **** #endif
 6678              		.loc 1 2553 31 is_stmt 0 view .LVU2274
 6679 00d0 96F82B30 		ldrb	r3, [r6, #43]	@ zero_extendqisi2
2553:DRIVER/FatFs/source/ff.c **** #endif
 6680              		.loc 1 2553 6 view .LVU2275
 6681 00d4 F269     		ldr	r2, [r6, #28]
2553:DRIVER/FatFs/source/ff.c **** #endif
 6682              		.loc 1 2553 40 view .LVU2276
 6683 00d6 03F01803 		and	r3, r3, #24
2553:DRIVER/FatFs/source/ff.c **** #endif
 6684              		.loc 1 2553 23 view .LVU2277
 6685 00da 1373     		strb	r3, [r2, #12]
2555:DRIVER/FatFs/source/ff.c **** 		}
 6686              		.loc 1 2555 4 is_stmt 1 view .LVU2278
2555:DRIVER/FatFs/source/ff.c **** 		}
 6687              		.loc 1 2555 14 is_stmt 0 view .LVU2279
 6688 00dc 0123     		movs	r3, #1
 6689 00de 3B71     		strb	r3, [r7, #4]
 6690 00e0 27E0     		b	.L493
 6691              	.LVL811:
 6692              	.L508:
2528:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK) {
 6693              		.loc 1 2528 3 is_stmt 1 view .LVU2280
2528:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK) {
 6694              		.loc 1 2528 23 is_stmt 0 view .LVU2281
 6695 00e2 3169     		ldr	r1, [r6, #16]
2528:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK) {
 6696              		.loc 1 2528 9 view .LVU2282
 6697 00e4 A1EB4411 		sub	r1, r1, r4, lsl #5
 6698 00e8 3046     		mov	r0, r6
 6699              	.LVL812:
2528:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK) {
 6700              		.loc 1 2528 9 view .LVU2283
 6701 00ea FFF7FEFF 		bl	dir_sdi
 6702              	.LVL813:
2529:DRIVER/FatFs/source/ff.c **** 			sum = sum_sfn(dp->fn);	/* Checksum value of the SFN tied to the LFN */
 6703              		.loc 1 2529 3 is_stmt 1 view .LVU2284
2529:DRIVER/FatFs/source/ff.c **** 			sum = sum_sfn(dp->fn);	/* Checksum value of the SFN tied to the LFN */
 6704              		.loc 1 2529 6 is_stmt 0 view .LVU2285
 6705 00ee 8046     		mov	r8, r0
 6706 00f0 F8B9     		cbnz	r0, .L493
2530:DRIVER/FatFs/source/ff.c **** 			do {					/* Store LFN entries in bottom first */
 6707              		.loc 1 2530 4 is_stmt 1 view .LVU2286
2530:DRIVER/FatFs/source/ff.c **** 			do {					/* Store LFN entries in bottom first */
 6708              		.loc 1 2530 10 is_stmt 0 view .LVU2287
 6709 00f2 06F12000 		add	r0, r6, #32
 6710              	.LVL814:
2530:DRIVER/FatFs/source/ff.c **** 			do {					/* Store LFN entries in bottom first */
 6711              		.loc 1 2530 10 view .LVU2288
 6712 00f6 FFF7FEFF 		bl	sum_sfn
 6713              	.LVL815:
 6714 00fa 0546     		mov	r5, r0
 6715              	.LVL816:
 6716              	.L502:
2531:DRIVER/FatFs/source/ff.c **** 				res = move_window(fs, dp->sect);
 6717              		.loc 1 2531 4 is_stmt 1 view .LVU2289
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 254


2532:DRIVER/FatFs/source/ff.c **** 				if (res != FR_OK) break;
 6718              		.loc 1 2532 5 view .LVU2290
2532:DRIVER/FatFs/source/ff.c **** 				if (res != FR_OK) break;
 6719              		.loc 1 2532 11 is_stmt 0 view .LVU2291
 6720 00fc B169     		ldr	r1, [r6, #24]
 6721 00fe 3846     		mov	r0, r7
 6722 0100 FFF7FEFF 		bl	move_window
 6723              	.LVL817:
2533:DRIVER/FatFs/source/ff.c **** 				put_lfn(fs->lfnbuf, dp->dir, (BYTE)n_ent, sum);
 6724              		.loc 1 2533 5 is_stmt 1 view .LVU2292
2533:DRIVER/FatFs/source/ff.c **** 				put_lfn(fs->lfnbuf, dp->dir, (BYTE)n_ent, sum);
 6725              		.loc 1 2533 8 is_stmt 0 view .LVU2293
 6726 0104 8046     		mov	r8, r0
 6727 0106 0028     		cmp	r0, #0
 6728 0108 C9D1     		bne	.L501
2534:DRIVER/FatFs/source/ff.c **** 				fs->wflag = 1;
 6729              		.loc 1 2534 5 is_stmt 1 view .LVU2294
 6730 010a 2B46     		mov	r3, r5
 6731 010c E2B2     		uxtb	r2, r4
 6732 010e F169     		ldr	r1, [r6, #28]
 6733 0110 3869     		ldr	r0, [r7, #16]
 6734              	.LVL818:
2534:DRIVER/FatFs/source/ff.c **** 				fs->wflag = 1;
 6735              		.loc 1 2534 5 is_stmt 0 view .LVU2295
 6736 0112 FFF7FEFF 		bl	put_lfn
 6737              	.LVL819:
2535:DRIVER/FatFs/source/ff.c **** 				res = dir_next(dp, 0);	/* Next entry */
 6738              		.loc 1 2535 5 is_stmt 1 view .LVU2296
2535:DRIVER/FatFs/source/ff.c **** 				res = dir_next(dp, 0);	/* Next entry */
 6739              		.loc 1 2535 15 is_stmt 0 view .LVU2297
 6740 0116 0123     		movs	r3, #1
 6741 0118 3B71     		strb	r3, [r7, #4]
2536:DRIVER/FatFs/source/ff.c **** 			} while (res == FR_OK && --n_ent);
 6742              		.loc 1 2536 5 is_stmt 1 view .LVU2298
2536:DRIVER/FatFs/source/ff.c **** 			} while (res == FR_OK && --n_ent);
 6743              		.loc 1 2536 11 is_stmt 0 view .LVU2299
 6744 011a 0021     		movs	r1, #0
 6745 011c 3046     		mov	r0, r6
 6746 011e FFF7FEFF 		bl	dir_next
 6747              	.LVL820:
2537:DRIVER/FatFs/source/ff.c **** 		}
 6748              		.loc 1 2537 26 is_stmt 1 view .LVU2300
 6749 0122 8046     		mov	r8, r0
 6750 0124 0028     		cmp	r0, #0
 6751 0126 BAD1     		bne	.L501
 6752              	.LVL821:
2537:DRIVER/FatFs/source/ff.c **** 		}
 6753              		.loc 1 2537 26 is_stmt 0 discriminator 1 view .LVU2301
 6754 0128 013C     		subs	r4, r4, #1
 6755              	.LVL822:
2537:DRIVER/FatFs/source/ff.c **** 		}
 6756              		.loc 1 2537 26 discriminator 1 view .LVU2302
 6757 012a E7D1     		bne	.L502
 6758 012c B7E7     		b	.L501
 6759              	.LVL823:
 6760              	.L503:
2476:DRIVER/FatFs/source/ff.c **** 	for (len = 0; fs->lfnbuf[len]; len++) ;	/* Get lfn length */
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 255


 6761              		.loc 1 2476 52 view .LVU2303
 6762 012e 4FF00608 		mov	r8, #6
 6763              	.LVL824:
 6764              	.L493:
2560:DRIVER/FatFs/source/ff.c **** 
 6765              		.loc 1 2560 1 view .LVU2304
 6766 0132 4046     		mov	r0, r8
 6767 0134 04B0     		add	sp, sp, #16
 6768              	.LCFI46:
 6769              		.cfi_remember_state
 6770              		.cfi_def_cfa_offset 24
 6771              		@ sp needed
 6772 0136 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 6773              	.LVL825:
 6774              	.L504:
 6775              	.LCFI47:
 6776              		.cfi_restore_state
2519:DRIVER/FatFs/source/ff.c **** 		if (res != FR_NO_FILE) return res;	/* Abort if the result is other than 'not collided' */
 6777              		.loc 1 2519 24 view .LVU2305
 6778 013a 4FF00708 		mov	r8, #7
 6779              	.LVL826:
2519:DRIVER/FatFs/source/ff.c **** 		if (res != FR_NO_FILE) return res;	/* Abort if the result is other than 'not collided' */
 6780              		.loc 1 2519 24 view .LVU2306
 6781 013e F8E7     		b	.L493
 6782              	.L510:
 6783              		.align	2
 6784              	.L509:
 6785 0140 4FECC44E 		.word	1321528399
 6786              		.cfi_endproc
 6787              	.LFE29:
 6789              		.section	.text.get_fileinfo,"ax",%progbits
 6790              		.align	1
 6791              		.syntax unified
 6792              		.thumb
 6793              		.thumb_func
 6795              	get_fileinfo:
 6796              	.LVL827:
 6797              	.LFB31:
2621:DRIVER/FatFs/source/ff.c **** 	UINT si, di;
 6798              		.loc 1 2621 1 is_stmt 1 view -0
 6799              		.cfi_startproc
 6800              		@ args = 0, pretend = 0, frame = 0
 6801              		@ frame_needed = 0, uses_anonymous_args = 0
2621:DRIVER/FatFs/source/ff.c **** 	UINT si, di;
 6802              		.loc 1 2621 1 is_stmt 0 view .LVU2308
 6803 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 6804              	.LCFI48:
 6805              		.cfi_def_cfa_offset 32
 6806              		.cfi_offset 4, -32
 6807              		.cfi_offset 5, -28
 6808              		.cfi_offset 6, -24
 6809              		.cfi_offset 7, -20
 6810              		.cfi_offset 8, -16
 6811              		.cfi_offset 9, -12
 6812              		.cfi_offset 10, -8
 6813              		.cfi_offset 14, -4
2622:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 256


 6814              		.loc 1 2622 2 is_stmt 1 view .LVU2309
2624:DRIVER/FatFs/source/ff.c **** 	WCHAR wc, hs;
 6815              		.loc 1 2624 2 view .LVU2310
2625:DRIVER/FatFs/source/ff.c **** 	FATFS *fs = dp->obj.fs;
 6816              		.loc 1 2625 2 view .LVU2311
2626:DRIVER/FatFs/source/ff.c **** 	UINT nw;
 6817              		.loc 1 2626 2 view .LVU2312
2626:DRIVER/FatFs/source/ff.c **** 	UINT nw;
 6818              		.loc 1 2626 9 is_stmt 0 view .LVU2313
 6819 0004 0768     		ldr	r7, [r0]
 6820              	.LVL828:
2627:DRIVER/FatFs/source/ff.c **** #else
 6821              		.loc 1 2627 2 is_stmt 1 view .LVU2314
2633:DRIVER/FatFs/source/ff.c **** 	if (dp->sect == 0) return;	/* Exit if read pointer has reached end of directory */
 6822              		.loc 1 2633 2 view .LVU2315
2633:DRIVER/FatFs/source/ff.c **** 	if (dp->sect == 0) return;	/* Exit if read pointer has reached end of directory */
 6823              		.loc 1 2633 16 is_stmt 0 view .LVU2316
 6824 0006 0023     		movs	r3, #0
 6825 0008 8B75     		strb	r3, [r1, #22]
2634:DRIVER/FatFs/source/ff.c **** 
 6826              		.loc 1 2634 2 is_stmt 1 view .LVU2317
2634:DRIVER/FatFs/source/ff.c **** 
 6827              		.loc 1 2634 8 is_stmt 0 view .LVU2318
 6828 000a 8369     		ldr	r3, [r0, #24]
2634:DRIVER/FatFs/source/ff.c **** 
 6829              		.loc 1 2634 5 view .LVU2319
 6830 000c 002B     		cmp	r3, #0
 6831 000e 00F0A480 		beq	.L511
 6832 0012 8146     		mov	r9, r0
 6833 0014 8846     		mov	r8, r1
2672:DRIVER/FatFs/source/ff.c **** 			si = di = 0;
 6834              		.loc 1 2672 3 is_stmt 1 view .LVU2320
2672:DRIVER/FatFs/source/ff.c **** 			si = di = 0;
 6835              		.loc 1 2672 9 is_stmt 0 view .LVU2321
 6836 0016 C36A     		ldr	r3, [r0, #44]
2672:DRIVER/FatFs/source/ff.c **** 			si = di = 0;
 6837              		.loc 1 2672 6 view .LVU2322
 6838 0018 B3F1FF3F 		cmp	r3, #-1
 6839 001c 25D0     		beq	.L514
2674:DRIVER/FatFs/source/ff.c **** 			while (fs->lfnbuf[si] != 0) {
 6840              		.loc 1 2674 7 view .LVU2323
 6841 001e 0026     		movs	r6, #0
2673:DRIVER/FatFs/source/ff.c **** 			hs = 0;
 6842              		.loc 1 2673 12 view .LVU2324
 6843 0020 3446     		mov	r4, r6
2673:DRIVER/FatFs/source/ff.c **** 			hs = 0;
 6844              		.loc 1 2673 7 view .LVU2325
 6845 0022 3546     		mov	r5, r6
 6846 0024 0CE0     		b	.L513
 6847              	.LVL829:
 6848              	.L515:
2680:DRIVER/FatFs/source/ff.c **** 				if (nw == 0) {				/* Buffer overflow or wrong char? */
 6849              		.loc 1 2680 5 is_stmt 1 view .LVU2326
2680:DRIVER/FatFs/source/ff.c **** 				if (nw == 0) {				/* Buffer overflow or wrong char? */
 6850              		.loc 1 2680 10 is_stmt 0 view .LVU2327
 6851 0026 04F11001 		add	r1, r4, #16
 6852 002a 4144     		add	r1, r1, r8
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 257


 6853 002c C4F1FF02 		rsb	r2, r4, #255
 6854 0030 0631     		adds	r1, r1, #6
 6855 0032 40EA0640 		orr	r0, r0, r6, lsl #16
 6856              	.LVL830:
2680:DRIVER/FatFs/source/ff.c **** 				if (nw == 0) {				/* Buffer overflow or wrong char? */
 6857              		.loc 1 2680 10 view .LVU2328
 6858 0036 FFF7FEFF 		bl	put_utf
 6859              	.LVL831:
2681:DRIVER/FatFs/source/ff.c **** 					di = 0; break;
 6860              		.loc 1 2681 5 is_stmt 1 view .LVU2329
2681:DRIVER/FatFs/source/ff.c **** 					di = 0; break;
 6861              		.loc 1 2681 8 is_stmt 0 view .LVU2330
 6862 003a 80B1     		cbz	r0, .L535
2684:DRIVER/FatFs/source/ff.c **** 				hs = 0;
 6863              		.loc 1 2684 5 is_stmt 1 view .LVU2331
2684:DRIVER/FatFs/source/ff.c **** 				hs = 0;
 6864              		.loc 1 2684 8 is_stmt 0 view .LVU2332
 6865 003c 0444     		add	r4, r4, r0
 6866              	.LVL832:
2685:DRIVER/FatFs/source/ff.c **** 			}
 6867              		.loc 1 2685 5 is_stmt 1 view .LVU2333
2685:DRIVER/FatFs/source/ff.c **** 			}
 6868              		.loc 1 2685 8 is_stmt 0 view .LVU2334
 6869 003e 0026     		movs	r6, #0
 6870              	.LVL833:
 6871              	.L513:
2675:DRIVER/FatFs/source/ff.c **** 				wc = fs->lfnbuf[si++];		/* Get an LFN character (UTF-16) */
 6872              		.loc 1 2675 26 is_stmt 1 view .LVU2335
2675:DRIVER/FatFs/source/ff.c **** 				wc = fs->lfnbuf[si++];		/* Get an LFN character (UTF-16) */
 6873              		.loc 1 2675 13 is_stmt 0 view .LVU2336
 6874 0040 3B69     		ldr	r3, [r7, #16]
2675:DRIVER/FatFs/source/ff.c **** 				wc = fs->lfnbuf[si++];		/* Get an LFN character (UTF-16) */
 6875              		.loc 1 2675 21 view .LVU2337
 6876 0042 33F81500 		ldrh	r0, [r3, r5, lsl #1]
2675:DRIVER/FatFs/source/ff.c **** 				wc = fs->lfnbuf[si++];		/* Get an LFN character (UTF-16) */
 6877              		.loc 1 2675 26 view .LVU2338
 6878 0046 58B1     		cbz	r0, .L517
2676:DRIVER/FatFs/source/ff.c **** 				if (hs == 0 && IsSurrogate(wc)) {	/* Is it a surrogate? */
 6879              		.loc 1 2676 5 is_stmt 1 view .LVU2339
2676:DRIVER/FatFs/source/ff.c **** 				if (hs == 0 && IsSurrogate(wc)) {	/* Is it a surrogate? */
 6880              		.loc 1 2676 23 is_stmt 0 view .LVU2340
 6881 0048 0135     		adds	r5, r5, #1
 6882              	.LVL834:
2677:DRIVER/FatFs/source/ff.c **** 					hs = wc; continue;		/* Get low surrogate */
 6883              		.loc 1 2677 5 is_stmt 1 view .LVU2341
2677:DRIVER/FatFs/source/ff.c **** 					hs = wc; continue;		/* Get low surrogate */
 6884              		.loc 1 2677 8 is_stmt 0 view .LVU2342
 6885 004a 002E     		cmp	r6, #0
 6886 004c EBD1     		bne	.L515
2677:DRIVER/FatFs/source/ff.c **** 					hs = wc; continue;		/* Get low surrogate */
 6887              		.loc 1 2677 20 discriminator 1 view .LVU2343
 6888 004e 00F52053 		add	r3, r0, #10240
 6889 0052 9BB2     		uxth	r3, r3
2677:DRIVER/FatFs/source/ff.c **** 					hs = wc; continue;		/* Get low surrogate */
 6890              		.loc 1 2677 17 discriminator 1 view .LVU2344
 6891 0054 B3F5006F 		cmp	r3, #2048
 6892 0058 E5D2     		bcs	.L515
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 258


2678:DRIVER/FatFs/source/ff.c **** 				}
 6893              		.loc 1 2678 9 view .LVU2345
 6894 005a 0646     		mov	r6, r0
 6895              	.LVL835:
2678:DRIVER/FatFs/source/ff.c **** 				}
 6896              		.loc 1 2678 9 view .LVU2346
 6897 005c F0E7     		b	.L513
 6898              	.LVL836:
 6899              	.L535:
2682:DRIVER/FatFs/source/ff.c **** 				}
 6900              		.loc 1 2682 9 view .LVU2347
 6901 005e 0446     		mov	r4, r0
 6902              	.LVL837:
 6903              	.L517:
2687:DRIVER/FatFs/source/ff.c **** 			fno->fname[di] = 0;		/* Terminate the LFN (null string means LFN is invalid) */
 6904              		.loc 1 2687 4 is_stmt 1 view .LVU2348
2687:DRIVER/FatFs/source/ff.c **** 			fno->fname[di] = 0;		/* Terminate the LFN (null string means LFN is invalid) */
 6905              		.loc 1 2687 7 is_stmt 0 view .LVU2349
 6906 0060 06B1     		cbz	r6, .L519
2687:DRIVER/FatFs/source/ff.c **** 			fno->fname[di] = 0;		/* Terminate the LFN (null string means LFN is invalid) */
 6907              		.loc 1 2687 20 view .LVU2350
 6908 0062 0024     		movs	r4, #0
 6909              	.LVL838:
 6910              	.L519:
2688:DRIVER/FatFs/source/ff.c **** 		}
 6911              		.loc 1 2688 4 is_stmt 1 view .LVU2351
2688:DRIVER/FatFs/source/ff.c **** 		}
 6912              		.loc 1 2688 19 is_stmt 0 view .LVU2352
 6913 0064 4444     		add	r4, r4, r8
 6914              	.LVL839:
2688:DRIVER/FatFs/source/ff.c **** 		}
 6915              		.loc 1 2688 19 view .LVU2353
 6916 0066 0023     		movs	r3, #0
 6917 0068 A375     		strb	r3, [r4, #22]
 6918              	.LVL840:
 6919              	.L514:
2694:DRIVER/FatFs/source/ff.c **** 		if (wc == ' ') continue;	/* Skip padding spaces */
 6920              		.loc 1 2694 18 view .LVU2354
 6921 006a 0025     		movs	r5, #0
 6922 006c 2E46     		mov	r6, r5
 6923 006e 1BE0     		b	.L525
 6924              	.LVL841:
 6925              	.L544:
2696:DRIVER/FatFs/source/ff.c **** 		if (si == 9 && di < FF_SFN_BUF) fno->altname[di++] = '.';	/* Insert a . if extension is exist */
 6926              		.loc 1 2696 23 view .LVU2355
 6927 0070 E524     		movs	r4, #229
 6928              	.LVL842:
2696:DRIVER/FatFs/source/ff.c **** 		if (si == 9 && di < FF_SFN_BUF) fno->altname[di++] = '.';	/* Insert a . if extension is exist */
 6929              		.loc 1 2696 23 view .LVU2356
 6930 0072 23E0     		b	.L521
 6931              	.LVL843:
 6932              	.L545:
2697:DRIVER/FatFs/source/ff.c **** #if FF_LFN_UNICODE >= 1	/* Unicode output */
 6933              		.loc 1 2697 15 discriminator 1 view .LVU2357
 6934 0074 0B2D     		cmp	r5, #11
 6935 0076 23D8     		bhi	.L522
2697:DRIVER/FatFs/source/ff.c **** #if FF_LFN_UNICODE >= 1	/* Unicode output */
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 259


 6936              		.loc 1 2697 35 is_stmt 1 discriminator 2 view .LVU2358
 6937              	.LVL844:
2697:DRIVER/FatFs/source/ff.c **** #if FF_LFN_UNICODE >= 1	/* Unicode output */
 6938              		.loc 1 2697 54 is_stmt 0 discriminator 2 view .LVU2359
 6939 0078 08EB0503 		add	r3, r8, r5
 6940 007c 2E22     		movs	r2, #46
 6941 007e 5A72     		strb	r2, [r3, #9]
2697:DRIVER/FatFs/source/ff.c **** #if FF_LFN_UNICODE >= 1	/* Unicode output */
 6942              		.loc 1 2697 50 discriminator 2 view .LVU2360
 6943 0080 0135     		adds	r5, r5, #1
 6944              	.LVL845:
2697:DRIVER/FatFs/source/ff.c **** #if FF_LFN_UNICODE >= 1	/* Unicode output */
 6945              		.loc 1 2697 50 discriminator 2 view .LVU2361
 6946 0082 1DE0     		b	.L522
 6947              	.L523:
2702:DRIVER/FatFs/source/ff.c **** 		if (wc == 0) {				/* Wrong char in the current code page? */
 6948              		.loc 1 2702 3 is_stmt 1 view .LVU2362
2702:DRIVER/FatFs/source/ff.c **** 		if (wc == 0) {				/* Wrong char in the current code page? */
 6949              		.loc 1 2702 8 is_stmt 0 view .LVU2363
 6950 0084 40F2B511 		movw	r1, #437
 6951 0088 2046     		mov	r0, r4
 6952 008a FFF7FEFF 		bl	ff_oem2uni
 6953              	.LVL846:
2703:DRIVER/FatFs/source/ff.c **** 			di = 0; break;
 6954              		.loc 1 2703 3 is_stmt 1 view .LVU2364
2703:DRIVER/FatFs/source/ff.c **** 			di = 0; break;
 6955              		.loc 1 2703 6 is_stmt 0 view .LVU2365
 6956 008e 88B3     		cbz	r0, .L539
2706:DRIVER/FatFs/source/ff.c **** 		if (nw == 0) {				/* Buffer overflow? */
 6957              		.loc 1 2706 3 is_stmt 1 view .LVU2366
2706:DRIVER/FatFs/source/ff.c **** 		if (nw == 0) {				/* Buffer overflow? */
 6958              		.loc 1 2706 8 is_stmt 0 view .LVU2367
 6959 0090 05F10801 		add	r1, r5, #8
 6960 0094 4144     		add	r1, r1, r8
 6961 0096 C5F10C02 		rsb	r2, r5, #12
 6962 009a 0131     		adds	r1, r1, #1
 6963 009c FFF7FEFF 		bl	put_utf
 6964              	.LVL847:
2707:DRIVER/FatFs/source/ff.c **** 			di = 0; break;
 6965              		.loc 1 2707 3 is_stmt 1 view .LVU2368
2707:DRIVER/FatFs/source/ff.c **** 			di = 0; break;
 6966              		.loc 1 2707 6 is_stmt 0 view .LVU2369
 6967 00a0 0028     		cmp	r0, #0
 6968 00a2 5CD0     		beq	.L540
2710:DRIVER/FatFs/source/ff.c **** #else					/* ANSI/OEM output */
 6969              		.loc 1 2710 3 is_stmt 1 view .LVU2370
2710:DRIVER/FatFs/source/ff.c **** #else					/* ANSI/OEM output */
 6970              		.loc 1 2710 6 is_stmt 0 view .LVU2371
 6971 00a4 0544     		add	r5, r5, r0
 6972              	.LVL848:
2710:DRIVER/FatFs/source/ff.c **** #else					/* ANSI/OEM output */
 6973              		.loc 1 2710 6 view .LVU2372
 6974 00a6 3E46     		mov	r6, r7
 6975              	.LVL849:
 6976              	.L525:
2693:DRIVER/FatFs/source/ff.c **** 		wc = dp->dir[si++];			/* Get a char */
 6977              		.loc 1 2693 12 is_stmt 1 view .LVU2373
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 260


 6978 00a8 0A2E     		cmp	r6, #10
 6979 00aa 24D8     		bhi	.L524
2694:DRIVER/FatFs/source/ff.c **** 		if (wc == ' ') continue;	/* Skip padding spaces */
 6980              		.loc 1 2694 3 view .LVU2374
2694:DRIVER/FatFs/source/ff.c **** 		if (wc == ' ') continue;	/* Skip padding spaces */
 6981              		.loc 1 2694 10 is_stmt 0 view .LVU2375
 6982 00ac D9F81C30 		ldr	r3, [r9, #28]
2694:DRIVER/FatFs/source/ff.c **** 		if (wc == ' ') continue;	/* Skip padding spaces */
 6983              		.loc 1 2694 18 view .LVU2376
 6984 00b0 771C     		adds	r7, r6, #1
 6985              	.LVL850:
2694:DRIVER/FatFs/source/ff.c **** 		if (wc == ' ') continue;	/* Skip padding spaces */
 6986              		.loc 1 2694 15 view .LVU2377
 6987 00b2 9C5D     		ldrb	r4, [r3, r6]	@ zero_extendqisi2
 6988              	.LVL851:
2695:DRIVER/FatFs/source/ff.c **** 		if (wc == RDDEM) wc = DDEM;	/* Restore replaced DDEM character */
 6989              		.loc 1 2695 3 is_stmt 1 view .LVU2378
2695:DRIVER/FatFs/source/ff.c **** 		if (wc == RDDEM) wc = DDEM;	/* Restore replaced DDEM character */
 6990              		.loc 1 2695 6 is_stmt 0 view .LVU2379
 6991 00b4 202C     		cmp	r4, #32
 6992 00b6 1BD0     		beq	.L537
2696:DRIVER/FatFs/source/ff.c **** 		if (si == 9 && di < FF_SFN_BUF) fno->altname[di++] = '.';	/* Insert a . if extension is exist */
 6993              		.loc 1 2696 3 is_stmt 1 view .LVU2380
2696:DRIVER/FatFs/source/ff.c **** 		if (si == 9 && di < FF_SFN_BUF) fno->altname[di++] = '.';	/* Insert a . if extension is exist */
 6994              		.loc 1 2696 6 is_stmt 0 view .LVU2381
 6995 00b8 052C     		cmp	r4, #5
 6996 00ba D9D0     		beq	.L544
 6997              	.LVL852:
 6998              	.L521:
2697:DRIVER/FatFs/source/ff.c **** #if FF_LFN_UNICODE >= 1	/* Unicode output */
 6999              		.loc 1 2697 3 is_stmt 1 view .LVU2382
2697:DRIVER/FatFs/source/ff.c **** #if FF_LFN_UNICODE >= 1	/* Unicode output */
 7000              		.loc 1 2697 6 is_stmt 0 view .LVU2383
 7001 00bc 092F     		cmp	r7, #9
 7002 00be D9D0     		beq	.L545
 7003              	.L522:
2699:DRIVER/FatFs/source/ff.c **** 			wc = wc << 8 | dp->dir[si++];
 7004              		.loc 1 2699 3 is_stmt 1 view .LVU2384
2699:DRIVER/FatFs/source/ff.c **** 			wc = wc << 8 | dp->dir[si++];
 7005              		.loc 1 2699 7 is_stmt 0 view .LVU2385
 7006 00c0 E0B2     		uxtb	r0, r4
 7007 00c2 FFF7FEFF 		bl	dbc_1st
 7008              	.LVL853:
2699:DRIVER/FatFs/source/ff.c **** 			wc = wc << 8 | dp->dir[si++];
 7009              		.loc 1 2699 6 view .LVU2386
 7010 00c6 0028     		cmp	r0, #0
 7011 00c8 DCD0     		beq	.L523
2699:DRIVER/FatFs/source/ff.c **** 			wc = wc << 8 | dp->dir[si++];
 7012              		.loc 1 2699 25 discriminator 1 view .LVU2387
 7013 00ca 082F     		cmp	r7, #8
 7014 00cc DAD0     		beq	.L523
2699:DRIVER/FatFs/source/ff.c **** 			wc = wc << 8 | dp->dir[si++];
 7015              		.loc 1 2699 36 discriminator 2 view .LVU2388
 7016 00ce 0B2F     		cmp	r7, #11
 7017 00d0 D8D0     		beq	.L523
2699:DRIVER/FatFs/source/ff.c **** 			wc = wc << 8 | dp->dir[si++];
 7018              		.loc 1 2699 61 discriminator 3 view .LVU2389
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 261


 7019 00d2 D9F81C30 		ldr	r3, [r9, #28]
2699:DRIVER/FatFs/source/ff.c **** 			wc = wc << 8 | dp->dir[si++];
 7020              		.loc 1 2699 51 discriminator 3 view .LVU2390
 7021 00d6 13F807A0 		ldrb	r10, [r3, r7]	@ zero_extendqisi2
 7022 00da 5046     		mov	r0, r10
 7023 00dc FFF7FEFF 		bl	dbc_2nd
 7024              	.LVL854:
2699:DRIVER/FatFs/source/ff.c **** 			wc = wc << 8 | dp->dir[si++];
 7025              		.loc 1 2699 48 discriminator 3 view .LVU2391
 7026 00e0 0028     		cmp	r0, #0
 7027 00e2 CFD0     		beq	.L523
2700:DRIVER/FatFs/source/ff.c **** 		}
 7028              		.loc 1 2700 4 is_stmt 1 view .LVU2392
2700:DRIVER/FatFs/source/ff.c **** 		}
 7029              		.loc 1 2700 29 is_stmt 0 view .LVU2393
 7030 00e4 B71C     		adds	r7, r6, #2
 7031              	.LVL855:
2700:DRIVER/FatFs/source/ff.c **** 		}
 7032              		.loc 1 2700 17 view .LVU2394
 7033 00e6 4AEA042A 		orr	r10, r10, r4, lsl #8
2700:DRIVER/FatFs/source/ff.c **** 		}
 7034              		.loc 1 2700 7 view .LVU2395
 7035 00ea 1FFA8AF4 		uxth	r4, r10
 7036              	.LVL856:
2700:DRIVER/FatFs/source/ff.c **** 		}
 7037              		.loc 1 2700 7 view .LVU2396
 7038 00ee C9E7     		b	.L523
 7039              	.L537:
2694:DRIVER/FatFs/source/ff.c **** 		if (wc == ' ') continue;	/* Skip padding spaces */
 7040              		.loc 1 2694 18 view .LVU2397
 7041 00f0 3E46     		mov	r6, r7
 7042 00f2 D9E7     		b	.L525
 7043              	.LVL857:
 7044              	.L539:
2704:DRIVER/FatFs/source/ff.c **** 		}
 7045              		.loc 1 2704 7 view .LVU2398
 7046 00f4 0025     		movs	r5, #0
 7047              	.LVL858:
 7048              	.L524:
2715:DRIVER/FatFs/source/ff.c **** 
 7049              		.loc 1 2715 2 is_stmt 1 view .LVU2399
2715:DRIVER/FatFs/source/ff.c **** 
 7050              		.loc 1 2715 19 is_stmt 0 view .LVU2400
 7051 00f6 08EB0503 		add	r3, r8, r5
 7052 00fa 0022     		movs	r2, #0
 7053 00fc 5A72     		strb	r2, [r3, #9]
2717:DRIVER/FatFs/source/ff.c **** 		if (di == 0) {	/* If LFN and SFN both are invalid, this object is inaccessible */
 7054              		.loc 1 2717 2 is_stmt 1 view .LVU2401
2717:DRIVER/FatFs/source/ff.c **** 		if (di == 0) {	/* If LFN and SFN both are invalid, this object is inaccessible */
 7055              		.loc 1 2717 16 is_stmt 0 view .LVU2402
 7056 00fe 98F81630 		ldrb	r3, [r8, #22]	@ zero_extendqisi2
2717:DRIVER/FatFs/source/ff.c **** 		if (di == 0) {	/* If LFN and SFN both are invalid, this object is inaccessible */
 7057              		.loc 1 2717 5 view .LVU2403
 7058 0102 73B9     		cbnz	r3, .L527
2718:DRIVER/FatFs/source/ff.c **** 			fno->fname[di++] = '\?';
 7059              		.loc 1 2718 3 is_stmt 1 view .LVU2404
2718:DRIVER/FatFs/source/ff.c **** 			fno->fname[di++] = '\?';
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 262


 7060              		.loc 1 2718 6 is_stmt 0 view .LVU2405
 7061 0104 002D     		cmp	r5, #0
 7062 0106 48D1     		bne	.L541
2719:DRIVER/FatFs/source/ff.c **** 		} else {
 7063              		.loc 1 2719 4 is_stmt 1 view .LVU2406
2719:DRIVER/FatFs/source/ff.c **** 		} else {
 7064              		.loc 1 2719 17 is_stmt 0 view .LVU2407
 7065 0108 6A1C     		adds	r2, r5, #1
 7066              	.LVL859:
2719:DRIVER/FatFs/source/ff.c **** 		} else {
 7067              		.loc 1 2719 21 view .LVU2408
 7068 010a 4544     		add	r5, r5, r8
 7069 010c 3F23     		movs	r3, #63
 7070 010e AB75     		strb	r3, [r5, #22]
 7071              	.L529:
2728:DRIVER/FatFs/source/ff.c **** 		if (!dp->dir[DIR_NTres]) fno->altname[0] = 0;	/* Altname is not needed if neither LFN nor case in
 7072              		.loc 1 2728 3 is_stmt 1 view .LVU2409
2728:DRIVER/FatFs/source/ff.c **** 		if (!dp->dir[DIR_NTres]) fno->altname[0] = 0;	/* Altname is not needed if neither LFN nor case in
 7073              		.loc 1 2728 18 is_stmt 0 view .LVU2410
 7074 0110 4244     		add	r2, r2, r8
 7075              	.LVL860:
2728:DRIVER/FatFs/source/ff.c **** 		if (!dp->dir[DIR_NTres]) fno->altname[0] = 0;	/* Altname is not needed if neither LFN nor case in
 7076              		.loc 1 2728 18 view .LVU2411
 7077 0112 0023     		movs	r3, #0
 7078 0114 9375     		strb	r3, [r2, #22]
2729:DRIVER/FatFs/source/ff.c **** 	}
 7079              		.loc 1 2729 3 is_stmt 1 view .LVU2412
2729:DRIVER/FatFs/source/ff.c **** 	}
 7080              		.loc 1 2729 10 is_stmt 0 view .LVU2413
 7081 0116 D9F81C30 		ldr	r3, [r9, #28]
2729:DRIVER/FatFs/source/ff.c **** 	}
 7082              		.loc 1 2729 15 view .LVU2414
 7083 011a 1B7B     		ldrb	r3, [r3, #12]	@ zero_extendqisi2
2729:DRIVER/FatFs/source/ff.c **** 	}
 7084              		.loc 1 2729 6 view .LVU2415
 7085 011c 0BB9     		cbnz	r3, .L527
2729:DRIVER/FatFs/source/ff.c **** 	}
 7086              		.loc 1 2729 28 is_stmt 1 discriminator 1 view .LVU2416
2729:DRIVER/FatFs/source/ff.c **** 	}
 7087              		.loc 1 2729 44 is_stmt 0 discriminator 1 view .LVU2417
 7088 011e 88F80930 		strb	r3, [r8, #9]
 7089              	.LVL861:
 7090              	.L527:
2744:DRIVER/FatFs/source/ff.c **** 	fno->fsize = ld_dword(dp->dir + DIR_FileSize);		/* Size */
 7091              		.loc 1 2744 2 is_stmt 1 view .LVU2418
2744:DRIVER/FatFs/source/ff.c **** 	fno->fsize = ld_dword(dp->dir + DIR_FileSize);		/* Size */
 7092              		.loc 1 2744 19 is_stmt 0 view .LVU2419
 7093 0122 D9F81C30 		ldr	r3, [r9, #28]
2744:DRIVER/FatFs/source/ff.c **** 	fno->fsize = ld_dword(dp->dir + DIR_FileSize);		/* Size */
 7094              		.loc 1 2744 24 view .LVU2420
 7095 0126 DB7A     		ldrb	r3, [r3, #11]	@ zero_extendqisi2
2744:DRIVER/FatFs/source/ff.c **** 	fno->fsize = ld_dword(dp->dir + DIR_FileSize);		/* Size */
 7096              		.loc 1 2744 35 view .LVU2421
 7097 0128 03F03F03 		and	r3, r3, #63
2744:DRIVER/FatFs/source/ff.c **** 	fno->fsize = ld_dword(dp->dir + DIR_FileSize);		/* Size */
 7098              		.loc 1 2744 15 view .LVU2422
 7099 012c 88F80830 		strb	r3, [r8, #8]
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 263


2745:DRIVER/FatFs/source/ff.c **** 	fno->ftime = ld_word(dp->dir + DIR_ModTime + 0);	/* Time */
 7100              		.loc 1 2745 2 is_stmt 1 view .LVU2423
2745:DRIVER/FatFs/source/ff.c **** 	fno->ftime = ld_word(dp->dir + DIR_ModTime + 0);	/* Time */
 7101              		.loc 1 2745 26 is_stmt 0 view .LVU2424
 7102 0130 D9F81C00 		ldr	r0, [r9, #28]
2745:DRIVER/FatFs/source/ff.c **** 	fno->ftime = ld_word(dp->dir + DIR_ModTime + 0);	/* Time */
 7103              		.loc 1 2745 15 view .LVU2425
 7104 0134 1C30     		adds	r0, r0, #28
 7105 0136 FFF7FEFF 		bl	ld_dword
 7106              	.LVL862:
2745:DRIVER/FatFs/source/ff.c **** 	fno->ftime = ld_word(dp->dir + DIR_ModTime + 0);	/* Time */
 7107              		.loc 1 2745 13 view .LVU2426
 7108 013a C8F80000 		str	r0, [r8]
2746:DRIVER/FatFs/source/ff.c **** 	fno->fdate = ld_word(dp->dir + DIR_ModTime + 2);	/* Date */
 7109              		.loc 1 2746 2 is_stmt 1 view .LVU2427
2746:DRIVER/FatFs/source/ff.c **** 	fno->fdate = ld_word(dp->dir + DIR_ModTime + 2);	/* Date */
 7110              		.loc 1 2746 25 is_stmt 0 view .LVU2428
 7111 013e D9F81C00 		ldr	r0, [r9, #28]
2746:DRIVER/FatFs/source/ff.c **** 	fno->fdate = ld_word(dp->dir + DIR_ModTime + 2);	/* Date */
 7112              		.loc 1 2746 15 view .LVU2429
 7113 0142 1630     		adds	r0, r0, #22
 7114 0144 FFF7FEFF 		bl	ld_word
 7115              	.LVL863:
2746:DRIVER/FatFs/source/ff.c **** 	fno->fdate = ld_word(dp->dir + DIR_ModTime + 2);	/* Date */
 7116              		.loc 1 2746 13 view .LVU2430
 7117 0148 A8F80600 		strh	r0, [r8, #6]	@ movhi
2747:DRIVER/FatFs/source/ff.c **** }
 7118              		.loc 1 2747 2 is_stmt 1 view .LVU2431
2747:DRIVER/FatFs/source/ff.c **** }
 7119              		.loc 1 2747 25 is_stmt 0 view .LVU2432
 7120 014c D9F81C00 		ldr	r0, [r9, #28]
2747:DRIVER/FatFs/source/ff.c **** }
 7121              		.loc 1 2747 15 view .LVU2433
 7122 0150 1830     		adds	r0, r0, #24
 7123 0152 FFF7FEFF 		bl	ld_word
 7124              	.LVL864:
2747:DRIVER/FatFs/source/ff.c **** }
 7125              		.loc 1 2747 13 view .LVU2434
 7126 0156 A8F80400 		strh	r0, [r8, #4]	@ movhi
 7127              	.LVL865:
 7128              	.L511:
2748:DRIVER/FatFs/source/ff.c **** 
 7129              		.loc 1 2748 1 view .LVU2435
 7130 015a BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 7131              	.LVL866:
 7132              	.L540:
2708:DRIVER/FatFs/source/ff.c **** 		}
 7133              		.loc 1 2708 7 view .LVU2436
 7134 015e 0546     		mov	r5, r0
 7135              	.LVL867:
2708:DRIVER/FatFs/source/ff.c **** 		}
 7136              		.loc 1 2708 7 view .LVU2437
 7137 0160 C9E7     		b	.L524
 7138              	.LVL868:
 7139              	.L546:
2723:DRIVER/FatFs/source/ff.c **** 				if (IsUpper(wc) && (dp->dir[DIR_NTres] & lcf)) wc += 0x20;
 7140              		.loc 1 2723 24 view .LVU2438
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 264


 7141 0162 1025     		movs	r5, #16
 7142              	.LVL869:
2723:DRIVER/FatFs/source/ff.c **** 				if (IsUpper(wc) && (dp->dir[DIR_NTres] & lcf)) wc += 0x20;
 7143              		.loc 1 2723 24 view .LVU2439
 7144 0164 0CE0     		b	.L530
 7145              	.LVL870:
 7146              	.L531:
2725:DRIVER/FatFs/source/ff.c **** 			}
 7147              		.loc 1 2725 5 is_stmt 1 discriminator 2 view .LVU2440
2725:DRIVER/FatFs/source/ff.c **** 			}
 7148              		.loc 1 2725 20 is_stmt 0 discriminator 2 view .LVU2441
 7149 0166 08EB0203 		add	r3, r8, r2
 7150 016a 9C75     		strb	r4, [r3, #22]
2721:DRIVER/FatFs/source/ff.c **** 				wc = (WCHAR)fno->altname[si];
 7151              		.loc 1 2721 59 is_stmt 1 discriminator 2 view .LVU2442
2721:DRIVER/FatFs/source/ff.c **** 				wc = (WCHAR)fno->altname[si];
 7152              		.loc 1 2721 57 is_stmt 0 discriminator 2 view .LVU2443
 7153 016c 0130     		adds	r0, r0, #1
 7154              	.LVL871:
2721:DRIVER/FatFs/source/ff.c **** 				wc = (WCHAR)fno->altname[si];
 7155              		.loc 1 2721 63 discriminator 2 view .LVU2444
 7156 016e 0132     		adds	r2, r2, #1
 7157              	.LVL872:
 7158              	.L528:
2721:DRIVER/FatFs/source/ff.c **** 				wc = (WCHAR)fno->altname[si];
 7159              		.loc 1 2721 37 is_stmt 1 discriminator 1 view .LVU2445
2721:DRIVER/FatFs/source/ff.c **** 				wc = (WCHAR)fno->altname[si];
 7160              		.loc 1 2721 49 is_stmt 0 discriminator 1 view .LVU2446
 7161 0170 08EB0003 		add	r3, r8, r0
 7162 0174 5B7A     		ldrb	r3, [r3, #9]	@ zero_extendqisi2
2721:DRIVER/FatFs/source/ff.c **** 				wc = (WCHAR)fno->altname[si];
 7163              		.loc 1 2721 37 discriminator 1 view .LVU2447
 7164 0176 002B     		cmp	r3, #0
 7165 0178 CAD0     		beq	.L529
2722:DRIVER/FatFs/source/ff.c **** 				if (wc == '.') lcf = NS_EXT;
 7166              		.loc 1 2722 5 is_stmt 1 view .LVU2448
2722:DRIVER/FatFs/source/ff.c **** 				if (wc == '.') lcf = NS_EXT;
 7167              		.loc 1 2722 8 is_stmt 0 view .LVU2449
 7168 017a 1C46     		mov	r4, r3
 7169              	.LVL873:
2723:DRIVER/FatFs/source/ff.c **** 				if (IsUpper(wc) && (dp->dir[DIR_NTres] & lcf)) wc += 0x20;
 7170              		.loc 1 2723 5 is_stmt 1 view .LVU2450
2723:DRIVER/FatFs/source/ff.c **** 				if (IsUpper(wc) && (dp->dir[DIR_NTres] & lcf)) wc += 0x20;
 7171              		.loc 1 2723 8 is_stmt 0 view .LVU2451
 7172 017c 2E2B     		cmp	r3, #46
 7173 017e F0D0     		beq	.L546
 7174              	.LVL874:
 7175              	.L530:
2724:DRIVER/FatFs/source/ff.c **** 				fno->fname[di] = (TCHAR)wc;
 7176              		.loc 1 2724 5 is_stmt 1 view .LVU2452
2724:DRIVER/FatFs/source/ff.c **** 				fno->fname[di] = (TCHAR)wc;
 7177              		.loc 1 2724 9 is_stmt 0 view .LVU2453
 7178 0180 A3F14101 		sub	r1, r3, #65
 7179 0184 89B2     		uxth	r1, r1
2724:DRIVER/FatFs/source/ff.c **** 				fno->fname[di] = (TCHAR)wc;
 7180              		.loc 1 2724 8 view .LVU2454
 7181 0186 1929     		cmp	r1, #25
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 265


 7182 0188 EDD8     		bhi	.L531
2724:DRIVER/FatFs/source/ff.c **** 				fno->fname[di] = (TCHAR)wc;
 7183              		.loc 1 2724 27 discriminator 1 view .LVU2455
 7184 018a D9F81C10 		ldr	r1, [r9, #28]
2724:DRIVER/FatFs/source/ff.c **** 				fno->fname[di] = (TCHAR)wc;
 7185              		.loc 1 2724 32 discriminator 1 view .LVU2456
 7186 018e 097B     		ldrb	r1, [r1, #12]	@ zero_extendqisi2
2724:DRIVER/FatFs/source/ff.c **** 				fno->fname[di] = (TCHAR)wc;
 7187              		.loc 1 2724 21 discriminator 1 view .LVU2457
 7188 0190 2942     		tst	r1, r5
 7189 0192 E8D0     		beq	.L531
2724:DRIVER/FatFs/source/ff.c **** 				fno->fname[di] = (TCHAR)wc;
 7190              		.loc 1 2724 52 is_stmt 1 discriminator 2 view .LVU2458
2724:DRIVER/FatFs/source/ff.c **** 				fno->fname[di] = (TCHAR)wc;
 7191              		.loc 1 2724 55 is_stmt 0 discriminator 2 view .LVU2459
 7192 0194 03F12004 		add	r4, r3, #32
 7193              	.LVL875:
2724:DRIVER/FatFs/source/ff.c **** 				fno->fname[di] = (TCHAR)wc;
 7194              		.loc 1 2724 55 discriminator 2 view .LVU2460
 7195 0198 E5E7     		b	.L531
 7196              	.LVL876:
 7197              	.L541:
2721:DRIVER/FatFs/source/ff.c **** 				wc = (WCHAR)fno->altname[si];
 7198              		.loc 1 2721 26 view .LVU2461
 7199 019a 0825     		movs	r5, #8
 7200              	.LVL877:
2721:DRIVER/FatFs/source/ff.c **** 				wc = (WCHAR)fno->altname[si];
 7201              		.loc 1 2721 17 view .LVU2462
 7202 019c 0022     		movs	r2, #0
2721:DRIVER/FatFs/source/ff.c **** 				wc = (WCHAR)fno->altname[si];
 7203              		.loc 1 2721 12 view .LVU2463
 7204 019e 1046     		mov	r0, r2
 7205 01a0 E6E7     		b	.L528
 7206              		.cfi_endproc
 7207              	.LFE31:
 7209              		.section	.text.f_mount,"ax",%progbits
 7210              		.align	1
 7211              		.global	f_mount
 7212              		.syntax unified
 7213              		.thumb
 7214              		.thumb_func
 7216              	f_mount:
 7217              	.LVL878:
 7218              	.LFB39:
3662:DRIVER/FatFs/source/ff.c **** 	FATFS *cfs;
 7219              		.loc 1 3662 1 is_stmt 1 view -0
 7220              		.cfi_startproc
 7221              		@ args = 0, pretend = 0, frame = 16
 7222              		@ frame_needed = 0, uses_anonymous_args = 0
3662:DRIVER/FatFs/source/ff.c **** 	FATFS *cfs;
 7223              		.loc 1 3662 1 is_stmt 0 view .LVU2465
 7224 0000 10B5     		push	{r4, lr}
 7225              	.LCFI49:
 7226              		.cfi_def_cfa_offset 8
 7227              		.cfi_offset 4, -8
 7228              		.cfi_offset 14, -4
 7229 0002 84B0     		sub	sp, sp, #16
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 266


 7230              	.LCFI50:
 7231              		.cfi_def_cfa_offset 24
 7232 0004 0190     		str	r0, [sp, #4]
 7233 0006 0091     		str	r1, [sp]
 7234 0008 1446     		mov	r4, r2
3663:DRIVER/FatFs/source/ff.c **** 	int vol;
 7235              		.loc 1 3663 2 is_stmt 1 view .LVU2466
3664:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
 7236              		.loc 1 3664 2 view .LVU2467
3665:DRIVER/FatFs/source/ff.c **** 	const TCHAR *rp = path;
 7237              		.loc 1 3665 2 view .LVU2468
3666:DRIVER/FatFs/source/ff.c **** 
 7238              		.loc 1 3666 2 view .LVU2469
3666:DRIVER/FatFs/source/ff.c **** 
 7239              		.loc 1 3666 15 is_stmt 0 view .LVU2470
 7240 000a 0391     		str	r1, [sp, #12]
3670:DRIVER/FatFs/source/ff.c **** 	if (vol < 0) return FR_INVALID_DRIVE;
 7241              		.loc 1 3670 2 is_stmt 1 view .LVU2471
3670:DRIVER/FatFs/source/ff.c **** 	if (vol < 0) return FR_INVALID_DRIVE;
 7242              		.loc 1 3670 8 is_stmt 0 view .LVU2472
 7243 000c 03A8     		add	r0, sp, #12
 7244              	.LVL879:
3670:DRIVER/FatFs/source/ff.c **** 	if (vol < 0) return FR_INVALID_DRIVE;
 7245              		.loc 1 3670 8 view .LVU2473
 7246 000e FFF7FEFF 		bl	get_ldnumber
 7247              	.LVL880:
3671:DRIVER/FatFs/source/ff.c **** 	cfs = FatFs[vol];			/* Pointer to the filesystem object of the volume */
 7248              		.loc 1 3671 2 is_stmt 1 view .LVU2474
3671:DRIVER/FatFs/source/ff.c **** 	cfs = FatFs[vol];			/* Pointer to the filesystem object of the volume */
 7249              		.loc 1 3671 5 is_stmt 0 view .LVU2475
 7250 0012 0028     		cmp	r0, #0
3671:DRIVER/FatFs/source/ff.c **** 	cfs = FatFs[vol];			/* Pointer to the filesystem object of the volume */
 7251              		.loc 1 3671 5 view .LVU2476
 7252 0014 1CDB     		blt	.L551
3672:DRIVER/FatFs/source/ff.c **** 
 7253              		.loc 1 3672 2 is_stmt 1 view .LVU2477
3672:DRIVER/FatFs/source/ff.c **** 
 7254              		.loc 1 3672 6 is_stmt 0 view .LVU2478
 7255 0016 0F4B     		ldr	r3, .L555
 7256 0018 53F82030 		ldr	r3, [r3, r0, lsl #2]
 7257              	.LVL881:
3674:DRIVER/FatFs/source/ff.c **** 		FatFs[vol] = 0;
 7258              		.loc 1 3674 2 is_stmt 1 view .LVU2479
3674:DRIVER/FatFs/source/ff.c **** 		FatFs[vol] = 0;
 7259              		.loc 1 3674 5 is_stmt 0 view .LVU2480
 7260 001c 23B1     		cbz	r3, .L549
3675:DRIVER/FatFs/source/ff.c **** #if FF_FS_LOCK
 7261              		.loc 1 3675 3 is_stmt 1 view .LVU2481
3675:DRIVER/FatFs/source/ff.c **** #if FF_FS_LOCK
 7262              		.loc 1 3675 14 is_stmt 0 view .LVU2482
 7263 001e 0022     		movs	r2, #0
 7264 0020 0C49     		ldr	r1, .L555
 7265 0022 41F82020 		str	r2, [r1, r0, lsl #2]
3682:DRIVER/FatFs/source/ff.c **** 	}
 7266              		.loc 1 3682 3 is_stmt 1 view .LVU2483
3682:DRIVER/FatFs/source/ff.c **** 	}
 7267              		.loc 1 3682 16 is_stmt 0 view .LVU2484
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 267


 7268 0026 1A70     		strb	r2, [r3]
 7269              	.L549:
3685:DRIVER/FatFs/source/ff.c **** 		fs->pdrv = LD2PD(vol);	/* Volume hosting physical drive */
 7270              		.loc 1 3685 2 is_stmt 1 view .LVU2485
3685:DRIVER/FatFs/source/ff.c **** 		fs->pdrv = LD2PD(vol);	/* Volume hosting physical drive */
 7271              		.loc 1 3685 6 is_stmt 0 view .LVU2486
 7272 0028 019B     		ldr	r3, [sp, #4]
 7273              	.LVL882:
3685:DRIVER/FatFs/source/ff.c **** 		fs->pdrv = LD2PD(vol);	/* Volume hosting physical drive */
 7274              		.loc 1 3685 5 view .LVU2487
 7275 002a 3BB1     		cbz	r3, .L550
3686:DRIVER/FatFs/source/ff.c **** #if FF_FS_REENTRANT				/* Create a volume mutex */
 7276              		.loc 1 3686 3 is_stmt 1 view .LVU2488
3686:DRIVER/FatFs/source/ff.c **** #if FF_FS_REENTRANT				/* Create a volume mutex */
 7277              		.loc 1 3686 12 is_stmt 0 view .LVU2489
 7278 002c 5870     		strb	r0, [r3, #1]
3700:DRIVER/FatFs/source/ff.c **** 		FatFs[vol] = fs;		/* Register new fs object */
 7279              		.loc 1 3700 3 is_stmt 1 view .LVU2490
3700:DRIVER/FatFs/source/ff.c **** 		FatFs[vol] = fs;		/* Register new fs object */
 7280              		.loc 1 3700 15 is_stmt 0 view .LVU2491
 7281 002e 019B     		ldr	r3, [sp, #4]
 7282 0030 0022     		movs	r2, #0
 7283 0032 1A70     		strb	r2, [r3]
3701:DRIVER/FatFs/source/ff.c **** 	}
 7284              		.loc 1 3701 3 is_stmt 1 view .LVU2492
3701:DRIVER/FatFs/source/ff.c **** 	}
 7285              		.loc 1 3701 14 is_stmt 0 view .LVU2493
 7286 0034 074B     		ldr	r3, .L555
 7287 0036 019A     		ldr	r2, [sp, #4]
 7288 0038 43F82020 		str	r2, [r3, r0, lsl #2]
 7289              	.L550:
3704:DRIVER/FatFs/source/ff.c **** 
 7290              		.loc 1 3704 2 is_stmt 1 view .LVU2494
3704:DRIVER/FatFs/source/ff.c **** 
 7291              		.loc 1 3704 5 is_stmt 0 view .LVU2495
 7292 003c 14B9     		cbnz	r4, .L554
3704:DRIVER/FatFs/source/ff.c **** 
 7293              		.loc 1 3704 23 view .LVU2496
 7294 003e 2046     		mov	r0, r4
 7295              	.LVL883:
 7296              	.L548:
3708:DRIVER/FatFs/source/ff.c **** 
 7297              		.loc 1 3708 1 view .LVU2497
 7298 0040 04B0     		add	sp, sp, #16
 7299              	.LCFI51:
 7300              		.cfi_remember_state
 7301              		.cfi_def_cfa_offset 8
 7302              		@ sp needed
 7303 0042 10BD     		pop	{r4, pc}
 7304              	.LVL884:
 7305              	.L554:
 7306              	.LCFI52:
 7307              		.cfi_restore_state
3706:DRIVER/FatFs/source/ff.c **** 	LEAVE_FF(fs, res);
 7308              		.loc 1 3706 2 is_stmt 1 view .LVU2498
3706:DRIVER/FatFs/source/ff.c **** 	LEAVE_FF(fs, res);
 7309              		.loc 1 3706 8 is_stmt 0 view .LVU2499
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 268


 7310 0044 0022     		movs	r2, #0
 7311 0046 01A9     		add	r1, sp, #4
 7312 0048 6846     		mov	r0, sp
 7313              	.LVL885:
3706:DRIVER/FatFs/source/ff.c **** 	LEAVE_FF(fs, res);
 7314              		.loc 1 3706 8 view .LVU2500
 7315 004a FFF7FEFF 		bl	mount_volume
 7316              	.LVL886:
3707:DRIVER/FatFs/source/ff.c **** }
 7317              		.loc 1 3707 2 is_stmt 1 view .LVU2501
 7318 004e F7E7     		b	.L548
 7319              	.LVL887:
 7320              	.L551:
3671:DRIVER/FatFs/source/ff.c **** 	cfs = FatFs[vol];			/* Pointer to the filesystem object of the volume */
 7321              		.loc 1 3671 22 is_stmt 0 view .LVU2502
 7322 0050 0B20     		movs	r0, #11
 7323              	.LVL888:
3671:DRIVER/FatFs/source/ff.c **** 	cfs = FatFs[vol];			/* Pointer to the filesystem object of the volume */
 7324              		.loc 1 3671 22 view .LVU2503
 7325 0052 F5E7     		b	.L548
 7326              	.L556:
 7327              		.align	2
 7328              	.L555:
 7329 0054 00000000 		.word	FatFs
 7330              		.cfi_endproc
 7331              	.LFE39:
 7333              		.section	.text.f_open,"ax",%progbits
 7334              		.align	1
 7335              		.global	f_open
 7336              		.syntax unified
 7337              		.thumb
 7338              		.thumb_func
 7340              	f_open:
 7341              	.LVL889:
 7342              	.LFB40:
3722:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
 7343              		.loc 1 3722 1 is_stmt 1 view -0
 7344              		.cfi_startproc
 7345              		@ args = 0, pretend = 0, frame = 576
 7346              		@ frame_needed = 0, uses_anonymous_args = 0
3722:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
 7347              		.loc 1 3722 1 is_stmt 0 view .LVU2505
 7348 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 7349              	.LCFI53:
 7350              		.cfi_def_cfa_offset 32
 7351              		.cfi_offset 4, -32
 7352              		.cfi_offset 5, -28
 7353              		.cfi_offset 6, -24
 7354              		.cfi_offset 7, -20
 7355              		.cfi_offset 8, -16
 7356              		.cfi_offset 9, -12
 7357              		.cfi_offset 10, -8
 7358              		.cfi_offset 14, -4
 7359 0004 ADF5107D 		sub	sp, sp, #576
 7360              	.LCFI54:
 7361              		.cfi_def_cfa_offset 608
 7362 0008 0191     		str	r1, [sp, #4]
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 269


3723:DRIVER/FatFs/source/ff.c **** 	DIR dj;
 7363              		.loc 1 3723 2 is_stmt 1 view .LVU2506
3724:DRIVER/FatFs/source/ff.c **** 	FATFS *fs;
 7364              		.loc 1 3724 2 view .LVU2507
3725:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY
 7365              		.loc 1 3725 2 view .LVU2508
3727:DRIVER/FatFs/source/ff.c **** 	LBA_t sc;
 7366              		.loc 1 3727 2 view .LVU2509
3728:DRIVER/FatFs/source/ff.c **** 	FSIZE_t ofs;
 7367              		.loc 1 3728 2 view .LVU2510
3729:DRIVER/FatFs/source/ff.c **** #endif
 7368              		.loc 1 3729 2 view .LVU2511
3731:DRIVER/FatFs/source/ff.c **** 
 7369              		.loc 1 3731 2 view .LVU2512
3734:DRIVER/FatFs/source/ff.c **** 
 7370              		.loc 1 3734 2 view .LVU2513
3734:DRIVER/FatFs/source/ff.c **** 
 7371              		.loc 1 3734 5 is_stmt 0 view .LVU2514
 7372 000a 0028     		cmp	r0, #0
 7373 000c 00F0FD80 		beq	.L572
 7374 0010 1446     		mov	r4, r2
 7375 0012 0646     		mov	r6, r0
3737:DRIVER/FatFs/source/ff.c **** 	res = mount_volume(&path, &fs, mode);
 7376              		.loc 1 3737 2 is_stmt 1 view .LVU2515
3737:DRIVER/FatFs/source/ff.c **** 	res = mount_volume(&path, &fs, mode);
 7377              		.loc 1 3737 7 is_stmt 0 view .LVU2516
 7378 0014 02F03F07 		and	r7, r2, #63
 7379              	.LVL890:
3738:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
 7380              		.loc 1 3738 2 is_stmt 1 view .LVU2517
3738:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
 7381              		.loc 1 3738 8 is_stmt 0 view .LVU2518
 7382 0018 3A46     		mov	r2, r7
 7383 001a 83A9     		add	r1, sp, #524
 7384              	.LVL891:
3738:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
 7385              		.loc 1 3738 8 view .LVU2519
 7386 001c 01A8     		add	r0, sp, #4
 7387              	.LVL892:
3738:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
 7388              		.loc 1 3738 8 view .LVU2520
 7389 001e FFF7FEFF 		bl	mount_volume
 7390              	.LVL893:
3739:DRIVER/FatFs/source/ff.c **** 		dj.obj.fs = fs;
 7391              		.loc 1 3739 2 is_stmt 1 view .LVU2521
3739:DRIVER/FatFs/source/ff.c **** 		dj.obj.fs = fs;
 7392              		.loc 1 3739 5 is_stmt 0 view .LVU2522
 7393 0022 0546     		mov	r5, r0
 7394 0024 30B1     		cbz	r0, .L583
 7395              	.LVL894:
 7396              	.L559:
3902:DRIVER/FatFs/source/ff.c **** 
 7397              		.loc 1 3902 20 is_stmt 1 discriminator 1 view .LVU2523
3902:DRIVER/FatFs/source/ff.c **** 
 7398              		.loc 1 3902 31 is_stmt 0 discriminator 1 view .LVU2524
 7399 0026 0023     		movs	r3, #0
 7400 0028 3360     		str	r3, [r6]
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 270


 7401              	.LVL895:
 7402              	.L558:
3905:DRIVER/FatFs/source/ff.c **** 
 7403              		.loc 1 3905 1 view .LVU2525
 7404 002a 2846     		mov	r0, r5
 7405 002c 0DF5107D 		add	sp, sp, #576
 7406              	.LCFI55:
 7407              		.cfi_remember_state
 7408              		.cfi_def_cfa_offset 32
 7409              		@ sp needed
 7410 0030 BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 7411              	.LVL896:
 7412              	.L583:
 7413              	.LCFI56:
 7414              		.cfi_restore_state
3740:DRIVER/FatFs/source/ff.c **** 		INIT_NAMBUF(fs);
 7415              		.loc 1 3740 3 is_stmt 1 view .LVU2526
3740:DRIVER/FatFs/source/ff.c **** 		INIT_NAMBUF(fs);
 7416              		.loc 1 3740 13 is_stmt 0 view .LVU2527
 7417 0034 839B     		ldr	r3, [sp, #524]
 7418 0036 8493     		str	r3, [sp, #528]
3741:DRIVER/FatFs/source/ff.c **** 		res = follow_path(&dj, path);	/* Follow the file path */
 7419              		.loc 1 3741 3 is_stmt 1 view .LVU2528
 7420 0038 03AA     		add	r2, sp, #12
 7421 003a 1A61     		str	r2, [r3, #16]
3741:DRIVER/FatFs/source/ff.c **** 		res = follow_path(&dj, path);	/* Follow the file path */
 7422              		.loc 1 3741 18 view .LVU2529
3742:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY	/* Read/Write configuration */
 7423              		.loc 1 3742 3 view .LVU2530
3742:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY	/* Read/Write configuration */
 7424              		.loc 1 3742 9 is_stmt 0 view .LVU2531
 7425 003c 0199     		ldr	r1, [sp, #4]
 7426 003e 84A8     		add	r0, sp, #528
 7427              	.LVL897:
3742:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY	/* Read/Write configuration */
 7428              		.loc 1 3742 9 view .LVU2532
 7429 0040 FFF7FEFF 		bl	follow_path
 7430              	.LVL898:
3744:DRIVER/FatFs/source/ff.c **** 			if (dj.fn[NSFLAG] & NS_NONAME) {	/* Origin directory itself? */
 7431              		.loc 1 3744 3 is_stmt 1 view .LVU2533
3744:DRIVER/FatFs/source/ff.c **** 			if (dj.fn[NSFLAG] & NS_NONAME) {	/* Origin directory itself? */
 7432              		.loc 1 3744 6 is_stmt 0 view .LVU2534
 7433 0044 0546     		mov	r5, r0
 7434 0046 18B9     		cbnz	r0, .L560
3745:DRIVER/FatFs/source/ff.c **** 				res = FR_INVALID_NAME;
 7435              		.loc 1 3745 4 is_stmt 1 view .LVU2535
3745:DRIVER/FatFs/source/ff.c **** 				res = FR_INVALID_NAME;
 7436              		.loc 1 3745 8 is_stmt 0 view .LVU2536
 7437 0048 9DF93B32 		ldrsb	r3, [sp, #571]
3745:DRIVER/FatFs/source/ff.c **** 				res = FR_INVALID_NAME;
 7438              		.loc 1 3745 7 view .LVU2537
 7439 004c 002B     		cmp	r3, #0
 7440 004e 47DB     		blt	.L584
 7441              	.L560:
 7442              	.LVL899:
3755:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) {					/* No file, create new */
 7443              		.loc 1 3755 3 is_stmt 1 view .LVU2538
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 271


3755:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) {					/* No file, create new */
 7444              		.loc 1 3755 6 is_stmt 0 view .LVU2539
 7445 0050 14F01C0F 		tst	r4, #28
 7446 0054 55D0     		beq	.L561
3756:DRIVER/FatFs/source/ff.c **** 				if (res == FR_NO_FILE) {		/* There is no file to open, create a new entry */
 7447              		.loc 1 3756 4 is_stmt 1 view .LVU2540
3756:DRIVER/FatFs/source/ff.c **** 				if (res == FR_NO_FILE) {		/* There is no file to open, create a new entry */
 7448              		.loc 1 3756 7 is_stmt 0 view .LVU2541
 7449 0056 002D     		cmp	r5, #0
 7450 0058 49D0     		beq	.L562
3757:DRIVER/FatFs/source/ff.c **** #if FF_FS_LOCK
 7451              		.loc 1 3757 5 is_stmt 1 view .LVU2542
3757:DRIVER/FatFs/source/ff.c **** #if FF_FS_LOCK
 7452              		.loc 1 3757 8 is_stmt 0 view .LVU2543
 7453 005a 042D     		cmp	r5, #4
 7454 005c 42D0     		beq	.L585
 7455              	.L563:
3764:DRIVER/FatFs/source/ff.c **** 			}
 7456              		.loc 1 3764 5 is_stmt 1 view .LVU2544
3764:DRIVER/FatFs/source/ff.c **** 			}
 7457              		.loc 1 3764 10 is_stmt 0 view .LVU2545
 7458 005e 47F00807 		orr	r7, r7, #8
 7459              	.LVL900:
 7460              	.L564:
3773:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
 7461              		.loc 1 3773 4 is_stmt 1 view .LVU2546
3773:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
 7462              		.loc 1 3773 7 is_stmt 0 view .LVU2547
 7463 0062 002D     		cmp	r5, #0
 7464 0064 DFD1     		bne	.L559
3773:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
 7465              		.loc 1 3773 21 discriminator 1 view .LVU2548
 7466 0066 17F0080F 		tst	r7, #8
 7467 006a 5AD0     		beq	.L565
3794:DRIVER/FatFs/source/ff.c **** 					st_dword(dj.dir + DIR_CrtTime, tm);
 7468              		.loc 1 3794 6 is_stmt 1 view .LVU2549
3794:DRIVER/FatFs/source/ff.c **** 					st_dword(dj.dir + DIR_CrtTime, tm);
 7469              		.loc 1 3794 11 is_stmt 0 view .LVU2550
 7470 006c FFF7FEFF 		bl	get_fattime
 7471              	.LVL901:
 7472 0070 0446     		mov	r4, r0
 7473              	.LVL902:
3795:DRIVER/FatFs/source/ff.c **** 					st_dword(dj.dir + DIR_ModTime, tm);
 7474              		.loc 1 3795 6 is_stmt 1 view .LVU2551
 7475 0072 0146     		mov	r1, r0
 7476 0074 8B98     		ldr	r0, [sp, #556]
 7477              	.LVL903:
3795:DRIVER/FatFs/source/ff.c **** 					st_dword(dj.dir + DIR_ModTime, tm);
 7478              		.loc 1 3795 6 is_stmt 0 view .LVU2552
 7479 0076 0E30     		adds	r0, r0, #14
 7480 0078 FFF7FEFF 		bl	st_dword
 7481              	.LVL904:
3796:DRIVER/FatFs/source/ff.c **** 					cl = ld_clust(fs, dj.dir);			/* Get current cluster chain */
 7482              		.loc 1 3796 6 is_stmt 1 view .LVU2553
 7483 007c 2146     		mov	r1, r4
 7484 007e 8B98     		ldr	r0, [sp, #556]
 7485 0080 1630     		adds	r0, r0, #22
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 272


 7486 0082 FFF7FEFF 		bl	st_dword
 7487              	.LVL905:
3797:DRIVER/FatFs/source/ff.c **** 					dj.dir[DIR_Attr] = AM_ARC;			/* Reset attribute */
 7488              		.loc 1 3797 6 view .LVU2554
3797:DRIVER/FatFs/source/ff.c **** 					dj.dir[DIR_Attr] = AM_ARC;			/* Reset attribute */
 7489              		.loc 1 3797 11 is_stmt 0 view .LVU2555
 7490 0086 DDF80C82 		ldr	r8, [sp, #524]
3797:DRIVER/FatFs/source/ff.c **** 					dj.dir[DIR_Attr] = AM_ARC;			/* Reset attribute */
 7491              		.loc 1 3797 26 view .LVU2556
 7492 008a DDF82C92 		ldr	r9, [sp, #556]
3797:DRIVER/FatFs/source/ff.c **** 					dj.dir[DIR_Attr] = AM_ARC;			/* Reset attribute */
 7493              		.loc 1 3797 11 view .LVU2557
 7494 008e 4946     		mov	r1, r9
 7495 0090 4046     		mov	r0, r8
 7496 0092 FFF7FEFF 		bl	ld_clust
 7497              	.LVL906:
 7498 0096 0446     		mov	r4, r0
 7499              	.LVL907:
3798:DRIVER/FatFs/source/ff.c **** 					st_clust(fs, dj.dir, 0);			/* Reset file allocation info */
 7500              		.loc 1 3798 6 is_stmt 1 view .LVU2558
3798:DRIVER/FatFs/source/ff.c **** 					st_clust(fs, dj.dir, 0);			/* Reset file allocation info */
 7501              		.loc 1 3798 23 is_stmt 0 view .LVU2559
 7502 0098 2023     		movs	r3, #32
 7503 009a 89F80B30 		strb	r3, [r9, #11]
3799:DRIVER/FatFs/source/ff.c **** 					st_dword(dj.dir + DIR_FileSize, 0);
 7504              		.loc 1 3799 6 is_stmt 1 view .LVU2560
 7505 009e 0022     		movs	r2, #0
 7506 00a0 8B99     		ldr	r1, [sp, #556]
 7507 00a2 4046     		mov	r0, r8
 7508              	.LVL908:
3799:DRIVER/FatFs/source/ff.c **** 					st_dword(dj.dir + DIR_FileSize, 0);
 7509              		.loc 1 3799 6 is_stmt 0 view .LVU2561
 7510 00a4 FFF7FEFF 		bl	st_clust
 7511              	.LVL909:
3800:DRIVER/FatFs/source/ff.c **** 					fs->wflag = 1;
 7512              		.loc 1 3800 6 is_stmt 1 view .LVU2562
 7513 00a8 0021     		movs	r1, #0
 7514 00aa 8B98     		ldr	r0, [sp, #556]
 7515 00ac 1C30     		adds	r0, r0, #28
 7516 00ae FFF7FEFF 		bl	st_dword
 7517              	.LVL910:
3801:DRIVER/FatFs/source/ff.c **** 					if (cl != 0) {						/* Remove the cluster chain if exist */
 7518              		.loc 1 3801 6 view .LVU2563
3801:DRIVER/FatFs/source/ff.c **** 					if (cl != 0) {						/* Remove the cluster chain if exist */
 7519              		.loc 1 3801 8 is_stmt 0 view .LVU2564
 7520 00b2 839B     		ldr	r3, [sp, #524]
3801:DRIVER/FatFs/source/ff.c **** 					if (cl != 0) {						/* Remove the cluster chain if exist */
 7521              		.loc 1 3801 16 view .LVU2565
 7522 00b4 0122     		movs	r2, #1
 7523 00b6 1A71     		strb	r2, [r3, #4]
3802:DRIVER/FatFs/source/ff.c **** 						sc = fs->winsect;
 7524              		.loc 1 3802 6 is_stmt 1 view .LVU2566
3802:DRIVER/FatFs/source/ff.c **** 						sc = fs->winsect;
 7525              		.loc 1 3802 9 is_stmt 0 view .LVU2567
 7526 00b8 9CB3     		cbz	r4, .L565
3803:DRIVER/FatFs/source/ff.c **** 						res = remove_chain(&dj.obj, cl, 0);
 7527              		.loc 1 3803 7 is_stmt 1 view .LVU2568
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 273


3803:DRIVER/FatFs/source/ff.c **** 						res = remove_chain(&dj.obj, cl, 0);
 7528              		.loc 1 3803 10 is_stmt 0 view .LVU2569
 7529 00ba D3F83480 		ldr	r8, [r3, #52]
 7530              	.LVL911:
3804:DRIVER/FatFs/source/ff.c **** 						if (res == FR_OK) {
 7531              		.loc 1 3804 7 is_stmt 1 view .LVU2570
3804:DRIVER/FatFs/source/ff.c **** 						if (res == FR_OK) {
 7532              		.loc 1 3804 13 is_stmt 0 view .LVU2571
 7533 00be 0022     		movs	r2, #0
 7534 00c0 2146     		mov	r1, r4
 7535 00c2 84A8     		add	r0, sp, #528
 7536 00c4 FFF7FEFF 		bl	remove_chain
 7537              	.LVL912:
3805:DRIVER/FatFs/source/ff.c **** 							res = move_window(fs, sc);
 7538              		.loc 1 3805 7 is_stmt 1 view .LVU2572
3805:DRIVER/FatFs/source/ff.c **** 							res = move_window(fs, sc);
 7539              		.loc 1 3805 10 is_stmt 0 view .LVU2573
 7540 00c8 0546     		mov	r5, r0
 7541 00ca 0028     		cmp	r0, #0
 7542 00cc ABD1     		bne	.L559
3806:DRIVER/FatFs/source/ff.c **** 							fs->last_clst = cl - 1;		/* Reuse the cluster hole */
 7543              		.loc 1 3806 8 is_stmt 1 view .LVU2574
3806:DRIVER/FatFs/source/ff.c **** 							fs->last_clst = cl - 1;		/* Reuse the cluster hole */
 7544              		.loc 1 3806 14 is_stmt 0 view .LVU2575
 7545 00ce 4146     		mov	r1, r8
 7546 00d0 8398     		ldr	r0, [sp, #524]
 7547              	.LVL913:
3806:DRIVER/FatFs/source/ff.c **** 							fs->last_clst = cl - 1;		/* Reuse the cluster hole */
 7548              		.loc 1 3806 14 view .LVU2576
 7549 00d2 FFF7FEFF 		bl	move_window
 7550              	.LVL914:
 7551 00d6 0546     		mov	r5, r0
 7552              	.LVL915:
3807:DRIVER/FatFs/source/ff.c **** 						}
 7553              		.loc 1 3807 8 is_stmt 1 view .LVU2577
3807:DRIVER/FatFs/source/ff.c **** 						}
 7554              		.loc 1 3807 27 is_stmt 0 view .LVU2578
 7555 00d8 013C     		subs	r4, r4, #1
 7556              	.LVL916:
3807:DRIVER/FatFs/source/ff.c **** 						}
 7557              		.loc 1 3807 22 view .LVU2579
 7558 00da 839B     		ldr	r3, [sp, #524]
 7559 00dc 5C61     		str	r4, [r3, #20]
 7560 00de 20E0     		b	.L565
 7561              	.LVL917:
 7562              	.L584:
3746:DRIVER/FatFs/source/ff.c **** 			}
 7563              		.loc 1 3746 9 view .LVU2580
 7564 00e0 0625     		movs	r5, #6
 7565 00e2 B5E7     		b	.L560
 7566              	.LVL918:
 7567              	.L585:
3761:DRIVER/FatFs/source/ff.c **** #endif
 7568              		.loc 1 3761 6 is_stmt 1 view .LVU2581
3761:DRIVER/FatFs/source/ff.c **** #endif
 7569              		.loc 1 3761 12 is_stmt 0 view .LVU2582
 7570 00e4 84A8     		add	r0, sp, #528
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 274


 7571 00e6 FFF7FEFF 		bl	dir_register
 7572              	.LVL919:
 7573 00ea 0546     		mov	r5, r0
 7574              	.LVL920:
3761:DRIVER/FatFs/source/ff.c **** #endif
 7575              		.loc 1 3761 12 view .LVU2583
 7576 00ec B7E7     		b	.L563
 7577              	.L562:
3767:DRIVER/FatFs/source/ff.c **** 					res = FR_DENIED;
 7578              		.loc 1 3767 5 is_stmt 1 view .LVU2584
3767:DRIVER/FatFs/source/ff.c **** 					res = FR_DENIED;
 7579              		.loc 1 3767 15 is_stmt 0 view .LVU2585
 7580 00ee 9DF81632 		ldrb	r3, [sp, #534]	@ zero_extendqisi2
3767:DRIVER/FatFs/source/ff.c **** 					res = FR_DENIED;
 7581              		.loc 1 3767 8 view .LVU2586
 7582 00f2 13F0110F 		tst	r3, #17
 7583 00f6 13D1     		bne	.L574
3770:DRIVER/FatFs/source/ff.c **** 				}
 7584              		.loc 1 3770 6 is_stmt 1 view .LVU2587
3770:DRIVER/FatFs/source/ff.c **** 				}
 7585              		.loc 1 3770 9 is_stmt 0 view .LVU2588
 7586 00f8 14F0040F 		tst	r4, #4
 7587 00fc B1D0     		beq	.L564
3770:DRIVER/FatFs/source/ff.c **** 				}
 7588              		.loc 1 3770 36 view .LVU2589
 7589 00fe 0825     		movs	r5, #8
 7590              	.LVL921:
3770:DRIVER/FatFs/source/ff.c **** 				}
 7591              		.loc 1 3770 36 view .LVU2590
 7592 0100 91E7     		b	.L559
 7593              	.LVL922:
 7594              	.L561:
3814:DRIVER/FatFs/source/ff.c **** 				if (dj.obj.attr & AM_DIR) {		/* File open against a directory */
 7595              		.loc 1 3814 4 is_stmt 1 view .LVU2591
3814:DRIVER/FatFs/source/ff.c **** 				if (dj.obj.attr & AM_DIR) {		/* File open against a directory */
 7596              		.loc 1 3814 7 is_stmt 0 view .LVU2592
 7597 0102 002D     		cmp	r5, #0
 7598 0104 8FD1     		bne	.L559
3815:DRIVER/FatFs/source/ff.c **** 					res = FR_NO_FILE;
 7599              		.loc 1 3815 5 is_stmt 1 view .LVU2593
3815:DRIVER/FatFs/source/ff.c **** 					res = FR_NO_FILE;
 7600              		.loc 1 3815 15 is_stmt 0 view .LVU2594
 7601 0106 9DF81632 		ldrb	r3, [sp, #534]	@ zero_extendqisi2
3815:DRIVER/FatFs/source/ff.c **** 					res = FR_NO_FILE;
 7602              		.loc 1 3815 8 view .LVU2595
 7603 010a 13F0100F 		tst	r3, #16
 7604 010e 78D1     		bne	.L576
3818:DRIVER/FatFs/source/ff.c **** 						res = FR_DENIED;
 7605              		.loc 1 3818 6 is_stmt 1 view .LVU2596
3818:DRIVER/FatFs/source/ff.c **** 						res = FR_DENIED;
 7606              		.loc 1 3818 9 is_stmt 0 view .LVU2597
 7607 0110 14F0020F 		tst	r4, #2
 7608 0114 05D0     		beq	.L565
3818:DRIVER/FatFs/source/ff.c **** 						res = FR_DENIED;
 7609              		.loc 1 3818 28 discriminator 1 view .LVU2598
 7610 0116 13F0010F 		tst	r3, #1
 7611 011a 02D0     		beq	.L565
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 275


3819:DRIVER/FatFs/source/ff.c **** 					}
 7612              		.loc 1 3819 11 view .LVU2599
 7613 011c 0725     		movs	r5, #7
 7614              	.LVL923:
3819:DRIVER/FatFs/source/ff.c **** 					}
 7615              		.loc 1 3819 11 view .LVU2600
 7616 011e 82E7     		b	.L559
 7617              	.LVL924:
 7618              	.L574:
3768:DRIVER/FatFs/source/ff.c **** 				} else {
 7619              		.loc 1 3768 10 view .LVU2601
 7620 0120 0725     		movs	r5, #7
 7621              	.LVL925:
 7622              	.L565:
3824:DRIVER/FatFs/source/ff.c **** 			if (mode & FA_CREATE_ALWAYS) mode |= FA_MODIFIED;	/* Set file change flag if created or overwrit
 7623              		.loc 1 3824 3 is_stmt 1 view .LVU2602
3824:DRIVER/FatFs/source/ff.c **** 			if (mode & FA_CREATE_ALWAYS) mode |= FA_MODIFIED;	/* Set file change flag if created or overwrit
 7624              		.loc 1 3824 6 is_stmt 0 view .LVU2603
 7625 0122 002D     		cmp	r5, #0
 7626 0124 7FF47FAF 		bne	.L559
3825:DRIVER/FatFs/source/ff.c **** 			fp->dir_sect = fs->winsect;			/* Pointer to the directory entry */
 7627              		.loc 1 3825 4 is_stmt 1 view .LVU2604
3825:DRIVER/FatFs/source/ff.c **** 			fp->dir_sect = fs->winsect;			/* Pointer to the directory entry */
 7628              		.loc 1 3825 7 is_stmt 0 view .LVU2605
 7629 0128 17F0080F 		tst	r7, #8
 7630 012c 01D0     		beq	.L566
3825:DRIVER/FatFs/source/ff.c **** 			fp->dir_sect = fs->winsect;			/* Pointer to the directory entry */
 7631              		.loc 1 3825 33 is_stmt 1 discriminator 1 view .LVU2606
3825:DRIVER/FatFs/source/ff.c **** 			fp->dir_sect = fs->winsect;			/* Pointer to the directory entry */
 7632              		.loc 1 3825 38 is_stmt 0 discriminator 1 view .LVU2607
 7633 012e 47F04007 		orr	r7, r7, #64
 7634              	.LVL926:
 7635              	.L566:
3826:DRIVER/FatFs/source/ff.c **** 			fp->dir_ptr = dj.dir;
 7636              		.loc 1 3826 4 is_stmt 1 view .LVU2608
3826:DRIVER/FatFs/source/ff.c **** 			fp->dir_ptr = dj.dir;
 7637              		.loc 1 3826 21 is_stmt 0 view .LVU2609
 7638 0132 DDF80CA2 		ldr	r10, [sp, #524]
 7639 0136 DAF83430 		ldr	r3, [r10, #52]
3826:DRIVER/FatFs/source/ff.c **** 			fp->dir_ptr = dj.dir;
 7640              		.loc 1 3826 17 view .LVU2610
 7641 013a 3362     		str	r3, [r6, #32]
3827:DRIVER/FatFs/source/ff.c **** #if FF_FS_LOCK
 7642              		.loc 1 3827 4 is_stmt 1 view .LVU2611
3827:DRIVER/FatFs/source/ff.c **** #if FF_FS_LOCK
 7643              		.loc 1 3827 20 is_stmt 0 view .LVU2612
 7644 013c DDF82C82 		ldr	r8, [sp, #556]
3827:DRIVER/FatFs/source/ff.c **** #if FF_FS_LOCK
 7645              		.loc 1 3827 16 view .LVU2613
 7646 0140 C6F82480 		str	r8, [r6, #36]
3845:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
 7647              		.loc 1 3845 3 is_stmt 1 view .LVU2614
3855:DRIVER/FatFs/source/ff.c **** 				fp->obj.objsize = ld_dword(dj.dir + DIR_FileSize);
 7648              		.loc 1 3855 5 view .LVU2615
3855:DRIVER/FatFs/source/ff.c **** 				fp->obj.objsize = ld_dword(dj.dir + DIR_FileSize);
 7649              		.loc 1 3855 22 is_stmt 0 view .LVU2616
 7650 0144 4146     		mov	r1, r8
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 276


 7651 0146 5046     		mov	r0, r10
 7652 0148 FFF7FEFF 		bl	ld_clust
 7653              	.LVL927:
 7654 014c 0446     		mov	r4, r0
3855:DRIVER/FatFs/source/ff.c **** 				fp->obj.objsize = ld_dword(dj.dir + DIR_FileSize);
 7655              		.loc 1 3855 20 view .LVU2617
 7656 014e B060     		str	r0, [r6, #8]
3856:DRIVER/FatFs/source/ff.c **** 			}
 7657              		.loc 1 3856 5 is_stmt 1 view .LVU2618
3856:DRIVER/FatFs/source/ff.c **** 			}
 7658              		.loc 1 3856 23 is_stmt 0 view .LVU2619
 7659 0150 08F11C00 		add	r0, r8, #28
 7660 0154 FFF7FEFF 		bl	ld_dword
 7661              	.LVL928:
 7662 0158 8046     		mov	r8, r0
3856:DRIVER/FatFs/source/ff.c **** 			}
 7663              		.loc 1 3856 21 view .LVU2620
 7664 015a F060     		str	r0, [r6, #12]
3861:DRIVER/FatFs/source/ff.c **** 			fp->obj.id = fs->id;
 7665              		.loc 1 3861 4 is_stmt 1 view .LVU2621
3861:DRIVER/FatFs/source/ff.c **** 			fp->obj.id = fs->id;
 7666              		.loc 1 3861 15 is_stmt 0 view .LVU2622
 7667 015c C6F800A0 		str	r10, [r6]
3862:DRIVER/FatFs/source/ff.c **** 			fp->flag = mode;	/* Set file access mode */
 7668              		.loc 1 3862 4 is_stmt 1 view .LVU2623
3862:DRIVER/FatFs/source/ff.c **** 			fp->flag = mode;	/* Set file access mode */
 7669              		.loc 1 3862 19 is_stmt 0 view .LVU2624
 7670 0160 BAF80630 		ldrh	r3, [r10, #6]
3862:DRIVER/FatFs/source/ff.c **** 			fp->flag = mode;	/* Set file access mode */
 7671              		.loc 1 3862 15 view .LVU2625
 7672 0164 B380     		strh	r3, [r6, #4]	@ movhi
3863:DRIVER/FatFs/source/ff.c **** 			fp->err = 0;		/* Clear error flag */
 7673              		.loc 1 3863 4 is_stmt 1 view .LVU2626
3863:DRIVER/FatFs/source/ff.c **** 			fp->err = 0;		/* Clear error flag */
 7674              		.loc 1 3863 13 is_stmt 0 view .LVU2627
 7675 0166 3774     		strb	r7, [r6, #16]
3864:DRIVER/FatFs/source/ff.c **** 			fp->sect = 0;		/* Invalidate current data sector */
 7676              		.loc 1 3864 4 is_stmt 1 view .LVU2628
3864:DRIVER/FatFs/source/ff.c **** 			fp->sect = 0;		/* Invalidate current data sector */
 7677              		.loc 1 3864 12 is_stmt 0 view .LVU2629
 7678 0168 0021     		movs	r1, #0
 7679 016a 7174     		strb	r1, [r6, #17]
3865:DRIVER/FatFs/source/ff.c **** 			fp->fptr = 0;		/* Set file pointer top of the file */
 7680              		.loc 1 3865 4 is_stmt 1 view .LVU2630
3865:DRIVER/FatFs/source/ff.c **** 			fp->fptr = 0;		/* Set file pointer top of the file */
 7681              		.loc 1 3865 13 is_stmt 0 view .LVU2631
 7682 016c F161     		str	r1, [r6, #28]
3866:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY
 7683              		.loc 1 3866 4 is_stmt 1 view .LVU2632
3866:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY
 7684              		.loc 1 3866 13 is_stmt 0 view .LVU2633
 7685 016e 7161     		str	r1, [r6, #20]
3869:DRIVER/FatFs/source/ff.c **** #endif
 7686              		.loc 1 3869 4 is_stmt 1 view .LVU2634
3869:DRIVER/FatFs/source/ff.c **** #endif
 7687              		.loc 1 3869 13 is_stmt 0 view .LVU2635
 7688 0170 06F12809 		add	r9, r6, #40
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 277


3869:DRIVER/FatFs/source/ff.c **** #endif
 7689              		.loc 1 3869 4 view .LVU2636
 7690 0174 4FF48052 		mov	r2, #4096
 7691 0178 4846     		mov	r0, r9
 7692 017a FFF7FEFF 		bl	memset
 7693              	.LVL929:
3871:DRIVER/FatFs/source/ff.c **** 				fp->fptr = fp->obj.objsize;			/* Offset to seek */
 7694              		.loc 1 3871 4 is_stmt 1 view .LVU2637
3871:DRIVER/FatFs/source/ff.c **** 				fp->fptr = fp->obj.objsize;			/* Offset to seek */
 7695              		.loc 1 3871 7 is_stmt 0 view .LVU2638
 7696 017e 17F0200F 		tst	r7, #32
 7697 0182 3AD0     		beq	.L567
3871:DRIVER/FatFs/source/ff.c **** 				fp->fptr = fp->obj.objsize;			/* Offset to seek */
 7698              		.loc 1 3871 28 discriminator 1 view .LVU2639
 7699 0184 B8F1000F 		cmp	r8, #0
 7700 0188 37D0     		beq	.L567
3872:DRIVER/FatFs/source/ff.c **** 				bcs = (DWORD)fs->csize * SS(fs);	/* Cluster size in byte */
 7701              		.loc 1 3872 5 is_stmt 1 view .LVU2640
3872:DRIVER/FatFs/source/ff.c **** 				bcs = (DWORD)fs->csize * SS(fs);	/* Cluster size in byte */
 7702              		.loc 1 3872 14 is_stmt 0 view .LVU2641
 7703 018a C6F81480 		str	r8, [r6, #20]
3873:DRIVER/FatFs/source/ff.c **** 				clst = fp->obj.sclust;				/* Follow the cluster chain */
 7704              		.loc 1 3873 5 is_stmt 1 view .LVU2642
3873:DRIVER/FatFs/source/ff.c **** 				clst = fp->obj.sclust;				/* Follow the cluster chain */
 7705              		.loc 1 3873 20 is_stmt 0 view .LVU2643
 7706 018e BAF80A70 		ldrh	r7, [r10, #10]
 7707              	.LVL930:
3873:DRIVER/FatFs/source/ff.c **** 				clst = fp->obj.sclust;				/* Follow the cluster chain */
 7708              		.loc 1 3873 30 view .LVU2644
 7709 0192 BAF80C30 		ldrh	r3, [r10, #12]
3873:DRIVER/FatFs/source/ff.c **** 				clst = fp->obj.sclust;				/* Follow the cluster chain */
 7710              		.loc 1 3873 9 view .LVU2645
 7711 0196 03FB07F7 		mul	r7, r3, r7
 7712              	.LVL931:
3874:DRIVER/FatFs/source/ff.c **** 				for (ofs = fp->obj.objsize; res == FR_OK && ofs > bcs; ofs -= bcs) {
 7713              		.loc 1 3874 5 is_stmt 1 view .LVU2646
3875:DRIVER/FatFs/source/ff.c **** 					clst = get_fat(&fp->obj, clst);
 7714              		.loc 1 3875 5 view .LVU2647
3875:DRIVER/FatFs/source/ff.c **** 					clst = get_fat(&fp->obj, clst);
 7715              		.loc 1 3875 5 is_stmt 0 view .LVU2648
 7716 019a 02E0     		b	.L568
 7717              	.LVL932:
 7718              	.L578:
3877:DRIVER/FatFs/source/ff.c **** 					if (clst == 0xFFFFFFFF) res = FR_DISK_ERR;
 7719              		.loc 1 3877 25 view .LVU2649
 7720 019c 0225     		movs	r5, #2
 7721              	.LVL933:
 7722              	.L569:
3875:DRIVER/FatFs/source/ff.c **** 					clst = get_fat(&fp->obj, clst);
 7723              		.loc 1 3875 64 is_stmt 1 discriminator 2 view .LVU2650
 7724 019e A8EB0708 		sub	r8, r8, r7
 7725              	.LVL934:
 7726              	.L568:
3875:DRIVER/FatFs/source/ff.c **** 					clst = get_fat(&fp->obj, clst);
 7727              		.loc 1 3875 46 discriminator 1 view .LVU2651
 7728 01a2 6DB9     		cbnz	r5, .L570
3875:DRIVER/FatFs/source/ff.c **** 					clst = get_fat(&fp->obj, clst);
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 278


 7729              		.loc 1 3875 46 is_stmt 0 discriminator 3 view .LVU2652
 7730 01a4 B845     		cmp	r8, r7
 7731 01a6 0BD9     		bls	.L570
3876:DRIVER/FatFs/source/ff.c **** 					if (clst <= 1) res = FR_INT_ERR;
 7732              		.loc 1 3876 6 is_stmt 1 view .LVU2653
3876:DRIVER/FatFs/source/ff.c **** 					if (clst <= 1) res = FR_INT_ERR;
 7733              		.loc 1 3876 13 is_stmt 0 view .LVU2654
 7734 01a8 2146     		mov	r1, r4
 7735 01aa 3046     		mov	r0, r6
 7736 01ac FFF7FEFF 		bl	get_fat
 7737              	.LVL935:
 7738 01b0 0446     		mov	r4, r0
 7739              	.LVL936:
3877:DRIVER/FatFs/source/ff.c **** 					if (clst == 0xFFFFFFFF) res = FR_DISK_ERR;
 7740              		.loc 1 3877 6 is_stmt 1 view .LVU2655
3877:DRIVER/FatFs/source/ff.c **** 					if (clst == 0xFFFFFFFF) res = FR_DISK_ERR;
 7741              		.loc 1 3877 9 is_stmt 0 view .LVU2656
 7742 01b2 0128     		cmp	r0, #1
 7743 01b4 F2D9     		bls	.L578
3878:DRIVER/FatFs/source/ff.c **** 				}
 7744              		.loc 1 3878 6 is_stmt 1 view .LVU2657
3878:DRIVER/FatFs/source/ff.c **** 				}
 7745              		.loc 1 3878 9 is_stmt 0 view .LVU2658
 7746 01b6 B0F1FF3F 		cmp	r0, #-1
 7747 01ba F0D1     		bne	.L569
3878:DRIVER/FatFs/source/ff.c **** 				}
 7748              		.loc 1 3878 34 view .LVU2659
 7749 01bc 0125     		movs	r5, #1
 7750              	.LVL937:
3878:DRIVER/FatFs/source/ff.c **** 				}
 7751              		.loc 1 3878 34 view .LVU2660
 7752 01be EEE7     		b	.L569
 7753              	.LVL938:
 7754              	.L570:
3880:DRIVER/FatFs/source/ff.c **** 				if (res == FR_OK && ofs % SS(fs)) {	/* Fill sector buffer if not on the sector boundary */
 7755              		.loc 1 3880 5 is_stmt 1 view .LVU2661
3880:DRIVER/FatFs/source/ff.c **** 				if (res == FR_OK && ofs % SS(fs)) {	/* Fill sector buffer if not on the sector boundary */
 7756              		.loc 1 3880 15 is_stmt 0 view .LVU2662
 7757 01c0 B461     		str	r4, [r6, #24]
3881:DRIVER/FatFs/source/ff.c **** 					sc = clst2sect(fs, clst);
 7758              		.loc 1 3881 5 is_stmt 1 view .LVU2663
3881:DRIVER/FatFs/source/ff.c **** 					sc = clst2sect(fs, clst);
 7759              		.loc 1 3881 8 is_stmt 0 view .LVU2664
 7760 01c2 002D     		cmp	r5, #0
 7761 01c4 7FF42FAF 		bne	.L559
3881:DRIVER/FatFs/source/ff.c **** 					sc = clst2sect(fs, clst);
 7762              		.loc 1 3881 31 discriminator 1 view .LVU2665
 7763 01c8 839F     		ldr	r7, [sp, #524]
 7764              	.LVL939:
3881:DRIVER/FatFs/source/ff.c **** 					sc = clst2sect(fs, clst);
 7765              		.loc 1 3881 31 discriminator 1 view .LVU2666
 7766 01ca B7F80CA0 		ldrh	r10, [r7, #12]
3881:DRIVER/FatFs/source/ff.c **** 					sc = clst2sect(fs, clst);
 7767              		.loc 1 3881 29 discriminator 1 view .LVU2667
 7768 01ce B8FBFAF3 		udiv	r3, r8, r10
 7769 01d2 0AFB1383 		mls	r3, r10, r3, r8
3881:DRIVER/FatFs/source/ff.c **** 					sc = clst2sect(fs, clst);
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 279


 7770              		.loc 1 3881 22 discriminator 1 view .LVU2668
 7771 01d6 83B1     		cbz	r3, .L567
3882:DRIVER/FatFs/source/ff.c **** 					if (sc == 0) {
 7772              		.loc 1 3882 6 is_stmt 1 view .LVU2669
3882:DRIVER/FatFs/source/ff.c **** 					if (sc == 0) {
 7773              		.loc 1 3882 11 is_stmt 0 view .LVU2670
 7774 01d8 2146     		mov	r1, r4
 7775 01da 3846     		mov	r0, r7
 7776 01dc FFF7FEFF 		bl	clst2sect
 7777              	.LVL940:
3883:DRIVER/FatFs/source/ff.c **** 						res = FR_INT_ERR;
 7778              		.loc 1 3883 6 is_stmt 1 view .LVU2671
3883:DRIVER/FatFs/source/ff.c **** 						res = FR_INT_ERR;
 7779              		.loc 1 3883 9 is_stmt 0 view .LVU2672
 7780 01e0 08B9     		cbnz	r0, .L586
3884:DRIVER/FatFs/source/ff.c **** 					} else {
 7781              		.loc 1 3884 11 view .LVU2673
 7782 01e2 0225     		movs	r5, #2
 7783              	.LVL941:
3884:DRIVER/FatFs/source/ff.c **** 					} else {
 7784              		.loc 1 3884 11 view .LVU2674
 7785 01e4 1FE7     		b	.L559
 7786              	.LVL942:
 7787              	.L586:
3886:DRIVER/FatFs/source/ff.c **** #if !FF_FS_TINY
 7788              		.loc 1 3886 7 is_stmt 1 view .LVU2675
3886:DRIVER/FatFs/source/ff.c **** #if !FF_FS_TINY
 7789              		.loc 1 3886 23 is_stmt 0 view .LVU2676
 7790 01e6 B8FBFAF2 		udiv	r2, r8, r10
3886:DRIVER/FatFs/source/ff.c **** #if !FF_FS_TINY
 7791              		.loc 1 3886 21 view .LVU2677
 7792 01ea 0244     		add	r2, r2, r0
3886:DRIVER/FatFs/source/ff.c **** #if !FF_FS_TINY
 7793              		.loc 1 3886 16 view .LVU2678
 7794 01ec F261     		str	r2, [r6, #28]
3888:DRIVER/FatFs/source/ff.c **** #endif
 7795              		.loc 1 3888 7 is_stmt 1 view .LVU2679
3888:DRIVER/FatFs/source/ff.c **** #endif
 7796              		.loc 1 3888 11 is_stmt 0 view .LVU2680
 7797 01ee 0123     		movs	r3, #1
 7798 01f0 4946     		mov	r1, r9
 7799 01f2 7878     		ldrb	r0, [r7, #1]	@ zero_extendqisi2
 7800              	.LVL943:
3888:DRIVER/FatFs/source/ff.c **** #endif
 7801              		.loc 1 3888 11 view .LVU2681
 7802 01f4 FFF7FEFF 		bl	disk_read
 7803              	.LVL944:
3888:DRIVER/FatFs/source/ff.c **** #endif
 7804              		.loc 1 3888 10 view .LVU2682
 7805 01f8 28B9     		cbnz	r0, .L581
 7806              	.LVL945:
 7807              	.L567:
3899:DRIVER/FatFs/source/ff.c **** 	}
 7808              		.loc 1 3899 16 is_stmt 1 view .LVU2683
3902:DRIVER/FatFs/source/ff.c **** 
 7809              		.loc 1 3902 2 view .LVU2684
3902:DRIVER/FatFs/source/ff.c **** 
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 280


 7810              		.loc 1 3902 5 is_stmt 0 view .LVU2685
 7811 01fa 002D     		cmp	r5, #0
 7812 01fc 3FF415AF 		beq	.L558
3902:DRIVER/FatFs/source/ff.c **** 
 7813              		.loc 1 3902 5 view .LVU2686
 7814 0200 11E7     		b	.L559
 7815              	.LVL946:
 7816              	.L576:
3816:DRIVER/FatFs/source/ff.c **** 				} else {
 7817              		.loc 1 3816 10 view .LVU2687
 7818 0202 0425     		movs	r5, #4
 7819              	.LVL947:
3816:DRIVER/FatFs/source/ff.c **** 				} else {
 7820              		.loc 1 3816 10 view .LVU2688
 7821 0204 0FE7     		b	.L559
 7822              	.LVL948:
 7823              	.L581:
3888:DRIVER/FatFs/source/ff.c **** #endif
 7824              		.loc 1 3888 68 view .LVU2689
 7825 0206 0125     		movs	r5, #1
 7826              	.LVL949:
3888:DRIVER/FatFs/source/ff.c **** #endif
 7827              		.loc 1 3888 68 view .LVU2690
 7828 0208 0DE7     		b	.L559
 7829              	.LVL950:
 7830              	.L572:
3734:DRIVER/FatFs/source/ff.c **** 
 7831              		.loc 1 3734 18 view .LVU2691
 7832 020a 0925     		movs	r5, #9
 7833 020c 0DE7     		b	.L558
 7834              		.cfi_endproc
 7835              	.LFE40:
 7837              		.section	.text.f_read,"ax",%progbits
 7838              		.align	1
 7839              		.global	f_read
 7840              		.syntax unified
 7841              		.thumb
 7842              		.thumb_func
 7844              	f_read:
 7845              	.LVL951:
 7846              	.LFB41:
3920:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
 7847              		.loc 1 3920 1 is_stmt 1 view -0
 7848              		.cfi_startproc
 7849              		@ args = 0, pretend = 0, frame = 16
 7850              		@ frame_needed = 0, uses_anonymous_args = 0
3920:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
 7851              		.loc 1 3920 1 is_stmt 0 view .LVU2693
 7852 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 7853              	.LCFI57:
 7854              		.cfi_def_cfa_offset 36
 7855              		.cfi_offset 4, -36
 7856              		.cfi_offset 5, -32
 7857              		.cfi_offset 6, -28
 7858              		.cfi_offset 7, -24
 7859              		.cfi_offset 8, -20
 7860              		.cfi_offset 9, -16
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 281


 7861              		.cfi_offset 10, -12
 7862              		.cfi_offset 11, -8
 7863              		.cfi_offset 14, -4
 7864 0004 85B0     		sub	sp, sp, #20
 7865              	.LCFI58:
 7866              		.cfi_def_cfa_offset 56
 7867 0006 0446     		mov	r4, r0
 7868 0008 0F46     		mov	r7, r1
 7869 000a 1546     		mov	r5, r2
 7870 000c 9846     		mov	r8, r3
3921:DRIVER/FatFs/source/ff.c **** 	FATFS *fs;
 7871              		.loc 1 3921 2 is_stmt 1 view .LVU2694
3922:DRIVER/FatFs/source/ff.c **** 	DWORD clst;
 7872              		.loc 1 3922 2 view .LVU2695
3923:DRIVER/FatFs/source/ff.c **** 	LBA_t sect;
 7873              		.loc 1 3923 2 view .LVU2696
3924:DRIVER/FatFs/source/ff.c **** 	FSIZE_t remain;
 7874              		.loc 1 3924 2 view .LVU2697
3925:DRIVER/FatFs/source/ff.c **** 	UINT rcnt, cc, csect;
 7875              		.loc 1 3925 2 view .LVU2698
3926:DRIVER/FatFs/source/ff.c **** 	BYTE *rbuff = (BYTE*)buff;
 7876              		.loc 1 3926 2 view .LVU2699
3927:DRIVER/FatFs/source/ff.c **** 
 7877              		.loc 1 3927 2 view .LVU2700
 7878              	.LVL952:
3930:DRIVER/FatFs/source/ff.c **** 	res = validate(&fp->obj, &fs);				/* Check validity of the file object */
 7879              		.loc 1 3930 2 view .LVU2701
3930:DRIVER/FatFs/source/ff.c **** 	res = validate(&fp->obj, &fs);				/* Check validity of the file object */
 7880              		.loc 1 3930 6 is_stmt 0 view .LVU2702
 7881 000e 0023     		movs	r3, #0
 7882              	.LVL953:
3930:DRIVER/FatFs/source/ff.c **** 	res = validate(&fp->obj, &fs);				/* Check validity of the file object */
 7883              		.loc 1 3930 6 view .LVU2703
 7884 0010 C8F80030 		str	r3, [r8]
3931:DRIVER/FatFs/source/ff.c **** 	if (res != FR_OK || (res = (FRESULT)fp->err) != FR_OK) LEAVE_FF(fs, res);	/* Check validity */
 7885              		.loc 1 3931 2 is_stmt 1 view .LVU2704
3931:DRIVER/FatFs/source/ff.c **** 	if (res != FR_OK || (res = (FRESULT)fp->err) != FR_OK) LEAVE_FF(fs, res);	/* Check validity */
 7886              		.loc 1 3931 8 is_stmt 0 view .LVU2705
 7887 0014 03A9     		add	r1, sp, #12
 7888              	.LVL954:
3931:DRIVER/FatFs/source/ff.c **** 	if (res != FR_OK || (res = (FRESULT)fp->err) != FR_OK) LEAVE_FF(fs, res);	/* Check validity */
 7889              		.loc 1 3931 8 view .LVU2706
 7890 0016 FFF7FEFF 		bl	validate
 7891              	.LVL955:
3932:DRIVER/FatFs/source/ff.c **** 	if (!(fp->flag & FA_READ)) LEAVE_FF(fs, FR_DENIED); /* Check access mode */
 7892              		.loc 1 3932 2 is_stmt 1 view .LVU2707
3932:DRIVER/FatFs/source/ff.c **** 	if (!(fp->flag & FA_READ)) LEAVE_FF(fs, FR_DENIED); /* Check access mode */
 7893              		.loc 1 3932 5 is_stmt 0 view .LVU2708
 7894 001a 0190     		str	r0, [sp, #4]
 7895 001c 0028     		cmp	r0, #0
 7896 001e 40F0B380 		bne	.L590
3932:DRIVER/FatFs/source/ff.c **** 	if (!(fp->flag & FA_READ)) LEAVE_FF(fs, FR_DENIED); /* Check access mode */
 7897              		.loc 1 3932 27 discriminator 2 view .LVU2709
 7898 0022 637C     		ldrb	r3, [r4, #17]	@ zero_extendqisi2
 7899 0024 0193     		str	r3, [sp, #4]
 7900              	.LVL956:
3932:DRIVER/FatFs/source/ff.c **** 	if (!(fp->flag & FA_READ)) LEAVE_FF(fs, FR_DENIED); /* Check access mode */
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 282


 7901              		.loc 1 3932 19 discriminator 2 view .LVU2710
 7902 0026 002B     		cmp	r3, #0
 7903 0028 40F0AE80 		bne	.L590
3933:DRIVER/FatFs/source/ff.c **** 	remain = fp->obj.objsize - fp->fptr;
 7904              		.loc 1 3933 2 is_stmt 1 view .LVU2711
3933:DRIVER/FatFs/source/ff.c **** 	remain = fp->obj.objsize - fp->fptr;
 7905              		.loc 1 3933 10 is_stmt 0 view .LVU2712
 7906 002c 237C     		ldrb	r3, [r4, #16]	@ zero_extendqisi2
 7907              	.LVL957:
3933:DRIVER/FatFs/source/ff.c **** 	remain = fp->obj.objsize - fp->fptr;
 7908              		.loc 1 3933 5 view .LVU2713
 7909 002e 13F0010F 		tst	r3, #1
 7910 0032 00F0C880 		beq	.L611
3934:DRIVER/FatFs/source/ff.c **** 	if (btr > remain) btr = (UINT)remain;		/* Truncate btr by remaining bytes */
 7911              		.loc 1 3934 2 is_stmt 1 view .LVU2714
3934:DRIVER/FatFs/source/ff.c **** 	if (btr > remain) btr = (UINT)remain;		/* Truncate btr by remaining bytes */
 7912              		.loc 1 3934 18 is_stmt 0 view .LVU2715
 7913 0036 E668     		ldr	r6, [r4, #12]
3934:DRIVER/FatFs/source/ff.c **** 	if (btr > remain) btr = (UINT)remain;		/* Truncate btr by remaining bytes */
 7914              		.loc 1 3934 31 view .LVU2716
 7915 0038 6369     		ldr	r3, [r4, #20]
3934:DRIVER/FatFs/source/ff.c **** 	if (btr > remain) btr = (UINT)remain;		/* Truncate btr by remaining bytes */
 7916              		.loc 1 3934 9 view .LVU2717
 7917 003a F61A     		subs	r6, r6, r3
 7918              	.LVL958:
3935:DRIVER/FatFs/source/ff.c **** 
 7919              		.loc 1 3935 2 is_stmt 1 view .LVU2718
3935:DRIVER/FatFs/source/ff.c **** 
 7920              		.loc 1 3935 5 is_stmt 0 view .LVU2719
 7921 003c AE42     		cmp	r6, r5
 7922 003e 61D3     		bcc	.L609
 7923 0040 2E46     		mov	r6, r5
 7924              	.LVL959:
3935:DRIVER/FatFs/source/ff.c **** 
 7925              		.loc 1 3935 5 view .LVU2720
 7926 0042 5FE0     		b	.L609
 7927              	.LVL960:
 7928              	.L595:
3950:DRIVER/FatFs/source/ff.c **** 					}
 7929              		.loc 1 3950 7 is_stmt 1 view .LVU2721
3950:DRIVER/FatFs/source/ff.c **** 					}
 7930              		.loc 1 3950 14 is_stmt 0 view .LVU2722
 7931 0044 A169     		ldr	r1, [r4, #24]
 7932 0046 2046     		mov	r0, r4
 7933 0048 FFF7FEFF 		bl	get_fat
 7934              	.LVL961:
3950:DRIVER/FatFs/source/ff.c **** 					}
 7935              		.loc 1 3950 14 view .LVU2723
 7936 004c 6EE0     		b	.L596
 7937              	.L618:
3953:DRIVER/FatFs/source/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 7938              		.loc 1 3953 19 is_stmt 1 discriminator 1 view .LVU2724
 7939 004e 4FF0020A 		mov	r10, #2
 7940 0052 84F811A0 		strb	r10, [r4, #17]
3953:DRIVER/FatFs/source/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 7941              		.loc 1 3953 19 discriminator 1 view .LVU2725
 7942 0056 CDF804A0 		str	r10, [sp, #4]
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 283


 7943              	.LVL962:
3953:DRIVER/FatFs/source/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 7944              		.loc 1 3953 19 is_stmt 0 discriminator 1 view .LVU2726
 7945 005a 95E0     		b	.L590
 7946              	.LVL963:
 7947              	.L619:
3954:DRIVER/FatFs/source/ff.c **** 				fp->clust = clst;				/* Update current cluster */
 7948              		.loc 1 3954 29 is_stmt 1 discriminator 1 view .LVU2727
 7949 005c 4FF0010A 		mov	r10, #1
 7950 0060 84F811A0 		strb	r10, [r4, #17]
3954:DRIVER/FatFs/source/ff.c **** 				fp->clust = clst;				/* Update current cluster */
 7951              		.loc 1 3954 29 discriminator 1 view .LVU2728
 7952 0064 CDF804A0 		str	r10, [sp, #4]
 7953              	.LVL964:
3954:DRIVER/FatFs/source/ff.c **** 				fp->clust = clst;				/* Update current cluster */
 7954              		.loc 1 3954 29 is_stmt 0 discriminator 1 view .LVU2729
 7955 0068 8EE0     		b	.L590
 7956              	.LVL965:
 7957              	.L620:
3958:DRIVER/FatFs/source/ff.c **** 			sect += csect;
 7958              		.loc 1 3958 19 is_stmt 1 discriminator 1 view .LVU2730
 7959 006a 4FF0020A 		mov	r10, #2
 7960 006e 84F811A0 		strb	r10, [r4, #17]
3958:DRIVER/FatFs/source/ff.c **** 			sect += csect;
 7961              		.loc 1 3958 19 discriminator 1 view .LVU2731
 7962 0072 CDF804A0 		str	r10, [sp, #4]
 7963              	.LVL966:
3958:DRIVER/FatFs/source/ff.c **** 			sect += csect;
 7964              		.loc 1 3958 19 is_stmt 0 discriminator 1 view .LVU2732
 7965 0076 87E0     		b	.L590
 7966              	.LVL967:
 7967              	.L602:
3965:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY && FF_FS_MINIMIZE <= 2		/* Replace one of the read sectors with cached data if 
 7968              		.loc 1 3965 79 is_stmt 1 discriminator 2 view .LVU2733
3972:DRIVER/FatFs/source/ff.c **** 					memcpy(rbuff + ((fp->sect - sect) * SS(fs)), fp->buf, SS(fs));
 7969              		.loc 1 3972 5 discriminator 2 view .LVU2734
3972:DRIVER/FatFs/source/ff.c **** 					memcpy(rbuff + ((fp->sect - sect) * SS(fs)), fp->buf, SS(fs));
 7970              		.loc 1 3972 9 is_stmt 0 discriminator 2 view .LVU2735
 7971 0078 94F91030 		ldrsb	r3, [r4, #16]
3972:DRIVER/FatFs/source/ff.c **** 					memcpy(rbuff + ((fp->sect - sect) * SS(fs)), fp->buf, SS(fs));
 7972              		.loc 1 3972 8 discriminator 2 view .LVU2736
 7973 007c 002B     		cmp	r3, #0
 7974 007e 04DB     		blt	.L615
 7975              	.L603:
3977:DRIVER/FatFs/source/ff.c **** 				continue;
 7976              		.loc 1 3977 5 is_stmt 1 view .LVU2737
3977:DRIVER/FatFs/source/ff.c **** 				continue;
 7977              		.loc 1 3977 12 is_stmt 0 view .LVU2738
 7978 0080 039B     		ldr	r3, [sp, #12]
 7979 0082 9D89     		ldrh	r5, [r3, #12]
 7980              	.LVL968:
3977:DRIVER/FatFs/source/ff.c **** 				continue;
 7981              		.loc 1 3977 10 view .LVU2739
 7982 0084 0AFB05F5 		mul	r5, r10, r5
 7983              	.LVL969:
3978:DRIVER/FatFs/source/ff.c **** 			}
 7984              		.loc 1 3978 5 is_stmt 1 view .LVU2740
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 284


 7985 0088 32E0     		b	.L604
 7986              	.LVL970:
 7987              	.L615:
3972:DRIVER/FatFs/source/ff.c **** 					memcpy(rbuff + ((fp->sect - sect) * SS(fs)), fp->buf, SS(fs));
 7988              		.loc 1 3972 36 is_stmt 0 discriminator 1 view .LVU2741
 7989 008a E369     		ldr	r3, [r4, #28]
3972:DRIVER/FatFs/source/ff.c **** 					memcpy(rbuff + ((fp->sect - sect) * SS(fs)), fp->buf, SS(fs));
 7990              		.loc 1 3972 43 discriminator 1 view .LVU2742
 7991 008c A3EB0903 		sub	r3, r3, r9
3972:DRIVER/FatFs/source/ff.c **** 					memcpy(rbuff + ((fp->sect - sect) * SS(fs)), fp->buf, SS(fs));
 7992              		.loc 1 3972 31 discriminator 1 view .LVU2743
 7993 0090 5345     		cmp	r3, r10
 7994 0092 F5D2     		bcs	.L603
3973:DRIVER/FatFs/source/ff.c **** 				}
 7995              		.loc 1 3973 6 is_stmt 1 view .LVU2744
3973:DRIVER/FatFs/source/ff.c **** 				}
 7996              		.loc 1 3973 42 is_stmt 0 view .LVU2745
 7997 0094 039A     		ldr	r2, [sp, #12]
 7998 0096 9289     		ldrh	r2, [r2, #12]
3973:DRIVER/FatFs/source/ff.c **** 				}
 7999              		.loc 1 3973 6 view .LVU2746
 8000 0098 04F12801 		add	r1, r4, #40
 8001 009c 02FB0370 		mla	r0, r2, r3, r7
 8002 00a0 FFF7FEFF 		bl	memcpy
 8003              	.LVL971:
 8004 00a4 ECE7     		b	.L603
 8005              	.L600:
3981:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY
 8006              		.loc 1 3981 4 is_stmt 1 view .LVU2747
3981:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY
 8007              		.loc 1 3981 10 is_stmt 0 view .LVU2748
 8008 00a6 E269     		ldr	r2, [r4, #28]
3981:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY
 8009              		.loc 1 3981 7 view .LVU2749
 8010 00a8 4A45     		cmp	r2, r9
 8011 00aa 0DD0     		beq	.L605
3983:DRIVER/FatFs/source/ff.c **** 					if (disk_write(fs->pdrv, fp->buf, fp->sect, 1) != RES_OK) ABORT(fs, FR_DISK_ERR);
 8012              		.loc 1 3983 5 is_stmt 1 view .LVU2750
3983:DRIVER/FatFs/source/ff.c **** 					if (disk_write(fs->pdrv, fp->buf, fp->sect, 1) != RES_OK) ABORT(fs, FR_DISK_ERR);
 8013              		.loc 1 3983 9 is_stmt 0 view .LVU2751
 8014 00ac 94F91030 		ldrsb	r3, [r4, #16]
3983:DRIVER/FatFs/source/ff.c **** 					if (disk_write(fs->pdrv, fp->buf, fp->sect, 1) != RES_OK) ABORT(fs, FR_DISK_ERR);
 8015              		.loc 1 3983 8 view .LVU2752
 8016 00b0 002B     		cmp	r3, #0
 8017 00b2 6DDB     		blt	.L616
 8018              	.L606:
3988:DRIVER/FatFs/source/ff.c **** 			}
 8019              		.loc 1 3988 5 is_stmt 1 view .LVU2753
3988:DRIVER/FatFs/source/ff.c **** 			}
 8020              		.loc 1 3988 9 is_stmt 0 view .LVU2754
 8021 00b4 0123     		movs	r3, #1
 8022 00b6 4A46     		mov	r2, r9
 8023 00b8 04F12801 		add	r1, r4, #40
 8024 00bc 0398     		ldr	r0, [sp, #12]
 8025 00be 4078     		ldrb	r0, [r0, #1]	@ zero_extendqisi2
 8026 00c0 FFF7FEFF 		bl	disk_read
 8027              	.LVL972:
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 285


3988:DRIVER/FatFs/source/ff.c **** 			}
 8028              		.loc 1 3988 8 view .LVU2755
 8029 00c4 0028     		cmp	r0, #0
 8030 00c6 77D1     		bne	.L617
 8031              	.L605:
3988:DRIVER/FatFs/source/ff.c **** 			}
 8032              		.loc 1 3988 80 is_stmt 1 discriminator 2 view .LVU2756
3991:DRIVER/FatFs/source/ff.c **** 		}
 8033              		.loc 1 3991 4 discriminator 2 view .LVU2757
3991:DRIVER/FatFs/source/ff.c **** 		}
 8034              		.loc 1 3991 13 is_stmt 0 discriminator 2 view .LVU2758
 8035 00c8 C4F81C90 		str	r9, [r4, #28]
 8036              	.LVL973:
 8037              	.L593:
3993:DRIVER/FatFs/source/ff.c **** 		if (rcnt > btr) rcnt = btr;					/* Clip it by btr if needed */
 8038              		.loc 1 3993 3 is_stmt 1 view .LVU2759
3993:DRIVER/FatFs/source/ff.c **** 		if (rcnt > btr) rcnt = btr;					/* Clip it by btr if needed */
 8039              		.loc 1 3993 10 is_stmt 0 view .LVU2760
 8040 00cc 039B     		ldr	r3, [sp, #12]
 8041 00ce 9D89     		ldrh	r5, [r3, #12]
3993:DRIVER/FatFs/source/ff.c **** 		if (rcnt > btr) rcnt = btr;					/* Clip it by btr if needed */
 8042              		.loc 1 3993 27 view .LVU2761
 8043 00d0 6369     		ldr	r3, [r4, #20]
3993:DRIVER/FatFs/source/ff.c **** 		if (rcnt > btr) rcnt = btr;					/* Clip it by btr if needed */
 8044              		.loc 1 3993 34 view .LVU2762
 8045 00d2 B3FBF5F2 		udiv	r2, r3, r5
 8046 00d6 05FB1233 		mls	r3, r5, r2, r3
3993:DRIVER/FatFs/source/ff.c **** 		if (rcnt > btr) rcnt = btr;					/* Clip it by btr if needed */
 8047              		.loc 1 3993 8 view .LVU2763
 8048 00da ED1A     		subs	r5, r5, r3
 8049              	.LVL974:
3994:DRIVER/FatFs/source/ff.c **** #if FF_FS_TINY
 8050              		.loc 1 3994 3 is_stmt 1 view .LVU2764
3994:DRIVER/FatFs/source/ff.c **** #if FF_FS_TINY
 8051              		.loc 1 3994 6 is_stmt 0 view .LVU2765
 8052 00dc AE42     		cmp	r6, r5
 8053 00de 00D2     		bcs	.L608
3994:DRIVER/FatFs/source/ff.c **** #if FF_FS_TINY
 8054              		.loc 1 3994 24 view .LVU2766
 8055 00e0 3546     		mov	r5, r6
 8056              	.LVL975:
 8057              	.L608:
3999:DRIVER/FatFs/source/ff.c **** #endif
 8058              		.loc 1 3999 3 is_stmt 1 view .LVU2767
3999:DRIVER/FatFs/source/ff.c **** #endif
 8059              		.loc 1 3999 17 is_stmt 0 view .LVU2768
 8060 00e2 04F12801 		add	r1, r4, #40
3999:DRIVER/FatFs/source/ff.c **** #endif
 8061              		.loc 1 3999 3 view .LVU2769
 8062 00e6 2A46     		mov	r2, r5
 8063 00e8 1944     		add	r1, r1, r3
 8064 00ea 3846     		mov	r0, r7
 8065 00ec FFF7FEFF 		bl	memcpy
 8066              	.LVL976:
 8067              	.L604:
3937:DRIVER/FatFs/source/ff.c **** 		if (fp->fptr % SS(fs) == 0) {			/* On the sector boundary? */
 8068              		.loc 1 3937 58 is_stmt 1 view .LVU2770
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 286


3937:DRIVER/FatFs/source/ff.c **** 		if (fp->fptr % SS(fs) == 0) {			/* On the sector boundary? */
 8069              		.loc 1 3937 23 is_stmt 0 view .LVU2771
 8070 00f0 761B     		subs	r6, r6, r5
 8071              	.LVL977:
3937:DRIVER/FatFs/source/ff.c **** 		if (fp->fptr % SS(fs) == 0) {			/* On the sector boundary? */
 8072              		.loc 1 3937 32 view .LVU2772
 8073 00f2 D8F80030 		ldr	r3, [r8]
3937:DRIVER/FatFs/source/ff.c **** 		if (fp->fptr % SS(fs) == 0) {			/* On the sector boundary? */
 8074              		.loc 1 3937 36 view .LVU2773
 8075 00f6 2B44     		add	r3, r3, r5
 8076 00f8 C8F80030 		str	r3, [r8]
3937:DRIVER/FatFs/source/ff.c **** 		if (fp->fptr % SS(fs) == 0) {			/* On the sector boundary? */
 8077              		.loc 1 3937 51 view .LVU2774
 8078 00fc 2F44     		add	r7, r7, r5
 8079              	.LVL978:
3937:DRIVER/FatFs/source/ff.c **** 		if (fp->fptr % SS(fs) == 0) {			/* On the sector boundary? */
 8080              		.loc 1 3937 62 view .LVU2775
 8081 00fe 6369     		ldr	r3, [r4, #20]
3937:DRIVER/FatFs/source/ff.c **** 		if (fp->fptr % SS(fs) == 0) {			/* On the sector boundary? */
 8082              		.loc 1 3937 69 view .LVU2776
 8083 0100 2B44     		add	r3, r3, r5
 8084 0102 6361     		str	r3, [r4, #20]
 8085              	.LVL979:
 8086              	.L609:
3937:DRIVER/FatFs/source/ff.c **** 		if (fp->fptr % SS(fs) == 0) {			/* On the sector boundary? */
 8087              		.loc 1 3937 14 is_stmt 1 discriminator 1 view .LVU2777
 8088 0104 002E     		cmp	r6, #0
 8089 0106 3FD0     		beq	.L590
3938:DRIVER/FatFs/source/ff.c **** 			csect = (UINT)(fp->fptr / SS(fs) & (fs->csize - 1));	/* Sector offset in the cluster */
 8090              		.loc 1 3938 3 view .LVU2778
3938:DRIVER/FatFs/source/ff.c **** 			csect = (UINT)(fp->fptr / SS(fs) & (fs->csize - 1));	/* Sector offset in the cluster */
 8091              		.loc 1 3938 9 is_stmt 0 view .LVU2779
 8092 0108 6269     		ldr	r2, [r4, #20]
3938:DRIVER/FatFs/source/ff.c **** 			csect = (UINT)(fp->fptr / SS(fs) & (fs->csize - 1));	/* Sector offset in the cluster */
 8093              		.loc 1 3938 18 view .LVU2780
 8094 010a 0399     		ldr	r1, [sp, #12]
 8095 010c 8D89     		ldrh	r5, [r1, #12]
3938:DRIVER/FatFs/source/ff.c **** 			csect = (UINT)(fp->fptr / SS(fs) & (fs->csize - 1));	/* Sector offset in the cluster */
 8096              		.loc 1 3938 16 view .LVU2781
 8097 010e B2FBF5F3 		udiv	r3, r2, r5
 8098 0112 05FB1323 		mls	r3, r5, r3, r2
3938:DRIVER/FatFs/source/ff.c **** 			csect = (UINT)(fp->fptr / SS(fs) & (fs->csize - 1));	/* Sector offset in the cluster */
 8099              		.loc 1 3938 6 view .LVU2782
 8100 0116 002B     		cmp	r3, #0
 8101 0118 D8D1     		bne	.L593
3939:DRIVER/FatFs/source/ff.c **** 			if (csect == 0) {					/* On the cluster boundary? */
 8102              		.loc 1 3939 4 is_stmt 1 view .LVU2783
3939:DRIVER/FatFs/source/ff.c **** 			if (csect == 0) {					/* On the cluster boundary? */
 8103              		.loc 1 3939 28 is_stmt 0 view .LVU2784
 8104 011a B2FBF5F5 		udiv	r5, r2, r5
3939:DRIVER/FatFs/source/ff.c **** 			if (csect == 0) {					/* On the cluster boundary? */
 8105              		.loc 1 3939 42 view .LVU2785
 8106 011e 4B89     		ldrh	r3, [r1, #10]
3939:DRIVER/FatFs/source/ff.c **** 			if (csect == 0) {					/* On the cluster boundary? */
 8107              		.loc 1 3939 50 view .LVU2786
 8108 0120 013B     		subs	r3, r3, #1
 8109              	.LVL980:
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 287


3940:DRIVER/FatFs/source/ff.c **** 				if (fp->fptr == 0) {			/* On the top of the file? */
 8110              		.loc 1 3940 4 is_stmt 1 view .LVU2787
3940:DRIVER/FatFs/source/ff.c **** 				if (fp->fptr == 0) {			/* On the top of the file? */
 8111              		.loc 1 3940 7 is_stmt 0 view .LVU2788
 8112 0122 1D40     		ands	r5, r5, r3
 8113              	.LVL981:
3940:DRIVER/FatFs/source/ff.c **** 				if (fp->fptr == 0) {			/* On the top of the file? */
 8114              		.loc 1 3940 7 view .LVU2789
 8115 0124 08D1     		bne	.L594
3941:DRIVER/FatFs/source/ff.c **** 					clst = fp->obj.sclust;		/* Follow cluster chain from the origin */
 8116              		.loc 1 3941 5 is_stmt 1 view .LVU2790
3941:DRIVER/FatFs/source/ff.c **** 					clst = fp->obj.sclust;		/* Follow cluster chain from the origin */
 8117              		.loc 1 3941 8 is_stmt 0 view .LVU2791
 8118 0126 002A     		cmp	r2, #0
 8119 0128 8CD1     		bne	.L595
3942:DRIVER/FatFs/source/ff.c **** 				} else {						/* Middle or end of the file */
 8120              		.loc 1 3942 6 is_stmt 1 view .LVU2792
3942:DRIVER/FatFs/source/ff.c **** 				} else {						/* Middle or end of the file */
 8121              		.loc 1 3942 11 is_stmt 0 view .LVU2793
 8122 012a A068     		ldr	r0, [r4, #8]
 8123              	.LVL982:
 8124              	.L596:
3953:DRIVER/FatFs/source/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 8125              		.loc 1 3953 5 is_stmt 1 view .LVU2794
3953:DRIVER/FatFs/source/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 8126              		.loc 1 3953 8 is_stmt 0 view .LVU2795
 8127 012c 0128     		cmp	r0, #1
 8128 012e 8ED9     		bls	.L618
3953:DRIVER/FatFs/source/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 8129              		.loc 1 3953 40 is_stmt 1 discriminator 2 view .LVU2796
3954:DRIVER/FatFs/source/ff.c **** 				fp->clust = clst;				/* Update current cluster */
 8130              		.loc 1 3954 5 discriminator 2 view .LVU2797
3954:DRIVER/FatFs/source/ff.c **** 				fp->clust = clst;				/* Update current cluster */
 8131              		.loc 1 3954 8 is_stmt 0 discriminator 2 view .LVU2798
 8132 0130 B0F1FF3F 		cmp	r0, #-1
 8133 0134 92D0     		beq	.L619
3954:DRIVER/FatFs/source/ff.c **** 				fp->clust = clst;				/* Update current cluster */
 8134              		.loc 1 3954 51 is_stmt 1 discriminator 2 view .LVU2799
3955:DRIVER/FatFs/source/ff.c **** 			}
 8135              		.loc 1 3955 5 discriminator 2 view .LVU2800
3955:DRIVER/FatFs/source/ff.c **** 			}
 8136              		.loc 1 3955 15 is_stmt 0 discriminator 2 view .LVU2801
 8137 0136 A061     		str	r0, [r4, #24]
 8138              	.LVL983:
 8139              	.L594:
3957:DRIVER/FatFs/source/ff.c **** 			if (sect == 0) ABORT(fs, FR_INT_ERR);
 8140              		.loc 1 3957 4 is_stmt 1 view .LVU2802
3957:DRIVER/FatFs/source/ff.c **** 			if (sect == 0) ABORT(fs, FR_INT_ERR);
 8141              		.loc 1 3957 11 is_stmt 0 view .LVU2803
 8142 0138 DDF80CB0 		ldr	fp, [sp, #12]
 8143 013c A169     		ldr	r1, [r4, #24]
 8144 013e 5846     		mov	r0, fp
 8145 0140 FFF7FEFF 		bl	clst2sect
 8146              	.LVL984:
3958:DRIVER/FatFs/source/ff.c **** 			sect += csect;
 8147              		.loc 1 3958 4 is_stmt 1 view .LVU2804
3958:DRIVER/FatFs/source/ff.c **** 			sect += csect;
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 288


 8148              		.loc 1 3958 7 is_stmt 0 view .LVU2805
 8149 0144 8146     		mov	r9, r0
 8150 0146 0028     		cmp	r0, #0
 8151 0148 8FD0     		beq	.L620
3958:DRIVER/FatFs/source/ff.c **** 			sect += csect;
 8152              		.loc 1 3958 40 is_stmt 1 discriminator 2 view .LVU2806
3959:DRIVER/FatFs/source/ff.c **** 			cc = btr / SS(fs);					/* When remaining bytes >= sector size, */
 8153              		.loc 1 3959 4 discriminator 2 view .LVU2807
3959:DRIVER/FatFs/source/ff.c **** 			cc = btr / SS(fs);					/* When remaining bytes >= sector size, */
 8154              		.loc 1 3959 9 is_stmt 0 discriminator 2 view .LVU2808
 8155 014a A944     		add	r9, r9, r5
 8156              	.LVL985:
3960:DRIVER/FatFs/source/ff.c **** 			if (cc > 0) {						/* Read maximum contiguous sectors directly */
 8157              		.loc 1 3960 4 is_stmt 1 discriminator 2 view .LVU2809
3960:DRIVER/FatFs/source/ff.c **** 			if (cc > 0) {						/* Read maximum contiguous sectors directly */
 8158              		.loc 1 3960 15 is_stmt 0 discriminator 2 view .LVU2810
 8159 014c BBF80C30 		ldrh	r3, [fp, #12]
3960:DRIVER/FatFs/source/ff.c **** 			if (cc > 0) {						/* Read maximum contiguous sectors directly */
 8160              		.loc 1 3960 7 discriminator 2 view .LVU2811
 8161 0150 B6FBF3FA 		udiv	r10, r6, r3
 8162              	.LVL986:
3961:DRIVER/FatFs/source/ff.c **** 				if (csect + cc > fs->csize) {	/* Clip at cluster boundary */
 8163              		.loc 1 3961 4 is_stmt 1 discriminator 2 view .LVU2812
3961:DRIVER/FatFs/source/ff.c **** 				if (csect + cc > fs->csize) {	/* Clip at cluster boundary */
 8164              		.loc 1 3961 7 is_stmt 0 discriminator 2 view .LVU2813
 8165 0154 B342     		cmp	r3, r6
 8166 0156 A6D8     		bhi	.L600
3962:DRIVER/FatFs/source/ff.c **** 					cc = fs->csize - csect;
 8167              		.loc 1 3962 5 is_stmt 1 view .LVU2814
3962:DRIVER/FatFs/source/ff.c **** 					cc = fs->csize - csect;
 8168              		.loc 1 3962 15 is_stmt 0 view .LVU2815
 8169 0158 05EB0A03 		add	r3, r5, r10
3962:DRIVER/FatFs/source/ff.c **** 					cc = fs->csize - csect;
 8170              		.loc 1 3962 24 view .LVU2816
 8171 015c BBF80A20 		ldrh	r2, [fp, #10]
3962:DRIVER/FatFs/source/ff.c **** 					cc = fs->csize - csect;
 8172              		.loc 1 3962 8 view .LVU2817
 8173 0160 9342     		cmp	r3, r2
 8174 0162 01D9     		bls	.L601
3963:DRIVER/FatFs/source/ff.c **** 				}
 8175              		.loc 1 3963 6 is_stmt 1 view .LVU2818
3963:DRIVER/FatFs/source/ff.c **** 				}
 8176              		.loc 1 3963 9 is_stmt 0 view .LVU2819
 8177 0164 A2EB050A 		sub	r10, r2, r5
 8178              	.LVL987:
 8179              	.L601:
3965:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY && FF_FS_MINIMIZE <= 2		/* Replace one of the read sectors with cached data if 
 8180              		.loc 1 3965 5 is_stmt 1 view .LVU2820
3965:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY && FF_FS_MINIMIZE <= 2		/* Replace one of the read sectors with cached data if 
 8181              		.loc 1 3965 9 is_stmt 0 view .LVU2821
 8182 0168 5346     		mov	r3, r10
 8183 016a 4A46     		mov	r2, r9
 8184 016c 3946     		mov	r1, r7
 8185 016e 9BF80100 		ldrb	r0, [fp, #1]	@ zero_extendqisi2
 8186 0172 FFF7FEFF 		bl	disk_read
 8187              	.LVL988:
3965:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY && FF_FS_MINIMIZE <= 2		/* Replace one of the read sectors with cached data if 
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 289


 8188              		.loc 1 3965 8 view .LVU2822
 8189 0176 0028     		cmp	r0, #0
 8190 0178 3FF47EAF 		beq	.L602
3965:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY && FF_FS_MINIMIZE <= 2		/* Replace one of the read sectors with cached data if 
 8191              		.loc 1 3965 57 is_stmt 1 discriminator 1 view .LVU2823
 8192 017c 4FF0010A 		mov	r10, #1
 8193              	.LVL989:
3965:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY && FF_FS_MINIMIZE <= 2		/* Replace one of the read sectors with cached data if 
 8194              		.loc 1 3965 57 is_stmt 0 discriminator 1 view .LVU2824
 8195 0180 84F811A0 		strb	r10, [r4, #17]
3965:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY && FF_FS_MINIMIZE <= 2		/* Replace one of the read sectors with cached data if 
 8196              		.loc 1 3965 57 is_stmt 1 discriminator 1 view .LVU2825
 8197 0184 CDF804A0 		str	r10, [sp, #4]
 8198              	.LVL990:
 8199              	.L590:
4004:DRIVER/FatFs/source/ff.c **** 
 8200              		.loc 1 4004 1 is_stmt 0 view .LVU2826
 8201 0188 0198     		ldr	r0, [sp, #4]
 8202 018a 05B0     		add	sp, sp, #20
 8203              	.LCFI59:
 8204              		.cfi_remember_state
 8205              		.cfi_def_cfa_offset 36
 8206              		@ sp needed
 8207 018c BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 8208              	.LVL991:
 8209              	.L616:
 8210              	.LCFI60:
 8211              		.cfi_restore_state
3984:DRIVER/FatFs/source/ff.c **** 					fp->flag &= (BYTE)~FA_DIRTY;
 8212              		.loc 1 3984 6 is_stmt 1 view .LVU2827
3984:DRIVER/FatFs/source/ff.c **** 					fp->flag &= (BYTE)~FA_DIRTY;
 8213              		.loc 1 3984 10 is_stmt 0 view .LVU2828
 8214 0190 0123     		movs	r3, #1
 8215 0192 04F12801 		add	r1, r4, #40
 8216 0196 9BF80100 		ldrb	r0, [fp, #1]	@ zero_extendqisi2
 8217 019a FFF7FEFF 		bl	disk_write
 8218              	.LVL992:
3984:DRIVER/FatFs/source/ff.c **** 					fp->flag &= (BYTE)~FA_DIRTY;
 8219              		.loc 1 3984 9 view .LVU2829
 8220 019e 20B9     		cbnz	r0, .L621
3984:DRIVER/FatFs/source/ff.c **** 					fp->flag &= (BYTE)~FA_DIRTY;
 8221              		.loc 1 3984 86 is_stmt 1 discriminator 2 view .LVU2830
3985:DRIVER/FatFs/source/ff.c **** 				}
 8222              		.loc 1 3985 6 discriminator 2 view .LVU2831
3985:DRIVER/FatFs/source/ff.c **** 				}
 8223              		.loc 1 3985 8 is_stmt 0 discriminator 2 view .LVU2832
 8224 01a0 237C     		ldrb	r3, [r4, #16]	@ zero_extendqisi2
3985:DRIVER/FatFs/source/ff.c **** 				}
 8225              		.loc 1 3985 15 discriminator 2 view .LVU2833
 8226 01a2 03F07F03 		and	r3, r3, #127
 8227 01a6 2374     		strb	r3, [r4, #16]
 8228 01a8 84E7     		b	.L606
 8229              	.L621:
3984:DRIVER/FatFs/source/ff.c **** 					fp->flag &= (BYTE)~FA_DIRTY;
 8230              		.loc 1 3984 64 is_stmt 1 discriminator 1 view .LVU2834
 8231 01aa 4FF0010A 		mov	r10, #1
 8232              	.LVL993:
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 290


3984:DRIVER/FatFs/source/ff.c **** 					fp->flag &= (BYTE)~FA_DIRTY;
 8233              		.loc 1 3984 64 is_stmt 0 discriminator 1 view .LVU2835
 8234 01ae 84F811A0 		strb	r10, [r4, #17]
3984:DRIVER/FatFs/source/ff.c **** 					fp->flag &= (BYTE)~FA_DIRTY;
 8235              		.loc 1 3984 64 is_stmt 1 discriminator 1 view .LVU2836
 8236 01b2 CDF804A0 		str	r10, [sp, #4]
 8237              	.LVL994:
3984:DRIVER/FatFs/source/ff.c **** 					fp->flag &= (BYTE)~FA_DIRTY;
 8238              		.loc 1 3984 64 is_stmt 0 discriminator 1 view .LVU2837
 8239 01b6 E7E7     		b	.L590
 8240              	.LVL995:
 8241              	.L617:
3988:DRIVER/FatFs/source/ff.c **** 			}
 8242              		.loc 1 3988 58 is_stmt 1 discriminator 1 view .LVU2838
 8243 01b8 4FF0010A 		mov	r10, #1
 8244              	.LVL996:
3988:DRIVER/FatFs/source/ff.c **** 			}
 8245              		.loc 1 3988 58 is_stmt 0 discriminator 1 view .LVU2839
 8246 01bc 84F811A0 		strb	r10, [r4, #17]
3988:DRIVER/FatFs/source/ff.c **** 			}
 8247              		.loc 1 3988 58 is_stmt 1 discriminator 1 view .LVU2840
 8248 01c0 CDF804A0 		str	r10, [sp, #4]
 8249              	.LVL997:
3988:DRIVER/FatFs/source/ff.c **** 			}
 8250              		.loc 1 3988 58 is_stmt 0 discriminator 1 view .LVU2841
 8251 01c4 E0E7     		b	.L590
 8252              	.LVL998:
 8253              	.L611:
3933:DRIVER/FatFs/source/ff.c **** 	remain = fp->obj.objsize - fp->fptr;
 8254              		.loc 1 3933 29 view .LVU2842
 8255 01c6 0723     		movs	r3, #7
 8256 01c8 0193     		str	r3, [sp, #4]
 8257              	.LVL999:
3933:DRIVER/FatFs/source/ff.c **** 	remain = fp->obj.objsize - fp->fptr;
 8258              		.loc 1 3933 29 view .LVU2843
 8259 01ca DDE7     		b	.L590
 8260              		.cfi_endproc
 8261              	.LFE41:
 8263              		.section	.text.f_write,"ax",%progbits
 8264              		.align	1
 8265              		.global	f_write
 8266              		.syntax unified
 8267              		.thumb
 8268              		.thumb_func
 8270              	f_write:
 8271              	.LVL1000:
 8272              	.LFB42:
4020:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
 8273              		.loc 1 4020 1 is_stmt 1 view -0
 8274              		.cfi_startproc
 8275              		@ args = 0, pretend = 0, frame = 16
 8276              		@ frame_needed = 0, uses_anonymous_args = 0
4020:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
 8277              		.loc 1 4020 1 is_stmt 0 view .LVU2845
 8278 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 8279              	.LCFI61:
 8280              		.cfi_def_cfa_offset 36
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 291


 8281              		.cfi_offset 4, -36
 8282              		.cfi_offset 5, -32
 8283              		.cfi_offset 6, -28
 8284              		.cfi_offset 7, -24
 8285              		.cfi_offset 8, -20
 8286              		.cfi_offset 9, -16
 8287              		.cfi_offset 10, -12
 8288              		.cfi_offset 11, -8
 8289              		.cfi_offset 14, -4
 8290 0004 85B0     		sub	sp, sp, #20
 8291              	.LCFI62:
 8292              		.cfi_def_cfa_offset 56
 8293 0006 0446     		mov	r4, r0
 8294 0008 0F46     		mov	r7, r1
 8295 000a 1546     		mov	r5, r2
 8296 000c 9846     		mov	r8, r3
4021:DRIVER/FatFs/source/ff.c **** 	FATFS *fs;
 8297              		.loc 1 4021 2 is_stmt 1 view .LVU2846
4022:DRIVER/FatFs/source/ff.c **** 	DWORD clst;
 8298              		.loc 1 4022 2 view .LVU2847
4023:DRIVER/FatFs/source/ff.c **** 	LBA_t sect;
 8299              		.loc 1 4023 2 view .LVU2848
4024:DRIVER/FatFs/source/ff.c **** 	UINT wcnt, cc, csect;
 8300              		.loc 1 4024 2 view .LVU2849
4025:DRIVER/FatFs/source/ff.c **** 	const BYTE *wbuff = (const BYTE*)buff;
 8301              		.loc 1 4025 2 view .LVU2850
4026:DRIVER/FatFs/source/ff.c **** 
 8302              		.loc 1 4026 2 view .LVU2851
 8303              	.LVL1001:
4029:DRIVER/FatFs/source/ff.c **** 	res = validate(&fp->obj, &fs);			/* Check validity of the file object */
 8304              		.loc 1 4029 2 view .LVU2852
4029:DRIVER/FatFs/source/ff.c **** 	res = validate(&fp->obj, &fs);			/* Check validity of the file object */
 8305              		.loc 1 4029 6 is_stmt 0 view .LVU2853
 8306 000e 0023     		movs	r3, #0
 8307              	.LVL1002:
4029:DRIVER/FatFs/source/ff.c **** 	res = validate(&fp->obj, &fs);			/* Check validity of the file object */
 8308              		.loc 1 4029 6 view .LVU2854
 8309 0010 C8F80030 		str	r3, [r8]
4030:DRIVER/FatFs/source/ff.c **** 	if (res != FR_OK || (res = (FRESULT)fp->err) != FR_OK) LEAVE_FF(fs, res);	/* Check validity */
 8310              		.loc 1 4030 2 is_stmt 1 view .LVU2855
4030:DRIVER/FatFs/source/ff.c **** 	if (res != FR_OK || (res = (FRESULT)fp->err) != FR_OK) LEAVE_FF(fs, res);	/* Check validity */
 8311              		.loc 1 4030 8 is_stmt 0 view .LVU2856
 8312 0014 03A9     		add	r1, sp, #12
 8313              	.LVL1003:
4030:DRIVER/FatFs/source/ff.c **** 	if (res != FR_OK || (res = (FRESULT)fp->err) != FR_OK) LEAVE_FF(fs, res);	/* Check validity */
 8314              		.loc 1 4030 8 view .LVU2857
 8315 0016 FFF7FEFF 		bl	validate
 8316              	.LVL1004:
4031:DRIVER/FatFs/source/ff.c **** 	if (!(fp->flag & FA_WRITE)) LEAVE_FF(fs, FR_DENIED);	/* Check access mode */
 8317              		.loc 1 4031 2 is_stmt 1 view .LVU2858
4031:DRIVER/FatFs/source/ff.c **** 	if (!(fp->flag & FA_WRITE)) LEAVE_FF(fs, FR_DENIED);	/* Check access mode */
 8318              		.loc 1 4031 5 is_stmt 0 view .LVU2859
 8319 001a 0190     		str	r0, [sp, #4]
 8320 001c 0028     		cmp	r0, #0
 8321 001e 48D1     		bne	.L625
4031:DRIVER/FatFs/source/ff.c **** 	if (!(fp->flag & FA_WRITE)) LEAVE_FF(fs, FR_DENIED);	/* Check access mode */
 8322              		.loc 1 4031 27 discriminator 2 view .LVU2860
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 292


 8323 0020 637C     		ldrb	r3, [r4, #17]	@ zero_extendqisi2
 8324 0022 0193     		str	r3, [sp, #4]
 8325              	.LVL1005:
4031:DRIVER/FatFs/source/ff.c **** 	if (!(fp->flag & FA_WRITE)) LEAVE_FF(fs, FR_DENIED);	/* Check access mode */
 8326              		.loc 1 4031 19 discriminator 2 view .LVU2861
 8327 0024 002B     		cmp	r3, #0
 8328 0026 44D1     		bne	.L625
4032:DRIVER/FatFs/source/ff.c **** 
 8329              		.loc 1 4032 2 is_stmt 1 view .LVU2862
4032:DRIVER/FatFs/source/ff.c **** 
 8330              		.loc 1 4032 10 is_stmt 0 view .LVU2863
 8331 0028 237C     		ldrb	r3, [r4, #16]	@ zero_extendqisi2
 8332              	.LVL1006:
4032:DRIVER/FatFs/source/ff.c **** 
 8333              		.loc 1 4032 5 view .LVU2864
 8334 002a 13F0020F 		tst	r3, #2
 8335 002e 00F0E680 		beq	.L647
4035:DRIVER/FatFs/source/ff.c **** 		btw = (UINT)(0xFFFFFFFF - (DWORD)fp->fptr);
 8336              		.loc 1 4035 2 is_stmt 1 view .LVU2865
4035:DRIVER/FatFs/source/ff.c **** 		btw = (UINT)(0xFFFFFFFF - (DWORD)fp->fptr);
 8337              		.loc 1 4035 61 is_stmt 0 view .LVU2866
 8338 0032 6369     		ldr	r3, [r4, #20]
4035:DRIVER/FatFs/source/ff.c **** 		btw = (UINT)(0xFFFFFFFF - (DWORD)fp->fptr);
 8339              		.loc 1 4035 5 view .LVU2867
 8340 0034 EB42     		cmn	r3, r5
 8341 0036 C0F0AF80 		bcc	.L645
4036:DRIVER/FatFs/source/ff.c **** 	}
 8342              		.loc 1 4036 3 is_stmt 1 view .LVU2868
4036:DRIVER/FatFs/source/ff.c **** 	}
 8343              		.loc 1 4036 7 is_stmt 0 view .LVU2869
 8344 003a DD43     		mvns	r5, r3
 8345              	.LVL1007:
4036:DRIVER/FatFs/source/ff.c **** 	}
 8346              		.loc 1 4036 7 view .LVU2870
 8347 003c ACE0     		b	.L645
 8348              	.LVL1008:
 8349              	.L629:
4055:DRIVER/FatFs/source/ff.c **** 					}
 8350              		.loc 1 4055 7 is_stmt 1 view .LVU2871
4055:DRIVER/FatFs/source/ff.c **** 					}
 8351              		.loc 1 4055 14 is_stmt 0 view .LVU2872
 8352 003e A169     		ldr	r1, [r4, #24]
 8353 0040 2046     		mov	r0, r4
 8354 0042 FFF7FEFF 		bl	create_chain
 8355              	.LVL1009:
 8356              	.L631:
4058:DRIVER/FatFs/source/ff.c **** 				if (clst == 1) ABORT(fs, FR_INT_ERR);
 8357              		.loc 1 4058 5 is_stmt 1 view .LVU2873
4058:DRIVER/FatFs/source/ff.c **** 				if (clst == 1) ABORT(fs, FR_INT_ERR);
 8358              		.loc 1 4058 8 is_stmt 0 view .LVU2874
 8359 0046 0028     		cmp	r0, #0
 8360 0048 00F0D480 		beq	.L632
 8361              	.L630:
 8362              	.LVL1010:
4059:DRIVER/FatFs/source/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 8363              		.loc 1 4059 5 is_stmt 1 view .LVU2875
4059:DRIVER/FatFs/source/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 293


 8364              		.loc 1 4059 8 is_stmt 0 view .LVU2876
 8365 004c 0128     		cmp	r0, #1
 8366 004e 34D0     		beq	.L650
4059:DRIVER/FatFs/source/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 8367              		.loc 1 4059 41 is_stmt 1 discriminator 2 view .LVU2877
4060:DRIVER/FatFs/source/ff.c **** 				fp->clust = clst;			/* Update current cluster */
 8368              		.loc 1 4060 5 discriminator 2 view .LVU2878
4060:DRIVER/FatFs/source/ff.c **** 				fp->clust = clst;			/* Update current cluster */
 8369              		.loc 1 4060 8 is_stmt 0 discriminator 2 view .LVU2879
 8370 0050 B0F1FF3F 		cmp	r0, #-1
 8371 0054 38D0     		beq	.L651
4060:DRIVER/FatFs/source/ff.c **** 				fp->clust = clst;			/* Update current cluster */
 8372              		.loc 1 4060 51 is_stmt 1 discriminator 2 view .LVU2880
4061:DRIVER/FatFs/source/ff.c **** 				if (fp->obj.sclust == 0) fp->obj.sclust = clst;	/* Set start cluster if the first write */
 8373              		.loc 1 4061 5 discriminator 2 view .LVU2881
4061:DRIVER/FatFs/source/ff.c **** 				if (fp->obj.sclust == 0) fp->obj.sclust = clst;	/* Set start cluster if the first write */
 8374              		.loc 1 4061 15 is_stmt 0 discriminator 2 view .LVU2882
 8375 0056 A061     		str	r0, [r4, #24]
4062:DRIVER/FatFs/source/ff.c **** 			}
 8376              		.loc 1 4062 5 is_stmt 1 discriminator 2 view .LVU2883
4062:DRIVER/FatFs/source/ff.c **** 			}
 8377              		.loc 1 4062 16 is_stmt 0 discriminator 2 view .LVU2884
 8378 0058 A368     		ldr	r3, [r4, #8]
4062:DRIVER/FatFs/source/ff.c **** 			}
 8379              		.loc 1 4062 8 discriminator 2 view .LVU2885
 8380 005a 03B9     		cbnz	r3, .L628
4062:DRIVER/FatFs/source/ff.c **** 			}
 8381              		.loc 1 4062 30 is_stmt 1 discriminator 1 view .LVU2886
4062:DRIVER/FatFs/source/ff.c **** 			}
 8382              		.loc 1 4062 45 is_stmt 0 discriminator 1 view .LVU2887
 8383 005c A060     		str	r0, [r4, #8]
 8384              	.L628:
4067:DRIVER/FatFs/source/ff.c **** 				if (disk_write(fs->pdrv, fp->buf, fp->sect, 1) != RES_OK) ABORT(fs, FR_DISK_ERR);
 8385              		.loc 1 4067 4 is_stmt 1 view .LVU2888
4067:DRIVER/FatFs/source/ff.c **** 				if (disk_write(fs->pdrv, fp->buf, fp->sect, 1) != RES_OK) ABORT(fs, FR_DISK_ERR);
 8386              		.loc 1 4067 8 is_stmt 0 view .LVU2889
 8387 005e 94F91030 		ldrsb	r3, [r4, #16]
4067:DRIVER/FatFs/source/ff.c **** 				if (disk_write(fs->pdrv, fp->buf, fp->sect, 1) != RES_OK) ABORT(fs, FR_DISK_ERR);
 8388              		.loc 1 4067 7 view .LVU2890
 8389 0062 002B     		cmp	r3, #0
 8390 0064 37DB     		blt	.L652
 8391              	.L635:
4072:DRIVER/FatFs/source/ff.c **** 			if (sect == 0) ABORT(fs, FR_INT_ERR);
 8392              		.loc 1 4072 4 is_stmt 1 view .LVU2891
4072:DRIVER/FatFs/source/ff.c **** 			if (sect == 0) ABORT(fs, FR_INT_ERR);
 8393              		.loc 1 4072 11 is_stmt 0 view .LVU2892
 8394 0066 DDF80CB0 		ldr	fp, [sp, #12]
 8395 006a A169     		ldr	r1, [r4, #24]
 8396 006c 5846     		mov	r0, fp
 8397 006e FFF7FEFF 		bl	clst2sect
 8398              	.LVL1011:
4073:DRIVER/FatFs/source/ff.c **** 			sect += csect;
 8399              		.loc 1 4073 4 is_stmt 1 view .LVU2893
4073:DRIVER/FatFs/source/ff.c **** 			sect += csect;
 8400              		.loc 1 4073 7 is_stmt 0 view .LVU2894
 8401 0072 8146     		mov	r9, r0
 8402 0074 0028     		cmp	r0, #0
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 294


 8403 0076 43D0     		beq	.L653
4073:DRIVER/FatFs/source/ff.c **** 			sect += csect;
 8404              		.loc 1 4073 40 is_stmt 1 discriminator 2 view .LVU2895
4074:DRIVER/FatFs/source/ff.c **** 			cc = btw / SS(fs);				/* When remaining bytes >= sector size, */
 8405              		.loc 1 4074 4 discriminator 2 view .LVU2896
4074:DRIVER/FatFs/source/ff.c **** 			cc = btw / SS(fs);				/* When remaining bytes >= sector size, */
 8406              		.loc 1 4074 9 is_stmt 0 discriminator 2 view .LVU2897
 8407 0078 B144     		add	r9, r9, r6
 8408              	.LVL1012:
4075:DRIVER/FatFs/source/ff.c **** 			if (cc > 0) {					/* Write maximum contiguous sectors directly */
 8409              		.loc 1 4075 4 is_stmt 1 discriminator 2 view .LVU2898
4075:DRIVER/FatFs/source/ff.c **** 			if (cc > 0) {					/* Write maximum contiguous sectors directly */
 8410              		.loc 1 4075 15 is_stmt 0 discriminator 2 view .LVU2899
 8411 007a BBF80C30 		ldrh	r3, [fp, #12]
4075:DRIVER/FatFs/source/ff.c **** 			if (cc > 0) {					/* Write maximum contiguous sectors directly */
 8412              		.loc 1 4075 7 discriminator 2 view .LVU2900
 8413 007e B5FBF3FA 		udiv	r10, r5, r3
 8414              	.LVL1013:
4076:DRIVER/FatFs/source/ff.c **** 				if (csect + cc > fs->csize) {	/* Clip at cluster boundary */
 8415              		.loc 1 4076 4 is_stmt 1 discriminator 2 view .LVU2901
4076:DRIVER/FatFs/source/ff.c **** 				if (csect + cc > fs->csize) {	/* Clip at cluster boundary */
 8416              		.loc 1 4076 7 is_stmt 0 discriminator 2 view .LVU2902
 8417 0082 AB42     		cmp	r3, r5
 8418 0084 5AD8     		bhi	.L638
4077:DRIVER/FatFs/source/ff.c **** 					cc = fs->csize - csect;
 8419              		.loc 1 4077 5 is_stmt 1 view .LVU2903
4077:DRIVER/FatFs/source/ff.c **** 					cc = fs->csize - csect;
 8420              		.loc 1 4077 15 is_stmt 0 view .LVU2904
 8421 0086 06EB0A03 		add	r3, r6, r10
4077:DRIVER/FatFs/source/ff.c **** 					cc = fs->csize - csect;
 8422              		.loc 1 4077 24 view .LVU2905
 8423 008a BBF80A20 		ldrh	r2, [fp, #10]
4077:DRIVER/FatFs/source/ff.c **** 					cc = fs->csize - csect;
 8424              		.loc 1 4077 8 view .LVU2906
 8425 008e 9342     		cmp	r3, r2
 8426 0090 01D9     		bls	.L639
4078:DRIVER/FatFs/source/ff.c **** 				}
 8427              		.loc 1 4078 6 is_stmt 1 view .LVU2907
4078:DRIVER/FatFs/source/ff.c **** 				}
 8428              		.loc 1 4078 9 is_stmt 0 view .LVU2908
 8429 0092 A2EB060A 		sub	r10, r2, r6
 8430              	.LVL1014:
 8431              	.L639:
4080:DRIVER/FatFs/source/ff.c **** #if FF_FS_MINIMIZE <= 2
 8432              		.loc 1 4080 5 is_stmt 1 view .LVU2909
4080:DRIVER/FatFs/source/ff.c **** #if FF_FS_MINIMIZE <= 2
 8433              		.loc 1 4080 9 is_stmt 0 view .LVU2910
 8434 0096 5346     		mov	r3, r10
 8435 0098 4A46     		mov	r2, r9
 8436 009a 3946     		mov	r1, r7
 8437 009c 9BF80100 		ldrb	r0, [fp, #1]	@ zero_extendqisi2
 8438 00a0 FFF7FEFF 		bl	disk_write
 8439              	.LVL1015:
4080:DRIVER/FatFs/source/ff.c **** #if FF_FS_MINIMIZE <= 2
 8440              		.loc 1 4080 8 view .LVU2911
 8441 00a4 98B3     		cbz	r0, .L640
4080:DRIVER/FatFs/source/ff.c **** #if FF_FS_MINIMIZE <= 2
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 295


 8442              		.loc 1 4080 58 is_stmt 1 discriminator 1 view .LVU2912
 8443 00a6 4FF0010A 		mov	r10, #1
 8444              	.LVL1016:
4080:DRIVER/FatFs/source/ff.c **** #if FF_FS_MINIMIZE <= 2
 8445              		.loc 1 4080 58 is_stmt 0 discriminator 1 view .LVU2913
 8446 00aa 84F811A0 		strb	r10, [r4, #17]
4080:DRIVER/FatFs/source/ff.c **** #if FF_FS_MINIMIZE <= 2
 8447              		.loc 1 4080 58 is_stmt 1 discriminator 1 view .LVU2914
 8448 00ae CDF804A0 		str	r10, [sp, #4]
 8449              	.LVL1017:
 8450              	.L625:
4126:DRIVER/FatFs/source/ff.c **** 
 8451              		.loc 1 4126 1 is_stmt 0 view .LVU2915
 8452 00b2 0198     		ldr	r0, [sp, #4]
 8453 00b4 05B0     		add	sp, sp, #20
 8454              	.LCFI63:
 8455              		.cfi_remember_state
 8456              		.cfi_def_cfa_offset 36
 8457              		@ sp needed
 8458 00b6 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 8459              	.LVL1018:
 8460              	.L650:
 8461              	.LCFI64:
 8462              		.cfi_restore_state
4059:DRIVER/FatFs/source/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 8463              		.loc 1 4059 20 is_stmt 1 discriminator 1 view .LVU2916
 8464 00ba 4FF0020A 		mov	r10, #2
 8465 00be 84F811A0 		strb	r10, [r4, #17]
4059:DRIVER/FatFs/source/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 8466              		.loc 1 4059 20 discriminator 1 view .LVU2917
 8467 00c2 CDF804A0 		str	r10, [sp, #4]
 8468              	.LVL1019:
4059:DRIVER/FatFs/source/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 8469              		.loc 1 4059 20 is_stmt 0 discriminator 1 view .LVU2918
 8470 00c6 F4E7     		b	.L625
 8471              	.LVL1020:
 8472              	.L651:
4060:DRIVER/FatFs/source/ff.c **** 				fp->clust = clst;			/* Update current cluster */
 8473              		.loc 1 4060 29 is_stmt 1 discriminator 1 view .LVU2919
 8474 00c8 4FF0010A 		mov	r10, #1
 8475 00cc 84F811A0 		strb	r10, [r4, #17]
4060:DRIVER/FatFs/source/ff.c **** 				fp->clust = clst;			/* Update current cluster */
 8476              		.loc 1 4060 29 discriminator 1 view .LVU2920
 8477 00d0 CDF804A0 		str	r10, [sp, #4]
 8478              	.LVL1021:
4060:DRIVER/FatFs/source/ff.c **** 				fp->clust = clst;			/* Update current cluster */
 8479              		.loc 1 4060 29 is_stmt 0 discriminator 1 view .LVU2921
 8480 00d4 EDE7     		b	.L625
 8481              	.LVL1022:
 8482              	.L652:
4068:DRIVER/FatFs/source/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
 8483              		.loc 1 4068 5 is_stmt 1 view .LVU2922
4068:DRIVER/FatFs/source/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
 8484              		.loc 1 4068 9 is_stmt 0 view .LVU2923
 8485 00d6 0123     		movs	r3, #1
 8486 00d8 E269     		ldr	r2, [r4, #28]
 8487 00da 04F12801 		add	r1, r4, #40
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 296


 8488 00de 0398     		ldr	r0, [sp, #12]
 8489 00e0 4078     		ldrb	r0, [r0, #1]	@ zero_extendqisi2
 8490 00e2 FFF7FEFF 		bl	disk_write
 8491              	.LVL1023:
4068:DRIVER/FatFs/source/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
 8492              		.loc 1 4068 8 view .LVU2924
 8493 00e6 20B9     		cbnz	r0, .L654
4068:DRIVER/FatFs/source/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
 8494              		.loc 1 4068 85 is_stmt 1 discriminator 2 view .LVU2925
4069:DRIVER/FatFs/source/ff.c **** 			}
 8495              		.loc 1 4069 5 discriminator 2 view .LVU2926
4069:DRIVER/FatFs/source/ff.c **** 			}
 8496              		.loc 1 4069 7 is_stmt 0 discriminator 2 view .LVU2927
 8497 00e8 237C     		ldrb	r3, [r4, #16]	@ zero_extendqisi2
4069:DRIVER/FatFs/source/ff.c **** 			}
 8498              		.loc 1 4069 14 discriminator 2 view .LVU2928
 8499 00ea 03F07F03 		and	r3, r3, #127
 8500 00ee 2374     		strb	r3, [r4, #16]
 8501 00f0 B9E7     		b	.L635
 8502              	.L654:
4068:DRIVER/FatFs/source/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
 8503              		.loc 1 4068 63 is_stmt 1 discriminator 1 view .LVU2929
 8504 00f2 4FF0010A 		mov	r10, #1
 8505 00f6 84F811A0 		strb	r10, [r4, #17]
4068:DRIVER/FatFs/source/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
 8506              		.loc 1 4068 63 discriminator 1 view .LVU2930
 8507 00fa CDF804A0 		str	r10, [sp, #4]
 8508              	.LVL1024:
4068:DRIVER/FatFs/source/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
 8509              		.loc 1 4068 63 is_stmt 0 discriminator 1 view .LVU2931
 8510 00fe D8E7     		b	.L625
 8511              	.LVL1025:
 8512              	.L653:
4073:DRIVER/FatFs/source/ff.c **** 			sect += csect;
 8513              		.loc 1 4073 19 is_stmt 1 discriminator 1 view .LVU2932
 8514 0100 4FF0020A 		mov	r10, #2
 8515 0104 84F811A0 		strb	r10, [r4, #17]
4073:DRIVER/FatFs/source/ff.c **** 			sect += csect;
 8516              		.loc 1 4073 19 discriminator 1 view .LVU2933
 8517 0108 CDF804A0 		str	r10, [sp, #4]
 8518              	.LVL1026:
4073:DRIVER/FatFs/source/ff.c **** 			sect += csect;
 8519              		.loc 1 4073 19 is_stmt 0 discriminator 1 view .LVU2934
 8520 010c D1E7     		b	.L625
 8521              	.LVL1027:
 8522              	.L640:
4080:DRIVER/FatFs/source/ff.c **** #if FF_FS_MINIMIZE <= 2
 8523              		.loc 1 4080 80 is_stmt 1 discriminator 2 view .LVU2935
4088:DRIVER/FatFs/source/ff.c **** 					memcpy(fp->buf, wbuff + ((fp->sect - sect) * SS(fs)), SS(fs));
 8524              		.loc 1 4088 5 discriminator 2 view .LVU2936
4088:DRIVER/FatFs/source/ff.c **** 					memcpy(fp->buf, wbuff + ((fp->sect - sect) * SS(fs)), SS(fs));
 8525              		.loc 1 4088 11 is_stmt 0 discriminator 2 view .LVU2937
 8526 010e E369     		ldr	r3, [r4, #28]
4088:DRIVER/FatFs/source/ff.c **** 					memcpy(fp->buf, wbuff + ((fp->sect - sect) * SS(fs)), SS(fs));
 8527              		.loc 1 4088 18 discriminator 2 view .LVU2938
 8528 0110 A3EB0903 		sub	r3, r3, r9
4088:DRIVER/FatFs/source/ff.c **** 					memcpy(fp->buf, wbuff + ((fp->sect - sect) * SS(fs)), SS(fs));
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 297


 8529              		.loc 1 4088 8 discriminator 2 view .LVU2939
 8530 0114 5345     		cmp	r3, r10
 8531 0116 04D3     		bcc	.L655
 8532              	.L641:
4094:DRIVER/FatFs/source/ff.c **** 				continue;
 8533              		.loc 1 4094 5 is_stmt 1 view .LVU2940
4094:DRIVER/FatFs/source/ff.c **** 				continue;
 8534              		.loc 1 4094 12 is_stmt 0 view .LVU2941
 8535 0118 039B     		ldr	r3, [sp, #12]
 8536 011a 9E89     		ldrh	r6, [r3, #12]
 8537              	.LVL1028:
4094:DRIVER/FatFs/source/ff.c **** 				continue;
 8538              		.loc 1 4094 10 view .LVU2942
 8539 011c 0AFB06F6 		mul	r6, r10, r6
 8540              	.LVL1029:
4095:DRIVER/FatFs/source/ff.c **** 			}
 8541              		.loc 1 4095 5 is_stmt 1 view .LVU2943
 8542 0120 2BE0     		b	.L642
 8543              	.LVL1030:
 8544              	.L655:
4089:DRIVER/FatFs/source/ff.c **** 					fp->flag &= (BYTE)~FA_DIRTY;
 8545              		.loc 1 4089 6 view .LVU2944
4089:DRIVER/FatFs/source/ff.c **** 					fp->flag &= (BYTE)~FA_DIRTY;
 8546              		.loc 1 4089 51 is_stmt 0 view .LVU2945
 8547 0122 039A     		ldr	r2, [sp, #12]
 8548 0124 9289     		ldrh	r2, [r2, #12]
4089:DRIVER/FatFs/source/ff.c **** 					fp->flag &= (BYTE)~FA_DIRTY;
 8549              		.loc 1 4089 6 view .LVU2946
 8550 0126 02FB0371 		mla	r1, r2, r3, r7
 8551 012a 04F12800 		add	r0, r4, #40
 8552 012e FFF7FEFF 		bl	memcpy
 8553              	.LVL1031:
4090:DRIVER/FatFs/source/ff.c **** 				}
 8554              		.loc 1 4090 6 is_stmt 1 view .LVU2947
4090:DRIVER/FatFs/source/ff.c **** 				}
 8555              		.loc 1 4090 8 is_stmt 0 view .LVU2948
 8556 0132 237C     		ldrb	r3, [r4, #16]	@ zero_extendqisi2
4090:DRIVER/FatFs/source/ff.c **** 				}
 8557              		.loc 1 4090 15 view .LVU2949
 8558 0134 03F07F03 		and	r3, r3, #127
 8559 0138 2374     		strb	r3, [r4, #16]
 8560 013a EDE7     		b	.L641
 8561              	.L638:
4103:DRIVER/FatFs/source/ff.c **** 				fp->fptr < fp->obj.objsize &&
 8562              		.loc 1 4103 4 is_stmt 1 view .LVU2950
4103:DRIVER/FatFs/source/ff.c **** 				fp->fptr < fp->obj.objsize &&
 8563              		.loc 1 4103 10 is_stmt 0 view .LVU2951
 8564 013c E369     		ldr	r3, [r4, #28]
4103:DRIVER/FatFs/source/ff.c **** 				fp->fptr < fp->obj.objsize &&
 8565              		.loc 1 4103 7 view .LVU2952
 8566 013e 4B45     		cmp	r3, r9
 8567 0140 03D0     		beq	.L643
4104:DRIVER/FatFs/source/ff.c **** 				disk_read(fs->pdrv, fp->buf, sect, 1) != RES_OK) {
 8568              		.loc 1 4104 7 discriminator 1 view .LVU2953
 8569 0142 6269     		ldr	r2, [r4, #20]
4104:DRIVER/FatFs/source/ff.c **** 				disk_read(fs->pdrv, fp->buf, sect, 1) != RES_OK) {
 8570              		.loc 1 4104 23 discriminator 1 view .LVU2954
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 298


 8571 0144 E368     		ldr	r3, [r4, #12]
4103:DRIVER/FatFs/source/ff.c **** 				fp->fptr < fp->obj.objsize &&
 8572              		.loc 1 4103 25 discriminator 1 view .LVU2955
 8573 0146 9A42     		cmp	r2, r3
 8574 0148 43D3     		bcc	.L656
 8575              	.L643:
4106:DRIVER/FatFs/source/ff.c **** 			}
 8576              		.loc 1 4106 28 is_stmt 1 view .LVU2956
4109:DRIVER/FatFs/source/ff.c **** 		}
 8577              		.loc 1 4109 4 view .LVU2957
4109:DRIVER/FatFs/source/ff.c **** 		}
 8578              		.loc 1 4109 13 is_stmt 0 view .LVU2958
 8579 014a C4F81C90 		str	r9, [r4, #28]
 8580              	.LVL1032:
 8581              	.L627:
4111:DRIVER/FatFs/source/ff.c **** 		if (wcnt > btw) wcnt = btw;					/* Clip it by btw if needed */
 8582              		.loc 1 4111 3 is_stmt 1 view .LVU2959
4111:DRIVER/FatFs/source/ff.c **** 		if (wcnt > btw) wcnt = btw;					/* Clip it by btw if needed */
 8583              		.loc 1 4111 10 is_stmt 0 view .LVU2960
 8584 014e 039B     		ldr	r3, [sp, #12]
 8585 0150 9E89     		ldrh	r6, [r3, #12]
4111:DRIVER/FatFs/source/ff.c **** 		if (wcnt > btw) wcnt = btw;					/* Clip it by btw if needed */
 8586              		.loc 1 4111 27 view .LVU2961
 8587 0152 6369     		ldr	r3, [r4, #20]
4111:DRIVER/FatFs/source/ff.c **** 		if (wcnt > btw) wcnt = btw;					/* Clip it by btw if needed */
 8588              		.loc 1 4111 34 view .LVU2962
 8589 0154 B3FBF6F2 		udiv	r2, r3, r6
 8590 0158 06FB1233 		mls	r3, r6, r2, r3
4111:DRIVER/FatFs/source/ff.c **** 		if (wcnt > btw) wcnt = btw;					/* Clip it by btw if needed */
 8591              		.loc 1 4111 8 view .LVU2963
 8592 015c F61A     		subs	r6, r6, r3
 8593              	.LVL1033:
4112:DRIVER/FatFs/source/ff.c **** #if FF_FS_TINY
 8594              		.loc 1 4112 3 is_stmt 1 view .LVU2964
4112:DRIVER/FatFs/source/ff.c **** #if FF_FS_TINY
 8595              		.loc 1 4112 6 is_stmt 0 view .LVU2965
 8596 015e B542     		cmp	r5, r6
 8597 0160 00D2     		bcs	.L644
4112:DRIVER/FatFs/source/ff.c **** #if FF_FS_TINY
 8598              		.loc 1 4112 24 view .LVU2966
 8599 0162 2E46     		mov	r6, r5
 8600              	.LVL1034:
 8601              	.L644:
4118:DRIVER/FatFs/source/ff.c **** 		fp->flag |= FA_DIRTY;
 8602              		.loc 1 4118 3 is_stmt 1 view .LVU2967
4118:DRIVER/FatFs/source/ff.c **** 		fp->flag |= FA_DIRTY;
 8603              		.loc 1 4118 10 is_stmt 0 view .LVU2968
 8604 0164 04F12800 		add	r0, r4, #40
4118:DRIVER/FatFs/source/ff.c **** 		fp->flag |= FA_DIRTY;
 8605              		.loc 1 4118 3 view .LVU2969
 8606 0168 3246     		mov	r2, r6
 8607 016a 3946     		mov	r1, r7
 8608 016c 1844     		add	r0, r0, r3
 8609 016e FFF7FEFF 		bl	memcpy
 8610              	.LVL1035:
4119:DRIVER/FatFs/source/ff.c **** #endif
 8611              		.loc 1 4119 3 is_stmt 1 view .LVU2970
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 299


4119:DRIVER/FatFs/source/ff.c **** #endif
 8612              		.loc 1 4119 5 is_stmt 0 view .LVU2971
 8613 0172 237C     		ldrb	r3, [r4, #16]	@ zero_extendqisi2
4119:DRIVER/FatFs/source/ff.c **** #endif
 8614              		.loc 1 4119 12 view .LVU2972
 8615 0174 63F07F03 		orn	r3, r3, #127
 8616 0178 2374     		strb	r3, [r4, #16]
 8617              	.L642:
4039:DRIVER/FatFs/source/ff.c **** 		if (fp->fptr % SS(fs) == 0) {		/* On the sector boundary? */
 8618              		.loc 1 4039 76 is_stmt 1 view .LVU2973
4039:DRIVER/FatFs/source/ff.c **** 		if (fp->fptr % SS(fs) == 0) {		/* On the sector boundary? */
 8619              		.loc 1 4039 23 is_stmt 0 view .LVU2974
 8620 017a AD1B     		subs	r5, r5, r6
 8621              	.LVL1036:
4039:DRIVER/FatFs/source/ff.c **** 		if (fp->fptr % SS(fs) == 0) {		/* On the sector boundary? */
 8622              		.loc 1 4039 32 view .LVU2975
 8623 017c D8F80030 		ldr	r3, [r8]
4039:DRIVER/FatFs/source/ff.c **** 		if (fp->fptr % SS(fs) == 0) {		/* On the sector boundary? */
 8624              		.loc 1 4039 36 view .LVU2976
 8625 0180 3344     		add	r3, r3, r6
 8626 0182 C8F80030 		str	r3, [r8]
4039:DRIVER/FatFs/source/ff.c **** 		if (fp->fptr % SS(fs) == 0) {		/* On the sector boundary? */
 8627              		.loc 1 4039 51 view .LVU2977
 8628 0186 3744     		add	r7, r7, r6
 8629              	.LVL1037:
4039:DRIVER/FatFs/source/ff.c **** 		if (fp->fptr % SS(fs) == 0) {		/* On the sector boundary? */
 8630              		.loc 1 4039 62 view .LVU2978
 8631 0188 6369     		ldr	r3, [r4, #20]
4039:DRIVER/FatFs/source/ff.c **** 		if (fp->fptr % SS(fs) == 0) {		/* On the sector boundary? */
 8632              		.loc 1 4039 69 view .LVU2979
 8633 018a 3344     		add	r3, r3, r6
 8634 018c 6361     		str	r3, [r4, #20]
4039:DRIVER/FatFs/source/ff.c **** 		if (fp->fptr % SS(fs) == 0) {		/* On the sector boundary? */
 8635              		.loc 1 4039 115 view .LVU2980
 8636 018e E268     		ldr	r2, [r4, #12]
4039:DRIVER/FatFs/source/ff.c **** 		if (fp->fptr % SS(fs) == 0) {		/* On the sector boundary? */
 8637              		.loc 1 4039 136 view .LVU2981
 8638 0190 9342     		cmp	r3, r2
 8639 0192 38BF     		it	cc
 8640 0194 1346     		movcc	r3, r2
4039:DRIVER/FatFs/source/ff.c **** 		if (fp->fptr % SS(fs) == 0) {		/* On the sector boundary? */
 8641              		.loc 1 4039 94 view .LVU2982
 8642 0196 E360     		str	r3, [r4, #12]
 8643              	.LVL1038:
 8644              	.L645:
4039:DRIVER/FatFs/source/ff.c **** 		if (fp->fptr % SS(fs) == 0) {		/* On the sector boundary? */
 8645              		.loc 1 4039 14 is_stmt 1 discriminator 1 view .LVU2983
 8646 0198 65B3     		cbz	r5, .L632
4040:DRIVER/FatFs/source/ff.c **** 			csect = (UINT)(fp->fptr / SS(fs)) & (fs->csize - 1);	/* Sector offset in the cluster */
 8647              		.loc 1 4040 3 view .LVU2984
4040:DRIVER/FatFs/source/ff.c **** 			csect = (UINT)(fp->fptr / SS(fs)) & (fs->csize - 1);	/* Sector offset in the cluster */
 8648              		.loc 1 4040 9 is_stmt 0 view .LVU2985
 8649 019a 6269     		ldr	r2, [r4, #20]
4040:DRIVER/FatFs/source/ff.c **** 			csect = (UINT)(fp->fptr / SS(fs)) & (fs->csize - 1);	/* Sector offset in the cluster */
 8650              		.loc 1 4040 18 view .LVU2986
 8651 019c 0399     		ldr	r1, [sp, #12]
 8652 019e 8E89     		ldrh	r6, [r1, #12]
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 300


4040:DRIVER/FatFs/source/ff.c **** 			csect = (UINT)(fp->fptr / SS(fs)) & (fs->csize - 1);	/* Sector offset in the cluster */
 8653              		.loc 1 4040 16 view .LVU2987
 8654 01a0 B2FBF6F3 		udiv	r3, r2, r6
 8655 01a4 06FB1323 		mls	r3, r6, r3, r2
4040:DRIVER/FatFs/source/ff.c **** 			csect = (UINT)(fp->fptr / SS(fs)) & (fs->csize - 1);	/* Sector offset in the cluster */
 8656              		.loc 1 4040 6 view .LVU2988
 8657 01a8 002B     		cmp	r3, #0
 8658 01aa D0D1     		bne	.L627
4041:DRIVER/FatFs/source/ff.c **** 			if (csect == 0) {				/* On the cluster boundary? */
 8659              		.loc 1 4041 4 is_stmt 1 view .LVU2989
4041:DRIVER/FatFs/source/ff.c **** 			if (csect == 0) {				/* On the cluster boundary? */
 8660              		.loc 1 4041 28 is_stmt 0 view .LVU2990
 8661 01ac B2FBF6F6 		udiv	r6, r2, r6
4041:DRIVER/FatFs/source/ff.c **** 			if (csect == 0) {				/* On the cluster boundary? */
 8662              		.loc 1 4041 43 view .LVU2991
 8663 01b0 4B89     		ldrh	r3, [r1, #10]
4041:DRIVER/FatFs/source/ff.c **** 			if (csect == 0) {				/* On the cluster boundary? */
 8664              		.loc 1 4041 51 view .LVU2992
 8665 01b2 013B     		subs	r3, r3, #1
 8666              	.LVL1039:
4042:DRIVER/FatFs/source/ff.c **** 				if (fp->fptr == 0) {		/* On the top of the file? */
 8667              		.loc 1 4042 4 is_stmt 1 view .LVU2993
4042:DRIVER/FatFs/source/ff.c **** 				if (fp->fptr == 0) {		/* On the top of the file? */
 8668              		.loc 1 4042 7 is_stmt 0 view .LVU2994
 8669 01b4 1E40     		ands	r6, r6, r3
 8670              	.LVL1040:
4042:DRIVER/FatFs/source/ff.c **** 				if (fp->fptr == 0) {		/* On the top of the file? */
 8671              		.loc 1 4042 7 view .LVU2995
 8672 01b6 7FF452AF 		bne	.L628
4043:DRIVER/FatFs/source/ff.c **** 					clst = fp->obj.sclust;	/* Follow from the origin */
 8673              		.loc 1 4043 5 is_stmt 1 view .LVU2996
4043:DRIVER/FatFs/source/ff.c **** 					clst = fp->obj.sclust;	/* Follow from the origin */
 8674              		.loc 1 4043 8 is_stmt 0 view .LVU2997
 8675 01ba 002A     		cmp	r2, #0
 8676 01bc 7FF43FAF 		bne	.L629
4044:DRIVER/FatFs/source/ff.c **** 					if (clst == 0) {		/* If no cluster is allocated, */
 8677              		.loc 1 4044 6 is_stmt 1 view .LVU2998
4044:DRIVER/FatFs/source/ff.c **** 					if (clst == 0) {		/* If no cluster is allocated, */
 8678              		.loc 1 4044 11 is_stmt 0 view .LVU2999
 8679 01c0 A068     		ldr	r0, [r4, #8]
 8680              	.LVL1041:
4045:DRIVER/FatFs/source/ff.c **** 						clst = create_chain(&fp->obj, 0);	/* create a new cluster chain */
 8681              		.loc 1 4045 6 is_stmt 1 view .LVU3000
4045:DRIVER/FatFs/source/ff.c **** 						clst = create_chain(&fp->obj, 0);	/* create a new cluster chain */
 8682              		.loc 1 4045 9 is_stmt 0 view .LVU3001
 8683 01c2 0028     		cmp	r0, #0
 8684 01c4 7FF442AF 		bne	.L630
4046:DRIVER/FatFs/source/ff.c **** 					}
 8685              		.loc 1 4046 7 is_stmt 1 view .LVU3002
4046:DRIVER/FatFs/source/ff.c **** 					}
 8686              		.loc 1 4046 14 is_stmt 0 view .LVU3003
 8687 01c8 0021     		movs	r1, #0
 8688 01ca 2046     		mov	r0, r4
 8689              	.LVL1042:
4046:DRIVER/FatFs/source/ff.c **** 					}
 8690              		.loc 1 4046 14 view .LVU3004
 8691 01cc FFF7FEFF 		bl	create_chain
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 301


 8692              	.LVL1043:
4046:DRIVER/FatFs/source/ff.c **** 					}
 8693              		.loc 1 4046 14 view .LVU3005
 8694 01d0 39E7     		b	.L631
 8695              	.LVL1044:
 8696              	.L656:
4105:DRIVER/FatFs/source/ff.c **** 					ABORT(fs, FR_DISK_ERR);
 8697              		.loc 1 4105 5 view .LVU3006
 8698 01d2 0123     		movs	r3, #1
 8699 01d4 4A46     		mov	r2, r9
 8700 01d6 04F12801 		add	r1, r4, #40
 8701 01da 9BF80100 		ldrb	r0, [fp, #1]	@ zero_extendqisi2
 8702 01de FFF7FEFF 		bl	disk_read
 8703              	.LVL1045:
4104:DRIVER/FatFs/source/ff.c **** 				disk_read(fs->pdrv, fp->buf, sect, 1) != RES_OK) {
 8704              		.loc 1 4104 32 view .LVU3007
 8705 01e2 0028     		cmp	r0, #0
 8706 01e4 B1D0     		beq	.L643
4106:DRIVER/FatFs/source/ff.c **** 			}
 8707              		.loc 1 4106 6 is_stmt 1 view .LVU3008
 8708 01e6 4FF0010A 		mov	r10, #1
 8709              	.LVL1046:
4106:DRIVER/FatFs/source/ff.c **** 			}
 8710              		.loc 1 4106 6 is_stmt 0 view .LVU3009
 8711 01ea 84F811A0 		strb	r10, [r4, #17]
4106:DRIVER/FatFs/source/ff.c **** 			}
 8712              		.loc 1 4106 6 is_stmt 1 view .LVU3010
 8713 01ee CDF804A0 		str	r10, [sp, #4]
 8714              	.LVL1047:
4106:DRIVER/FatFs/source/ff.c **** 			}
 8715              		.loc 1 4106 6 is_stmt 0 view .LVU3011
 8716 01f2 5EE7     		b	.L625
 8717              	.LVL1048:
 8718              	.L632:
4123:DRIVER/FatFs/source/ff.c **** 
 8719              		.loc 1 4123 2 is_stmt 1 view .LVU3012
4123:DRIVER/FatFs/source/ff.c **** 
 8720              		.loc 1 4123 4 is_stmt 0 view .LVU3013
 8721 01f4 237C     		ldrb	r3, [r4, #16]	@ zero_extendqisi2
4123:DRIVER/FatFs/source/ff.c **** 
 8722              		.loc 1 4123 11 view .LVU3014
 8723 01f6 43F04003 		orr	r3, r3, #64
 8724 01fa 2374     		strb	r3, [r4, #16]
4125:DRIVER/FatFs/source/ff.c **** }
 8725              		.loc 1 4125 2 is_stmt 1 view .LVU3015
 8726 01fc 59E7     		b	.L625
 8727              	.LVL1049:
 8728              	.L647:
4032:DRIVER/FatFs/source/ff.c **** 
 8729              		.loc 1 4032 30 is_stmt 0 view .LVU3016
 8730 01fe 0723     		movs	r3, #7
 8731 0200 0193     		str	r3, [sp, #4]
 8732              	.LVL1050:
4032:DRIVER/FatFs/source/ff.c **** 
 8733              		.loc 1 4032 30 view .LVU3017
 8734 0202 56E7     		b	.L625
 8735              		.cfi_endproc
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 302


 8736              	.LFE42:
 8738              		.section	.text.f_sync,"ax",%progbits
 8739              		.align	1
 8740              		.global	f_sync
 8741              		.syntax unified
 8742              		.thumb
 8743              		.thumb_func
 8745              	f_sync:
 8746              	.LVL1051:
 8747              	.LFB43:
4138:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
 8748              		.loc 1 4138 1 is_stmt 1 view -0
 8749              		.cfi_startproc
 8750              		@ args = 0, pretend = 0, frame = 8
 8751              		@ frame_needed = 0, uses_anonymous_args = 0
4138:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
 8752              		.loc 1 4138 1 is_stmt 0 view .LVU3019
 8753 0000 70B5     		push	{r4, r5, r6, lr}
 8754              	.LCFI65:
 8755              		.cfi_def_cfa_offset 16
 8756              		.cfi_offset 4, -16
 8757              		.cfi_offset 5, -12
 8758              		.cfi_offset 6, -8
 8759              		.cfi_offset 14, -4
 8760 0002 82B0     		sub	sp, sp, #8
 8761              	.LCFI66:
 8762              		.cfi_def_cfa_offset 24
 8763 0004 0446     		mov	r4, r0
4139:DRIVER/FatFs/source/ff.c **** 	FATFS *fs;
 8764              		.loc 1 4139 2 is_stmt 1 view .LVU3020
4140:DRIVER/FatFs/source/ff.c **** 	DWORD tm;
 8765              		.loc 1 4140 2 view .LVU3021
4141:DRIVER/FatFs/source/ff.c **** 	BYTE *dir;
 8766              		.loc 1 4141 2 view .LVU3022
4142:DRIVER/FatFs/source/ff.c **** 
 8767              		.loc 1 4142 2 view .LVU3023
4145:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
 8768              		.loc 1 4145 2 view .LVU3024
4145:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
 8769              		.loc 1 4145 8 is_stmt 0 view .LVU3025
 8770 0006 01A9     		add	r1, sp, #4
 8771 0008 FFF7FEFF 		bl	validate
 8772              	.LVL1052:
4146:DRIVER/FatFs/source/ff.c **** 		if (fp->flag & FA_MODIFIED) {	/* Is there any change to the file? */
 8773              		.loc 1 4146 2 is_stmt 1 view .LVU3026
4146:DRIVER/FatFs/source/ff.c **** 		if (fp->flag & FA_MODIFIED) {	/* Is there any change to the file? */
 8774              		.loc 1 4146 5 is_stmt 0 view .LVU3027
 8775 000c 70B9     		cbnz	r0, .L658
4147:DRIVER/FatFs/source/ff.c **** #if !FF_FS_TINY
 8776              		.loc 1 4147 3 is_stmt 1 view .LVU3028
4147:DRIVER/FatFs/source/ff.c **** #if !FF_FS_TINY
 8777              		.loc 1 4147 9 is_stmt 0 view .LVU3029
 8778 000e 237C     		ldrb	r3, [r4, #16]	@ zero_extendqisi2
4147:DRIVER/FatFs/source/ff.c **** #if !FF_FS_TINY
 8779              		.loc 1 4147 6 view .LVU3030
 8780 0010 13F0400F 		tst	r3, #64
 8781 0014 0AD0     		beq	.L658
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 303


4149:DRIVER/FatFs/source/ff.c **** 				if (disk_write(fs->pdrv, fp->buf, fp->sect, 1) != RES_OK) LEAVE_FF(fs, FR_DISK_ERR);
 8782              		.loc 1 4149 4 is_stmt 1 view .LVU3031
4149:DRIVER/FatFs/source/ff.c **** 				if (disk_write(fs->pdrv, fp->buf, fp->sect, 1) != RES_OK) LEAVE_FF(fs, FR_DISK_ERR);
 8783              		.loc 1 4149 7 is_stmt 0 view .LVU3032
 8784 0016 13F0800F 		tst	r3, #128
 8785 001a 09D1     		bne	.L662
 8786              	.L659:
4155:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
 8787              		.loc 1 4155 4 is_stmt 1 view .LVU3033
4155:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
 8788              		.loc 1 4155 9 is_stmt 0 view .LVU3034
 8789 001c FFF7FEFF 		bl	get_fattime
 8790              	.LVL1053:
 8791 0020 0546     		mov	r5, r0
 8792              	.LVL1054:
4188:DRIVER/FatFs/source/ff.c **** 				if (res == FR_OK) {
 8793              		.loc 1 4188 5 is_stmt 1 view .LVU3035
4188:DRIVER/FatFs/source/ff.c **** 				if (res == FR_OK) {
 8794              		.loc 1 4188 11 is_stmt 0 view .LVU3036
 8795 0022 216A     		ldr	r1, [r4, #32]
 8796 0024 0198     		ldr	r0, [sp, #4]
 8797              	.LVL1055:
4188:DRIVER/FatFs/source/ff.c **** 				if (res == FR_OK) {
 8798              		.loc 1 4188 11 view .LVU3037
 8799 0026 FFF7FEFF 		bl	move_window
 8800              	.LVL1056:
4189:DRIVER/FatFs/source/ff.c **** 					dir = fp->dir_ptr;
 8801              		.loc 1 4189 5 is_stmt 1 view .LVU3038
4189:DRIVER/FatFs/source/ff.c **** 					dir = fp->dir_ptr;
 8802              		.loc 1 4189 8 is_stmt 0 view .LVU3039
 8803 002a 78B1     		cbz	r0, .L663
 8804              	.LVL1057:
 8805              	.L658:
4205:DRIVER/FatFs/source/ff.c **** 
 8806              		.loc 1 4205 1 view .LVU3040
 8807 002c 02B0     		add	sp, sp, #8
 8808              	.LCFI67:
 8809              		.cfi_remember_state
 8810              		.cfi_def_cfa_offset 16
 8811              		@ sp needed
 8812 002e 70BD     		pop	{r4, r5, r6, pc}
 8813              	.LVL1058:
 8814              	.L662:
 8815              	.LCFI68:
 8816              		.cfi_restore_state
4150:DRIVER/FatFs/source/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
 8817              		.loc 1 4150 5 is_stmt 1 view .LVU3041
4150:DRIVER/FatFs/source/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
 8818              		.loc 1 4150 9 is_stmt 0 view .LVU3042
 8819 0030 0123     		movs	r3, #1
 8820 0032 E269     		ldr	r2, [r4, #28]
 8821 0034 04F12801 		add	r1, r4, #40
 8822 0038 0198     		ldr	r0, [sp, #4]
 8823 003a 4078     		ldrb	r0, [r0, #1]	@ zero_extendqisi2
 8824 003c FFF7FEFF 		bl	disk_write
 8825              	.LVL1059:
4150:DRIVER/FatFs/source/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 304


 8826              		.loc 1 4150 8 view .LVU3043
 8827 0040 38BB     		cbnz	r0, .L660
4151:DRIVER/FatFs/source/ff.c **** 			}
 8828              		.loc 1 4151 5 is_stmt 1 view .LVU3044
4151:DRIVER/FatFs/source/ff.c **** 			}
 8829              		.loc 1 4151 7 is_stmt 0 view .LVU3045
 8830 0042 237C     		ldrb	r3, [r4, #16]	@ zero_extendqisi2
4151:DRIVER/FatFs/source/ff.c **** 			}
 8831              		.loc 1 4151 14 view .LVU3046
 8832 0044 03F07F03 		and	r3, r3, #127
 8833 0048 2374     		strb	r3, [r4, #16]
 8834 004a E7E7     		b	.L659
 8835              	.LVL1060:
 8836              	.L663:
4190:DRIVER/FatFs/source/ff.c **** 					dir[DIR_Attr] |= AM_ARC;						/* Set archive attribute to indicate that the file has been chan
 8837              		.loc 1 4190 6 is_stmt 1 view .LVU3047
4190:DRIVER/FatFs/source/ff.c **** 					dir[DIR_Attr] |= AM_ARC;						/* Set archive attribute to indicate that the file has been chan
 8838              		.loc 1 4190 10 is_stmt 0 view .LVU3048
 8839 004c 666A     		ldr	r6, [r4, #36]
 8840              	.LVL1061:
4191:DRIVER/FatFs/source/ff.c **** 					st_clust(fp->obj.fs, dir, fp->obj.sclust);		/* Update file allocation information  */
 8841              		.loc 1 4191 6 is_stmt 1 view .LVU3049
4191:DRIVER/FatFs/source/ff.c **** 					st_clust(fp->obj.fs, dir, fp->obj.sclust);		/* Update file allocation information  */
 8842              		.loc 1 4191 9 is_stmt 0 view .LVU3050
 8843 004e F37A     		ldrb	r3, [r6, #11]	@ zero_extendqisi2
4191:DRIVER/FatFs/source/ff.c **** 					st_clust(fp->obj.fs, dir, fp->obj.sclust);		/* Update file allocation information  */
 8844              		.loc 1 4191 20 view .LVU3051
 8845 0050 43F02003 		orr	r3, r3, #32
 8846 0054 F372     		strb	r3, [r6, #11]
4192:DRIVER/FatFs/source/ff.c **** 					st_dword(dir + DIR_FileSize, (DWORD)fp->obj.objsize);	/* Update file size */
 8847              		.loc 1 4192 6 is_stmt 1 view .LVU3052
 8848 0056 A268     		ldr	r2, [r4, #8]
 8849 0058 3146     		mov	r1, r6
 8850 005a 2068     		ldr	r0, [r4]
 8851              	.LVL1062:
4192:DRIVER/FatFs/source/ff.c **** 					st_dword(dir + DIR_FileSize, (DWORD)fp->obj.objsize);	/* Update file size */
 8852              		.loc 1 4192 6 is_stmt 0 view .LVU3053
 8853 005c FFF7FEFF 		bl	st_clust
 8854              	.LVL1063:
4193:DRIVER/FatFs/source/ff.c **** 					st_dword(dir + DIR_ModTime, tm);				/* Update modified time */
 8855              		.loc 1 4193 6 is_stmt 1 view .LVU3054
 8856 0060 E168     		ldr	r1, [r4, #12]
 8857 0062 06F11C00 		add	r0, r6, #28
 8858 0066 FFF7FEFF 		bl	st_dword
 8859              	.LVL1064:
4194:DRIVER/FatFs/source/ff.c **** 					st_word(dir + DIR_LstAccDate, 0);
 8860              		.loc 1 4194 6 view .LVU3055
 8861 006a 2946     		mov	r1, r5
 8862 006c 06F11600 		add	r0, r6, #22
 8863 0070 FFF7FEFF 		bl	st_dword
 8864              	.LVL1065:
4195:DRIVER/FatFs/source/ff.c **** 					fs->wflag = 1;
 8865              		.loc 1 4195 6 view .LVU3056
 8866 0074 0021     		movs	r1, #0
 8867 0076 06F11200 		add	r0, r6, #18
 8868 007a FFF7FEFF 		bl	st_word
 8869              	.LVL1066:
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 305


4196:DRIVER/FatFs/source/ff.c **** 					res = sync_fs(fs);					/* Restore it to the directory */
 8870              		.loc 1 4196 6 view .LVU3057
4196:DRIVER/FatFs/source/ff.c **** 					res = sync_fs(fs);					/* Restore it to the directory */
 8871              		.loc 1 4196 8 is_stmt 0 view .LVU3058
 8872 007e 0198     		ldr	r0, [sp, #4]
4196:DRIVER/FatFs/source/ff.c **** 					res = sync_fs(fs);					/* Restore it to the directory */
 8873              		.loc 1 4196 16 view .LVU3059
 8874 0080 0123     		movs	r3, #1
 8875 0082 0371     		strb	r3, [r0, #4]
4197:DRIVER/FatFs/source/ff.c **** 					fp->flag &= (BYTE)~FA_MODIFIED;
 8876              		.loc 1 4197 6 is_stmt 1 view .LVU3060
4197:DRIVER/FatFs/source/ff.c **** 					fp->flag &= (BYTE)~FA_MODIFIED;
 8877              		.loc 1 4197 12 is_stmt 0 view .LVU3061
 8878 0084 FFF7FEFF 		bl	sync_fs
 8879              	.LVL1067:
4198:DRIVER/FatFs/source/ff.c **** 				}
 8880              		.loc 1 4198 6 is_stmt 1 view .LVU3062
4198:DRIVER/FatFs/source/ff.c **** 				}
 8881              		.loc 1 4198 8 is_stmt 0 view .LVU3063
 8882 0088 237C     		ldrb	r3, [r4, #16]	@ zero_extendqisi2
4198:DRIVER/FatFs/source/ff.c **** 				}
 8883              		.loc 1 4198 15 view .LVU3064
 8884 008a 23F04003 		bic	r3, r3, #64
 8885 008e 2374     		strb	r3, [r4, #16]
 8886 0090 CCE7     		b	.L658
 8887              	.LVL1068:
 8888              	.L660:
4150:DRIVER/FatFs/source/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
 8889              		.loc 1 4150 63 view .LVU3065
 8890 0092 0120     		movs	r0, #1
 8891 0094 CAE7     		b	.L658
 8892              		.cfi_endproc
 8893              	.LFE43:
 8895              		.section	.text.f_close,"ax",%progbits
 8896              		.align	1
 8897              		.global	f_close
 8898              		.syntax unified
 8899              		.thumb
 8900              		.thumb_func
 8902              	f_close:
 8903              	.LVL1069:
 8904              	.LFB44:
4219:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
 8905              		.loc 1 4219 1 is_stmt 1 view -0
 8906              		.cfi_startproc
 8907              		@ args = 0, pretend = 0, frame = 8
 8908              		@ frame_needed = 0, uses_anonymous_args = 0
4219:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
 8909              		.loc 1 4219 1 is_stmt 0 view .LVU3067
 8910 0000 10B5     		push	{r4, lr}
 8911              	.LCFI69:
 8912              		.cfi_def_cfa_offset 8
 8913              		.cfi_offset 4, -8
 8914              		.cfi_offset 14, -4
 8915 0002 82B0     		sub	sp, sp, #8
 8916              	.LCFI70:
 8917              		.cfi_def_cfa_offset 16
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 306


 8918 0004 0446     		mov	r4, r0
4220:DRIVER/FatFs/source/ff.c **** 	FATFS *fs;
 8919              		.loc 1 4220 2 is_stmt 1 view .LVU3068
4221:DRIVER/FatFs/source/ff.c **** 
 8920              		.loc 1 4221 2 view .LVU3069
4224:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK)
 8921              		.loc 1 4224 2 view .LVU3070
4224:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK)
 8922              		.loc 1 4224 8 is_stmt 0 view .LVU3071
 8923 0006 FFF7FEFF 		bl	f_sync
 8924              	.LVL1070:
4225:DRIVER/FatFs/source/ff.c **** #endif
 8925              		.loc 1 4225 2 is_stmt 1 view .LVU3072
4225:DRIVER/FatFs/source/ff.c **** #endif
 8926              		.loc 1 4225 5 is_stmt 0 view .LVU3073
 8927 000a 08B1     		cbz	r0, .L667
 8928              	.L665:
 8929              	.LVL1071:
4241:DRIVER/FatFs/source/ff.c **** }
 8930              		.loc 1 4241 2 is_stmt 1 view .LVU3074
4242:DRIVER/FatFs/source/ff.c **** 
 8931              		.loc 1 4242 1 is_stmt 0 view .LVU3075
 8932 000c 02B0     		add	sp, sp, #8
 8933              	.LCFI71:
 8934              		.cfi_remember_state
 8935              		.cfi_def_cfa_offset 8
 8936              		@ sp needed
 8937 000e 10BD     		pop	{r4, pc}
 8938              	.LVL1072:
 8939              	.L667:
 8940              	.LCFI72:
 8941              		.cfi_restore_state
4228:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK) {
 8942              		.loc 1 4228 3 is_stmt 1 view .LVU3076
4228:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK) {
 8943              		.loc 1 4228 9 is_stmt 0 view .LVU3077
 8944 0010 01A9     		add	r1, sp, #4
 8945 0012 2046     		mov	r0, r4
 8946 0014 FFF7FEFF 		bl	validate
 8947              	.LVL1073:
4229:DRIVER/FatFs/source/ff.c **** #if FF_FS_LOCK
 8948              		.loc 1 4229 3 is_stmt 1 view .LVU3078
4229:DRIVER/FatFs/source/ff.c **** #if FF_FS_LOCK
 8949              		.loc 1 4229 6 is_stmt 0 view .LVU3079
 8950 0018 0028     		cmp	r0, #0
 8951 001a F7D1     		bne	.L665
4234:DRIVER/FatFs/source/ff.c **** #endif
 8952              		.loc 1 4234 4 is_stmt 1 view .LVU3080
4234:DRIVER/FatFs/source/ff.c **** #endif
 8953              		.loc 1 4234 15 is_stmt 0 view .LVU3081
 8954 001c 2060     		str	r0, [r4]
 8955 001e F5E7     		b	.L665
 8956              		.cfi_endproc
 8957              	.LFE44:
 8959              		.section	.text.f_lseek,"ax",%progbits
 8960              		.align	1
 8961              		.global	f_lseek
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 307


 8962              		.syntax unified
 8963              		.thumb
 8964              		.thumb_func
 8966              	f_lseek:
 8967              	.LVL1074:
 8968              	.LFB45:
4437:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
 8969              		.loc 1 4437 1 is_stmt 1 view -0
 8970              		.cfi_startproc
 8971              		@ args = 0, pretend = 0, frame = 8
 8972              		@ frame_needed = 0, uses_anonymous_args = 0
4437:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
 8973              		.loc 1 4437 1 is_stmt 0 view .LVU3083
 8974 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 8975              	.LCFI73:
 8976              		.cfi_def_cfa_offset 24
 8977              		.cfi_offset 4, -24
 8978              		.cfi_offset 5, -20
 8979              		.cfi_offset 6, -16
 8980              		.cfi_offset 7, -12
 8981              		.cfi_offset 8, -8
 8982              		.cfi_offset 14, -4
 8983 0004 82B0     		sub	sp, sp, #8
 8984              	.LCFI74:
 8985              		.cfi_def_cfa_offset 32
 8986 0006 0446     		mov	r4, r0
 8987 0008 0D46     		mov	r5, r1
4438:DRIVER/FatFs/source/ff.c **** 	FATFS *fs;
 8988              		.loc 1 4438 2 is_stmt 1 view .LVU3084
4439:DRIVER/FatFs/source/ff.c **** 	DWORD clst, bcs;
 8989              		.loc 1 4439 2 view .LVU3085
4440:DRIVER/FatFs/source/ff.c **** 	LBA_t nsect;
 8990              		.loc 1 4440 2 view .LVU3086
4441:DRIVER/FatFs/source/ff.c **** 	FSIZE_t ifptr;
 8991              		.loc 1 4441 2 view .LVU3087
4442:DRIVER/FatFs/source/ff.c **** #if FF_USE_FASTSEEK
 8992              		.loc 1 4442 2 view .LVU3088
4449:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) res = (FRESULT)fp->err;
 8993              		.loc 1 4449 2 view .LVU3089
4449:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) res = (FRESULT)fp->err;
 8994              		.loc 1 4449 8 is_stmt 0 view .LVU3090
 8995 000a 01A9     		add	r1, sp, #4
 8996              	.LVL1075:
4449:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) res = (FRESULT)fp->err;
 8997              		.loc 1 4449 8 view .LVU3091
 8998 000c FFF7FEFF 		bl	validate
 8999              	.LVL1076:
4450:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT && !FF_FS_READONLY
 9000              		.loc 1 4450 2 is_stmt 1 view .LVU3092
4450:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT && !FF_FS_READONLY
 9001              		.loc 1 4450 5 is_stmt 0 view .LVU3093
 9002 0010 8046     		mov	r8, r0
 9003 0012 0028     		cmp	r0, #0
 9004 0014 4DD1     		bne	.L671
4450:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT && !FF_FS_READONLY
 9005              		.loc 1 4450 20 is_stmt 1 discriminator 1 view .LVU3094
4450:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT && !FF_FS_READONLY
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 308


 9006              		.loc 1 4450 24 is_stmt 0 discriminator 1 view .LVU3095
 9007 0016 94F81180 		ldrb	r8, [r4, #17]	@ zero_extendqisi2
 9008              	.LVL1077:
4456:DRIVER/FatFs/source/ff.c **** 
 9009              		.loc 1 4456 2 is_stmt 1 discriminator 1 view .LVU3096
4456:DRIVER/FatFs/source/ff.c **** 
 9010              		.loc 1 4456 5 is_stmt 0 discriminator 1 view .LVU3097
 9011 001a B8F1000F 		cmp	r8, #0
 9012 001e 48D1     		bne	.L671
4515:DRIVER/FatFs/source/ff.c **** 			ofs = fp->obj.objsize;
 9013              		.loc 1 4515 3 is_stmt 1 view .LVU3098
4515:DRIVER/FatFs/source/ff.c **** 			ofs = fp->obj.objsize;
 9014              		.loc 1 4515 20 is_stmt 0 view .LVU3099
 9015 0020 E368     		ldr	r3, [r4, #12]
4515:DRIVER/FatFs/source/ff.c **** 			ofs = fp->obj.objsize;
 9016              		.loc 1 4515 6 view .LVU3100
 9017 0022 AB42     		cmp	r3, r5
 9018 0024 04D2     		bcs	.L672
4515:DRIVER/FatFs/source/ff.c **** 			ofs = fp->obj.objsize;
 9019              		.loc 1 4515 55 discriminator 1 view .LVU3101
 9020 0026 227C     		ldrb	r2, [r4, #16]	@ zero_extendqisi2
4515:DRIVER/FatFs/source/ff.c **** 			ofs = fp->obj.objsize;
 9021              		.loc 1 4515 29 discriminator 1 view .LVU3102
 9022 0028 12F0020F 		tst	r2, #2
 9023 002c 00D1     		bne	.L672
4516:DRIVER/FatFs/source/ff.c **** 		}
 9024              		.loc 1 4516 8 view .LVU3103
 9025 002e 1D46     		mov	r5, r3
 9026              	.LVL1078:
 9027              	.L672:
4518:DRIVER/FatFs/source/ff.c **** 		fp->fptr = nsect = 0;
 9028              		.loc 1 4518 3 is_stmt 1 view .LVU3104
4518:DRIVER/FatFs/source/ff.c **** 		fp->fptr = nsect = 0;
 9029              		.loc 1 4518 9 is_stmt 0 view .LVU3105
 9030 0030 6669     		ldr	r6, [r4, #20]
 9031              	.LVL1079:
4519:DRIVER/FatFs/source/ff.c **** 		if (ofs > 0) {
 9032              		.loc 1 4519 3 is_stmt 1 view .LVU3106
4519:DRIVER/FatFs/source/ff.c **** 		if (ofs > 0) {
 9033              		.loc 1 4519 12 is_stmt 0 view .LVU3107
 9034 0032 0023     		movs	r3, #0
 9035 0034 6361     		str	r3, [r4, #20]
4520:DRIVER/FatFs/source/ff.c **** 			bcs = (DWORD)fs->csize * SS(fs);	/* Cluster size (byte) */
 9036              		.loc 1 4520 3 is_stmt 1 view .LVU3108
4520:DRIVER/FatFs/source/ff.c **** 			bcs = (DWORD)fs->csize * SS(fs);	/* Cluster size (byte) */
 9037              		.loc 1 4520 6 is_stmt 0 view .LVU3109
 9038 0036 D5B1     		cbz	r5, .L673
4521:DRIVER/FatFs/source/ff.c **** 			if (ifptr > 0 &&
 9039              		.loc 1 4521 4 is_stmt 1 view .LVU3110
4521:DRIVER/FatFs/source/ff.c **** 			if (ifptr > 0 &&
 9040              		.loc 1 4521 19 is_stmt 0 view .LVU3111
 9041 0038 019B     		ldr	r3, [sp, #4]
 9042 003a 5F89     		ldrh	r7, [r3, #10]
4521:DRIVER/FatFs/source/ff.c **** 			if (ifptr > 0 &&
 9043              		.loc 1 4521 29 view .LVU3112
 9044 003c 9B89     		ldrh	r3, [r3, #12]
4521:DRIVER/FatFs/source/ff.c **** 			if (ifptr > 0 &&
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 309


 9045              		.loc 1 4521 8 view .LVU3113
 9046 003e 03FB07F7 		mul	r7, r3, r7
 9047              	.LVL1080:
4522:DRIVER/FatFs/source/ff.c **** 				(ofs - 1) / bcs >= (ifptr - 1) / bcs) {	/* When seek to same or following cluster, */
 9048              		.loc 1 4522 4 is_stmt 1 view .LVU3114
4522:DRIVER/FatFs/source/ff.c **** 				(ofs - 1) / bcs >= (ifptr - 1) / bcs) {	/* When seek to same or following cluster, */
 9049              		.loc 1 4522 7 is_stmt 0 view .LVU3115
 9050 0042 6EB1     		cbz	r6, .L674
4523:DRIVER/FatFs/source/ff.c **** 				fp->fptr = (ifptr - 1) & ~(FSIZE_t)(bcs - 1);	/* start from the current cluster */
 9051              		.loc 1 4523 10 discriminator 1 view .LVU3116
 9052 0044 6B1E     		subs	r3, r5, #1
4523:DRIVER/FatFs/source/ff.c **** 				fp->fptr = (ifptr - 1) & ~(FSIZE_t)(bcs - 1);	/* start from the current cluster */
 9053              		.loc 1 4523 15 discriminator 1 view .LVU3117
 9054 0046 B3FBF7F3 		udiv	r3, r3, r7
4523:DRIVER/FatFs/source/ff.c **** 				fp->fptr = (ifptr - 1) & ~(FSIZE_t)(bcs - 1);	/* start from the current cluster */
 9055              		.loc 1 4523 31 discriminator 1 view .LVU3118
 9056 004a 013E     		subs	r6, r6, #1
 9057              	.LVL1081:
4523:DRIVER/FatFs/source/ff.c **** 				fp->fptr = (ifptr - 1) & ~(FSIZE_t)(bcs - 1);	/* start from the current cluster */
 9058              		.loc 1 4523 36 discriminator 1 view .LVU3119
 9059 004c B6FBF7F2 		udiv	r2, r6, r7
4522:DRIVER/FatFs/source/ff.c **** 				(ofs - 1) / bcs >= (ifptr - 1) / bcs) {	/* When seek to same or following cluster, */
 9060              		.loc 1 4522 18 discriminator 1 view .LVU3120
 9061 0050 9342     		cmp	r3, r2
 9062 0052 05D3     		bcc	.L674
4524:DRIVER/FatFs/source/ff.c **** 				ofs -= fp->fptr;
 9063              		.loc 1 4524 5 is_stmt 1 view .LVU3121
4524:DRIVER/FatFs/source/ff.c **** 				ofs -= fp->fptr;
 9064              		.loc 1 4524 30 is_stmt 0 view .LVU3122
 9065 0054 7B42     		rsbs	r3, r7, #0
4524:DRIVER/FatFs/source/ff.c **** 				ofs -= fp->fptr;
 9066              		.loc 1 4524 28 view .LVU3123
 9067 0056 1E40     		ands	r6, r6, r3
 9068              	.LVL1082:
4524:DRIVER/FatFs/source/ff.c **** 				ofs -= fp->fptr;
 9069              		.loc 1 4524 14 view .LVU3124
 9070 0058 6661     		str	r6, [r4, #20]
4525:DRIVER/FatFs/source/ff.c **** 				clst = fp->clust;
 9071              		.loc 1 4525 5 is_stmt 1 view .LVU3125
4525:DRIVER/FatFs/source/ff.c **** 				clst = fp->clust;
 9072              		.loc 1 4525 9 is_stmt 0 view .LVU3126
 9073 005a AE1B     		subs	r6, r5, r6
 9074              	.LVL1083:
4526:DRIVER/FatFs/source/ff.c **** 			} else {									/* When seek to back cluster, */
 9075              		.loc 1 4526 5 is_stmt 1 view .LVU3127
4526:DRIVER/FatFs/source/ff.c **** 			} else {									/* When seek to back cluster, */
 9076              		.loc 1 4526 10 is_stmt 0 view .LVU3128
 9077 005c A569     		ldr	r5, [r4, #24]
 9078              	.LVL1084:
4526:DRIVER/FatFs/source/ff.c **** 			} else {									/* When seek to back cluster, */
 9079              		.loc 1 4526 10 view .LVU3129
 9080 005e 04E0     		b	.L675
 9081              	.LVL1085:
 9082              	.L674:
4528:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY
 9083              		.loc 1 4528 5 is_stmt 1 view .LVU3130
4528:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 310


 9084              		.loc 1 4528 10 is_stmt 0 view .LVU3131
 9085 0060 A068     		ldr	r0, [r4, #8]
 9086              	.LVL1086:
4530:DRIVER/FatFs/source/ff.c **** 					clst = create_chain(&fp->obj, 0);
 9087              		.loc 1 4530 5 is_stmt 1 view .LVU3132
4530:DRIVER/FatFs/source/ff.c **** 					clst = create_chain(&fp->obj, 0);
 9088              		.loc 1 4530 8 is_stmt 0 view .LVU3133
 9089 0062 50B3     		cbz	r0, .L696
 9090              	.L676:
4537:DRIVER/FatFs/source/ff.c **** 			}
 9091              		.loc 1 4537 5 is_stmt 1 view .LVU3134
4537:DRIVER/FatFs/source/ff.c **** 			}
 9092              		.loc 1 4537 15 is_stmt 0 view .LVU3135
 9093 0064 A061     		str	r0, [r4, #24]
 9094 0066 2E46     		mov	r6, r5
 9095 0068 0546     		mov	r5, r0
 9096              	.LVL1087:
 9097              	.L675:
4539:DRIVER/FatFs/source/ff.c **** 				while (ofs > bcs) {						/* Cluster following loop */
 9098              		.loc 1 4539 4 is_stmt 1 view .LVU3136
4539:DRIVER/FatFs/source/ff.c **** 				while (ofs > bcs) {						/* Cluster following loop */
 9099              		.loc 1 4539 7 is_stmt 0 view .LVU3137
 9100 006a 002D     		cmp	r5, #0
 9101 006c 49D1     		bne	.L679
 9102              	.LVL1088:
 9103              	.L673:
4569:DRIVER/FatFs/source/ff.c **** 			fp->obj.objsize = fp->fptr;
 9104              		.loc 1 4569 3 is_stmt 1 view .LVU3138
4569:DRIVER/FatFs/source/ff.c **** 			fp->obj.objsize = fp->fptr;
 9105              		.loc 1 4569 28 is_stmt 0 view .LVU3139
 9106 006e 6369     		ldr	r3, [r4, #20]
4569:DRIVER/FatFs/source/ff.c **** 			fp->obj.objsize = fp->fptr;
 9107              		.loc 1 4569 44 view .LVU3140
 9108 0070 E268     		ldr	r2, [r4, #12]
4569:DRIVER/FatFs/source/ff.c **** 			fp->obj.objsize = fp->fptr;
 9109              		.loc 1 4569 6 view .LVU3141
 9110 0072 9342     		cmp	r3, r2
 9111 0074 04D9     		bls	.L688
4570:DRIVER/FatFs/source/ff.c **** 			fp->flag |= FA_MODIFIED;
 9112              		.loc 1 4570 4 is_stmt 1 view .LVU3142
4570:DRIVER/FatFs/source/ff.c **** 			fp->flag |= FA_MODIFIED;
 9113              		.loc 1 4570 20 is_stmt 0 view .LVU3143
 9114 0076 E360     		str	r3, [r4, #12]
4571:DRIVER/FatFs/source/ff.c **** 		}
 9115              		.loc 1 4571 4 is_stmt 1 view .LVU3144
4571:DRIVER/FatFs/source/ff.c **** 		}
 9116              		.loc 1 4571 6 is_stmt 0 view .LVU3145
 9117 0078 227C     		ldrb	r2, [r4, #16]	@ zero_extendqisi2
4571:DRIVER/FatFs/source/ff.c **** 		}
 9118              		.loc 1 4571 13 view .LVU3146
 9119 007a 42F04002 		orr	r2, r2, #64
 9120 007e 2274     		strb	r2, [r4, #16]
 9121              	.L688:
4573:DRIVER/FatFs/source/ff.c **** #if !FF_FS_TINY
 9122              		.loc 1 4573 3 is_stmt 1 view .LVU3147
4573:DRIVER/FatFs/source/ff.c **** #if !FF_FS_TINY
 9123              		.loc 1 4573 18 is_stmt 0 view .LVU3148
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 311


 9124 0080 0198     		ldr	r0, [sp, #4]
 9125 0082 8289     		ldrh	r2, [r0, #12]
4573:DRIVER/FatFs/source/ff.c **** #if !FF_FS_TINY
 9126              		.loc 1 4573 16 view .LVU3149
 9127 0084 B3FBF2F1 		udiv	r1, r3, r2
 9128 0088 02FB1133 		mls	r3, r2, r1, r3
4573:DRIVER/FatFs/source/ff.c **** #if !FF_FS_TINY
 9129              		.loc 1 4573 6 view .LVU3150
 9130 008c 8BB1     		cbz	r3, .L671
4573:DRIVER/FatFs/source/ff.c **** #if !FF_FS_TINY
 9131              		.loc 1 4573 39 discriminator 1 view .LVU3151
 9132 008e E269     		ldr	r2, [r4, #28]
4573:DRIVER/FatFs/source/ff.c **** #if !FF_FS_TINY
 9133              		.loc 1 4573 25 discriminator 1 view .LVU3152
 9134 0090 AA42     		cmp	r2, r5
 9135 0092 0ED0     		beq	.L671
4576:DRIVER/FatFs/source/ff.c **** 				if (disk_write(fs->pdrv, fp->buf, fp->sect, 1) != RES_OK) ABORT(fs, FR_DISK_ERR);
 9136              		.loc 1 4576 4 is_stmt 1 view .LVU3153
4576:DRIVER/FatFs/source/ff.c **** 				if (disk_write(fs->pdrv, fp->buf, fp->sect, 1) != RES_OK) ABORT(fs, FR_DISK_ERR);
 9137              		.loc 1 4576 8 is_stmt 0 view .LVU3154
 9138 0094 94F91030 		ldrsb	r3, [r4, #16]
4576:DRIVER/FatFs/source/ff.c **** 				if (disk_write(fs->pdrv, fp->buf, fp->sect, 1) != RES_OK) ABORT(fs, FR_DISK_ERR);
 9139              		.loc 1 4576 7 view .LVU3155
 9140 0098 002B     		cmp	r3, #0
 9141 009a 68DB     		blt	.L697
 9142              	.L689:
4581:DRIVER/FatFs/source/ff.c **** #endif
 9143              		.loc 1 4581 4 is_stmt 1 view .LVU3156
4581:DRIVER/FatFs/source/ff.c **** #endif
 9144              		.loc 1 4581 8 is_stmt 0 view .LVU3157
 9145 009c 0123     		movs	r3, #1
 9146 009e 2A46     		mov	r2, r5
 9147 00a0 04F12801 		add	r1, r4, #40
 9148 00a4 0198     		ldr	r0, [sp, #4]
 9149 00a6 4078     		ldrb	r0, [r0, #1]	@ zero_extendqisi2
 9150 00a8 FFF7FEFF 		bl	disk_read
 9151              	.LVL1089:
4581:DRIVER/FatFs/source/ff.c **** #endif
 9152              		.loc 1 4581 7 view .LVU3158
 9153 00ac 0028     		cmp	r0, #0
 9154 00ae 6FD1     		bne	.L698
4581:DRIVER/FatFs/source/ff.c **** #endif
 9155              		.loc 1 4581 80 is_stmt 1 discriminator 2 view .LVU3159
4583:DRIVER/FatFs/source/ff.c **** 		}
 9156              		.loc 1 4583 4 discriminator 2 view .LVU3160
4583:DRIVER/FatFs/source/ff.c **** 		}
 9157              		.loc 1 4583 13 is_stmt 0 discriminator 2 view .LVU3161
 9158 00b0 E561     		str	r5, [r4, #28]
 9159              	.LVL1090:
 9160              	.L671:
4588:DRIVER/FatFs/source/ff.c **** 
 9161              		.loc 1 4588 1 view .LVU3162
 9162 00b2 4046     		mov	r0, r8
 9163 00b4 02B0     		add	sp, sp, #8
 9164              	.LCFI75:
 9165              		.cfi_remember_state
 9166              		.cfi_def_cfa_offset 24
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 312


 9167              		@ sp needed
 9168 00b6 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 9169              	.LVL1091:
 9170              	.L696:
 9171              	.LCFI76:
 9172              		.cfi_restore_state
4531:DRIVER/FatFs/source/ff.c **** 					if (clst == 1) ABORT(fs, FR_INT_ERR);
 9173              		.loc 1 4531 6 is_stmt 1 view .LVU3163
4531:DRIVER/FatFs/source/ff.c **** 					if (clst == 1) ABORT(fs, FR_INT_ERR);
 9174              		.loc 1 4531 13 is_stmt 0 view .LVU3164
 9175 00ba 0021     		movs	r1, #0
 9176 00bc 2046     		mov	r0, r4
 9177              	.LVL1092:
4531:DRIVER/FatFs/source/ff.c **** 					if (clst == 1) ABORT(fs, FR_INT_ERR);
 9178              		.loc 1 4531 13 view .LVU3165
 9179 00be FFF7FEFF 		bl	create_chain
 9180              	.LVL1093:
4532:DRIVER/FatFs/source/ff.c **** 					if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 9181              		.loc 1 4532 6 is_stmt 1 view .LVU3166
4532:DRIVER/FatFs/source/ff.c **** 					if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 9182              		.loc 1 4532 9 is_stmt 0 view .LVU3167
 9183 00c2 0128     		cmp	r0, #1
 9184 00c4 04D0     		beq	.L699
4532:DRIVER/FatFs/source/ff.c **** 					if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 9185              		.loc 1 4532 42 is_stmt 1 discriminator 2 view .LVU3168
4533:DRIVER/FatFs/source/ff.c **** 					fp->obj.sclust = clst;
 9186              		.loc 1 4533 6 discriminator 2 view .LVU3169
4533:DRIVER/FatFs/source/ff.c **** 					fp->obj.sclust = clst;
 9187              		.loc 1 4533 9 is_stmt 0 discriminator 2 view .LVU3170
 9188 00c6 B0F1FF3F 		cmp	r0, #-1
 9189 00ca 06D0     		beq	.L700
4533:DRIVER/FatFs/source/ff.c **** 					fp->obj.sclust = clst;
 9190              		.loc 1 4533 52 is_stmt 1 discriminator 2 view .LVU3171
4534:DRIVER/FatFs/source/ff.c **** 				}
 9191              		.loc 1 4534 6 discriminator 2 view .LVU3172
4534:DRIVER/FatFs/source/ff.c **** 				}
 9192              		.loc 1 4534 21 is_stmt 0 discriminator 2 view .LVU3173
 9193 00cc A060     		str	r0, [r4, #8]
 9194 00ce C9E7     		b	.L676
 9195              	.L699:
4532:DRIVER/FatFs/source/ff.c **** 					if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 9196              		.loc 1 4532 21 is_stmt 1 discriminator 1 view .LVU3174
 9197 00d0 4FF00208 		mov	r8, #2
 9198              	.LVL1094:
4532:DRIVER/FatFs/source/ff.c **** 					if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 9199              		.loc 1 4532 21 is_stmt 0 discriminator 1 view .LVU3175
 9200 00d4 84F81180 		strb	r8, [r4, #17]
4532:DRIVER/FatFs/source/ff.c **** 					if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 9201              		.loc 1 4532 21 is_stmt 1 discriminator 1 view .LVU3176
 9202 00d8 EBE7     		b	.L671
 9203              	.LVL1095:
 9204              	.L700:
4533:DRIVER/FatFs/source/ff.c **** 					fp->obj.sclust = clst;
 9205              		.loc 1 4533 30 discriminator 1 view .LVU3177
 9206 00da 4FF00108 		mov	r8, #1
 9207              	.LVL1096:
4533:DRIVER/FatFs/source/ff.c **** 					fp->obj.sclust = clst;
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 313


 9208              		.loc 1 4533 30 is_stmt 0 discriminator 1 view .LVU3178
 9209 00de 84F81180 		strb	r8, [r4, #17]
4533:DRIVER/FatFs/source/ff.c **** 					fp->obj.sclust = clst;
 9210              		.loc 1 4533 30 is_stmt 1 discriminator 1 view .LVU3179
 9211 00e2 E6E7     		b	.L671
 9212              	.LVL1097:
 9213              	.L680:
4555:DRIVER/FatFs/source/ff.c **** 					}
 9214              		.loc 1 4555 7 view .LVU3180
4555:DRIVER/FatFs/source/ff.c **** 					}
 9215              		.loc 1 4555 14 is_stmt 0 view .LVU3181
 9216 00e4 2946     		mov	r1, r5
 9217 00e6 2046     		mov	r0, r4
 9218 00e8 FFF7FEFF 		bl	get_fat
 9219              	.LVL1098:
 9220 00ec 0546     		mov	r5, r0
 9221              	.LVL1099:
 9222              	.L682:
4557:DRIVER/FatFs/source/ff.c **** 					if (clst <= 1 || clst >= fs->n_fatent) ABORT(fs, FR_INT_ERR);
 9223              		.loc 1 4557 6 is_stmt 1 view .LVU3182
4557:DRIVER/FatFs/source/ff.c **** 					if (clst <= 1 || clst >= fs->n_fatent) ABORT(fs, FR_INT_ERR);
 9224              		.loc 1 4557 9 is_stmt 0 view .LVU3183
 9225 00ee B5F1FF3F 		cmp	r5, #-1
 9226 00f2 2BD0     		beq	.L701
4557:DRIVER/FatFs/source/ff.c **** 					if (clst <= 1 || clst >= fs->n_fatent) ABORT(fs, FR_INT_ERR);
 9227              		.loc 1 4557 52 is_stmt 1 discriminator 2 view .LVU3184
4558:DRIVER/FatFs/source/ff.c **** 					fp->clust = clst;
 9228              		.loc 1 4558 6 discriminator 2 view .LVU3185
4558:DRIVER/FatFs/source/ff.c **** 					fp->clust = clst;
 9229              		.loc 1 4558 9 is_stmt 0 discriminator 2 view .LVU3186
 9230 00f4 012D     		cmp	r5, #1
 9231 00f6 2ED9     		bls	.L684
4558:DRIVER/FatFs/source/ff.c **** 					fp->clust = clst;
 9232              		.loc 1 4558 33 discriminator 2 view .LVU3187
 9233 00f8 019B     		ldr	r3, [sp, #4]
 9234 00fa DB69     		ldr	r3, [r3, #28]
4558:DRIVER/FatFs/source/ff.c **** 					fp->clust = clst;
 9235              		.loc 1 4558 20 discriminator 2 view .LVU3188
 9236 00fc AB42     		cmp	r3, r5
 9237 00fe 2AD9     		bls	.L684
4558:DRIVER/FatFs/source/ff.c **** 					fp->clust = clst;
 9238              		.loc 1 4558 66 is_stmt 1 discriminator 4 view .LVU3189
4559:DRIVER/FatFs/source/ff.c **** 				}
 9239              		.loc 1 4559 6 discriminator 4 view .LVU3190
4559:DRIVER/FatFs/source/ff.c **** 				}
 9240              		.loc 1 4559 16 is_stmt 0 discriminator 4 view .LVU3191
 9241 0100 A561     		str	r5, [r4, #24]
 9242              	.LVL1100:
 9243              	.L679:
4540:DRIVER/FatFs/source/ff.c **** 					ofs -= bcs; fp->fptr += bcs;
 9244              		.loc 1 4540 16 is_stmt 1 view .LVU3192
 9245 0102 BE42     		cmp	r6, r7
 9246 0104 0FD9     		bls	.L681
4541:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY
 9247              		.loc 1 4541 6 view .LVU3193
4541:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY
 9248              		.loc 1 4541 10 is_stmt 0 view .LVU3194
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 314


 9249 0106 F61B     		subs	r6, r6, r7
 9250              	.LVL1101:
4541:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY
 9251              		.loc 1 4541 18 is_stmt 1 view .LVU3195
4541:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY
 9252              		.loc 1 4541 20 is_stmt 0 view .LVU3196
 9253 0108 6369     		ldr	r3, [r4, #20]
4541:DRIVER/FatFs/source/ff.c **** #if !FF_FS_READONLY
 9254              		.loc 1 4541 27 view .LVU3197
 9255 010a 3B44     		add	r3, r3, r7
 9256 010c 6361     		str	r3, [r4, #20]
4543:DRIVER/FatFs/source/ff.c **** 						if (FF_FS_EXFAT && fp->fptr > fp->obj.objsize) {	/* No FAT chain object needs correct objsize
 9257              		.loc 1 4543 6 is_stmt 1 view .LVU3198
4543:DRIVER/FatFs/source/ff.c **** 						if (FF_FS_EXFAT && fp->fptr > fp->obj.objsize) {	/* No FAT chain object needs correct objsize
 9258              		.loc 1 4543 12 is_stmt 0 view .LVU3199
 9259 010e 237C     		ldrb	r3, [r4, #16]	@ zero_extendqisi2
4543:DRIVER/FatFs/source/ff.c **** 						if (FF_FS_EXFAT && fp->fptr > fp->obj.objsize) {	/* No FAT chain object needs correct objsize
 9260              		.loc 1 4543 9 view .LVU3200
 9261 0110 13F0020F 		tst	r3, #2
 9262 0114 E6D0     		beq	.L680
4544:DRIVER/FatFs/source/ff.c **** 							fp->obj.objsize = fp->fptr;
 9263              		.loc 1 4544 7 is_stmt 1 view .LVU3201
4548:DRIVER/FatFs/source/ff.c **** 						if (clst == 0) {				/* Clip file size in case of disk full */
 9264              		.loc 1 4548 7 view .LVU3202
4548:DRIVER/FatFs/source/ff.c **** 						if (clst == 0) {				/* Clip file size in case of disk full */
 9265              		.loc 1 4548 14 is_stmt 0 view .LVU3203
 9266 0116 2946     		mov	r1, r5
 9267 0118 2046     		mov	r0, r4
 9268 011a FFF7FEFF 		bl	create_chain
 9269              	.LVL1102:
4549:DRIVER/FatFs/source/ff.c **** 							ofs = 0; break;
 9270              		.loc 1 4549 7 is_stmt 1 view .LVU3204
4549:DRIVER/FatFs/source/ff.c **** 							ofs = 0; break;
 9271              		.loc 1 4549 10 is_stmt 0 view .LVU3205
 9272 011e 0546     		mov	r5, r0
 9273 0120 0028     		cmp	r0, #0
 9274 0122 E4D1     		bne	.L682
4550:DRIVER/FatFs/source/ff.c **** 						}
 9275              		.loc 1 4550 12 view .LVU3206
 9276 0124 0646     		mov	r6, r0
 9277              	.LVL1103:
 9278              	.L681:
4561:DRIVER/FatFs/source/ff.c **** 				if (ofs % SS(fs)) {
 9279              		.loc 1 4561 5 is_stmt 1 view .LVU3207
4561:DRIVER/FatFs/source/ff.c **** 				if (ofs % SS(fs)) {
 9280              		.loc 1 4561 7 is_stmt 0 view .LVU3208
 9281 0126 6369     		ldr	r3, [r4, #20]
4561:DRIVER/FatFs/source/ff.c **** 				if (ofs % SS(fs)) {
 9282              		.loc 1 4561 14 view .LVU3209
 9283 0128 3344     		add	r3, r3, r6
 9284 012a 6361     		str	r3, [r4, #20]
4562:DRIVER/FatFs/source/ff.c **** 					nsect = clst2sect(fs, clst);	/* Current sector */
 9285              		.loc 1 4562 5 is_stmt 1 view .LVU3210
4562:DRIVER/FatFs/source/ff.c **** 					nsect = clst2sect(fs, clst);	/* Current sector */
 9286              		.loc 1 4562 15 is_stmt 0 view .LVU3211
 9287 012c 0198     		ldr	r0, [sp, #4]
 9288 012e 8789     		ldrh	r7, [r0, #12]
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 315


 9289              	.LVL1104:
4562:DRIVER/FatFs/source/ff.c **** 					nsect = clst2sect(fs, clst);	/* Current sector */
 9290              		.loc 1 4562 13 view .LVU3212
 9291 0130 B6FBF7F3 		udiv	r3, r6, r7
 9292 0134 07FB1363 		mls	r3, r7, r3, r6
4562:DRIVER/FatFs/source/ff.c **** 					nsect = clst2sect(fs, clst);	/* Current sector */
 9293              		.loc 1 4562 8 view .LVU3213
 9294 0138 BBB1     		cbz	r3, .L694
4563:DRIVER/FatFs/source/ff.c **** 					if (nsect == 0) ABORT(fs, FR_INT_ERR);
 9295              		.loc 1 4563 6 is_stmt 1 view .LVU3214
4563:DRIVER/FatFs/source/ff.c **** 					if (nsect == 0) ABORT(fs, FR_INT_ERR);
 9296              		.loc 1 4563 14 is_stmt 0 view .LVU3215
 9297 013a 2946     		mov	r1, r5
 9298 013c FFF7FEFF 		bl	clst2sect
 9299              	.LVL1105:
4564:DRIVER/FatFs/source/ff.c **** 					nsect += (DWORD)(ofs / SS(fs));
 9300              		.loc 1 4564 6 is_stmt 1 view .LVU3216
4564:DRIVER/FatFs/source/ff.c **** 					nsect += (DWORD)(ofs / SS(fs));
 9301              		.loc 1 4564 9 is_stmt 0 view .LVU3217
 9302 0140 0546     		mov	r5, r0
 9303              	.LVL1106:
4564:DRIVER/FatFs/source/ff.c **** 					nsect += (DWORD)(ofs / SS(fs));
 9304              		.loc 1 4564 9 view .LVU3218
 9305 0142 68B1     		cbz	r0, .L702
4564:DRIVER/FatFs/source/ff.c **** 					nsect += (DWORD)(ofs / SS(fs));
 9306              		.loc 1 4564 43 is_stmt 1 discriminator 2 view .LVU3219
4565:DRIVER/FatFs/source/ff.c **** 				}
 9307              		.loc 1 4565 6 discriminator 2 view .LVU3220
4565:DRIVER/FatFs/source/ff.c **** 				}
 9308              		.loc 1 4565 15 is_stmt 0 discriminator 2 view .LVU3221
 9309 0144 B6FBF7F6 		udiv	r6, r6, r7
 9310              	.LVL1107:
4565:DRIVER/FatFs/source/ff.c **** 				}
 9311              		.loc 1 4565 12 discriminator 2 view .LVU3222
 9312 0148 3544     		add	r5, r5, r6
 9313              	.LVL1108:
4565:DRIVER/FatFs/source/ff.c **** 				}
 9314              		.loc 1 4565 12 discriminator 2 view .LVU3223
 9315 014a 90E7     		b	.L673
 9316              	.LVL1109:
 9317              	.L701:
4557:DRIVER/FatFs/source/ff.c **** 					if (clst <= 1 || clst >= fs->n_fatent) ABORT(fs, FR_INT_ERR);
 9318              		.loc 1 4557 30 is_stmt 1 discriminator 1 view .LVU3224
 9319 014c 4FF00108 		mov	r8, #1
 9320              	.LVL1110:
4557:DRIVER/FatFs/source/ff.c **** 					if (clst <= 1 || clst >= fs->n_fatent) ABORT(fs, FR_INT_ERR);
 9321              		.loc 1 4557 30 is_stmt 0 discriminator 1 view .LVU3225
 9322 0150 84F81180 		strb	r8, [r4, #17]
4557:DRIVER/FatFs/source/ff.c **** 					if (clst <= 1 || clst >= fs->n_fatent) ABORT(fs, FR_INT_ERR);
 9323              		.loc 1 4557 30 is_stmt 1 discriminator 1 view .LVU3226
 9324 0154 ADE7     		b	.L671
 9325              	.LVL1111:
 9326              	.L684:
4558:DRIVER/FatFs/source/ff.c **** 					fp->clust = clst;
 9327              		.loc 1 4558 45 discriminator 3 view .LVU3227
 9328 0156 4FF00208 		mov	r8, #2
 9329              	.LVL1112:
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 316


4558:DRIVER/FatFs/source/ff.c **** 					fp->clust = clst;
 9330              		.loc 1 4558 45 is_stmt 0 discriminator 3 view .LVU3228
 9331 015a 84F81180 		strb	r8, [r4, #17]
4558:DRIVER/FatFs/source/ff.c **** 					fp->clust = clst;
 9332              		.loc 1 4558 45 is_stmt 1 discriminator 3 view .LVU3229
 9333 015e A8E7     		b	.L671
 9334              	.LVL1113:
 9335              	.L702:
4564:DRIVER/FatFs/source/ff.c **** 					nsect += (DWORD)(ofs / SS(fs));
 9336              		.loc 1 4564 22 discriminator 1 view .LVU3230
 9337 0160 4FF00208 		mov	r8, #2
 9338              	.LVL1114:
4564:DRIVER/FatFs/source/ff.c **** 					nsect += (DWORD)(ofs / SS(fs));
 9339              		.loc 1 4564 22 is_stmt 0 discriminator 1 view .LVU3231
 9340 0164 84F81180 		strb	r8, [r4, #17]
4564:DRIVER/FatFs/source/ff.c **** 					nsect += (DWORD)(ofs / SS(fs));
 9341              		.loc 1 4564 22 is_stmt 1 discriminator 1 view .LVU3232
 9342 0168 A3E7     		b	.L671
 9343              	.LVL1115:
 9344              	.L694:
4519:DRIVER/FatFs/source/ff.c **** 		if (ofs > 0) {
 9345              		.loc 1 4519 20 is_stmt 0 view .LVU3233
 9346 016a 1D46     		mov	r5, r3
 9347              	.LVL1116:
4519:DRIVER/FatFs/source/ff.c **** 		if (ofs > 0) {
 9348              		.loc 1 4519 20 view .LVU3234
 9349 016c 7FE7     		b	.L673
 9350              	.LVL1117:
 9351              	.L697:
4577:DRIVER/FatFs/source/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
 9352              		.loc 1 4577 5 is_stmt 1 view .LVU3235
4577:DRIVER/FatFs/source/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
 9353              		.loc 1 4577 9 is_stmt 0 view .LVU3236
 9354 016e 0123     		movs	r3, #1
 9355 0170 04F12801 		add	r1, r4, #40
 9356 0174 4078     		ldrb	r0, [r0, #1]	@ zero_extendqisi2
 9357 0176 FFF7FEFF 		bl	disk_write
 9358              	.LVL1118:
4577:DRIVER/FatFs/source/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
 9359              		.loc 1 4577 8 view .LVU3237
 9360 017a 20B9     		cbnz	r0, .L703
4577:DRIVER/FatFs/source/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
 9361              		.loc 1 4577 85 is_stmt 1 discriminator 2 view .LVU3238
4578:DRIVER/FatFs/source/ff.c **** 			}
 9362              		.loc 1 4578 5 discriminator 2 view .LVU3239
4578:DRIVER/FatFs/source/ff.c **** 			}
 9363              		.loc 1 4578 7 is_stmt 0 discriminator 2 view .LVU3240
 9364 017c 237C     		ldrb	r3, [r4, #16]	@ zero_extendqisi2
4578:DRIVER/FatFs/source/ff.c **** 			}
 9365              		.loc 1 4578 14 discriminator 2 view .LVU3241
 9366 017e 03F07F03 		and	r3, r3, #127
 9367 0182 2374     		strb	r3, [r4, #16]
 9368 0184 8AE7     		b	.L689
 9369              	.L703:
4577:DRIVER/FatFs/source/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
 9370              		.loc 1 4577 63 is_stmt 1 discriminator 1 view .LVU3242
 9371 0186 4FF00108 		mov	r8, #1
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 317


 9372              	.LVL1119:
4577:DRIVER/FatFs/source/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
 9373              		.loc 1 4577 63 is_stmt 0 discriminator 1 view .LVU3243
 9374 018a 84F81180 		strb	r8, [r4, #17]
4577:DRIVER/FatFs/source/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
 9375              		.loc 1 4577 63 is_stmt 1 discriminator 1 view .LVU3244
 9376 018e 90E7     		b	.L671
 9377              	.LVL1120:
 9378              	.L698:
4581:DRIVER/FatFs/source/ff.c **** #endif
 9379              		.loc 1 4581 58 discriminator 1 view .LVU3245
 9380 0190 4FF00108 		mov	r8, #1
 9381              	.LVL1121:
4581:DRIVER/FatFs/source/ff.c **** #endif
 9382              		.loc 1 4581 58 is_stmt 0 discriminator 1 view .LVU3246
 9383 0194 84F81180 		strb	r8, [r4, #17]
4581:DRIVER/FatFs/source/ff.c **** #endif
 9384              		.loc 1 4581 58 is_stmt 1 discriminator 1 view .LVU3247
 9385 0198 8BE7     		b	.L671
 9386              		.cfi_endproc
 9387              	.LFE45:
 9389              		.section	.text.f_opendir,"ax",%progbits
 9390              		.align	1
 9391              		.global	f_opendir
 9392              		.syntax unified
 9393              		.thumb
 9394              		.thumb_func
 9396              	f_opendir:
 9397              	.LVL1122:
 9398              	.LFB46:
4601:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
 9399              		.loc 1 4601 1 view -0
 9400              		.cfi_startproc
 9401              		@ args = 0, pretend = 0, frame = 528
 9402              		@ frame_needed = 0, uses_anonymous_args = 0
4601:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
 9403              		.loc 1 4601 1 is_stmt 0 view .LVU3249
 9404 0000 10B5     		push	{r4, lr}
 9405              	.LCFI77:
 9406              		.cfi_def_cfa_offset 8
 9407              		.cfi_offset 4, -8
 9408              		.cfi_offset 14, -4
 9409 0002 ADF5047D 		sub	sp, sp, #528
 9410              	.LCFI78:
 9411              		.cfi_def_cfa_offset 536
 9412 0006 0191     		str	r1, [sp, #4]
4602:DRIVER/FatFs/source/ff.c **** 	FATFS *fs;
 9413              		.loc 1 4602 2 is_stmt 1 view .LVU3250
4603:DRIVER/FatFs/source/ff.c **** 	DEF_NAMBUF
 9414              		.loc 1 4603 2 view .LVU3251
4604:DRIVER/FatFs/source/ff.c **** 
 9415              		.loc 1 4604 2 view .LVU3252
4607:DRIVER/FatFs/source/ff.c **** 
 9416              		.loc 1 4607 2 view .LVU3253
4607:DRIVER/FatFs/source/ff.c **** 
 9417              		.loc 1 4607 5 is_stmt 0 view .LVU3254
 9418 0008 0028     		cmp	r0, #0
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 318


 9419 000a 35D0     		beq	.L709
 9420 000c 0446     		mov	r4, r0
4610:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
 9421              		.loc 1 4610 2 is_stmt 1 view .LVU3255
4610:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
 9422              		.loc 1 4610 8 is_stmt 0 view .LVU3256
 9423 000e 0022     		movs	r2, #0
 9424 0010 83A9     		add	r1, sp, #524
 9425              	.LVL1123:
4610:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
 9426              		.loc 1 4610 8 view .LVU3257
 9427 0012 01A8     		add	r0, sp, #4
 9428              	.LVL1124:
4610:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
 9429              		.loc 1 4610 8 view .LVU3258
 9430 0014 FFF7FEFF 		bl	mount_volume
 9431              	.LVL1125:
4611:DRIVER/FatFs/source/ff.c **** 		dp->obj.fs = fs;
 9432              		.loc 1 4611 2 is_stmt 1 view .LVU3259
4611:DRIVER/FatFs/source/ff.c **** 		dp->obj.fs = fs;
 9433              		.loc 1 4611 5 is_stmt 0 view .LVU3260
 9434 0018 0346     		mov	r3, r0
 9435 001a 28B1     		cbz	r0, .L713
 9436              	.LVL1126:
 9437              	.L706:
4651:DRIVER/FatFs/source/ff.c **** 
 9438              		.loc 1 4651 20 is_stmt 1 discriminator 1 view .LVU3261
4651:DRIVER/FatFs/source/ff.c **** 
 9439              		.loc 1 4651 31 is_stmt 0 discriminator 1 view .LVU3262
 9440 001c 0022     		movs	r2, #0
 9441 001e 2260     		str	r2, [r4]
 9442              	.LVL1127:
 9443              	.L705:
4654:DRIVER/FatFs/source/ff.c **** 
 9444              		.loc 1 4654 1 view .LVU3263
 9445 0020 1846     		mov	r0, r3
 9446 0022 0DF5047D 		add	sp, sp, #528
 9447              	.LCFI79:
 9448              		.cfi_remember_state
 9449              		.cfi_def_cfa_offset 8
 9450              		@ sp needed
 9451 0026 10BD     		pop	{r4, pc}
 9452              	.LVL1128:
 9453              	.L713:
 9454              	.LCFI80:
 9455              		.cfi_restore_state
4612:DRIVER/FatFs/source/ff.c **** 		INIT_NAMBUF(fs);
 9456              		.loc 1 4612 3 is_stmt 1 view .LVU3264
4612:DRIVER/FatFs/source/ff.c **** 		INIT_NAMBUF(fs);
 9457              		.loc 1 4612 14 is_stmt 0 view .LVU3265
 9458 0028 839B     		ldr	r3, [sp, #524]
 9459 002a 2360     		str	r3, [r4]
4613:DRIVER/FatFs/source/ff.c **** 		res = follow_path(dp, path);			/* Follow the path to the directory */
 9460              		.loc 1 4613 3 is_stmt 1 view .LVU3266
 9461 002c 03AA     		add	r2, sp, #12
 9462 002e 1A61     		str	r2, [r3, #16]
4613:DRIVER/FatFs/source/ff.c **** 		res = follow_path(dp, path);			/* Follow the path to the directory */
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 319


 9463              		.loc 1 4613 18 view .LVU3267
4614:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK) {						/* Follow completed */
 9464              		.loc 1 4614 3 view .LVU3268
4614:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK) {						/* Follow completed */
 9465              		.loc 1 4614 9 is_stmt 0 view .LVU3269
 9466 0030 0199     		ldr	r1, [sp, #4]
 9467 0032 2046     		mov	r0, r4
 9468              	.LVL1129:
4614:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK) {						/* Follow completed */
 9469              		.loc 1 4614 9 view .LVU3270
 9470 0034 FFF7FEFF 		bl	follow_path
 9471              	.LVL1130:
4615:DRIVER/FatFs/source/ff.c **** 			if (!(dp->fn[NSFLAG] & NS_NONAME)) {	/* It is not the origin directory itself */
 9472              		.loc 1 4615 3 is_stmt 1 view .LVU3271
4615:DRIVER/FatFs/source/ff.c **** 			if (!(dp->fn[NSFLAG] & NS_NONAME)) {	/* It is not the origin directory itself */
 9473              		.loc 1 4615 6 is_stmt 0 view .LVU3272
 9474 0038 0346     		mov	r3, r0
 9475 003a A0B9     		cbnz	r0, .L707
4616:DRIVER/FatFs/source/ff.c **** 				if (dp->obj.attr & AM_DIR) {		/* This object is a sub-directory */
 9476              		.loc 1 4616 4 is_stmt 1 view .LVU3273
4616:DRIVER/FatFs/source/ff.c **** 				if (dp->obj.attr & AM_DIR) {		/* This object is a sub-directory */
 9477              		.loc 1 4616 8 is_stmt 0 view .LVU3274
 9478 003c 94F92B30 		ldrsb	r3, [r4, #43]
4616:DRIVER/FatFs/source/ff.c **** 				if (dp->obj.attr & AM_DIR) {		/* This object is a sub-directory */
 9479              		.loc 1 4616 7 view .LVU3275
 9480 0040 002B     		cmp	r3, #0
 9481 0042 08DB     		blt	.L708
4617:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
 9482              		.loc 1 4617 5 is_stmt 1 view .LVU3276
4617:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
 9483              		.loc 1 4617 16 is_stmt 0 view .LVU3277
 9484 0044 A379     		ldrb	r3, [r4, #6]	@ zero_extendqisi2
4617:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
 9485              		.loc 1 4617 8 view .LVU3278
 9486 0046 13F0100F 		tst	r3, #16
 9487 004a 11D0     		beq	.L710
4627:DRIVER/FatFs/source/ff.c **** 					}
 9488              		.loc 1 4627 7 is_stmt 1 view .LVU3279
4627:DRIVER/FatFs/source/ff.c **** 					}
 9489              		.loc 1 4627 24 is_stmt 0 view .LVU3280
 9490 004c E169     		ldr	r1, [r4, #28]
 9491 004e 8398     		ldr	r0, [sp, #524]
 9492              	.LVL1131:
4627:DRIVER/FatFs/source/ff.c **** 					}
 9493              		.loc 1 4627 24 view .LVU3281
 9494 0050 FFF7FEFF 		bl	ld_clust
 9495              	.LVL1132:
4627:DRIVER/FatFs/source/ff.c **** 					}
 9496              		.loc 1 4627 22 view .LVU3282
 9497 0054 A060     		str	r0, [r4, #8]
 9498              	.L708:
4633:DRIVER/FatFs/source/ff.c **** 				dp->obj.id = fs->id;
 9499              		.loc 1 4633 4 is_stmt 1 view .LVU3283
4634:DRIVER/FatFs/source/ff.c **** 				res = dir_sdi(dp, 0);			/* Rewind directory */
 9500              		.loc 1 4634 5 view .LVU3284
4634:DRIVER/FatFs/source/ff.c **** 				res = dir_sdi(dp, 0);			/* Rewind directory */
 9501              		.loc 1 4634 20 is_stmt 0 view .LVU3285
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 320


 9502 0056 839B     		ldr	r3, [sp, #524]
 9503 0058 DB88     		ldrh	r3, [r3, #6]
4634:DRIVER/FatFs/source/ff.c **** 				res = dir_sdi(dp, 0);			/* Rewind directory */
 9504              		.loc 1 4634 16 view .LVU3286
 9505 005a A380     		strh	r3, [r4, #4]	@ movhi
4635:DRIVER/FatFs/source/ff.c **** #if FF_FS_LOCK
 9506              		.loc 1 4635 5 is_stmt 1 view .LVU3287
4635:DRIVER/FatFs/source/ff.c **** #if FF_FS_LOCK
 9507              		.loc 1 4635 11 is_stmt 0 view .LVU3288
 9508 005c 0021     		movs	r1, #0
 9509 005e 2046     		mov	r0, r4
 9510 0060 FFF7FEFF 		bl	dir_sdi
 9511              	.LVL1133:
 9512 0064 0346     		mov	r3, r0
 9513              	.LVL1134:
 9514              	.L707:
4648:DRIVER/FatFs/source/ff.c **** 		if (res == FR_NO_FILE) res = FR_NO_PATH;
 9515              		.loc 1 4648 16 is_stmt 1 view .LVU3289
4649:DRIVER/FatFs/source/ff.c **** 	}
 9516              		.loc 1 4649 3 view .LVU3290
4649:DRIVER/FatFs/source/ff.c **** 	}
 9517              		.loc 1 4649 6 is_stmt 0 view .LVU3291
 9518 0066 042B     		cmp	r3, #4
 9519 0068 04D0     		beq	.L711
4651:DRIVER/FatFs/source/ff.c **** 
 9520              		.loc 1 4651 2 is_stmt 1 view .LVU3292
4651:DRIVER/FatFs/source/ff.c **** 
 9521              		.loc 1 4651 5 is_stmt 0 view .LVU3293
 9522 006a 002B     		cmp	r3, #0
 9523 006c D8D0     		beq	.L705
 9524 006e D5E7     		b	.L706
 9525              	.LVL1135:
 9526              	.L710:
4630:DRIVER/FatFs/source/ff.c **** 				}
 9527              		.loc 1 4630 10 view .LVU3294
 9528 0070 0523     		movs	r3, #5
 9529 0072 F8E7     		b	.L707
 9530              	.LVL1136:
 9531              	.L711:
4649:DRIVER/FatFs/source/ff.c **** 	}
 9532              		.loc 1 4649 30 view .LVU3295
 9533 0074 0523     		movs	r3, #5
 9534 0076 D1E7     		b	.L706
 9535              	.LVL1137:
 9536              	.L709:
4607:DRIVER/FatFs/source/ff.c **** 
 9537              		.loc 1 4607 18 view .LVU3296
 9538 0078 0923     		movs	r3, #9
 9539 007a D1E7     		b	.L705
 9540              		.cfi_endproc
 9541              	.LFE46:
 9543              		.section	.text.f_closedir,"ax",%progbits
 9544              		.align	1
 9545              		.global	f_closedir
 9546              		.syntax unified
 9547              		.thumb
 9548              		.thumb_func
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 321


 9550              	f_closedir:
 9551              	.LVL1138:
 9552              	.LFB47:
4666:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
 9553              		.loc 1 4666 1 is_stmt 1 view -0
 9554              		.cfi_startproc
 9555              		@ args = 0, pretend = 0, frame = 8
 9556              		@ frame_needed = 0, uses_anonymous_args = 0
4666:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
 9557              		.loc 1 4666 1 is_stmt 0 view .LVU3298
 9558 0000 10B5     		push	{r4, lr}
 9559              	.LCFI81:
 9560              		.cfi_def_cfa_offset 8
 9561              		.cfi_offset 4, -8
 9562              		.cfi_offset 14, -4
 9563 0002 82B0     		sub	sp, sp, #8
 9564              	.LCFI82:
 9565              		.cfi_def_cfa_offset 16
 9566 0004 0446     		mov	r4, r0
4667:DRIVER/FatFs/source/ff.c **** 	FATFS *fs;
 9567              		.loc 1 4667 2 is_stmt 1 view .LVU3299
4668:DRIVER/FatFs/source/ff.c **** 
 9568              		.loc 1 4668 2 view .LVU3300
4671:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
 9569              		.loc 1 4671 2 view .LVU3301
4671:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
 9570              		.loc 1 4671 8 is_stmt 0 view .LVU3302
 9571 0006 01A9     		add	r1, sp, #4
 9572 0008 FFF7FEFF 		bl	validate
 9573              	.LVL1139:
4672:DRIVER/FatFs/source/ff.c **** #if FF_FS_LOCK
 9574              		.loc 1 4672 2 is_stmt 1 view .LVU3303
4672:DRIVER/FatFs/source/ff.c **** #if FF_FS_LOCK
 9575              		.loc 1 4672 5 is_stmt 0 view .LVU3304
 9576 000c 00B9     		cbnz	r0, .L715
4677:DRIVER/FatFs/source/ff.c **** #endif
 9577              		.loc 1 4677 3 is_stmt 1 view .LVU3305
4677:DRIVER/FatFs/source/ff.c **** #endif
 9578              		.loc 1 4677 14 is_stmt 0 view .LVU3306
 9579 000e 2060     		str	r0, [r4]
 9580              	.L715:
4683:DRIVER/FatFs/source/ff.c **** }
 9581              		.loc 1 4683 2 is_stmt 1 view .LVU3307
4684:DRIVER/FatFs/source/ff.c **** 
 9582              		.loc 1 4684 1 is_stmt 0 view .LVU3308
 9583 0010 02B0     		add	sp, sp, #8
 9584              	.LCFI83:
 9585              		.cfi_def_cfa_offset 8
 9586              		@ sp needed
 9587 0012 10BD     		pop	{r4, pc}
4684:DRIVER/FatFs/source/ff.c **** 
 9588              		.loc 1 4684 1 view .LVU3309
 9589              		.cfi_endproc
 9590              	.LFE47:
 9592              		.section	.text.f_readdir,"ax",%progbits
 9593              		.align	1
 9594              		.global	f_readdir
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 322


 9595              		.syntax unified
 9596              		.thumb
 9597              		.thumb_func
 9599              	f_readdir:
 9600              	.LVL1140:
 9601              	.LFB48:
4697:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
 9602              		.loc 1 4697 1 is_stmt 1 view -0
 9603              		.cfi_startproc
 9604              		@ args = 0, pretend = 0, frame = 520
 9605              		@ frame_needed = 0, uses_anonymous_args = 0
4697:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
 9606              		.loc 1 4697 1 is_stmt 0 view .LVU3311
 9607 0000 70B5     		push	{r4, r5, r6, lr}
 9608              	.LCFI84:
 9609              		.cfi_def_cfa_offset 16
 9610              		.cfi_offset 4, -16
 9611              		.cfi_offset 5, -12
 9612              		.cfi_offset 6, -8
 9613              		.cfi_offset 14, -4
 9614 0002 ADF5027D 		sub	sp, sp, #520
 9615              	.LCFI85:
 9616              		.cfi_def_cfa_offset 536
 9617 0006 0546     		mov	r5, r0
 9618 0008 0C46     		mov	r4, r1
4698:DRIVER/FatFs/source/ff.c **** 	FATFS *fs;
 9619              		.loc 1 4698 2 is_stmt 1 view .LVU3312
4699:DRIVER/FatFs/source/ff.c **** 	DEF_NAMBUF
 9620              		.loc 1 4699 2 view .LVU3313
4700:DRIVER/FatFs/source/ff.c **** 
 9621              		.loc 1 4700 2 view .LVU3314
4703:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
 9622              		.loc 1 4703 2 view .LVU3315
4703:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
 9623              		.loc 1 4703 8 is_stmt 0 view .LVU3316
 9624 000a 81A9     		add	r1, sp, #516
 9625              	.LVL1141:
4703:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
 9626              		.loc 1 4703 8 view .LVU3317
 9627 000c FFF7FEFF 		bl	validate
 9628              	.LVL1142:
4704:DRIVER/FatFs/source/ff.c **** 		if (!fno) {
 9629              		.loc 1 4704 2 is_stmt 1 view .LVU3318
4704:DRIVER/FatFs/source/ff.c **** 		if (!fno) {
 9630              		.loc 1 4704 5 is_stmt 0 view .LVU3319
 9631 0010 0646     		mov	r6, r0
 9632 0012 D8B9     		cbnz	r0, .L718
4705:DRIVER/FatFs/source/ff.c **** 			res = dir_sdi(dp, 0);		/* Rewind the directory object */
 9633              		.loc 1 4705 3 is_stmt 1 view .LVU3320
4705:DRIVER/FatFs/source/ff.c **** 			res = dir_sdi(dp, 0);		/* Rewind the directory object */
 9634              		.loc 1 4705 6 is_stmt 0 view .LVU3321
 9635 0014 ACB1     		cbz	r4, .L723
4708:DRIVER/FatFs/source/ff.c **** 			res = DIR_READ_FILE(dp);		/* Read an item */
 9636              		.loc 1 4708 4 is_stmt 1 view .LVU3322
 9637 0016 819B     		ldr	r3, [sp, #516]
 9638 0018 01AA     		add	r2, sp, #4
 9639 001a 1A61     		str	r2, [r3, #16]
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 323


4708:DRIVER/FatFs/source/ff.c **** 			res = DIR_READ_FILE(dp);		/* Read an item */
 9640              		.loc 1 4708 19 view .LVU3323
4709:DRIVER/FatFs/source/ff.c **** 			if (res == FR_NO_FILE) res = FR_OK;	/* Ignore end of directory */
 9641              		.loc 1 4709 4 view .LVU3324
4709:DRIVER/FatFs/source/ff.c **** 			if (res == FR_NO_FILE) res = FR_OK;	/* Ignore end of directory */
 9642              		.loc 1 4709 10 is_stmt 0 view .LVU3325
 9643 001c 0021     		movs	r1, #0
 9644 001e 2846     		mov	r0, r5
 9645              	.LVL1143:
4709:DRIVER/FatFs/source/ff.c **** 			if (res == FR_NO_FILE) res = FR_OK;	/* Ignore end of directory */
 9646              		.loc 1 4709 10 view .LVU3326
 9647 0020 FFF7FEFF 		bl	dir_read
 9648              	.LVL1144:
4710:DRIVER/FatFs/source/ff.c **** 			if (res == FR_OK) {				/* A valid entry is found */
 9649              		.loc 1 4710 4 is_stmt 1 view .LVU3327
4710:DRIVER/FatFs/source/ff.c **** 			if (res == FR_OK) {				/* A valid entry is found */
 9650              		.loc 1 4710 7 is_stmt 0 view .LVU3328
 9651 0024 0428     		cmp	r0, #4
 9652 0026 00D0     		beq	.L720
4711:DRIVER/FatFs/source/ff.c **** 				get_fileinfo(dp, fno);		/* Get the object information */
 9653              		.loc 1 4711 4 is_stmt 1 view .LVU3329
4711:DRIVER/FatFs/source/ff.c **** 				get_fileinfo(dp, fno);		/* Get the object information */
 9654              		.loc 1 4711 7 is_stmt 0 view .LVU3330
 9655 0028 A0B9     		cbnz	r0, .L721
 9656              	.L720:
 9657              	.LVL1145:
4712:DRIVER/FatFs/source/ff.c **** 				res = dir_next(dp, 0);		/* Increment index for next */
 9658              		.loc 1 4712 5 is_stmt 1 view .LVU3331
 9659 002a 2146     		mov	r1, r4
 9660 002c 2846     		mov	r0, r5
 9661 002e FFF7FEFF 		bl	get_fileinfo
 9662              	.LVL1146:
4713:DRIVER/FatFs/source/ff.c **** 				if (res == FR_NO_FILE) res = FR_OK;	/* Ignore end of directory now */
 9663              		.loc 1 4713 5 view .LVU3332
4713:DRIVER/FatFs/source/ff.c **** 				if (res == FR_NO_FILE) res = FR_OK;	/* Ignore end of directory now */
 9664              		.loc 1 4713 11 is_stmt 0 view .LVU3333
 9665 0032 0021     		movs	r1, #0
 9666 0034 2846     		mov	r0, r5
 9667 0036 FFF7FEFF 		bl	dir_next
 9668              	.LVL1147:
4714:DRIVER/FatFs/source/ff.c **** 			}
 9669              		.loc 1 4714 5 is_stmt 1 view .LVU3334
4714:DRIVER/FatFs/source/ff.c **** 			}
 9670              		.loc 1 4714 8 is_stmt 0 view .LVU3335
 9671 003a 0428     		cmp	r0, #4
 9672 003c 06D0     		beq	.L718
4713:DRIVER/FatFs/source/ff.c **** 				if (res == FR_NO_FILE) res = FR_OK;	/* Ignore end of directory now */
 9673              		.loc 1 4713 11 view .LVU3336
 9674 003e 0646     		mov	r6, r0
 9675 0040 04E0     		b	.L718
 9676              	.L723:
4706:DRIVER/FatFs/source/ff.c **** 		} else {
 9677              		.loc 1 4706 4 is_stmt 1 view .LVU3337
4706:DRIVER/FatFs/source/ff.c **** 		} else {
 9678              		.loc 1 4706 10 is_stmt 0 view .LVU3338
 9679 0042 0021     		movs	r1, #0
 9680 0044 2846     		mov	r0, r5
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 324


 9681              	.LVL1148:
4706:DRIVER/FatFs/source/ff.c **** 		} else {
 9682              		.loc 1 4706 10 view .LVU3339
 9683 0046 FFF7FEFF 		bl	dir_sdi
 9684              	.LVL1149:
 9685 004a 0646     		mov	r6, r0
 9686              	.LVL1150:
 9687              	.L718:
4716:DRIVER/FatFs/source/ff.c **** 		}
 9688              		.loc 1 4716 17 is_stmt 1 view .LVU3340
4719:DRIVER/FatFs/source/ff.c **** }
 9689              		.loc 1 4719 2 view .LVU3341
4720:DRIVER/FatFs/source/ff.c **** 
 9690              		.loc 1 4720 1 is_stmt 0 view .LVU3342
 9691 004c 3046     		mov	r0, r6
 9692 004e 0DF5027D 		add	sp, sp, #520
 9693              	.LCFI86:
 9694              		.cfi_remember_state
 9695              		.cfi_def_cfa_offset 16
 9696              		@ sp needed
 9697 0052 70BD     		pop	{r4, r5, r6, pc}
 9698              	.LVL1151:
 9699              	.L721:
 9700              	.LCFI87:
 9701              		.cfi_restore_state
4709:DRIVER/FatFs/source/ff.c **** 			if (res == FR_NO_FILE) res = FR_OK;	/* Ignore end of directory */
 9702              		.loc 1 4709 10 view .LVU3343
 9703 0054 0646     		mov	r6, r0
 9704 0056 F9E7     		b	.L718
 9705              		.cfi_endproc
 9706              	.LFE48:
 9708              		.section	.text.f_stat,"ax",%progbits
 9709              		.align	1
 9710              		.global	f_stat
 9711              		.syntax unified
 9712              		.thumb
 9713              		.thumb_func
 9715              	f_stat:
 9716              	.LVL1152:
 9717              	.LFB49:
4785:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
 9718              		.loc 1 4785 1 is_stmt 1 view -0
 9719              		.cfi_startproc
 9720              		@ args = 0, pretend = 0, frame = 568
 9721              		@ frame_needed = 0, uses_anonymous_args = 0
4785:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
 9722              		.loc 1 4785 1 is_stmt 0 view .LVU3345
 9723 0000 30B5     		push	{r4, r5, lr}
 9724              	.LCFI88:
 9725              		.cfi_def_cfa_offset 12
 9726              		.cfi_offset 4, -12
 9727              		.cfi_offset 5, -8
 9728              		.cfi_offset 14, -4
 9729 0002 ADF50F7D 		sub	sp, sp, #572
 9730              	.LCFI89:
 9731              		.cfi_def_cfa_offset 584
 9732 0006 0190     		str	r0, [sp, #4]
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 325


 9733 0008 0C46     		mov	r4, r1
4786:DRIVER/FatFs/source/ff.c **** 	DIR dj;
 9734              		.loc 1 4786 2 is_stmt 1 view .LVU3346
4787:DRIVER/FatFs/source/ff.c **** 	DEF_NAMBUF
 9735              		.loc 1 4787 2 view .LVU3347
4788:DRIVER/FatFs/source/ff.c **** 
 9736              		.loc 1 4788 2 view .LVU3348
4792:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
 9737              		.loc 1 4792 2 view .LVU3349
4792:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
 9738              		.loc 1 4792 8 is_stmt 0 view .LVU3350
 9739 000a 0022     		movs	r2, #0
 9740 000c 82A9     		add	r1, sp, #520
 9741              	.LVL1153:
4792:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
 9742              		.loc 1 4792 8 view .LVU3351
 9743 000e 01A8     		add	r0, sp, #4
 9744              	.LVL1154:
4792:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
 9745              		.loc 1 4792 8 view .LVU3352
 9746 0010 FFF7FEFF 		bl	mount_volume
 9747              	.LVL1155:
4793:DRIVER/FatFs/source/ff.c **** 		INIT_NAMBUF(dj.obj.fs);
 9748              		.loc 1 4793 2 is_stmt 1 view .LVU3353
4793:DRIVER/FatFs/source/ff.c **** 		INIT_NAMBUF(dj.obj.fs);
 9749              		.loc 1 4793 5 is_stmt 0 view .LVU3354
 9750 0014 0546     		mov	r5, r0
 9751 0016 18B1     		cbz	r0, .L728
 9752              	.LVL1156:
 9753              	.L725:
4803:DRIVER/FatFs/source/ff.c **** 	}
 9754              		.loc 1 4803 16 is_stmt 1 view .LVU3355
4806:DRIVER/FatFs/source/ff.c **** }
 9755              		.loc 1 4806 2 view .LVU3356
4807:DRIVER/FatFs/source/ff.c **** 
 9756              		.loc 1 4807 1 is_stmt 0 view .LVU3357
 9757 0018 2846     		mov	r0, r5
 9758 001a 0DF50F7D 		add	sp, sp, #572
 9759              	.LCFI90:
 9760              		.cfi_remember_state
 9761              		.cfi_def_cfa_offset 12
 9762              		@ sp needed
 9763 001e 30BD     		pop	{r4, r5, pc}
 9764              	.LVL1157:
 9765              	.L728:
 9766              	.LCFI91:
 9767              		.cfi_restore_state
4794:DRIVER/FatFs/source/ff.c **** 		res = follow_path(&dj, path);	/* Follow the file path */
 9768              		.loc 1 4794 3 is_stmt 1 view .LVU3358
 9769 0020 829B     		ldr	r3, [sp, #520]
 9770 0022 02AA     		add	r2, sp, #8
 9771 0024 1A61     		str	r2, [r3, #16]
4794:DRIVER/FatFs/source/ff.c **** 		res = follow_path(&dj, path);	/* Follow the file path */
 9772              		.loc 1 4794 25 view .LVU3359
4795:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK) {				/* Follow completed */
 9773              		.loc 1 4795 3 view .LVU3360
4795:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK) {				/* Follow completed */
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 326


 9774              		.loc 1 4795 9 is_stmt 0 view .LVU3361
 9775 0026 0199     		ldr	r1, [sp, #4]
 9776 0028 82A8     		add	r0, sp, #520
 9777              	.LVL1158:
4795:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK) {				/* Follow completed */
 9778              		.loc 1 4795 9 view .LVU3362
 9779 002a FFF7FEFF 		bl	follow_path
 9780              	.LVL1159:
4796:DRIVER/FatFs/source/ff.c **** 			if (dj.fn[NSFLAG] & NS_NONAME) {	/* It is origin directory */
 9781              		.loc 1 4796 3 is_stmt 1 view .LVU3363
4796:DRIVER/FatFs/source/ff.c **** 			if (dj.fn[NSFLAG] & NS_NONAME) {	/* It is origin directory */
 9782              		.loc 1 4796 6 is_stmt 0 view .LVU3364
 9783 002e 0546     		mov	r5, r0
 9784 0030 0028     		cmp	r0, #0
 9785 0032 F1D1     		bne	.L725
4797:DRIVER/FatFs/source/ff.c **** 				res = FR_INVALID_NAME;
 9786              		.loc 1 4797 4 is_stmt 1 view .LVU3365
4797:DRIVER/FatFs/source/ff.c **** 				res = FR_INVALID_NAME;
 9787              		.loc 1 4797 8 is_stmt 0 view .LVU3366
 9788 0034 9DF93332 		ldrsb	r3, [sp, #563]
4797:DRIVER/FatFs/source/ff.c **** 				res = FR_INVALID_NAME;
 9789              		.loc 1 4797 7 view .LVU3367
 9790 0038 002B     		cmp	r3, #0
 9791 003a 06DB     		blt	.L726
4800:DRIVER/FatFs/source/ff.c **** 			}
 9792              		.loc 1 4800 5 is_stmt 1 view .LVU3368
4800:DRIVER/FatFs/source/ff.c **** 			}
 9793              		.loc 1 4800 8 is_stmt 0 view .LVU3369
 9794 003c 002C     		cmp	r4, #0
 9795 003e EBD0     		beq	.L725
4800:DRIVER/FatFs/source/ff.c **** 			}
 9796              		.loc 1 4800 14 is_stmt 1 discriminator 1 view .LVU3370
 9797 0040 2146     		mov	r1, r4
 9798 0042 82A8     		add	r0, sp, #520
 9799              	.LVL1160:
4800:DRIVER/FatFs/source/ff.c **** 			}
 9800              		.loc 1 4800 14 is_stmt 0 discriminator 1 view .LVU3371
 9801 0044 FFF7FEFF 		bl	get_fileinfo
 9802              	.LVL1161:
 9803 0048 E6E7     		b	.L725
 9804              	.LVL1162:
 9805              	.L726:
4798:DRIVER/FatFs/source/ff.c **** 			} else {							/* Found an object */
 9806              		.loc 1 4798 9 view .LVU3372
 9807 004a 0625     		movs	r5, #6
 9808 004c E4E7     		b	.L725
 9809              		.cfi_endproc
 9810              	.LFE49:
 9812              		.section	.text.f_getfree,"ax",%progbits
 9813              		.align	1
 9814              		.global	f_getfree
 9815              		.syntax unified
 9816              		.thumb
 9817              		.thumb_func
 9819              	f_getfree:
 9820              	.LVL1163:
 9821              	.LFB50:
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 327


4821:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
 9822              		.loc 1 4821 1 is_stmt 1 view -0
 9823              		.cfi_startproc
 9824              		@ args = 0, pretend = 0, frame = 32
 9825              		@ frame_needed = 0, uses_anonymous_args = 0
4821:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
 9826              		.loc 1 4821 1 is_stmt 0 view .LVU3374
 9827 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 9828              	.LCFI92:
 9829              		.cfi_def_cfa_offset 32
 9830              		.cfi_offset 4, -32
 9831              		.cfi_offset 5, -28
 9832              		.cfi_offset 6, -24
 9833              		.cfi_offset 7, -20
 9834              		.cfi_offset 8, -16
 9835              		.cfi_offset 9, -12
 9836              		.cfi_offset 10, -8
 9837              		.cfi_offset 14, -4
 9838 0004 88B0     		sub	sp, sp, #32
 9839              	.LCFI93:
 9840              		.cfi_def_cfa_offset 64
 9841 0006 0190     		str	r0, [sp, #4]
 9842 0008 0F46     		mov	r7, r1
 9843 000a 1446     		mov	r4, r2
4822:DRIVER/FatFs/source/ff.c **** 	FATFS *fs;
 9844              		.loc 1 4822 2 is_stmt 1 view .LVU3375
4823:DRIVER/FatFs/source/ff.c **** 	DWORD nfree, clst, stat;
 9845              		.loc 1 4823 2 view .LVU3376
4824:DRIVER/FatFs/source/ff.c **** 	LBA_t sect;
 9846              		.loc 1 4824 2 view .LVU3377
4825:DRIVER/FatFs/source/ff.c **** 	UINT i;
 9847              		.loc 1 4825 2 view .LVU3378
4826:DRIVER/FatFs/source/ff.c **** 	FFOBJID obj;
 9848              		.loc 1 4826 2 view .LVU3379
4827:DRIVER/FatFs/source/ff.c **** 
 9849              		.loc 1 4827 2 view .LVU3380
4831:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
 9850              		.loc 1 4831 2 view .LVU3381
4831:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
 9851              		.loc 1 4831 8 is_stmt 0 view .LVU3382
 9852 000c 0022     		movs	r2, #0
 9853              	.LVL1164:
4831:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
 9854              		.loc 1 4831 8 view .LVU3383
 9855 000e 07A9     		add	r1, sp, #28
 9856              	.LVL1165:
4831:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
 9857              		.loc 1 4831 8 view .LVU3384
 9858 0010 01A8     		add	r0, sp, #4
 9859              	.LVL1166:
4831:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
 9860              		.loc 1 4831 8 view .LVU3385
 9861 0012 FFF7FEFF 		bl	mount_volume
 9862              	.LVL1167:
4832:DRIVER/FatFs/source/ff.c **** 		*fatfs = fs;				/* Return ptr to the fs object */
 9863              		.loc 1 4832 2 is_stmt 1 view .LVU3386
4832:DRIVER/FatFs/source/ff.c **** 		*fatfs = fs;				/* Return ptr to the fs object */
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 328


 9864              		.loc 1 4832 5 is_stmt 0 view .LVU3387
 9865 0016 8046     		mov	r8, r0
 9866 0018 38B9     		cbnz	r0, .L730
4833:DRIVER/FatFs/source/ff.c **** 		/* If free_clst is valid, return it without full FAT scan */
 9867              		.loc 1 4833 3 is_stmt 1 view .LVU3388
4833:DRIVER/FatFs/source/ff.c **** 		/* If free_clst is valid, return it without full FAT scan */
 9868              		.loc 1 4833 10 is_stmt 0 view .LVU3389
 9869 001a 079B     		ldr	r3, [sp, #28]
 9870 001c 2360     		str	r3, [r4]
4835:DRIVER/FatFs/source/ff.c **** 			*nclst = fs->free_clst;
 9871              		.loc 1 4835 3 is_stmt 1 view .LVU3390
4835:DRIVER/FatFs/source/ff.c **** 			*nclst = fs->free_clst;
 9872              		.loc 1 4835 9 is_stmt 0 view .LVU3391
 9873 001e 9A69     		ldr	r2, [r3, #24]
4835:DRIVER/FatFs/source/ff.c **** 			*nclst = fs->free_clst;
 9874              		.loc 1 4835 26 view .LVU3392
 9875 0020 DD69     		ldr	r5, [r3, #28]
4835:DRIVER/FatFs/source/ff.c **** 			*nclst = fs->free_clst;
 9876              		.loc 1 4835 37 view .LVU3393
 9877 0022 A91E     		subs	r1, r5, #2
4835:DRIVER/FatFs/source/ff.c **** 			*nclst = fs->free_clst;
 9878              		.loc 1 4835 6 view .LVU3394
 9879 0024 8A42     		cmp	r2, r1
 9880 0026 04D8     		bhi	.L731
4836:DRIVER/FatFs/source/ff.c **** 		} else {
 9881              		.loc 1 4836 4 is_stmt 1 view .LVU3395
4836:DRIVER/FatFs/source/ff.c **** 		} else {
 9882              		.loc 1 4836 11 is_stmt 0 view .LVU3396
 9883 0028 3A60     		str	r2, [r7]
 9884              	.LVL1168:
 9885              	.L730:
4902:DRIVER/FatFs/source/ff.c **** }
 9886              		.loc 1 4902 2 is_stmt 1 view .LVU3397
4903:DRIVER/FatFs/source/ff.c **** 
 9887              		.loc 1 4903 1 is_stmt 0 view .LVU3398
 9888 002a 4046     		mov	r0, r8
 9889 002c 08B0     		add	sp, sp, #32
 9890              	.LCFI94:
 9891              		.cfi_remember_state
 9892              		.cfi_def_cfa_offset 32
 9893              		@ sp needed
 9894 002e BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 9895              	.LVL1169:
 9896              	.L731:
 9897              	.LCFI95:
 9898              		.cfi_restore_state
4839:DRIVER/FatFs/source/ff.c **** 			if (fs->fs_type == FS_FAT12) {	/* FAT12: Scan bit field FAT entries */
 9899              		.loc 1 4839 4 is_stmt 1 view .LVU3399
4840:DRIVER/FatFs/source/ff.c **** 				clst = 2; obj.fs = fs;
 9900              		.loc 1 4840 4 view .LVU3400
4840:DRIVER/FatFs/source/ff.c **** 				clst = 2; obj.fs = fs;
 9901              		.loc 1 4840 10 is_stmt 0 view .LVU3401
 9902 0032 93F80090 		ldrb	r9, [r3]	@ zero_extendqisi2
4840:DRIVER/FatFs/source/ff.c **** 				clst = 2; obj.fs = fs;
 9903              		.loc 1 4840 7 view .LVU3402
 9904 0036 B9F1010F 		cmp	r9, #1
 9905 003a 04D0     		beq	.L745
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 329


4875:DRIVER/FatFs/source/ff.c **** 					sect = fs->fatbase;		/* Top of the FAT */
 9906              		.loc 1 4875 6 is_stmt 1 view .LVU3403
 9907              	.LVL1170:
4876:DRIVER/FatFs/source/ff.c **** 					i = 0;					/* Offset in the sector */
 9908              		.loc 1 4876 6 view .LVU3404
4876:DRIVER/FatFs/source/ff.c **** 					i = 0;					/* Offset in the sector */
 9909              		.loc 1 4876 11 is_stmt 0 view .LVU3405
 9910 003c D3F82890 		ldr	r9, [r3, #40]
 9911              	.LVL1171:
4877:DRIVER/FatFs/source/ff.c **** 					do {	/* Counts numbuer of entries with zero in the FAT */
 9912              		.loc 1 4877 6 is_stmt 1 view .LVU3406
4877:DRIVER/FatFs/source/ff.c **** 					do {	/* Counts numbuer of entries with zero in the FAT */
 9913              		.loc 1 4877 8 is_stmt 0 view .LVU3407
 9914 0040 0024     		movs	r4, #0
 9915              	.LVL1172:
4839:DRIVER/FatFs/source/ff.c **** 			if (fs->fs_type == FS_FAT12) {	/* FAT12: Scan bit field FAT entries */
 9916              		.loc 1 4839 10 view .LVU3408
 9917 0042 2646     		mov	r6, r4
 9918 0044 31E0     		b	.L741
 9919              	.LVL1173:
 9920              	.L745:
4841:DRIVER/FatFs/source/ff.c **** 				do {
 9921              		.loc 1 4841 5 is_stmt 1 view .LVU3409
4841:DRIVER/FatFs/source/ff.c **** 				do {
 9922              		.loc 1 4841 15 view .LVU3410
4841:DRIVER/FatFs/source/ff.c **** 				do {
 9923              		.loc 1 4841 22 is_stmt 0 view .LVU3411
 9924 0046 0393     		str	r3, [sp, #12]
4841:DRIVER/FatFs/source/ff.c **** 				do {
 9925              		.loc 1 4841 10 view .LVU3412
 9926 0048 0224     		movs	r4, #2
 9927              	.LVL1174:
4839:DRIVER/FatFs/source/ff.c **** 			if (fs->fs_type == FS_FAT12) {	/* FAT12: Scan bit field FAT entries */
 9928              		.loc 1 4839 10 view .LVU3413
 9929 004a 0026     		movs	r6, #0
 9930 004c 04E0     		b	.L735
 9931              	.LVL1175:
 9932              	.L734:
4851:DRIVER/FatFs/source/ff.c **** 			} else {
 9933              		.loc 1 4851 21 is_stmt 1 view .LVU3414
 9934 004e 0134     		adds	r4, r4, #1
 9935              	.LVL1176:
4851:DRIVER/FatFs/source/ff.c **** 			} else {
 9936              		.loc 1 4851 25 is_stmt 0 view .LVU3415
 9937 0050 079B     		ldr	r3, [sp, #28]
 9938 0052 DB69     		ldr	r3, [r3, #28]
4851:DRIVER/FatFs/source/ff.c **** 			} else {
 9939              		.loc 1 4851 21 view .LVU3416
 9940 0054 A342     		cmp	r3, r4
 9941 0056 3BD9     		bls	.L733
 9942              	.LVL1177:
 9943              	.L735:
4842:DRIVER/FatFs/source/ff.c **** 					stat = get_fat(&obj, clst);
 9944              		.loc 1 4842 5 is_stmt 1 view .LVU3417
4843:DRIVER/FatFs/source/ff.c **** 					if (stat == 0xFFFFFFFF) {
 9945              		.loc 1 4843 6 view .LVU3418
4843:DRIVER/FatFs/source/ff.c **** 					if (stat == 0xFFFFFFFF) {
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 330


 9946              		.loc 1 4843 13 is_stmt 0 view .LVU3419
 9947 0058 2146     		mov	r1, r4
 9948 005a 03A8     		add	r0, sp, #12
 9949 005c FFF7FEFF 		bl	get_fat
 9950              	.LVL1178:
4844:DRIVER/FatFs/source/ff.c **** 						res = FR_DISK_ERR; break;
 9951              		.loc 1 4844 6 is_stmt 1 view .LVU3420
4844:DRIVER/FatFs/source/ff.c **** 						res = FR_DISK_ERR; break;
 9952              		.loc 1 4844 9 is_stmt 0 view .LVU3421
 9953 0060 B0F1FF3F 		cmp	r0, #-1
 9954 0064 33D0     		beq	.L742
4847:DRIVER/FatFs/source/ff.c **** 						res = FR_INT_ERR; break;
 9955              		.loc 1 4847 6 is_stmt 1 view .LVU3422
4847:DRIVER/FatFs/source/ff.c **** 						res = FR_INT_ERR; break;
 9956              		.loc 1 4847 9 is_stmt 0 view .LVU3423
 9957 0066 0128     		cmp	r0, #1
 9958 0068 3DD0     		beq	.L743
4850:DRIVER/FatFs/source/ff.c **** 				} while (++clst < fs->n_fatent);
 9959              		.loc 1 4850 6 is_stmt 1 view .LVU3424
4850:DRIVER/FatFs/source/ff.c **** 				} while (++clst < fs->n_fatent);
 9960              		.loc 1 4850 9 is_stmt 0 view .LVU3425
 9961 006a 0028     		cmp	r0, #0
 9962 006c EFD1     		bne	.L734
4850:DRIVER/FatFs/source/ff.c **** 				} while (++clst < fs->n_fatent);
 9963              		.loc 1 4850 21 is_stmt 1 discriminator 1 view .LVU3426
4850:DRIVER/FatFs/source/ff.c **** 				} while (++clst < fs->n_fatent);
 9964              		.loc 1 4850 26 is_stmt 0 discriminator 1 view .LVU3427
 9965 006e 0136     		adds	r6, r6, #1
 9966              	.LVL1179:
4850:DRIVER/FatFs/source/ff.c **** 				} while (++clst < fs->n_fatent);
 9967              		.loc 1 4850 26 discriminator 1 view .LVU3428
 9968 0070 EDE7     		b	.L734
 9969              	.LVL1180:
 9970              	.L746:
4880:DRIVER/FatFs/source/ff.c **** 							if (res != FR_OK) break;
 9971              		.loc 1 4880 8 is_stmt 1 view .LVU3429
4880:DRIVER/FatFs/source/ff.c **** 							if (res != FR_OK) break;
 9972              		.loc 1 4880 14 is_stmt 0 view .LVU3430
 9973 0072 09F1010A 		add	r10, r9, #1
 9974              	.LVL1181:
4880:DRIVER/FatFs/source/ff.c **** 							if (res != FR_OK) break;
 9975              		.loc 1 4880 14 view .LVU3431
 9976 0076 4946     		mov	r1, r9
 9977 0078 0798     		ldr	r0, [sp, #28]
 9978 007a FFF7FEFF 		bl	move_window
 9979              	.LVL1182:
4881:DRIVER/FatFs/source/ff.c **** 						}
 9980              		.loc 1 4881 8 is_stmt 1 view .LVU3432
4881:DRIVER/FatFs/source/ff.c **** 						}
 9981              		.loc 1 4881 11 is_stmt 0 view .LVU3433
 9982 007e 8046     		mov	r8, r0
 9983 0080 30BB     		cbnz	r0, .L733
4880:DRIVER/FatFs/source/ff.c **** 							if (res != FR_OK) break;
 9984              		.loc 1 4880 14 view .LVU3434
 9985 0082 D146     		mov	r9, r10
 9986 0084 13E0     		b	.L736
 9987              	.LVL1183:
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 331


 9988              	.L747:
4884:DRIVER/FatFs/source/ff.c **** 							i += 2;
 9989              		.loc 1 4884 8 is_stmt 1 view .LVU3435
4884:DRIVER/FatFs/source/ff.c **** 							i += 2;
 9990              		.loc 1 4884 20 is_stmt 0 view .LVU3436
 9991 0086 0AF13800 		add	r0, r10, #56
4884:DRIVER/FatFs/source/ff.c **** 							i += 2;
 9992              		.loc 1 4884 12 view .LVU3437
 9993 008a 2044     		add	r0, r0, r4
 9994 008c FFF7FEFF 		bl	ld_word
 9995              	.LVL1184:
4884:DRIVER/FatFs/source/ff.c **** 							i += 2;
 9996              		.loc 1 4884 11 view .LVU3438
 9997 0090 00B9     		cbnz	r0, .L738
4884:DRIVER/FatFs/source/ff.c **** 							i += 2;
 9998              		.loc 1 4884 39 is_stmt 1 discriminator 1 view .LVU3439
4884:DRIVER/FatFs/source/ff.c **** 							i += 2;
 9999              		.loc 1 4884 44 is_stmt 0 discriminator 1 view .LVU3440
 10000 0092 0136     		adds	r6, r6, #1
 10001              	.LVL1185:
 10002              	.L738:
4885:DRIVER/FatFs/source/ff.c **** 						} else {
 10003              		.loc 1 4885 8 is_stmt 1 view .LVU3441
4885:DRIVER/FatFs/source/ff.c **** 						} else {
 10004              		.loc 1 4885 10 is_stmt 0 view .LVU3442
 10005 0094 0234     		adds	r4, r4, #2
 10006              	.LVL1186:
4885:DRIVER/FatFs/source/ff.c **** 						} else {
 10007              		.loc 1 4885 10 view .LVU3443
 10008 0096 00E0     		b	.L739
 10009              	.L740:
4888:DRIVER/FatFs/source/ff.c **** 						}
 10010              		.loc 1 4888 8 is_stmt 1 view .LVU3444
4888:DRIVER/FatFs/source/ff.c **** 						}
 10011              		.loc 1 4888 10 is_stmt 0 view .LVU3445
 10012 0098 0434     		adds	r4, r4, #4
 10013              	.LVL1187:
 10014              	.L739:
4890:DRIVER/FatFs/source/ff.c **** 					} while (--clst);
 10015              		.loc 1 4890 7 is_stmt 1 view .LVU3446
4890:DRIVER/FatFs/source/ff.c **** 					} while (--clst);
 10016              		.loc 1 4890 12 is_stmt 0 view .LVU3447
 10017 009a BAF80C30 		ldrh	r3, [r10, #12]
4890:DRIVER/FatFs/source/ff.c **** 					} while (--clst);
 10018              		.loc 1 4890 9 view .LVU3448
 10019 009e B4FBF3F2 		udiv	r2, r4, r3
 10020 00a2 03FB1244 		mls	r4, r3, r2, r4
 10021              	.LVL1188:
4891:DRIVER/FatFs/source/ff.c **** 				}
 10022              		.loc 1 4891 15 is_stmt 1 view .LVU3449
4891:DRIVER/FatFs/source/ff.c **** 				}
 10023              		.loc 1 4891 15 is_stmt 0 view .LVU3450
 10024 00a6 013D     		subs	r5, r5, #1
 10025              	.LVL1189:
4891:DRIVER/FatFs/source/ff.c **** 				}
 10026              		.loc 1 4891 15 view .LVU3451
 10027 00a8 12D0     		beq	.L733
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 332


 10028              	.LVL1190:
 10029              	.L741:
4878:DRIVER/FatFs/source/ff.c **** 						if (i == 0) {	/* New sector? */
 10030              		.loc 1 4878 6 is_stmt 1 view .LVU3452
4879:DRIVER/FatFs/source/ff.c **** 							res = move_window(fs, sect++);
 10031              		.loc 1 4879 7 view .LVU3453
4879:DRIVER/FatFs/source/ff.c **** 							res = move_window(fs, sect++);
 10032              		.loc 1 4879 10 is_stmt 0 view .LVU3454
 10033 00aa 002C     		cmp	r4, #0
 10034 00ac E1D0     		beq	.L746
 10035              	.LVL1191:
 10036              	.L736:
4883:DRIVER/FatFs/source/ff.c **** 							if (ld_word(fs->win + i) == 0) nfree++;
 10037              		.loc 1 4883 7 is_stmt 1 view .LVU3455
4883:DRIVER/FatFs/source/ff.c **** 							if (ld_word(fs->win + i) == 0) nfree++;
 10038              		.loc 1 4883 13 is_stmt 0 view .LVU3456
 10039 00ae DDF81CA0 		ldr	r10, [sp, #28]
 10040 00b2 9AF80030 		ldrb	r3, [r10]	@ zero_extendqisi2
4883:DRIVER/FatFs/source/ff.c **** 							if (ld_word(fs->win + i) == 0) nfree++;
 10041              		.loc 1 4883 10 view .LVU3457
 10042 00b6 022B     		cmp	r3, #2
 10043 00b8 E5D0     		beq	.L747
4887:DRIVER/FatFs/source/ff.c **** 							i += 4;
 10044              		.loc 1 4887 8 is_stmt 1 view .LVU3458
4887:DRIVER/FatFs/source/ff.c **** 							i += 4;
 10045              		.loc 1 4887 22 is_stmt 0 view .LVU3459
 10046 00ba 0AF13800 		add	r0, r10, #56
4887:DRIVER/FatFs/source/ff.c **** 							i += 4;
 10047              		.loc 1 4887 13 view .LVU3460
 10048 00be 2044     		add	r0, r0, r4
 10049 00c0 FFF7FEFF 		bl	ld_dword
 10050              	.LVL1192:
4887:DRIVER/FatFs/source/ff.c **** 							i += 4;
 10051              		.loc 1 4887 11 view .LVU3461
 10052 00c4 30F07043 		bics	r3, r0, #-268435456
 10053 00c8 E6D1     		bne	.L740
4887:DRIVER/FatFs/source/ff.c **** 							i += 4;
 10054              		.loc 1 4887 55 is_stmt 1 discriminator 1 view .LVU3462
4887:DRIVER/FatFs/source/ff.c **** 							i += 4;
 10055              		.loc 1 4887 60 is_stmt 0 discriminator 1 view .LVU3463
 10056 00ca 0136     		adds	r6, r6, #1
 10057              	.LVL1193:
4887:DRIVER/FatFs/source/ff.c **** 							i += 4;
 10058              		.loc 1 4887 60 discriminator 1 view .LVU3464
 10059 00cc E4E7     		b	.L740
 10060              	.LVL1194:
 10061              	.L742:
4845:DRIVER/FatFs/source/ff.c **** 					}
 10062              		.loc 1 4845 11 view .LVU3465
 10063 00ce C846     		mov	r8, r9
 10064              	.LVL1195:
 10065              	.L733:
4894:DRIVER/FatFs/source/ff.c **** 				*nclst = nfree;			/* Return the free clusters */
 10066              		.loc 1 4894 4 is_stmt 1 view .LVU3466
4894:DRIVER/FatFs/source/ff.c **** 				*nclst = nfree;			/* Return the free clusters */
 10067              		.loc 1 4894 7 is_stmt 0 view .LVU3467
 10068 00d0 B8F1000F 		cmp	r8, #0
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 333


 10069 00d4 A9D1     		bne	.L730
4895:DRIVER/FatFs/source/ff.c **** 				fs->free_clst = nfree;	/* Now free_clst is valid */
 10070              		.loc 1 4895 5 is_stmt 1 view .LVU3468
4895:DRIVER/FatFs/source/ff.c **** 				fs->free_clst = nfree;	/* Now free_clst is valid */
 10071              		.loc 1 4895 12 is_stmt 0 view .LVU3469
 10072 00d6 3E60     		str	r6, [r7]
4896:DRIVER/FatFs/source/ff.c **** 				fs->fsi_flag |= 1;		/* FAT32: FSInfo is to be updated */
 10073              		.loc 1 4896 5 is_stmt 1 view .LVU3470
4896:DRIVER/FatFs/source/ff.c **** 				fs->fsi_flag |= 1;		/* FAT32: FSInfo is to be updated */
 10074              		.loc 1 4896 7 is_stmt 0 view .LVU3471
 10075 00d8 079B     		ldr	r3, [sp, #28]
4896:DRIVER/FatFs/source/ff.c **** 				fs->fsi_flag |= 1;		/* FAT32: FSInfo is to be updated */
 10076              		.loc 1 4896 19 view .LVU3472
 10077 00da 9E61     		str	r6, [r3, #24]
4897:DRIVER/FatFs/source/ff.c **** 			}
 10078              		.loc 1 4897 5 is_stmt 1 view .LVU3473
4897:DRIVER/FatFs/source/ff.c **** 			}
 10079              		.loc 1 4897 7 is_stmt 0 view .LVU3474
 10080 00dc 5A79     		ldrb	r2, [r3, #5]	@ zero_extendqisi2
4897:DRIVER/FatFs/source/ff.c **** 			}
 10081              		.loc 1 4897 18 view .LVU3475
 10082 00de 42F00102 		orr	r2, r2, #1
 10083 00e2 5A71     		strb	r2, [r3, #5]
 10084 00e4 A1E7     		b	.L730
 10085              	.LVL1196:
 10086              	.L743:
4848:DRIVER/FatFs/source/ff.c **** 					}
 10087              		.loc 1 4848 11 view .LVU3476
 10088 00e6 4FF00208 		mov	r8, #2
 10089 00ea F1E7     		b	.L733
 10090              		.cfi_endproc
 10091              	.LFE50:
 10093              		.section	.text.f_truncate,"ax",%progbits
 10094              		.align	1
 10095              		.global	f_truncate
 10096              		.syntax unified
 10097              		.thumb
 10098              		.thumb_func
 10100              	f_truncate:
 10101              	.LVL1197:
 10102              	.LFB51:
4915:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
 10103              		.loc 1 4915 1 is_stmt 1 view -0
 10104              		.cfi_startproc
 10105              		@ args = 0, pretend = 0, frame = 8
 10106              		@ frame_needed = 0, uses_anonymous_args = 0
4915:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
 10107              		.loc 1 4915 1 is_stmt 0 view .LVU3478
 10108 0000 30B5     		push	{r4, r5, lr}
 10109              	.LCFI96:
 10110              		.cfi_def_cfa_offset 12
 10111              		.cfi_offset 4, -12
 10112              		.cfi_offset 5, -8
 10113              		.cfi_offset 14, -4
 10114 0002 83B0     		sub	sp, sp, #12
 10115              	.LCFI97:
 10116              		.cfi_def_cfa_offset 24
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 334


 10117 0004 0446     		mov	r4, r0
4916:DRIVER/FatFs/source/ff.c **** 	FATFS *fs;
 10118              		.loc 1 4916 2 is_stmt 1 view .LVU3479
4917:DRIVER/FatFs/source/ff.c **** 	DWORD ncl;
 10119              		.loc 1 4917 2 view .LVU3480
4918:DRIVER/FatFs/source/ff.c **** 
 10120              		.loc 1 4918 2 view .LVU3481
4921:DRIVER/FatFs/source/ff.c **** 	if (res != FR_OK || (res = (FRESULT)fp->err) != FR_OK) LEAVE_FF(fs, res);
 10121              		.loc 1 4921 2 view .LVU3482
4921:DRIVER/FatFs/source/ff.c **** 	if (res != FR_OK || (res = (FRESULT)fp->err) != FR_OK) LEAVE_FF(fs, res);
 10122              		.loc 1 4921 8 is_stmt 0 view .LVU3483
 10123 0006 01A9     		add	r1, sp, #4
 10124 0008 FFF7FEFF 		bl	validate
 10125              	.LVL1198:
4922:DRIVER/FatFs/source/ff.c **** 	if (!(fp->flag & FA_WRITE)) LEAVE_FF(fs, FR_DENIED);	/* Check access mode */
 10126              		.loc 1 4922 2 is_stmt 1 view .LVU3484
4922:DRIVER/FatFs/source/ff.c **** 	if (!(fp->flag & FA_WRITE)) LEAVE_FF(fs, FR_DENIED);	/* Check access mode */
 10127              		.loc 1 4922 5 is_stmt 0 view .LVU3485
 10128 000c 0546     		mov	r5, r0
 10129 000e 0028     		cmp	r0, #0
 10130 0010 49D1     		bne	.L751
4922:DRIVER/FatFs/source/ff.c **** 	if (!(fp->flag & FA_WRITE)) LEAVE_FF(fs, FR_DENIED);	/* Check access mode */
 10131              		.loc 1 4922 27 discriminator 2 view .LVU3486
 10132 0012 657C     		ldrb	r5, [r4, #17]	@ zero_extendqisi2
 10133              	.LVL1199:
4922:DRIVER/FatFs/source/ff.c **** 	if (!(fp->flag & FA_WRITE)) LEAVE_FF(fs, FR_DENIED);	/* Check access mode */
 10134              		.loc 1 4922 19 discriminator 2 view .LVU3487
 10135 0014 002D     		cmp	r5, #0
 10136 0016 46D1     		bne	.L751
4923:DRIVER/FatFs/source/ff.c **** 
 10137              		.loc 1 4923 2 is_stmt 1 view .LVU3488
4923:DRIVER/FatFs/source/ff.c **** 
 10138              		.loc 1 4923 10 is_stmt 0 view .LVU3489
 10139 0018 237C     		ldrb	r3, [r4, #16]	@ zero_extendqisi2
4923:DRIVER/FatFs/source/ff.c **** 
 10140              		.loc 1 4923 5 view .LVU3490
 10141 001a 13F0020F 		tst	r3, #2
 10142 001e 41D0     		beq	.L756
4925:DRIVER/FatFs/source/ff.c **** 		if (fp->fptr == 0) {	/* When set file size to zero, remove entire cluster chain */
 10143              		.loc 1 4925 2 is_stmt 1 view .LVU3491
4925:DRIVER/FatFs/source/ff.c **** 		if (fp->fptr == 0) {	/* When set file size to zero, remove entire cluster chain */
 10144              		.loc 1 4925 8 is_stmt 0 view .LVU3492
 10145 0020 6369     		ldr	r3, [r4, #20]
4925:DRIVER/FatFs/source/ff.c **** 		if (fp->fptr == 0) {	/* When set file size to zero, remove entire cluster chain */
 10146              		.loc 1 4925 24 view .LVU3493
 10147 0022 E268     		ldr	r2, [r4, #12]
4925:DRIVER/FatFs/source/ff.c **** 		if (fp->fptr == 0) {	/* When set file size to zero, remove entire cluster chain */
 10148              		.loc 1 4925 5 view .LVU3494
 10149 0024 9342     		cmp	r3, r2
 10150 0026 3ED2     		bcs	.L751
4926:DRIVER/FatFs/source/ff.c **** 			res = remove_chain(&fp->obj, fp->obj.sclust, 0);
 10151              		.loc 1 4926 3 is_stmt 1 view .LVU3495
4926:DRIVER/FatFs/source/ff.c **** 			res = remove_chain(&fp->obj, fp->obj.sclust, 0);
 10152              		.loc 1 4926 6 is_stmt 0 view .LVU3496
 10153 0028 FBB9     		cbnz	r3, .L752
4927:DRIVER/FatFs/source/ff.c **** 			fp->obj.sclust = 0;
 10154              		.loc 1 4927 4 is_stmt 1 view .LVU3497
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 335


4927:DRIVER/FatFs/source/ff.c **** 			fp->obj.sclust = 0;
 10155              		.loc 1 4927 10 is_stmt 0 view .LVU3498
 10156 002a 0022     		movs	r2, #0
 10157 002c A168     		ldr	r1, [r4, #8]
 10158 002e 2046     		mov	r0, r4
 10159 0030 FFF7FEFF 		bl	remove_chain
 10160              	.LVL1200:
 10161 0034 0546     		mov	r5, r0
 10162              	.LVL1201:
4928:DRIVER/FatFs/source/ff.c **** 		} else {				/* When truncate a part of the file, remove remaining clusters */
 10163              		.loc 1 4928 4 is_stmt 1 view .LVU3499
4928:DRIVER/FatFs/source/ff.c **** 		} else {				/* When truncate a part of the file, remove remaining clusters */
 10164              		.loc 1 4928 19 is_stmt 0 view .LVU3500
 10165 0036 0023     		movs	r3, #0
 10166 0038 A360     		str	r3, [r4, #8]
 10167              	.LVL1202:
 10168              	.L753:
4938:DRIVER/FatFs/source/ff.c **** 		fp->flag |= FA_MODIFIED;
 10169              		.loc 1 4938 3 is_stmt 1 view .LVU3501
4938:DRIVER/FatFs/source/ff.c **** 		fp->flag |= FA_MODIFIED;
 10170              		.loc 1 4938 23 is_stmt 0 view .LVU3502
 10171 003a 6369     		ldr	r3, [r4, #20]
4938:DRIVER/FatFs/source/ff.c **** 		fp->flag |= FA_MODIFIED;
 10172              		.loc 1 4938 19 view .LVU3503
 10173 003c E360     		str	r3, [r4, #12]
4939:DRIVER/FatFs/source/ff.c **** #if !FF_FS_TINY
 10174              		.loc 1 4939 3 is_stmt 1 view .LVU3504
4939:DRIVER/FatFs/source/ff.c **** #if !FF_FS_TINY
 10175              		.loc 1 4939 5 is_stmt 0 view .LVU3505
 10176 003e 237C     		ldrb	r3, [r4, #16]	@ zero_extendqisi2
4939:DRIVER/FatFs/source/ff.c **** #if !FF_FS_TINY
 10177              		.loc 1 4939 12 view .LVU3506
 10178 0040 43F04003 		orr	r3, r3, #64
 10179 0044 2374     		strb	r3, [r4, #16]
4941:DRIVER/FatFs/source/ff.c **** 			if (disk_write(fs->pdrv, fp->buf, fp->sect, 1) != RES_OK) {
 10180              		.loc 1 4941 3 is_stmt 1 view .LVU3507
4941:DRIVER/FatFs/source/ff.c **** 			if (disk_write(fs->pdrv, fp->buf, fp->sect, 1) != RES_OK) {
 10181              		.loc 1 4941 6 is_stmt 0 view .LVU3508
 10182 0046 5DBB     		cbnz	r5, .L755
4941:DRIVER/FatFs/source/ff.c **** 			if (disk_write(fs->pdrv, fp->buf, fp->sect, 1) != RES_OK) {
 10183              		.loc 1 4941 20 discriminator 1 view .LVU3509
 10184 0048 13F0800F 		tst	r3, #128
 10185 004c 2BD0     		beq	.L751
4942:DRIVER/FatFs/source/ff.c **** 				res = FR_DISK_ERR;
 10186              		.loc 1 4942 4 is_stmt 1 view .LVU3510
4942:DRIVER/FatFs/source/ff.c **** 				res = FR_DISK_ERR;
 10187              		.loc 1 4942 8 is_stmt 0 view .LVU3511
 10188 004e 0123     		movs	r3, #1
 10189 0050 E269     		ldr	r2, [r4, #28]
 10190 0052 04F12801 		add	r1, r4, #40
 10191 0056 0198     		ldr	r0, [sp, #4]
 10192 0058 4078     		ldrb	r0, [r0, #1]	@ zero_extendqisi2
 10193 005a FFF7FEFF 		bl	disk_write
 10194              	.LVL1203:
4942:DRIVER/FatFs/source/ff.c **** 				res = FR_DISK_ERR;
 10195              		.loc 1 4942 7 view .LVU3512
 10196 005e F0B9     		cbnz	r0, .L759
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 336


4945:DRIVER/FatFs/source/ff.c **** 			}
 10197              		.loc 1 4945 5 is_stmt 1 view .LVU3513
4945:DRIVER/FatFs/source/ff.c **** 			}
 10198              		.loc 1 4945 7 is_stmt 0 view .LVU3514
 10199 0060 237C     		ldrb	r3, [r4, #16]	@ zero_extendqisi2
4945:DRIVER/FatFs/source/ff.c **** 			}
 10200              		.loc 1 4945 14 view .LVU3515
 10201 0062 03F07F03 		and	r3, r3, #127
 10202 0066 2374     		strb	r3, [r4, #16]
 10203 0068 1DE0     		b	.L751
 10204              	.L752:
4930:DRIVER/FatFs/source/ff.c **** 			res = FR_OK;
 10205              		.loc 1 4930 4 is_stmt 1 view .LVU3516
4930:DRIVER/FatFs/source/ff.c **** 			res = FR_OK;
 10206              		.loc 1 4930 10 is_stmt 0 view .LVU3517
 10207 006a A169     		ldr	r1, [r4, #24]
 10208 006c 2046     		mov	r0, r4
 10209 006e FFF7FEFF 		bl	get_fat
 10210              	.LVL1204:
4931:DRIVER/FatFs/source/ff.c **** 			if (ncl == 0xFFFFFFFF) res = FR_DISK_ERR;
 10211              		.loc 1 4931 4 is_stmt 1 view .LVU3518
4932:DRIVER/FatFs/source/ff.c **** 			if (ncl == 1) res = FR_INT_ERR;
 10212              		.loc 1 4932 4 view .LVU3519
4932:DRIVER/FatFs/source/ff.c **** 			if (ncl == 1) res = FR_INT_ERR;
 10213              		.loc 1 4932 7 is_stmt 0 view .LVU3520
 10214 0072 B0F1FF3F 		cmp	r0, #-1
 10215 0076 0ED0     		beq	.L757
4933:DRIVER/FatFs/source/ff.c **** 			if (res == FR_OK && ncl < fs->n_fatent) {
 10216              		.loc 1 4933 4 is_stmt 1 view .LVU3521
4933:DRIVER/FatFs/source/ff.c **** 			if (res == FR_OK && ncl < fs->n_fatent) {
 10217              		.loc 1 4933 7 is_stmt 0 view .LVU3522
 10218 0078 0128     		cmp	r0, #1
 10219 007a 0ED0     		beq	.L761
 10220              	.L754:
 10221              	.LVL1205:
4934:DRIVER/FatFs/source/ff.c **** 				res = remove_chain(&fp->obj, ncl, fp->clust);
 10222              		.loc 1 4934 4 is_stmt 1 view .LVU3523
4934:DRIVER/FatFs/source/ff.c **** 				res = remove_chain(&fp->obj, ncl, fp->clust);
 10223              		.loc 1 4934 7 is_stmt 0 view .LVU3524
 10224 007c 002D     		cmp	r5, #0
 10225 007e DCD1     		bne	.L753
4934:DRIVER/FatFs/source/ff.c **** 				res = remove_chain(&fp->obj, ncl, fp->clust);
 10226              		.loc 1 4934 32 discriminator 1 view .LVU3525
 10227 0080 019B     		ldr	r3, [sp, #4]
 10228 0082 DB69     		ldr	r3, [r3, #28]
4934:DRIVER/FatFs/source/ff.c **** 				res = remove_chain(&fp->obj, ncl, fp->clust);
 10229              		.loc 1 4934 21 discriminator 1 view .LVU3526
 10230 0084 8342     		cmp	r3, r0
 10231 0086 D8D9     		bls	.L753
4935:DRIVER/FatFs/source/ff.c **** 			}
 10232              		.loc 1 4935 5 is_stmt 1 view .LVU3527
4935:DRIVER/FatFs/source/ff.c **** 			}
 10233              		.loc 1 4935 11 is_stmt 0 view .LVU3528
 10234 0088 A269     		ldr	r2, [r4, #24]
 10235 008a 0146     		mov	r1, r0
 10236 008c 2046     		mov	r0, r4
 10237              	.LVL1206:
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 337


4935:DRIVER/FatFs/source/ff.c **** 			}
 10238              		.loc 1 4935 11 view .LVU3529
 10239 008e FFF7FEFF 		bl	remove_chain
 10240              	.LVL1207:
4935:DRIVER/FatFs/source/ff.c **** 			}
 10241              		.loc 1 4935 11 view .LVU3530
 10242 0092 0546     		mov	r5, r0
 10243              	.LVL1208:
4935:DRIVER/FatFs/source/ff.c **** 			}
 10244              		.loc 1 4935 11 view .LVU3531
 10245 0094 D1E7     		b	.L753
 10246              	.LVL1209:
 10247              	.L757:
4932:DRIVER/FatFs/source/ff.c **** 			if (ncl == 1) res = FR_INT_ERR;
 10248              		.loc 1 4932 31 view .LVU3532
 10249 0096 0125     		movs	r5, #1
 10250 0098 F0E7     		b	.L754
 10251              	.L761:
4933:DRIVER/FatFs/source/ff.c **** 			if (res == FR_OK && ncl < fs->n_fatent) {
 10252              		.loc 1 4933 22 view .LVU3533
 10253 009a 0225     		movs	r5, #2
 10254 009c CDE7     		b	.L753
 10255              	.LVL1210:
 10256              	.L759:
4943:DRIVER/FatFs/source/ff.c **** 			} else {
 10257              		.loc 1 4943 9 view .LVU3534
 10258 009e 0125     		movs	r5, #1
 10259              	.LVL1211:
 10260              	.L755:
4949:DRIVER/FatFs/source/ff.c **** 	}
 10261              		.loc 1 4949 21 is_stmt 1 discriminator 1 view .LVU3535
 10262 00a0 6574     		strb	r5, [r4, #17]
4949:DRIVER/FatFs/source/ff.c **** 	}
 10263              		.loc 1 4949 21 discriminator 1 view .LVU3536
 10264 00a2 00E0     		b	.L751
 10265              	.LVL1212:
 10266              	.L756:
4923:DRIVER/FatFs/source/ff.c **** 
 10267              		.loc 1 4923 30 is_stmt 0 view .LVU3537
 10268 00a4 0725     		movs	r5, #7
 10269              	.LVL1213:
 10270              	.L751:
4953:DRIVER/FatFs/source/ff.c **** 
 10271              		.loc 1 4953 1 view .LVU3538
 10272 00a6 2846     		mov	r0, r5
 10273 00a8 03B0     		add	sp, sp, #12
 10274              	.LCFI98:
 10275              		.cfi_def_cfa_offset 12
 10276              		@ sp needed
 10277 00aa 30BD     		pop	{r4, r5, pc}
4953:DRIVER/FatFs/source/ff.c **** 
 10278              		.loc 1 4953 1 view .LVU3539
 10279              		.cfi_endproc
 10280              	.LFE51:
 10282              		.section	.text.f_unlink,"ax",%progbits
 10283              		.align	1
 10284              		.global	f_unlink
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 338


 10285              		.syntax unified
 10286              		.thumb
 10287              		.thumb_func
 10289              	f_unlink:
 10290              	.LVL1214:
 10291              	.LFB52:
4965:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
 10292              		.loc 1 4965 1 is_stmt 1 view -0
 10293              		.cfi_startproc
 10294              		@ args = 0, pretend = 0, frame = 624
 10295              		@ frame_needed = 0, uses_anonymous_args = 0
4965:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
 10296              		.loc 1 4965 1 is_stmt 0 view .LVU3541
 10297 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 10298              	.LCFI99:
 10299              		.cfi_def_cfa_offset 20
 10300              		.cfi_offset 4, -20
 10301              		.cfi_offset 5, -16
 10302              		.cfi_offset 6, -12
 10303              		.cfi_offset 7, -8
 10304              		.cfi_offset 14, -4
 10305 0002 ADF51D7D 		sub	sp, sp, #628
 10306              	.LCFI100:
 10307              		.cfi_def_cfa_offset 648
 10308 0006 0190     		str	r0, [sp, #4]
4966:DRIVER/FatFs/source/ff.c **** 	FATFS *fs;
 10309              		.loc 1 4966 2 is_stmt 1 view .LVU3542
4967:DRIVER/FatFs/source/ff.c **** 	DIR dj, sdj;
 10310              		.loc 1 4967 2 view .LVU3543
4968:DRIVER/FatFs/source/ff.c **** 	DWORD dclst = 0;
 10311              		.loc 1 4968 2 view .LVU3544
4969:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
 10312              		.loc 1 4969 2 view .LVU3545
 10313              	.LVL1215:
4973:DRIVER/FatFs/source/ff.c **** 
 10314              		.loc 1 4973 2 view .LVU3546
4977:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
 10315              		.loc 1 4977 2 view .LVU3547
4977:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
 10316              		.loc 1 4977 8 is_stmt 0 view .LVU3548
 10317 0008 0222     		movs	r2, #2
 10318 000a 9BA9     		add	r1, sp, #620
 10319 000c 01A8     		add	r0, sp, #4
 10320              	.LVL1216:
4977:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
 10321              		.loc 1 4977 8 view .LVU3549
 10322 000e FFF7FEFF 		bl	mount_volume
 10323              	.LVL1217:
4978:DRIVER/FatFs/source/ff.c **** 		dj.obj.fs = fs;
 10324              		.loc 1 4978 2 is_stmt 1 view .LVU3550
4978:DRIVER/FatFs/source/ff.c **** 		dj.obj.fs = fs;
 10325              		.loc 1 4978 5 is_stmt 0 view .LVU3551
 10326 0012 0446     		mov	r4, r0
 10327 0014 18B1     		cbz	r0, .L771
 10328              	.LVL1218:
 10329              	.L763:
5043:DRIVER/FatFs/source/ff.c **** 	}
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 339


 10330              		.loc 1 5043 16 is_stmt 1 view .LVU3552
5046:DRIVER/FatFs/source/ff.c **** }
 10331              		.loc 1 5046 2 view .LVU3553
5047:DRIVER/FatFs/source/ff.c **** 
 10332              		.loc 1 5047 1 is_stmt 0 view .LVU3554
 10333 0016 2046     		mov	r0, r4
 10334 0018 0DF51D7D 		add	sp, sp, #628
 10335              	.LCFI101:
 10336              		.cfi_remember_state
 10337              		.cfi_def_cfa_offset 20
 10338              		@ sp needed
 10339 001c F0BD     		pop	{r4, r5, r6, r7, pc}
 10340              	.LVL1219:
 10341              	.L771:
 10342              	.LCFI102:
 10343              		.cfi_restore_state
4979:DRIVER/FatFs/source/ff.c **** 		INIT_NAMBUF(fs);
 10344              		.loc 1 4979 3 is_stmt 1 view .LVU3555
4979:DRIVER/FatFs/source/ff.c **** 		INIT_NAMBUF(fs);
 10345              		.loc 1 4979 13 is_stmt 0 view .LVU3556
 10346 001e 9B9B     		ldr	r3, [sp, #620]
 10347 0020 8F93     		str	r3, [sp, #572]
4980:DRIVER/FatFs/source/ff.c **** 		res = follow_path(&dj, path);		/* Follow the file path */
 10348              		.loc 1 4980 3 is_stmt 1 view .LVU3557
 10349 0022 03AA     		add	r2, sp, #12
 10350 0024 1A61     		str	r2, [r3, #16]
4980:DRIVER/FatFs/source/ff.c **** 		res = follow_path(&dj, path);		/* Follow the file path */
 10351              		.loc 1 4980 18 view .LVU3558
4981:DRIVER/FatFs/source/ff.c **** 		if (FF_FS_RPATH && res == FR_OK && (dj.fn[NSFLAG] & NS_DOT)) {
 10352              		.loc 1 4981 3 view .LVU3559
4981:DRIVER/FatFs/source/ff.c **** 		if (FF_FS_RPATH && res == FR_OK && (dj.fn[NSFLAG] & NS_DOT)) {
 10353              		.loc 1 4981 9 is_stmt 0 view .LVU3560
 10354 0026 0199     		ldr	r1, [sp, #4]
 10355 0028 8FA8     		add	r0, sp, #572
 10356              	.LVL1220:
4981:DRIVER/FatFs/source/ff.c **** 		if (FF_FS_RPATH && res == FR_OK && (dj.fn[NSFLAG] & NS_DOT)) {
 10357              		.loc 1 4981 9 view .LVU3561
 10358 002a FFF7FEFF 		bl	follow_path
 10359              	.LVL1221:
4982:DRIVER/FatFs/source/ff.c **** 			res = FR_INVALID_NAME;			/* Cannot remove dot entry */
 10360              		.loc 1 4982 3 is_stmt 1 view .LVU3562
4988:DRIVER/FatFs/source/ff.c **** 			if (dj.fn[NSFLAG] & NS_NONAME) {
 10361              		.loc 1 4988 3 view .LVU3563
4988:DRIVER/FatFs/source/ff.c **** 			if (dj.fn[NSFLAG] & NS_NONAME) {
 10362              		.loc 1 4988 6 is_stmt 0 view .LVU3564
 10363 002e 0446     		mov	r4, r0
 10364 0030 0028     		cmp	r0, #0
 10365 0032 F0D1     		bne	.L763
4989:DRIVER/FatFs/source/ff.c **** 				res = FR_INVALID_NAME;		/* Cannot remove the origin directory */
 10366              		.loc 1 4989 4 is_stmt 1 view .LVU3565
4989:DRIVER/FatFs/source/ff.c **** 				res = FR_INVALID_NAME;		/* Cannot remove the origin directory */
 10367              		.loc 1 4989 8 is_stmt 0 view .LVU3566
 10368 0034 9DF96732 		ldrsb	r3, [sp, #615]
4989:DRIVER/FatFs/source/ff.c **** 				res = FR_INVALID_NAME;		/* Cannot remove the origin directory */
 10369              		.loc 1 4989 7 view .LVU3567
 10370 0038 002B     		cmp	r3, #0
 10371 003a 1FDB     		blt	.L767
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 340


4992:DRIVER/FatFs/source/ff.c **** 					res = FR_DENIED;		/* Cannot remove R/O object */
 10372              		.loc 1 4992 5 is_stmt 1 view .LVU3568
4992:DRIVER/FatFs/source/ff.c **** 					res = FR_DENIED;		/* Cannot remove R/O object */
 10373              		.loc 1 4992 15 is_stmt 0 view .LVU3569
 10374 003c 9DF84262 		ldrb	r6, [sp, #578]	@ zero_extendqisi2
4992:DRIVER/FatFs/source/ff.c **** 					res = FR_DENIED;		/* Cannot remove R/O object */
 10375              		.loc 1 4992 8 view .LVU3570
 10376 0040 16F0010F 		tst	r6, #1
 10377 0044 35D1     		bne	.L768
 10378              	.LVL1222:
4996:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
 10379              		.loc 1 4996 4 is_stmt 1 view .LVU3571
5005:DRIVER/FatFs/source/ff.c **** 				}
 10380              		.loc 1 5005 6 view .LVU3572
5005:DRIVER/FatFs/source/ff.c **** 				}
 10381              		.loc 1 5005 14 is_stmt 0 view .LVU3573
 10382 0046 9B9F     		ldr	r7, [sp, #620]
 10383 0048 9699     		ldr	r1, [sp, #600]
 10384 004a 3846     		mov	r0, r7
 10385 004c FFF7FEFF 		bl	ld_clust
 10386              	.LVL1223:
 10387 0050 0546     		mov	r5, r0
 10388              	.LVL1224:
5007:DRIVER/FatFs/source/ff.c **** #if FF_FS_RPATH != 0
 10389              		.loc 1 5007 5 is_stmt 1 view .LVU3574
5007:DRIVER/FatFs/source/ff.c **** #if FF_FS_RPATH != 0
 10390              		.loc 1 5007 8 is_stmt 0 view .LVU3575
 10391 0052 16F0100F 		tst	r6, #16
 10392 0056 13D0     		beq	.L764
5014:DRIVER/FatFs/source/ff.c **** 						sdj.obj.sclust = dclst;
 10393              		.loc 1 5014 7 is_stmt 1 view .LVU3576
5014:DRIVER/FatFs/source/ff.c **** 						sdj.obj.sclust = dclst;
 10394              		.loc 1 5014 18 is_stmt 0 view .LVU3577
 10395 0058 8397     		str	r7, [sp, #524]
5015:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
 10396              		.loc 1 5015 7 is_stmt 1 view .LVU3578
5015:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
 10397              		.loc 1 5015 22 is_stmt 0 view .LVU3579
 10398 005a 8590     		str	r0, [sp, #532]
5022:DRIVER/FatFs/source/ff.c **** 						if (res == FR_OK) {
 10399              		.loc 1 5022 7 is_stmt 1 view .LVU3580
5022:DRIVER/FatFs/source/ff.c **** 						if (res == FR_OK) {
 10400              		.loc 1 5022 13 is_stmt 0 view .LVU3581
 10401 005c 0021     		movs	r1, #0
 10402 005e 83A8     		add	r0, sp, #524
 10403              	.LVL1225:
5022:DRIVER/FatFs/source/ff.c **** 						if (res == FR_OK) {
 10404              		.loc 1 5022 13 view .LVU3582
 10405 0060 FFF7FEFF 		bl	dir_sdi
 10406              	.LVL1226:
5023:DRIVER/FatFs/source/ff.c **** 							res = DIR_READ_FILE(&sdj);			/* Test if the directory is empty */
 10407              		.loc 1 5023 7 is_stmt 1 view .LVU3583
5023:DRIVER/FatFs/source/ff.c **** 							res = DIR_READ_FILE(&sdj);			/* Test if the directory is empty */
 10408              		.loc 1 5023 10 is_stmt 0 view .LVU3584
 10409 0064 0446     		mov	r4, r0
 10410 0066 0028     		cmp	r0, #0
 10411 0068 D5D1     		bne	.L763
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 341


5024:DRIVER/FatFs/source/ff.c **** 							if (res == FR_OK) res = FR_DENIED;	/* Not empty? */
 10412              		.loc 1 5024 8 is_stmt 1 view .LVU3585
5024:DRIVER/FatFs/source/ff.c **** 							if (res == FR_OK) res = FR_DENIED;	/* Not empty? */
 10413              		.loc 1 5024 14 is_stmt 0 view .LVU3586
 10414 006a 0021     		movs	r1, #0
 10415 006c 83A8     		add	r0, sp, #524
 10416              	.LVL1227:
5024:DRIVER/FatFs/source/ff.c **** 							if (res == FR_OK) res = FR_DENIED;	/* Not empty? */
 10417              		.loc 1 5024 14 view .LVU3587
 10418 006e FFF7FEFF 		bl	dir_read
 10419              	.LVL1228:
5025:DRIVER/FatFs/source/ff.c **** 							if (res == FR_NO_FILE) res = FR_OK;	/* Empty? */
 10420              		.loc 1 5025 8 is_stmt 1 view .LVU3588
5025:DRIVER/FatFs/source/ff.c **** 							if (res == FR_NO_FILE) res = FR_OK;	/* Empty? */
 10421              		.loc 1 5025 11 is_stmt 0 view .LVU3589
 10422 0072 0446     		mov	r4, r0
 10423 0074 A0B1     		cbz	r0, .L769
5026:DRIVER/FatFs/source/ff.c **** 						}
 10424              		.loc 1 5026 8 is_stmt 1 view .LVU3590
5026:DRIVER/FatFs/source/ff.c **** 						}
 10425              		.loc 1 5026 11 is_stmt 0 view .LVU3591
 10426 0076 0428     		cmp	r0, #4
 10427 0078 02D1     		bne	.L764
 10428 007a 03E0     		b	.L765
 10429              	.LVL1229:
 10430              	.L767:
4969:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
 10431              		.loc 1 4969 8 view .LVU3592
 10432 007c 0025     		movs	r5, #0
4990:DRIVER/FatFs/source/ff.c **** 			} else {
 10433              		.loc 1 4990 9 view .LVU3593
 10434 007e 0624     		movs	r4, #6
 10435              	.LVL1230:
 10436              	.L764:
5031:DRIVER/FatFs/source/ff.c **** 				res = dir_remove(&dj);			/* Remove the directory entry */
 10437              		.loc 1 5031 4 is_stmt 1 view .LVU3594
5031:DRIVER/FatFs/source/ff.c **** 				res = dir_remove(&dj);			/* Remove the directory entry */
 10438              		.loc 1 5031 7 is_stmt 0 view .LVU3595
 10439 0080 002C     		cmp	r4, #0
 10440 0082 C8D1     		bne	.L763
 10441              	.LVL1231:
 10442              	.L765:
5032:DRIVER/FatFs/source/ff.c **** 				if (res == FR_OK && dclst != 0) {	/* Remove the cluster chain if exist */
 10443              		.loc 1 5032 5 is_stmt 1 view .LVU3596
5032:DRIVER/FatFs/source/ff.c **** 				if (res == FR_OK && dclst != 0) {	/* Remove the cluster chain if exist */
 10444              		.loc 1 5032 11 is_stmt 0 view .LVU3597
 10445 0084 8FA8     		add	r0, sp, #572
 10446 0086 FFF7FEFF 		bl	dir_remove
 10447              	.LVL1232:
5033:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
 10448              		.loc 1 5033 5 is_stmt 1 view .LVU3598
5033:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
 10449              		.loc 1 5033 8 is_stmt 0 view .LVU3599
 10450 008a 0446     		mov	r4, r0
 10451 008c 0028     		cmp	r0, #0
 10452 008e C2D1     		bne	.L763
5033:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 342


 10453              		.loc 1 5033 22 discriminator 1 view .LVU3600
 10454 0090 45B9     		cbnz	r5, .L772
 10455              	.LVL1233:
 10456              	.L766:
5040:DRIVER/FatFs/source/ff.c **** 			}
 10457              		.loc 1 5040 5 is_stmt 1 view .LVU3601
5040:DRIVER/FatFs/source/ff.c **** 			}
 10458              		.loc 1 5040 8 is_stmt 0 view .LVU3602
 10459 0092 002C     		cmp	r4, #0
 10460 0094 BFD1     		bne	.L763
5040:DRIVER/FatFs/source/ff.c **** 			}
 10461              		.loc 1 5040 23 is_stmt 1 discriminator 1 view .LVU3603
5040:DRIVER/FatFs/source/ff.c **** 			}
 10462              		.loc 1 5040 29 is_stmt 0 discriminator 1 view .LVU3604
 10463 0096 9B98     		ldr	r0, [sp, #620]
 10464 0098 FFF7FEFF 		bl	sync_fs
 10465              	.LVL1234:
 10466 009c 0446     		mov	r4, r0
 10467              	.LVL1235:
5040:DRIVER/FatFs/source/ff.c **** 			}
 10468              		.loc 1 5040 29 discriminator 1 view .LVU3605
 10469 009e BAE7     		b	.L763
 10470              	.LVL1236:
 10471              	.L769:
5025:DRIVER/FatFs/source/ff.c **** 							if (res == FR_NO_FILE) res = FR_OK;	/* Empty? */
 10472              		.loc 1 5025 30 view .LVU3606
 10473 00a0 0724     		movs	r4, #7
 10474 00a2 EDE7     		b	.L764
 10475              	.LVL1237:
 10476              	.L772:
5037:DRIVER/FatFs/source/ff.c **** #endif
 10477              		.loc 1 5037 6 is_stmt 1 view .LVU3607
5037:DRIVER/FatFs/source/ff.c **** #endif
 10478              		.loc 1 5037 12 is_stmt 0 view .LVU3608
 10479 00a4 0022     		movs	r2, #0
 10480 00a6 2946     		mov	r1, r5
 10481 00a8 8FA8     		add	r0, sp, #572
 10482              	.LVL1238:
5037:DRIVER/FatFs/source/ff.c **** #endif
 10483              		.loc 1 5037 12 view .LVU3609
 10484 00aa FFF7FEFF 		bl	remove_chain
 10485              	.LVL1239:
 10486 00ae 0446     		mov	r4, r0
 10487              	.LVL1240:
5037:DRIVER/FatFs/source/ff.c **** #endif
 10488              		.loc 1 5037 12 view .LVU3610
 10489 00b0 EFE7     		b	.L766
 10490              	.LVL1241:
 10491              	.L768:
5037:DRIVER/FatFs/source/ff.c **** #endif
 10492              		.loc 1 5037 12 view .LVU3611
 10493 00b2 0724     		movs	r4, #7
 10494 00b4 AFE7     		b	.L763
 10495              		.cfi_endproc
 10496              	.LFE52:
 10498              		.section	.text.f_mkdir,"ax",%progbits
 10499              		.align	1
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 343


 10500              		.global	f_mkdir
 10501              		.syntax unified
 10502              		.thumb
 10503              		.thumb_func
 10505              	f_mkdir:
 10506              	.LVL1242:
 10507              	.LFB53:
5059:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
 10508              		.loc 1 5059 1 is_stmt 1 view -0
 10509              		.cfi_startproc
 10510              		@ args = 0, pretend = 0, frame = 592
 10511              		@ frame_needed = 0, uses_anonymous_args = 0
5059:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
 10512              		.loc 1 5059 1 is_stmt 0 view .LVU3613
 10513 0000 70B5     		push	{r4, r5, r6, lr}
 10514              	.LCFI103:
 10515              		.cfi_def_cfa_offset 16
 10516              		.cfi_offset 4, -16
 10517              		.cfi_offset 5, -12
 10518              		.cfi_offset 6, -8
 10519              		.cfi_offset 14, -4
 10520 0002 ADF5147D 		sub	sp, sp, #592
 10521              	.LCFI104:
 10522              		.cfi_def_cfa_offset 608
 10523 0006 0190     		str	r0, [sp, #4]
5060:DRIVER/FatFs/source/ff.c **** 	FATFS *fs;
 10524              		.loc 1 5060 2 is_stmt 1 view .LVU3614
5061:DRIVER/FatFs/source/ff.c **** 	DIR dj;
 10525              		.loc 1 5061 2 view .LVU3615
5062:DRIVER/FatFs/source/ff.c **** 	FFOBJID sobj;
 10526              		.loc 1 5062 2 view .LVU3616
5063:DRIVER/FatFs/source/ff.c **** 	DWORD dcl, pcl, tm;
 10527              		.loc 1 5063 2 view .LVU3617
5064:DRIVER/FatFs/source/ff.c **** 	DEF_NAMBUF
 10528              		.loc 1 5064 2 view .LVU3618
5065:DRIVER/FatFs/source/ff.c **** 
 10529              		.loc 1 5065 2 view .LVU3619
5068:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
 10530              		.loc 1 5068 2 view .LVU3620
5068:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
 10531              		.loc 1 5068 8 is_stmt 0 view .LVU3621
 10532 0008 0222     		movs	r2, #2
 10533 000a 93A9     		add	r1, sp, #588
 10534 000c 01A8     		add	r0, sp, #4
 10535              	.LVL1243:
5068:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
 10536              		.loc 1 5068 8 view .LVU3622
 10537 000e FFF7FEFF 		bl	mount_volume
 10538              	.LVL1244:
5069:DRIVER/FatFs/source/ff.c **** 		dj.obj.fs = fs;
 10539              		.loc 1 5069 2 is_stmt 1 view .LVU3623
5069:DRIVER/FatFs/source/ff.c **** 		dj.obj.fs = fs;
 10540              		.loc 1 5069 5 is_stmt 0 view .LVU3624
 10541 0012 0446     		mov	r4, r0
 10542 0014 18B1     		cbz	r0, .L784
 10543              	.LVL1245:
 10544              	.L774:
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 344


5127:DRIVER/FatFs/source/ff.c **** 	}
 10545              		.loc 1 5127 16 is_stmt 1 view .LVU3625
5130:DRIVER/FatFs/source/ff.c **** }
 10546              		.loc 1 5130 2 view .LVU3626
5131:DRIVER/FatFs/source/ff.c **** 
 10547              		.loc 1 5131 1 is_stmt 0 view .LVU3627
 10548 0016 2046     		mov	r0, r4
 10549 0018 0DF5147D 		add	sp, sp, #592
 10550              	.LCFI105:
 10551              		.cfi_remember_state
 10552              		.cfi_def_cfa_offset 16
 10553              		@ sp needed
 10554 001c 70BD     		pop	{r4, r5, r6, pc}
 10555              	.LVL1246:
 10556              	.L784:
 10557              	.LCFI106:
 10558              		.cfi_restore_state
5070:DRIVER/FatFs/source/ff.c **** 		INIT_NAMBUF(fs);
 10559              		.loc 1 5070 3 is_stmt 1 view .LVU3628
5070:DRIVER/FatFs/source/ff.c **** 		INIT_NAMBUF(fs);
 10560              		.loc 1 5070 13 is_stmt 0 view .LVU3629
 10561 001e 939B     		ldr	r3, [sp, #588]
 10562 0020 8793     		str	r3, [sp, #540]
5071:DRIVER/FatFs/source/ff.c **** 		res = follow_path(&dj, path);			/* Follow the file path */
 10563              		.loc 1 5071 3 is_stmt 1 view .LVU3630
 10564 0022 03AA     		add	r2, sp, #12
 10565 0024 1A61     		str	r2, [r3, #16]
5071:DRIVER/FatFs/source/ff.c **** 		res = follow_path(&dj, path);			/* Follow the file path */
 10566              		.loc 1 5071 18 view .LVU3631
5072:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK) res = FR_EXIST;		/* Name collision? */
 10567              		.loc 1 5072 3 view .LVU3632
5072:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK) res = FR_EXIST;		/* Name collision? */
 10568              		.loc 1 5072 9 is_stmt 0 view .LVU3633
 10569 0026 0199     		ldr	r1, [sp, #4]
 10570 0028 87A8     		add	r0, sp, #540
 10571              	.LVL1247:
5072:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK) res = FR_EXIST;		/* Name collision? */
 10572              		.loc 1 5072 9 view .LVU3634
 10573 002a FFF7FEFF 		bl	follow_path
 10574              	.LVL1248:
5073:DRIVER/FatFs/source/ff.c **** 		if (FF_FS_RPATH && res == FR_NO_FILE && (dj.fn[NSFLAG] & NS_DOT)) {	/* Invalid name? */
 10575              		.loc 1 5073 3 is_stmt 1 view .LVU3635
5073:DRIVER/FatFs/source/ff.c **** 		if (FF_FS_RPATH && res == FR_NO_FILE && (dj.fn[NSFLAG] & NS_DOT)) {	/* Invalid name? */
 10576              		.loc 1 5073 6 is_stmt 0 view .LVU3636
 10577 002e 0028     		cmp	r0, #0
 10578 0030 75D0     		beq	.L778
5074:DRIVER/FatFs/source/ff.c **** 			res = FR_INVALID_NAME;
 10579              		.loc 1 5074 3 is_stmt 1 view .LVU3637
5077:DRIVER/FatFs/source/ff.c **** 			sobj.fs = fs;						/* New object id to create a new chain */
 10580              		.loc 1 5077 3 view .LVU3638
5077:DRIVER/FatFs/source/ff.c **** 			sobj.fs = fs;						/* New object id to create a new chain */
 10581              		.loc 1 5077 6 is_stmt 0 view .LVU3639
 10582 0032 0428     		cmp	r0, #4
 10583 0034 01D0     		beq	.L785
5072:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK) res = FR_EXIST;		/* Name collision? */
 10584              		.loc 1 5072 9 view .LVU3640
 10585 0036 0446     		mov	r4, r0
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 345


 10586 0038 EDE7     		b	.L774
 10587              	.L785:
5078:DRIVER/FatFs/source/ff.c **** 			dcl = create_chain(&sobj, 0);		/* Allocate a cluster for the new directory */
 10588              		.loc 1 5078 4 is_stmt 1 view .LVU3641
5078:DRIVER/FatFs/source/ff.c **** 			dcl = create_chain(&sobj, 0);		/* Allocate a cluster for the new directory */
 10589              		.loc 1 5078 12 is_stmt 0 view .LVU3642
 10590 003a 939B     		ldr	r3, [sp, #588]
 10591 003c 8393     		str	r3, [sp, #524]
5079:DRIVER/FatFs/source/ff.c **** 			res = FR_OK;
 10592              		.loc 1 5079 4 is_stmt 1 view .LVU3643
5079:DRIVER/FatFs/source/ff.c **** 			res = FR_OK;
 10593              		.loc 1 5079 10 is_stmt 0 view .LVU3644
 10594 003e 0021     		movs	r1, #0
 10595 0040 83A8     		add	r0, sp, #524
 10596              	.LVL1249:
5079:DRIVER/FatFs/source/ff.c **** 			res = FR_OK;
 10597              		.loc 1 5079 10 view .LVU3645
 10598 0042 FFF7FEFF 		bl	create_chain
 10599              	.LVL1250:
5080:DRIVER/FatFs/source/ff.c **** 			if (dcl == 0) res = FR_DENIED;		/* No space to allocate a new cluster? */
 10600              		.loc 1 5080 4 is_stmt 1 view .LVU3646
5081:DRIVER/FatFs/source/ff.c **** 			if (dcl == 1) res = FR_INT_ERR;		/* Any insanity? */
 10601              		.loc 1 5081 4 view .LVU3647
5081:DRIVER/FatFs/source/ff.c **** 			if (dcl == 1) res = FR_INT_ERR;		/* Any insanity? */
 10602              		.loc 1 5081 7 is_stmt 0 view .LVU3648
 10603 0046 0546     		mov	r5, r0
 10604 0048 18B1     		cbz	r0, .L780
5082:DRIVER/FatFs/source/ff.c **** 			if (dcl == 0xFFFFFFFF) res = FR_DISK_ERR;	/* Disk error? */
 10605              		.loc 1 5082 4 is_stmt 1 view .LVU3649
5082:DRIVER/FatFs/source/ff.c **** 			if (dcl == 0xFFFFFFFF) res = FR_DISK_ERR;	/* Disk error? */
 10606              		.loc 1 5082 7 is_stmt 0 view .LVU3650
 10607 004a 0128     		cmp	r0, #1
 10608 004c 02D1     		bne	.L775
5082:DRIVER/FatFs/source/ff.c **** 			if (dcl == 0xFFFFFFFF) res = FR_DISK_ERR;	/* Disk error? */
 10609              		.loc 1 5082 22 view .LVU3651
 10610 004e 0224     		movs	r4, #2
 10611 0050 03E0     		b	.L776
 10612              	.L780:
5081:DRIVER/FatFs/source/ff.c **** 			if (dcl == 1) res = FR_INT_ERR;		/* Any insanity? */
 10613              		.loc 1 5081 22 view .LVU3652
 10614 0052 0724     		movs	r4, #7
 10615              	.L775:
 10616              	.LVL1251:
5083:DRIVER/FatFs/source/ff.c **** 			tm = GET_FATTIME();
 10617              		.loc 1 5083 4 is_stmt 1 view .LVU3653
5083:DRIVER/FatFs/source/ff.c **** 			tm = GET_FATTIME();
 10618              		.loc 1 5083 7 is_stmt 0 view .LVU3654
 10619 0054 B5F1FF3F 		cmp	r5, #-1
 10620 0058 0FD0     		beq	.L786
 10621              	.LVL1252:
 10622              	.L776:
5084:DRIVER/FatFs/source/ff.c **** 			if (res == FR_OK) {
 10623              		.loc 1 5084 4 is_stmt 1 view .LVU3655
5084:DRIVER/FatFs/source/ff.c **** 			if (res == FR_OK) {
 10624              		.loc 1 5084 9 is_stmt 0 view .LVU3656
 10625 005a FFF7FEFF 		bl	get_fattime
 10626              	.LVL1253:
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 346


5084:DRIVER/FatFs/source/ff.c **** 			if (res == FR_OK) {
 10627              		.loc 1 5084 9 view .LVU3657
 10628 005e 0646     		mov	r6, r0
 10629              	.LVL1254:
5085:DRIVER/FatFs/source/ff.c **** 				res = dir_clear(fs, dcl);		/* Clean up the new table */
 10630              		.loc 1 5085 4 is_stmt 1 view .LVU3658
5085:DRIVER/FatFs/source/ff.c **** 				res = dir_clear(fs, dcl);		/* Clean up the new table */
 10631              		.loc 1 5085 7 is_stmt 0 view .LVU3659
 10632 0060 2CB9     		cbnz	r4, .L777
5086:DRIVER/FatFs/source/ff.c **** 				if (res == FR_OK) {
 10633              		.loc 1 5086 5 is_stmt 1 view .LVU3660
5086:DRIVER/FatFs/source/ff.c **** 				if (res == FR_OK) {
 10634              		.loc 1 5086 11 is_stmt 0 view .LVU3661
 10635 0062 2946     		mov	r1, r5
 10636 0064 9398     		ldr	r0, [sp, #588]
 10637              	.LVL1255:
5086:DRIVER/FatFs/source/ff.c **** 				if (res == FR_OK) {
 10638              		.loc 1 5086 11 view .LVU3662
 10639 0066 FFF7FEFF 		bl	dir_clear
 10640              	.LVL1256:
5087:DRIVER/FatFs/source/ff.c **** 					if (!FF_FS_EXFAT || fs->fs_type != FS_EXFAT) {	/* Create dot entries (FAT only) */
 10641              		.loc 1 5087 5 is_stmt 1 view .LVU3663
5087:DRIVER/FatFs/source/ff.c **** 					if (!FF_FS_EXFAT || fs->fs_type != FS_EXFAT) {	/* Create dot entries (FAT only) */
 10642              		.loc 1 5087 8 is_stmt 0 view .LVU3664
 10643 006a 0446     		mov	r4, r0
 10644 006c 38B1     		cbz	r0, .L787
 10645              	.LVL1257:
 10646              	.L777:
5124:DRIVER/FatFs/source/ff.c **** 			}
 10647              		.loc 1 5124 5 is_stmt 1 view .LVU3665
 10648 006e 0022     		movs	r2, #0
 10649 0070 2946     		mov	r1, r5
 10650 0072 83A8     		add	r0, sp, #524
 10651 0074 FFF7FEFF 		bl	remove_chain
 10652              	.LVL1258:
 10653 0078 CDE7     		b	.L774
 10654              	.LVL1259:
 10655              	.L786:
5083:DRIVER/FatFs/source/ff.c **** 			tm = GET_FATTIME();
 10656              		.loc 1 5083 31 is_stmt 0 view .LVU3666
 10657 007a 0124     		movs	r4, #1
 10658              	.LVL1260:
5083:DRIVER/FatFs/source/ff.c **** 			tm = GET_FATTIME();
 10659              		.loc 1 5083 31 view .LVU3667
 10660 007c EDE7     		b	.L776
 10661              	.LVL1261:
 10662              	.L787:
5088:DRIVER/FatFs/source/ff.c **** 						memset(fs->win + DIR_Name, ' ', 11);	/* Create "." entry */
 10663              		.loc 1 5088 6 is_stmt 1 view .LVU3668
5089:DRIVER/FatFs/source/ff.c **** 						fs->win[DIR_Name] = '.';
 10664              		.loc 1 5089 7 view .LVU3669
5089:DRIVER/FatFs/source/ff.c **** 						fs->win[DIR_Name] = '.';
 10665              		.loc 1 5089 16 is_stmt 0 view .LVU3670
 10666 007e 9398     		ldr	r0, [sp, #588]
 10667              	.LVL1262:
5089:DRIVER/FatFs/source/ff.c **** 						fs->win[DIR_Name] = '.';
 10668              		.loc 1 5089 7 view .LVU3671
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 347


 10669 0080 4FF02033 		mov	r3, #538976288
 10670 0084 8363     		str	r3, [r0, #56]	@ unaligned
 10671 0086 C363     		str	r3, [r0, #60]	@ unaligned
 10672 0088 C0F83F30 		str	r3, [r0, #63]	@ unaligned
5090:DRIVER/FatFs/source/ff.c **** 						fs->win[DIR_Attr] = AM_DIR;
 10673              		.loc 1 5090 7 is_stmt 1 view .LVU3672
5090:DRIVER/FatFs/source/ff.c **** 						fs->win[DIR_Attr] = AM_DIR;
 10674              		.loc 1 5090 25 is_stmt 0 view .LVU3673
 10675 008c 2E24     		movs	r4, #46
 10676 008e 80F83840 		strb	r4, [r0, #56]
5091:DRIVER/FatFs/source/ff.c **** 						st_dword(fs->win + DIR_ModTime, tm);
 10677              		.loc 1 5091 7 is_stmt 1 view .LVU3674
5091:DRIVER/FatFs/source/ff.c **** 						st_dword(fs->win + DIR_ModTime, tm);
 10678              		.loc 1 5091 25 is_stmt 0 view .LVU3675
 10679 0092 1023     		movs	r3, #16
 10680 0094 80F84330 		strb	r3, [r0, #67]
5092:DRIVER/FatFs/source/ff.c **** 						st_clust(fs, fs->win, dcl);
 10681              		.loc 1 5092 7 is_stmt 1 view .LVU3676
 10682 0098 3146     		mov	r1, r6
 10683 009a 4E30     		adds	r0, r0, #78
 10684 009c FFF7FEFF 		bl	st_dword
 10685              	.LVL1263:
5093:DRIVER/FatFs/source/ff.c **** 						memcpy(fs->win + SZDIRE, fs->win, SZDIRE);	/* Create ".." entry */
 10686              		.loc 1 5093 7 view .LVU3677
 10687 00a0 9398     		ldr	r0, [sp, #588]
 10688 00a2 2A46     		mov	r2, r5
 10689 00a4 00F13801 		add	r1, r0, #56
 10690 00a8 FFF7FEFF 		bl	st_clust
 10691              	.LVL1264:
5094:DRIVER/FatFs/source/ff.c **** 						fs->win[SZDIRE + 1] = '.'; pcl = dj.obj.sclust;
 10692              		.loc 1 5094 7 view .LVU3678
5094:DRIVER/FatFs/source/ff.c **** 						fs->win[SZDIRE + 1] = '.'; pcl = dj.obj.sclust;
 10693              		.loc 1 5094 16 is_stmt 0 view .LVU3679
 10694 00ac 9398     		ldr	r0, [sp, #588]
5094:DRIVER/FatFs/source/ff.c **** 						fs->win[SZDIRE + 1] = '.'; pcl = dj.obj.sclust;
 10695              		.loc 1 5094 7 view .LVU3680
 10696 00ae D0F838C0 		ldr	ip, [r0, #56]	@ unaligned
 10697 00b2 C16B     		ldr	r1, [r0, #60]	@ unaligned
 10698 00b4 026C     		ldr	r2, [r0, #64]	@ unaligned
 10699 00b6 436C     		ldr	r3, [r0, #68]	@ unaligned
 10700 00b8 C0F858C0 		str	ip, [r0, #88]	@ unaligned
 10701 00bc C165     		str	r1, [r0, #92]	@ unaligned
 10702 00be 0266     		str	r2, [r0, #96]	@ unaligned
 10703 00c0 4366     		str	r3, [r0, #100]	@ unaligned
 10704 00c2 D0F848C0 		ldr	ip, [r0, #72]	@ unaligned
 10705 00c6 C16C     		ldr	r1, [r0, #76]	@ unaligned
 10706 00c8 026D     		ldr	r2, [r0, #80]	@ unaligned
 10707 00ca 436D     		ldr	r3, [r0, #84]	@ unaligned
 10708 00cc C0F868C0 		str	ip, [r0, #104]	@ unaligned
 10709 00d0 C166     		str	r1, [r0, #108]	@ unaligned
 10710 00d2 0267     		str	r2, [r0, #112]	@ unaligned
 10711 00d4 4367     		str	r3, [r0, #116]	@ unaligned
5095:DRIVER/FatFs/source/ff.c **** 						st_clust(fs, fs->win + SZDIRE, pcl);
 10712              		.loc 1 5095 7 is_stmt 1 view .LVU3681
5095:DRIVER/FatFs/source/ff.c **** 						st_clust(fs, fs->win + SZDIRE, pcl);
 10713              		.loc 1 5095 27 is_stmt 0 view .LVU3682
 10714 00d6 80F85940 		strb	r4, [r0, #89]
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 348


5095:DRIVER/FatFs/source/ff.c **** 						st_clust(fs, fs->win + SZDIRE, pcl);
 10715              		.loc 1 5095 34 is_stmt 1 view .LVU3683
 10716              	.LVL1265:
5096:DRIVER/FatFs/source/ff.c **** 						fs->wflag = 1;
 10717              		.loc 1 5096 7 view .LVU3684
 10718 00da 899A     		ldr	r2, [sp, #548]
 10719 00dc 00F15801 		add	r1, r0, #88
 10720 00e0 FFF7FEFF 		bl	st_clust
 10721              	.LVL1266:
5097:DRIVER/FatFs/source/ff.c **** 					}
 10722              		.loc 1 5097 7 view .LVU3685
5097:DRIVER/FatFs/source/ff.c **** 					}
 10723              		.loc 1 5097 17 is_stmt 0 view .LVU3686
 10724 00e4 939B     		ldr	r3, [sp, #588]
 10725 00e6 0122     		movs	r2, #1
 10726 00e8 1A71     		strb	r2, [r3, #4]
5099:DRIVER/FatFs/source/ff.c **** 				}
 10727              		.loc 1 5099 6 is_stmt 1 view .LVU3687
5099:DRIVER/FatFs/source/ff.c **** 				}
 10728              		.loc 1 5099 12 is_stmt 0 view .LVU3688
 10729 00ea 87A8     		add	r0, sp, #540
 10730 00ec FFF7FEFF 		bl	dir_register
 10731              	.LVL1267:
5102:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
 10732              		.loc 1 5102 4 is_stmt 1 view .LVU3689
5102:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
 10733              		.loc 1 5102 7 is_stmt 0 view .LVU3690
 10734 00f0 0446     		mov	r4, r0
 10735 00f2 0028     		cmp	r0, #0
 10736 00f4 BBD1     		bne	.L777
5115:DRIVER/FatFs/source/ff.c **** 					st_clust(fs, dj.dir, dcl);			/* Table start cluster */
 10737              		.loc 1 5115 6 is_stmt 1 view .LVU3691
 10738 00f6 3146     		mov	r1, r6
 10739 00f8 8E98     		ldr	r0, [sp, #568]
 10740              	.LVL1268:
5115:DRIVER/FatFs/source/ff.c **** 					st_clust(fs, dj.dir, dcl);			/* Table start cluster */
 10741              		.loc 1 5115 6 is_stmt 0 view .LVU3692
 10742 00fa 1630     		adds	r0, r0, #22
 10743 00fc FFF7FEFF 		bl	st_dword
 10744              	.LVL1269:
5116:DRIVER/FatFs/source/ff.c **** 					dj.dir[DIR_Attr] = AM_DIR;			/* Attribute */
 10745              		.loc 1 5116 6 is_stmt 1 view .LVU3693
 10746 0100 2A46     		mov	r2, r5
 10747 0102 8E99     		ldr	r1, [sp, #568]
 10748 0104 9398     		ldr	r0, [sp, #588]
 10749 0106 FFF7FEFF 		bl	st_clust
 10750              	.LVL1270:
5117:DRIVER/FatFs/source/ff.c **** 					fs->wflag = 1;
 10751              		.loc 1 5117 6 view .LVU3694
5117:DRIVER/FatFs/source/ff.c **** 					fs->wflag = 1;
 10752              		.loc 1 5117 23 is_stmt 0 view .LVU3695
 10753 010a 8E9B     		ldr	r3, [sp, #568]
 10754 010c 1022     		movs	r2, #16
 10755 010e DA72     		strb	r2, [r3, #11]
5118:DRIVER/FatFs/source/ff.c **** 				}
 10756              		.loc 1 5118 6 is_stmt 1 view .LVU3696
5118:DRIVER/FatFs/source/ff.c **** 				}
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 349


 10757              		.loc 1 5118 8 is_stmt 0 view .LVU3697
 10758 0110 9398     		ldr	r0, [sp, #588]
5118:DRIVER/FatFs/source/ff.c **** 				}
 10759              		.loc 1 5118 16 view .LVU3698
 10760 0112 0123     		movs	r3, #1
 10761 0114 0371     		strb	r3, [r0, #4]
5120:DRIVER/FatFs/source/ff.c **** 					res = sync_fs(fs);
 10762              		.loc 1 5120 5 is_stmt 1 view .LVU3699
5121:DRIVER/FatFs/source/ff.c **** 				}
 10763              		.loc 1 5121 6 view .LVU3700
5121:DRIVER/FatFs/source/ff.c **** 				}
 10764              		.loc 1 5121 12 is_stmt 0 view .LVU3701
 10765 0116 FFF7FEFF 		bl	sync_fs
 10766              	.LVL1271:
 10767 011a 0446     		mov	r4, r0
 10768              	.LVL1272:
5121:DRIVER/FatFs/source/ff.c **** 				}
 10769              		.loc 1 5121 12 view .LVU3702
 10770 011c 7BE7     		b	.L774
 10771              	.LVL1273:
 10772              	.L778:
5073:DRIVER/FatFs/source/ff.c **** 		if (FF_FS_RPATH && res == FR_NO_FILE && (dj.fn[NSFLAG] & NS_DOT)) {	/* Invalid name? */
 10773              		.loc 1 5073 25 view .LVU3703
 10774 011e 0824     		movs	r4, #8
 10775 0120 79E7     		b	.L774
 10776              		.cfi_endproc
 10777              	.LFE53:
 10779              		.section	.text.f_rename,"ax",%progbits
 10780              		.align	1
 10781              		.global	f_rename
 10782              		.syntax unified
 10783              		.thumb
 10784              		.thumb_func
 10786              	f_rename:
 10787              	.LVL1274:
 10788              	.LFB54:
5144:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
 10789              		.loc 1 5144 1 is_stmt 1 view -0
 10790              		.cfi_startproc
 10791              		@ args = 0, pretend = 0, frame = 656
 10792              		@ frame_needed = 0, uses_anonymous_args = 0
5144:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
 10793              		.loc 1 5144 1 is_stmt 0 view .LVU3705
 10794 0000 30B5     		push	{r4, r5, lr}
 10795              	.LCFI107:
 10796              		.cfi_def_cfa_offset 12
 10797              		.cfi_offset 4, -12
 10798              		.cfi_offset 5, -8
 10799              		.cfi_offset 14, -4
 10800 0002 ADF5257D 		sub	sp, sp, #660
 10801              	.LCFI108:
 10802              		.cfi_def_cfa_offset 672
 10803 0006 0190     		str	r0, [sp, #4]
 10804 0008 0091     		str	r1, [sp]
5145:DRIVER/FatFs/source/ff.c **** 	FATFS *fs;
 10805              		.loc 1 5145 2 is_stmt 1 view .LVU3706
5146:DRIVER/FatFs/source/ff.c **** 	DIR djo, djn;
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 350


 10806              		.loc 1 5146 2 view .LVU3707
5147:DRIVER/FatFs/source/ff.c **** 	BYTE buf[FF_FS_EXFAT ? SZDIRE * 2 : SZDIRE], *dir;
 10807              		.loc 1 5147 2 view .LVU3708
5148:DRIVER/FatFs/source/ff.c **** 	LBA_t sect;
 10808              		.loc 1 5148 2 view .LVU3709
5149:DRIVER/FatFs/source/ff.c **** 	DEF_NAMBUF
 10809              		.loc 1 5149 2 view .LVU3710
5150:DRIVER/FatFs/source/ff.c **** 
 10810              		.loc 1 5150 2 view .LVU3711
5153:DRIVER/FatFs/source/ff.c **** 	res = mount_volume(&path_old, &fs, FA_WRITE);	/* Get logical drive of the old object */
 10811              		.loc 1 5153 2 view .LVU3712
 10812 000a 6846     		mov	r0, sp
 10813              	.LVL1275:
5153:DRIVER/FatFs/source/ff.c **** 	res = mount_volume(&path_old, &fs, FA_WRITE);	/* Get logical drive of the old object */
 10814              		.loc 1 5153 2 is_stmt 0 view .LVU3713
 10815 000c FFF7FEFF 		bl	get_ldnumber
 10816              	.LVL1276:
5154:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
 10817              		.loc 1 5154 2 is_stmt 1 view .LVU3714
5154:DRIVER/FatFs/source/ff.c **** 	if (res == FR_OK) {
 10818              		.loc 1 5154 8 is_stmt 0 view .LVU3715
 10819 0010 0222     		movs	r2, #2
 10820 0012 A3A9     		add	r1, sp, #652
 10821 0014 01A8     		add	r0, sp, #4
 10822 0016 FFF7FEFF 		bl	mount_volume
 10823              	.LVL1277:
5155:DRIVER/FatFs/source/ff.c **** 		djo.obj.fs = fs;
 10824              		.loc 1 5155 2 is_stmt 1 view .LVU3716
5155:DRIVER/FatFs/source/ff.c **** 		djo.obj.fs = fs;
 10825              		.loc 1 5155 5 is_stmt 0 view .LVU3717
 10826 001a 0446     		mov	r4, r0
 10827 001c 18B1     		cbz	r0, .L798
 10828              	.LVL1278:
 10829              	.L789:
5232:DRIVER/FatFs/source/ff.c **** 	}
 10830              		.loc 1 5232 16 is_stmt 1 view .LVU3718
5235:DRIVER/FatFs/source/ff.c **** }
 10831              		.loc 1 5235 2 view .LVU3719
5236:DRIVER/FatFs/source/ff.c **** 
 10832              		.loc 1 5236 1 is_stmt 0 view .LVU3720
 10833 001e 2046     		mov	r0, r4
 10834 0020 0DF5257D 		add	sp, sp, #660
 10835              	.LCFI109:
 10836              		.cfi_remember_state
 10837              		.cfi_def_cfa_offset 12
 10838              		@ sp needed
 10839 0024 30BD     		pop	{r4, r5, pc}
 10840              	.LVL1279:
 10841              	.L798:
 10842              	.LCFI110:
 10843              		.cfi_restore_state
5156:DRIVER/FatFs/source/ff.c **** 		INIT_NAMBUF(fs);
 10844              		.loc 1 5156 3 is_stmt 1 view .LVU3721
5156:DRIVER/FatFs/source/ff.c **** 		INIT_NAMBUF(fs);
 10845              		.loc 1 5156 14 is_stmt 0 view .LVU3722
 10846 0026 A39B     		ldr	r3, [sp, #652]
 10847 0028 9793     		str	r3, [sp, #604]
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 351


5157:DRIVER/FatFs/source/ff.c **** 		res = follow_path(&djo, path_old);			/* Check old object */
 10848              		.loc 1 5157 3 is_stmt 1 view .LVU3723
 10849 002a 03AA     		add	r2, sp, #12
 10850 002c 1A61     		str	r2, [r3, #16]
5157:DRIVER/FatFs/source/ff.c **** 		res = follow_path(&djo, path_old);			/* Check old object */
 10851              		.loc 1 5157 18 view .LVU3724
5158:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK && (djo.fn[NSFLAG] & (NS_DOT | NS_NONAME))) res = FR_INVALID_NAME;	/* Check vali
 10852              		.loc 1 5158 3 view .LVU3725
5158:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK && (djo.fn[NSFLAG] & (NS_DOT | NS_NONAME))) res = FR_INVALID_NAME;	/* Check vali
 10853              		.loc 1 5158 9 is_stmt 0 view .LVU3726
 10854 002e 0199     		ldr	r1, [sp, #4]
 10855 0030 97A8     		add	r0, sp, #604
 10856              	.LVL1280:
5158:DRIVER/FatFs/source/ff.c **** 		if (res == FR_OK && (djo.fn[NSFLAG] & (NS_DOT | NS_NONAME))) res = FR_INVALID_NAME;	/* Check vali
 10857              		.loc 1 5158 9 view .LVU3727
 10858 0032 FFF7FEFF 		bl	follow_path
 10859              	.LVL1281:
5159:DRIVER/FatFs/source/ff.c **** #if FF_FS_LOCK
 10860              		.loc 1 5159 3 is_stmt 1 view .LVU3728
5159:DRIVER/FatFs/source/ff.c **** #if FF_FS_LOCK
 10861              		.loc 1 5159 6 is_stmt 0 view .LVU3729
 10862 0036 0446     		mov	r4, r0
 10863 0038 0028     		cmp	r0, #0
 10864 003a F0D1     		bne	.L789
5159:DRIVER/FatFs/source/ff.c **** #if FF_FS_LOCK
 10865              		.loc 1 5159 30 discriminator 1 view .LVU3730
 10866 003c 9DF88732 		ldrb	r3, [sp, #647]	@ zero_extendqisi2
5159:DRIVER/FatFs/source/ff.c **** #if FF_FS_LOCK
 10867              		.loc 1 5159 20 discriminator 1 view .LVU3731
 10868 0040 13F0A00F 		tst	r3, #160
 10869 0044 01D0     		beq	.L799
 10870              	.LVL1282:
5159:DRIVER/FatFs/source/ff.c **** #if FF_FS_LOCK
 10871              		.loc 1 5159 68 view .LVU3732
 10872 0046 0624     		movs	r4, #6
 10873 0048 E9E7     		b	.L789
 10874              	.LVL1283:
 10875              	.L799:
5165:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
 10876              		.loc 1 5165 3 is_stmt 1 view .LVU3733
5193:DRIVER/FatFs/source/ff.c **** 				memcpy(&djn, &djo, sizeof (DIR));		/* Duplicate the directory object */
 10877              		.loc 1 5193 5 view .LVU3734
5193:DRIVER/FatFs/source/ff.c **** 				memcpy(&djn, &djo, sizeof (DIR));		/* Duplicate the directory object */
 10878              		.loc 1 5193 20 is_stmt 0 view .LVU3735
 10879 004a 9E9D     		ldr	r5, [sp, #632]
5193:DRIVER/FatFs/source/ff.c **** 				memcpy(&djn, &djo, sizeof (DIR));		/* Duplicate the directory object */
 10880              		.loc 1 5193 5 view .LVU3736
 10881 004c 83AC     		add	r4, sp, #524
 10882 004e 2868     		ldr	r0, [r5]	@ unaligned
 10883              	.LVL1284:
5193:DRIVER/FatFs/source/ff.c **** 				memcpy(&djn, &djo, sizeof (DIR));		/* Duplicate the directory object */
 10884              		.loc 1 5193 5 view .LVU3737
 10885 0050 6968     		ldr	r1, [r5, #4]	@ unaligned
 10886 0052 AA68     		ldr	r2, [r5, #8]	@ unaligned
 10887 0054 EB68     		ldr	r3, [r5, #12]	@ unaligned
 10888 0056 0FC4     		stmia	r4!, {r0, r1, r2, r3}
 10889 0058 2869     		ldr	r0, [r5, #16]	@ unaligned
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 352


 10890 005a 6969     		ldr	r1, [r5, #20]	@ unaligned
 10891 005c AA69     		ldr	r2, [r5, #24]	@ unaligned
 10892 005e EB69     		ldr	r3, [r5, #28]	@ unaligned
 10893 0060 0FC4     		stmia	r4!, {r0, r1, r2, r3}
5194:DRIVER/FatFs/source/ff.c **** 				res = follow_path(&djn, path_new);		/* Make sure if new object name is not in use */
 10894              		.loc 1 5194 5 is_stmt 1 view .LVU3738
 10895 0062 0DF5177C 		add	ip, sp, #604
 10896 0066 BCE80F00 		ldmia	ip!, {r0, r1, r2, r3}
 10897 006a 0FC4     		stmia	r4!, {r0, r1, r2, r3}
 10898 006c BCE80F00 		ldmia	ip!, {r0, r1, r2, r3}
 10899 0070 0FC4     		stmia	r4!, {r0, r1, r2, r3}
 10900 0072 9CE80F00 		ldm	ip, {r0, r1, r2, r3}
 10901 0076 84E80F00 		stm	r4, {r0, r1, r2, r3}
5195:DRIVER/FatFs/source/ff.c **** 				if (res == FR_OK) {						/* Is new name already in use by any other object? */
 10902              		.loc 1 5195 5 view .LVU3739
5195:DRIVER/FatFs/source/ff.c **** 				if (res == FR_OK) {						/* Is new name already in use by any other object? */
 10903              		.loc 1 5195 11 is_stmt 0 view .LVU3740
 10904 007a 0099     		ldr	r1, [sp]
 10905 007c 8BA8     		add	r0, sp, #556
 10906 007e FFF7FEFF 		bl	follow_path
 10907              	.LVL1285:
5196:DRIVER/FatFs/source/ff.c **** 					res = (djn.obj.sclust == djo.obj.sclust && djn.dptr == djo.dptr) ? FR_NO_FILE : FR_EXIST;
 10908              		.loc 1 5196 5 is_stmt 1 view .LVU3741
5196:DRIVER/FatFs/source/ff.c **** 					res = (djn.obj.sclust == djo.obj.sclust && djn.dptr == djo.dptr) ? FR_NO_FILE : FR_EXIST;
 10909              		.loc 1 5196 8 is_stmt 0 view .LVU3742
 10910 0082 0446     		mov	r4, r0
 10911 0084 58B9     		cbnz	r0, .L790
5197:DRIVER/FatFs/source/ff.c **** 				}
 10912              		.loc 1 5197 6 is_stmt 1 view .LVU3743
5197:DRIVER/FatFs/source/ff.c **** 				}
 10913              		.loc 1 5197 84 is_stmt 0 view .LVU3744
 10914 0086 8D9A     		ldr	r2, [sp, #564]
 10915 0088 999B     		ldr	r3, [sp, #612]
 10916 008a 9A42     		cmp	r2, r3
 10917 008c 01D0     		beq	.L800
 10918              	.LVL1286:
5197:DRIVER/FatFs/source/ff.c **** 				}
 10919              		.loc 1 5197 84 view .LVU3745
 10920 008e 0824     		movs	r4, #8
 10921 0090 07E0     		b	.L791
 10922              	.LVL1287:
 10923              	.L800:
5197:DRIVER/FatFs/source/ff.c **** 				}
 10924              		.loc 1 5197 46 discriminator 1 view .LVU3746
 10925 0092 8F9A     		ldr	r2, [sp, #572]
 10926 0094 9B9B     		ldr	r3, [sp, #620]
 10927 0096 9A42     		cmp	r2, r3
 10928 0098 10D0     		beq	.L792
 10929              	.LVL1288:
5197:DRIVER/FatFs/source/ff.c **** 				}
 10930              		.loc 1 5197 84 view .LVU3747
 10931 009a 0824     		movs	r4, #8
 10932 009c 01E0     		b	.L791
 10933              	.LVL1289:
 10934              	.L790:
5199:DRIVER/FatFs/source/ff.c **** 					res = dir_register(&djn);			/* Register the new entry */
 10935              		.loc 1 5199 5 is_stmt 1 view .LVU3748
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 353


5199:DRIVER/FatFs/source/ff.c **** 					res = dir_register(&djn);			/* Register the new entry */
 10936              		.loc 1 5199 8 is_stmt 0 view .LVU3749
 10937 009e 0428     		cmp	r0, #4
 10938 00a0 0CD0     		beq	.L792
 10939              	.LVL1290:
 10940              	.L791:
5224:DRIVER/FatFs/source/ff.c **** 				res = dir_remove(&djo);		/* Remove old entry */
 10941              		.loc 1 5224 4 is_stmt 1 view .LVU3750
5224:DRIVER/FatFs/source/ff.c **** 				res = dir_remove(&djo);		/* Remove old entry */
 10942              		.loc 1 5224 7 is_stmt 0 view .LVU3751
 10943 00a2 002C     		cmp	r4, #0
 10944 00a4 BBD1     		bne	.L789
5225:DRIVER/FatFs/source/ff.c **** 				if (res == FR_OK) {
 10945              		.loc 1 5225 5 is_stmt 1 view .LVU3752
5225:DRIVER/FatFs/source/ff.c **** 				if (res == FR_OK) {
 10946              		.loc 1 5225 11 is_stmt 0 view .LVU3753
 10947 00a6 97A8     		add	r0, sp, #604
 10948 00a8 FFF7FEFF 		bl	dir_remove
 10949              	.LVL1291:
5226:DRIVER/FatFs/source/ff.c **** 					res = sync_fs(fs);
 10950              		.loc 1 5226 5 is_stmt 1 view .LVU3754
5226:DRIVER/FatFs/source/ff.c **** 					res = sync_fs(fs);
 10951              		.loc 1 5226 8 is_stmt 0 view .LVU3755
 10952 00ac 0446     		mov	r4, r0
 10953 00ae 0028     		cmp	r0, #0
 10954 00b0 B5D1     		bne	.L789
5227:DRIVER/FatFs/source/ff.c **** 				}
 10955              		.loc 1 5227 6 is_stmt 1 view .LVU3756
5227:DRIVER/FatFs/source/ff.c **** 				}
 10956              		.loc 1 5227 12 is_stmt 0 view .LVU3757
 10957 00b2 A398     		ldr	r0, [sp, #652]
 10958              	.LVL1292:
5227:DRIVER/FatFs/source/ff.c **** 				}
 10959              		.loc 1 5227 12 view .LVU3758
 10960 00b4 FFF7FEFF 		bl	sync_fs
 10961              	.LVL1293:
 10962 00b8 0446     		mov	r4, r0
 10963              	.LVL1294:
5227:DRIVER/FatFs/source/ff.c **** 				}
 10964              		.loc 1 5227 12 view .LVU3759
 10965 00ba B0E7     		b	.L789
 10966              	.LVL1295:
 10967              	.L792:
5200:DRIVER/FatFs/source/ff.c **** 					if (res == FR_OK) {
 10968              		.loc 1 5200 6 is_stmt 1 view .LVU3760
5200:DRIVER/FatFs/source/ff.c **** 					if (res == FR_OK) {
 10969              		.loc 1 5200 12 is_stmt 0 view .LVU3761
 10970 00bc 8BA8     		add	r0, sp, #556
 10971 00be FFF7FEFF 		bl	dir_register
 10972              	.LVL1296:
5201:DRIVER/FatFs/source/ff.c **** 						dir = djn.dir;					/* Copy directory entry of the object except name */
 10973              		.loc 1 5201 6 is_stmt 1 view .LVU3762
5201:DRIVER/FatFs/source/ff.c **** 						dir = djn.dir;					/* Copy directory entry of the object except name */
 10974              		.loc 1 5201 9 is_stmt 0 view .LVU3763
 10975 00c2 0446     		mov	r4, r0
 10976 00c4 0028     		cmp	r0, #0
 10977 00c6 AAD1     		bne	.L789
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 354


5202:DRIVER/FatFs/source/ff.c **** 						memcpy(dir + 13, buf + 13, SZDIRE - 13);
 10978              		.loc 1 5202 7 is_stmt 1 view .LVU3764
5202:DRIVER/FatFs/source/ff.c **** 						memcpy(dir + 13, buf + 13, SZDIRE - 13);
 10979              		.loc 1 5202 11 is_stmt 0 view .LVU3765
 10980 00c8 9299     		ldr	r1, [sp, #584]
 10981              	.LVL1297:
5203:DRIVER/FatFs/source/ff.c **** 						dir[DIR_Attr] = buf[DIR_Attr];
 10982              		.loc 1 5203 7 is_stmt 1 view .LVU3766
 10983 00ca DDF81952 		ldr	r5, [sp, #537]	@ unaligned
 10984 00ce DDF81D02 		ldr	r0, [sp, #541]	@ unaligned
 10985              	.LVL1298:
5203:DRIVER/FatFs/source/ff.c **** 						dir[DIR_Attr] = buf[DIR_Attr];
 10986              		.loc 1 5203 7 is_stmt 0 view .LVU3767
 10987 00d2 DDF82122 		ldr	r2, [sp, #545]	@ unaligned
 10988 00d6 DDF82532 		ldr	r3, [sp, #549]	@ unaligned
 10989 00da C1F80D50 		str	r5, [r1, #13]	@ unaligned
 10990 00de C1F81100 		str	r0, [r1, #17]	@ unaligned
 10991 00e2 C1F81520 		str	r2, [r1, #21]	@ unaligned
 10992 00e6 C1F81930 		str	r3, [r1, #25]	@ unaligned
 10993 00ea BDF82922 		ldrh	r2, [sp, #553]	@ unaligned
 10994 00ee 9DF82B32 		ldrb	r3, [sp, #555]	@ zero_extendqisi2
 10995 00f2 A1F81D20 		strh	r2, [r1, #29]	@ unaligned
 10996 00f6 CB77     		strb	r3, [r1, #31]
5204:DRIVER/FatFs/source/ff.c **** 						if (!(dir[DIR_Attr] & AM_DIR)) dir[DIR_Attr] |= AM_ARC;	/* Set archive attribute if it is a f
 10997              		.loc 1 5204 7 is_stmt 1 view .LVU3768
5204:DRIVER/FatFs/source/ff.c **** 						if (!(dir[DIR_Attr] & AM_DIR)) dir[DIR_Attr] |= AM_ARC;	/* Set archive attribute if it is a f
 10998              		.loc 1 5204 26 is_stmt 0 view .LVU3769
 10999 00f8 9DF81732 		ldrb	r3, [sp, #535]	@ zero_extendqisi2
5204:DRIVER/FatFs/source/ff.c **** 						if (!(dir[DIR_Attr] & AM_DIR)) dir[DIR_Attr] |= AM_ARC;	/* Set archive attribute if it is a f
 11000              		.loc 1 5204 21 view .LVU3770
 11001 00fc CB72     		strb	r3, [r1, #11]
5205:DRIVER/FatFs/source/ff.c **** 						fs->wflag = 1;
 11002              		.loc 1 5205 7 is_stmt 1 view .LVU3771
5205:DRIVER/FatFs/source/ff.c **** 						fs->wflag = 1;
 11003              		.loc 1 5205 10 is_stmt 0 view .LVU3772
 11004 00fe 13F0100F 		tst	r3, #16
 11005 0102 02D1     		bne	.L793
5205:DRIVER/FatFs/source/ff.c **** 						fs->wflag = 1;
 11006              		.loc 1 5205 38 is_stmt 1 discriminator 1 view .LVU3773
5205:DRIVER/FatFs/source/ff.c **** 						fs->wflag = 1;
 11007              		.loc 1 5205 52 is_stmt 0 discriminator 1 view .LVU3774
 11008 0104 43F02003 		orr	r3, r3, #32
 11009 0108 CB72     		strb	r3, [r1, #11]
 11010              	.L793:
5206:DRIVER/FatFs/source/ff.c **** 						if ((dir[DIR_Attr] & AM_DIR) && djo.obj.sclust != djn.obj.sclust) {	/* Update .. entry in the
 11011              		.loc 1 5206 7 is_stmt 1 view .LVU3775
5206:DRIVER/FatFs/source/ff.c **** 						if ((dir[DIR_Attr] & AM_DIR) && djo.obj.sclust != djn.obj.sclust) {	/* Update .. entry in the
 11012              		.loc 1 5206 9 is_stmt 0 view .LVU3776
 11013 010a A39D     		ldr	r5, [sp, #652]
5206:DRIVER/FatFs/source/ff.c **** 						if ((dir[DIR_Attr] & AM_DIR) && djo.obj.sclust != djn.obj.sclust) {	/* Update .. entry in the
 11014              		.loc 1 5206 17 view .LVU3777
 11015 010c 0123     		movs	r3, #1
 11016 010e 2B71     		strb	r3, [r5, #4]
5207:DRIVER/FatFs/source/ff.c **** 							sect = clst2sect(fs, ld_clust(fs, dir));
 11017              		.loc 1 5207 7 is_stmt 1 view .LVU3778
5207:DRIVER/FatFs/source/ff.c **** 							sect = clst2sect(fs, ld_clust(fs, dir));
 11018              		.loc 1 5207 15 is_stmt 0 view .LVU3779
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 355


 11019 0110 CB7A     		ldrb	r3, [r1, #11]	@ zero_extendqisi2
5207:DRIVER/FatFs/source/ff.c **** 							sect = clst2sect(fs, ld_clust(fs, dir));
 11020              		.loc 1 5207 10 view .LVU3780
 11021 0112 13F0100F 		tst	r3, #16
 11022 0116 C4D0     		beq	.L791
5207:DRIVER/FatFs/source/ff.c **** 							sect = clst2sect(fs, ld_clust(fs, dir));
 11023              		.loc 1 5207 36 discriminator 1 view .LVU3781
 11024 0118 999A     		ldr	r2, [sp, #612]
 11025 011a 8D9B     		ldr	r3, [sp, #564]
 11026 011c 9A42     		cmp	r2, r3
 11027 011e C0D0     		beq	.L791
5208:DRIVER/FatFs/source/ff.c **** 							if (sect == 0) {
 11028              		.loc 1 5208 8 is_stmt 1 view .LVU3782
5208:DRIVER/FatFs/source/ff.c **** 							if (sect == 0) {
 11029              		.loc 1 5208 15 is_stmt 0 view .LVU3783
 11030 0120 2846     		mov	r0, r5
 11031 0122 FFF7FEFF 		bl	ld_clust
 11032              	.LVL1299:
5208:DRIVER/FatFs/source/ff.c **** 							if (sect == 0) {
 11033              		.loc 1 5208 15 view .LVU3784
 11034 0126 0146     		mov	r1, r0
 11035 0128 2846     		mov	r0, r5
 11036 012a FFF7FEFF 		bl	clst2sect
 11037              	.LVL1300:
5209:DRIVER/FatFs/source/ff.c **** 								res = FR_INT_ERR;
 11038              		.loc 1 5209 8 is_stmt 1 view .LVU3785
5209:DRIVER/FatFs/source/ff.c **** 								res = FR_INT_ERR;
 11039              		.loc 1 5209 11 is_stmt 0 view .LVU3786
 11040 012e 0146     		mov	r1, r0
 11041 0130 08B9     		cbnz	r0, .L801
 11042              	.LVL1301:
5210:DRIVER/FatFs/source/ff.c **** 							} else {
 11043              		.loc 1 5210 13 view .LVU3787
 11044 0132 0224     		movs	r4, #2
 11045 0134 73E7     		b	.L789
 11046              	.LVL1302:
 11047              	.L801:
5213:DRIVER/FatFs/source/ff.c **** 								dir = fs->win + SZDIRE * 1;	/* Ptr to .. entry */
 11048              		.loc 1 5213 9 is_stmt 1 view .LVU3788
5213:DRIVER/FatFs/source/ff.c **** 								dir = fs->win + SZDIRE * 1;	/* Ptr to .. entry */
 11049              		.loc 1 5213 15 is_stmt 0 view .LVU3789
 11050 0136 2846     		mov	r0, r5
 11051              	.LVL1303:
5213:DRIVER/FatFs/source/ff.c **** 								dir = fs->win + SZDIRE * 1;	/* Ptr to .. entry */
 11052              		.loc 1 5213 15 view .LVU3790
 11053 0138 FFF7FEFF 		bl	move_window
 11054              	.LVL1304:
5214:DRIVER/FatFs/source/ff.c **** 								if (res == FR_OK && dir[1] == '.') {
 11055              		.loc 1 5214 9 is_stmt 1 view .LVU3791
5214:DRIVER/FatFs/source/ff.c **** 								if (res == FR_OK && dir[1] == '.') {
 11056              		.loc 1 5214 17 is_stmt 0 view .LVU3792
 11057 013c A39B     		ldr	r3, [sp, #652]
5214:DRIVER/FatFs/source/ff.c **** 								if (res == FR_OK && dir[1] == '.') {
 11058              		.loc 1 5214 13 view .LVU3793
 11059 013e 03F15801 		add	r1, r3, #88
 11060              	.LVL1305:
5215:DRIVER/FatFs/source/ff.c **** 									st_clust(fs, dir, djn.obj.sclust);
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 356


 11061              		.loc 1 5215 9 is_stmt 1 view .LVU3794
5215:DRIVER/FatFs/source/ff.c **** 									st_clust(fs, dir, djn.obj.sclust);
 11062              		.loc 1 5215 12 is_stmt 0 view .LVU3795
 11063 0142 0446     		mov	r4, r0
 11064 0144 0028     		cmp	r0, #0
 11065 0146 7FF46AAF 		bne	.L789
5215:DRIVER/FatFs/source/ff.c **** 									st_clust(fs, dir, djn.obj.sclust);
 11066              		.loc 1 5215 32 discriminator 1 view .LVU3796
 11067 014a 93F85920 		ldrb	r2, [r3, #89]	@ zero_extendqisi2
5215:DRIVER/FatFs/source/ff.c **** 									st_clust(fs, dir, djn.obj.sclust);
 11068              		.loc 1 5215 26 discriminator 1 view .LVU3797
 11069 014e 2E2A     		cmp	r2, #46
 11070 0150 A7D1     		bne	.L791
5216:DRIVER/FatFs/source/ff.c **** 									fs->wflag = 1;
 11071              		.loc 1 5216 10 is_stmt 1 view .LVU3798
 11072 0152 8D9A     		ldr	r2, [sp, #564]
 11073 0154 1846     		mov	r0, r3
 11074              	.LVL1306:
5216:DRIVER/FatFs/source/ff.c **** 									fs->wflag = 1;
 11075              		.loc 1 5216 10 is_stmt 0 view .LVU3799
 11076 0156 FFF7FEFF 		bl	st_clust
 11077              	.LVL1307:
5217:DRIVER/FatFs/source/ff.c **** 								}
 11078              		.loc 1 5217 10 is_stmt 1 view .LVU3800
5217:DRIVER/FatFs/source/ff.c **** 								}
 11079              		.loc 1 5217 20 is_stmt 0 view .LVU3801
 11080 015a A39B     		ldr	r3, [sp, #652]
 11081 015c 0122     		movs	r2, #1
 11082 015e 1A71     		strb	r2, [r3, #4]
 11083 0160 9FE7     		b	.L791
 11084              		.cfi_endproc
 11085              	.LFE54:
 11087              		.section	.rodata.f_mkfs.str1.4,"aMS",%progbits,1
 11088              		.align	2
 11089              	.LC3:
 11090 0000 EBFE904D 		.ascii	"\353\376\220MSDOS5.0\000"
 11090      53444F53 
 11090      352E3000 
 11091              		.align	2
 11092              	.LC4:
 11093 000c 4E4F204E 		.ascii	"NO NAME    FAT32   \000"
 11093      414D4520 
 11093      20202046 
 11093      41543332 
 11093      20202000 
 11094              		.align	2
 11095              	.LC5:
 11096 0020 4E4F204E 		.ascii	"NO NAME    FAT     \000"
 11096      414D4520 
 11096      20202046 
 11096      41542020 
 11096      20202000 
 11097              		.section	.text.f_mkfs,"ax",%progbits
 11098              		.align	1
 11099              		.global	f_mkfs
 11100              		.syntax unified
 11101              		.thumb
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 357


 11102              		.thumb_func
 11104              	f_mkfs:
 11105              	.LVL1308:
 11106              	.LFB56:
5879:DRIVER/FatFs/source/ff.c **** 
5880:DRIVER/FatFs/source/ff.c **** 
5881:DRIVER/FatFs/source/ff.c **** 
5882:DRIVER/FatFs/source/ff.c **** FRESULT f_mkfs (
5883:DRIVER/FatFs/source/ff.c **** 	const TCHAR* path,		/* Logical drive number */
5884:DRIVER/FatFs/source/ff.c **** 	const MKFS_PARM* opt,	/* Format options */
5885:DRIVER/FatFs/source/ff.c **** 	void* work,				/* Pointer to working buffer (null: use len bytes of heap memory) */
5886:DRIVER/FatFs/source/ff.c **** 	UINT len				/* Size of working buffer [byte] */
5887:DRIVER/FatFs/source/ff.c **** )
5888:DRIVER/FatFs/source/ff.c **** {
 11107              		.loc 1 5888 1 is_stmt 1 view -0
 11108              		.cfi_startproc
 11109              		@ args = 0, pretend = 0, frame = 64
 11110              		@ frame_needed = 0, uses_anonymous_args = 0
 11111              		.loc 1 5888 1 is_stmt 0 view .LVU3803
 11112 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 11113              	.LCFI111:
 11114              		.cfi_def_cfa_offset 36
 11115              		.cfi_offset 4, -36
 11116              		.cfi_offset 5, -32
 11117              		.cfi_offset 6, -28
 11118              		.cfi_offset 7, -24
 11119              		.cfi_offset 8, -20
 11120              		.cfi_offset 9, -16
 11121              		.cfi_offset 10, -12
 11122              		.cfi_offset 11, -8
 11123              		.cfi_offset 14, -4
 11124 0004 91B0     		sub	sp, sp, #68
 11125              	.LCFI112:
 11126              		.cfi_def_cfa_offset 104
 11127 0006 0990     		str	r0, [sp, #36]
 11128 0008 0E46     		mov	r6, r1
 11129 000a 0192     		str	r2, [sp, #4]
 11130 000c 1F46     		mov	r7, r3
5889:DRIVER/FatFs/source/ff.c **** 	static const WORD cst[] = {1, 4, 16, 64, 256, 512, 0};	/* Cluster size boundary for FAT volume (4K
 11131              		.loc 1 5889 2 is_stmt 1 view .LVU3804
5890:DRIVER/FatFs/source/ff.c **** 	static const WORD cst32[] = {1, 2, 4, 8, 16, 32, 0};	/* Cluster size boundary for FAT32 volume (12
 11132              		.loc 1 5890 2 view .LVU3805
5891:DRIVER/FatFs/source/ff.c **** 	static const MKFS_PARM defopt = {FM_ANY, 0, 0, 0, 0};	/* Default parameter */
 11133              		.loc 1 5891 2 view .LVU3806
5892:DRIVER/FatFs/source/ff.c **** 	BYTE fsopt, fsty, sys, pdrv, ipart;
 11134              		.loc 1 5892 2 view .LVU3807
5893:DRIVER/FatFs/source/ff.c **** 	BYTE *buf;
 11135              		.loc 1 5893 2 view .LVU3808
5894:DRIVER/FatFs/source/ff.c **** 	BYTE *pte;
 11136              		.loc 1 5894 2 view .LVU3809
5895:DRIVER/FatFs/source/ff.c **** 	WORD ss;	/* Sector size */
 11137              		.loc 1 5895 2 view .LVU3810
5896:DRIVER/FatFs/source/ff.c **** 	DWORD sz_buf, sz_blk, n_clst, pau, nsect, n, vsn;
 11138              		.loc 1 5896 2 view .LVU3811
5897:DRIVER/FatFs/source/ff.c **** 	LBA_t sz_vol, b_vol, b_fat, b_data;		/* Size of volume, Base LBA of volume, fat, data */
 11139              		.loc 1 5897 2 view .LVU3812
5898:DRIVER/FatFs/source/ff.c **** 	LBA_t sect, lba[2];
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 358


 11140              		.loc 1 5898 2 view .LVU3813
5899:DRIVER/FatFs/source/ff.c **** 	DWORD sz_rsv, sz_fat, sz_dir, sz_au;	/* Size of reserved, fat, dir, data, cluster */
 11141              		.loc 1 5899 2 view .LVU3814
5900:DRIVER/FatFs/source/ff.c **** 	UINT n_fat, n_root, i;					/* Index, Number of FATs and Number of roor dir entries */
 11142              		.loc 1 5900 2 view .LVU3815
5901:DRIVER/FatFs/source/ff.c **** 	int vol;
 11143              		.loc 1 5901 2 view .LVU3816
5902:DRIVER/FatFs/source/ff.c **** 	DSTATUS ds;
 11144              		.loc 1 5902 2 view .LVU3817
5903:DRIVER/FatFs/source/ff.c **** 	FRESULT res;
 11145              		.loc 1 5903 2 view .LVU3818
5904:DRIVER/FatFs/source/ff.c **** 
5905:DRIVER/FatFs/source/ff.c **** 
5906:DRIVER/FatFs/source/ff.c **** 	/* Check mounted drive and clear work area */
5907:DRIVER/FatFs/source/ff.c **** 	vol = get_ldnumber(&path);					/* Get target logical drive */
 11146              		.loc 1 5907 2 view .LVU3819
 11147              		.loc 1 5907 8 is_stmt 0 view .LVU3820
 11148 000e 09A8     		add	r0, sp, #36
 11149              	.LVL1309:
 11150              		.loc 1 5907 8 view .LVU3821
 11151 0010 FFF7FEFF 		bl	get_ldnumber
 11152              	.LVL1310:
5908:DRIVER/FatFs/source/ff.c **** 	if (vol < 0) return FR_INVALID_DRIVE;
 11153              		.loc 1 5908 2 is_stmt 1 view .LVU3822
 11154              		.loc 1 5908 5 is_stmt 0 view .LVU3823
 11155 0014 0028     		cmp	r0, #0
 11156              		.loc 1 5908 5 view .LVU3824
 11157 0016 C0F20483 		blt	.L852
5909:DRIVER/FatFs/source/ff.c **** 	if (FatFs[vol]) FatFs[vol]->fs_type = 0;	/* Clear the fs object if mounted */
 11158              		.loc 1 5909 2 is_stmt 1 view .LVU3825
 11159              		.loc 1 5909 11 is_stmt 0 view .LVU3826
 11160 001a B54B     		ldr	r3, .L909
 11161 001c 53F82030 		ldr	r3, [r3, r0, lsl #2]
 11162              		.loc 1 5909 5 view .LVU3827
 11163 0020 0BB1     		cbz	r3, .L804
 11164              		.loc 1 5909 18 is_stmt 1 discriminator 1 view .LVU3828
 11165              		.loc 1 5909 38 is_stmt 0 discriminator 1 view .LVU3829
 11166 0022 0022     		movs	r2, #0
 11167 0024 1A70     		strb	r2, [r3]
 11168              	.L804:
5910:DRIVER/FatFs/source/ff.c **** 	pdrv = LD2PD(vol);		/* Hosting physical drive */
 11169              		.loc 1 5910 2 is_stmt 1 view .LVU3830
 11170              		.loc 1 5910 7 is_stmt 0 view .LVU3831
 11171 0026 C4B2     		uxtb	r4, r0
 11172              	.LVL1311:
5911:DRIVER/FatFs/source/ff.c **** 	ipart = LD2PT(vol);		/* Hosting partition (0:create as new, 1..:existing partition) */
 11173              		.loc 1 5911 2 is_stmt 1 view .LVU3832
5912:DRIVER/FatFs/source/ff.c **** 
5913:DRIVER/FatFs/source/ff.c **** 	/* Initialize the hosting physical drive */
5914:DRIVER/FatFs/source/ff.c **** 	ds = disk_initialize(pdrv);
 11174              		.loc 1 5914 2 view .LVU3833
 11175              		.loc 1 5914 7 is_stmt 0 view .LVU3834
 11176 0028 2046     		mov	r0, r4
 11177              	.LVL1312:
 11178              		.loc 1 5914 7 view .LVU3835
 11179 002a FFF7FEFF 		bl	disk_initialize
 11180              	.LVL1313:
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 359


5915:DRIVER/FatFs/source/ff.c **** 	if (ds & STA_NOINIT) return FR_NOT_READY;
 11181              		.loc 1 5915 2 is_stmt 1 view .LVU3836
 11182              		.loc 1 5915 5 is_stmt 0 view .LVU3837
 11183 002e 10F0010F 		tst	r0, #1
 11184 0032 40F0F882 		bne	.L853
5916:DRIVER/FatFs/source/ff.c **** 	if (ds & STA_PROTECT) return FR_WRITE_PROTECTED;
 11185              		.loc 1 5916 2 is_stmt 1 view .LVU3838
 11186              		.loc 1 5916 5 is_stmt 0 view .LVU3839
 11187 0036 10F0040F 		tst	r0, #4
 11188 003a 40F0F882 		bne	.L854
5917:DRIVER/FatFs/source/ff.c **** 
5918:DRIVER/FatFs/source/ff.c **** 	/* Get physical drive parameters (sz_drv, sz_blk and ss) */
5919:DRIVER/FatFs/source/ff.c **** 	if (!opt) opt = &defopt;	/* Use default parameter if it is not given */
 11189              		.loc 1 5919 2 is_stmt 1 view .LVU3840
 11190              		.loc 1 5919 5 is_stmt 0 view .LVU3841
 11191 003e 002E     		cmp	r6, #0
 11192 0040 3AD0     		beq	.L894
 11193              	.LVL1314:
 11194              	.L805:
5920:DRIVER/FatFs/source/ff.c **** 	sz_blk = opt->align;
 11195              		.loc 1 5920 2 is_stmt 1 view .LVU3842
 11196              		.loc 1 5920 14 is_stmt 0 view .LVU3843
 11197 0042 7368     		ldr	r3, [r6, #4]
 11198              		.loc 1 5920 9 view .LVU3844
 11199 0044 0E93     		str	r3, [sp, #56]
5921:DRIVER/FatFs/source/ff.c **** 	if (sz_blk == 0) disk_ioctl(pdrv, GET_BLOCK_SIZE, &sz_blk);					/* Block size from the paramter or
 11200              		.loc 1 5921 2 is_stmt 1 view .LVU3845
 11201              		.loc 1 5921 5 is_stmt 0 view .LVU3846
 11202 0046 002B     		cmp	r3, #0
 11203 0048 38D0     		beq	.L895
 11204              	.LVL1315:
 11205              	.L806:
5922:DRIVER/FatFs/source/ff.c ****  	if (sz_blk == 0 || sz_blk > 0x8000 || (sz_blk & (sz_blk - 1))) sz_blk = 1;	/* Use default if the 
 11206              		.loc 1 5922 3 is_stmt 1 view .LVU3847
 11207              		.loc 1 5922 19 is_stmt 0 view .LVU3848
 11208 004a 0E9A     		ldr	r2, [sp, #56]
 11209 004c 531E     		subs	r3, r2, #1
 11210              		.loc 1 5922 6 view .LVU3849
 11211 004e B3F5004F 		cmp	r3, #32768
 11212 0052 01D2     		bcs	.L807
 11213              		.loc 1 5922 38 discriminator 2 view .LVU3850
 11214 0054 1A42     		tst	r2, r3
 11215 0056 01D0     		beq	.L808
 11216              	.L807:
 11217              		.loc 1 5922 66 is_stmt 1 discriminator 3 view .LVU3851
 11218              		.loc 1 5922 73 is_stmt 0 discriminator 3 view .LVU3852
 11219 0058 0123     		movs	r3, #1
 11220 005a 0E93     		str	r3, [sp, #56]
 11221              	.L808:
5923:DRIVER/FatFs/source/ff.c **** #if FF_MAX_SS != FF_MIN_SS
5924:DRIVER/FatFs/source/ff.c **** 	if (disk_ioctl(pdrv, GET_SECTOR_SIZE, &ss) != RES_OK) return FR_DISK_ERR;
 11222              		.loc 1 5924 2 is_stmt 1 view .LVU3853
 11223              		.loc 1 5924 6 is_stmt 0 view .LVU3854
 11224 005c 0DF13E02 		add	r2, sp, #62
 11225 0060 0221     		movs	r1, #2
 11226 0062 2046     		mov	r0, r4
 11227 0064 FFF7FEFF 		bl	disk_ioctl
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 360


 11228              	.LVL1316:
 11229              		.loc 1 5924 5 view .LVU3855
 11230 0068 0028     		cmp	r0, #0
 11231 006a 40F0E282 		bne	.L856
5925:DRIVER/FatFs/source/ff.c **** 	if (ss > FF_MAX_SS || ss < FF_MIN_SS || (ss & (ss - 1))) return FR_DISK_ERR;
 11232              		.loc 1 5925 2 is_stmt 1 view .LVU3856
 11233              		.loc 1 5925 21 is_stmt 0 view .LVU3857
 11234 006e BDF83E30 		ldrh	r3, [sp, #62]
 11235 0072 A3F50072 		sub	r2, r3, #512
 11236 0076 92B2     		uxth	r2, r2
 11237              		.loc 1 5925 5 view .LVU3858
 11238 0078 B2F5606F 		cmp	r2, #3584
 11239 007c 00F2DB82 		bhi	.L857
 11240              		.loc 1 5925 52 discriminator 2 view .LVU3859
 11241 0080 5A1E     		subs	r2, r3, #1
 11242              		.loc 1 5925 39 discriminator 2 view .LVU3860
 11243 0082 1342     		tst	r3, r2
 11244 0084 40F0D982 		bne	.L858
5926:DRIVER/FatFs/source/ff.c **** #else
5927:DRIVER/FatFs/source/ff.c **** 	ss = FF_MAX_SS;
5928:DRIVER/FatFs/source/ff.c **** #endif
5929:DRIVER/FatFs/source/ff.c **** 
5930:DRIVER/FatFs/source/ff.c **** 	/* Options for FAT sub-type and FAT parameters */
5931:DRIVER/FatFs/source/ff.c **** 	fsopt = opt->fmt & (FM_ANY | FM_SFD);
 11245              		.loc 1 5931 2 is_stmt 1 view .LVU3861
 11246              		.loc 1 5931 13 is_stmt 0 view .LVU3862
 11247 0088 3578     		ldrb	r5, [r6]	@ zero_extendqisi2
 11248              	.LVL1317:
5932:DRIVER/FatFs/source/ff.c **** 	n_fat = (opt->n_fat >= 1 && opt->n_fat <= 2) ? opt->n_fat : 1;
 11249              		.loc 1 5932 2 is_stmt 1 view .LVU3863
 11250              		.loc 1 5932 14 is_stmt 0 view .LVU3864
 11251 008a 7178     		ldrb	r1, [r6, #1]	@ zero_extendqisi2
 11252              		.loc 1 5932 27 view .LVU3865
 11253 008c 4A1E     		subs	r2, r1, #1
 11254 008e D2B2     		uxtb	r2, r2
 11255              		.loc 1 5932 60 view .LVU3866
 11256 0090 012A     		cmp	r2, #1
 11257 0092 19D9     		bls	.L896
 11258 0094 4FF0010B 		mov	fp, #1
 11259              	.L809:
 11260              	.LVL1318:
5933:DRIVER/FatFs/source/ff.c **** 	n_root = (opt->n_root >= 1 && opt->n_root <= 32768 && (opt->n_root % (ss / SZDIRE)) == 0) ? opt->n
 11261              		.loc 1 5933 2 is_stmt 1 discriminator 4 view .LVU3867
 11262              		.loc 1 5933 15 is_stmt 0 discriminator 4 view .LVU3868
 11263 0098 D6F80890 		ldr	r9, [r6, #8]
 11264              		.loc 1 5933 29 discriminator 4 view .LVU3869
 11265 009c 09F1FF32 		add	r2, r9, #-1
 11266              		.loc 1 5933 106 discriminator 4 view .LVU3870
 11267 00a0 B2F5004F 		cmp	r2, #32768
 11268 00a4 12D2     		bcs	.L860
 11269              		.loc 1 5933 75 discriminator 1 view .LVU3871
 11270 00a6 5909     		lsrs	r1, r3, #5
 11271              		.loc 1 5933 69 discriminator 1 view .LVU3872
 11272 00a8 B9FBF1F2 		udiv	r2, r9, r1
 11273 00ac 01FB1292 		mls	r2, r1, r2, r9
 11274              		.loc 1 5933 53 discriminator 1 view .LVU3873
 11275 00b0 72B1     		cbz	r2, .L810
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 361


 11276              		.loc 1 5933 106 view .LVU3874
 11277 00b2 4FF40079 		mov	r9, #512
 11278 00b6 0BE0     		b	.L810
 11279              	.LVL1319:
 11280              	.L894:
5919:DRIVER/FatFs/source/ff.c **** 	sz_blk = opt->align;
 11281              		.loc 1 5919 16 view .LVU3875
 11282 00b8 8E4E     		ldr	r6, .L909+4
 11283              	.LVL1320:
5919:DRIVER/FatFs/source/ff.c **** 	sz_blk = opt->align;
 11284              		.loc 1 5919 16 view .LVU3876
 11285 00ba C2E7     		b	.L805
 11286              	.LVL1321:
 11287              	.L895:
5921:DRIVER/FatFs/source/ff.c ****  	if (sz_blk == 0 || sz_blk > 0x8000 || (sz_blk & (sz_blk - 1))) sz_blk = 1;	/* Use default if the 
 11288              		.loc 1 5921 19 is_stmt 1 discriminator 1 view .LVU3877
 11289 00bc 0EAA     		add	r2, sp, #56
 11290 00be 0321     		movs	r1, #3
 11291 00c0 2046     		mov	r0, r4
 11292              	.LVL1322:
5921:DRIVER/FatFs/source/ff.c ****  	if (sz_blk == 0 || sz_blk > 0x8000 || (sz_blk & (sz_blk - 1))) sz_blk = 1;	/* Use default if the 
 11293              		.loc 1 5921 19 is_stmt 0 discriminator 1 view .LVU3878
 11294 00c2 FFF7FEFF 		bl	disk_ioctl
 11295              	.LVL1323:
 11296 00c6 C0E7     		b	.L806
 11297              	.LVL1324:
 11298              	.L896:
5932:DRIVER/FatFs/source/ff.c **** 	n_root = (opt->n_root >= 1 && opt->n_root <= 32768 && (opt->n_root % (ss / SZDIRE)) == 0) ? opt->n
 11299              		.loc 1 5932 60 discriminator 1 view .LVU3879
 11300 00c8 8B46     		mov	fp, r1
 11301 00ca E5E7     		b	.L809
 11302              	.LVL1325:
 11303              	.L860:
 11304              		.loc 1 5933 106 view .LVU3880
 11305 00cc 4FF40079 		mov	r9, #512
 11306              	.L810:
 11307              	.LVL1326:
5934:DRIVER/FatFs/source/ff.c **** 	sz_au = (opt->au_size <= 0x1000000 && (opt->au_size & (opt->au_size - 1)) == 0) ? opt->au_size : 0
 11308              		.loc 1 5934 2 is_stmt 1 discriminator 6 view .LVU3881
 11309              		.loc 1 5934 14 is_stmt 0 discriminator 6 view .LVU3882
 11310 00d0 F668     		ldr	r6, [r6, #12]
 11311              	.LVL1327:
 11312              		.loc 1 5934 97 discriminator 6 view .LVU3883
 11313 00d2 B6F1807F 		cmp	r6, #16777216
 11314 00d6 04D8     		bhi	.L861
 11315              		.loc 1 5934 70 discriminator 1 view .LVU3884
 11316 00d8 721E     		subs	r2, r6, #1
 11317              		.loc 1 5934 37 discriminator 1 view .LVU3885
 11318 00da 1642     		tst	r6, r2
 11319 00dc 02D0     		beq	.L811
 11320              		.loc 1 5934 97 view .LVU3886
 11321 00de 0026     		movs	r6, #0
 11322 00e0 00E0     		b	.L811
 11323              	.L861:
 11324 00e2 0026     		movs	r6, #0
 11325              	.L811:
 11326              	.LVL1328:
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 362


5935:DRIVER/FatFs/source/ff.c **** 	sz_au /= ss;	/* Byte --> Sector */
 11327              		.loc 1 5935 2 is_stmt 1 discriminator 6 view .LVU3887
 11328              		.loc 1 5935 8 is_stmt 0 discriminator 6 view .LVU3888
 11329 00e4 B6FBF3F6 		udiv	r6, r6, r3
 11330              	.LVL1329:
5936:DRIVER/FatFs/source/ff.c **** 
5937:DRIVER/FatFs/source/ff.c **** 	/* Get working buffer */
5938:DRIVER/FatFs/source/ff.c **** 	sz_buf = len / ss;		/* Size of working buffer [sector] */
 11331              		.loc 1 5938 2 is_stmt 1 discriminator 6 view .LVU3889
 11332              		.loc 1 5938 9 is_stmt 0 discriminator 6 view .LVU3890
 11333 00e8 B7FBF3F2 		udiv	r2, r7, r3
 11334 00ec 0392     		str	r2, [sp, #12]
 11335              	.LVL1330:
5939:DRIVER/FatFs/source/ff.c **** 	if (sz_buf == 0) return FR_NOT_ENOUGH_CORE;
 11336              		.loc 1 5939 2 is_stmt 1 discriminator 6 view .LVU3891
 11337              		.loc 1 5939 5 is_stmt 0 discriminator 6 view .LVU3892
 11338 00ee BB42     		cmp	r3, r7
 11339 00f0 00F2A582 		bhi	.L862
5940:DRIVER/FatFs/source/ff.c **** 	buf = (BYTE*)work;		/* Working buffer */
 11340              		.loc 1 5940 2 is_stmt 1 view .LVU3893
 11341              	.LVL1331:
5941:DRIVER/FatFs/source/ff.c **** #if FF_USE_LFN == 3
5942:DRIVER/FatFs/source/ff.c **** 	if (!buf) buf = ff_memalloc(sz_buf * ss);	/* Use heap memory for working buffer */
5943:DRIVER/FatFs/source/ff.c **** #endif
5944:DRIVER/FatFs/source/ff.c **** 	if (!buf) return FR_NOT_ENOUGH_CORE;
 11342              		.loc 1 5944 2 view .LVU3894
 11343              		.loc 1 5944 5 is_stmt 0 view .LVU3895
 11344 00f4 019B     		ldr	r3, [sp, #4]
 11345 00f6 002B     		cmp	r3, #0
 11346 00f8 00F0A382 		beq	.L863
5945:DRIVER/FatFs/source/ff.c **** 
5946:DRIVER/FatFs/source/ff.c **** 	/* Determine where the volume to be located (b_vol, sz_vol) */
5947:DRIVER/FatFs/source/ff.c **** 	b_vol = sz_vol = 0;
 11347              		.loc 1 5947 2 is_stmt 1 view .LVU3896
 11348              		.loc 1 5947 17 is_stmt 0 view .LVU3897
 11349 00fc 0023     		movs	r3, #0
 11350 00fe 0D93     		str	r3, [sp, #52]
 11351              	.LVL1332:
5948:DRIVER/FatFs/source/ff.c **** 	if (FF_MULTI_PARTITION && ipart != 0) {	/* Is the volume associated with any specific partition? *
 11352              		.loc 1 5948 2 is_stmt 1 view .LVU3898
5949:DRIVER/FatFs/source/ff.c **** 		/* Get partition location from the existing partition table */
5950:DRIVER/FatFs/source/ff.c **** 		if (disk_read(pdrv, buf, 0, 1) != RES_OK) LEAVE_MKFS(FR_DISK_ERR);	/* Load MBR */
5951:DRIVER/FatFs/source/ff.c **** 		if (ld_word(buf + BS_55AA) != 0xAA55) LEAVE_MKFS(FR_MKFS_ABORTED);	/* Check if MBR is valid */
5952:DRIVER/FatFs/source/ff.c **** #if FF_LBA64
5953:DRIVER/FatFs/source/ff.c **** 		if (buf[MBR_Table + PTE_System] == 0xEE) {	/* GPT protective MBR? */
5954:DRIVER/FatFs/source/ff.c **** 			DWORD n_ent, ofs;
5955:DRIVER/FatFs/source/ff.c **** 			QWORD pt_lba;
5956:DRIVER/FatFs/source/ff.c **** 
5957:DRIVER/FatFs/source/ff.c **** 			/* Get the partition location from GPT */
5958:DRIVER/FatFs/source/ff.c **** 			if (disk_read(pdrv, buf, 1, 1) != RES_OK) LEAVE_MKFS(FR_DISK_ERR);	/* Load GPT header sector (ne
5959:DRIVER/FatFs/source/ff.c **** 			if (!test_gpt_header(buf)) LEAVE_MKFS(FR_MKFS_ABORTED);	/* Check if GPT header is valid */
5960:DRIVER/FatFs/source/ff.c **** 			n_ent = ld_dword(buf + GPTH_PtNum);		/* Number of entries */
5961:DRIVER/FatFs/source/ff.c **** 			pt_lba = ld_qword(buf + GPTH_PtOfs);	/* Table start sector */
5962:DRIVER/FatFs/source/ff.c **** 			ofs = i = 0;
5963:DRIVER/FatFs/source/ff.c **** 			while (n_ent) {		/* Find MS Basic partition with order of ipart */
5964:DRIVER/FatFs/source/ff.c **** 				if (ofs == 0 && disk_read(pdrv, buf, pt_lba++, 1) != RES_OK) LEAVE_MKFS(FR_DISK_ERR);	/* Get PT
5965:DRIVER/FatFs/source/ff.c **** 				if (!memcmp(buf + ofs + GPTE_PtGuid, GUID_MS_Basic, 16) && ++i == ipart) {	/* MS basic data par
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 363


5966:DRIVER/FatFs/source/ff.c **** 					b_vol = ld_qword(buf + ofs + GPTE_FstLba);
5967:DRIVER/FatFs/source/ff.c **** 					sz_vol = ld_qword(buf + ofs + GPTE_LstLba) - b_vol + 1;
5968:DRIVER/FatFs/source/ff.c **** 					break;
5969:DRIVER/FatFs/source/ff.c **** 				}
5970:DRIVER/FatFs/source/ff.c **** 				n_ent--; ofs = (ofs + SZ_GPTE) % ss;	/* Next entry */
5971:DRIVER/FatFs/source/ff.c **** 			}
5972:DRIVER/FatFs/source/ff.c **** 			if (n_ent == 0) LEAVE_MKFS(FR_MKFS_ABORTED);	/* Partition not found */
5973:DRIVER/FatFs/source/ff.c **** 			fsopt |= 0x80;	/* Partitioning is in GPT */
5974:DRIVER/FatFs/source/ff.c **** 		} else
5975:DRIVER/FatFs/source/ff.c **** #endif
5976:DRIVER/FatFs/source/ff.c **** 		{	/* Get the partition location from MBR partition table */
5977:DRIVER/FatFs/source/ff.c **** 			pte = buf + (MBR_Table + (ipart - 1) * SZ_PTE);
5978:DRIVER/FatFs/source/ff.c **** 			if (ipart > 4 || pte[PTE_System] == 0) LEAVE_MKFS(FR_MKFS_ABORTED);	/* No partition? */
5979:DRIVER/FatFs/source/ff.c **** 			b_vol = ld_dword(pte + PTE_StLba);		/* Get volume start sector */
5980:DRIVER/FatFs/source/ff.c **** 			sz_vol = ld_dword(pte + PTE_SizLba);	/* Get volume size */
5981:DRIVER/FatFs/source/ff.c **** 		}
5982:DRIVER/FatFs/source/ff.c **** 	} else {	/* The volume is associated with a physical drive */
5983:DRIVER/FatFs/source/ff.c **** 		if (disk_ioctl(pdrv, GET_SECTOR_COUNT, &sz_vol) != RES_OK) LEAVE_MKFS(FR_DISK_ERR);
 11353              		.loc 1 5983 3 view .LVU3899
 11354              		.loc 1 5983 7 is_stmt 0 view .LVU3900
 11355 0100 0DAA     		add	r2, sp, #52
 11356              	.LVL1333:
 11357              		.loc 1 5983 7 view .LVU3901
 11358 0102 0121     		movs	r1, #1
 11359 0104 2046     		mov	r0, r4
 11360 0106 FFF7FEFF 		bl	disk_ioctl
 11361              	.LVL1334:
 11362              		.loc 1 5983 6 view .LVU3902
 11363 010a 0028     		cmp	r0, #0
 11364 010c 40F09B82 		bne	.L864
5984:DRIVER/FatFs/source/ff.c **** 		if (!(fsopt & FM_SFD)) {	/* To be partitioned? */
 11365              		.loc 1 5984 3 is_stmt 1 view .LVU3903
 11366              		.loc 1 5984 6 is_stmt 0 view .LVU3904
 11367 0110 15F00803 		ands	r3, r5, #8
 11368 0114 0593     		str	r3, [sp, #20]
 11369 0116 08D1     		bne	.L865
5985:DRIVER/FatFs/source/ff.c **** 			/* Create a single-partition on the drive in this function */
5986:DRIVER/FatFs/source/ff.c **** #if FF_LBA64
5987:DRIVER/FatFs/source/ff.c **** 			if (sz_vol >= FF_MIN_GPT) {	/* Which partition type to create, MBR or GPT? */
5988:DRIVER/FatFs/source/ff.c **** 				fsopt |= 0x80;		/* Partitioning is in GPT */
5989:DRIVER/FatFs/source/ff.c **** 				b_vol = GPT_ALIGN / ss; sz_vol -= b_vol + GPT_ITEMS * SZ_GPTE / ss + 1;	/* Estimated partition 
5990:DRIVER/FatFs/source/ff.c **** 			} else
5991:DRIVER/FatFs/source/ff.c **** #endif
5992:DRIVER/FatFs/source/ff.c **** 			{	/* Partitioning is in MBR */
5993:DRIVER/FatFs/source/ff.c **** 				if (sz_vol > N_SEC_TRACK) {
 11370              		.loc 1 5993 5 is_stmt 1 view .LVU3905
 11371              		.loc 1 5993 16 is_stmt 0 view .LVU3906
 11372 0118 0D9B     		ldr	r3, [sp, #52]
 11373              		.loc 1 5993 8 view .LVU3907
 11374 011a 3F2B     		cmp	r3, #63
 11375 011c 40F28480 		bls	.L866
5994:DRIVER/FatFs/source/ff.c **** 					b_vol = N_SEC_TRACK; sz_vol -= b_vol;	/* Estimated partition offset and size */
 11376              		.loc 1 5994 6 is_stmt 1 view .LVU3908
 11377              	.LVL1335:
 11378              		.loc 1 5994 27 view .LVU3909
 11379              		.loc 1 5994 34 is_stmt 0 view .LVU3910
 11380 0120 3F3B     		subs	r3, r3, #63
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 364


 11381 0122 0D93     		str	r3, [sp, #52]
 11382              		.loc 1 5994 12 view .LVU3911
 11383 0124 3F23     		movs	r3, #63
 11384 0126 0293     		str	r3, [sp, #8]
 11385 0128 01E0     		b	.L812
 11386              	.LVL1336:
 11387              	.L865:
5947:DRIVER/FatFs/source/ff.c **** 	if (FF_MULTI_PARTITION && ipart != 0) {	/* Is the volume associated with any specific partition? *
 11388              		.loc 1 5947 8 view .LVU3912
 11389 012a 0023     		movs	r3, #0
 11390 012c 0293     		str	r3, [sp, #8]
 11391              	.LVL1337:
 11392              	.L812:
5995:DRIVER/FatFs/source/ff.c **** 				}
5996:DRIVER/FatFs/source/ff.c **** 			}
5997:DRIVER/FatFs/source/ff.c **** 		}
5998:DRIVER/FatFs/source/ff.c **** 	}
5999:DRIVER/FatFs/source/ff.c **** 	if (sz_vol < 128) LEAVE_MKFS(FR_MKFS_ABORTED);	/* Check if volume size is >=128s */
 11393              		.loc 1 5999 2 is_stmt 1 view .LVU3913
 11394              		.loc 1 5999 13 is_stmt 0 view .LVU3914
 11395 012e 0D9B     		ldr	r3, [sp, #52]
 11396              		.loc 1 5999 5 view .LVU3915
 11397 0130 7F2B     		cmp	r3, #127
 11398 0132 40F28A82 		bls	.L867
6000:DRIVER/FatFs/source/ff.c **** 
6001:DRIVER/FatFs/source/ff.c **** 	/* Now start to create an FAT volume at b_vol and sz_vol */
6002:DRIVER/FatFs/source/ff.c **** 
6003:DRIVER/FatFs/source/ff.c **** 	do {	/* Pre-determine the FAT type */
 11399              		.loc 1 6003 2 is_stmt 1 view .LVU3916
6004:DRIVER/FatFs/source/ff.c **** 		if (FF_FS_EXFAT && (fsopt & FM_EXFAT)) {	/* exFAT possible? */
 11400              		.loc 1 6004 3 view .LVU3917
6005:DRIVER/FatFs/source/ff.c **** 			if ((fsopt & FM_ANY) == FM_EXFAT || sz_vol >= 0x4000000 || sz_au > 128) {	/* exFAT only, vol >= 
6006:DRIVER/FatFs/source/ff.c **** 				fsty = FS_EXFAT; break;
6007:DRIVER/FatFs/source/ff.c **** 			}
6008:DRIVER/FatFs/source/ff.c **** 		}
6009:DRIVER/FatFs/source/ff.c **** #if FF_LBA64
6010:DRIVER/FatFs/source/ff.c **** 		if (sz_vol >= 0x100000000) LEAVE_MKFS(FR_MKFS_ABORTED);	/* Too large volume for FAT/FAT32 */
6011:DRIVER/FatFs/source/ff.c **** #endif
6012:DRIVER/FatFs/source/ff.c **** 		if (sz_au > 128) sz_au = 128;	/* Invalid AU for FAT/FAT32? */
 11401              		.loc 1 6012 3 view .LVU3918
 11402              		.loc 1 6012 6 is_stmt 0 view .LVU3919
 11403 0136 802E     		cmp	r6, #128
 11404 0138 00D9     		bls	.L813
 11405              		.loc 1 6012 26 view .LVU3920
 11406 013a 8026     		movs	r6, #128
 11407              	.LVL1338:
 11408              	.L813:
6013:DRIVER/FatFs/source/ff.c **** 		if (fsopt & FM_FAT32) {	/* FAT32 possible? */
 11409              		.loc 1 6013 3 is_stmt 1 view .LVU3921
 11410              		.loc 1 6013 6 is_stmt 0 view .LVU3922
 11411 013c 15F00203 		ands	r3, r5, #2
 11412 0140 0493     		str	r3, [sp, #16]
 11413 0142 02D0     		beq	.L814
6014:DRIVER/FatFs/source/ff.c **** 			if (!(fsopt & FM_FAT)) {	/* no-FAT? */
 11414              		.loc 1 6014 4 is_stmt 1 view .LVU3923
 11415              		.loc 1 6014 7 is_stmt 0 view .LVU3924
 11416 0144 15F0010F 		tst	r5, #1
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 365


 11417 0148 71D0     		beq	.L869
 11418              	.L814:
6015:DRIVER/FatFs/source/ff.c **** 				fsty = FS_FAT32; break;
6016:DRIVER/FatFs/source/ff.c **** 			}
6017:DRIVER/FatFs/source/ff.c **** 		}
6018:DRIVER/FatFs/source/ff.c **** 		if (!(fsopt & FM_FAT)) LEAVE_MKFS(FR_INVALID_PARAMETER);	/* no-FAT? */
 11419              		.loc 1 6018 3 is_stmt 1 view .LVU3925
 11420              		.loc 1 6018 6 is_stmt 0 view .LVU3926
 11421 014a 15F0010F 		tst	r5, #1
 11422 014e 00F07E82 		beq	.L870
6019:DRIVER/FatFs/source/ff.c **** 		fsty = FS_FAT16;
 11423              		.loc 1 6019 8 view .LVU3927
 11424 0152 4FF0020A 		mov	r10, #2
 11425              	.L815:
 11426              	.LVL1339:
6003:DRIVER/FatFs/source/ff.c **** 		if (FF_FS_EXFAT && (fsopt & FM_EXFAT)) {	/* exFAT possible? */
 11427              		.loc 1 6003 5 is_stmt 1 view .LVU3928
6020:DRIVER/FatFs/source/ff.c **** 	} while (0);
6021:DRIVER/FatFs/source/ff.c **** 
6022:DRIVER/FatFs/source/ff.c **** 	vsn = (DWORD)sz_vol + GET_FATTIME();	/* VSN generated from current time and partitiion size */
 11428              		.loc 1 6022 2 view .LVU3929
 11429              		.loc 1 6022 24 is_stmt 0 view .LVU3930
 11430 0156 FFF7FEFF 		bl	get_fattime
 11431              	.LVL1340:
 11432              		.loc 1 6022 8 view .LVU3931
 11433 015a 0D99     		ldr	r1, [sp, #52]
 11434              		.loc 1 6022 6 view .LVU3932
 11435 015c 4318     		adds	r3, r0, r1
 11436 015e 0693     		str	r3, [sp, #24]
 11437              	.LVL1341:
 11438              	.L816:
6023:DRIVER/FatFs/source/ff.c **** 
6024:DRIVER/FatFs/source/ff.c **** #if FF_FS_EXFAT
6025:DRIVER/FatFs/source/ff.c **** 	if (fsty == FS_EXFAT) {	/* Create an exFAT volume */
6026:DRIVER/FatFs/source/ff.c **** 		DWORD szb_bit, szb_case, sum, nbit, clu, clen[3];
6027:DRIVER/FatFs/source/ff.c **** 		WCHAR ch, si;
6028:DRIVER/FatFs/source/ff.c **** 		UINT j, st;
6029:DRIVER/FatFs/source/ff.c **** 
6030:DRIVER/FatFs/source/ff.c **** 		if (sz_vol < 0x1000) LEAVE_MKFS(FR_MKFS_ABORTED);	/* Too small volume for exFAT? */
6031:DRIVER/FatFs/source/ff.c **** #if FF_USE_TRIM
6032:DRIVER/FatFs/source/ff.c **** 		lba[0] = b_vol; lba[1] = b_vol + sz_vol - 1;	/* Inform storage device that the volume area may be
6033:DRIVER/FatFs/source/ff.c **** 		disk_ioctl(pdrv, CTRL_TRIM, lba);
6034:DRIVER/FatFs/source/ff.c **** #endif
6035:DRIVER/FatFs/source/ff.c **** 		/* Determine FAT location, data location and number of clusters */
6036:DRIVER/FatFs/source/ff.c **** 		if (sz_au == 0) {	/* AU auto-selection */
6037:DRIVER/FatFs/source/ff.c **** 			sz_au = 8;
6038:DRIVER/FatFs/source/ff.c **** 			if (sz_vol >= 0x80000) sz_au = 64;		/* >= 512Ks */
6039:DRIVER/FatFs/source/ff.c **** 			if (sz_vol >= 0x4000000) sz_au = 256;	/* >= 64Ms */
6040:DRIVER/FatFs/source/ff.c **** 		}
6041:DRIVER/FatFs/source/ff.c **** 		b_fat = b_vol + 32;										/* FAT start at offset 32 */
6042:DRIVER/FatFs/source/ff.c **** 		sz_fat = (DWORD)((sz_vol / sz_au + 2) * 4 + ss - 1) / ss;	/* Number of FAT sectors */
6043:DRIVER/FatFs/source/ff.c **** 		b_data = (b_fat + sz_fat + sz_blk - 1) & ~((LBA_t)sz_blk - 1);	/* Align data area to the erase bl
6044:DRIVER/FatFs/source/ff.c **** 		if (b_data - b_vol >= sz_vol / 2) LEAVE_MKFS(FR_MKFS_ABORTED);	/* Too small volume? */
6045:DRIVER/FatFs/source/ff.c **** 		n_clst = (DWORD)((sz_vol - (b_data - b_vol)) / sz_au);	/* Number of clusters */
6046:DRIVER/FatFs/source/ff.c **** 		if (n_clst <16) LEAVE_MKFS(FR_MKFS_ABORTED);			/* Too few clusters? */
6047:DRIVER/FatFs/source/ff.c **** 		if (n_clst > MAX_EXFAT) LEAVE_MKFS(FR_MKFS_ABORTED);	/* Too many clusters? */
6048:DRIVER/FatFs/source/ff.c **** 
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 366


6049:DRIVER/FatFs/source/ff.c **** 		szb_bit = (n_clst + 7) / 8;								/* Size of allocation bitmap */
6050:DRIVER/FatFs/source/ff.c **** 		clen[0] = (szb_bit + sz_au * ss - 1) / (sz_au * ss);	/* Number of allocation bitmap clusters */
6051:DRIVER/FatFs/source/ff.c **** 
6052:DRIVER/FatFs/source/ff.c **** 		/* Create a compressed up-case table */
6053:DRIVER/FatFs/source/ff.c **** 		sect = b_data + sz_au * clen[0];	/* Table start sector */
6054:DRIVER/FatFs/source/ff.c **** 		sum = 0;							/* Table checksum to be stored in the 82 entry */
6055:DRIVER/FatFs/source/ff.c **** 		st = 0; si = 0; i = 0; j = 0; szb_case = 0;
6056:DRIVER/FatFs/source/ff.c **** 		do {
6057:DRIVER/FatFs/source/ff.c **** 			switch (st) {
6058:DRIVER/FatFs/source/ff.c **** 			case 0:
6059:DRIVER/FatFs/source/ff.c **** 				ch = (WCHAR)ff_wtoupper(si);	/* Get an up-case char */
6060:DRIVER/FatFs/source/ff.c **** 				if (ch != si) {
6061:DRIVER/FatFs/source/ff.c **** 					si++; break;		/* Store the up-case char if exist */
6062:DRIVER/FatFs/source/ff.c **** 				}
6063:DRIVER/FatFs/source/ff.c **** 				for (j = 1; (WCHAR)(si + j) && (WCHAR)(si + j) == ff_wtoupper((WCHAR)(si + j)); j++) ;	/* Get r
6064:DRIVER/FatFs/source/ff.c **** 				if (j >= 128) {
6065:DRIVER/FatFs/source/ff.c **** 					ch = 0xFFFF; st = 2; break;	/* Compress the no-case block if run is >= 128 chars */
6066:DRIVER/FatFs/source/ff.c **** 				}
6067:DRIVER/FatFs/source/ff.c **** 				st = 1;			/* Do not compress short run */
6068:DRIVER/FatFs/source/ff.c **** 				/* FALLTHROUGH */
6069:DRIVER/FatFs/source/ff.c **** 			case 1:
6070:DRIVER/FatFs/source/ff.c **** 				ch = si++;		/* Fill the short run */
6071:DRIVER/FatFs/source/ff.c **** 				if (--j == 0) st = 0;
6072:DRIVER/FatFs/source/ff.c **** 				break;
6073:DRIVER/FatFs/source/ff.c **** 
6074:DRIVER/FatFs/source/ff.c **** 			default:
6075:DRIVER/FatFs/source/ff.c **** 				ch = (WCHAR)j; si += (WCHAR)j;	/* Number of chars to skip */
6076:DRIVER/FatFs/source/ff.c **** 				st = 0;
6077:DRIVER/FatFs/source/ff.c **** 			}
6078:DRIVER/FatFs/source/ff.c **** 			sum = xsum32(buf[i + 0] = (BYTE)ch, sum);	/* Put it into the write buffer */
6079:DRIVER/FatFs/source/ff.c **** 			sum = xsum32(buf[i + 1] = (BYTE)(ch >> 8), sum);
6080:DRIVER/FatFs/source/ff.c **** 			i += 2; szb_case += 2;
6081:DRIVER/FatFs/source/ff.c **** 			if (si == 0 || i == sz_buf * ss) {		/* Write buffered data when buffer full or end of process */
6082:DRIVER/FatFs/source/ff.c **** 				n = (i + ss - 1) / ss;
6083:DRIVER/FatFs/source/ff.c **** 				if (disk_write(pdrv, buf, sect, n) != RES_OK) LEAVE_MKFS(FR_DISK_ERR);
6084:DRIVER/FatFs/source/ff.c **** 				sect += n; i = 0;
6085:DRIVER/FatFs/source/ff.c **** 			}
6086:DRIVER/FatFs/source/ff.c **** 		} while (si);
6087:DRIVER/FatFs/source/ff.c **** 		clen[1] = (szb_case + sz_au * ss - 1) / (sz_au * ss);	/* Number of up-case table clusters */
6088:DRIVER/FatFs/source/ff.c **** 		clen[2] = 1;	/* Number of root dir clusters */
6089:DRIVER/FatFs/source/ff.c **** 
6090:DRIVER/FatFs/source/ff.c **** 		/* Initialize the allocation bitmap */
6091:DRIVER/FatFs/source/ff.c **** 		sect = b_data; nsect = (szb_bit + ss - 1) / ss;	/* Start of bitmap and number of bitmap sectors *
6092:DRIVER/FatFs/source/ff.c **** 		nbit = clen[0] + clen[1] + clen[2];				/* Number of clusters in-use by system (bitmap, up-case an
6093:DRIVER/FatFs/source/ff.c **** 		do {
6094:DRIVER/FatFs/source/ff.c **** 			memset(buf, 0, sz_buf * ss);				/* Initialize bitmap buffer */
6095:DRIVER/FatFs/source/ff.c **** 			for (i = 0; nbit != 0 && i / 8 < sz_buf * ss; buf[i / 8] |= 1 << (i % 8), i++, nbit--) ;	/* Mark
6096:DRIVER/FatFs/source/ff.c **** 			n = (nsect > sz_buf) ? sz_buf : nsect;		/* Write the buffered data */
6097:DRIVER/FatFs/source/ff.c **** 			if (disk_write(pdrv, buf, sect, n) != RES_OK) LEAVE_MKFS(FR_DISK_ERR);
6098:DRIVER/FatFs/source/ff.c **** 			sect += n; nsect -= n;
6099:DRIVER/FatFs/source/ff.c **** 		} while (nsect);
6100:DRIVER/FatFs/source/ff.c **** 
6101:DRIVER/FatFs/source/ff.c **** 		/* Initialize the FAT */
6102:DRIVER/FatFs/source/ff.c **** 		sect = b_fat; nsect = sz_fat;	/* Start of FAT and number of FAT sectors */
6103:DRIVER/FatFs/source/ff.c **** 		j = nbit = clu = 0;
6104:DRIVER/FatFs/source/ff.c **** 		do {
6105:DRIVER/FatFs/source/ff.c **** 			memset(buf, 0, sz_buf * ss); i = 0;	/* Clear work area and reset write offset */
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 367


6106:DRIVER/FatFs/source/ff.c **** 			if (clu == 0) {	/* Initialize FAT [0] and FAT[1] */
6107:DRIVER/FatFs/source/ff.c **** 				st_dword(buf + i, 0xFFFFFFF8); i += 4; clu++;
6108:DRIVER/FatFs/source/ff.c **** 				st_dword(buf + i, 0xFFFFFFFF); i += 4; clu++;
6109:DRIVER/FatFs/source/ff.c **** 			}
6110:DRIVER/FatFs/source/ff.c **** 			do {			/* Create chains of bitmap, up-case and root dir */
6111:DRIVER/FatFs/source/ff.c **** 				while (nbit != 0 && i < sz_buf * ss) {	/* Create a chain */
6112:DRIVER/FatFs/source/ff.c **** 					st_dword(buf + i, (nbit > 1) ? clu + 1 : 0xFFFFFFFF);
6113:DRIVER/FatFs/source/ff.c **** 					i += 4; clu++; nbit--;
6114:DRIVER/FatFs/source/ff.c **** 				}
6115:DRIVER/FatFs/source/ff.c **** 				if (nbit == 0 && j < 3) nbit = clen[j++];	/* Get next chain length */
6116:DRIVER/FatFs/source/ff.c **** 			} while (nbit != 0 && i < sz_buf * ss);
6117:DRIVER/FatFs/source/ff.c **** 			n = (nsect > sz_buf) ? sz_buf : nsect;	/* Write the buffered data */
6118:DRIVER/FatFs/source/ff.c **** 			if (disk_write(pdrv, buf, sect, n) != RES_OK) LEAVE_MKFS(FR_DISK_ERR);
6119:DRIVER/FatFs/source/ff.c **** 			sect += n; nsect -= n;
6120:DRIVER/FatFs/source/ff.c **** 		} while (nsect);
6121:DRIVER/FatFs/source/ff.c **** 
6122:DRIVER/FatFs/source/ff.c **** 		/* Initialize the root directory */
6123:DRIVER/FatFs/source/ff.c **** 		memset(buf, 0, sz_buf * ss);
6124:DRIVER/FatFs/source/ff.c **** 		buf[SZDIRE * 0 + 0] = ET_VLABEL;				/* Volume label entry (no label) */
6125:DRIVER/FatFs/source/ff.c **** 		buf[SZDIRE * 1 + 0] = ET_BITMAP;				/* Bitmap entry */
6126:DRIVER/FatFs/source/ff.c **** 		st_dword(buf + SZDIRE * 1 + 20, 2);				/*  cluster */
6127:DRIVER/FatFs/source/ff.c **** 		st_dword(buf + SZDIRE * 1 + 24, szb_bit);		/*  size */
6128:DRIVER/FatFs/source/ff.c **** 		buf[SZDIRE * 2 + 0] = ET_UPCASE;				/* Up-case table entry */
6129:DRIVER/FatFs/source/ff.c **** 		st_dword(buf + SZDIRE * 2 + 4, sum);			/*  sum */
6130:DRIVER/FatFs/source/ff.c **** 		st_dword(buf + SZDIRE * 2 + 20, 2 + clen[0]);	/*  cluster */
6131:DRIVER/FatFs/source/ff.c **** 		st_dword(buf + SZDIRE * 2 + 24, szb_case);		/*  size */
6132:DRIVER/FatFs/source/ff.c **** 		sect = b_data + sz_au * (clen[0] + clen[1]); nsect = sz_au;	/* Start of the root directory and nu
6133:DRIVER/FatFs/source/ff.c **** 		do {	/* Fill root directory sectors */
6134:DRIVER/FatFs/source/ff.c **** 			n = (nsect > sz_buf) ? sz_buf : nsect;
6135:DRIVER/FatFs/source/ff.c **** 			if (disk_write(pdrv, buf, sect, n) != RES_OK) LEAVE_MKFS(FR_DISK_ERR);
6136:DRIVER/FatFs/source/ff.c **** 			memset(buf, 0, ss);	/* Rest of entries are filled with zero */
6137:DRIVER/FatFs/source/ff.c **** 			sect += n; nsect -= n;
6138:DRIVER/FatFs/source/ff.c **** 		} while (nsect);
6139:DRIVER/FatFs/source/ff.c **** 
6140:DRIVER/FatFs/source/ff.c **** 		/* Create two set of the exFAT VBR blocks */
6141:DRIVER/FatFs/source/ff.c **** 		sect = b_vol;
6142:DRIVER/FatFs/source/ff.c **** 		for (n = 0; n < 2; n++) {
6143:DRIVER/FatFs/source/ff.c **** 			/* Main record (+0) */
6144:DRIVER/FatFs/source/ff.c **** 			memset(buf, 0, ss);
6145:DRIVER/FatFs/source/ff.c **** 			memcpy(buf + BS_JmpBoot, "\xEB\x76\x90" "EXFAT   ", 11);	/* Boot jump code (x86), OEM name */
6146:DRIVER/FatFs/source/ff.c **** 			st_qword(buf + BPB_VolOfsEx, b_vol);					/* Volume offset in the physical drive [sector] */
6147:DRIVER/FatFs/source/ff.c **** 			st_qword(buf + BPB_TotSecEx, sz_vol);					/* Volume size [sector] */
6148:DRIVER/FatFs/source/ff.c **** 			st_dword(buf + BPB_FatOfsEx, (DWORD)(b_fat - b_vol));	/* FAT offset [sector] */
6149:DRIVER/FatFs/source/ff.c **** 			st_dword(buf + BPB_FatSzEx, sz_fat);					/* FAT size [sector] */
6150:DRIVER/FatFs/source/ff.c **** 			st_dword(buf + BPB_DataOfsEx, (DWORD)(b_data - b_vol));	/* Data offset [sector] */
6151:DRIVER/FatFs/source/ff.c **** 			st_dword(buf + BPB_NumClusEx, n_clst);					/* Number of clusters */
6152:DRIVER/FatFs/source/ff.c **** 			st_dword(buf + BPB_RootClusEx, 2 + clen[0] + clen[1]);	/* Root dir cluster # */
6153:DRIVER/FatFs/source/ff.c **** 			st_dword(buf + BPB_VolIDEx, vsn);						/* VSN */
6154:DRIVER/FatFs/source/ff.c **** 			st_word(buf + BPB_FSVerEx, 0x100);						/* Filesystem version (1.00) */
6155:DRIVER/FatFs/source/ff.c **** 			for (buf[BPB_BytsPerSecEx] = 0, i = ss; i >>= 1; buf[BPB_BytsPerSecEx]++) ;	/* Log2 of sector si
6156:DRIVER/FatFs/source/ff.c **** 			for (buf[BPB_SecPerClusEx] = 0, i = sz_au; i >>= 1; buf[BPB_SecPerClusEx]++) ;	/* Log2 of cluste
6157:DRIVER/FatFs/source/ff.c **** 			buf[BPB_NumFATsEx] = 1;					/* Number of FATs */
6158:DRIVER/FatFs/source/ff.c **** 			buf[BPB_DrvNumEx] = 0x80;				/* Drive number (for int13) */
6159:DRIVER/FatFs/source/ff.c **** 			st_word(buf + BS_BootCodeEx, 0xFEEB);	/* Boot code (x86) */
6160:DRIVER/FatFs/source/ff.c **** 			st_word(buf + BS_55AA, 0xAA55);			/* Signature (placed here regardless of sector size) */
6161:DRIVER/FatFs/source/ff.c **** 			for (i = sum = 0; i < ss; i++) {		/* VBR checksum */
6162:DRIVER/FatFs/source/ff.c **** 				if (i != BPB_VolFlagEx && i != BPB_VolFlagEx + 1 && i != BPB_PercInUseEx) sum = xsum32(buf[i], 
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 368


6163:DRIVER/FatFs/source/ff.c **** 			}
6164:DRIVER/FatFs/source/ff.c **** 			if (disk_write(pdrv, buf, sect++, 1) != RES_OK) LEAVE_MKFS(FR_DISK_ERR);
6165:DRIVER/FatFs/source/ff.c **** 			/* Extended bootstrap record (+1..+8) */
6166:DRIVER/FatFs/source/ff.c **** 			memset(buf, 0, ss);
6167:DRIVER/FatFs/source/ff.c **** 			st_word(buf + ss - 2, 0xAA55);	/* Signature (placed at end of sector) */
6168:DRIVER/FatFs/source/ff.c **** 			for (j = 1; j < 9; j++) {
6169:DRIVER/FatFs/source/ff.c **** 				for (i = 0; i < ss; sum = xsum32(buf[i++], sum)) ;	/* VBR checksum */
6170:DRIVER/FatFs/source/ff.c **** 				if (disk_write(pdrv, buf, sect++, 1) != RES_OK) LEAVE_MKFS(FR_DISK_ERR);
6171:DRIVER/FatFs/source/ff.c **** 			}
6172:DRIVER/FatFs/source/ff.c **** 			/* OEM/Reserved record (+9..+10) */
6173:DRIVER/FatFs/source/ff.c **** 			memset(buf, 0, ss);
6174:DRIVER/FatFs/source/ff.c **** 			for ( ; j < 11; j++) {
6175:DRIVER/FatFs/source/ff.c **** 				for (i = 0; i < ss; sum = xsum32(buf[i++], sum)) ;	/* VBR checksum */
6176:DRIVER/FatFs/source/ff.c **** 				if (disk_write(pdrv, buf, sect++, 1) != RES_OK) LEAVE_MKFS(FR_DISK_ERR);
6177:DRIVER/FatFs/source/ff.c **** 			}
6178:DRIVER/FatFs/source/ff.c **** 			/* Sum record (+11) */
6179:DRIVER/FatFs/source/ff.c **** 			for (i = 0; i < ss; i += 4) st_dword(buf + i, sum);		/* Fill with checksum value */
6180:DRIVER/FatFs/source/ff.c **** 			if (disk_write(pdrv, buf, sect++, 1) != RES_OK) LEAVE_MKFS(FR_DISK_ERR);
6181:DRIVER/FatFs/source/ff.c **** 		}
6182:DRIVER/FatFs/source/ff.c **** 
6183:DRIVER/FatFs/source/ff.c **** 	} else
6184:DRIVER/FatFs/source/ff.c **** #endif	/* FF_FS_EXFAT */
6185:DRIVER/FatFs/source/ff.c **** 	{	/* Create an FAT/FAT32 volume */
6186:DRIVER/FatFs/source/ff.c **** 		do {
 11439              		.loc 1 6186 3 is_stmt 1 view .LVU3933
6187:DRIVER/FatFs/source/ff.c **** 			pau = sz_au;
 11440              		.loc 1 6187 4 view .LVU3934
6188:DRIVER/FatFs/source/ff.c **** 			/* Pre-determine number of clusters and FAT sub-type */
6189:DRIVER/FatFs/source/ff.c **** 			if (fsty == FS_FAT32) {	/* FAT32 volume */
 11441              		.loc 1 6189 4 view .LVU3935
 11442              		.loc 1 6189 7 is_stmt 0 view .LVU3936
 11443 0160 BAF1030F 		cmp	r10, #3
 11444 0164 6BD0     		beq	.L897
6190:DRIVER/FatFs/source/ff.c **** 				if (pau == 0) {	/* AU auto-selection */
6191:DRIVER/FatFs/source/ff.c **** 					n = (DWORD)sz_vol / 0x20000;	/* Volume size in unit of 128KS */
6192:DRIVER/FatFs/source/ff.c **** 					for (i = 0, pau = 1; cst32[i] && cst32[i] <= n; i++, pau <<= 1) ;	/* Get from table */
6193:DRIVER/FatFs/source/ff.c **** 				}
6194:DRIVER/FatFs/source/ff.c **** 				n_clst = (DWORD)sz_vol / pau;	/* Number of clusters */
6195:DRIVER/FatFs/source/ff.c **** 				sz_fat = (n_clst * 4 + 8 + ss - 1) / ss;	/* FAT size [sector] */
6196:DRIVER/FatFs/source/ff.c **** 				sz_rsv = 32;	/* Number of reserved sectors */
6197:DRIVER/FatFs/source/ff.c **** 				sz_dir = 0;		/* No static directory */
6198:DRIVER/FatFs/source/ff.c **** 				if (n_clst <= MAX_FAT16 || n_clst > MAX_FAT32) LEAVE_MKFS(FR_MKFS_ABORTED);
6199:DRIVER/FatFs/source/ff.c **** 			} else {				/* FAT volume */
6200:DRIVER/FatFs/source/ff.c **** 				if (pau == 0) {	/* au auto-selection */
 11445              		.loc 1 6200 5 is_stmt 1 view .LVU3937
 11446              		.loc 1 6200 8 is_stmt 0 view .LVU3938
 11447 0166 002E     		cmp	r6, #0
 11448 0168 00F08E80 		beq	.L898
6187:DRIVER/FatFs/source/ff.c **** 			/* Pre-determine number of clusters and FAT sub-type */
 11449              		.loc 1 6187 8 view .LVU3939
 11450 016c 3746     		mov	r7, r6
 11451              	.LVL1342:
 11452              	.L822:
6201:DRIVER/FatFs/source/ff.c **** 					n = (DWORD)sz_vol / 0x1000;	/* Volume size in unit of 4KS */
6202:DRIVER/FatFs/source/ff.c **** 					for (i = 0, pau = 1; cst[i] && cst[i] <= n; i++, pau <<= 1) ;	/* Get from table */
6203:DRIVER/FatFs/source/ff.c **** 				}
6204:DRIVER/FatFs/source/ff.c **** 				n_clst = (DWORD)sz_vol / pau;
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 369


 11453              		.loc 1 6204 5 is_stmt 1 view .LVU3940
 11454              		.loc 1 6204 12 is_stmt 0 view .LVU3941
 11455 016e B1FBF7F3 		udiv	r3, r1, r7
 11456              	.LVL1343:
6205:DRIVER/FatFs/source/ff.c **** 				if (n_clst > MAX_FAT12) {
 11457              		.loc 1 6205 5 is_stmt 1 view .LVU3942
 11458              		.loc 1 6205 8 is_stmt 0 view .LVU3943
 11459 0172 40F6F572 		movw	r2, #4085
 11460 0176 9342     		cmp	r3, r2
 11461 0178 40F29580 		bls	.L825
6206:DRIVER/FatFs/source/ff.c **** 					n = n_clst * 2 + 4;		/* FAT size [byte] */
 11462              		.loc 1 6206 6 is_stmt 1 view .LVU3944
 11463              		.loc 1 6206 21 is_stmt 0 view .LVU3945
 11464 017c 9D1C     		adds	r5, r3, #2
 11465              		.loc 1 6206 8 view .LVU3946
 11466 017e 6D00     		lsls	r5, r5, #1
 11467              	.LVL1344:
 11468              	.L826:
6207:DRIVER/FatFs/source/ff.c **** 				} else {
6208:DRIVER/FatFs/source/ff.c **** 					fsty = FS_FAT12;
6209:DRIVER/FatFs/source/ff.c **** 					n = (n_clst * 3 + 1) / 2 + 3;	/* FAT size [byte] */
6210:DRIVER/FatFs/source/ff.c **** 				}
6211:DRIVER/FatFs/source/ff.c **** 				sz_fat = (n + ss - 1) / ss;		/* FAT size [sector] */
 11469              		.loc 1 6211 5 is_stmt 1 view .LVU3947
 11470              		.loc 1 6211 17 is_stmt 0 view .LVU3948
 11471 0180 BDF83E30 		ldrh	r3, [sp, #62]
 11472              	.LVL1345:
 11473              		.loc 1 6211 17 view .LVU3949
 11474 0184 1D44     		add	r5, r5, r3
 11475              	.LVL1346:
 11476              		.loc 1 6211 22 view .LVU3950
 11477 0186 013D     		subs	r5, r5, #1
 11478              		.loc 1 6211 12 view .LVU3951
 11479 0188 B5FBF3F5 		udiv	r5, r5, r3
 11480              	.LVL1347:
6212:DRIVER/FatFs/source/ff.c **** 				sz_rsv = 1;						/* Number of reserved sectors */
 11481              		.loc 1 6212 5 is_stmt 1 view .LVU3952
6213:DRIVER/FatFs/source/ff.c **** 				sz_dir = (DWORD)n_root * SZDIRE / ss;	/* Root dir size [sector] */
 11482              		.loc 1 6213 5 view .LVU3953
 11483              		.loc 1 6213 28 is_stmt 0 view .LVU3954
 11484 018c 4FEA491C 		lsl	ip, r9, #5
 11485              		.loc 1 6213 12 view .LVU3955
 11486 0190 BCFBF3FC 		udiv	ip, ip, r3
 11487              	.LVL1348:
6212:DRIVER/FatFs/source/ff.c **** 				sz_rsv = 1;						/* Number of reserved sectors */
 11488              		.loc 1 6212 12 view .LVU3956
 11489 0194 0120     		movs	r0, #1
 11490              	.LVL1349:
 11491              	.L821:
6214:DRIVER/FatFs/source/ff.c **** 			}
6215:DRIVER/FatFs/source/ff.c **** 			b_fat = b_vol + sz_rsv;						/* FAT base */
 11492              		.loc 1 6215 4 is_stmt 1 view .LVU3957
 11493              		.loc 1 6215 10 is_stmt 0 view .LVU3958
 11494 0196 029B     		ldr	r3, [sp, #8]
 11495 0198 00EB030E 		add	lr, r0, r3
 11496              	.LVL1350:
6216:DRIVER/FatFs/source/ff.c **** 			b_data = b_fat + sz_fat * n_fat + sz_dir;	/* Data base */
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 370


 11497              		.loc 1 6216 4 is_stmt 1 view .LVU3959
 11498              		.loc 1 6216 19 is_stmt 0 view .LVU3960
 11499 019c 0BFB05E2 		mla	r2, fp, r5, lr
 11500              		.loc 1 6216 11 view .LVU3961
 11501 01a0 6244     		add	r2, r2, ip
 11502              	.LVL1351:
6217:DRIVER/FatFs/source/ff.c **** 
6218:DRIVER/FatFs/source/ff.c **** 			/* Align data area to erase block boundary (for flash memory media) */
6219:DRIVER/FatFs/source/ff.c **** 			n = (DWORD)(((b_data + sz_blk - 1) & ~(sz_blk - 1)) - b_data);	/* Sectors to next nearest from c
 11503              		.loc 1 6219 4 is_stmt 1 view .LVU3962
 11504              		.loc 1 6219 25 is_stmt 0 view .LVU3963
 11505 01a2 DDF83880 		ldr	r8, [sp, #56]
 11506 01a6 08EB0203 		add	r3, r8, r2
 11507              		.loc 1 6219 34 view .LVU3964
 11508 01aa 013B     		subs	r3, r3, #1
 11509              		.loc 1 6219 41 view .LVU3965
 11510 01ac C8F10008 		rsb	r8, r8, #0
 11511              		.loc 1 6219 39 view .LVU3966
 11512 01b0 03EA0803 		and	r3, r3, r8
 11513              		.loc 1 6219 6 view .LVU3967
 11514 01b4 9B1A     		subs	r3, r3, r2
 11515              	.LVL1352:
6220:DRIVER/FatFs/source/ff.c **** 			if (fsty == FS_FAT32) {		/* FAT32: Move FAT */
 11516              		.loc 1 6220 4 is_stmt 1 view .LVU3968
 11517              		.loc 1 6220 7 is_stmt 0 view .LVU3969
 11518 01b6 BAF1030F 		cmp	r10, #3
 11519 01ba 7CD0     		beq	.L899
6221:DRIVER/FatFs/source/ff.c **** 				sz_rsv += n; b_fat += n;
6222:DRIVER/FatFs/source/ff.c **** 			} else {					/* FAT: Expand FAT */
6223:DRIVER/FatFs/source/ff.c **** 				if (n % n_fat) {	/* Adjust fractional error if needed */
 11520              		.loc 1 6223 5 is_stmt 1 view .LVU3970
 11521              		.loc 1 6223 11 is_stmt 0 view .LVU3971
 11522 01bc B3FBFBF8 		udiv	r8, r3, fp
 11523 01c0 0BFB1838 		mls	r8, fp, r8, r3
 11524              		.loc 1 6223 8 view .LVU3972
 11525 01c4 B8F1000F 		cmp	r8, #0
 11526 01c8 03D0     		beq	.L829
6224:DRIVER/FatFs/source/ff.c **** 					n--; sz_rsv++; b_fat++;
 11527              		.loc 1 6224 6 is_stmt 1 view .LVU3973
 11528              		.loc 1 6224 7 is_stmt 0 view .LVU3974
 11529 01ca 013B     		subs	r3, r3, #1
 11530              	.LVL1353:
 11531              		.loc 1 6224 11 is_stmt 1 view .LVU3975
 11532              		.loc 1 6224 17 is_stmt 0 view .LVU3976
 11533 01cc 0130     		adds	r0, r0, #1
 11534              	.LVL1354:
 11535              		.loc 1 6224 21 is_stmt 1 view .LVU3977
 11536              		.loc 1 6224 26 is_stmt 0 view .LVU3978
 11537 01ce 0EF1010E 		add	lr, lr, #1
 11538              	.LVL1355:
 11539              	.L829:
6225:DRIVER/FatFs/source/ff.c **** 				}
6226:DRIVER/FatFs/source/ff.c **** 				sz_fat += n / n_fat;
 11540              		.loc 1 6226 5 is_stmt 1 view .LVU3979
 11541              		.loc 1 6226 17 is_stmt 0 view .LVU3980
 11542 01d2 B3FBFBF3 		udiv	r3, r3, fp
 11543              	.LVL1356:
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 371


 11544              		.loc 1 6226 12 view .LVU3981
 11545 01d6 1D44     		add	r5, r5, r3
 11546              	.LVL1357:
 11547              	.L828:
6227:DRIVER/FatFs/source/ff.c **** 			}
6228:DRIVER/FatFs/source/ff.c **** 
6229:DRIVER/FatFs/source/ff.c **** 			/* Determine number of clusters and final check of validity of the FAT sub-type */
6230:DRIVER/FatFs/source/ff.c **** 			if (sz_vol < b_data + pau * 16 - b_vol) LEAVE_MKFS(FR_MKFS_ABORTED);	/* Too small volume? */
 11548              		.loc 1 6230 4 is_stmt 1 view .LVU3982
 11549              		.loc 1 6230 24 is_stmt 0 view .LVU3983
 11550 01d8 02EB0712 		add	r2, r2, r7, lsl #4
 11551              	.LVL1358:
 11552              		.loc 1 6230 35 view .LVU3984
 11553 01dc 029B     		ldr	r3, [sp, #8]
 11554 01de D21A     		subs	r2, r2, r3
 11555              		.loc 1 6230 7 view .LVU3985
 11556 01e0 9142     		cmp	r1, r2
 11557 01e2 C0F04582 		bcc	.L874
6231:DRIVER/FatFs/source/ff.c **** 			n_clst = ((DWORD)sz_vol - sz_rsv - sz_fat * n_fat - sz_dir) / pau;
 11558              		.loc 1 6231 4 is_stmt 1 view .LVU3986
 11559              		.loc 1 6231 28 is_stmt 0 view .LVU3987
 11560 01e6 A1EB0008 		sub	r8, r1, r0
 11561              		.loc 1 6231 37 view .LVU3988
 11562 01ea 0BFB1588 		mls	r8, fp, r5, r8
 11563              		.loc 1 6231 54 view .LVU3989
 11564 01ee A8EB0C08 		sub	r8, r8, ip
 11565              		.loc 1 6231 11 view .LVU3990
 11566 01f2 B8FBF7F8 		udiv	r8, r8, r7
 11567              	.LVL1359:
6232:DRIVER/FatFs/source/ff.c **** 			if (fsty == FS_FAT32) {
 11568              		.loc 1 6232 4 is_stmt 1 view .LVU3991
 11569              		.loc 1 6232 7 is_stmt 0 view .LVU3992
 11570 01f6 BAF1030F 		cmp	r10, #3
 11571 01fa 5FD0     		beq	.L900
 11572              	.L830:
6233:DRIVER/FatFs/source/ff.c **** 				if (n_clst <= MAX_FAT16) {	/* Too few clusters for FAT32? */
6234:DRIVER/FatFs/source/ff.c **** 					if (sz_au == 0 && (sz_au = pau / 2) != 0) continue;	/* Adjust cluster size and retry */
6235:DRIVER/FatFs/source/ff.c **** 					LEAVE_MKFS(FR_MKFS_ABORTED);
6236:DRIVER/FatFs/source/ff.c **** 				}
6237:DRIVER/FatFs/source/ff.c **** 			}
6238:DRIVER/FatFs/source/ff.c **** 			if (fsty == FS_FAT16) {
 11573              		.loc 1 6238 4 is_stmt 1 view .LVU3993
 11574              		.loc 1 6238 7 is_stmt 0 view .LVU3994
 11575 01fc BAF1020F 		cmp	r10, #2
 11576 0200 40F08080 		bne	.L832
6239:DRIVER/FatFs/source/ff.c **** 				if (n_clst > MAX_FAT16) {	/* Too many clusters for FAT16 */
 11577              		.loc 1 6239 5 is_stmt 1 view .LVU3995
 11578              		.loc 1 6239 8 is_stmt 0 view .LVU3996
 11579 0204 4FF6F573 		movw	r3, #65525
 11580 0208 9845     		cmp	r8, r3
 11581 020a 64D9     		bls	.L833
6240:DRIVER/FatFs/source/ff.c **** 					if (sz_au == 0 && (pau * 2) <= 64) {
 11582              		.loc 1 6240 6 is_stmt 1 view .LVU3997
 11583              		.loc 1 6240 9 is_stmt 0 view .LVU3998
 11584 020c 16B9     		cbnz	r6, .L834
 11585              		.loc 1 6240 29 discriminator 1 view .LVU3999
 11586 020e 7B00     		lsls	r3, r7, #1
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 372


 11587              		.loc 1 6240 21 discriminator 1 view .LVU4000
 11588 0210 402B     		cmp	r3, #64
 11589 0212 0FD9     		bls	.L876
 11590              	.L834:
6241:DRIVER/FatFs/source/ff.c **** 						sz_au = pau * 2; continue;	/* Adjust cluster size and retry */
6242:DRIVER/FatFs/source/ff.c **** 					}
6243:DRIVER/FatFs/source/ff.c **** 					if ((fsopt & FM_FAT32)) {
 11591              		.loc 1 6243 6 is_stmt 1 view .LVU4001
 11592              		.loc 1 6243 9 is_stmt 0 view .LVU4002
 11593 0214 049B     		ldr	r3, [sp, #16]
 11594 0216 7BB9     		cbnz	r3, .L877
6244:DRIVER/FatFs/source/ff.c **** 						fsty = FS_FAT32; continue;	/* Switch type to FAT32 and retry */
6245:DRIVER/FatFs/source/ff.c **** 					}
6246:DRIVER/FatFs/source/ff.c **** 					if (sz_au == 0 && (sz_au = pau * 2) <= 128) continue;	/* Adjust cluster size and retry */
 11595              		.loc 1 6246 6 is_stmt 1 view .LVU4003
 11596              		.loc 1 6246 9 is_stmt 0 view .LVU4004
 11597 0218 002E     		cmp	r6, #0
 11598 021a 40F02D82 		bne	.L878
 11599              		.loc 1 6246 31 discriminator 1 view .LVU4005
 11600 021e 7E00     		lsls	r6, r7, #1
 11601              	.LVL1360:
 11602              		.loc 1 6246 21 discriminator 1 view .LVU4006
 11603 0220 802E     		cmp	r6, #128
 11604 0222 9DD9     		bls	.L816
6247:DRIVER/FatFs/source/ff.c **** 					LEAVE_MKFS(FR_MKFS_ABORTED);
 11605              		.loc 1 6247 6 view .LVU4007
 11606 0224 0E20     		movs	r0, #14
 11607              	.LVL1361:
 11608              		.loc 1 6247 6 view .LVU4008
 11609 0226 FFE1     		b	.L803
 11610              	.LVL1362:
 11611              	.L866:
5947:DRIVER/FatFs/source/ff.c **** 	if (FF_MULTI_PARTITION && ipart != 0) {	/* Is the volume associated with any specific partition? *
 11612              		.loc 1 5947 8 view .LVU4009
 11613 0228 0023     		movs	r3, #0
 11614 022a 0293     		str	r3, [sp, #8]
 11615 022c 7FE7     		b	.L812
 11616              	.LVL1363:
 11617              	.L869:
6015:DRIVER/FatFs/source/ff.c **** 			}
 11618              		.loc 1 6015 10 view .LVU4010
 11619 022e 4FF0030A 		mov	r10, #3
 11620 0232 90E7     		b	.L815
 11621              	.LVL1364:
 11622              	.L876:
6241:DRIVER/FatFs/source/ff.c **** 					}
 11623              		.loc 1 6241 13 view .LVU4011
 11624 0234 1E46     		mov	r6, r3
 11625              	.LVL1365:
6241:DRIVER/FatFs/source/ff.c **** 					}
 11626              		.loc 1 6241 13 view .LVU4012
 11627 0236 93E7     		b	.L816
 11628              	.LVL1366:
 11629              	.L877:
6244:DRIVER/FatFs/source/ff.c **** 					}
 11630              		.loc 1 6244 12 view .LVU4013
 11631 0238 4FF0030A 		mov	r10, #3
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 373


 11632              	.LVL1367:
6244:DRIVER/FatFs/source/ff.c **** 					}
 11633              		.loc 1 6244 12 view .LVU4014
 11634 023c 90E7     		b	.L816
 11635              	.LVL1368:
 11636              	.L897:
6190:DRIVER/FatFs/source/ff.c **** 					n = (DWORD)sz_vol / 0x20000;	/* Volume size in unit of 128KS */
 11637              		.loc 1 6190 5 is_stmt 1 view .LVU4015
6190:DRIVER/FatFs/source/ff.c **** 					n = (DWORD)sz_vol / 0x20000;	/* Volume size in unit of 128KS */
 11638              		.loc 1 6190 8 is_stmt 0 view .LVU4016
 11639 023e AEB1     		cbz	r6, .L901
6187:DRIVER/FatFs/source/ff.c **** 			/* Pre-determine number of clusters and FAT sub-type */
 11640              		.loc 1 6187 8 view .LVU4017
 11641 0240 3746     		mov	r7, r6
 11642              	.LVL1369:
 11643              	.L818:
6194:DRIVER/FatFs/source/ff.c **** 				sz_fat = (n_clst * 4 + 8 + ss - 1) / ss;	/* FAT size [sector] */
 11644              		.loc 1 6194 5 is_stmt 1 view .LVU4018
6194:DRIVER/FatFs/source/ff.c **** 				sz_fat = (n_clst * 4 + 8 + ss - 1) / ss;	/* FAT size [sector] */
 11645              		.loc 1 6194 12 is_stmt 0 view .LVU4019
 11646 0242 B1FBF7F3 		udiv	r3, r1, r7
 11647              	.LVL1370:
6195:DRIVER/FatFs/source/ff.c **** 				sz_rsv = 32;	/* Number of reserved sectors */
 11648              		.loc 1 6195 5 is_stmt 1 view .LVU4020
6195:DRIVER/FatFs/source/ff.c **** 				sz_rsv = 32;	/* Number of reserved sectors */
 11649              		.loc 1 6195 26 is_stmt 0 view .LVU4021
 11650 0246 9D1C     		adds	r5, r3, #2
6195:DRIVER/FatFs/source/ff.c **** 				sz_rsv = 32;	/* Number of reserved sectors */
 11651              		.loc 1 6195 30 view .LVU4022
 11652 0248 BDF83E20 		ldrh	r2, [sp, #62]
 11653 024c 02EB8505 		add	r5, r2, r5, lsl #2
6195:DRIVER/FatFs/source/ff.c **** 				sz_rsv = 32;	/* Number of reserved sectors */
 11654              		.loc 1 6195 35 view .LVU4023
 11655 0250 013D     		subs	r5, r5, #1
6195:DRIVER/FatFs/source/ff.c **** 				sz_rsv = 32;	/* Number of reserved sectors */
 11656              		.loc 1 6195 12 view .LVU4024
 11657 0252 B5FBF2F5 		udiv	r5, r5, r2
 11658              	.LVL1371:
6196:DRIVER/FatFs/source/ff.c **** 				sz_dir = 0;		/* No static directory */
 11659              		.loc 1 6196 5 is_stmt 1 view .LVU4025
6197:DRIVER/FatFs/source/ff.c **** 				if (n_clst <= MAX_FAT16 || n_clst > MAX_FAT32) LEAVE_MKFS(FR_MKFS_ABORTED);
 11660              		.loc 1 6197 5 view .LVU4026
6198:DRIVER/FatFs/source/ff.c **** 			} else {				/* FAT volume */
 11661              		.loc 1 6198 5 view .LVU4027
6198:DRIVER/FatFs/source/ff.c **** 			} else {				/* FAT volume */
 11662              		.loc 1 6198 29 is_stmt 0 view .LVU4028
 11663 0256 A3F57F43 		sub	r3, r3, #65280
 11664              	.LVL1372:
6198:DRIVER/FatFs/source/ff.c **** 			} else {				/* FAT volume */
 11665              		.loc 1 6198 29 view .LVU4029
 11666 025a F63B     		subs	r3, r3, #246
 11667              	.LVL1373:
6198:DRIVER/FatFs/source/ff.c **** 			} else {				/* FAT volume */
 11668              		.loc 1 6198 8 view .LVU4030
 11669 025c 264A     		ldr	r2, .L909+8
 11670 025e 9342     		cmp	r3, r2
 11671 0260 00F20482 		bhi	.L872
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 374


6197:DRIVER/FatFs/source/ff.c **** 				if (n_clst <= MAX_FAT16 || n_clst > MAX_FAT32) LEAVE_MKFS(FR_MKFS_ABORTED);
 11672              		.loc 1 6197 12 view .LVU4031
 11673 0264 4FF0000C 		mov	ip, #0
6196:DRIVER/FatFs/source/ff.c **** 				sz_dir = 0;		/* No static directory */
 11674              		.loc 1 6196 12 view .LVU4032
 11675 0268 2020     		movs	r0, #32
 11676 026a 94E7     		b	.L821
 11677              	.LVL1374:
 11678              	.L901:
6191:DRIVER/FatFs/source/ff.c **** 					for (i = 0, pau = 1; cst32[i] && cst32[i] <= n; i++, pau <<= 1) ;	/* Get from table */
 11679              		.loc 1 6191 6 is_stmt 1 view .LVU4033
6191:DRIVER/FatFs/source/ff.c **** 					for (i = 0, pau = 1; cst32[i] && cst32[i] <= n; i++, pau <<= 1) ;	/* Get from table */
 11680              		.loc 1 6191 8 is_stmt 0 view .LVU4034
 11681 026c 480C     		lsrs	r0, r1, #17
 11682              	.LVL1375:
6192:DRIVER/FatFs/source/ff.c **** 				}
 11683              		.loc 1 6192 6 is_stmt 1 view .LVU4035
6192:DRIVER/FatFs/source/ff.c **** 				}
 11684              		.loc 1 6192 13 is_stmt 0 view .LVU4036
 11685 026e 3246     		mov	r2, r6
6192:DRIVER/FatFs/source/ff.c **** 				}
 11686              		.loc 1 6192 22 view .LVU4037
 11687 0270 0127     		movs	r7, #1
6192:DRIVER/FatFs/source/ff.c **** 				}
 11688              		.loc 1 6192 6 view .LVU4038
 11689 0272 01E0     		b	.L819
 11690              	.LVL1376:
 11691              	.L820:
6192:DRIVER/FatFs/source/ff.c **** 				}
 11692              		.loc 1 6192 57 is_stmt 1 discriminator 4 view .LVU4039
6192:DRIVER/FatFs/source/ff.c **** 				}
 11693              		.loc 1 6192 55 is_stmt 0 discriminator 4 view .LVU4040
 11694 0274 0132     		adds	r2, r2, #1
 11695              	.LVL1377:
6192:DRIVER/FatFs/source/ff.c **** 				}
 11696              		.loc 1 6192 63 discriminator 4 view .LVU4041
 11697 0276 7F00     		lsls	r7, r7, #1
 11698              	.LVL1378:
 11699              	.L819:
6192:DRIVER/FatFs/source/ff.c **** 				}
 11700              		.loc 1 6192 36 is_stmt 1 discriminator 1 view .LVU4042
6192:DRIVER/FatFs/source/ff.c **** 				}
 11701              		.loc 1 6192 32 is_stmt 0 discriminator 1 view .LVU4043
 11702 0278 204B     		ldr	r3, .L909+12
 11703 027a 33F81230 		ldrh	r3, [r3, r2, lsl #1]
6192:DRIVER/FatFs/source/ff.c **** 				}
 11704              		.loc 1 6192 36 discriminator 1 view .LVU4044
 11705 027e 002B     		cmp	r3, #0
 11706 0280 DFD0     		beq	.L818
6192:DRIVER/FatFs/source/ff.c **** 				}
 11707              		.loc 1 6192 36 discriminator 3 view .LVU4045
 11708 0282 8342     		cmp	r3, r0
 11709 0284 F6D9     		bls	.L820
 11710 0286 DCE7     		b	.L818
 11711              	.LVL1379:
 11712              	.L898:
6201:DRIVER/FatFs/source/ff.c **** 					for (i = 0, pau = 1; cst[i] && cst[i] <= n; i++, pau <<= 1) ;	/* Get from table */
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 375


 11713              		.loc 1 6201 6 is_stmt 1 view .LVU4046
6201:DRIVER/FatFs/source/ff.c **** 					for (i = 0, pau = 1; cst[i] && cst[i] <= n; i++, pau <<= 1) ;	/* Get from table */
 11714              		.loc 1 6201 8 is_stmt 0 view .LVU4047
 11715 0288 080B     		lsrs	r0, r1, #12
 11716              	.LVL1380:
6202:DRIVER/FatFs/source/ff.c **** 				}
 11717              		.loc 1 6202 6 is_stmt 1 view .LVU4048
6202:DRIVER/FatFs/source/ff.c **** 				}
 11718              		.loc 1 6202 13 is_stmt 0 view .LVU4049
 11719 028a 3246     		mov	r2, r6
6202:DRIVER/FatFs/source/ff.c **** 				}
 11720              		.loc 1 6202 22 view .LVU4050
 11721 028c 0127     		movs	r7, #1
6202:DRIVER/FatFs/source/ff.c **** 				}
 11722              		.loc 1 6202 6 view .LVU4051
 11723 028e 01E0     		b	.L823
 11724              	.LVL1381:
 11725              	.L824:
6202:DRIVER/FatFs/source/ff.c **** 				}
 11726              		.loc 1 6202 53 is_stmt 1 discriminator 4 view .LVU4052
6202:DRIVER/FatFs/source/ff.c **** 				}
 11727              		.loc 1 6202 51 is_stmt 0 discriminator 4 view .LVU4053
 11728 0290 0132     		adds	r2, r2, #1
 11729              	.LVL1382:
6202:DRIVER/FatFs/source/ff.c **** 				}
 11730              		.loc 1 6202 59 discriminator 4 view .LVU4054
 11731 0292 7F00     		lsls	r7, r7, #1
 11732              	.LVL1383:
 11733              	.L823:
6202:DRIVER/FatFs/source/ff.c **** 				}
 11734              		.loc 1 6202 34 is_stmt 1 discriminator 1 view .LVU4055
6202:DRIVER/FatFs/source/ff.c **** 				}
 11735              		.loc 1 6202 30 is_stmt 0 discriminator 1 view .LVU4056
 11736 0294 1A4B     		ldr	r3, .L909+16
 11737 0296 33F81230 		ldrh	r3, [r3, r2, lsl #1]
6202:DRIVER/FatFs/source/ff.c **** 				}
 11738              		.loc 1 6202 34 discriminator 1 view .LVU4057
 11739 029a 002B     		cmp	r3, #0
 11740 029c 3FF467AF 		beq	.L822
6202:DRIVER/FatFs/source/ff.c **** 				}
 11741              		.loc 1 6202 34 discriminator 3 view .LVU4058
 11742 02a0 8342     		cmp	r3, r0
 11743 02a2 F5D9     		bls	.L824
 11744 02a4 63E7     		b	.L822
 11745              	.LVL1384:
 11746              	.L825:
6208:DRIVER/FatFs/source/ff.c **** 					n = (n_clst * 3 + 1) / 2 + 3;	/* FAT size [byte] */
 11747              		.loc 1 6208 6 is_stmt 1 view .LVU4059
6209:DRIVER/FatFs/source/ff.c **** 				}
 11748              		.loc 1 6209 6 view .LVU4060
6209:DRIVER/FatFs/source/ff.c **** 				}
 11749              		.loc 1 6209 18 is_stmt 0 view .LVU4061
 11750 02a6 03EB4305 		add	r5, r3, r3, lsl #1
6209:DRIVER/FatFs/source/ff.c **** 				}
 11751              		.loc 1 6209 22 view .LVU4062
 11752 02aa 0135     		adds	r5, r5, #1
6209:DRIVER/FatFs/source/ff.c **** 				}
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 376


 11753              		.loc 1 6209 27 view .LVU4063
 11754 02ac 6D08     		lsrs	r5, r5, #1
6209:DRIVER/FatFs/source/ff.c **** 				}
 11755              		.loc 1 6209 8 view .LVU4064
 11756 02ae 0335     		adds	r5, r5, #3
 11757              	.LVL1385:
6208:DRIVER/FatFs/source/ff.c **** 					n = (n_clst * 3 + 1) / 2 + 3;	/* FAT size [byte] */
 11758              		.loc 1 6208 11 view .LVU4065
 11759 02b0 4FF0010A 		mov	r10, #1
 11760 02b4 64E7     		b	.L826
 11761              	.LVL1386:
 11762              	.L899:
6221:DRIVER/FatFs/source/ff.c **** 			} else {					/* FAT: Expand FAT */
 11763              		.loc 1 6221 5 is_stmt 1 view .LVU4066
6221:DRIVER/FatFs/source/ff.c **** 			} else {					/* FAT: Expand FAT */
 11764              		.loc 1 6221 12 is_stmt 0 view .LVU4067
 11765 02b6 1844     		add	r0, r0, r3
 11766              	.LVL1387:
6221:DRIVER/FatFs/source/ff.c **** 			} else {					/* FAT: Expand FAT */
 11767              		.loc 1 6221 18 is_stmt 1 view .LVU4068
6221:DRIVER/FatFs/source/ff.c **** 			} else {					/* FAT: Expand FAT */
 11768              		.loc 1 6221 24 is_stmt 0 view .LVU4069
 11769 02b8 9E44     		add	lr, lr, r3
 11770              	.LVL1388:
6221:DRIVER/FatFs/source/ff.c **** 			} else {					/* FAT: Expand FAT */
 11771              		.loc 1 6221 24 view .LVU4070
 11772 02ba 8DE7     		b	.L828
 11773              	.LVL1389:
 11774              	.L900:
6233:DRIVER/FatFs/source/ff.c **** 					if (sz_au == 0 && (sz_au = pau / 2) != 0) continue;	/* Adjust cluster size and retry */
 11775              		.loc 1 6233 5 is_stmt 1 view .LVU4071
6233:DRIVER/FatFs/source/ff.c **** 					if (sz_au == 0 && (sz_au = pau / 2) != 0) continue;	/* Adjust cluster size and retry */
 11776              		.loc 1 6233 8 is_stmt 0 view .LVU4072
 11777 02bc 4FF6F573 		movw	r3, #65525
 11778 02c0 9845     		cmp	r8, r3
 11779 02c2 9BD8     		bhi	.L830
6234:DRIVER/FatFs/source/ff.c **** 					LEAVE_MKFS(FR_MKFS_ABORTED);
 11780              		.loc 1 6234 6 is_stmt 1 view .LVU4073
6234:DRIVER/FatFs/source/ff.c **** 					LEAVE_MKFS(FR_MKFS_ABORTED);
 11781              		.loc 1 6234 9 is_stmt 0 view .LVU4074
 11782 02c4 002E     		cmp	r6, #0
 11783 02c6 40F0D581 		bne	.L875
6234:DRIVER/FatFs/source/ff.c **** 					LEAVE_MKFS(FR_MKFS_ABORTED);
 11784              		.loc 1 6234 31 discriminator 1 view .LVU4075
 11785 02ca 7E08     		lsrs	r6, r7, #1
 11786              	.LVL1390:
6234:DRIVER/FatFs/source/ff.c **** 					LEAVE_MKFS(FR_MKFS_ABORTED);
 11787              		.loc 1 6234 21 discriminator 1 view .LVU4076
 11788 02cc 012F     		cmp	r7, #1
 11789 02ce 3FF647AF 		bhi	.L816
6235:DRIVER/FatFs/source/ff.c **** 				}
 11790              		.loc 1 6235 6 view .LVU4077
 11791 02d2 0E20     		movs	r0, #14
 11792              	.LVL1391:
6235:DRIVER/FatFs/source/ff.c **** 				}
 11793              		.loc 1 6235 6 view .LVU4078
 11794 02d4 A8E1     		b	.L803
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 377


 11795              	.LVL1392:
 11796              	.L833:
6248:DRIVER/FatFs/source/ff.c **** 				}
6249:DRIVER/FatFs/source/ff.c **** 				if  (n_clst <= MAX_FAT12) {	/* Too few clusters for FAT16 */
 11797              		.loc 1 6249 5 is_stmt 1 view .LVU4079
 11798              		.loc 1 6249 9 is_stmt 0 view .LVU4080
 11799 02d6 40F6F573 		movw	r3, #4085
 11800 02da 9845     		cmp	r8, r3
 11801 02dc 12D8     		bhi	.L832
6250:DRIVER/FatFs/source/ff.c **** 					if (sz_au == 0 && (sz_au = pau * 2) <= 128) continue;	/* Adjust cluster size and retry */
 11802              		.loc 1 6250 6 is_stmt 1 view .LVU4081
 11803              		.loc 1 6250 9 is_stmt 0 view .LVU4082
 11804 02de 002E     		cmp	r6, #0
 11805 02e0 40F0CC81 		bne	.L879
 11806              		.loc 1 6250 31 discriminator 1 view .LVU4083
 11807 02e4 7E00     		lsls	r6, r7, #1
 11808              	.LVL1393:
 11809              		.loc 1 6250 21 discriminator 1 view .LVU4084
 11810 02e6 802E     		cmp	r6, #128
 11811 02e8 7FF63AAF 		bls	.L816
6251:DRIVER/FatFs/source/ff.c **** 					LEAVE_MKFS(FR_MKFS_ABORTED);
 11812              		.loc 1 6251 6 view .LVU4085
 11813 02ec 0E20     		movs	r0, #14
 11814              	.LVL1394:
 11815              		.loc 1 6251 6 view .LVU4086
 11816 02ee 9BE1     		b	.L803
 11817              	.L910:
 11818              		.align	2
 11819              	.L909:
 11820 02f0 00000000 		.word	FatFs
 11821 02f4 00000000 		.word	defopt.2
 11822 02f8 FFFFFE0F 		.word	268369919
 11823 02fc 00000000 		.word	cst32.1
 11824 0300 00000000 		.word	cst.0
 11825              	.LVL1395:
 11826              	.L832:
6252:DRIVER/FatFs/source/ff.c **** 				}
6253:DRIVER/FatFs/source/ff.c **** 			}
6254:DRIVER/FatFs/source/ff.c **** 			if (fsty == FS_FAT12 && n_clst > MAX_FAT12) LEAVE_MKFS(FR_MKFS_ABORTED);	/* Too many clusters fo
 11827              		.loc 1 6254 7 view .LVU4087
 11828 0304 0790     		str	r0, [sp, #28]
 11829 0306 CDF810E0 		str	lr, [sp, #16]
 11830 030a CDF820C0 		str	ip, [sp, #32]
 11831              		.loc 1 6254 4 is_stmt 1 view .LVU4088
 11832              		.loc 1 6254 7 is_stmt 0 view .LVU4089
 11833 030e BAF1010F 		cmp	r10, #1
 11834 0312 04D1     		bne	.L835
 11835              		.loc 1 6254 25 discriminator 1 view .LVU4090
 11836 0314 40F6F573 		movw	r3, #4085
 11837 0318 9845     		cmp	r8, r3
 11838 031a 00F2B181 		bhi	.L880
 11839              	.L835:
6255:DRIVER/FatFs/source/ff.c **** 
6256:DRIVER/FatFs/source/ff.c **** 			/* Ok, it is the valid cluster configuration */
6257:DRIVER/FatFs/source/ff.c **** 			break;
 11840              		.loc 1 6257 4 is_stmt 1 view .LVU4091
6258:DRIVER/FatFs/source/ff.c **** 		} while (1);
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 378


6259:DRIVER/FatFs/source/ff.c **** 
6260:DRIVER/FatFs/source/ff.c **** #if FF_USE_TRIM
6261:DRIVER/FatFs/source/ff.c **** 		lba[0] = b_vol; lba[1] = b_vol + sz_vol - 1;	/* Inform storage device that the volume area may be
6262:DRIVER/FatFs/source/ff.c **** 		disk_ioctl(pdrv, CTRL_TRIM, lba);
6263:DRIVER/FatFs/source/ff.c **** #endif
6264:DRIVER/FatFs/source/ff.c **** 		/* Create FAT VBR */
6265:DRIVER/FatFs/source/ff.c **** 		memset(buf, 0, ss);
 11841              		.loc 1 6265 3 view .LVU4092
 11842 031e BDF83E20 		ldrh	r2, [sp, #62]
 11843 0322 0021     		movs	r1, #0
 11844 0324 019E     		ldr	r6, [sp, #4]
 11845              	.LVL1396:
 11846              		.loc 1 6265 3 is_stmt 0 view .LVU4093
 11847 0326 3046     		mov	r0, r6
 11848              	.LVL1397:
 11849              		.loc 1 6265 3 view .LVU4094
 11850 0328 FFF7FEFF 		bl	memset
 11851              	.LVL1398:
6266:DRIVER/FatFs/source/ff.c **** 		memcpy(buf + BS_JmpBoot, "\xEB\xFE\x90" "MSDOS5.0", 11);	/* Boot jump code (x86), OEM name */
 11852              		.loc 1 6266 3 is_stmt 1 view .LVU4095
 11853 032c C94B     		ldr	r3, .L911
 11854 032e 03CB     		ldmia	r3!, {r0, r1}
 11855 0330 3060     		str	r0, [r6]	@ unaligned
 11856 0332 3046     		mov	r0, r6
 11857 0334 7160     		str	r1, [r6, #4]	@ unaligned
 11858 0336 1A88     		ldrh	r2, [r3]	@ unaligned
 11859 0338 9B78     		ldrb	r3, [r3, #2]	@ zero_extendqisi2
 11860 033a 3281     		strh	r2, [r6, #8]	@ unaligned
 11861 033c B372     		strb	r3, [r6, #10]
6267:DRIVER/FatFs/source/ff.c **** 		st_word(buf + BPB_BytsPerSec, ss);				/* Sector size [byte] */
 11862              		.loc 1 6267 3 view .LVU4096
 11863 033e BDF83E10 		ldrh	r1, [sp, #62]
 11864 0342 0B30     		adds	r0, r0, #11
 11865 0344 FFF7FEFF 		bl	st_word
 11866              	.LVL1399:
6268:DRIVER/FatFs/source/ff.c **** 		buf[BPB_SecPerClus] = (BYTE)pau;				/* Cluster size [sector] */
 11867              		.loc 1 6268 3 view .LVU4097
 11868              		.loc 1 6268 23 is_stmt 0 view .LVU4098
 11869 0348 3046     		mov	r0, r6
 11870 034a 7773     		strb	r7, [r6, #13]
6269:DRIVER/FatFs/source/ff.c **** 		st_word(buf + BPB_RsvdSecCnt, (WORD)sz_rsv);	/* Size of reserved area */
 11871              		.loc 1 6269 3 is_stmt 1 view .LVU4099
 11872 034c BDF81C10 		ldrh	r1, [sp, #28]
 11873 0350 0E30     		adds	r0, r0, #14
 11874 0352 FFF7FEFF 		bl	st_word
 11875              	.LVL1400:
6270:DRIVER/FatFs/source/ff.c **** 		buf[BPB_NumFATs] = (BYTE)n_fat;					/* Number of FATs */
 11876              		.loc 1 6270 3 view .LVU4100
 11877              		.loc 1 6270 20 is_stmt 0 view .LVU4101
 11878 0356 3046     		mov	r0, r6
 11879 0358 86F810B0 		strb	fp, [r6, #16]
6271:DRIVER/FatFs/source/ff.c **** 		st_word(buf + BPB_RootEntCnt, (WORD)((fsty == FS_FAT32) ? 0 : n_root));	/* Number of root directo
 11880              		.loc 1 6271 3 is_stmt 1 view .LVU4102
 11881 035c 1130     		adds	r0, r0, #17
 11882 035e BAF1030F 		cmp	r10, #3
 11883 0362 00F09C80 		beq	.L881
 11884              		.loc 1 6271 3 is_stmt 0 discriminator 1 view .LVU4103
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 379


 11885 0366 1FFA89F1 		uxth	r1, r9
 11886              	.L836:
 11887              		.loc 1 6271 3 discriminator 4 view .LVU4104
 11888 036a FFF7FEFF 		bl	st_word
 11889              	.LVL1401:
6272:DRIVER/FatFs/source/ff.c **** 		if (sz_vol < 0x10000) {
 11890              		.loc 1 6272 3 is_stmt 1 discriminator 4 view .LVU4105
 11891              		.loc 1 6272 14 is_stmt 0 discriminator 4 view .LVU4106
 11892 036e 0D99     		ldr	r1, [sp, #52]
 11893              		.loc 1 6272 6 discriminator 4 view .LVU4107
 11894 0370 B1F5803F 		cmp	r1, #65536
 11895 0374 80F09580 		bcs	.L837
6273:DRIVER/FatFs/source/ff.c **** 			st_word(buf + BPB_TotSec16, (WORD)sz_vol);	/* Volume size in 16-bit LBA */
 11896              		.loc 1 6273 4 is_stmt 1 view .LVU4108
 11897 0378 89B2     		uxth	r1, r1
 11898 037a 019B     		ldr	r3, [sp, #4]
 11899 037c 03F11300 		add	r0, r3, #19
 11900 0380 FFF7FEFF 		bl	st_word
 11901              	.LVL1402:
 11902              	.L838:
6274:DRIVER/FatFs/source/ff.c **** 		} else {
6275:DRIVER/FatFs/source/ff.c **** 			st_dword(buf + BPB_TotSec32, (DWORD)sz_vol);	/* Volume size in 32-bit LBA */
6276:DRIVER/FatFs/source/ff.c **** 		}
6277:DRIVER/FatFs/source/ff.c **** 		buf[BPB_Media] = 0xF8;							/* Media descriptor byte */
 11903              		.loc 1 6277 3 view .LVU4109
 11904              		.loc 1 6277 18 is_stmt 0 view .LVU4110
 11905 0384 F823     		movs	r3, #248
 11906 0386 019E     		ldr	r6, [sp, #4]
 11907 0388 7375     		strb	r3, [r6, #21]
6278:DRIVER/FatFs/source/ff.c **** 		st_word(buf + BPB_SecPerTrk, 63);				/* Number of sectors per track (for int13) */
 11908              		.loc 1 6278 3 is_stmt 1 view .LVU4111
 11909 038a 3F21     		movs	r1, #63
 11910 038c 06F11800 		add	r0, r6, #24
 11911 0390 FFF7FEFF 		bl	st_word
 11912              	.LVL1403:
6279:DRIVER/FatFs/source/ff.c **** 		st_word(buf + BPB_NumHeads, 255);				/* Number of heads (for int13) */
 11913              		.loc 1 6279 3 view .LVU4112
 11914 0394 FF21     		movs	r1, #255
 11915 0396 06F11A00 		add	r0, r6, #26
 11916 039a FFF7FEFF 		bl	st_word
 11917              	.LVL1404:
6280:DRIVER/FatFs/source/ff.c **** 		st_dword(buf + BPB_HiddSec, (DWORD)b_vol);		/* Volume offset in the physical drive [sector] */
 11918              		.loc 1 6280 3 view .LVU4113
 11919 039e 0299     		ldr	r1, [sp, #8]
 11920 03a0 06F11C00 		add	r0, r6, #28
 11921 03a4 FFF7FEFF 		bl	st_dword
 11922              	.LVL1405:
6281:DRIVER/FatFs/source/ff.c **** 		if (fsty == FS_FAT32) {
 11923              		.loc 1 6281 3 view .LVU4114
 11924              		.loc 1 6281 6 is_stmt 0 view .LVU4115
 11925 03a8 BAF1030F 		cmp	r10, #3
 11926 03ac 7FD0     		beq	.L902
6282:DRIVER/FatFs/source/ff.c **** 			st_dword(buf + BS_VolID32, vsn);			/* VSN */
6283:DRIVER/FatFs/source/ff.c **** 			st_dword(buf + BPB_FATSz32, sz_fat);		/* FAT size [sector] */
6284:DRIVER/FatFs/source/ff.c **** 			st_dword(buf + BPB_RootClus32, 2);			/* Root directory cluster # (2) */
6285:DRIVER/FatFs/source/ff.c **** 			st_word(buf + BPB_FSInfo32, 1);				/* Offset of FSINFO sector (VBR + 1) */
6286:DRIVER/FatFs/source/ff.c **** 			st_word(buf + BPB_BkBootSec32, 6);			/* Offset of backup VBR (VBR + 6) */
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 380


6287:DRIVER/FatFs/source/ff.c **** 			buf[BS_DrvNum32] = 0x80;					/* Drive number (for int13) */
6288:DRIVER/FatFs/source/ff.c **** 			buf[BS_BootSig32] = 0x29;					/* Extended boot signature */
6289:DRIVER/FatFs/source/ff.c **** 			memcpy(buf + BS_VolLab32, "NO NAME    " "FAT32   ", 19);	/* Volume label, FAT signature */
6290:DRIVER/FatFs/source/ff.c **** 		} else {
6291:DRIVER/FatFs/source/ff.c **** 			st_dword(buf + BS_VolID, vsn);				/* VSN */
 11927              		.loc 1 6291 4 is_stmt 1 view .LVU4116
 11928 03ae 0699     		ldr	r1, [sp, #24]
 11929 03b0 019E     		ldr	r6, [sp, #4]
 11930 03b2 06F12700 		add	r0, r6, #39
 11931 03b6 FFF7FEFF 		bl	st_dword
 11932              	.LVL1406:
6292:DRIVER/FatFs/source/ff.c **** 			st_word(buf + BPB_FATSz16, (WORD)sz_fat);	/* FAT size [sector] */
 11933              		.loc 1 6292 4 view .LVU4117
 11934 03ba A9B2     		uxth	r1, r5
 11935 03bc 06F11600 		add	r0, r6, #22
 11936 03c0 FFF7FEFF 		bl	st_word
 11937              	.LVL1407:
6293:DRIVER/FatFs/source/ff.c **** 			buf[BS_DrvNum] = 0x80;						/* Drive number (for int13) */
 11938              		.loc 1 6293 4 view .LVU4118
 11939              		.loc 1 6293 19 is_stmt 0 view .LVU4119
 11940 03c4 8023     		movs	r3, #128
 11941 03c6 86F82430 		strb	r3, [r6, #36]
6294:DRIVER/FatFs/source/ff.c **** 			buf[BS_BootSig] = 0x29;						/* Extended boot signature */
 11942              		.loc 1 6294 4 is_stmt 1 view .LVU4120
 11943              		.loc 1 6294 20 is_stmt 0 view .LVU4121
 11944 03ca 2923     		movs	r3, #41
 11945 03cc B446     		mov	ip, r6
 11946 03ce 86F82630 		strb	r3, [r6, #38]
6295:DRIVER/FatFs/source/ff.c **** 			memcpy(buf + BS_VolLab, "NO NAME    " "FAT     ", 19);	/* Volume label, FAT signature */
 11947              		.loc 1 6295 4 is_stmt 1 view .LVU4122
 11948 03d2 A14E     		ldr	r6, .L911+4
 11949 03d4 0FCE     		ldmia	r6!, {r0, r1, r2, r3}
 11950 03d6 CCF82B00 		str	r0, [ip, #43]	@ unaligned
 11951 03da CCF82F10 		str	r1, [ip, #47]	@ unaligned
 11952 03de CCF83320 		str	r2, [ip, #51]	@ unaligned
 11953 03e2 CCF83730 		str	r3, [ip, #55]	@ unaligned
 11954 03e6 3288     		ldrh	r2, [r6]	@ unaligned
 11955 03e8 B378     		ldrb	r3, [r6, #2]	@ zero_extendqisi2
 11956 03ea ACF83B20 		strh	r2, [ip, #59]	@ unaligned
 11957 03ee 8CF83D30 		strb	r3, [ip, #61]
 11958              	.L840:
6296:DRIVER/FatFs/source/ff.c **** 		}
6297:DRIVER/FatFs/source/ff.c **** 		st_word(buf + BS_55AA, 0xAA55);					/* Signature (offset is fixed here regardless of sector size)
 11959              		.loc 1 6297 3 view .LVU4123
 11960 03f2 DDF80490 		ldr	r9, [sp, #4]
 11961              	.LVL1408:
 11962              		.loc 1 6297 3 is_stmt 0 view .LVU4124
 11963 03f6 09F5FF76 		add	r6, r9, #510
 11964 03fa 4AF65521 		movw	r1, #43605
 11965 03fe 3046     		mov	r0, r6
 11966 0400 FFF7FEFF 		bl	st_word
 11967              	.LVL1409:
6298:DRIVER/FatFs/source/ff.c **** 		if (disk_write(pdrv, buf, b_vol, 1) != RES_OK) LEAVE_MKFS(FR_DISK_ERR);	/* Write it to the VBR se
 11968              		.loc 1 6298 3 is_stmt 1 view .LVU4125
 11969              		.loc 1 6298 7 is_stmt 0 view .LVU4126
 11970 0404 0123     		movs	r3, #1
 11971 0406 029A     		ldr	r2, [sp, #8]
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 381


 11972 0408 4946     		mov	r1, r9
 11973 040a 2046     		mov	r0, r4
 11974 040c FFF7FEFF 		bl	disk_write
 11975              	.LVL1410:
 11976              		.loc 1 6298 6 view .LVU4127
 11977 0410 0028     		cmp	r0, #0
 11978 0412 40F03781 		bne	.L882
6299:DRIVER/FatFs/source/ff.c **** 
6300:DRIVER/FatFs/source/ff.c **** 		/* Create FSINFO record if needed */
6301:DRIVER/FatFs/source/ff.c **** 		if (fsty == FS_FAT32) {
 11979              		.loc 1 6301 3 is_stmt 1 view .LVU4128
 11980              		.loc 1 6301 6 is_stmt 0 view .LVU4129
 11981 0416 BAF1030F 		cmp	r10, #3
 11982 041a 7AD0     		beq	.L903
 11983              	.L841:
6302:DRIVER/FatFs/source/ff.c **** 			disk_write(pdrv, buf, b_vol + 6, 1);		/* Write backup VBR (VBR + 6) */
6303:DRIVER/FatFs/source/ff.c **** 			memset(buf, 0, ss);
6304:DRIVER/FatFs/source/ff.c **** 			st_dword(buf + FSI_LeadSig, 0x41615252);
6305:DRIVER/FatFs/source/ff.c **** 			st_dword(buf + FSI_StrucSig, 0x61417272);
6306:DRIVER/FatFs/source/ff.c **** 			st_dword(buf + FSI_Free_Count, n_clst - 1);	/* Number of free clusters */
6307:DRIVER/FatFs/source/ff.c **** 			st_dword(buf + FSI_Nxt_Free, 2);			/* Last allocated cluster# */
6308:DRIVER/FatFs/source/ff.c **** 			st_word(buf + BS_55AA, 0xAA55);
6309:DRIVER/FatFs/source/ff.c **** 			disk_write(pdrv, buf, b_vol + 7, 1);		/* Write backup FSINFO (VBR + 7) */
6310:DRIVER/FatFs/source/ff.c **** 			disk_write(pdrv, buf, b_vol + 1, 1);		/* Write original FSINFO (VBR + 1) */
6311:DRIVER/FatFs/source/ff.c **** 		}
6312:DRIVER/FatFs/source/ff.c **** 
6313:DRIVER/FatFs/source/ff.c **** 		/* Initialize FAT area */
6314:DRIVER/FatFs/source/ff.c **** 		memset(buf, 0, sz_buf * ss);
 11984              		.loc 1 6314 3 is_stmt 1 view .LVU4130
 11985 041c BDF83E20 		ldrh	r2, [sp, #62]
 11986 0420 039E     		ldr	r6, [sp, #12]
 11987 0422 06FB02F2 		mul	r2, r6, r2
 11988 0426 0021     		movs	r1, #0
 11989 0428 DDF80480 		ldr	r8, [sp, #4]
 11990              	.LVL1411:
 11991              		.loc 1 6314 3 is_stmt 0 view .LVU4131
 11992 042c 4046     		mov	r0, r8
 11993 042e FFF7FEFF 		bl	memset
 11994              	.LVL1412:
6315:DRIVER/FatFs/source/ff.c **** 		sect = b_fat;		/* FAT start sector */
 11995              		.loc 1 6315 3 is_stmt 1 view .LVU4132
6316:DRIVER/FatFs/source/ff.c **** 		for (i = 0; i < n_fat; i++) {			/* Initialize FATs each */
 11996              		.loc 1 6316 3 view .LVU4133
 11997              		.loc 1 6316 10 is_stmt 0 view .LVU4134
 11998 0432 4FF00009 		mov	r9, #0
 11999 0436 0697     		str	r7, [sp, #24]
 12000              	.LVL1413:
 12001              		.loc 1 6316 10 view .LVU4135
 12002 0438 049F     		ldr	r7, [sp, #16]
 12003              	.LVL1414:
 12004              		.loc 1 6316 10 view .LVU4136
 12005 043a 0295     		str	r5, [sp, #8]
 12006              	.LVL1415:
 12007              		.loc 1 6316 10 view .LVU4137
 12008 043c 5D46     		mov	r5, fp
 12009              	.LVL1416:
 12010              		.loc 1 6316 10 view .LVU4138
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 382


 12011 043e B346     		mov	fp, r6
 12012              	.LVL1417:
 12013              	.L842:
 12014              		.loc 1 6316 17 is_stmt 1 discriminator 1 view .LVU4139
 12015 0440 A945     		cmp	r9, r5
 12016 0442 80F0B080 		bcs	.L904
6317:DRIVER/FatFs/source/ff.c **** 			if (fsty == FS_FAT32) {
 12017              		.loc 1 6317 4 view .LVU4140
 12018              		.loc 1 6317 7 is_stmt 0 view .LVU4141
 12019 0446 BAF1030F 		cmp	r10, #3
 12020 044a 00F09880 		beq	.L905
6318:DRIVER/FatFs/source/ff.c **** 				st_dword(buf + 0, 0xFFFFFFF8);	/* FAT[0] */
6319:DRIVER/FatFs/source/ff.c **** 				st_dword(buf + 4, 0xFFFFFFFF);	/* FAT[1] */
6320:DRIVER/FatFs/source/ff.c **** 				st_dword(buf + 8, 0x0FFFFFFF);	/* FAT[2] (root directory) */
6321:DRIVER/FatFs/source/ff.c **** 			} else {
6322:DRIVER/FatFs/source/ff.c **** 				st_dword(buf + 0, (fsty == FS_FAT12) ? 0xFFFFF8 : 0xFFFFFFF8);	/* FAT[0] and FAT[1] */
 12021              		.loc 1 6322 5 is_stmt 1 view .LVU4142
 12022 044e BAF1010F 		cmp	r10, #1
 12023 0452 00F0A680 		beq	.L906
 12024 0456 6FF00701 		mvn	r1, #7
 12025              	.L845:
 12026              		.loc 1 6322 5 is_stmt 0 discriminator 4 view .LVU4143
 12027 045a 4046     		mov	r0, r8
 12028 045c FFF7FEFF 		bl	st_dword
 12029              	.LVL1418:
 12030              	.L844:
 12031              		.loc 1 6322 5 view .LVU4144
 12032 0460 029E     		ldr	r6, [sp, #8]
 12033 0462 CDF810A0 		str	r10, [sp, #16]
 12034              	.L846:
 12035              	.LVL1419:
6323:DRIVER/FatFs/source/ff.c **** 			}
6324:DRIVER/FatFs/source/ff.c **** 			nsect = sz_fat;		/* Number of FAT sectors */
6325:DRIVER/FatFs/source/ff.c **** 			do {	/* Fill FAT sectors */
 12036              		.loc 1 6325 4 is_stmt 1 view .LVU4145
6326:DRIVER/FatFs/source/ff.c **** 				n = (nsect > sz_buf) ? sz_buf : nsect;
 12037              		.loc 1 6326 5 view .LVU4146
 12038              		.loc 1 6326 7 is_stmt 0 view .LVU4147
 12039 0466 B246     		mov	r10, r6
 12040 0468 5E45     		cmp	r6, fp
 12041 046a 28BF     		it	cs
 12042 046c DA46     		movcs	r10, fp
 12043              	.LVL1420:
6327:DRIVER/FatFs/source/ff.c **** 				if (disk_write(pdrv, buf, sect, (UINT)n) != RES_OK) LEAVE_MKFS(FR_DISK_ERR);
 12044              		.loc 1 6327 5 is_stmt 1 view .LVU4148
 12045              		.loc 1 6327 9 is_stmt 0 view .LVU4149
 12046 046e 5346     		mov	r3, r10
 12047 0470 3A46     		mov	r2, r7
 12048 0472 4146     		mov	r1, r8
 12049 0474 2046     		mov	r0, r4
 12050 0476 FFF7FEFF 		bl	disk_write
 12051              	.LVL1421:
 12052              		.loc 1 6327 8 view .LVU4150
 12053 047a 0028     		cmp	r0, #0
 12054 047c 40F00481 		bne	.L884
6328:DRIVER/FatFs/source/ff.c **** 				memset(buf, 0, ss);	/* Rest of FAT all are cleared */
 12055              		.loc 1 6328 5 is_stmt 1 view .LVU4151
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 383


 12056 0480 BDF83E20 		ldrh	r2, [sp, #62]
 12057 0484 0021     		movs	r1, #0
 12058 0486 4046     		mov	r0, r8
 12059 0488 FFF7FEFF 		bl	memset
 12060              	.LVL1422:
6329:DRIVER/FatFs/source/ff.c **** 				sect += n; nsect -= n;
 12061              		.loc 1 6329 5 view .LVU4152
 12062              		.loc 1 6329 10 is_stmt 0 view .LVU4153
 12063 048c 5744     		add	r7, r7, r10
 12064              	.LVL1423:
 12065              		.loc 1 6329 16 is_stmt 1 view .LVU4154
6330:DRIVER/FatFs/source/ff.c **** 			} while (nsect);
 12066              		.loc 1 6330 13 view .LVU4155
 12067 048e B6EB0A06 		subs	r6, r6, r10
 12068              	.LVL1424:
 12069              		.loc 1 6330 13 is_stmt 0 view .LVU4156
 12070 0492 E8D1     		bne	.L846
6316:DRIVER/FatFs/source/ff.c **** 			if (fsty == FS_FAT32) {
 12071              		.loc 1 6316 27 discriminator 2 view .LVU4157
 12072 0494 DDF810A0 		ldr	r10, [sp, #16]
 12073              	.LVL1425:
6316:DRIVER/FatFs/source/ff.c **** 			if (fsty == FS_FAT32) {
 12074              		.loc 1 6316 27 is_stmt 1 discriminator 2 view .LVU4158
 12075 0498 09F10109 		add	r9, r9, #1
 12076              	.LVL1426:
6316:DRIVER/FatFs/source/ff.c **** 			if (fsty == FS_FAT32) {
 12077              		.loc 1 6316 27 is_stmt 0 discriminator 2 view .LVU4159
 12078 049c D0E7     		b	.L842
 12079              	.LVL1427:
 12080              	.L881:
6271:DRIVER/FatFs/source/ff.c **** 		if (sz_vol < 0x10000) {
 12081              		.loc 1 6271 3 view .LVU4160
 12082 049e 0021     		movs	r1, #0
 12083 04a0 63E7     		b	.L836
 12084              	.L837:
6275:DRIVER/FatFs/source/ff.c **** 		}
 12085              		.loc 1 6275 4 is_stmt 1 view .LVU4161
 12086 04a2 019B     		ldr	r3, [sp, #4]
 12087 04a4 03F12000 		add	r0, r3, #32
 12088 04a8 FFF7FEFF 		bl	st_dword
 12089              	.LVL1428:
 12090 04ac 6AE7     		b	.L838
 12091              	.L902:
6282:DRIVER/FatFs/source/ff.c **** 			st_dword(buf + BPB_FATSz32, sz_fat);		/* FAT size [sector] */
 12092              		.loc 1 6282 4 view .LVU4162
 12093 04ae 0699     		ldr	r1, [sp, #24]
 12094 04b0 019E     		ldr	r6, [sp, #4]
 12095 04b2 06F14300 		add	r0, r6, #67
 12096 04b6 FFF7FEFF 		bl	st_dword
 12097              	.LVL1429:
6283:DRIVER/FatFs/source/ff.c **** 			st_dword(buf + BPB_RootClus32, 2);			/* Root directory cluster # (2) */
 12098              		.loc 1 6283 4 view .LVU4163
 12099 04ba 2946     		mov	r1, r5
 12100 04bc 06F12400 		add	r0, r6, #36
 12101 04c0 FFF7FEFF 		bl	st_dword
 12102              	.LVL1430:
6284:DRIVER/FatFs/source/ff.c **** 			st_word(buf + BPB_FSInfo32, 1);				/* Offset of FSINFO sector (VBR + 1) */
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 384


 12103              		.loc 1 6284 4 view .LVU4164
 12104 04c4 0221     		movs	r1, #2
 12105 04c6 06F12C00 		add	r0, r6, #44
 12106 04ca FFF7FEFF 		bl	st_dword
 12107              	.LVL1431:
6285:DRIVER/FatFs/source/ff.c **** 			st_word(buf + BPB_BkBootSec32, 6);			/* Offset of backup VBR (VBR + 6) */
 12108              		.loc 1 6285 4 view .LVU4165
 12109 04ce 0121     		movs	r1, #1
 12110 04d0 06F13000 		add	r0, r6, #48
 12111 04d4 FFF7FEFF 		bl	st_word
 12112              	.LVL1432:
6286:DRIVER/FatFs/source/ff.c **** 			buf[BS_DrvNum32] = 0x80;					/* Drive number (for int13) */
 12113              		.loc 1 6286 4 view .LVU4166
 12114 04d8 0621     		movs	r1, #6
 12115 04da 06F13200 		add	r0, r6, #50
 12116 04de FFF7FEFF 		bl	st_word
 12117              	.LVL1433:
6287:DRIVER/FatFs/source/ff.c **** 			buf[BS_BootSig32] = 0x29;					/* Extended boot signature */
 12118              		.loc 1 6287 4 view .LVU4167
6287:DRIVER/FatFs/source/ff.c **** 			buf[BS_BootSig32] = 0x29;					/* Extended boot signature */
 12119              		.loc 1 6287 21 is_stmt 0 view .LVU4168
 12120 04e2 8023     		movs	r3, #128
 12121 04e4 86F84030 		strb	r3, [r6, #64]
6288:DRIVER/FatFs/source/ff.c **** 			memcpy(buf + BS_VolLab32, "NO NAME    " "FAT32   ", 19);	/* Volume label, FAT signature */
 12122              		.loc 1 6288 4 is_stmt 1 view .LVU4169
6288:DRIVER/FatFs/source/ff.c **** 			memcpy(buf + BS_VolLab32, "NO NAME    " "FAT32   ", 19);	/* Volume label, FAT signature */
 12123              		.loc 1 6288 22 is_stmt 0 view .LVU4170
 12124 04e8 2923     		movs	r3, #41
 12125 04ea B446     		mov	ip, r6
 12126 04ec 86F84230 		strb	r3, [r6, #66]
6289:DRIVER/FatFs/source/ff.c **** 		} else {
 12127              		.loc 1 6289 4 is_stmt 1 view .LVU4171
 12128 04f0 5A4E     		ldr	r6, .L911+8
 12129 04f2 0FCE     		ldmia	r6!, {r0, r1, r2, r3}
 12130 04f4 CCF84700 		str	r0, [ip, #71]	@ unaligned
 12131 04f8 CCF84B10 		str	r1, [ip, #75]	@ unaligned
 12132 04fc CCF84F20 		str	r2, [ip, #79]	@ unaligned
 12133 0500 CCF85330 		str	r3, [ip, #83]	@ unaligned
 12134 0504 3288     		ldrh	r2, [r6]	@ unaligned
 12135 0506 B378     		ldrb	r3, [r6, #2]	@ zero_extendqisi2
 12136 0508 ACF85720 		strh	r2, [ip, #87]	@ unaligned
 12137 050c 8CF85930 		strb	r3, [ip, #89]
 12138 0510 6FE7     		b	.L840
 12139              	.LVL1434:
 12140              	.L903:
6302:DRIVER/FatFs/source/ff.c **** 			memset(buf, 0, ss);
 12141              		.loc 1 6302 4 view .LVU4172
 12142 0512 0123     		movs	r3, #1
 12143 0514 029A     		ldr	r2, [sp, #8]
 12144 0516 0632     		adds	r2, r2, #6
 12145 0518 DDF80490 		ldr	r9, [sp, #4]
 12146 051c 4946     		mov	r1, r9
 12147 051e 2046     		mov	r0, r4
 12148 0520 FFF7FEFF 		bl	disk_write
 12149              	.LVL1435:
6303:DRIVER/FatFs/source/ff.c **** 			st_dword(buf + FSI_LeadSig, 0x41615252);
 12150              		.loc 1 6303 4 view .LVU4173
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 385


 12151 0524 BDF83E20 		ldrh	r2, [sp, #62]
 12152 0528 0021     		movs	r1, #0
 12153 052a 4846     		mov	r0, r9
 12154 052c FFF7FEFF 		bl	memset
 12155              	.LVL1436:
6304:DRIVER/FatFs/source/ff.c **** 			st_dword(buf + FSI_StrucSig, 0x61417272);
 12156              		.loc 1 6304 4 view .LVU4174
 12157 0530 4B49     		ldr	r1, .L911+12
 12158 0532 4846     		mov	r0, r9
 12159 0534 FFF7FEFF 		bl	st_dword
 12160              	.LVL1437:
6305:DRIVER/FatFs/source/ff.c **** 			st_dword(buf + FSI_Free_Count, n_clst - 1);	/* Number of free clusters */
 12161              		.loc 1 6305 4 view .LVU4175
 12162 0538 4A49     		ldr	r1, .L911+16
 12163 053a 09F5F270 		add	r0, r9, #484
 12164 053e FFF7FEFF 		bl	st_dword
 12165              	.LVL1438:
6306:DRIVER/FatFs/source/ff.c **** 			st_dword(buf + FSI_Nxt_Free, 2);			/* Last allocated cluster# */
 12166              		.loc 1 6306 4 view .LVU4176
 12167 0542 08F1FF31 		add	r1, r8, #-1
 12168 0546 09F5F470 		add	r0, r9, #488
 12169 054a FFF7FEFF 		bl	st_dword
 12170              	.LVL1439:
6307:DRIVER/FatFs/source/ff.c **** 			st_word(buf + BS_55AA, 0xAA55);
 12171              		.loc 1 6307 4 view .LVU4177
 12172 054e 0221     		movs	r1, #2
 12173 0550 09F5F670 		add	r0, r9, #492
 12174 0554 FFF7FEFF 		bl	st_dword
 12175              	.LVL1440:
6308:DRIVER/FatFs/source/ff.c **** 			disk_write(pdrv, buf, b_vol + 7, 1);		/* Write backup FSINFO (VBR + 7) */
 12176              		.loc 1 6308 4 view .LVU4178
 12177 0558 4AF65521 		movw	r1, #43605
 12178 055c 3046     		mov	r0, r6
 12179 055e FFF7FEFF 		bl	st_word
 12180              	.LVL1441:
6309:DRIVER/FatFs/source/ff.c **** 			disk_write(pdrv, buf, b_vol + 1, 1);		/* Write original FSINFO (VBR + 1) */
 12181              		.loc 1 6309 4 view .LVU4179
 12182 0562 0123     		movs	r3, #1
 12183 0564 029E     		ldr	r6, [sp, #8]
 12184 0566 F21D     		adds	r2, r6, #7
 12185 0568 4946     		mov	r1, r9
 12186 056a 2046     		mov	r0, r4
 12187 056c FFF7FEFF 		bl	disk_write
 12188              	.LVL1442:
6310:DRIVER/FatFs/source/ff.c **** 		}
 12189              		.loc 1 6310 4 view .LVU4180
 12190 0570 0123     		movs	r3, #1
 12191 0572 F218     		adds	r2, r6, r3
 12192 0574 4946     		mov	r1, r9
 12193 0576 2046     		mov	r0, r4
 12194 0578 FFF7FEFF 		bl	disk_write
 12195              	.LVL1443:
 12196 057c 4EE7     		b	.L841
 12197              	.LVL1444:
 12198              	.L905:
6318:DRIVER/FatFs/source/ff.c **** 				st_dword(buf + 4, 0xFFFFFFFF);	/* FAT[1] */
 12199              		.loc 1 6318 5 view .LVU4181
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 386


 12200 057e 6FF00701 		mvn	r1, #7
 12201 0582 4046     		mov	r0, r8
 12202 0584 FFF7FEFF 		bl	st_dword
 12203              	.LVL1445:
6319:DRIVER/FatFs/source/ff.c **** 				st_dword(buf + 8, 0x0FFFFFFF);	/* FAT[2] (root directory) */
 12204              		.loc 1 6319 5 view .LVU4182
 12205 0588 4FF0FF31 		mov	r1, #-1
 12206 058c 08F10400 		add	r0, r8, #4
 12207 0590 FFF7FEFF 		bl	st_dword
 12208              	.LVL1446:
6320:DRIVER/FatFs/source/ff.c **** 			} else {
 12209              		.loc 1 6320 5 view .LVU4183
 12210 0594 6FF07041 		mvn	r1, #-268435456
 12211 0598 08F10800 		add	r0, r8, #8
 12212 059c FFF7FEFF 		bl	st_dword
 12213              	.LVL1447:
 12214 05a0 5EE7     		b	.L844
 12215              	.L906:
6322:DRIVER/FatFs/source/ff.c **** 			}
 12216              		.loc 1 6322 5 is_stmt 0 view .LVU4184
 12217 05a2 3149     		ldr	r1, .L911+20
 12218 05a4 59E7     		b	.L845
 12219              	.L904:
6331:DRIVER/FatFs/source/ff.c **** 		}
6332:DRIVER/FatFs/source/ff.c **** 
6333:DRIVER/FatFs/source/ff.c **** 		/* Initialize root directory (fill with zero) */
6334:DRIVER/FatFs/source/ff.c **** 		nsect = (fsty == FS_FAT32) ? pau : sz_dir;	/* Number of root directory sectors */
 12220              		.loc 1 6334 36 view .LVU4185
 12221 05a6 0497     		str	r7, [sp, #16]
 12222 05a8 069F     		ldr	r7, [sp, #24]
 12223              	.LVL1448:
 12224              		.loc 1 6334 3 is_stmt 1 view .LVU4186
 12225              		.loc 1 6334 36 is_stmt 0 view .LVU4187
 12226 05aa BAF1030F 		cmp	r10, #3
 12227 05ae 1CD0     		beq	.L907
 12228              		.loc 1 6334 36 view .LVU4188
 12229 05b0 049F     		ldr	r7, [sp, #16]
 12230 05b2 089E     		ldr	r6, [sp, #32]
 12231              	.LVL1449:
 12232              	.L849:
6335:DRIVER/FatFs/source/ff.c **** 		do {
 12233              		.loc 1 6335 3 is_stmt 1 view .LVU4189
6336:DRIVER/FatFs/source/ff.c **** 			n = (nsect > sz_buf) ? sz_buf : nsect;
 12234              		.loc 1 6336 4 view .LVU4190
 12235              		.loc 1 6336 6 is_stmt 0 view .LVU4191
 12236 05b4 039D     		ldr	r5, [sp, #12]
 12237 05b6 B542     		cmp	r5, r6
 12238 05b8 28BF     		it	cs
 12239 05ba 3546     		movcs	r5, r6
 12240              	.LVL1450:
6337:DRIVER/FatFs/source/ff.c **** 			if (disk_write(pdrv, buf, sect, (UINT)n) != RES_OK) LEAVE_MKFS(FR_DISK_ERR);
 12241              		.loc 1 6337 4 is_stmt 1 view .LVU4192
 12242              		.loc 1 6337 8 is_stmt 0 view .LVU4193
 12243 05bc 2B46     		mov	r3, r5
 12244 05be 3A46     		mov	r2, r7
 12245 05c0 0199     		ldr	r1, [sp, #4]
 12246 05c2 2046     		mov	r0, r4
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 387


 12247 05c4 FFF7FEFF 		bl	disk_write
 12248              	.LVL1451:
 12249              		.loc 1 6337 7 view .LVU4194
 12250 05c8 0028     		cmp	r0, #0
 12251 05ca 5FD1     		bne	.L885
6338:DRIVER/FatFs/source/ff.c **** 			sect += n; nsect -= n;
 12252              		.loc 1 6338 4 is_stmt 1 view .LVU4195
 12253              		.loc 1 6338 9 is_stmt 0 view .LVU4196
 12254 05cc 2F44     		add	r7, r7, r5
 12255              	.LVL1452:
 12256              		.loc 1 6338 15 is_stmt 1 view .LVU4197
6339:DRIVER/FatFs/source/ff.c **** 		} while (nsect);
 12257              		.loc 1 6339 12 view .LVU4198
 12258 05ce 761B     		subs	r6, r6, r5
 12259              	.LVL1453:
 12260              		.loc 1 6339 12 is_stmt 0 view .LVU4199
 12261 05d0 F0D1     		bne	.L849
6340:DRIVER/FatFs/source/ff.c **** 	}
6341:DRIVER/FatFs/source/ff.c **** 
6342:DRIVER/FatFs/source/ff.c **** 	/* A FAT volume has been created here */
6343:DRIVER/FatFs/source/ff.c **** 
6344:DRIVER/FatFs/source/ff.c **** 	/* Determine system ID in the MBR partition table */
6345:DRIVER/FatFs/source/ff.c **** 	if (FF_FS_EXFAT && fsty == FS_EXFAT) {
 12262              		.loc 1 6345 2 is_stmt 1 view .LVU4200
6346:DRIVER/FatFs/source/ff.c **** 		sys = 0x07;		/* exFAT */
6347:DRIVER/FatFs/source/ff.c **** 	} else if (fsty == FS_FAT32) {
 12263              		.loc 1 6347 9 view .LVU4201
 12264              		.loc 1 6347 12 is_stmt 0 view .LVU4202
 12265 05d2 BAF1030F 		cmp	r10, #3
 12266 05d6 0DD0     		beq	.L886
6348:DRIVER/FatFs/source/ff.c **** 		sys = 0x0C;		/* FAT32X */
6349:DRIVER/FatFs/source/ff.c **** 	} else if (sz_vol >= 0x10000) {
 12267              		.loc 1 6349 9 is_stmt 1 view .LVU4203
 12268              		.loc 1 6349 20 is_stmt 0 view .LVU4204
 12269 05d8 0D9B     		ldr	r3, [sp, #52]
 12270              		.loc 1 6349 12 view .LVU4205
 12271 05da B3F5803F 		cmp	r3, #65536
 12272 05de 1ED2     		bcs	.L887
6350:DRIVER/FatFs/source/ff.c **** 		sys = 0x06;		/* FAT12/16 (large) */
6351:DRIVER/FatFs/source/ff.c **** 	} else if (fsty == FS_FAT16) {
 12273              		.loc 1 6351 9 is_stmt 1 view .LVU4206
 12274              		.loc 1 6351 12 is_stmt 0 view .LVU4207
 12275 05e0 BAF1020F 		cmp	r10, #2
 12276 05e4 04D0     		beq	.L908
6352:DRIVER/FatFs/source/ff.c **** 		sys = 0x04;		/* FAT16 */
6353:DRIVER/FatFs/source/ff.c **** 	} else {
6354:DRIVER/FatFs/source/ff.c **** 		sys = 0x01;		/* FAT12 */
 12277              		.loc 1 6354 7 view .LVU4208
 12278 05e6 0122     		movs	r2, #1
 12279 05e8 05E0     		b	.L850
 12280              	.LVL1454:
 12281              	.L907:
6334:DRIVER/FatFs/source/ff.c **** 		do {
 12282              		.loc 1 6334 36 view .LVU4209
 12283 05ea 3E46     		mov	r6, r7
 12284 05ec 049F     		ldr	r7, [sp, #16]
 12285 05ee E1E7     		b	.L849
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 388


 12286              	.LVL1455:
 12287              	.L908:
6352:DRIVER/FatFs/source/ff.c **** 		sys = 0x04;		/* FAT16 */
 12288              		.loc 1 6352 7 view .LVU4210
 12289 05f0 0422     		movs	r2, #4
 12290 05f2 00E0     		b	.L850
 12291              	.L886:
6348:DRIVER/FatFs/source/ff.c **** 	} else if (sz_vol >= 0x10000) {
 12292              		.loc 1 6348 7 view .LVU4211
 12293 05f4 0C22     		movs	r2, #12
 12294              	.L850:
 12295              	.LVL1456:
6355:DRIVER/FatFs/source/ff.c **** 	}
6356:DRIVER/FatFs/source/ff.c **** 
6357:DRIVER/FatFs/source/ff.c **** 	/* Update partition information */
6358:DRIVER/FatFs/source/ff.c **** 	if (FF_MULTI_PARTITION && ipart != 0) {	/* Volume is in the existing partition */
 12296              		.loc 1 6358 2 is_stmt 1 view .LVU4212
6359:DRIVER/FatFs/source/ff.c **** 		if (!FF_LBA64 || !(fsopt & 0x80)) {	/* Is the partition in MBR? */
6360:DRIVER/FatFs/source/ff.c **** 			/* Update system ID in the partition table */
6361:DRIVER/FatFs/source/ff.c **** 			if (disk_read(pdrv, buf, 0, 1) != RES_OK) LEAVE_MKFS(FR_DISK_ERR);	/* Read the MBR */
6362:DRIVER/FatFs/source/ff.c **** 			buf[MBR_Table + (ipart - 1) * SZ_PTE + PTE_System] = sys;			/* Set system ID */
6363:DRIVER/FatFs/source/ff.c **** 			if (disk_write(pdrv, buf, 0, 1) != RES_OK) LEAVE_MKFS(FR_DISK_ERR);	/* Write it back to the MBR 
6364:DRIVER/FatFs/source/ff.c **** 		}
6365:DRIVER/FatFs/source/ff.c **** 	} else {								/* Volume as a new single partition */
6366:DRIVER/FatFs/source/ff.c **** 		if (!(fsopt & FM_SFD)) {			/* Create partition table if not in SFD format */
 12297              		.loc 1 6366 3 view .LVU4213
 12298              		.loc 1 6366 6 is_stmt 0 view .LVU4214
 12299 05f6 059B     		ldr	r3, [sp, #20]
 12300 05f8 4BB9     		cbnz	r3, .L851
6367:DRIVER/FatFs/source/ff.c **** 			lba[0] = sz_vol; lba[1] = 0;
 12301              		.loc 1 6367 4 is_stmt 1 view .LVU4215
 12302              		.loc 1 6367 11 is_stmt 0 view .LVU4216
 12303 05fa 0D9B     		ldr	r3, [sp, #52]
 12304 05fc 0B93     		str	r3, [sp, #44]
 12305              		.loc 1 6367 21 is_stmt 1 view .LVU4217
 12306              		.loc 1 6367 28 is_stmt 0 view .LVU4218
 12307 05fe 0023     		movs	r3, #0
 12308 0600 0C93     		str	r3, [sp, #48]
6368:DRIVER/FatFs/source/ff.c **** 			res = create_partition(pdrv, lba, sys, buf);
 12309              		.loc 1 6368 4 is_stmt 1 view .LVU4219
 12310              		.loc 1 6368 10 is_stmt 0 view .LVU4220
 12311 0602 019B     		ldr	r3, [sp, #4]
 12312 0604 0BA9     		add	r1, sp, #44
 12313 0606 2046     		mov	r0, r4
 12314 0608 FFF7FEFF 		bl	create_partition
 12315              	.LVL1457:
6369:DRIVER/FatFs/source/ff.c **** 			if (res != FR_OK) LEAVE_MKFS(res);
 12316              		.loc 1 6369 4 is_stmt 1 view .LVU4221
 12317              		.loc 1 6369 7 is_stmt 0 view .LVU4222
 12318 060c 60B9     		cbnz	r0, .L803
 12319              	.LVL1458:
 12320              	.L851:
6370:DRIVER/FatFs/source/ff.c **** 		}
6371:DRIVER/FatFs/source/ff.c **** 	}
6372:DRIVER/FatFs/source/ff.c **** 
6373:DRIVER/FatFs/source/ff.c **** 	if (disk_ioctl(pdrv, CTRL_SYNC, 0) != RES_OK) LEAVE_MKFS(FR_DISK_ERR);
 12321              		.loc 1 6373 2 is_stmt 1 view .LVU4223
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 389


 12322              		.loc 1 6373 6 is_stmt 0 view .LVU4224
 12323 060e 0022     		movs	r2, #0
 12324 0610 1146     		mov	r1, r2
 12325 0612 2046     		mov	r0, r4
 12326 0614 FFF7FEFF 		bl	disk_ioctl
 12327              	.LVL1459:
 12328              		.loc 1 6373 5 view .LVU4225
 12329 0618 30B1     		cbz	r0, .L803
 12330              		.loc 1 6373 48 view .LVU4226
 12331 061a 0120     		movs	r0, #1
 12332 061c 04E0     		b	.L803
 12333              	.LVL1460:
 12334              	.L887:
6350:DRIVER/FatFs/source/ff.c **** 	} else if (fsty == FS_FAT16) {
 12335              		.loc 1 6350 7 view .LVU4227
 12336 061e 0622     		movs	r2, #6
 12337 0620 E9E7     		b	.L850
 12338              	.LVL1461:
 12339              	.L852:
5908:DRIVER/FatFs/source/ff.c **** 	if (FatFs[vol]) FatFs[vol]->fs_type = 0;	/* Clear the fs object if mounted */
 12340              		.loc 1 5908 22 view .LVU4228
 12341 0622 0B20     		movs	r0, #11
 12342              	.LVL1462:
5908:DRIVER/FatFs/source/ff.c **** 	if (FatFs[vol]) FatFs[vol]->fs_type = 0;	/* Clear the fs object if mounted */
 12343              		.loc 1 5908 22 view .LVU4229
 12344 0624 00E0     		b	.L803
 12345              	.LVL1463:
 12346              	.L853:
5915:DRIVER/FatFs/source/ff.c **** 	if (ds & STA_PROTECT) return FR_WRITE_PROTECTED;
 12347              		.loc 1 5915 30 view .LVU4230
 12348 0626 0320     		movs	r0, #3
 12349              	.LVL1464:
 12350              	.L803:
6374:DRIVER/FatFs/source/ff.c **** 
6375:DRIVER/FatFs/source/ff.c **** 	LEAVE_MKFS(FR_OK);
6376:DRIVER/FatFs/source/ff.c **** }
 12351              		.loc 1 6376 1 view .LVU4231
 12352 0628 11B0     		add	sp, sp, #68
 12353              	.LCFI113:
 12354              		.cfi_remember_state
 12355              		.cfi_def_cfa_offset 36
 12356              		@ sp needed
 12357 062a BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 12358              	.LVL1465:
 12359              	.L854:
 12360              	.LCFI114:
 12361              		.cfi_restore_state
5916:DRIVER/FatFs/source/ff.c **** 
 12362              		.loc 1 5916 31 view .LVU4232
 12363 062e 0A20     		movs	r0, #10
 12364              	.LVL1466:
5916:DRIVER/FatFs/source/ff.c **** 
 12365              		.loc 1 5916 31 view .LVU4233
 12366 0630 FAE7     		b	.L803
 12367              	.L856:
5924:DRIVER/FatFs/source/ff.c **** 	if (ss > FF_MAX_SS || ss < FF_MIN_SS || (ss & (ss - 1))) return FR_DISK_ERR;
 12368              		.loc 1 5924 63 view .LVU4234
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 390


 12369 0632 0120     		movs	r0, #1
 12370 0634 F8E7     		b	.L803
 12371              	.L857:
5925:DRIVER/FatFs/source/ff.c **** #else
 12372              		.loc 1 5925 66 view .LVU4235
 12373 0636 0120     		movs	r0, #1
 12374 0638 F6E7     		b	.L803
 12375              	.L858:
 12376 063a 0120     		movs	r0, #1
 12377 063c F4E7     		b	.L803
 12378              	.LVL1467:
 12379              	.L862:
5939:DRIVER/FatFs/source/ff.c **** 	buf = (BYTE*)work;		/* Working buffer */
 12380              		.loc 1 5939 26 view .LVU4236
 12381 063e 1120     		movs	r0, #17
 12382 0640 F2E7     		b	.L803
 12383              	.LVL1468:
 12384              	.L863:
5944:DRIVER/FatFs/source/ff.c **** 
 12385              		.loc 1 5944 19 view .LVU4237
 12386 0642 1120     		movs	r0, #17
 12387 0644 F0E7     		b	.L803
 12388              	.LVL1469:
 12389              	.L864:
5983:DRIVER/FatFs/source/ff.c **** 		if (!(fsopt & FM_SFD)) {	/* To be partitioned? */
 12390              		.loc 1 5983 62 view .LVU4238
 12391 0646 0120     		movs	r0, #1
 12392 0648 EEE7     		b	.L803
 12393              	.LVL1470:
 12394              	.L867:
5999:DRIVER/FatFs/source/ff.c **** 
 12395              		.loc 1 5999 20 view .LVU4239
 12396 064a 0E20     		movs	r0, #14
 12397 064c ECE7     		b	.L803
 12398              	.L870:
6018:DRIVER/FatFs/source/ff.c **** 		fsty = FS_FAT16;
 12399              		.loc 1 6018 26 view .LVU4240
 12400 064e 1320     		movs	r0, #19
 12401 0650 EAE7     		b	.L803
 12402              	.L912:
 12403 0652 00BF     		.align	2
 12404              	.L911:
 12405 0654 00000000 		.word	.LC3
 12406 0658 20000000 		.word	.LC5
 12407 065c 0C000000 		.word	.LC4
 12408 0660 52526141 		.word	1096897106
 12409 0664 72724161 		.word	1631679090
 12410 0668 F8FFFF00 		.word	16777208
 12411              	.LVL1471:
 12412              	.L872:
6198:DRIVER/FatFs/source/ff.c **** 			} else {				/* FAT volume */
 12413              		.loc 1 6198 52 view .LVU4241
 12414 066c 0E20     		movs	r0, #14
 12415 066e DBE7     		b	.L803
 12416              	.LVL1472:
 12417              	.L874:
6230:DRIVER/FatFs/source/ff.c **** 			n_clst = ((DWORD)sz_vol - sz_rsv - sz_fat * n_fat - sz_dir) / pau;
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 391


 12418              		.loc 1 6230 44 view .LVU4242
 12419 0670 0E20     		movs	r0, #14
 12420              	.LVL1473:
6230:DRIVER/FatFs/source/ff.c **** 			n_clst = ((DWORD)sz_vol - sz_rsv - sz_fat * n_fat - sz_dir) / pau;
 12421              		.loc 1 6230 44 view .LVU4243
 12422 0672 D9E7     		b	.L803
 12423              	.LVL1474:
 12424              	.L875:
6235:DRIVER/FatFs/source/ff.c **** 				}
 12425              		.loc 1 6235 6 view .LVU4244
 12426 0674 0E20     		movs	r0, #14
 12427              	.LVL1475:
6235:DRIVER/FatFs/source/ff.c **** 				}
 12428              		.loc 1 6235 6 view .LVU4245
 12429 0676 D7E7     		b	.L803
 12430              	.LVL1476:
 12431              	.L878:
6247:DRIVER/FatFs/source/ff.c **** 				}
 12432              		.loc 1 6247 6 view .LVU4246
 12433 0678 0E20     		movs	r0, #14
 12434              	.LVL1477:
6247:DRIVER/FatFs/source/ff.c **** 				}
 12435              		.loc 1 6247 6 view .LVU4247
 12436 067a D5E7     		b	.L803
 12437              	.LVL1478:
 12438              	.L879:
6251:DRIVER/FatFs/source/ff.c **** 				}
 12439              		.loc 1 6251 6 view .LVU4248
 12440 067c 0E20     		movs	r0, #14
 12441              	.LVL1479:
6251:DRIVER/FatFs/source/ff.c **** 				}
 12442              		.loc 1 6251 6 view .LVU4249
 12443 067e D3E7     		b	.L803
 12444              	.LVL1480:
 12445              	.L880:
6254:DRIVER/FatFs/source/ff.c **** 
 12446              		.loc 1 6254 48 view .LVU4250
 12447 0680 0E20     		movs	r0, #14
 12448              	.LVL1481:
6254:DRIVER/FatFs/source/ff.c **** 
 12449              		.loc 1 6254 48 view .LVU4251
 12450 0682 D1E7     		b	.L803
 12451              	.LVL1482:
 12452              	.L882:
6298:DRIVER/FatFs/source/ff.c **** 
 12453              		.loc 1 6298 50 view .LVU4252
 12454 0684 0120     		movs	r0, #1
 12455 0686 CFE7     		b	.L803
 12456              	.LVL1483:
 12457              	.L884:
6327:DRIVER/FatFs/source/ff.c **** 				memset(buf, 0, ss);	/* Rest of FAT all are cleared */
 12458              		.loc 1 6327 57 view .LVU4253
 12459 0688 0120     		movs	r0, #1
 12460 068a CDE7     		b	.L803
 12461              	.LVL1484:
 12462              	.L885:
6337:DRIVER/FatFs/source/ff.c **** 			sect += n; nsect -= n;
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 392


 12463              		.loc 1 6337 56 view .LVU4254
 12464 068c 0120     		movs	r0, #1
 12465 068e CBE7     		b	.L803
 12466              		.cfi_endproc
 12467              	.LFE56:
 12469              		.section	.rodata.cst.0,"a"
 12470              		.align	2
 12473              	cst.0:
 12474 0000 0100     		.short	1
 12475 0002 0400     		.short	4
 12476 0004 1000     		.short	16
 12477 0006 4000     		.short	64
 12478 0008 0001     		.short	256
 12479 000a 0002     		.short	512
 12480 000c 0000     		.short	0
 12481              		.section	.rodata.cst32.1,"a"
 12482              		.align	2
 12485              	cst32.1:
 12486 0000 0100     		.short	1
 12487 0002 0200     		.short	2
 12488 0004 0400     		.short	4
 12489 0006 0800     		.short	8
 12490 0008 1000     		.short	16
 12491 000a 2000     		.short	32
 12492 000c 0000     		.short	0
 12493              		.section	.rodata.defopt.2,"a"
 12494              		.align	2
 12497              	defopt.2:
 12498 0000 07       		.byte	7
 12499 0001 00       		.byte	0
 12500 0002 0000     		.space	2
 12501 0004 00000000 		.word	0
 12502 0008 00000000 		.word	0
 12503 000c 00000000 		.word	0
 12504              		.section	.rodata.ExCvt,"a"
 12505              		.align	2
 12508              	ExCvt:
 12509 0000 809A4541 		.ascii	"\200\232EA\216A\217\200EEEIII\216\217\220\222\222O\231"
 12509      8E418F80 
 12509      45454549 
 12509      49498E8F 
 12509      9092924F 
 12510 0015 4F555559 		.ascii	"OUUY\231\232\233\234\235\236\237AIOU\245\245\246\247"
 12510      999A9B9C 
 12510      9D9E9F41 
 12510      494F55A5 
 12510      A5A6A7
 12511 0028 A8A9AAAB 		.ascii	"\250\251\252\253\254\255\256\257\260\261\262\263\264"
 12511      ACADAEAF 
 12511      B0B1B2B3 
 12511      B4
 12512 0035 B5B6B7B8 		.ascii	"\265\266\267\270\271\272\273\274\275\276\277\300\301"
 12512      B9BABBBC 
 12512      BDBEBFC0 
 12512      C1
 12513 0042 C2C3C4C5 		.ascii	"\302\303\304\305\306\307\310\311\312\313\314\315\316"
 12513      C6C7C8C9 
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 393


 12513      CACBCCCD 
 12513      CE
 12514 004f CFD0D1D2 		.ascii	"\317\320\321\322\323\324\325\326\327\330\331\332\333"
 12514      D3D4D5D6 
 12514      D7D8D9DA 
 12514      DB
 12515 005c DCDDDEDF 		.ascii	"\334\335\336\337\340\341\342\343\344\345\346\347\350"
 12515      E0E1E2E3 
 12515      E4E5E6E7 
 12515      E8
 12516 0069 E9EAEBEC 		.ascii	"\351\352\353\354\355\356\357\360\361\362\363\364\365"
 12516      EDEEEFF0 
 12516      F1F2F3F4 
 12516      F5
 12517 0076 F6F7F8F9 		.ascii	"\366\367\370\371\372\373\374\375\376\377"
 12517      FAFBFCFD 
 12517      FEFF
 12518              		.section	.rodata.LfnOfs,"a"
 12519              		.align	2
 12522              	LfnOfs:
 12523 0000 01030507 		.ascii	"\001\003\005\007\011\016\020\022\024\026\030\034\036"
 12523      090E1012 
 12523      1416181C 
 12523      1E
 12524              		.section	.bss.Fsid,"aw",%nobits
 12525              		.align	1
 12528              	Fsid:
 12529 0000 0000     		.space	2
 12530              		.section	.bss.FatFs,"aw",%nobits
 12531              		.align	2
 12534              	FatFs:
 12535 0000 00000000 		.space	8
 12535      00000000 
 12536              		.text
 12537              	.Letext0:
 12538              		.file 2 "e:\\windows\\programs\\arm-gnu-toolchain-12.2.mpacbti-bet1-mingw-w64-i686-arm-none-eabi\\
 12539              		.file 3 "e:\\windows\\programs\\arm-gnu-toolchain-12.2.mpacbti-bet1-mingw-w64-i686-arm-none-eabi\\
 12540              		.file 4 "e:\\windows\\programs\\arm-gnu-toolchain-12.2.mpacbti-bet1-mingw-w64-i686-arm-none-eabi\\
 12541              		.file 5 "DRIVER/FatFs/source/ff.h"
 12542              		.file 6 "DRIVER/FatFs/source/diskio.h"
 12543              		.file 7 "e:\\windows\\programs\\arm-gnu-toolchain-12.2.mpacbti-bet1-mingw-w64-i686-arm-none-eabi\\
 12544              		.file 8 "<built-in>"
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 394


DEFINED SYMBOLS
                            *ABS*:00000000 ff.c
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:19     .text.ld_word:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:24     .text.ld_word:00000000 ld_word
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:51     .text.ld_dword:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:56     .text.ld_dword:00000000 ld_dword
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:95     .text.st_word:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:100    .text.st_word:00000000 st_word
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:125    .text.st_dword:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:130    .text.st_dword:00000000 st_dword
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:169    .text.dbc_1st:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:174    .text.dbc_1st:00000000 dbc_1st
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:192    .text.dbc_2nd:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:197    .text.dbc_2nd:00000000 dbc_2nd
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:215    .text.tchar2uni:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:220    .text.tchar2uni:00000000 tchar2uni
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:406    .text.tchar2uni:000000b4 $d
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:411    .text.put_utf:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:416    .text.put_utf:00000000 put_utf
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:642    .text.clst2sect:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:647    .text.clst2sect:00000000 clst2sect
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:688    .text.ld_clust:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:693    .text.ld_clust:00000000 ld_clust
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:749    .text.st_clust:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:754    .text.st_clust:00000000 st_clust
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:803    .text.pick_lfn:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:808    .text.pick_lfn:00000000 pick_lfn
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:957    .text.pick_lfn:00000084 $d
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:12522  .rodata.LfnOfs:00000000 LfnOfs
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:962    .text.put_lfn:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:967    .text.put_lfn:00000000 put_lfn
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:1095   .text.put_lfn:00000074 $d
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:1100   .text.sum_sfn:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:1105   .text.sum_sfn:00000000 sum_sfn
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:1151   .text.get_ldnumber:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:1156   .text.get_ldnumber:00000000 get_ldnumber
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:1269   .text.validate:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:1274   .text.validate:00000000 validate
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:1383   .text.sync_window:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:1388   .text.sync_window:00000000 sync_window
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:1473   .text.move_window:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:1478   .text.move_window:00000000 move_window
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:1549   .rodata.check_fs.str1.4:00000000 $d
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:1553   .text.check_fs:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:1558   .text.check_fs:00000000 check_fs
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:1739   .text.check_fs:000000d4 $d
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:1744   .text.find_volume:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:1749   .text.find_volume:00000000 find_volume
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:1875   .text.mount_volume:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:1880   .text.mount_volume:00000000 mount_volume
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:2525   .text.mount_volume:000002f0 $d
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:12534  .bss.FatFs:00000000 FatFs
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:12528  .bss.Fsid:00000000 Fsid
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:2534   .text.put_fat:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:2539   .text.put_fat:00000000 put_fat
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:2820   .text.get_fat:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:2825   .text.get_fat:00000000 get_fat
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 395


C:\Users\86157\AppData\Local\Temp\ccb17msG.s:3071   .text.dir_sdi:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:3076   .text.dir_sdi:00000000 dir_sdi
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:3281   .text.create_chain:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:3286   .text.create_chain:00000000 create_chain
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:3606   .text.remove_chain:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:3611   .text.remove_chain:00000000 remove_chain
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:3772   .text.dir_clear:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:3777   .text.dir_clear:00000000 dir_clear
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:3878   .text.dir_next:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:3883   .text.dir_next:00000000 dir_next
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:4134   .text.dir_alloc:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:4139   .text.dir_alloc:00000000 dir_alloc
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:4254   .text.dir_read:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:4259   .text.dir_read:00000000 dir_read
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:4488   .text.dir_remove:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:4493   .text.dir_remove:00000000 dir_remove
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:4603   .text.sync_fs:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:4608   .text.sync_fs:00000000 sync_fs
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:4722   .text.sync_fs:00000084 $d
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:4728   .text.create_partition:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:4733   .text.create_partition:00000000 create_partition
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:5035   .text.create_partition:00000134 $d
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:5041   .rodata.create_name.str1.4:00000000 $d
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:5048   .text.create_name:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:5053   .text.create_name:00000000 create_name
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:5644   .text.create_name:00000258 $d
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:12508  .rodata.ExCvt:00000000 ExCvt
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:5651   .text.cmp_lfn:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:5656   .text.cmp_lfn:00000000 cmp_lfn
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:5815   .text.cmp_lfn:0000009c $d
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:5820   .text.dir_find:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:5825   .text.dir_find:00000000 dir_find
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:6074   .text.follow_path:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:6079   .text.follow_path:00000000 follow_path
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:6244   .text.gen_numname:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:6249   .text.gen_numname:00000000 gen_numname
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:6478   .text.dir_register:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:6483   .text.dir_register:00000000 dir_register
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:6785   .text.dir_register:00000140 $d
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:6790   .text.get_fileinfo:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:6795   .text.get_fileinfo:00000000 get_fileinfo
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:7210   .text.f_mount:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:7216   .text.f_mount:00000000 f_mount
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:7329   .text.f_mount:00000054 $d
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:7334   .text.f_open:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:7340   .text.f_open:00000000 f_open
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:7838   .text.f_read:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:7844   .text.f_read:00000000 f_read
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:8264   .text.f_write:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:8270   .text.f_write:00000000 f_write
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:8739   .text.f_sync:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:8745   .text.f_sync:00000000 f_sync
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:8896   .text.f_close:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:8902   .text.f_close:00000000 f_close
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:8960   .text.f_lseek:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:8966   .text.f_lseek:00000000 f_lseek
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:9390   .text.f_opendir:00000000 $t
ARM GAS  C:\Users\86157\AppData\Local\Temp\ccb17msG.s 			page 396


C:\Users\86157\AppData\Local\Temp\ccb17msG.s:9396   .text.f_opendir:00000000 f_opendir
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:9544   .text.f_closedir:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:9550   .text.f_closedir:00000000 f_closedir
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:9593   .text.f_readdir:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:9599   .text.f_readdir:00000000 f_readdir
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:9709   .text.f_stat:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:9715   .text.f_stat:00000000 f_stat
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:9813   .text.f_getfree:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:9819   .text.f_getfree:00000000 f_getfree
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:10094  .text.f_truncate:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:10100  .text.f_truncate:00000000 f_truncate
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:10283  .text.f_unlink:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:10289  .text.f_unlink:00000000 f_unlink
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:10499  .text.f_mkdir:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:10505  .text.f_mkdir:00000000 f_mkdir
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:10780  .text.f_rename:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:10786  .text.f_rename:00000000 f_rename
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:11088  .rodata.f_mkfs.str1.4:00000000 $d
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:11098  .text.f_mkfs:00000000 $t
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:11104  .text.f_mkfs:00000000 f_mkfs
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:11820  .text.f_mkfs:000002f0 $d
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:12497  .rodata.defopt.2:00000000 defopt.2
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:12485  .rodata.cst32.1:00000000 cst32.1
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:12473  .rodata.cst.0:00000000 cst.0
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:11828  .text.f_mkfs:00000304 $t
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:12405  .text.f_mkfs:00000654 $d
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:12414  .text.f_mkfs:0000066c $t
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:12470  .rodata.cst.0:00000000 $d
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:12482  .rodata.cst32.1:00000000 $d
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:12494  .rodata.defopt.2:00000000 $d
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:12505  .rodata.ExCvt:00000000 $d
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:12519  .rodata.LfnOfs:00000000 $d
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:12525  .bss.Fsid:00000000 $d
C:\Users\86157\AppData\Local\Temp\ccb17msG.s:12531  .bss.FatFs:00000000 $d

UNDEFINED SYMBOLS
disk_status
disk_write
disk_read
memcmp
disk_initialize
disk_ioctl
memset
strchr
ff_uni2oem
ff_wtoupper
ff_oem2uni
get_fattime
memcpy
